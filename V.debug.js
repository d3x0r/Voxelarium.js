(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * @author d3x0r / https://github.com/d3x0r
 */

THREE.NaturalControls = function ( object, domElement ) {

    this.object = object;
	this.domElement = ( domElement !== undefined ) ? domElement : document;

	this.enabled = true;

	// 65 /*A*/, 83 /*S*/, 68 /*D*/
	this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40
        , A:65, S:83, D:68, W:87, SPACE:32, C:67 };

	// internals

	var scope = this;

	var rotateStart = new THREE.Vector2();
	var rotateEnd = new THREE.Vector2();
	var rotateDelta = new THREE.Vector2();

	var phiDelta = 0;
	var thetaDelta = 0;
	var scale = 1;

	var lastPosition = new THREE.Vector3();



	this.rotateLeft = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		thetaDelta -= angle;

	};

	this.rotateRight = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		thetaDelta += angle;

	};

	this.rotateUp = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		phiDelta -= angle;

	};

	this.rotateDown = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		phiDelta += angle;

	};

	this.update = function ( tick ) {

    touchUpdate();

    if( phiDelta )
        var a = 3;
        scope.object.matrix.motion.rotation.x = -phiDelta;
        scope.object.matrix.motion.rotation.y = thetaDelta;//, 0 );

        //scope.object.matrix.rotateRelative( -phiDelta, thetaDelta, 0 );
        scope.object.matrixWorldNeedsUpdate = true;

        scope.object.matrix.move( tick );
        scope.object.matrix.rotateRelative( 0, 0, -scope.object.matrix.roll );

        thetaDelta = 0;
		phiDelta = 0;
	};



	function onMouseDown( event ) {
		if ( scope.enabled === false ) return;

		event.preventDefault();

		rotateStart.set( event.clientX, event.clientY );

		document.addEventListener( 'mousemove', onMouseMove, false );
		document.addEventListener( 'mouseup', onMouseUp, false );

	}

	function onMouseMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

    rotateEnd.set( event.clientX, event.clientY );
		rotateDelta.subVectors( rotateEnd, rotateStart );

        rotateDelta.x = 32 * (rotateDelta.x / window.innerWidth)
        rotateDelta.y = 32 * (rotateDelta.y / window.innerHeight)

		scope.rotateLeft( 2 * Math.PI * rotateDelta.x  );
		scope.rotateUp( 2 * Math.PI * rotateDelta.y );

		rotateStart.copy( rotateEnd );

	}

	function onMouseUp( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userRotate === false ) return;

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );


	}

	function onMouseWheel( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userZoom === false ) return;

		var delta = 0;

		if ( event.wheelDelta ) { // WebKit / Opera / Explorer 9

			delta = event.wheelDelta;

		} else if ( event.detail ) { // Firefox

			delta = - event.detail;

		}

		if ( delta > 0 ) {

			scope.zoomOut();

		} else {

			scope.zoomIn();

		}

	}

	function onKeyDown( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userPan === false ) return;

		switch ( event.keyCode ) {
            case scope.keys.SPACE:
                scope.object.matrix.motion.speed.y = 100;
                break;
            case scope.keys.C:
                scope.object.matrix.motion.speed.y = -100;
                break;
            case scope.keys.A:
                scope.object.matrix.motion.speed.x = -100;
				break;
			case scope.keys.W:
                scope.object.matrix.motion.speed.z = 100;
				break;
			case scope.keys.S:
                scope.object.matrix.motion.speed.z = -100;
				break;
			case scope.keys.D:
                scope.object.matrix.motion.speed.x = 100;
				break;
		}

	}

	function onKeyUp( event ) {

        switch ( event.keyCode ) {
            case scope.keys.SPACE:
                scope.object.matrix.motion.speed.y = 0;
                break;
            case scope.keys.C:
                scope.object.matrix.motion.speed.y = 0;
                break;

            case scope.keys.A:
                scope.object.matrix.motion.speed.x = 0;
				break;
			case scope.keys.W:
                scope.object.matrix.motion.speed.z = 0;
				break;
			case scope.keys.S:
                scope.object.matrix.motion.speed.z = 0;
				break;
			case scope.keys.D:
                scope.object.matrix.motion.speed.x = 0;
				break;
        }
		//switch ( event.keyCode ) {

		//		break;
		//}

	}

var touches = [];

TouchList.prototype.forEach = function(c){ for( var n = 0; n < this.length; n++ ) c(this[n]); }

function touchUpdate() {
  if( touches.length == 1 ){
    var t = touches[0];
    if( t.new )
    {
      rotateStart.set( t.x, t.y );
      t.new = false;
    }
    else {

            rotateEnd.set( t.x, t.y );
      		rotateDelta.subVectors( rotateEnd, rotateStart );

            rotateDelta.x = -2 * (rotateDelta.x / window.innerWidth)
            rotateDelta.y = - 2 * (rotateDelta.y / window.innerHeight)
      		scope.rotateLeft( Math.PI/2 * rotateDelta.x   );
      		scope.rotateUp( Math.PI/2 * rotateDelta.y );
            console.log( rotateDelta )
      		rotateStart.copy( rotateEnd );

    }
  }
}

function onTouchStart( e ) {
  e.preventDefault();
  e.changedTouches.forEach( (touch)=>{
    touches.push( {ID:touch.identifier,
      x : touch.clientX,
      y : touch.clientY,
      new : true
    })
  })
}

function onTouchMove( e ) {
  e.preventDefault();
  e.changedTouches.forEach( (touchChanged)=>{
    var touch = touches.find( (t)=> t.ID === touchChanged.identifier );
    if( touch ) {
      touch.x = touchChanged.clientX;
      touch.y = touchChanged.clientY;
    }
  })
}

function onTouchEnd( e ) {
  e.preventDefault();
  e.changedTouches.forEach( (touchChanged)=>{
    var touchIndex = touches.findIndex( (t)=> t.ID === touchChanged.identifier );
    if( touchIndex >= 0 )
       touches.splice( touchIndex, 1 )
  })
}

    function ignore(event) {
        event.preventDefault();
    }
    this.disable = function() {
    	scope.domElement.removeEventListener( 'contextmenu', ignore, false );
    	scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );
    	scope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );
    	scope.domElement.removeEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    	window.removeEventListener( 'keydown', onKeyDown, false );
    	window.removeEventListener( 'keyup', onKeyUp, false );
    }

    this.enable = function() {
    	scope.domElement.addEventListener( 'contextmenu', ignore, false );
    	scope.domElement.addEventListener( 'mousedown', onMouseDown, false );
    	scope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );
      scope.domElement.addEventListener( 'touchstart', onTouchStart, false );
      scope.domElement.addEventListener( 'touchmove', onTouchMove, false );
      scope.domElement.addEventListener( 'touchend', onTouchEnd, false );

    	scope.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    	window.addEventListener( 'keydown', onKeyDown, false );
    	window.addEventListener( 'keyup', onKeyUp, false );
    }
    this.enable();

};

//THREE.NaturalCamera.

THREE.NaturalControls.prototype = Object.create( THREE.EventDispatcher.prototype );

},{}],2:[function(require,module,exports){


var casting = {
    reset: function() { this.cubes = 0; },
    material : new THREE.LineBasicMaterial({color:'blue',linewidth:3}),
    geometry : new THREE.BufferGeometry,
    mesh : null,
    addRef : null,
    cubes : 0
};
casting.geometry.dynamic = true;
casting.mesh = new THREE.LineSegments( casting.geometry, casting.material );
 casting.mesh.frustumCulled = false;
 var vertices = new Float32Array( 500 * 3 ); // 3 vertices per point
casting.geometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) )

casting.addRef = function updateCastMesh( currentRef) {
  {
    var unit = currentRef.cluster.voxelUnitSize;
    var x = currentRef.wx * unit
    var y = currentRef.wy * unit
    var z = currentRef.wz * unit
  }
  var P = [new THREE.Vector3( x, y, z )
    , new THREE.Vector3( x + unit, y, z )
    , new THREE.Vector3( x, y + unit, z )
    , new THREE.Vector3( x + unit, y + unit, z )
    , new THREE.Vector3( x, y, z + unit )
    , new THREE.Vector3( x + unit, y, z + unit )
    , new THREE.Vector3( x, y + unit, z + unit )
    , new THREE.Vector3( x + unit, y + unit, z + unit )
    ]
    var geometry = casting.geometry;
    //    console.log( "add", x, y, z )
    var v = casting.cubes * 24*3;
    vertices[v++] = P[0].x; vertices[v++] = P[0].y; vertices[v++] = P[0].z;
    vertices[v++] = P[1].x; vertices[v++] = P[1].y; vertices[v++] = P[1].z;
    vertices[v++] = P[1].x; vertices[v++] = P[1].y; vertices[v++] = P[1].z;
    vertices[v++] = P[3].x; vertices[v++] = P[3].y; vertices[v++] = P[3].z;
    vertices[v++] = P[3].x; vertices[v++] = P[3].y; vertices[v++] = P[3].z;
    vertices[v++] = P[2].x; vertices[v++] = P[2].y; vertices[v++] = P[2].z;
    vertices[v++] = P[2].x; vertices[v++] = P[2].y; vertices[v++] = P[2].z;
    vertices[v++] = P[0].x; vertices[v++] = P[0].y; vertices[v++] = P[0].z;

    vertices[v++] = P[4].x; vertices[v++] = P[4].y; vertices[v++] = P[4].z;
    vertices[v++] = P[5].x; vertices[v++] = P[5].y; vertices[v++] = P[5].z;
    vertices[v++] = P[5].x; vertices[v++] = P[5].y; vertices[v++] = P[5].z;
    vertices[v++] = P[7].x; vertices[v++] = P[7].y; vertices[v++] = P[7].z;
    vertices[v++] = P[7].x; vertices[v++] = P[7].y; vertices[v++] = P[7].z;
    vertices[v++] = P[6].x; vertices[v++] = P[6].y; vertices[v++] = P[6].z;
    vertices[v++] = P[6].x; vertices[v++] = P[6].y; vertices[v++] = P[6].z;
    vertices[v++] = P[4].x; vertices[v++] = P[4].y; vertices[v++] = P[4].z;

    vertices[v++] = P[0].x; vertices[v++] = P[0].y; vertices[v++] = P[0].z;
    vertices[v++] = P[4].x; vertices[v++] = P[4].y; vertices[v++] = P[4].z;
    vertices[v++] = P[1].x; vertices[v++] = P[1].y; vertices[v++] = P[1].z;
    vertices[v++] = P[5].x; vertices[v++] = P[5].y; vertices[v++] = P[5].z;
    vertices[v++] = P[2].x; vertices[v++] = P[2].y; vertices[v++] = P[2].z;
    vertices[v++] = P[6].x; vertices[v++] = P[6].y; vertices[v++] = P[6].z;
    vertices[v++] = P[3].x; vertices[v++] = P[3].y; vertices[v++] = P[3].z;
    vertices[v++] = P[7].x; vertices[v++] = P[7].y; vertices[v++] = P[7].z;
    this.cubes++;
    geometry.attributes.position.needsUpdate = true
    geometry.verticesNeedUpdate = true;
}



THREE.GameMouse = function ( object, domElement ) {
    this.object = object;
	this.domElement = ( domElement !== undefined ) ? domElement : document;
    this.casting = casting;
  this.camera = null;
  var scope = this;
  this.mode = 0;
  this.voxelSelector = null;
  this.clusters = null;
  this.mouseRay = { n : THREE.Vector3Zero.clone(), o: new THREE.Vector3().delete() }
  this.mouseClock = new THREE.Clock();
  this.mouseEvents = [];
  this.currentAddType = Voxelarium.Voxels.types[2];

  var mouseButtonCount = 0;
  var mouseScrollX = 0;
  var mouseScrollY = 0;
  var cursorDistance = 650;

  this.setCurrentType = function( type ) {
      this.currentAddType = type;
  }
  this.setMouseRay = function( camera, e ) {
      //#define BEGIN_SCALE 1
      var rect = scope.domElement.getBoundingClientRect();
      const w = rect.right-rect.left;//window.innerWidth;
      const h = rect.bottom-rect.top;//window.innerHeight;
      var x = (((e.clientX-rect.left)-(w/2.0))/w) * 2;
      var y = (((e.clientY-rect.top)-(h/2.0))/h) * 2;
      //console.log( `mouse at ${x}, ${y}` )

      var mouse_ray_slope = camera.matrix.left.clone().multiplyScalar( x*camera.aspect );
      mouse_ray_slope.addScaledVector( camera.matrix.up, -(y) );

      // 0.47 is some magic number for 90 degree FOV
      //mouse_ray_slope.addScaledVector( camera.matrix.forward, -0.47 );
      // 75 degree view and like 3/4 aspect
      //mouse_ray_slope.addScaledVector( camera.matrix.forward, -0.605 );//-Math.sqrt(1 - mouse_ray_slope.length()) );
      mouse_ray_slope.addScaledVector( camera.matrix.backward, -1.304);//0.652 );//-Math.sqrt(1 - mouse_ray_slope.length()) );

      //mouse_ray_slope.unproject( camera );

      //var mouse_ray_target = THREE.Vector3Zero.clone().addScaledVector( THREE.Vector3Forward, 1000 );
      //mouse_ray_target.addScaledVector( THREE.Vector3Left,  camera.aspect*1000*x );
      //mouse_ray_target.addScaledVector( THREE.Vector3Up, -(1000)*y );

      //mouse_ray_origin.applyMatrix4( camera.matrix );
      //mouse_ray_target.applyMatrix4( camera.matrix );

      //var mouse_ray_slope = mouse_ray_target.clone().sub( mouse_ray_origin );
      //mouse_ray_slope.sub(camera.matrix.origin);
  	  mouse_ray_slope.normalize();
      //mouse_ray_origin.delete();
      scope.mouseRay.n.delete();

      scope.mouseRay.n = mouse_ray_slope;
      scope.mouseRay.o = camera.matrix.origin;
  }

  this.update = function() {
    if( !scope.clusters )
      return;
     switch( scope.mode )
     {
     case 0:
        var cluster = scope.clusters[0];
        if( mouseScrollY ) {
            cursorDistance += ( mouseScrollY / 120 ) * cluster.voxelUnitSize;
            mouseScrollY = 0;
        }
        if( scope.mouseRay ) {
            var o = scope.mouseRay.o;
            var result;
            result = rayCast( cluster, scope.mouseRay.o, scope.mouseRay.n )

            if( Voxelarium.selector.currentVoxel )
              Voxelarium.selector.currentVoxel.delete();

            if( result ) {
                Voxelarium.selector.currentAddVoxel = cluster.getVoxelRef( false, result.PredPointedVoxel.x, result.PredPointedVoxel.y, result.PredPointedVoxel.z )
              Voxelarium.selector.currentVoxel = result.ref;
          }
          /* this was another way of getting voxels... raycast is the routine for this now?
            rayCast projects a line through each plane going going out, and is more accurate than this.
            Plus rayCast can return the side of detection. */
          if( false ){

                var vox = o.clone().addScaledVector( scope.mouseRay.n, cursorDistance ).delete()

                var vrTo = Voxelarium.VoxelRef( cluster, null
                    , Math.floor(vox.x/cluster.voxelUnitSize)
                    , Math.floor(vox.y/cluster.voxelUnitSize)
                    , Math.floor(vox.z/cluster.voxelUnitSize) );
                var vrFrom = Voxelarium.VoxelRef( cluster, null
                        , Math.floor(o.x/cluster.voxelUnitSize)
                        , Math.floor(o.y/cluster.voxelUnitSize)
                        , Math.floor(o.z/cluster.voxelUnitSize) );
                //console.log( "things are ", vrTo, vrFrom )
                //this.casting.reset();
                //console.log( "---------- new set ----------- ")
                var ref = vrFrom.forEach( vrTo, false, (ref)=>{
                    //this.casting.addRef( ref );
                  //console.log( `check at `, ref.wx, ref.wy, ref.wz )
                  if( ref.voxelType && !ref.voxelType.properties.Is_PlayerCanPassThrough )
                    return ref;
                  return null;
                })
                //if( ref ) {
                //    this.casting.geometry.computeBoundingSphere();
                //    this.casting.geometry.setDrawRange( 0, (this.casting.cubes-1)*24 );
                //}
                if( ref ) {
                  Voxelarium.selector.currentVoxel = ref;
                } else {
                  Voxelarium.selector.currentVoxel = cluster.getVoxelRef( true, vox.x, vox.y, vox.z );
                }
                vrTo.delete();
                vrFrom.delete();
            }
        }

        if( scope.mouseEvents ) {
            var mEvent = scope.mouseEvents.shift();
            if( mEvent ) {
                if( mEvent.down ) {
                    if( mEvent.button === 0 ) { // left
                        var ref = Voxelarium.selector.currentAddVoxel;
                        if( ref && ref.sector ){
                            ref.sector.setCube( ref.x, ref.y, ref.z, scope.currentAddType )
                            ref.cluster.mesher.SectorUpdateFaceCulling( ref.sector, true )
                            //basicMesher.SectorUpdateFaceCulling_Partial( cluster, sector, Voxelarium.FACEDRAW_Operations.ALL, true )
                            ref.cluster.mesher.MakeSectorRenderingData( ref.sector );
                            Voxelarium.db.world.storeSector( ref.sector );
                        }

                    }
                    if( mEvent.button === 2 ) { // right
                        var ref = Voxelarium.selector.currentVoxel;
                        if( ref && ref.sector ){
                            ref.sector.setCube( ref.x, ref.y, ref.z, Voxelarium.Voxels.Void )
                            ref.cluster.mesher.SectorUpdateFaceCulling( ref.sector, true )
                            //basicMesher.SectorUpdateFaceCulling_Partial( cluster, sector, Voxelarium.FACEDRAW_Operations.ALL, true )
                            ref.cluster.mesher.MakeSectorRenderingData( ref.sector );
                            Voxelarium.db.world.storeSector( ref.sector );
                        }
                    }
                }
            }
        }

        break;
     }
      /*
      scope.object.matrix.rotateRelative( -phiDelta, thetaDelta, 0 );
      scope.object.matrix.rotateRelative( 0, 0, -scope.object.matrix.roll );
      scope.object.matrixWorldNeedsUpdate = true;
      */
  }

function mouseEvent( x, y, b, down ) {
    var ev = { x : x,
        y : y,
        button : b,
        delta : scope.mouseClock.getDelta(),
        down : down
    }

    scope.mouseEvents.push( ev );
}

var ongoingTouches = [];

function copyTouch(touch) {
  return { identifier: touch.identifier, pageX: touch.pageX, pageY: touch.pageY };
}
function ongoingTouchIndexById(idToFind) {
  for (var i = 0; i < ongoingTouches.length; i++) {
    var id = ongoingTouches[i].identifier;

    if (id == idToFind) {
      return i;
    }
  }
  return -1;    // not found
}
function onTouchDown(event) {
  event.preventDefault();
  var touches = event.changedTouches;
  for( var i = 0; i < touches.length; i++ ) {
    console.log( `touch ${i}=${touches[i]}`);
    ongoingTouches.push( copyTouch( touches[i] ) );

  }
}

function onTouchUp(event) {
  event.preventDefault();
}

function onTouchMove(event) {
  event.preventDefault();
  var touches = event.changedTouches;
  for( var i = 0; i < touches.length; i++ ) {
    var idx = ongoingTouchIndexById(touches[i].identifier);
    if( idx >= 0 ) {
      ongoingTouches.splice( idx, 1, copyTouch( touches[i] ) );
    }
  }
}

function onTouchCancel(event) {
  event.preventDefault();
}



  function onMouseDown(event) {
      if ( scope.enabled === false ) return;
      event.preventDefault();
      mouseEvent( event.clientX, event.clientY, event.button, true );
  }

  function onMouseUp(event) {
      if ( scope.enabled === false ) return;
      event.preventDefault();
      mouseEvent( event.clientX, event.clientY, event.button, false );
  }

    function onMouseMove( event ) {

    	if ( scope.enabled === false ) return;

    	event.preventDefault();

        scope.setMouseRay( camera, event );

    }

    function onMouseWheel( event ) {
        event.preventDefault();
        mouseScrollX += event.wheelDeltaX;
        mouseScrollY += event.wheelDeltaY;
    }

  function ignore(event) {
      event.preventDefault();
  }

  this.disable = function() {
    scope.domElement.removeEventListener( 'contextmenu', ignore, false );
    scope.domElement.removeEventListener( 'touchstart', onTouchDown, false );
    scope.domElement.removeEventListener( 'touchend', onTouchUp, false );
    scope.domElement.removeEventListener( 'touchcancel', onTouchCancel, false );
    scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );
    scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );
    scope.domElement.removeEventListener( 'mouseup', onMouseUp, false );
    scope.domElement.removeEventListener( 'mousemove', onMouseMove, false );
    scope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );
    scope.domElement.removeEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    //window.removeEventListener( 'keydown', onKeyDown, false );
    //window.removeEventListener( 'keyup', onKeyUp, false );
  }

  this.enable = function() {
    scope.domElement.addEventListener( 'contextmenu', ignore, false );
    scope.domElement.addEventListener( 'touchstart', onTouchDown, false );
    scope.domElement.addEventListener( 'touchend', onTouchUp, false );
    scope.domElement.addEventListener( 'touchcancel', onTouchCancel, false );
    scope.domElement.addEventListener( 'touchmove', onTouchMove, false );
    scope.domElement.addEventListener( 'mousedown', onMouseDown, false );
    scope.domElement.addEventListener( 'mouseup', onMouseUp, false );
    scope.domElement.addEventListener( 'mousemove', onMouseMove, false );
    scope.domElement.addEventListener( 'mousewheel', onMouseWheel, false ); // firefox
    scope.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    //window.addEventListener( 'keydown', onKeyDown, false );
    //window.addEventListener( 'keyup', onKeyUp, false );
  }
  this.enable();


}





function  rayCast(cluster, o, forward )
{
    var Out = null;
  var Delta_h = new THREE.Vector4Pool.new(),Delta_v = new THREE.Vector4Pool.new(),Delta_s = new THREE.Vector4Pool.new();
  var Offset_h = new THREE.Vector4Pool.new(), Offset_v = new THREE.Vector4Pool.new(), Offset_s = new THREE.Vector4Pool.new();
  var Norm_h = new THREE.Vector3Pool.new(), Norm_v = new THREE.Vector3Pool.new(), Norm_s = new THREE.Vector3Pool.new();
  var Collision_h = new THREE.Vector4Pool.new(), Collision_v = new THREE.Vector4Pool.new(), Collision_s = new THREE.Vector4Pool.new();

  var ActualCube_x,ActualCube_y,ActualCube_z;
  var NewCube_x,NewCube_y,NewCube_z;
  var Collide_X, Collide_Y, Collide_Z;
  var i;

  var Norm = forward;

  Collide_X = Collide_Y = Collide_Z = false;

  if (Norm.x >= 0.01 )
  {
    Collide_X = true;
    Delta_h.x = 1.0;
    Delta_h.y = Norm.y / Norm.x;
    Delta_h.z = Norm.z / Norm.x;
    Delta_h.w = 0;
    Delta_h.w = Delta_h.length();

    Collision_h.x = (Math.floor(o.x / cluster.voxelUnitSize) + 1.0)*cluster.voxelUnitSize;
    Collision_h.y = (Collision_h.x - o.x) * Delta_h.y + o.y;
    Collision_h.z = (Collision_h.x - o.x) * Delta_h.z + o.z;
    Collision_h.w = (Collision_h.x - o.x) * Delta_h.w;

    Offset_h.x = cluster.voxelUnitSize;
    Offset_h.y = Delta_h.y * cluster.voxelUnitSize;
    Offset_h.z = Delta_h.z * cluster.voxelUnitSize;
    Offset_h.w = Delta_h.w * cluster.voxelUnitSize;
    Norm_h.x = Offset_h.x/2;// / (cluster.voxelUnitSize/2);
    Norm_h.y = 0 / (cluster.voxelUnitSize/2);
    Norm_h.z = 0 / (cluster.voxelUnitSize/2);
  }
  else if (Norm.x <= -0.01)
  {
    Collide_X = true;

    Delta_h.x = 1.0;
    Delta_h.y = Norm.y / -Norm.x;
    Delta_h.z = Norm.z / -Norm.x;
    Delta_h.w = 0;
    Delta_h.w = Delta_h.length();

    Collision_h.x = (Math.floor(o.x / cluster.voxelUnitSize))*cluster.voxelUnitSize;
    Collision_h.y = (o.x - Collision_h.x) * Delta_h.y + o.y;
    Collision_h.z = (o.x - Collision_h.x) * Delta_h.z + o.z;
    Collision_h.w = (o.x - Collision_h.x) * Delta_h.w;
    Offset_h.x = -cluster.voxelUnitSize;
    Offset_h.y = Delta_h.y * cluster.voxelUnitSize;
    Offset_h.z = Delta_h.z * cluster.voxelUnitSize;
    Offset_h.w = Delta_h.w * cluster.voxelUnitSize;
    Norm_h.x = Offset_h.x/2;// / (cluster.voxelUnitSize/2);
    Norm_h.y = 0 / (cluster.voxelUnitSize/2);
    Norm_h.z = 0 / (cluster.voxelUnitSize/2);
  }

  if (Norm.y >= 0.01 )
  {
    Collide_Y = true;
    Delta_v.x = Norm.x / Norm.y;
    Delta_v.y = 1.0;
    Delta_v.z = Norm.z / Norm.y;
    Delta_v.w = 0;
    Delta_v.w = Delta_v.length();

    Collision_v.y = (Math.floor(o.y / cluster.voxelUnitSize)+1) * cluster.voxelUnitSize;
    var dely = (Collision_v.y - o.y);
    Collision_v.x = dely * Delta_v.x + o.x;
    Collision_v.z = dely * Delta_v.z + o.z;
    Collision_v.w = dely * Delta_v.w;
    Offset_v.y = cluster.voxelUnitSize;
    Offset_v.x = Delta_v.x * cluster.voxelUnitSize;
    Offset_v.z = Delta_v.z * cluster.voxelUnitSize;
    Offset_v.w = Delta_v.w * cluster.voxelUnitSize;
    Norm_v.x = 0 / (cluster.voxelUnitSize/2);
    Norm_v.y = Offset_v.y/2;// / (cluster.voxelUnitSize/2);
    Norm_v.z = 0 / (cluster.voxelUnitSize/2);
  }
  else if (Norm.y <= -0.01)
  {
    Collide_Y = true;
    Delta_v.x = Norm.x / -Norm.y;
    Delta_v.y = 1.0;
    Delta_v.z = Norm.z / -Norm.y;
    Delta_v.w = 0;
    Delta_v.w = Delta_v.length();

    Collision_v.y = (Math.floor(o.y / cluster.voxelUnitSize)) * cluster.voxelUnitSize;
    var dely = (o.y-Collision_v.y );
    Collision_v.x = (dely) * Delta_v.x + o.x;
    Collision_v.z = (dely) * Delta_v.z + o.z;
    Collision_v.w = (dely) * Delta_v.w;

    Offset_v.y = -cluster.voxelUnitSize;
    Offset_v.x = Delta_v.x * cluster.voxelUnitSize;
    Offset_v.z = Delta_v.z * cluster.voxelUnitSize;
    Offset_v.w = Delta_v.w * cluster.voxelUnitSize;
    Norm_v.x = 0 / (cluster.voxelUnitSize/2);
    Norm_v.y = Offset_v.y/2;// / (cluster.voxelUnitSize/2);
    Norm_v.z = 0 / (cluster.voxelUnitSize/2);
  }

  if (Norm.z >= 0.01)
  {
    Collide_Z = true;
    Delta_s.x = Norm.x / Norm.z;
    Delta_s.y = Norm.y / Norm.z;
    Delta_s.z = 1.0;
    Delta_s.w = 0;
    Delta_s.w = Delta_s.length();
    Collision_s.z = (Math.floor(o.z / cluster.voxelUnitSize) + 1.0)*cluster.voxelUnitSize;
    Collision_s.x = (Collision_s.z - o.z) * Delta_s.x + o.x;
    Collision_s.y = (Collision_s.z - o.z) * Delta_s.y + o.y;
    Collision_s.w = (Collision_s.z - o.z) * Delta_s.w;

    Offset_s.x = Delta_s.x * cluster.voxelUnitSize;
    Offset_s.y = Delta_s.y * cluster.voxelUnitSize;
    Offset_s.z = cluster.voxelUnitSize;
    Offset_s.w = Delta_s.w * cluster.voxelUnitSize;
    Norm_s.x = 0 / (cluster.voxelUnitSize/2);
    Norm_s.y = 0 / (cluster.voxelUnitSize/2);
    Norm_s.z = Offset_s.z/2;// / (cluster.voxelUnitSize/2);
  }
  else if (Norm.z <= -0.01)
  {
    Collide_Z = true;
    Delta_s.x = Norm.x / -Norm.z;
    Delta_s.y = Norm.y / -Norm.z;
    Delta_s.z = 1.0;
    Delta_s.w = 0;
    Delta_s.w = Delta_s.length();
    Collision_s.z = (Math.floor(o.z / cluster.voxelUnitSize) )*cluster.voxelUnitSize;
    Collision_s.x = (o.z - Collision_s.z) * Delta_s.x + o.x;
    Collision_s.y = (o.z - Collision_s.z) * Delta_s.y + o.y;
    Collision_s.w = (o.z - Collision_s.z) * Delta_s.w;

    Offset_s.x = Delta_s.x * cluster.voxelUnitSize;
    Offset_s.y = Delta_s.y * cluster.voxelUnitSize;
    Offset_s.z = - cluster.voxelUnitSize;
    Offset_s.w = Delta_s.w * cluster.voxelUnitSize;

    Norm_s.x = 0 / (cluster.voxelUnitSize/2);
    Norm_s.y = 0 / (cluster.voxelUnitSize/2);
    Norm_s.z = Offset_s.z/2;// / (cluster.voxelUnitSize/2);
  }



//  printf("yaw: %04lf pitch: %lf Offset_y:%lf Offset_z:%lf xyz:%lf %lf %lf NXYZ:%lf %lf %lf Dxyz:%lf %lf %lf", yaw,pitch, Delta_h.y, Delta_h.z,x,y,z, Norm_h.x, Norm_h.y, Norm_h.z, Delta_h.x, Delta_h.y, Delta_h.z);
 //printf("Angle (y:%lf p:%lf) XYZ:(%lf %lf %lf) Off(%lf %lf %lf %lf) Coll(%lf %lf %lf %lf) Norm(%lg %lg %lf) :\n", yaw,pitch,x,y,z, Offset_s.x, Offset_s.y, Offset_s.z, Offset_s.w, Collision_s.x, Collision_s.y, Collision_s.z, Collision_s.w, Norm_s.x,Norm_s.y, Norm_s.z);

  var Match_h = 0;
  var Match_s = 0;
  var Match_v = 0;
  var Cycle = 1;
  var MinW = 1000000.0;
  var ref;
  //console.log( '-------------------------');
  for (i=0;i<150;i++)
  {

    // Horizontal X axis.
    if (Collide_X)
    {
      if (Match_h==0 && Collision_h.w < MinW)
      {
        ActualCube_x = Math.floor((Collision_h.x - Norm_h.x) / cluster.voxelUnitSize);
        ActualCube_y = Math.floor((Collision_h.y - Norm_h.y) / cluster.voxelUnitSize);
        ActualCube_z = Math.floor((Collision_h.z - Norm_h.z) / cluster.voxelUnitSize);
        NewCube_x = Math.floor((Collision_h.x + Norm_h.x) / cluster.voxelUnitSize);
        NewCube_y = Math.floor((Collision_h.y + Norm_h.y) / cluster.voxelUnitSize);
        NewCube_z = Math.floor((Collision_h.z + Norm_h.z) / cluster.voxelUnitSize);
        if( ( ref = cluster.getVoxelRef( false, NewCube_x, NewCube_y, NewCube_z) ) && ref.sector && !ref.voxelType.properties.Is_PlayerCanPassThrough)
        {
            //console.log( `x check ${NewCube_x}  ${NewCube_y}  ${NewCube_z}    ${ActualCube_x} ${ActualCube_y} ${ActualCube_z}  ${MinW}  ${Collision_h.w}`)
            Out = { PredPointedVoxel : new THREE.Vector3( ActualCube_x, ActualCube_y, ActualCube_z ),
                    PointedVoxel : new THREE.Vector3( NewCube_x, NewCube_y, NewCube_z ),
                    ref : ref
                    };
          // printf(" MATCH_H: %lf\n",Collision_h.w);
          Match_h = Cycle;
          MinW = Collision_h.w;
        } else if( ref ) ref.delete();
      }
    }

    // Horizontal Z axis.

    if (Collide_Z)
    {
      if (Match_s == 0 && Collision_s.w < MinW)
      {
        ActualCube_x = Math.floor((Collision_s.x - Norm_s.x) / cluster.voxelUnitSize);
        ActualCube_y = Math.floor((Collision_s.y - Norm_s.y) / cluster.voxelUnitSize);
        ActualCube_z = Math.floor((Collision_s.z - Norm_s.z) / cluster.voxelUnitSize);
        NewCube_x = Math.floor((Collision_s.x + Norm_s.x) / cluster.voxelUnitSize);
        NewCube_y = Math.floor((Collision_s.y + Norm_s.y) / cluster.voxelUnitSize);
        NewCube_z = Math.floor((Collision_s.z + Norm_s.z) / cluster.voxelUnitSize);
        //console.log( `z check ${NewCube_x}  ${NewCube_y}  ${NewCube_z}  ${MinW}  ${Collision_s.w} `)
        if( ( ref = cluster.getVoxelRef( false, NewCube_x, NewCube_y, NewCube_z) ) && ref.sector && !ref.voxelType.properties.Is_PlayerCanPassThrough)
        {
            //console.log( `z check ${NewCube_x}  ${NewCube_y}  ${NewCube_z}  ${MinW}  ${Collision_s.w} `)
          Out = { PredPointedVoxel : new THREE.Vector3( ActualCube_x, ActualCube_y, ActualCube_z ),
                  PointedVoxel : new THREE.Vector3( NewCube_x, NewCube_y, NewCube_z ),
                  ref : ref
                   };
          // printf(" MATCH_S: %lf\n",Collision_s.w);
          Match_s = Cycle;
          MinW = Collision_s.w;
        } else if( ref ) ref.delete();
      }
    }

    // Vertical Y axis.

    if (Collide_Y)
    {
      if (Match_v==0 && Collision_v.w < MinW)
      {
        ActualCube_x = Math.floor((Collision_v.x - Norm_v.x) / cluster.voxelUnitSize);
        ActualCube_y = Math.floor((Collision_v.y - Norm_v.y) / cluster.voxelUnitSize);
        ActualCube_z = Math.floor((Collision_v.z - Norm_v.z) / cluster.voxelUnitSize);
        NewCube_x = Math.floor((Collision_v.x + Norm_v.x) / cluster.voxelUnitSize);
        NewCube_y = Math.floor((Collision_v.y + Norm_v.y) / cluster.voxelUnitSize);
        NewCube_z = Math.floor((Collision_v.z + Norm_v.z) / cluster.voxelUnitSize);
        if( ( ref = cluster.getVoxelRef( false, NewCube_x, NewCube_y, NewCube_z) ) && ref.sector && !ref.voxelType.properties.Is_PlayerCanPassThrough )
        {
            //console.log( `y check ${NewCube_x}  ${NewCube_y}  ${NewCube_z}  ${MinW}  ${Collision_v.w} `)
          Out = { PredPointedVoxel : new THREE.Vector3( ActualCube_x, ActualCube_y, ActualCube_z ),
                  PointedVoxel : new THREE.Vector3( NewCube_x, NewCube_y, NewCube_z ),
                  ref : ref
                   };
          // printf(" MATCH_V: %lf\n",Collision_v.w);
          Match_v = Cycle;
          MinW = Collision_v.w;
        } else if( ref ) ref.delete();
      }
    }

      //printf(" Match (H:%lf S:%lf V:%lf) \n", Collision_h.w, Collision_s.w, Collision_v.w);
      if (Match_h>0 && (Match_h - Cycle)<-100) return Out;
      if (Match_s>0 && (Match_s - Cycle)<-100) return Out;
      if (Match_v>0 && (Match_v - Cycle)<-100) return Out;

    Collision_h.x += Offset_h.x; Collision_h.y += Offset_h.y; Collision_h.z += Offset_h.z; Collision_h.w += Offset_h.w;
    Collision_v.x += Offset_v.x; Collision_v.y += Offset_v.y; Collision_v.z += Offset_v.z; Collision_v.w += Offset_v.w;
    Collision_s.x += Offset_s.x; Collision_s.y += Offset_s.y; Collision_s.z += Offset_s.z; Collision_s.w += Offset_s.w;
    Cycle ++;
  }
  Delta_h.delete();
  Delta_v.delete();
  Delta_s.delete();
  Offset_h.delete();
  Offset_v.delete();
  Offset_s.delete();
  Norm_h.delete();
  Norm_v.delete();
  Norm_s.delete();
  Collision_h.delete();
  Collision_v.delete();
  Collision_s.delete();

  return Out;
}

},{}],3:[function(require,module,exports){


glow = {

 glowcomposer : null,
 scenecomposer : null,
 finalcomposer : null,

 renderTargetGlow : null,
	renderTarget : null,
        render : null,
    };


var glowcomposer;
var scenecomposer;
var finalcomposer;

var renderTargetGlow;
var	renderTarget;

var finalshader = {
    uniforms: {
        tDiffuse: { type: "t", value: 0, texture: null }, // The base scene buffer
        tGlow: { type: "t", value: 1, texture: null }, // The glow scene buffer
		tDiffuseDepth: { type: "t", value: 0, texture: null }, // The base scene buffer
        tGlowDepth: { type: "t", value: 1, texture: null }, // The glow scene buffer
		cameraNear: { type: 'f', value: 1 },
		cameraFar: { type: 'f', value: 10000 },
    },

    vertexShader: [
        "varying vec2 vUv;",

        "void main() {",

            "vUv = vec2( uv.x, uv.y );",
            "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

        "}"
    ].join(""),

    fragmentShader: [
        "uniform sampler2D tDiffuse;",
        "uniform sampler2D tGlow;",
		"uniform sampler2D tDiffuseDepth;",
		"uniform sampler2D tGlowDepth;",
		"uniform float cameraNear;",
 		"uniform float cameraFar;",

        "varying vec2 vUv;",

		"float readDepth (sampler2D depthSampler, vec2 coord) {",
        "  float cameraFarPlusNear = cameraFar + cameraNear;",
        "  float cameraFarMinusNear = cameraFar - cameraNear;",
        "  float cameraCoef = 2.0 * cameraNear;",
        "  return 1.0-(cameraCoef / (cameraFarPlusNear - texture2D(depthSampler, coord).x * cameraFarMinusNear));",
        "}",

        "void main() {",

            "vec4 texel = texture2D( tDiffuse, vUv );",
            "vec4 glow = texture2D( tGlow, vUv );",
			"float texelDepth = readDepth( tDiffuseDepth, vUv );",
			"float glowDepth = readDepth( tGlowDepth, vUv );",
			//"float texelDepth = texture2D(tDiffuseDepth, vUv).x;",
            //"if( (texel.r+texel.g+texel.b)== 0.0 ) ",
			"    gl_FragColor = (texel + vec4(0.5, 0.75, 1.0, 3.0) * glow * 1.0);", // Blend the two buffers together (I colorized and intensified the glow at the same time)
			//"    gl_FragColor +=  vec4(texelDepth, glowDepth, 0, 1.0);", // Blend the two buffers together (I colorized and intensified the glow at the same time)
			//"else gl_FragColor = texel;",
			//"gl_FragColor = texel;",

        "}"
    ].join("")
};

var preGlow;
var preFlat;
var overlay;
var scene;

glow.makeComposers =
function makeComposers( renderer, sceneFlat, preFlatSetup, sceneGlow, preGlowSetup, sceneOver ) {
  scene = sceneFlat;
  glow.renderer = renderer;
	renderer.autoClear = false;

  if( !Voxelarium.Settings.use_basic_material ) {

    overlay = sceneOver;
    preGlow = preGlowSetup;
    preFlat = preFlatSetup;
	// Prepare the glow composer's render target
	var renderTargetParameters = { minFilter: THREE.LinearFilter
			, magFilter: THREE.LinearFilter
			//, format: THREE.RGBFormat
			, stencilBufer: false };
	if( !renderTargetGlow ){
	  renderTargetGlow = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight/*, renderTargetParameters*/ );
	  renderTargetGlow.texture.minFilter = THREE.LinearFilter;
	  renderTargetGlow.texture.magFilter = THREE.LinearFilter;
	  renderTargetGlow.texture.stencilBufer = false;
	  renderTargetGlow.depthTexture = new THREE.DepthTexture( );
		//renderTargetGlow.depthTexture.type = isWebGL2 ? THREE.FloatType : THREE.UnsignedShortType;
	}
	// Prepare the blur shader passes
	var hblur = new THREE.ShaderPass( THREE.HorizontalBlurShader );
	var vblur = new THREE.ShaderPass( THREE.VerticalBlurShader );

	var bluriness = 1;

	hblur.uniforms[ "h" ].value = bluriness / window.innerWidth;
	//hblur.material.depthTest = false;
	//hblur.material.depthWrite = false;

	vblur.uniforms[ "v" ].value = bluriness / window.innerHeight;
	//vblur.material.depthTest = false;
	//vblur.material.depthWrite = false;

	// Prepare the glow scene render pass
	var renderModelGlow = new THREE.RenderPass( sceneGlow, camera);

	// Create the glow composer
	glowcomposer = new THREE.EffectComposer( renderer, renderTargetGlow );

	// Add all the glow passes
	glowcomposer.addPass( renderModelGlow );
	glowcomposer.addPass( hblur );
	glowcomposer.addPass( vblur );


	// Prepare the base scene render pass
	var renderModel = new THREE.RenderPass( sceneFlat, camera );
	var renderModel2 = new THREE.RenderPass( sceneGlow, camera );
    //var renderModel3 = new THREE.RenderPass( sceneOver, camera );
	renderModel.clear = true;
	renderModel2.clear = false;
    //renderModel3.clear = false;


	// Prepare the composer's render target
	if( !renderTarget ) {
		renderTarget = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight/*, renderTargetParameters*/ );
		renderTargetGlow.texture.minFilter = THREE.LinearFilter;
		renderTargetGlow.texture.magFilter = THREE.LinearFilter;
		renderTargetGlow.texture.stencilBufer = false;
		renderTarget.depthTexture = new THREE.DepthTexture();
		//renderTarget.depthTexture.type = isWebGL2 ? THREE.FloatType : THREE.UnsignedShortType;
		//renderTarget.depthTexture.type = THREE.FloatType ;//: THREE.UnsignedShortType;
	}
	// Create the composer
//	scenecomposer = new THREE.EffectComposer( renderer, renderTarget );

	// First we need to assign the glow composer's output render target to the tGlow sampler2D of our shader
	// Old Three.js pre-r50
	//finalshader.uniforms[ "tGlow" ].texture = glowcomposer.renderTarget2;
	// New Three.js
	finalshader.uniforms[ "tGlow" ].value = glowcomposer.renderTarget2;
	finalshader.uniforms[ "tGlowDepth" ].value = renderTargetGlow.depthTexture;
	finalshader.uniforms[ "tDiffuseDepth" ].value = renderTarget.depthTexture;
	finalshader.uniforms[ "cameraNear"].value = camera.near;
	finalshader.uniforms[ "cameraFar"].value = camera.far;

	//finalshader.uniforms[ "tDiffuse" ].value = scenecomposer.renderTarget2;
	// Note that the tDiffuse sampler2D will be automatically filled by the EffectComposer

	// Prepare the additive blending pass
	var finalPass = new THREE.ShaderPass( finalshader );
    //finalPass.
	finalPass.needsSwap = false;
	// Make sure the additive blending is rendered to the screen (since it's the last pass)
	finalPass.renderToScreen = true;
    //renderModel3.renderToScreen = true;

	// Create the composer
	finalcomposer = new THREE.EffectComposer( renderer, renderTarget );

	// Add all passes
	finalcomposer.addPass( renderModel );
	finalcomposer.addPass( renderModel2 );
	finalcomposer.addPass( finalPass );
}
    //finalcomposer.addPass( renderModel3 );
}



//exports.render =
glow.render = function glowRender() {
  if( !Voxelarium.Settings.use_basic_material ) {
    preGlow();
    glowcomposer.render();

    preFlat();
	//scenecomposer.render();

	finalshader.uniforms[ "tGlow" ].value = glowcomposer.renderTarget2;
	finalshader.uniforms[ "tGlowDepth" ].value = renderTargetGlow.depthTexture.texture;
	finalshader.uniforms[ "tDiffuseDepth" ].value = renderTarget.depthTexture.texture;
	finalshader.uniforms[ "cameraNear"].value = camera.near;
	finalshader.uniforms[ "cameraFar"].value = camera.far;


    finalcomposer.render();
	   if( overlay )
	     glow.renderer.render( overlay, camera );
  }
  else {
    glow.renderer.render( scene, camera );
    if( overlay )
  	     glow.renderer.render( overlay, camera );

  }
  if( Voxelarium.Settings.VR )
	  effect.submitFrame();

}

},{}],4:[function(require,module,exports){
if (global.GENTLY) require = GENTLY.hijack(require);

var util = require('util'),
    WriteStream = require('fs').WriteStream,
    EventEmitter = require('events').EventEmitter,
    crypto = require('crypto');

function File(properties) {
  EventEmitter.call(this);

  this.size = 0;
  this.path = null;
  this.name = null;
  this.type = null;
  this.hash = null;
  this.lastModifiedDate = null;

  this._writeStream = null;
  
  for (var key in properties) {
    this[key] = properties[key];
  }

  if(typeof this.hash === 'string') {
    this.hash = crypto.createHash(properties.hash);
  } else {
    this.hash = null;
  }
}
module.exports = File;
util.inherits(File, EventEmitter);

File.prototype.open = function() {
  this._writeStream = new WriteStream(this.path);
};

File.prototype.toJSON = function() {
  return {
    size: this.size,
    path: this.path,
    name: this.name,
    type: this.type,
    mtime: this.lastModifiedDate,
    length: this.length,
    filename: this.filename,
    mime: this.mime
  };
};

File.prototype.write = function(buffer, cb) {
  var self = this;
  if (self.hash) {
    self.hash.update(buffer);
  }
  this._writeStream.write(buffer, function() {
    self.lastModifiedDate = new Date();
    self.size += buffer.length;
    self.emit('progress', self.size);
    cb();
  });
};

File.prototype.end = function(cb) {
  var self = this;
  if (self.hash) {
    self.hash = self.hash.digest('hex');
  }
  this._writeStream.end(function() {
    self.emit('end');
    cb();
  });
};

},{"crypto":undefined,"events":undefined,"fs":undefined,"util":undefined}],5:[function(require,module,exports){
if (global.GENTLY) require = GENTLY.hijack(require);

var crypto = require('crypto');
var fs = require('fs');
var util = require('util'),
    path = require('path'),
    File = require('./file'),
    MultipartParser = require('./multipart_parser').MultipartParser,
    QuerystringParser = require('./querystring_parser').QuerystringParser,
    OctetParser       = require('./octet_parser').OctetParser,
    JSONParser = require('./json_parser').JSONParser,
    StringDecoder = require('string_decoder').StringDecoder,
    EventEmitter = require('events').EventEmitter,
    Stream = require('stream').Stream,
    os = require('os');

function IncomingForm(opts) {
  if (!(this instanceof IncomingForm)) return new IncomingForm(opts);
  EventEmitter.call(this);

  opts=opts||{};

  this.error = null;
  this.ended = false;

  this.maxFields = opts.maxFields || 1000;
  this.maxFieldsSize = opts.maxFieldsSize || 2 * 1024 * 1024;
  this.keepExtensions = opts.keepExtensions || false;
  this.uploadDir = opts.uploadDir || os.tmpDir();
  this.encoding = opts.encoding || 'utf-8';
  this.headers = null;
  this.type = null;
  this.hash = opts.hash || false;
  this.multiples = opts.multiples || false;

  this.bytesReceived = null;
  this.bytesExpected = null;

  this._parser = null;
  this._flushing = 0;
  this._fieldsSize = 0;
  this.openedFiles = [];

  return this;
}
util.inherits(IncomingForm, EventEmitter);
exports.IncomingForm = IncomingForm;

IncomingForm.prototype.parse = function(req, cb) {
  this.pause = function() {
    try {
      req.pause();
    } catch (err) {
      // the stream was destroyed
      if (!this.ended) {
        // before it was completed, crash & burn
        this._error(err);
      }
      return false;
    }
    return true;
  };

  this.resume = function() {
    try {
      req.resume();
    } catch (err) {
      // the stream was destroyed
      if (!this.ended) {
        // before it was completed, crash & burn
        this._error(err);
      }
      return false;
    }

    return true;
  };

  // Setup callback first, so we don't miss anything from data events emitted
  // immediately.
  if (cb) {
    var fields = {}, files = {};
    this
      .on('field', function(name, value) {
        fields[name] = value;
      })
      .on('file', function(name, file) {
        if (this.multiples) {
          if (files[name]) {
            if (!Array.isArray(files[name])) {
              files[name] = [files[name]];
            }
            files[name].push(file);
          } else {
            files[name] = file;
          }
        } else {
          files[name] = file;
        }
      })
      .on('error', function(err) {
        cb(err, fields, files);
      })
      .on('end', function() {
        cb(null, fields, files);
      });
  }

  // Parse headers and setup the parser, ready to start listening for data.
  this.writeHeaders(req.headers);

  // Start listening for data.
  var self = this;
  req
    .on('error', function(err) {
      self._error(err);
    })
    .on('aborted', function() {
      self.emit('aborted');
      self._error(new Error('Request aborted'));
    })
    .on('data', function(buffer) {
      self.write(buffer);
    })
    .on('end', function() {
      if (self.error) {
        return;
      }

      var err = self._parser.end();
      if (err) {
        self._error(err);
      }
    });

  return this;
};

IncomingForm.prototype.writeHeaders = function(headers) {
  this.headers = headers;
  this._parseContentLength();
  this._parseContentType();
};

IncomingForm.prototype.write = function(buffer) {
  if (this.error) {
    return;
  }
  if (!this._parser) {
    this._error(new Error('uninitialized parser'));
    return;
  }

  this.bytesReceived += buffer.length;
  this.emit('progress', this.bytesReceived, this.bytesExpected);

  var bytesParsed = this._parser.write(buffer);
  if (bytesParsed !== buffer.length) {
    this._error(new Error('parser error, '+bytesParsed+' of '+buffer.length+' bytes parsed'));
  }

  return bytesParsed;
};

IncomingForm.prototype.pause = function() {
  // this does nothing, unless overwritten in IncomingForm.parse
  return false;
};

IncomingForm.prototype.resume = function() {
  // this does nothing, unless overwritten in IncomingForm.parse
  return false;
};

IncomingForm.prototype.onPart = function(part) {
  // this method can be overwritten by the user
  this.handlePart(part);
};

IncomingForm.prototype.handlePart = function(part) {
  var self = this;

  if (part.filename === undefined) {
    var value = ''
      , decoder = new StringDecoder(this.encoding);

    part.on('data', function(buffer) {
      self._fieldsSize += buffer.length;
      if (self._fieldsSize > self.maxFieldsSize) {
        self._error(new Error('maxFieldsSize exceeded, received '+self._fieldsSize+' bytes of field data'));
        return;
      }
      value += decoder.write(buffer);
    });

    part.on('end', function() {
      self.emit('field', part.name, value);
    });
    return;
  }

  this._flushing++;

  var file = new File({
    path: this._uploadPath(part.filename),
    name: part.filename,
    type: part.mime,
    hash: self.hash
  });

  this.emit('fileBegin', part.name, file);

  file.open();
  this.openedFiles.push(file);

  part.on('data', function(buffer) {
    if (buffer.length == 0) {
      return;
    }
    self.pause();
    file.write(buffer, function() {
      self.resume();
    });
  });

  part.on('end', function() {
    file.end(function() {
      self._flushing--;
      self.emit('file', part.name, file);
      self._maybeEnd();
    });
  });
};

function dummyParser(self) {
  return {
    end: function () {
      self.ended = true;
      self._maybeEnd();
      return null;
    }
  };
}

IncomingForm.prototype._parseContentType = function() {
  if (this.bytesExpected === 0) {
    this._parser = dummyParser(this);
    return;
  }

  if (!this.headers['content-type']) {
    this._error(new Error('bad content-type header, no content-type'));
    return;
  }

  if (this.headers['content-type'].match(/octet-stream/i)) {
    this._initOctetStream();
    return;
  }

  if (this.headers['content-type'].match(/urlencoded/i)) {
    this._initUrlencoded();
    return;
  }

  if (this.headers['content-type'].match(/multipart/i)) {
    var m = this.headers['content-type'].match(/boundary=(?:"([^"]+)"|([^;]+))/i);
    if (m) {
      this._initMultipart(m[1] || m[2]);
    } else {
      this._error(new Error('bad content-type header, no multipart boundary'));
    }
    return;
  }

  if (this.headers['content-type'].match(/json/i)) {
    this._initJSONencoded();
    return;
  }

  this._error(new Error('bad content-type header, unknown content-type: '+this.headers['content-type']));
};

IncomingForm.prototype._error = function(err) {
  if (this.error || this.ended) {
    return;
  }

  this.error = err;
  this.emit('error', err);

  if (Array.isArray(this.openedFiles)) {
    this.openedFiles.forEach(function(file) {
      file._writeStream.destroy();
      setTimeout(fs.unlink, 0, file.path, function(error) { });
    });
  }
};

IncomingForm.prototype._parseContentLength = function() {
  this.bytesReceived = 0;
  if (this.headers['content-length']) {
    this.bytesExpected = parseInt(this.headers['content-length'], 10);
  } else if (this.headers['transfer-encoding'] === undefined) {
    this.bytesExpected = 0;
  }

  if (this.bytesExpected !== null) {
    this.emit('progress', this.bytesReceived, this.bytesExpected);
  }
};

IncomingForm.prototype._newParser = function() {
  return new MultipartParser();
};

IncomingForm.prototype._initMultipart = function(boundary) {
  this.type = 'multipart';

  var parser = new MultipartParser(),
      self = this,
      headerField,
      headerValue,
      part;

  parser.initWithBoundary(boundary);

  parser.onPartBegin = function() {
    part = new Stream();
    part.readable = true;
    part.headers = {};
    part.name = null;
    part.filename = null;
    part.mime = null;

    part.transferEncoding = 'binary';
    part.transferBuffer = '';

    headerField = '';
    headerValue = '';
  };

  parser.onHeaderField = function(b, start, end) {
    headerField += b.toString(self.encoding, start, end);
  };

  parser.onHeaderValue = function(b, start, end) {
    headerValue += b.toString(self.encoding, start, end);
  };

  parser.onHeaderEnd = function() {
    headerField = headerField.toLowerCase();
    part.headers[headerField] = headerValue;

    var m = headerValue.match(/\bname="([^"]+)"/i);
    if (headerField == 'content-disposition') {
      if (m) {
        part.name = m[1];
      }

      part.filename = self._fileName(headerValue);
    } else if (headerField == 'content-type') {
      part.mime = headerValue;
    } else if (headerField == 'content-transfer-encoding') {
      part.transferEncoding = headerValue.toLowerCase();
    }

    headerField = '';
    headerValue = '';
  };

  parser.onHeadersEnd = function() {
    switch(part.transferEncoding){
      case 'binary':
      case '7bit':
      case '8bit':
      parser.onPartData = function(b, start, end) {
        part.emit('data', b.slice(start, end));
      };

      parser.onPartEnd = function() {
        part.emit('end');
      };
      break;

      case 'base64':
      parser.onPartData = function(b, start, end) {
        part.transferBuffer += b.slice(start, end).toString('ascii');

        /*
        four bytes (chars) in base64 converts to three bytes in binary
        encoding. So we should always work with a number of bytes that
        can be divided by 4, it will result in a number of buytes that
        can be divided vy 3.
        */
        var offset = parseInt(part.transferBuffer.length / 4, 10) * 4;
        part.emit('data', new Buffer(part.transferBuffer.substring(0, offset), 'base64'));
        part.transferBuffer = part.transferBuffer.substring(offset);
      };

      parser.onPartEnd = function() {
        part.emit('data', new Buffer(part.transferBuffer, 'base64'));
        part.emit('end');
      };
      break;

      default:
      return self._error(new Error('unknown transfer-encoding'));
    }

    self.onPart(part);
  };


  parser.onEnd = function() {
    self.ended = true;
    self._maybeEnd();
  };

  this._parser = parser;
};

IncomingForm.prototype._fileName = function(headerValue) {
  var m = headerValue.match(/\bfilename="(.*?)"($|; )/i);
  if (!m) return;

  var filename = m[1].substr(m[1].lastIndexOf('\\') + 1);
  filename = filename.replace(/%22/g, '"');
  filename = filename.replace(/&#([\d]{4});/g, function(m, code) {
    return String.fromCharCode(code);
  });
  return filename;
};

IncomingForm.prototype._initUrlencoded = function() {
  this.type = 'urlencoded';

  var parser = new QuerystringParser(this.maxFields)
    , self = this;

  parser.onField = function(key, val) {
    self.emit('field', key, val);
  };

  parser.onEnd = function() {
    self.ended = true;
    self._maybeEnd();
  };

  this._parser = parser;
};

IncomingForm.prototype._initOctetStream = function() {
  this.type = 'octet-stream';
  var filename = this.headers['x-file-name'];
  var mime = this.headers['content-type'];

  var file = new File({
    path: this._uploadPath(filename),
    name: filename,
    type: mime
  });

  this.emit('fileBegin', filename, file);
  file.open();

  this._flushing++;

  var self = this;

  self._parser = new OctetParser();

  //Keep track of writes that haven't finished so we don't emit the file before it's done being written
  var outstandingWrites = 0;

  self._parser.on('data', function(buffer){
    self.pause();
    outstandingWrites++;

    file.write(buffer, function() {
      outstandingWrites--;
      self.resume();

      if(self.ended){
        self._parser.emit('doneWritingFile');
      }
    });
  });

  self._parser.on('end', function(){
    self._flushing--;
    self.ended = true;

    var done = function(){
      file.end(function() {
        self.emit('file', 'file', file);
        self._maybeEnd();
      });
    };

    if(outstandingWrites === 0){
      done();
    } else {
      self._parser.once('doneWritingFile', done);
    }
  });
};

IncomingForm.prototype._initJSONencoded = function() {
  this.type = 'json';

  var parser = new JSONParser()
    , self = this;

  if (this.bytesExpected) {
    parser.initWithLength(this.bytesExpected);
  }

  parser.onField = function(key, val) {
    self.emit('field', key, val);
  };

  parser.onEnd = function() {
    self.ended = true;
    self._maybeEnd();
  };

  this._parser = parser;
};

IncomingForm.prototype._uploadPath = function(filename) {
  var name = 'upload_';
  var buf = crypto.randomBytes(16);
  for (var i = 0; i < buf.length; ++i) {
    name += ('0' + buf[i].toString(16)).slice(-2);
  }

  if (this.keepExtensions) {
    var ext = path.extname(filename);
    ext     = ext.replace(/(\.[a-z0-9]+).*/i, '$1');

    name += ext;
  }

  return path.join(this.uploadDir, name);
};

IncomingForm.prototype._maybeEnd = function() {
  if (!this.ended || this._flushing || this.error) {
    return;
  }

  this.emit('end');
};


},{"./file":4,"./json_parser":7,"./multipart_parser":8,"./octet_parser":9,"./querystring_parser":10,"crypto":undefined,"events":undefined,"fs":undefined,"os":undefined,"path":undefined,"stream":undefined,"string_decoder":undefined,"util":undefined}],6:[function(require,module,exports){
var IncomingForm = require('./incoming_form').IncomingForm;
IncomingForm.IncomingForm = IncomingForm;
module.exports = IncomingForm;

},{"./incoming_form":5}],7:[function(require,module,exports){
if (global.GENTLY) require = GENTLY.hijack(require);

var Buffer = require('buffer').Buffer;

function JSONParser() {
  this.data = new Buffer('');
  this.bytesWritten = 0;
}
exports.JSONParser = JSONParser;

JSONParser.prototype.initWithLength = function(length) {
  this.data = new Buffer(length);
};

JSONParser.prototype.write = function(buffer) {
  if (this.data.length >= this.bytesWritten + buffer.length) {
    buffer.copy(this.data, this.bytesWritten);
  } else {
    this.data = Buffer.concat([this.data, buffer]);
  }
  this.bytesWritten += buffer.length;
  return buffer.length;
};

JSONParser.prototype.end = function() {
  try {
    var fields = JSON.parse(this.data.toString('utf8'));
    for (var field in fields) {
      this.onField(field, fields[field]);
    }
  } catch (e) {}
  this.data = null;

  this.onEnd();
};

},{"buffer":undefined}],8:[function(require,module,exports){
var Buffer = require('buffer').Buffer,
    s = 0,
    S =
    { PARSER_UNINITIALIZED: s++,
      START: s++,
      START_BOUNDARY: s++,
      HEADER_FIELD_START: s++,
      HEADER_FIELD: s++,
      HEADER_VALUE_START: s++,
      HEADER_VALUE: s++,
      HEADER_VALUE_ALMOST_DONE: s++,
      HEADERS_ALMOST_DONE: s++,
      PART_DATA_START: s++,
      PART_DATA: s++,
      PART_END: s++,
      END: s++
    },

    f = 1,
    F =
    { PART_BOUNDARY: f,
      LAST_BOUNDARY: f *= 2
    },

    LF = 10,
    CR = 13,
    SPACE = 32,
    HYPHEN = 45,
    COLON = 58,
    A = 97,
    Z = 122,

    lower = function(c) {
      return c | 0x20;
    };

for (s in S) {
  exports[s] = S[s];
}

function MultipartParser() {
  this.boundary = null;
  this.boundaryChars = null;
  this.lookbehind = null;
  this.state = S.PARSER_UNINITIALIZED;

  this.index = null;
  this.flags = 0;
}
exports.MultipartParser = MultipartParser;

MultipartParser.stateToString = function(stateNumber) {
  for (var state in S) {
    var number = S[state];
    if (number === stateNumber) return state;
  }
};

MultipartParser.prototype.initWithBoundary = function(str) {
  this.boundary = new Buffer(str.length+4);
  this.boundary.write('\r\n--', 0);
  this.boundary.write(str, 4);
  this.lookbehind = new Buffer(this.boundary.length+8);
  this.state = S.START;

  this.boundaryChars = {};
  for (var i = 0; i < this.boundary.length; i++) {
    this.boundaryChars[this.boundary[i]] = true;
  }
};

MultipartParser.prototype.write = function(buffer) {
  var self = this,
      i = 0,
      len = buffer.length,
      prevIndex = this.index,
      index = this.index,
      state = this.state,
      flags = this.flags,
      lookbehind = this.lookbehind,
      boundary = this.boundary,
      boundaryChars = this.boundaryChars,
      boundaryLength = this.boundary.length,
      boundaryEnd = boundaryLength - 1,
      bufferLength = buffer.length,
      c,
      cl,

      mark = function(name) {
        self[name+'Mark'] = i;
      },
      clear = function(name) {
        delete self[name+'Mark'];
      },
      callback = function(name, buffer, start, end) {
        if (start !== undefined && start === end) {
          return;
        }

        var callbackSymbol = 'on'+name.substr(0, 1).toUpperCase()+name.substr(1);
        if (callbackSymbol in self) {
          self[callbackSymbol](buffer, start, end);
        }
      },
      dataCallback = function(name, clear) {
        var markSymbol = name+'Mark';
        if (!(markSymbol in self)) {
          return;
        }

        if (!clear) {
          callback(name, buffer, self[markSymbol], buffer.length);
          self[markSymbol] = 0;
        } else {
          callback(name, buffer, self[markSymbol], i);
          delete self[markSymbol];
        }
      };

  for (i = 0; i < len; i++) {
    c = buffer[i];
    switch (state) {
      case S.PARSER_UNINITIALIZED:
        return i;
      case S.START:
        index = 0;
        state = S.START_BOUNDARY;
      case S.START_BOUNDARY:
        if (index == boundary.length - 2) {
          if (c == HYPHEN) {
            flags |= F.LAST_BOUNDARY;
          } else if (c != CR) {
            return i;
          }
          index++;
          break;
        } else if (index - 1 == boundary.length - 2) {
          if (flags & F.LAST_BOUNDARY && c == HYPHEN){
            callback('end');
            state = S.END;
            flags = 0;
          } else if (!(flags & F.LAST_BOUNDARY) && c == LF) {
            index = 0;
            callback('partBegin');
            state = S.HEADER_FIELD_START;
          } else {
            return i;
          }
          break;
        }

        if (c != boundary[index+2]) {
          index = -2;
        }
        if (c == boundary[index+2]) {
          index++;
        }
        break;
      case S.HEADER_FIELD_START:
        state = S.HEADER_FIELD;
        mark('headerField');
        index = 0;
      case S.HEADER_FIELD:
        if (c == CR) {
          clear('headerField');
          state = S.HEADERS_ALMOST_DONE;
          break;
        }

        index++;
        if (c == HYPHEN) {
          break;
        }

        if (c == COLON) {
          if (index == 1) {
            // empty header field
            return i;
          }
          dataCallback('headerField', true);
          state = S.HEADER_VALUE_START;
          break;
        }

        cl = lower(c);
        if (cl < A || cl > Z) {
          return i;
        }
        break;
      case S.HEADER_VALUE_START:
        if (c == SPACE) {
          break;
        }

        mark('headerValue');
        state = S.HEADER_VALUE;
      case S.HEADER_VALUE:
        if (c == CR) {
          dataCallback('headerValue', true);
          callback('headerEnd');
          state = S.HEADER_VALUE_ALMOST_DONE;
        }
        break;
      case S.HEADER_VALUE_ALMOST_DONE:
        if (c != LF) {
          return i;
        }
        state = S.HEADER_FIELD_START;
        break;
      case S.HEADERS_ALMOST_DONE:
        if (c != LF) {
          return i;
        }

        callback('headersEnd');
        state = S.PART_DATA_START;
        break;
      case S.PART_DATA_START:
        state = S.PART_DATA;
        mark('partData');
      case S.PART_DATA:
        prevIndex = index;

        if (index === 0) {
          // boyer-moore derrived algorithm to safely skip non-boundary data
          i += boundaryEnd;
          while (i < bufferLength && !(buffer[i] in boundaryChars)) {
            i += boundaryLength;
          }
          i -= boundaryEnd;
          c = buffer[i];
        }

        if (index < boundary.length) {
          if (boundary[index] == c) {
            if (index === 0) {
              dataCallback('partData', true);
            }
            index++;
          } else {
            index = 0;
          }
        } else if (index == boundary.length) {
          index++;
          if (c == CR) {
            // CR = part boundary
            flags |= F.PART_BOUNDARY;
          } else if (c == HYPHEN) {
            // HYPHEN = end boundary
            flags |= F.LAST_BOUNDARY;
          } else {
            index = 0;
          }
        } else if (index - 1 == boundary.length)  {
          if (flags & F.PART_BOUNDARY) {
            index = 0;
            if (c == LF) {
              // unset the PART_BOUNDARY flag
              flags &= ~F.PART_BOUNDARY;
              callback('partEnd');
              callback('partBegin');
              state = S.HEADER_FIELD_START;
              break;
            }
          } else if (flags & F.LAST_BOUNDARY) {
            if (c == HYPHEN) {
              callback('partEnd');
              callback('end');
              state = S.END;
              flags = 0;
            } else {
              index = 0;
            }
          } else {
            index = 0;
          }
        }

        if (index > 0) {
          // when matching a possible boundary, keep a lookbehind reference
          // in case it turns out to be a false lead
          lookbehind[index-1] = c;
        } else if (prevIndex > 0) {
          // if our boundary turned out to be rubbish, the captured lookbehind
          // belongs to partData
          callback('partData', lookbehind, 0, prevIndex);
          prevIndex = 0;
          mark('partData');

          // reconsider the current character even so it interrupted the sequence
          // it could be the beginning of a new sequence
          i--;
        }

        break;
      case S.END:
        break;
      default:
        return i;
    }
  }

  dataCallback('headerField');
  dataCallback('headerValue');
  dataCallback('partData');

  this.index = index;
  this.state = state;
  this.flags = flags;

  return len;
};

MultipartParser.prototype.end = function() {
  var callback = function(self, name) {
    var callbackSymbol = 'on'+name.substr(0, 1).toUpperCase()+name.substr(1);
    if (callbackSymbol in self) {
      self[callbackSymbol]();
    }
  };
  if ((this.state == S.HEADER_FIELD_START && this.index === 0) ||
      (this.state == S.PART_DATA && this.index == this.boundary.length)) {
    callback(this, 'partEnd');
    callback(this, 'end');
  } else if (this.state != S.END) {
    return new Error('MultipartParser.end(): stream ended unexpectedly: ' + this.explain());
  }
};

MultipartParser.prototype.explain = function() {
  return 'state = ' + MultipartParser.stateToString(this.state);
};

},{"buffer":undefined}],9:[function(require,module,exports){
var EventEmitter = require('events').EventEmitter
	, util = require('util');

function OctetParser(options){
	if(!(this instanceof OctetParser)) return new OctetParser(options);
	EventEmitter.call(this);
}

util.inherits(OctetParser, EventEmitter);

exports.OctetParser = OctetParser;

OctetParser.prototype.write = function(buffer) {
    this.emit('data', buffer);
	return buffer.length;
};

OctetParser.prototype.end = function() {
	this.emit('end');
};

},{"events":undefined,"util":undefined}],10:[function(require,module,exports){
if (global.GENTLY) require = GENTLY.hijack(require);

// This is a buffering parser, not quite as nice as the multipart one.
// If I find time I'll rewrite this to be fully streaming as well
var querystring = require('querystring');

function QuerystringParser(maxKeys) {
  this.maxKeys = maxKeys;
  this.buffer = '';
}
exports.QuerystringParser = QuerystringParser;

QuerystringParser.prototype.write = function(buffer) {
  this.buffer += buffer.toString('ascii');
  return buffer.length;
};

QuerystringParser.prototype.end = function() {
  var fields = querystring.parse(this.buffer, '&', '=', { maxKeys: this.maxKeys });
  for (var field in fields) {
    this.onField(field, fields[field]);
  }
  this.buffer = '';

  this.onEnd();
};


},{"querystring":undefined}],11:[function(require,module,exports){
//console.log("!!!!!!!!!!!!!!!! WARNING THIS IS GUN 0.5 !!!!!!!!!!!!!!!!!!!!!!");
;(function(){

	/* UNBUILD */
	var root;
	if(typeof window !== "undefined"){ root = window }
	if(typeof global !== "undefined"){ root = global }
	root = root || {};
	var console = root.console = root.console || {log: function(){}};
	function require(arg){
		return arg.slice? require[resolve(arg)] : function(mod, path){
			arg(mod = {exports: {}});
			require[resolve(path)] = mod.exports;
		}
		function resolve(path){
			return path.split('/').slice(-1).toString().replace('.js','');
		}
	}
	if(typeof module !== "undefined"){ var common = module }
	/* UNBUILD */

	;require(function(module){
		// Generic javascript utilities.
		var Type = {};
		Type.fns = Type.fn = {is: function(fn){ return (!!fn && fn instanceof Function) }}
		Type.bi = {is: function(b){ return (b instanceof Boolean || typeof b == 'boolean') }}
		Type.num = {is: function(n){ return !list_is(n) && ((n - parseFloat(n) + 1) >= 0 || Infinity === n || -Infinity === n) }}
		Type.text = {is: function(t){ return (typeof t == 'string') }}
		Type.text.ify = function(t){
			if(Type.text.is(t)){ return t }
			if(typeof JSON !== "undefined"){ return JSON.stringify(t) }
			return (t && t.toString)? t.toString() : t;
		}
		Type.text.random = function(l, c){
			var s = '';
			l = l || 24; // you are not going to make a 0 length random number, so no need to check type
			c = c || '0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz';
			while(l > 0){ s += c.charAt(Math.floor(Math.random() * c.length)); l-- }
			return s;
		}
		Type.text.match = function(t, o){ var r = false;
			t = t || '';
			o = Type.text.is(o)? {'=': o} : o || {}; // {'~', '=', '*', '<', '>', '+', '-', '?', '!'} // ignore case, exactly equal, anything after, lexically larger, lexically lesser, added in, subtacted from, questionable fuzzy match, and ends with.
			if(Type.obj.has(o,'~')){ t = t.toLowerCase(); o['='] = (o['='] || o['~']).toLowerCase() }
			if(Type.obj.has(o,'=')){ return t === o['='] }
			if(Type.obj.has(o,'*')){ if(t.slice(0, o['*'].length) === o['*']){ r = true; t = t.slice(o['*'].length) } else { return false }}
			if(Type.obj.has(o,'!')){ if(t.slice(-o['!'].length) === o['!']){ r = true } else { return false }}
			if(Type.obj.has(o,'+')){
				if(Type.list.map(Type.list.is(o['+'])? o['+'] : [o['+']], function(m){
					if(t.indexOf(m) >= 0){ r = true } else { return true }
				})){ return false }
			}
			if(Type.obj.has(o,'-')){
				if(Type.list.map(Type.list.is(o['-'])? o['-'] : [o['-']], function(m){
					if(t.indexOf(m) < 0){ r = true } else { return true }
				})){ return false }
			}
			if(Type.obj.has(o,'>')){ if(t > o['>']){ r = true } else { return false }}
			if(Type.obj.has(o,'<')){ if(t < o['<']){ r = true } else { return false }}
			function fuzzy(t,f){ var n = -1, i = 0, c; for(;c = f[i++];){ if(!~(n = t.indexOf(c, n+1))){ return false }} return true } // via http://stackoverflow.com/questions/9206013/javascript-fuzzy-search
			if(Type.obj.has(o,'?')){ if(fuzzy(t, o['?'])){ r = true } else { return false }} // change name!
			return r;
		}
		Type.list = {is: function(l){ return (l instanceof Array) }}
		Type.list.slit = Array.prototype.slice;
		Type.list.sort = function(k){ // creates a new sort function based off some field
			return function(A,B){
				if(!A || !B){ return 0 } A = A[k]; B = B[k];
				if(A < B){ return -1 }else if(A > B){ return 1 }
				else { return 0 }
			}
		}
		Type.list.map = function(l, c, _){ return obj_map(l, c, _) }
		Type.list.index = 1; // change this to 0 if you want non-logical, non-mathematical, non-matrix, non-convenient array notation
		Type.obj = {is: function(o){ return o? (o instanceof Object && o.constructor === Object) || Object.prototype.toString.call(o).match(/^\[object (\w+)\]$/)[1] === 'Object' : false }}
		Type.obj.put = function(o, f, v){ return (o||{})[f] = v, o } 
		Type.obj.has = function(o, f){ return o && Object.prototype.hasOwnProperty.call(o, f) }
		Type.obj.del = function(o, k){
			if(!o){ return }
			o[k] = null;
			delete o[k];
			return o;
		}
		Type.obj.as = function(o, f, v){ return o[f] = o[f] || (arguments.length >= 3? v : {}) }
		Type.obj.ify = function(o){
			if(obj_is(o)){ return o }
			try{o = JSON.parse(o);
			}catch(e){o={}};
			return o;
		}
		;(function(){ var u;
			function map(v,f){
				if(obj_has(this,f) && u !== this[f]){ return }
				this[f] = v;
			}
			Type.obj.to = function(from, to){
				to = to || {};
				obj_map(from, map, to);
				return to;
			}
		}());
		Type.obj.copy = function(o){ // because http://web.archive.org/web/20140328224025/http://jsperf.com/cloning-an-object/2
			return !o? o : JSON.parse(JSON.stringify(o)); // is shockingly faster than anything else, and our data has to be a subset of JSON anyways!
		}
		;(function(){
			function empty(v,i){ var n = this.n;
				if(n && (i === n || (obj_is(n) && obj_has(n, i)))){ return }
				if(i){ return true }
			}
			Type.obj.empty = function(o, n){
				if(!o){ return true }
				return obj_map(o,empty,{n:n})? false : true;
			}
		}());
		;(function(){
			function t(k,v){
				if(2 === arguments.length){
					t.r = t.r || {};
					t.r[k] = v;
					return;
				} t.r = t.r || [];
				t.r.push(k);
			};
			Type.obj.map = function(l, c, _){
				var u, i = 0, x, r, ll, lle, f = fn_is(c);
				t.r = null;
				if(Object.keys && obj_is(l)){
					ll = Object.keys(l); lle = true;
				}
				if(list_is(l) || ll){
					x = (ll || l).length;
					for(;i < x; i++){
						var ii = (i + Type.list.index);
						if(f){
							r = lle? c.call(_ || this, l[ll[i]], ll[i], t) : c.call(_ || this, l[i], ii, t);
							if(r !== u){ return r }
						} else {
							//if(Type.test.is(c,l[i])){ return ii } // should implement deep equality testing!
							if(c === l[lle? ll[i] : i]){ return ll? ll[i] : ii } // use this for now
						}
					}
				} else {
					for(i in l){
						if(f){
							if(obj_has(l,i)){
								r = _? c.call(_, l[i], i, t) : c(l[i], i, t);
								if(r !== u){ return r }
							}
						} else {
							//if(a.test.is(c,l[i])){ return i } // should implement deep equality testing!
							if(c === l[i]){ return i } // use this for now
						}
					}
				}
				return f? t.r : Type.list.index? 0 : -1;
			}
		}());
		Type.time = {};
		Type.time.is = function(t){ return t? t instanceof Date : (+new Date().getTime()) }

		var fn_is = Type.fn.is;
		var list_is = Type.list.is;
		var obj = Type.obj, obj_is = obj.is, obj_has = obj.has, obj_map = obj.map;
		module.exports = Type;
	})(require, './type');
		
	;require(function(module){
		// On event emitter generic javascript utility.
		function Scope(){
			function On(tag, arg, as, eas, skip){
				var ctx = this, ons = ctx.ons || (ctx.ons = {}), on = ons[tag] || (ons[tag] = {s: []}), act, mem, O = On.ons;
				if(!arg){
					if(1 === arguments.length){ // Performance drops significantly even though `arguments.length` should be okay to use.
						return on;
					}
				}
				if(arg instanceof Function){
					act = new Act(tag, arg, as, on, ctx);
					if(O && O.event && ctx !== On){
						On.on('event', act);
						if(noop === act.fn){
							return act;
						}
						if(-1 < act.i){ return act }
					}
					on.s.push(act);
					return act;
				}
				var proxy;
				if(O && O.emit && ctx !== On){
					var ev = {tag: tag, arg: arg, on: on, ctx: ctx}, u;
					On.on('emit', ev);
					if(u === ev.arg){ return }
					arg = ev.arg;
					proxy = ev.proxy;
				}
				on.arg = arg;
				on.end = as;
				on.as = eas;
				var i = 0, acts = on.s, l = acts.length, arr = (arg instanceof Array), gap, off, act;
				for(; i < l; i++){ act = acts[i];
					if(skip){
						if(skip === act){
							skip = false;
						}
						continue;
					}
					var tmp = act.tmp = {};
					if(!arr){
						act.fn.call(act.as, arg, proxy||act);
					} else {
						act.fn.apply(act.as, arg.concat(proxy||act));
					}
					if(noop === act.fn){
						off = true;
					}
					if(tmp.halt){
						if(1 === tmp.halt){
							gap = true;
						}
						break;
					}
				}
				if(off){
					var still = [];
					for(i = 0; i < l; i++){ act = acts[i];
						if(noop !== act.fn){
							still.push(act);
						}
					}
					on.s = still;
					if(0 === still.length){
						delete ons[tag];
					}
				}
				if(!gap && as && as instanceof Function){
					as.call(eas, arg);
				}
				return;
			}
			On.on = On;
			On.scope = Scope;
			return On;
		}
		function Act(tag, fn, as, on, ctx){
			this.tag = tag;
			this.fn = fn;
			this.as = as;
			this.on = on;
			this.ctx = ctx;
		}
		Act.chain = Act.prototype;
		Act.chain.stun = function(){
			if(!this.tmp){ this.tmp = {} }
			if(!arguments.length){
				return this.tmp.halt = true;
			}
			var act = this, on = act.on, halt = {
				resume: function(arg){
					/*
						TODO: BUG!
						TODO: BUG!
						TODO: BUG!
						TODO: BUG!
						TODO: BUG!
						Why does our map not get updates?
						Portions do if we do not use .key to save the initial data.
						Which makes me think it relates to pseudo, however it doesn't fully work if I get rid of that.
						Why why why? Probably something to do with map events and memoizing?
					*/
					act.ctx.on(act.tag, (arguments.length?
						1 === arguments.length? arg : Array.prototype.slice.call(arguments)
					: halt.arg), halt.end, halt.as, act);
				}, arg: on.arg,
				end: on.end,
				as: on.as
			};
			act.tmp.halt = 1;
			return halt.resume;
		}
		Act.chain.off = function(){
			this.fn = noop;
		}
		Act.chain.emit = function(arg){
			var act = this, arr = (arg instanceof Array);
			if(!arr){
				act.fn.call(act.as, arg, act);
			} else {
				act.fn.apply(act.as, arg.concat(act));
			}
		}
		function noop(){};
		module.exports = Scope();
	})(require, './on');

	;require(function(module){
		var On = require('./on');
		
		function Chain(create, opt){
			opt = opt || {};
			opt.id = opt.id || '#';
			opt.rid = opt.rid || '@';
			opt.uuid = opt.uuid || function(){
				return (+new Date()) + Math.random();
			};
			var on = On.scope();

			on.stun = function(chain, fn, as){
				var res = function(n){
					if(1 === n){
						at.stun.skip = 1;
						return;
					}
					if(at.stun === stun){
						delete at.stun;	
					}
					off = true;
					var i = 0, q = res.queue, l = q.length, c, v;
					for(i; i < l; i++){ v = q[i];
						c = v[0];
						v = v[1];
						c.on('in', v.get, v);
					}
				}, at = chain._, off, stun = at.stun = function(arg){
					if(off){
						delete this.stun;
						return false;
					}
					if(at.stun.skip){
						return at.stun.skip = false;
					}
					res.queue.push([this, arg]);
					return true;
				}
				res.queue = [];
				return res;
			}

			var ask = on.ask = function(cb, as){
				if(!ask.on){ ask.on = On.scope() }
				var id = opt.uuid();
				if(cb){ ask.on(id, cb, as) }
				return id;
			}
			ask._ = opt.id;
			on.ack = function(at, reply){
				if(!at || !reply || !ask.on){ return }
				var id = at[opt.id] || at;
				ask.on(id, reply);
				return true;
			}
			on.ack._ = opt.rid;
			/*
			on.on('event', function event(act){
				var last = act.on.last, tmp;
				if(last){
					if(last instanceof Array){
						act.fn.apply(act.as, last.concat(act));
					} else {
						act.fn.call(act.as, last, act);
					}
					if(last !== act.on.last){
						event(act);
					}
					return;
				}
			});*/

			on.on('event', function event(act){
				var last = act.on.last, tmp;
				if(last){
					if(act.on.map){
						Gun.obj.map(act.on.map, function(v,f){ // TODO: BUG! Gun is not available in this module.
							//emit(v[0], act, event, v[1]); // below enables more control
							emit(v[1], act, event, v[2]);
						});
					} else {
						emit(last, act, event);
					}
					if(last !== act.on.last){
						event(act);
					}
					return;
				}
			});
			function emit(last, act, event, ev){
				if(last instanceof Array){
					act.fn.apply(act.as, last.concat(ev||act));
				} else {
					act.fn.call(act.as, last, ev||act);
				}
			}

			on.on('emit', function(ev){
				if(ev.on.map){
					/*
					ev.id = ev.id || Gun.text.random(6);
					ev.on.map[ev.id] = ev.arg;
					ev.proxy = ev.arg[1];
					ev.arg = ev.arg[0];
					*/ // below gives more control.
					ev.on.map[ev.arg[0]] = ev.arg;
					ev.proxy = ev.arg[2];
					ev.arg = ev.arg[1];
				}
				ev.on.last = ev.arg;
			});
			return on;
		}
		/*
		function backward(scope, ev){ var tmp;
			if(!scope || !scope.on){ return }
			//if(scope.on('back').length){
			if((tmp = scope.ons) && (tmp = tmp[ev]) && tmp.s.length){
				return scope;
			}
			return backward((scope.back||backward)._, ev);
		}
		*/
		module.exports = Chain;
	})(require, './onify');

	;require(function(module){
		// Generic javascript scheduler utility.
		var Type = require('./type');
		function s(state, cb, time){ // maybe use lru-cache?
			s.time = time || Gun.time.is;
			s.waiting.push({when: state, event: cb || function(){}});
			if(s.soonest < state){ return }
			s.set(state);
		}
		s.waiting = [];
		s.soonest = Infinity;
		s.sort = Type.list.sort('when');
		s.set = function(future){
			if(Infinity <= (s.soonest = future)){ return }
			var now = s.time();
			future = (future <= now)? 0 : (future - now);
			clearTimeout(s.id);
			s.id = setTimeout(s.check, future);
		}
		s.each = function(wait, i, map){
			var ctx = this;
			if(!wait){ return }
			if(wait.when <= ctx.now){
				if(wait.event instanceof Function){
					setTimeout(function(){ wait.event() },0);
				}
			} else {
				ctx.soonest = (ctx.soonest < wait.when)? ctx.soonest : wait.when;
				map(wait);
			}
		}
		s.check = function(){
			var ctx = {now: s.time(), soonest: Infinity};
			s.waiting.sort(s.sort);
			s.waiting = Type.list.map(s.waiting, s.each, ctx) || [];
			s.set(ctx.soonest);
		}
		module.exports = s;
	})(require, './schedule');

	;require(function(module){
		/* Based on the Hypothetical Amnesia Machine thought experiment */
		function HAM(machineState, incomingState, currentState, incomingValue, currentValue){
			if(machineState < incomingState){
				return {defer: true}; // the incoming value is outside the boundary of the machine's state, it must be reprocessed in another state.
			}
			if(incomingState < currentState){
				return {historical: true}; // the incoming value is within the boundary of the machine's state, but not within the range.
				
			}
			if(currentState < incomingState){
				return {converge: true, incoming: true}; // the incoming value is within both the boundary and the range of the machine's state.
				
			}
			if(incomingState === currentState){
				if(incomingValue === currentValue){ // Note: while these are practically the same, the deltas could be technically different
					return {state: true};
				}
				/*
					The following is a naive implementation, but will always work.
					Never change it unless you have specific needs that absolutely require it.
					If changed, your data will diverge unless you guarantee every peer's algorithm has also been changed to be the same.
					As a result, it is highly discouraged to modify despite the fact that it is naive,
					because convergence (data integrity) is generally more important.
					Any difference in this algorithm must be given a new and different name.
				*/
				if(Lexical(incomingValue) < Lexical(currentValue)){ // Lexical only works on simple value types!
					return {converge: true, current: true};
				}
				if(Lexical(currentValue) < Lexical(incomingValue)){ // Lexical only works on simple value types!
					return {converge: true, incoming: true};
				}
			}
			return {err: "you have not properly handled recursion through your data or filtered it as JSON"};
		}
		function Lexical(value){
			// TODO: BUG! HAM should understand a relation (pointer) as a type as well.
			if(typeof value === 'string'){ // Text
				return 'aaaaa'+value;
			}
			if((value - parseFloat(value) + 1) >= 0){ // Numbers (JSON-able)
				return 'aaaa'+value;
			}
			if(true === value){ // Boolean
				return 'aaa';
			}
			if(false === value){ // Boolean
				return 'aa';
			}
			if(null === value){ // Null
				return 'a';
			}
			if(undefined === value){ // Undefined
				return '';
			}
			return ''; // Not supported
		}
		var undefined;
		module.exports = HAM;
	})(require, './HAM');

	;require(function(module){
		var Type = require('./type');
		var Val = {};
		Val.is = function(v){ // Valid values are a subset of JSON: null, binary, number (!Infinity), text, or a soul relation. Arrays need special algorithms to handle concurrency, so they are not supported directly. Use an extension that supports them if needed but research their problems first.
			var u;
			if(v === u){ return false }
			if(v === null){ return true } // "deletes", nulling out fields.
			if(v === Infinity){ return false } // we want this to be, but JSON does not support it, sad face.
			if(bi_is(v) // by "binary" we mean boolean.
			|| num_is(v)
			|| text_is(v)){ // by "text" we mean strings.
				return true; // simple values are valid.
			}
			return Val.rel.is(v) || false; // is the value a soul relation? Then it is valid and return it. If not, everything else remaining is an invalid data type. Custom extensions can be built on top of these primitives to support other types.
		}
		Val.rel = {_: '#'};
		;(function(){
			Val.rel.is = function(v){ // this defines whether an object is a soul relation or not, they look like this: {'#': 'UUID'}
				if(v && !v._ && obj_is(v)){ // must be an object.
					var o = {};
					obj_map(v, map, o);
					if(o.id){ // a valid id was found.
						return o.id; // yay! Return it.
					}
				}
				return false; // the value was not a valid soul relation.
			}
			function map(s, f){ var o = this; // map over the object...
				if(o.id){ return o.id = false } // if ID is already defined AND we're still looping through the object, it is considered invalid.
				if(f == _rel && text_is(s)){ // the field should be '#' and have a text value.
					o.id = s; // we found the soul!
				} else {
					return o.id = false; // if there exists anything else on the object that isn't the soul, then it is considered invalid.
				}
			}
		}());
		Val.rel.ify = function(t){ return obj_put({}, _rel, t) } // convert a soul into a relation and return it.
		var _rel = Val.rel._;
		var bi_is = Type.bi.is;
		var num_is = Type.num.is;
		var text_is = Type.text.is;
		var obj = Type.obj, obj_is = obj.is, obj_put = obj.put, obj_map = obj.map;
		module.exports = Val;
	})(require, './val');

	;require(function(module){
		var Type = require('./type');
		var Val = require('./val');
		var Node = {_: '_'};
		Node.soul = function(n, o){ return (n && n._ && n._[o || _soul]) } // convenience function to check to see if there is a soul on a node and return it.
		Node.soul.ify = function(n, o){ // put a soul on an object.
			o = (typeof o === 'string')? {soul: o} : o || {};
			n = n || {}; // make sure it exists.
			n._ = n._ || {}; // make sure meta exists.
			n._[_soul] = o.soul || n._[_soul] || text_random(); // put the soul on it.
			return n;
		}
		;(function(){
			Node.is = function(n, cb, o){ var s; // checks to see if an object is a valid node.
				if(!obj_is(n)){ return false } // must be an object.
				if(s = Node.soul(n)){ // must have a soul on it.
					return !obj_map(n, map, {o:o,n:n,cb:cb});
				}
				return false; // nope! This was not a valid node.
			}
			function map(v, f){ // we invert this because the way we check for this is via a negation.
				if(f === Node._){ return } // skip over the metadata.
				if(!Val.is(v)){ return true } // it is true that this is an invalid node.
				if(this.cb){ this.cb.call(this.o, v, f, this.n) } // optionally callback each field/value.
			}
		}());
		;(function(){
			Node.ify = function(obj, o, as){ // returns a node from a shallow object.
				if(!o){ o = {} }
				else if(typeof o === 'string'){ o = {soul: o} }
				else if(o instanceof Function){ o = {map: o} }
				if(o.map){ o.node = o.map.call(as, obj, u, o.node || {}) }
				if(o.node = Node.soul.ify(o.node || {}, o)){
					obj_map(obj, map, {opt:o,as:as});
				}
				return o.node; // This will only be a valid node if the object wasn't already deep!
			}
			function map(v, f){ var o = this.opt, tmp, u; // iterate over each field/value.
				if(o.map){
					tmp = o.map.call(this.as, v, ''+f, o.node);
					if(u === tmp){
						obj_del(o.node, f);
					} else
					if(o.node){ o.node[f] = tmp }
					return;
				}
				if(Val.is(v)){ 
					o.node[f] = v;
				}
			}
		}());
		var obj = Type.obj, obj_is = obj.is, obj_del = obj.del, obj_map = obj.map;
		var text = Type.text, text_random = text.random;
		var _soul = Val.rel._;
		var u;
		module.exports = Node;
	})(require, './node');

	;require(function(module){
		var Type = require('./type');
		var Node = require('./node');
		function State(){
			var t = time();
			if(last < t){
				n = 0;
				return last = t;
			}
			return last = t + ((n += 1) / d);
		}
		State._ = '>';
		var time = Type.time.is, last = -Infinity, n = 0, d = 1000;
		State.ify = function(n, f, s){ // put a field's state on a node.
			if(!n || !n[N_]){ return } // reject if it is not node-like.
			var tmp = obj_as(n[N_], State._); // grab the states data.
			if(u !== f && num_is(s)){ tmp[f] = s } // add the valid state.
			return n;
		}
		State.is = function(n, f){ // convenience function to get the state on a field on a node and return it.
			var tmp = f && n && n[N_] && n[N_][State._];
			if(!tmp){ return }
			return num_is(tmp[f])? tmp[f] : -Infinity;
		}
		;(function(){
			State.map = function(cb, s, as){ var u; // for use with Node.ify
				var o = obj_is(o = cb || s)? o : null;
				cb = fn_is(cb = cb || s)? cb : null;
				if(o && !cb){
					s = num_is(s)? s : State();
					o[N_] = o[N_] || {};
					obj_map(o, map, {o:o,s:s});
					return o;
				}
				as = as || obj_is(s)? s : u;
				s = num_is(s)? s : State();
				return function(v, f, o, opt){
					if(!cb){
						map.call({o: o, s: s}, v,f);
						return v;
					}
					cb.call(as || this || {}, v, f, o, opt);
					if(obj_has(o,f) && u === o[f]){ return }
					map.call({o: o, s: s}, v,f);
				}
			}
			function map(v,f){
				if(N_ === f){ return }
				State.ify(this.o, f, this.s) ;
			}
		}());
		var obj = Type.obj, obj_as = obj.as, obj_has = obj.has, obj_is = obj.is, obj_map = obj.map;
		var num = Type.num, num_is = num.is;
		var fn = Type.fn, fn_is = fn.is;
		var N_ = Node._, u;
		module.exports = State;
	})(require, './state');

	;require(function(module){
		var Type = require('./type');
		var Val = require('./val');
		var Node = require('./node');
		var Graph = {};
		;(function(){
			Graph.is = function(g, cb, fn, as){ // checks to see if an object is a valid graph.
				if(!g || !obj_is(g) || obj_empty(g)){ return false } // must be an object.
				return !obj_map(g, map, {fn:fn,cb:cb,as:as}); // makes sure it wasn't an empty object.
			}
			function nf(fn){ // optional callback for each node.
				if(fn){ Node.is(nf.n, fn, nf.as) } // where we then have an optional callback for each field/value.
			}
			function map(n, s){ // we invert this because the way we check for this is via a negation.
				if(!n || s !== Node.soul(n) || !Node.is(n, this.fn)){ return true } // it is true that this is an invalid graph.
				if(!fn_is(this.cb)){ return }	
				nf.n = n; nf.as = this.as;	 
				this.cb.call(nf.as, n, s, nf);
			}
		}());
		;(function(){
			Graph.ify = function(obj, env, as){
				var at = {path: [], obj: obj};
				if(!env){
					env = {};
				} else 
				if(typeof env === 'string'){
					env = {soul: env};
				} else
				if(env instanceof Function){
					env.map = env;
				}
				if(env.soul){
					at.rel = Val.rel.ify(env.soul);
				}
				env.graph = env.graph || {};
				env.seen = env.seen || [];
				env.as = env.as || as;
				node(env, at);
				env.root = at.node;
				return env.graph;
			}
			function node(env, at){ var tmp;
				if(tmp = seen(env, at)){ return tmp }
				at.env = env;
				at.soul = soul;
				if(Node.ify(at.obj, map, at)){
					at.rel = at.rel || Val.rel.ify(Node.soul(at.node));
					env.graph[Val.rel.is(at.rel)] = at.node;
				}
				return at;
			}
			function map(v,f,n){
				var at = this, env = at.env, is, tmp;
				if(Node._ === f && obj_has(v,Val.rel._)){
					return n._; // TODO: Bug?
				}
				if(!(is = valid(v,f,n, at,env))){ return }
				if(!f){
					at.node = at.node || n || {};
					if(obj_has(v, Node._)){
						at.node._ = Gun.obj.copy(v._);
					}
					at.node = Node.soul.ify(at.node, Val.rel.is(at.rel));
				}
				if(tmp = env.map){
					tmp.call(env.as || {}, v,f,n, at);
					if(obj_has(n,f)){
						v = n[f];
						if(u === v){
							obj_del(n, f);
							return;
						}
						if(!(is = valid(v,f,n, at,env))){ return }
					}
				}
				if(!f){ return at.node }
				if(true === is){
					return v;
				}
				tmp = node(env, {obj: v, path: at.path.concat(f)});
				if(!tmp.node){ return }
				return tmp.rel; //{'#': Node.soul(tmp.node)};
			}
			function soul(id){ var at = this;
				var prev = Val.rel.is(at.rel), graph = at.env.graph;
				at.rel = at.rel || Val.rel.ify(id);
				at.rel[Val.rel._] = id;
				if(at.node && at.node[Node._]){
					at.node[Node._][Val.rel._] = id;
				}
				if(obj_has(graph, prev)){
					graph[id] = graph[prev];
					obj_del(graph, prev);
				}
			}
			function valid(v,f,n, at,env){ var tmp;
				if(Val.is(v)){ return true }
				if(obj_is(v)){ return 1 }
				if(tmp = env.invalid){
					v = tmp.call(env.as || {}, v,f,n);
					return valid(v,f,n, at,env);
				}
				env.err = "Invalid value at '" + at.path.concat(f).join('.') + "'!";
			}
			function seen(env, at){
				var arr = env.seen, i = arr.length, has;
				while(i--){ has = arr[i];
					if(at.obj === has.obj){ return has }
				}
				arr.push(at);
			}
		}());
		Graph.node = function(node){
			var soul = Node.soul(node);
			if(!soul){ return }
			return obj_put({}, soul, node);
		}
		;(function(){
			Graph.to = function(graph, root, opt){
				if(!graph){ return }
				var obj = {};
				opt = opt || {seen: {}};
				obj_map(graph[root], map, {obj:obj, graph: graph, opt: opt});
				return obj;
			}
			function map(v,f){ var tmp, obj;
				if(Node._ === f){
					if(obj_empty(v, Val.rel._)){
						return;
					}
					this.obj[f] = obj_copy(v);
					return;
				}
				if(!(tmp = Val.rel.is(v))){
					this.obj[f] = v;
					return;
				}
				if(obj = this.opt.seen[tmp]){
					this.obj[f] = obj;
					return;
				}
				this.obj[f] = this.opt.seen[tmp] = Graph.to(this.graph, tmp, this.opt);
			}
		}());
		var fn_is = Type.fn.is;
		var obj = Type.obj, obj_is = obj.is, obj_del = obj.del, obj_has = obj.has, obj_empty = obj.empty, obj_put = obj.put, obj_map = obj.map, obj_copy = obj.copy;
		var u;
		module.exports = Graph;
	})(require, './graph');


	;require(function(module){

		function Gun(o){
			if(!(this instanceof Gun)){ return Gun.create(o) }
			this._ = {gun: this};
		}

		Gun.create = function(o){
			return new Gun().opt(o);
		};

		Gun._ = { // some reserved key words, these are not the only ones.
			meta: '_' // all metadata of the node is stored in the meta property on the node.
			,soul: '#' // a soul is a UUID of a node but it always points to the "latest" data known.
			,field: '.' // a field is a property on a node which points to a value.
			,state: '>' // other than the soul, we store HAM metadata.
			,value: '=' // the primitive value.
		}

		Gun.__ = {
			'_':'meta'
			,'#':'soul'
			,'.':'field'
			,'=':'value'
			,'>':'state'
		}

		Gun.version = 0.4;

		Gun.is = function(gun){ return (gun instanceof Gun) } // check to see if it is a GUN instance.

		var Type = require('./type');
		Type.obj.map(Type, function(v,f){
			Gun[f] = v;
		});
		Gun.HAM = require('./HAM');
		Gun.val = require('./val');
		Gun.node = require('./node');
		Gun.state = require('./state');
		Gun.graph = require('./graph');

		Gun.on = require('./onify')();
		
		/*
		var opt = {chain: 'in', back: 'out', extend: 'root', id: Gun._.soul};
		Gun.chain = require('./chain')(Gun, opt);
		Gun.chain.chain.opt = opt;
		*/
		(Gun.chain = Gun.prototype).chain = function(){
			var chain = new this.constructor(), _;
			_ = chain._ || (chain._ = {});
			_.root = this._.root;
			_.back = this;
			return chain;
		}
		Gun.chain.toJSON = function(){};

		;(function(){

			Gun.chain.opt = function(opt){
				opt = opt || {};
				var gun = this, at = gun._, tmp, u;
				if(!at.root){ root(at) }
				tmp = at.opt = at.opt || {};
				if(text_is(opt)){ opt = {peers: opt} }
				else if(list_is(opt)){ opt = {peers: opt} }
				if(text_is(opt.peers)){ opt.peers = [opt.peers] }
				if(list_is(opt.peers)){ opt.peers = obj_map(opt.peers, function(n,f,m){m(n,{})}) }
				obj_map(opt, function map(v,f){
					if(obj_is(v)){
						tmp = tmp[f] || (tmp[f] = {}); // TODO: Bug? Be careful of falsey values getting overwritten?
						obj_map(v, map);
						return;
					}
					tmp[f] = v;
				});
				Gun.on('opt', at);
				return gun;
			}
			function root(at){
				var gun = at.gun;
				at.root = gun;
				at.graph = {};
				gun.on('in', input, at);
				gun.on('out', output, at);
			}
			function output(at){
				var cat = this, gun = cat.gun, tmp;
				if(at.put){
					cat.on('in', obj_to(at, {gun: cat.gun}));
				}
				if(!at.gun){
					at = Gun.obj.to(at, {gun: gun});
				}
				if(at.put){ Gun.on('put', at) }
				if(at.get){ get(at, cat) }
				Gun.on('out', at);
				if(!cat.back){ return }
				cat.back.on('out', at);
			}
			function get(at, cat){
				var soul = at.get[_soul], node = cat.graph[soul], field = at.get[_field];
				if(node && (!field || obj_has(node, field))){
					// TODO: BUG!!! Shouldn't this ack?????
					if(field){
						node = Gun.obj.put({_: node._}, field, node[field]);
					}
					cat.on('in', {
						'@': at.req? at['#'] : 0, // temporary hack
						put: Gun.graph.node(node) // TODO: BUG! Clone node!
					});
					return;
				}
				Gun.on('get', at);
			}
			function input(at){ var cat = this;
				if(at['@'] || at.err || u === at.put){
					at.gun = at.gun || cat.gun;
					Gun.on.ack(at['@'], at);
					return;
				}
				if(cat.graph){
					Gun.obj.map(at.put, ham, {at: at, cat: this}); // all unions must happen first, sadly.
				}
				Gun.obj.map(at.put, map, {at: at, cat: this});
			}
			function ham(data, key){
				var cat = this.cat, graph = cat.graph;
				graph[key] = Gun.HAM.union(graph[key] || data, data) || graph[key];
			}
			function map(data, key){
				var cat = this.cat, graph = cat.graph, path = cat.path || (cat.path = {}), gun, at;
				gun = path[key] || (path[key] = cat.gun.get(key));
				(at = gun._).change = data;
				if(graph){
					data = graph[key]; // TODO! BUG/PERF! COPY!?
				}
				at.put = data;
				gun.on('in', {
					put: data,
					get: key,
					gun: gun,
					via: this.at
				});
			}
		}());
		var text = Type.text, text_is = text.is, text_random = text.random;
		var list = Type.list, list_is = list.is;
		var obj = Type.obj, obj_is = obj.is, obj_has = obj.has, obj_to = obj.to, obj_map = obj.map;
		var _soul = Gun._.soul, _field = Gun._.field;
		var u;

		console.debug = function(i, s){ return (console.debug.i && i === console.debug.i && console.debug.i++) && console.log.apply(console, arguments), s };

		Gun.log = function(){ return (!Gun.log.off && console.log.apply(console, arguments)), [].slice.call(arguments).join(' ') }
		Gun.log.once = function(w,s,o){ return (o = Gun.log.once)[w] = o[w] || 0, o[w]++ || Gun.log(s) }

		if(typeof window !== "undefined"){ window.Gun = Gun }
		if(typeof common !== "undefined"){ common.exports = Gun }
		module.exports = Gun;
	})(require, './gun');

	;require(function(module){

		var Gun = require('./gun');
		module.exports = Gun;

		;(function(){
			function meta(v,f){
				if(obj_has(Gun.__, f)){ return }
				obj_put(this._, f, v);
			}
			function map(value, field){
				if(Gun._.meta === field){ return }
				var node = this.node, vertex = this.vertex, union = this.union, machine = this.machine;
				var is = state_is(node, field), cs = state_is(vertex, field);
				if(u === is || u === cs){ return true } // it is true that this is an invalid HAM comparison.
				var iv = rel_is(value) || value, cv = rel_is(vertex[field]) || vertex[field];
				







				// TODO: BUG! Need to compare relation to not relation, and choose the relation if there is a state conflict.








				if(!val_is(iv) && u !== iv){ return true } // Undefined is okay since a value might not exist on both nodes. // it is true that this is an invalid HAM comparison.
				if(!val_is(cv) && u !== cv){ return true }  // Undefined is okay since a value might not exist on both nodes. // it is true that this is an invalid HAM comparison.
				var HAM = Gun.HAM(machine, is, cs, iv, cv);
				if(HAM.err){
					console.log(".!HYPOTHETICAL AMNESIA MACHINE ERR!.", HAM.err); // this error should never happen.
					return;
				}
				if(HAM.state || HAM.historical || HAM.current){ // TODO: BUG! Not implemented.
					//opt.lower(vertex, {field: field, value: value, state: is});
					return;
				}
				if(HAM.incoming){
					union[field] = value;
					state_ify(union, field, is);
					return;
				}
				if(HAM.defer){ // TODO: BUG! Not implemented.
					/*upper.wait = true;
					opt.upper.call(state, vertex, field, incoming, ctx.incoming.state); // signals that there are still future modifications.
					Gun.schedule(ctx.incoming.state, function(){
						update(incoming, field);
						if(ctx.incoming.state === upper.max){ (upper.last || function(){})() }
					}, gun.__.opt.state);*/
				}
			}
			Gun.HAM.union = function(vertex, node, opt){
				if(!node || !vertex || !node._ || !vertex._){ return }
				opt = num_is(opt)? {machine: opt} : {machine: (+new Date)};
				opt.union = Gun.obj.copy(vertex);
				opt.vertex = vertex;
				opt.node = node;
				obj_map(node._, meta, opt.union);
				if(obj_map(node, map, opt)){ // if this returns true then something was invalid.
					return;
				}
				return opt.union;
			}
			var Type = Gun;
			var num = Type.num, num_is = num.is;
			var obj = Type.obj, obj_has = obj.has, obj_put = obj.put, obj_map = obj.map;
			var node = Gun.node, node_soul = node.soul, node_is = node.is, node_ify = node.ify;
			var state = Gun.state, state_is = state.is, state_ify = state.ify;
			var val = Gun.val, val_is = val.is, rel_is = val.rel.is;
			var u;
		}());

	})(require, './index');

	;require(function(module){
		var Gun = require('./index');
		var obj = Gun.obj, obj_is = obj.is, obj_put = obj.put, obj_map = obj.map, obj_empty = obj.empty;
		var num = Gun.num, num_is = num.is;
		var _soul = Gun.val.rel._, _field = '.';
		
		;(function(){ var obj = {}, u;
			Gun.chain.Back = function(n, opt){ var tmp;
				if(-1 === n || Infinity === n){
					return this._.root;
				} else
				if(1 === n){
					return this._.back;
				}
				var gun = this, at = gun._;
				if(typeof n === 'string'){
					n = n.split('.');
				}
				if(n instanceof Array){
					var i = 0, l = n.length, tmp = at;
					for(i; i < l; i++){
						tmp = (tmp||obj)[n[i]];
					}
					if(u !== tmp){
						return opt? gun : tmp;
					} else
					if(tmp = at.back){
						return tmp.Back(n, opt);
					}
					return;
				}
				if(n instanceof Function){
					var yes, tmp = {_:{back: gun}};
					while((tmp = tmp._) && (tmp = tmp.back) && !(yes = n(tmp, opt))){}
					return yes;
				}
			}
		}())

		;(function(){

			Gun.chain.put = function(data, cb, opt, as){
				// TODO: BUG! Put probably cannot handle plural chains!
				var gun = this, root = gun.Back(-1), tmp;
				opt = (opt && typeof opt === 'string')? {soul: opt} : opt || {};
				as = as || {opt: opt, soul: opt.soul};
				as.gun = gun;
				as.data = data;
				opt.any = opt.any || cb;
				if(root === gun || as.soul){
					if(!obj_is(as.data)){
						(opt.any||noop).call(opt.as || gun, as.out = {err: Gun.log("No field to put", (typeof as.data), '"' + as.data + '" on!')});
						if(as.res){ as.res() }
						return gun;
					}
					if(!as.soul){
						if(opt.init || as.gun.Back('opt.init')){
							return gun;
						}
					}
					as.gun = gun = root.get(as.soul = as.soul || (as.not = Gun.node.soul(as.data) || (opt.uuid || root.Back('opt.uuid') || Gun.text.random)()));
					as.ref = as.ref || as.gun;
					ify(as);
					return gun;
				}
				if(Gun.is(data)){
					data.any(function(e,d,k,at,ev){
						ev.off();
						var s = Gun.node.soul(d);
						if(!s){Gun.log("Can only save a node, not a property.");return}
						gun.put(Gun.val.rel.ify(s), cb, opt);
					});
					return gun;
				}
				as.ref = as.ref || (root === (tmp = gun.Back(1)))? gun : tmp;
				as.ref.any(any, {as: as, '.': null});
				if(!as.out){
					as.res = as.res || Gun.on.stun(as.ref);
					as.gun._.stun = as.ref._.stun; // TODO: BUG! These stuns need to be attached all the way down, not just one level.
				}
				return gun;
			};

			function ify(as){
				as.batch = batch;
				var opt = as.opt, env = as.env = Gun.state.map(map, opt.state);
				env.soul = as.soul;
				as.graph = Gun.graph.ify(as.data, env, as);
				if(env.err){
					(opt.any||noop).call(opt.as || as.gun, as.out = {err: Gun.log(env.err)});
					if(as.res){ as.res() }
					return;
				}
				as.batch();
			}

			function batch(){ var as = this;
				if(!as.graph || obj_map(as.stun, no)){ return }
				as.ref.on('out', {
					gun: as.ref, put: as.out = as.env.graph, opt: as.opt,
					'#': Gun.on.ask(function(ack, ev){
						if(ack && 0 === ack.ok){ return }
						ev.off(); // One response is good enough for us currently. Later we may want to adjust this.
						if(!as.opt.any){ return }
						as.opt.any.call(as.opt.as || as.gun, ack.err, ack.ok);
					}, as.opt)
				});
				if(as.res){ as.res() }
			} function no(v,f){ if(v){ return true } }

			function map(v,f,n, at){ var as = this;
				if(f || !at.path.length){ return }
				var path = at.path, ref = as.ref, opt = as.opt;
				var i = 0, l = path.length;
				for(i; i < l; i++){
					ref = ref.get(path[i], null, {path: true}); // TODO: API change! We won't need 'path: true' anymore.
				}
				if(as.not || Gun.node.soul(at.obj)){
					at.soul(Gun.node.soul(at.obj) || (as.opt.uuid || as.gun.Back('opt.uuid') || Gun.text.random)());
					return;
				}
				(as.stun = as.stun || {})[path] = true;
				if(as.res){
					as.res(1);
				}
				ref.any(soul, {as: {at: at, as: as}, '.': null});
			}

			function soul(at, ev){ var as = this.as, cat = this.at;
				ev.stun(); // TODO: BUG!?
				ev.off();
				cat.soul(Gun.node.soul(cat.obj) || Gun.node.soul(at.put) || Gun.val.rel.is(at.put) || (as.opt.uuid || as.gun.Back('opt.uuid') || Gun.text.random)()); // TODO: BUG!? Do we really want the soul of the object given to us? Could that be dangerous?
				as.stun[cat.path] = false;
				as.batch();
			}

			function any(at, ev){ 
				function implicit(at){ // TODO: CLEAN UP!!!!!
					if(!at || !at.get){ return } // TODO: CLEAN UP!!!!!
					as.data = obj_put({}, tmp = at.get, as.data); // TODO: CLEAN UP!!!!!
					at = at.via; // TODO: CLEAN UP!!!!!
					if(!at){ return } // TODO: CLEAN UP!!!!!
					tmp = at.get; // TODO: CLEAN UP!!!!!
					if(!at.via || !at.via.get){ return } // TODO: CLEAN UP!!!!!
					implicit(at);  // TODO: CLEAN UP!!!!!
				} // TODO: CLEAN UP!!!!!
				var as = this;
				if(at.err){ 
					console.log("Please report this as an issue! Put.any.err");
					return 
				}
				var cat = as.ref._, data = at.put, opt = as.opt, root, tmp;
				if(u === data){
					if(opt.init || as.gun.Back('opt.init')){
						return;
					}
					/*
						TODO: THIS WHOLE SECTION NEEDS TO BE CLEANED UP!
						Implicit behavior should be much cleaner. Right now it is hacky.
					*/
					// TODO: BUG!!!!!!! Apparently Gun.node.ify doesn't produce a valid HAM node?
					if(as.ref !== as.gun){ // TODO: CLEAN UP!!!!!
						tmp = as.gun._.get; // TODO: CLEAN UP!!!!!
						if(!tmp){ return } // TODO: CLEAN UP!!!!!
						as.data = obj_put({}, tmp, as.data);
						tmp = u;
					}
					if(as.gun.Back(-1) !== cat.back){
						implicit(at);
					}
					tmp = tmp || at.get;
					any.call(as, {
						put: as.data,
						get: as.not = as.soul = tmp
					}, ev);
					return;
				}
				ev.off(ev.stun());
				if(!as.not && !(as.soul = Gun.node.soul(data))){
					if(as.path && obj_is(as.data)){ // Apparently necessary
						as.soul = (opt.uuid || as.gun.Back('opt.uuid') || Gun.text.random)();
					} else {
						/*
							TODO: CLEAN UP! Is any of this necessary?
						*/
						if(!at.get){
							console.log("Please report this as an issue! Put.any.no.soul");
							return;
						}
						(as.next = as.next || Gun.on.next(as.ref))(function(next){
							// TODO: BUG! Maybe don't go back up 1 because .put already does that if ref isn't already specified?
							(root = as.ref.Back(1)).put(data = obj_put({}, at.get, as.data), opt.any, opt, {
								opt: opt,
								ref: root
							});
							//Gun.obj.to(opt, {
							//	ref: null,
							//	gun: null,
							//	next: null,
							//	data: data
							//}));
							//next(); // TODO: BUG! Needed? Not needed?
						});
						return;
					}
				}
				if(as.ref !== as.gun && !as.not){
					tmp = as.gun._.get;
					if(!tmp){
						console.log("Please report this as an issue! Put.no.get"); // TODO: BUG!??
						return;
					}
					as.data = obj_put({}, tmp, as.data);
				}
				as.ref.put(as.data, opt.any, opt, as);
			}
			var obj = Gun.obj, obj_has = obj.has, obj_put = obj.put;
			var u, noop = function(){};
		}());

		;(function(){
			Gun.chain.get = function(lex, cb, opt){
				if(!opt || !opt.path){ var back = this.Back(-1); } // TODO: CHANGING API! Remove this line!
				var gun, back = back || this, cat = back._;
				var path = cat.path || empty, tmp;
				if(typeof lex === 'string'){
					if(!(gun = path[lex])){
						gun = cache(lex, back);
					}
				} else
				if(!lex && 0 != lex){
					(gun = back.chain())._.err = {err: Gun.log('Invalid get request!', lex)};
					if(cb){ cb.call(gun, gun._.err) }
					return gun;
				} else
				if(num_is(lex)){
					return back.get(''+lex, cb, opt);
				} else
				if(tmp = lex.soul){
					if(!(gun = path[tmp])){
						gun = cache(tmp, back);
					}
					if(tmp = lex.field){
						(opt = opt || {}).path = true;
						return gun.get(tmp, cb, opt);
					}
				} else
				if(tmp = lex[_soul]){
					if(!(gun = path[tmp])){
						gun = cache(tmp, back);
					}
					if(tmp = lex[_field]){
						(opt = opt || {}).path = true;
						return gun.get(tmp, cb, opt);
					}
				}
				if(tmp = cat.stun){
					gun._.stun = gun._.stun || tmp;
				}
				if(cb && cb instanceof Function){
					((opt = opt || {}).gun = opt.gun || gun).any(cb, opt);
				}
				return gun;
			}
			function cache(key, back){
				var cat = back._, path = cat.path, gun = back.chain(), at = gun._;
				if(!path){ path = cat.path = {} }
				path[at.get = key] = gun;
				at.stun = at.stun || cat.stun; // TODO: BUG! Clean up! This is kinda ugly. These need to be attached all the way down regardless of whether a gun chain has been cached or not for the first time. 
				Gun.on('path', at);
				//gun.on('in', input, at); // For 'in' if I add my own listeners to each then I MUST do it before in gets called. If I listen globally for all incoming data instead though, regardless of individual listeners, I can transform the data there and then as well.
				gun.on('out', output, at); // However for output, there isn't really the global option. I must listen by adding my own listener individually BEFORE this one is ever called.
				return gun;
			}
			function output(at){
				var cat = this, gun = cat.gun, root = gun.Back(-1), put, get, tmp;
				if(!at.gun){
					at.gun = gun;
				}
				console.debug(10, 'out', cat.get, at.get);
				if(at.get && !at.get[_soul]){
					if(typeof at.get === 'string'){ // request for soul!
						if(cat.ask){
							if(cat.ask[at.get]){
								return;
							}
							cat.ask[at.get] = at['#'] || 1;
							cat.on('in', function(tac, ev){ ev.off();
								var tmp = tac.put;
								if(tmp && u !== tmp[at.get] && (tmp = (cat.path||empty)[at.get])){
									tmp = tmp._;
									tmp.change = tac.put[at.get];
									tmp.put = tac.put[at.get];
									// TODO: Could we pass it to input/map function since they already do this?
									tmp.on('in', {
										get: at.get,
										put: tac.put[at.get],
										gun: tmp.gun,
										via: tac
									})
									return;
								}
								if(!(tmp = Gun.node.soul(tmp = tac.put) || Gun.val.rel.is(tmp))){
									tmp = (cat.path||empty)[at.get];
									if(!tmp){ return }
									tmp.on('in', {get: at.get, gun:tmp, via: tac});
									return;
								}
								cat.ask[at.get] = 0;
								tmp = {'#': tmp, '.': at.get};
								tmp = {gun: at.gun, get: tmp};
								tmp['#'] = Gun.on.ask(ack, tmp);
								at.gun.on('out', tmp);
							}).off();
							return;
						}
						cat.ask = obj_put({}, at.get, at['#'] || 1);
						gun.on('in', input, cat);
						if(root === cat.back){
							cat.ask[at.get] = 0;
							tmp = {'#': cat.get, '.': at.get};
							tmp = {gun: at.gun, get: tmp};
							tmp['#'] = Gun.on.ask(ack, tmp);
							at.gun.on('out', tmp);
							return;
						}
						console.debug(7, 'out', cat.get, at.get, cat.ask);
						cat.back.on('out', {
							gun: cat.gun,
							get: cat.get
						});
						return;
					} else
					if(at.get instanceof Function){
						if(!cat.ask){
							var opt = at.opt || {};
							tmp = obj_has(opt, '.'); // TODO: CLEAN UP!
							cat.ask = tmp? {} : {_:1}; // TODO: CLEAN UP!
							gun.on('in', input, cat);
							if(root === cat.back){
								if(cat.ask && cat.ask._){ cat.ask._ = 0 } // TODO: CLEAN UP!
								if(tmp && opt['.']){ cat.ask[opt['.']] = 0 } // TODO: CLEAN UP!
								tmp = tmp? {'#': cat.get, '.': opt['.']} : {'#': cat.get}; // TODO: CLEAN UP!
								tmp = {gun: at.gun, get: tmp};
								tmp['#'] = Gun.on.ask(ack, tmp);
								cat.back.on('out', tmp);
							} else {
								console.debug(6, 'out', cat.get);
								cat.back.on('out', {
									gun: cat.gun,
									get: cat.get
								});
							}
						}
						console.debug(9, 'out', cat.get);
						if(cat.stun && cat.stun(at)){ return }
						gun.on('in', at.get, at);
						return;
					}
				}
				cat.back.on('out', at);
			}
			function input(at, ev){ var cat = this, tmp;
				cat.id = cat.id || Gun.text.random(5); // TOD: BUG! This allows for 1B item entropy in memory. In the future, people might want to expand this to be larger.
				if(at.err){
					console.log("Please report this as an issue! In.err"); // TODO: BUG!
					return;
				}
				console.debug(10, 'input', at, cat.get);
				if(value.call(cat, at, ev)){
					return;
				}
				if(tmp = cat.link){
					if(tmp = tmp.res){
						// TODO: BUG! Ordering of the change set? What if the proxied object has a change but the parent has a happened too. Pretend that the parent changed the field such that it no longer point to the proxy. But in the changeset it might get iterated over last, thus it the update will get triggered here now for the proxy, even though this update is suppose to unsubscribe itself. Or what if this ordering is inconsistent? Or is this just basically impossible from the API's put perspective?
						tmp(cat); // TODO: BUG! What about via? Do we need to clone this?
					}
				}
				obj_map(cat.change, map, {at: at, cat: cat});
			}
			Gun.chain.get.input = input;
			function value(at, ev){
				//var cat = this, is = (u === at.put) || Gun.val.is(at.put), rel = Gun.val.rel.is(at.put), tmp, u;
				var cat = this, put = cat.change, rel, tmp, u;
				if(u === put){
					not(cat, at);
					return true;
				}
				if(!cat.link && Gun.node.soul(put) && (rel = Gun.node.soul(at.put))){
				console.debug(11, 'value', put);
					ask(cat, rel);
					return false;
				}
				if(!(rel = Gun.val.rel.is(put))){
					if(!Gun.val.is(put)){
						return false;
					}
					not(cat, at);
					return true;
				}
				//cat.change = at.put;
				if(cat.link){
					if(rel === cat.link.rel){
						ev.stun();
						tmp = cat.link.ref._;
						cat.change = tmp.change;
						cat.put = at.put = tmp.put; // TODO: BUG! Mutating at event? Needed for certain tests, but is this bad?
						return false;
					}
					not(cat, at);
				}
				tmp = ev.stun(tmp);
				//cat.put = u; // For performance sake, do this now to prevent `.val` from firing.
				tmp = cat.link = {rel: rel, ref: cat.gun.Back(-1).get(rel), res: tmp, as: cat};
				// TODO: BUG???? Below allows subscriptions to happen without the soul itself being subscribed. Will this cause problems? I think it should be okay. Not sure what test is necessary.
				tmp.sub = tmp.ref._.on('in', proxy, tmp); // TODO: BUG! If somebody does `.off` how do we clean up these things from memory?
				if(tmp.ran){ return }
				ask(cat, rel);
				if(!tmp.ran){
					tmp.res(); // This is necessary for things that listen for a soul or relation only.
				}
				return true;
			}
			function map(data, key){ // Map over only the changes on every update.
				if(Gun._.meta === key){ return }
				var cat = this.cat, path = cat.path || {}, gun, at, tmp;
				if(!(gun = path[key])){ return }
				if(cat.put && obj_has(cat.put, key)){ data = cat.put[key] } // But use the actual data.
				(at = gun._).change = cat.change[key];
				at.put = data;
				if(tmp = Gun.val.rel.is(at.put)){ // PERFORMANCE HACK!
					if(tmp = gun.Back(-1).get(tmp)._.put){ // PERFORMANCE HACK!
						at.put = data = tmp; // PERFORMANCE HACK!
					}
				}
				gun.on('in', {
					put: data,
					get: key,
					gun: gun,
					via: this.at
				});
			}
			function not(cat, at){
				var tmp, u;
				tmp = cat.link;
				if(u !== cat.put){ cat.link = null; } // TODO: BUG! This may mean `not` will be fired multiple times until data is found. Is this okay?
				if(null === tmp){ return }
				if(tmp){
					if(tmp.sub){
						tmp.sub.off();
					}
					tmp.sub = false;
				}
				obj_map(cat.ask, function(v,key){
					cat.ask[key] = 1;
					if(!(v = (cat.path||empty)[key])){ return }
					(tmp = v._).put = tmp.change = u;
					v.on('in', {get: key, put: u, gun: v, via: at});
				});
			}
			function ask(cat, soul){
				if(!cat.ask){ return }
				var tmp = cat.ask, lex;
				if(obj_has(tmp, '_')){
					if(!tmp._){ return }
					tmp._ = 0;
					lex = {gun: cat.gun, get: {'#': soul}};
					lex['#'] = Gun.on.ask(ack, lex);
					cat.gun.on('out', lex);
					return;
				}
				// TODO: PERF! Make it so we do not have to iterate through this every time?
				obj_map(tmp, function(v,key){
					if(!v || (cat.put && cat.put[key])){ return } // TODO: This seems like an optimization? But does it have side effects? Probably not without the tmp[key] = 0;
					if(!(v = (cat.path||empty)[key])){ return }
					tmp[key] = 0;
					lex = {gun: v, get: {'#': soul, '.': key}};
					lex['#'] = Gun.on.ask(ack, lex);
					v.on('out', lex);
				});
			}
			function proxy(at, ev){ var link = this;
				link.ran = true;
				if(false === link.sub){ return ev.off() } // will this auto clean itself up?
				link.as.change = link.ref._.change;
				link.as.put = at.put;
				input.call(link.as, at, ev); // TODO: BUG! What about via? Do we need to clone this?
			}
			Gun.chain.any = function(any, opt){
				if(!any){ return this }
				var chain = this, cat = chain._, opt = opt || {}, last = {};//function(){};
				if(opt.change){ opt.change = 1 }
				console.debug(5, 'any');
				chain.on('out', {get: function(at, ev){
						//console.log("any!", at);
						if(!at.gun){ console.log('%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%EXPLODE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%', at) }
						var gun = at.gun || chain, cat = gun._;
						var data = cat.put || at.put, tmp;
						if((tmp = at.put) && tmp[Gun.val.rel._] && (tmp = Gun.val.rel.is(tmp))){
							if(null !== opt['.']){
								return;
							}
							at = obj_to(at, {put: data = cat.change = cat.put = Gun.state.ify(Gun.node.ify({}, tmp))});
						}
						// TODO: BUG! Need to use at.put > cat.put for merged cache?
						if(tmp = opt.change){ // TODO: BUG! Opt is outer scope, gun/cat/data might be iterative and thus only inner scope? Aka, we can't use it for all of them. 
							if(1 === tmp){
								opt.change = true;
							} else {
								data = cat.change;
								at = obj_to(at, {put: data});
							}
						}
						var id = cat.id+at.get;
						/*
						if(last[id] == data && obj_has(last, id)){ return }
						last[id] = data; // TODO: PERF! Memory optimizaiton? Can we avoid this.
						*/
					
						if(last.put === data && last.get === id){ return }
						last.get = id;
						last.put = data;
						
						cat.last = data;
						if(opt.as){
							any.call(opt.as, at, ev);
						} else {
							any.call(gun, at.err, data, at.get, cat, ev);
						}
					}, opt: opt
				});
				return chain;
			}
			function ack(at, ev){ var lex = this.get, chain = this.gun;
				var s = lex['#'], f = lex['.'], root = at.gun.Back(-1), gun = root.get(s), tmp;
				if(tmp = at.put){
					if(!f || obj_has(tmp[s], f)){
						ev.off();
						at['@'] = 0;
						return root.on('in', at);
					}
					/*
					if(!tmp[s] && !obj_empty(tmp)){ // TODO: BUG! Seems like it just causes unnecessary data/event to be triggered. Nothing genuinely useful.
						ev.off(); // TODO: BUG!? It isn't matching data by lex means, but it IS a reply?
						at['@'] = 0;
						return root.on('in', at);
					}
					*/
					if(f && gun._.put){
						gun = gun.get(f, null, {path:true});
						if(!chain){
							console.log("Please report this as an issue! ack.chain");
							return;
						}
						chain.on('in', {
							err: at.err,
							get: f,
							gun: chain,
							via: {get:s,via:at}
						});
						return;
					}
				}
				if(gun._.put){
					gun = gun.get(f, null, {path:true});
					gun.on('in', {
						err: at.err,
						get: f,
						gun: gun,
						via: {get:s,via:at}
					});
					return;
				}
				gun.on('in', {
					err: at.err,
					put: at.put? at.put[s] || at.put : at.put,
					get: s,
					gun: gun,
					via: at
				});
			}
			var obj = Gun.obj, obj_has = obj.has, obj_to = obj.to;
			var empty = {}, u;
			var _soul = Gun._.soul, _field = Gun._.field, _sid = Gun.on.ask._, _rid = Gun.on.ack._;
		}());

		;(function(){
			Gun.chain.key = function(index, cb, opt){
				if(!index){
					if(cb){
						cb.call(this, {err: Gun.log('No key!')});
					}
					return this;
				}
				var gun = this;
				if(typeof opt === 'string'){
					console.log("Please report this as an issue! key.opt.string");
					return gun;
				}
				if(gun === gun._.root){if(cb){cb({err: Gun.log("Can't do that on root instance.")})};return gun}
				opt = opt || {};
				opt.key = index;
				opt.any = cb || function(){};
				opt.ref = gun.Back(-1).get(opt.key);
				opt.gun = opt.gun || gun;
				gun.on(key, {as: opt});
				if(!opt.data){
					opt.res = Gun.on.stun(opt.ref);
				}
				return gun;
			}
			function key(at, ev){ var opt = this;
				ev.off();
				opt.soul = Gun.node.soul(at.put);
				if(!opt.soul || opt.key === opt.soul){ return opt.data = {} }
				opt.data = obj_put({}, keyed._, Gun.node.ify(obj_put({}, opt.soul, Gun.val.rel.ify(opt.soul)), '#'+opt.key+'#'))
				if(opt.res){
					opt.res(1);
				}
				opt.ref.put(opt.data, opt.any, {soul: opt.key, key: opt.key});
				if(opt.res){
					opt.res();
				}
			}
			function keyed(f){
				if(!f || !('#' === f[0] && '#' === f[f.length-1])){ return }
				var s = f.slice(1,-1);
				if(!s){ return }
				return s;
			}
			keyed._ = '##';
			Gun.on('path', function(at){
				var gun = at.gun;
				if(gun.Back(-1) !== at.back){ return }
				gun.on('in', pseudo, gun._);
				gun.on('out', normalize, gun._);
			});
			function normalize(at){ var cat = this;
				if(!at.put){
					if(at.get){
						search.call(cat, at);
					}
					return;
				}
				if(at.opt && at.opt.key){ return }
				var put = at.put, graph = cat.gun.Back(-1)._.graph;
				Gun.graph.is(put, function(node, soul){
					if(!Gun.node.is(graph['#'+soul+'#'], function each(rel,id){
						if(id !== Gun.val.rel.is(rel)){ return }
						if(rel = graph['#'+id+'#']){
							Gun.node.is(rel, each);
							return;
						}
						Gun.node.soul.ify(rel = put[id] = Gun.obj.copy(node), id);
					})){ return }
					Gun.obj.del(put, soul);
				});
			}
			function search(at){ var cat = this;
				var tmp;
				if(!Gun.obj.is(at.get)){ return }
				if(cat.pseudo){

				}
				if((tmp = at.opt) && (null === tmp['.'])){
					tmp['.'] = '##';
					return;
				}
				if((tmp = at.get) && Gun.obj.has(tmp, '.')){
					tmp = at['#'];
					at['#'] = Gun.on.ask(proxy);
				}
				var tried = {};
				function proxy(ack, ev){
					ev.off();
					var put = ack.put, lex = at.get;
					if(!cat.pseudo){ return Gun.on.ack(tmp, ack) }
					if(ack.put){
						if(!lex['.']){
							return Gun.on.ack(tmp, ack);
						}
						if(obj_has(ack.put[lex['#']], lex['.'])){
							return Gun.on.ack(tmp, ack);
						}
					}
					Gun.obj.map(cat.seen, function(ref,id){ // TODO: BUG! In-memory versus future?
						if(tried[id]){
							return Gun.on.ack(tmp, ack);
						}
						tried[id] = true;
						ref.on('out', {
							gun: ref,
							get: id = {'#': id, '.': at.get['.']},
							'#': Gun.on.ask(proxy)
						});
					});
				}
			}
			function pseudo(at, ev){ var cat = this;
				if(cat.pseudo){
					ev.stun();
					if(cat.pseudo === at.put){ return }
					cat.change = cat.changed || cat.pseudo;
					cat.on('in', Gun.obj.to(at, {put: cat.put = cat.pseudo}));
					return;
				}
				if(!at.put){ return }
				var rel = Gun.val.rel.is(at.put[keyed._]);
				if(!rel){ return }
				var soul = Gun.node.soul(at.put), resume = ev.stun(resume), root = cat.gun.Back(-1), seen = cat.seen = {};
				cat.pseudo = cat.put = Gun.state.ify(Gun.node.ify({}, soul));
				root.get(rel).on(each, true);
				function each(change){
					Gun.node.is(change, map);
				}
				function map(rel, soul){
					if(soul !== Gun.val.rel.is(rel)){ return }
					if(seen[soul]){ return }
					seen[soul] = root.get(soul).on(on, true);
				}
				function on(put){
					cat.pseudo = Gun.HAM.union(cat.pseudo, put) || cat.pseudo;
					cat.change = cat.changed = put;
					cat.put = cat.pseudo;
					resume({
						gun: cat.gun,
						put: cat.pseudo,
						get: soul
						//via: this.at
					});
				}
			}
			var obj = Gun.obj, obj_has = obj.has;
		}());

		Gun.chain.path = function(field, cb, opt){
			var back = this, gun = back, tmp;
			opt = opt || {}; opt.path = true;
			if(gun === gun._.root){if(cb){cb({err: Gun.log("Can't do that on root instance.")})}return gun}
			if(typeof field === 'string'){
				tmp = field.split(opt.split || '.');
				if(1 === tmp.length){
					return back.get(field, cb, opt);
				}
				field = tmp;
			}
			if(field instanceof Array){
				if(field.length > 1){
					gun = back;
					var i = 0, l = field.length;
					for(i; i < l; i++){
						console.debug(3, 'path', field[i]);
						console.debug(2, 'path', field[i]);
						gun = gun.get(field[i], (i+1 === l)? cb : null, opt);
					}
					gun.back = back; // TODO: API change!
				} else {
					gun = back.get(field[0], cb, opt);
				}
				return gun;
			}
			if(!field && 0 != field){
				return back;
			}
			return back.get(''+field, cb, opt);
		}

		;(function(){
			Gun.chain.on = function(tag, arg, eas, as){
				var gun = this, at = gun._, tmp;
				if(!at.on){ at.on = Gun.on }
				if(typeof tag === 'string'){
					if(!arg){ return at.on(tag) }
					at.on(tag, arg, eas || at, as);
					return gun;
				}
				var opt = arg;
				opt = (true === opt)? {change: true} : opt || {}; 
				opt.ok = tag;
				gun.any(ok, {as: opt, change: opt.change}); // TODO: PERF! Event listener leak!!!????
				return gun;
			}

			function ok(cat, ev){ var opt = this;
				var data = cat.put, tmp; 
				// TODO: BUG! Need to use at.put > cat.put for merged cache?
				if(u === data){ return }
				if(opt.as){
					//console.log("BANANA CREAM PIE", opt);
					opt.ok.call(opt.as, cat, ev);
				} else {
					//console.log("HICADOO DAAH", cat, opt);
					opt.ok.call(cat.gun, data, cat.get, cat, ev);
				}
			}

					//if(obj_empty(value, Gun._.meta) && !(opt && opt.empty)){ // TODO: PERF! Deprecate!???
						
					//} else {
						//console.log("value", value);
						//if(!(value||empty)['#']/* || !val_rel_is(value)*/){ // TODO: Performance hit!???? // TODO: BUG! WE should avoid this. So that way it is usable with gun plugin chains.
							//cb.call(gun, value, at.get); // TODO: BUG! What about stun?
							//return gun;
						//}
					//}

			// TODO: BUG! What about stun?
			Gun.chain.val = function(cb, opt){
				var gun = this, at = gun._, value = at.put;
				if(!at.stun && u !== value){
					cb.call(gun, value, at.get);
					return gun;
				}
				if(cb){
					(opt = opt || {}).ok = cb;
					opt.cat = at;
					console.debug(4, 'val', at);
					gun.any(val, {as: opt});
					opt.async = true;
				}
				return gun;
			}

			function val(at, ev, to){ var opt = this;
				var cat = opt.cat, data = at.put;
				if(u === data){
					return;
				}
				clearTimeout(ev.to);
				if(!to && opt.async){
					ev.to = setTimeout(function(){
						val.call(opt, at, ev, ev.to || 1)
					}, opt.wait || 99);
					return;
				}
				ev.off();
				opt.ok.call(at.gun || opt.gun, data, at.get); // TODO: BUG! opt.gun?
			}

			Gun.chain.off = function(){
				var gun = this, at = gun._, tmp;
				var back = at.back || {}, cat = back._;
				if(!cat){ return }
				if(tmp = cat.path){
					if(tmp[at.get]){
						obj_del(tmp, at.get);
					} else {
						obj_map(tmp, function(path, key){
							if(gun !== path){ return }
							obj_del(tmp, key);
						});
					}
				}
				if((tmp = gun.Back(-1)) === back){
					obj_del(tmp.graph, at.get);
				}
				if(at.ons && (tmp = at.ons['@$'])){
					obj_map(tmp.s, function(ev){
						ev.off();
					});
				}
				return gun;
			}
			var obj = Gun.obj, obj_has = obj.has, obj_del = obj.del, obj_to = obj.to;
			var val_rel_is = Gun.val.rel.is;
			var empty = {}, u;
		}());

		;(function(){
			Gun.chain.not = function(cb, opt, t){
				var gun = this, at = Gun.obj.to(gun._, {not: {not: cb}});
				gun.any(ought, {as: at});
				return gun;
			}
			function ought(cat, ev){ ev.off(); var at = this; // TODO: BUG! Is this correct?
				if(cat.err || cat.put){ return }
				if(!at.not || !at.not.not){ return }
				//ev.stun(); // TODO: BUG? I think this is correct. NOW INCORRECT because as things mutate we might want to retrigger!
				at.not.not.call(at.gun, at.get, function(){ console.log("Please report this bug on https://gitter.im/amark/gun and in the issues."); need.to.implement; });
			}
		}());

		;(function(){
			Gun.chain.map = function(cb, opt, t){
				var gun = this, cat = gun._, chain = cat.map;
				if(!chain){
					chain = cat.map = gun.chain();
					var list = (cat = chain._).list = cat.list || {};
					chain.on('in').map = {};
					chain.on('out', function(at){
						console.debug(8, 'map out', at);
				 		if(at.get instanceof Function){
							chain.on('in', at.get, at);
							return;
						} else {
							console.debug(9, 'map out', at);
							chain.on('in', gun.get.input, at.gun._);
						}
					});
					if(opt !== false){
						gun.on(map, {change: true, as: cat});
						console.debug(1, 'map');
					}
				}
				if(cb){
					chain.on(cb);
				}
				return chain;
			}
			function map(at,ev){
				var cat = this, gun = at.gun || this.back, tac = gun._;
				obj_map(at.put, each, {gun:gun, cat: cat, id: tac.id||at.get});
			}
			function each(v,f){
				if(n_ === f){ return }
				var gun = this.gun, cat = this.cat, id = this.id;
				if(cat.list[id+f]){ return }
				// TODO: BUG! Ghosting!
				cat.list[id+f] = gun.path(f).on(function(v,f,a,ev){
					//cat.on('in',[{gun:this,get:f,put:v},ev]);
					cat.on('in',[id+f,{gun:this,get:f,put:v},ev]);
				});
			}
			var obj_map = Gun.obj.map, noop = function(){}, event = {stun: noop, off: noop}, n_ = Gun.node._;
		}());

		;(function(){
			Gun.chain.init = function(){ // TODO: DEPRECATE?
				(this._.opt = this._.opt || {}).init = true;
				return this.Back(-1).put(Gun.node.ify({}, this._.get), null, this._.get);
			}
		}());

		;(function(){
			Gun.chain.set = function(item, cb, opt){
				var gun = this;
				cb = cb || function(){};
				return item.val(function(node){
					var put = {}, soul = Gun.node.soul(node);
					if(!soul){ return cb.call(gun, {err: Gun.log('Only a node can be linked! Not "' + node + '"!')}) }
					gun.put(Gun.obj.put(put, soul, Gun.val.rel.ify(soul)), cb, opt);
				});
			}
		}());
	})(require, './api');

	;require(function(module){
		if(typeof JSON === 'undefined'){ throw new Error("Include JSON first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js") } // for old IE use
		if(typeof Gun === 'undefined'){ return } // TODO: localStorage is Browser only. But it would be nice if it could somehow plugin into NodeJS compatible localStorage APIs?
		
		var root, noop = function(){};
		if(typeof window !== 'undefined'){ root = window }
		var store = root.localStorage || {setItem: noop, removeItem: noop, getItem: noop};

		function put(at){ var err, id, opt, root = at.gun._.root;
			(opt = at.opt || {}).prefix = opt.prefix || 'gun/';
			Gun.graph.is(at.put, function(node, soul){
				//try{store.setItem(opt.prefix + soul, Gun.text.ify(node));
				try{store.setItem(opt.prefix + soul, Gun.text.ify(root._.graph[soul]||node));
				}catch(e){ err = e || "localStorage failure" }
			});
			//console.log('@@@@@@@@@@local put!');
			Gun.on.ack(at, {err: err, ok: 0}); // TODO: Reliability! Are we sure we want to have localStorage ack?
		}
		function get(at){
			var gun = at.gun, lex = at.get, soul, data, opt, u;
			//setTimeout(function(){
			(opt = at.opt || {}).prefix = opt.prefix || 'gun/';
			if(!lex || !(soul = lex[Gun._.soul])){ return }
			data = Gun.obj.ify(store.getItem(opt.prefix + soul) || null);
			if(!data){ return } // localStorage isn't trustworthy to say "not found".
			if(Gun.obj.has(lex, '.')){var tmp = data[lex['.']];data = {_: data._};if(u !== tmp){data[lex['.']] = tmp}}
			//console.log('@@@@@@@@@@@@local get', data, at);
			gun.Back(-1).on('in', {'@': at['#'], put: Gun.graph.node(data)});
			//},100);
		}
		Gun.on('put', put);
		Gun.on('get', get);
	})(require, './adapters/localStorage');
	
	;require(function(module){
		function r(base, body, cb, opt){
			var o = base.length? {base: base} : {};
			o.base = opt.base || base;
			o.body = opt.body || body;
			o.headers = opt.headers;
			o.url = opt.url;
			o.out = opt.out;
			cb = cb || function(){};
			if(!o.base){ return }
			r.transport(o, cb);
		}
		r.createServer = function(fn){ r.createServer.s.push(fn) }
		r.createServer.ing = function(req, cb){
			var i = r.createServer.s.length;
			while(i--){ (r.createServer.s[i] || function(){})(req, cb) }
		}
		r.createServer.s = [];
		r.back = 2; r.backoff = 2;
		r.transport = function(opt, cb){
			//Gun.log("TRANSPORT:", opt);
			if(r.ws(opt, cb)){ return }
			r.jsonp(opt, cb);
		}
		r.ws = function(opt, cb, req){
			var ws, WS = window.WebSocket || window.mozWebSocket || window.webkitWebSocket;
			if(!WS){ return }
			if(ws = r.ws.peers[opt.base]){
				req = req || {};
				if(opt.headers){ req.headers = opt.headers }
				if(opt.body){ req.body = opt.body }
				if(opt.url){ req.url = opt.url }
				req.headers = req.headers || {};
				if(!opt.out && !ws.cbs[req.headers['ws-rid']]){
					ws.cbs[req.headers['ws-rid'] = 'WS' + (+ new Date()) + '.' + Math.floor((Math.random()*65535)+1)] = function(err,res){
						if(!res || res.body || res.end){ delete ws.cbs[req.headers['ws-rid']] }
						cb(err,res);
					}
				}
				if(!ws.readyState){ return setTimeout(function(){ r.ws(opt, cb, req) },100), true }
				ws.sending = true;
				ws.send(JSON.stringify(req));
				return true;
			}
			if(ws === false){ return }
			(ws = r.ws.peers[opt.base] = new WS(opt.base.replace('http','ws'))).cbs = {};
			ws.onopen = function(o){ r.back = 2; r.ws(opt, cb) };
			ws.onclose = window.onbeforeunload = function(c){
				if(!ws || !c){ return }
				if(ws.close instanceof Function){ ws.close() }
				if(!ws.sending){
					ws = r.ws.peers[opt.base] = false;
					return r.transport(opt, cb);
				}
				r.each(ws.cbs, function(cb){
					cb({err: "WebSocket disconnected!", code: !ws.sending? -1 : (ws||{}).err || c.code});
				});
				ws = r.ws.peers[opt.base] = null; // this will make the next request try to reconnect
				setTimeout(function(){ // TODO: Have the driver handle this!
					r.ws(opt, function(){}); // opt here is a race condition, is it not? Does this matter?
				}, r.back *= r.backoff);
			};
			ws.onmessage = function(m){ var res;
				if(!m || !m.data){ return }
				try{res = JSON.parse(m.data);
				}catch(e){ return }
				if(!res){ return }
				res.headers = res.headers || {};
				if(res.headers['ws-rid']){ return (ws.cbs[res.headers['ws-rid']]||function(){})(null, res) }
				if(res.body){ r.createServer.ing(res, function(res){ res.out = true; r(opt.base, null, null, res)}) } // emit extra events.
			};
			ws.onerror = function(e){ (ws||{}).err = e };
			return true;
		}
		r.ws.peers = {};
		r.ws.cbs = {};
		r.jsonp = function(opt, cb){
			r.jsonp.ify(opt, function(url){
				if(!url){ return }
				r.jsonp.send(url, function(err, reply){
					cb(err, reply);
					r.jsonp.poll(opt, reply);
				}, opt.jsonp);
			});
		}
		r.jsonp.send = function(url, cb, id){
			var js = document.createElement('script');
			js.src = url;
			js.onerror = function(c){
				(window[js.id]||function(){})(null, {err: "JSONP failed!"});
			}
			window[js.id = id] = function(res, err){
				cb(err, res);
				cb.id = js.id;
				js.parentNode.removeChild(js);
				window[cb.id] = null; // TODO: BUG: This needs to handle chunking!
				try{delete window[cb.id];
				}catch(e){}
			}
			js.async = true;
			document.getElementsByTagName('head')[0].appendChild(js);
			return js;
		}
		r.jsonp.poll = function(opt, res){
			if(!opt || !opt.base || !res || !res.headers || !res.headers.poll){ return }
			(r.jsonp.poll.s = r.jsonp.poll.s || {})[opt.base] = r.jsonp.poll.s[opt.base] || setTimeout(function(){ // TODO: Need to optimize for Chrome's 6 req limit?
				//Gun.log("polling again");
				var o = {base: opt.base, headers: {pull: 1}};
				r.each(opt.headers, function(v,i){ o.headers[i] = v })
				r.jsonp(o, function(err, reply){
					delete r.jsonp.poll.s[opt.base];
					while(reply.body && reply.body.length && reply.body.shift){ // we're assuming an array rather than chunk encoding. :(
						var res = reply.body.shift();
						if(res && res.body){ r.createServer.ing(res, function(){ r(opt.base, null, null, res) }) } // emit extra events.
					}
				});
			}, res.headers.poll);
		}
		r.jsonp.ify = function(opt, cb){
			var uri = encodeURIComponent, q = '?';
			if(opt.url && opt.url.pathname){ q = opt.url.pathname + q; }
			q = opt.base + q;
			r.each((opt.url||{}).query, function(v, i){ q += uri(i) + '=' + uri(v) + '&' });
			if(opt.headers){ q += uri('`') + '=' + uri(JSON.stringify(opt.headers)) + '&' }
			if(r.jsonp.max < q.length){ return cb() }
			q += uri('jsonp') + '=' + uri(opt.jsonp = 'P'+Math.floor((Math.random()*65535)+1));
			if(opt.body){
				q += '&';
				var w = opt.body, wls = function(w,l,s){
					return uri('%') + '=' + uri(w+'-'+(l||w)+'/'+(s||w))  + '&' + uri('$') + '=';
				}
				if(typeof w != 'string'){
					w = JSON.stringify(w);
					q += uri('^') + '=' + uri('json') + '&';
				}
				w = uri(w);
				var i = 0, l = w.length
				, s = r.jsonp.max - (q.length + wls(l.toString()).length);
				if(s < 0){ return cb() }
				while(w){
					cb(q + wls(i, (i = i + s), l) + w.slice(0, i));
					w = w.slice(i);
				}
			} else {
				cb(q);
			}
		}
		r.jsonp.max = 2000;
		r.each = function(obj, cb, as){
			if(!obj || !cb){ return }
			for(var i in obj){
				if(obj.hasOwnProperty(i)){
					cb.call(as, obj[i], i);
				}
			}
		}
		module.exports = r;
	})(require, './polyfill/request');

	;require(function(module){
		P.request = require('./request');
		function P(p){
			if(!P.is(this)){ return new P(p) }
			this.peers = p;
		}
		P.is = function(p){ return (p instanceof P) }
		P.chain = P.prototype;
		function map(peer, url){
			var msg = this.msg;
			var opt = this.opt || {};
			opt.out = true;
			P.request(url, msg, null, opt);
		}
		P.chain.send = function(msg, opt){
			P.request.each(this.peers, map, {msg: msg, opt: opt});
		}
		module.exports = P;
	})(require, './polyfill/peer');

	;require(function(module){
		if(typeof JSON === 'undefined'){ throw new Error("Include JSON first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js") } // for old IE use
		if(typeof Gun === 'undefined'){ return } // TODO: window.Websocket is Browser only. But it would be nice if it could somehow merge it with lib/WSP?
		
		var root, noop = function(){};
		if(typeof window !== 'undefined'){ root = window }

		var Tab = {};
		Tab.on = Gun.on;//Gun.on.create();
		Tab.peers = require('../polyfill/peer');
		Gun.on('get', function(at){
			var gun = at.gun, opt = gun.Back('opt') || {}, peers = opt.peers;
			if(!peers || Gun.obj.empty(peers)){
				//setTimeout(function(){
				Gun.log.once('peers', "Warning! You have no peers to connect to!");
				at.gun.Back(-1).on('in', {'@': at['#']});
				//},100);
				return;
			}
			var msg = {
				'#': at['#'] || Gun.text.random(9), // msg ID
				'$': at.get // msg BODY
			};
			Tab.on(msg['#'], function(err, data){ // TODO: ONE? PERF! Clear out listeners, maybe with setTimeout?
				if(data){
					at.gun.Back(-1).on('out', {'@': at['#'], err: err, put: data});
				} else {
					at.gun.Back(-1).on('in', {'@': at['#'], err: err, put: data});
				}
			});
			Tab.peers(peers).send(msg, {headers: {'gun-sid': Tab.server.sid}});
		});
		Gun.on('put', function(at){
			if(at['@']){ return }
			var opt = at.gun.Back('opt') || {}, peers = opt.peers;
			if(!peers || Gun.obj.empty(peers)){
				Gun.log.once('peers', "Warning! You have no peers to save to!");
				at.gun.Back(-1).on('in', {'@': at['#']});
				return;
			}
			if(false === opt.websocket || (at.opt && false === at.opt.websocket)){ return }
			var msg = {
				'#': at['#'] || Gun.text.random(9), // msg ID
				'$': at.put // msg BODY
			};
			Tab.on(msg['#'], function(err, ok){ // TODO: ONE? PERF! Clear out listeners, maybe with setTimeout?
				at.gun.Back(-1).on('in', {'@': at['#'], err: err, ok: ok});
			});
			Tab.peers(peers).send(msg, {headers: {'gun-sid': Tab.server.sid}});
		});
		// browser/client side Server!
		Gun.on('opt', function(at){ // TODO: BUG! Does not respect separate instances!!!
			if(Tab.server){ return }
			var gun = at.gun, server = Tab.server = {}, tmp;
			server.sid = Gun.text.random();
			Tab.peers.request.createServer(function(req, res){
				if(!req || !res || !req.body || !req.headers){ return }
				var msg = req.body;
				// AUTH for non-replies.
				if(server.msg(msg['#'])){ return }
				//server.on('network', Gun.obj.copy(req)); // Unless we have WebRTC, not needed.
				if(msg['@']){ // no need to process.
					if(Tab.ons[tmp = msg['@'] || msg['#']]){
						Tab.on(tmp, [msg['!'], msg['$']]);
					}
					return 
				}
				if(msg['$'] && msg['$']['#']){ return server.get(req, res) }
				else { return server.put(req, res) }
			});
			server.get = function(req, cb){
				var body = req.body, lex = body['$'], opt;
				var graph = gun._.root._.graph, node;
				if(!(node = graph[lex['#']])){ return } // Don't reply to data we don't have it in memory. TODO: Add localStorage?
				cb({body: {
					'#': server.msg(),
					'@': body['#'],
					'$': node
				}});
			}
			server.put = function(req, cb){
				var body = req.body, graph = body['$'];
				var __ = gun._.root._;
				if(!(graph = Gun.obj.map(graph, function(node, soul, map){ // filter out what we don't have in memory.
					if(!__.path[soul]){ return }
					map(soul, node);
				}))){ return }
				gun.on('out', {gun: gun, opt: {websocket: false}, put: graph, '#': Gun.on.ask(function(ack, ev){
					if(!ack){ return }
					ev.off();
					return cb({body: {
						'#': server.msg(),
						'@': body['#'],
						'$': ack,
						'!': ack.err
					}});
				})});
			}
			server.msg = function(id){
				if(!id){
					return server.msg.debounce[id = Gun.text.random(9)] = Gun.time.is(), id;
				}
				clearTimeout(server.msg.clear);
				server.msg.clear = setTimeout(function(){
					var now = Gun.time.is();
					Gun.obj.map(server.msg.debounce, function(t,id){
						if((now - t) < (1000 * 60 * 5)){ return }
						Gun.obj.del(server.msg.debounce, id);
					});
				},500);
				if(server.msg.debounce[id]){ 
					return server.msg.debounce[id] = Gun.time.is(), id;
				}
				server.msg.debounce[id] = Gun.time.is();
				return;
			};	
			server.msg.debounce = server.msg.debounce || {};
		});

	})(require, './adapters/wsp');

}());

},{"../polyfill/peer":undefined,"./HAM":undefined,"./graph":undefined,"./gun":11,"./index":12,"./node":undefined,"./on":undefined,"./onify":undefined,"./request":undefined,"./state":undefined,"./type":undefined,"./val":undefined}],12:[function(require,module,exports){
module.exports = require('./lib/server');
},{"./lib/server":16}],13:[function(require,module,exports){
// This was written by the wonderful Forrest Tait
// modified by Mark to be part of core for convenience
// twas not designed for production use
// only simple local development.
var Gun = require('../gun'),
	fs = require('fs'),
	file = {};

// queue writes, adapted from https://github.com/toolness/jsondown/blob/master/jsondown.js
var isWriting = false, queuedWrites = [];
function writeFile(path, disk, at){
	if(isWriting) return queuedWrites.push(at);
	isWriting = true;
	var contents = JSON.stringify(disk, null, 2);
	fs.writeFile(String(path), contents, function(err) {
		var batch = queuedWrites.splice(0);
		isWriting = false;
		at.gun.Back(-1).on('in', {'@': at['#'], err: err, ok: err? false : 1});
		if(!batch.length){ return }
		batch.forEach(function(at){
			at.gun.Back(-1).on('in', {'@': at['#'], err: err, ok: err? false : 1});
		});
	});
}

Gun.on('put', function(at){
	var gun = at.gun, graph = at.put, opt = at.opt || {};
	var __ = gun._.root._;
	Gun.obj.map(graph, function(node, soul){
		file.disk.graph[soul] = __.graph[soul] || graph[soul];
	});
	writeFile(opt.file || file.file, file.disk, at);
});
Gun.on('get', function(at){
	var gun = at.gun, lex = at.get, opt = at.opt;
	if(!lex){return}
	gun.Back(-1).on('in', {'@': at['#'], put: Gun.graph.node(file.disk.graph[lex['#']])});
	//at.cb(null, file.disk.graph[lex['#']]);
});

Gun.on('opt', function(at){
	var gun = at.gun, opts = at.opt;
	if ((opts.file === false) || (opts.s3 && opts.s3.key)) {
		return; // don't use this plugin if S3 is being used.
	}
	console.log("WARNING! This `file.js` module for gun is intended only for local development testing!")
	file.file = opts.file || file.file || 'data.json';
	file.raw = file.raw || (fs.existsSync || require('path').existsSync)(opts.file) ? fs.readFileSync(opts.file).toString() : null;
	file.disk = file.disk || Gun.obj.ify(file.raw || {graph: {}});
	file.disk.graph = file.disk.graph || {};
});

},{"../gun":11,"fs":undefined,"path":undefined}],14:[function(require,module,exports){
var Gun = require('../gun')
,	formidable = require('formidable')
,	url = require('url');
module.exports = function(req, res, next){
	next = next || function(){}; // if not next, and we don't handle it, we should res.end
	if(!req || !res){ return next() }
	if(!req.url){ return next() }
	if(!req.method){ return next() }
	var msg = {};
	msg.url = url.parse(req.url, true);
	msg.method = (req.method||'').toLowerCase();
	msg.headers = req.headers;
	var u, body
	,	form = new formidable.IncomingForm()
	,	post = function(err, body){
		if(u !== body){ msg.body = body }
		next(msg, function(reply){
			if(!res){ return }
			if(!reply){ return res.end() }
			if(Gun.obj.has(reply, 'statusCode') || Gun.obj.has(reply, 'status')){
				res.statusCode = reply.statusCode || reply.status;
			}
			if(reply.headers){
				if(!(res.headersSent || res.headerSent || res._headerSent || res._headersSent)){
					Gun.obj.map(reply.headers, function(val, field){
						if(val !== 0 && !val){ return }
						res.setHeader(field, val);
					});
				}
			}
			if(Gun.obj.has(reply,'chunk') || Gun.obj.has(reply,'write')){
				res.write(Gun.text.ify(reply.chunk || reply.write) || '');
			}
			if(Gun.obj.has(reply,'body') || Gun.obj.has(reply,'end')){
				res.end(Gun.text.ify(reply.body || reply.end) || '');
			}
		});
	}
	form.on('field',function(k,v){
		(body = body || {})[k] = v;
	}).on('file',function(k,v){
		return; // files not supported in gun yet
	}).on('error',function(e){
		if(form.done){ return }
		post(e);
	}).on('end', function(){
		if(form.done){ return }
		post(null, body);
	});
	form.parse(req);
}
},{"../gun":11,"formidable":6,"url":undefined}],15:[function(require,module,exports){
var Gun = require('../gun');
module.exports = function(req, cb){
	if(!req.url || !req.url.query || !req.url.query.jsonp){ return cb }
	cb.jsonp = req.url.query.jsonp;
	delete req.url.query.jsonp;
	Gun.obj.map(Gun.obj.ify(req.url.query['`']), function(val, i){
		req.headers[i] = val;
	});
	delete req.url.query['`'];
	if(req.url.query.$){
		req.body = req.url.query.$;
		if(!Gun.obj.has(req.url.query, '^') || 'json' == req.url.query['^']){
			req.body = Gun.obj.ify(req.body); // TODO: BUG! THIS IS WRONG! This doesn't handle multipart chunking, and will fail!
		}
	}
	delete req.url.query.$;
	delete req.url.query['^'];
	delete req.url.query['%'];
	var reply = {headers:{}};
	return function(res){
		if(!res){ return }
		if(res.headers){
			Gun.obj.map(res.headers, function(val, field){
				reply.headers[field] = val;
			});
		}
		reply.headers['Content-Type'] = "text/javascript";
		if(Gun.obj.has(res,'chunk') && (!reply.body || Gun.list.is(reply.chunks))){
			(reply.chunks = reply.chunks || []).push(res.chunk);
		}
		if(Gun.obj.has(res,'body')){
			reply.body = res.body; // self-reference yourself so on the client we can get the headers and body.
			reply.body = ';'+ cb.jsonp + '(' + Gun.text.ify(reply) + ');'; // javascriptify it! can't believe the client trusts us.
			cb(reply);
		}
	}
}

},{"../gun":11}],16:[function(require,module,exports){
;(function(){
	console.log("Hello wonderful person! :) I'm mark@gunDB.io, message me for help or with hatemail. I want to hear from you! <3");
	var Gun = require('../gun');
	console.log("TODO: MARK! UPDATE S3 DRIVER BEFORE PUBLISHING!")
	//require('./s3');
	require('./wsp');
	require('./file');
	module.exports = Gun;
}());

},{"../gun":11,"./file":13,"./wsp":18}],17:[function(require,module,exports){
var Gun = require('../gun')
,	url = require('url');
module.exports = function(wss, server, opt){
	wss.on('connection', function(ws){
		var req = {};
		ws.upgradeReq = ws.upgradeReq || {};
		req.url = url.parse(ws.upgradeReq.url||'');
		req.method = (ws.upgradeReq.method||'').toLowerCase();
		req.headers = ws.upgradeReq.headers || {};
		//Gun.log("wsReq", req);
		ws.on('message', function(msg){
			msg = Gun.obj.ify(msg);
			msg.url = msg.url || {};
			msg.url.pathname = (req.url.pathname||'') + (msg.url.pathname||'');
			Gun.obj.map(req.url, function(val, i){
				msg.url[i] = msg.url[i] || val; // reattach url
			});
			msg.method = msg.method || msg.body? 'put' : 'get';
			msg.headers = msg.headers || {};
			Gun.obj.map(opt.headers || req.headers, function(val, i){
				msg.headers[i] = msg.headers[i]; // reattach headers
			});
			server.call(ws, msg, function(reply){
				if(!ws || !ws.send || !ws._socket || !ws._socket.writable){ return }
				reply = reply || {};
				if(msg && msg.headers && msg.headers['ws-rid']){
					(reply.headers = reply.headers || {})['ws-rid'] = msg.headers['ws-rid'];
				}
				try{ws.send(Gun.text.ify(reply));
				}catch(e){} // juuuust in case. 
			});
		});
		ws.off = function(m){
			//Gun.log("ws.off", m);
			ws.send = null;
		}
		ws.on('close', ws.off);
		ws.on('error', ws.off);
	});
}

},{"../gun":11,"url":undefined}],18:[function(require,module,exports){
(function (__dirname){
;(function(wsp){
	/*
		TODO: SERVER PUSH!
		TODO: SERVER GET!
		TODO: SERVER PUSH!
		TODO: SERVER GET!
		TODO: SERVER PUSH!
		TODO: SERVER GET!
		TODO: SERVER PUSH!
		TODO: SERVER GET!
		TODO: SERVER PUSH!
		TODO: SERVER GET!
		TODO: SERVER PUSH!
		TODO: SERVER GET!
	*/
	var Gun = require('../gun')
	, formidable = require('formidable')
	, ws = require('ws').Server
	, http = require('./http')
	, url = require('url');
	Gun.on('opt', function(at){
		var gun = at.gun, opt = at.opt;
		gun.__ = at.root._;
		gun.__.opt.ws = opt.ws = gun.__.opt.ws || opt.ws || {};
		function start(server, port, app){
			if(app && app.use){ app.use(gun.wsp.server) }
			server = gun.__.opt.ws.server = gun.__.opt.ws.server || opt.ws.server || server;
			require('./ws')(gun.wsp.ws = gun.wsp.ws || new ws(gun.__.opt.ws), function(req, res){
				var ws = this;
				req.headers['gun-sid'] = ws.sid = ws.sid? ws.sid : req.headers['gun-sid'];
				ws.sub = ws.sub || gun.wsp.on('network', function(msg, ev){
					if(!ws || !ws.send || !ws._socket || !ws._socket.writable){ return ev.off() }
					if(!msg || (msg.headers && msg.headers['gun-sid'] === ws.sid)){ return }
					if(msg && msg.headers){ delete msg.headers['ws-rid'] }
					// TODO: BUG? ^ What if other peers want to ack? Do they use the ws-rid or a gun declared id?
					try{ws.send(Gun.text.ify(msg));
					}catch(e){} // juuuust in case. 
				});
				gun.wsp.wire(req, res);
			}, {headers: {'ws-rid': 1, 'gun-sid': 1}});
			gun.__.opt.ws.port = gun.__.opt.ws.port || opt.ws.port || port || 80;
		}
		var wsp = gun.wsp = gun.wsp || function(server){
			if(!server){ return gun }
			if(Gun.fns.is(server.address)){
				if(server.address()){
					start(server, server.address().port);
					return gun;
				}
			}
			if(Gun.fns.is(server.get) && server.get('port')){
				start(server, server.get('port'));
				return gun;
			}
			var listen = server.listen;
			server.listen = function(port){
				var serve = listen.apply(server, arguments);
				start(serve, port, server);
				return serve;
			}
			return gun;
		}
		gun.wsp.on = gun.wsp.on || Gun.on;
		gun.wsp.regex = gun.wsp.regex || opt.route || opt.path || /^\/gun/i;
		gun.wsp.poll = gun.wsp.poll || opt.poll || 1;
		gun.wsp.pull = gun.wsp.pull || opt.pull || gun.wsp.poll * 1000;
		gun.wsp.server = gun.wsp.server || function(req, res, next){ // http
			next = next || function(){};
			if(!req || !res){ return next(), false }
			if(!req.upgrade){ return next(), false }
			if(!req.url){ return next(), false }
			if(!req.method){ return next(), false }
			var msg = {};
			msg.url = url.parse(req.url, true);
			if(!gun.wsp.regex.test(msg.url.pathname)){ return next(), false } // TODO: BUG! If the option isn't a regex then this will fail!
			if(msg.url.pathname.replace(gun.wsp.regex,'').slice(0,3).toLowerCase() === '.js'){
				res.writeHead(200, {'Content-Type': 'text/javascript'});
				res.end(gun.wsp.js = gun.wsp.js || require('fs').readFileSync(__dirname + '/../gun.js')); // gun server is caching the gun library for the client
				return true;
			}
			return http(req, res, function(req, res){
				if(!req){ return next() }
				var stream, cb = res = require('./jsonp')(req, res);
				if(req.headers && (stream = req.headers['gun-sid'])){
					stream = (gun.wsp.peers = gun.wsp.peers || {})[stream] = gun.wsp.peers[stream] || {sid: stream};
					stream.drain = stream.drain || function(res){
						if(!res || !stream || !stream.queue || !stream.queue.length){ return }
						res({headers: {'gun-sid': stream.sid}, body: stream.queue });
						stream.off = setTimeout(function(){ stream = null }, gun.wsp.pull);
						stream.reply = stream.queue = null;
						return true;
					}
					stream.sub = stream.sub || gun.wsp.on('network', function(req, ev){
						if(!stream){ return ev.off() } // self cleans up after itself!
						if(!req || (req.headers && req.headers['gun-sid'] === stream.sid)){ return }
						(stream.queue = stream.queue || []).push(req);
						stream.drain(stream.reply);
					});
					cb = function(r){ (r.headers||{}).poll = gun.wsp.poll; res(r) }
					clearTimeout(stream.off);
					if(req.headers.pull){
						if(stream.drain(cb)){ return }
						return stream.reply = cb;
					}
				}
				gun.wsp.wire(req, cb);
			}), true;
		}
		if((gun.__.opt.maxSockets = opt.maxSockets || gun.__.opt.maxSockets) !== false){
			require('https').globalAgent.maxSockets = require('http').globalAgent.maxSockets = gun.__.opt.maxSockets || Infinity;
		}
		gun.wsp.msg = gun.wsp.msg || function(id){
			if(!id){
				return gun.wsp.msg.debounce[id = Gun.text.random(9)] = Gun.time.is(), id;
			}
			clearTimeout(gun.wsp.msg.clear);
			gun.wsp.msg.clear = setTimeout(function(){
				var now = Gun.time.is();
				Gun.obj.map(gun.wsp.msg.debounce, function(t,id){
					if((now - t) < (1000 * 60 * 5)){ return }
					Gun.obj.del(gun.wsp.msg.debounce, id);
				});
			},500);
			if(id = gun.wsp.msg.debounce[id]){ 
				return gun.wsp.msg.debounce[id] = Gun.time.is(), id;
			}
			gun.wsp.msg.debounce[id] = Gun.time.is();
			return;
		};
		gun.wsp.msg.debounce = gun.wsp.msg.debounce || {};
		gun.wsp.wire = gun.wsp.wire || (function(){
			// all streams, technically PATCH but implemented as PUT or POST, are forwarded to other trusted peers
			// except for the ones that are listed in the message as having already been sending to.
			// all states, implemented with GET, are replied to the source that asked for it.
			function tran(req, res){
				if(!req || !res || !req.body || !req.headers){ return }
				if(req.url){ req.url = url.format(req.url) }
				var msg = req.body;
				// AUTH for non-replies.
				if(gun.wsp.msg(msg['#'])){ return }
				gun.wsp.on('network', Gun.obj.copy(req));
				if(msg['@']){ return } // no need to process.
				if(msg['$'] && msg['$']['#']){ return tran.get(req, res) }
				//if(Gun.is.lex(msg['$'])){ return tran.get(req, res) }
				else { return tran.put(req, res) }
				cb({body: {hello: 'world'}});
				// TODO: BUG! server put should push.
			}
			tran.get = function(req, cb){
				var body = req.body, lex = body['$'], reply = {headers: {'Content-Type': tran.json}}, opt;
				gun.on('out', {gun: gun, get: lex, req: 1, '#': Gun.on.ask(function(at, ev){
					ev.off();
					var graph = at.put;
					return cb({headers: reply.headers, body: {
						'#': gun.wsp.msg(),
						'@': body['#'],
						'$': graph,
						'!': at.err
					}});
					return;
					if(Gun.obj.empty(node)){
						return cb({headers: reply.headers, body: node});
					} // we're out of stuff!
					/*
					(function(chunks){ // FEATURE! Stream chunks if the nodes are large!
						var max = 10, count = 0, soul = Gun.is.node.soul(node);
						if(Object.keys(node).length > max){
							var n = Gun.is.node.soul.ify({}, soul);
							Gun.obj.map(node, function(val, field){
								if(!(++count % max)){
									cb({headers: reply.headers, chunk: n}); // send node chunks
									n = Gun.is.node.soul.ify({}, soul);
								}
								Gun.is.node.state.ify([n, node], field, val);
							});
							if(count % max){ // finish off the last chunk
								cb({headers: reply.headers, chunk: n});
							}
						} else {
							cb({headers: reply.headers, chunk: node}); // send full node
						}
					}([]));
					*/
					cb({headers: reply.headers, chunk: node }); // Use this if you don't want streaming chunks feature.
				})});
			}
			tran.put = function(req, cb){
				//console.log("tran.put", req);
				// NOTE: It is highly recommended you do your own PUT/POSTs through your own API that then saves to gun manually.
				// This will give you much more fine-grain control over security, transactions, and what not.
				var body = req.body, graph = body['$'], reply = {headers: {'Content-Type': tran.json}}, opt;
				gun.on('out', {gun: gun, put: graph, '#': Gun.on.ask(function(ack, ev){
				//Gun.on('put', {gun: gun, put: graph, '#': Gun.on.ask(function(ack, ev){
					ev.off();
					return cb({headers: reply.headers, body: {
						'#': gun.wsp.msg(),
						'@': body['#'],
						'$': ack,
						'!': ack.err
					}});
				})});
				return;
				if(Gun.is.graph(req.body)){
					if(req.err = Gun.union(gun, req.body, function(err, ctx){ // TODO: BUG? Probably should give me ctx.graph
						if(err){ return cb({headers: reply.headers, body: {err: err || "Union failed."}}) }
						var ctx = ctx || {}; ctx.graph = {};
						Gun.is.graph(req.body, function(node, soul){
							ctx.graph[soul] = gun.__.graph[soul];
						});
						(gun.__.opt.wire.put || function(g,cb){cb("No save.")})(ctx.graph, function(err, ok){
							if(err){ return cb({headers: reply.headers, body: {err: err || "Failed."}}) } // TODO: err should already be an error object?
							cb({headers: reply.headers, body: {ok: ok || "Persisted."}});
							//console.log("tran.put <------------------------", ok);
						});
					}).err){ cb({headers: reply.headers, body: {err: req.err || "Union failed."}}) }
				} else {
					cb({headers: reply.headers, body: {err: "Not a valid graph!"}});
				}
			}
			gun.wsp.on('network', function(req){
				// TODO: MARK! You should move the networking events to here, not in WSS only.
			});
			tran.json = 'application/json';
			return tran;
		}());
		if(opt.server){
			wsp(opt.server);
		}
	});
}({}));

}).call(this,"/javascript\\Voxelarium.js\\node_modules\\gun\\lib")

},{"../gun":11,"./http":14,"./jsonp":15,"./ws":17,"formidable":6,"fs":undefined,"http":undefined,"https":undefined,"url":undefined,"ws":21}],19:[function(require,module,exports){
/*!
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var fs = require('fs');

function Options(defaults) {
  var internalValues = {};
  var values = this.value = {};
  Object.keys(defaults).forEach(function(key) {
    internalValues[key] = defaults[key];
    Object.defineProperty(values, key, {
      get: function() { return internalValues[key]; },
      configurable: false,
      enumerable: true
    });
  });
  this.reset = function() {
    Object.keys(defaults).forEach(function(key) {
      internalValues[key] = defaults[key];
    });
    return this;
  };
  this.merge = function(options, required) {
    options = options || {};
    if (Object.prototype.toString.call(required) === '[object Array]') {
      var missing = [];
      for (var i = 0, l = required.length; i < l; ++i) {
        var key = required[i];
        if (!(key in options)) {
          missing.push(key);
        }
      }
      if (missing.length > 0) {
        if (missing.length > 1) {
          throw new Error('options ' +
            missing.slice(0, missing.length - 1).join(', ') + ' and ' +
            missing[missing.length - 1] + ' must be defined');
        }
        else throw new Error('option ' + missing[0] + ' must be defined');
      }
    }
    Object.keys(options).forEach(function(key) {
      if (key in internalValues) {
        internalValues[key] = options[key];
      }
    });
    return this;
  };
  this.copy = function(keys) {
    var obj = {};
    Object.keys(defaults).forEach(function(key) {
      if (keys.indexOf(key) !== -1) {
        obj[key] = values[key];
      }
    });
    return obj;
  };
  this.read = function(filename, cb) {
    if (typeof cb == 'function') {
      var self = this;
      fs.readFile(filename, function(error, data) {
        if (error) return cb(error);
        var conf = JSON.parse(data);
        self.merge(conf);
        cb();
      });
    }
    else {
      var conf = JSON.parse(fs.readFileSync(filename));
      this.merge(conf);
    }
    return this;
  };
  this.isDefined = function(key) {
    return typeof values[key] != 'undefined';
  };
  this.isDefinedAndNonNull = function(key) {
    return typeof values[key] != 'undefined' && values[key] !== null;
  };
  Object.freeze(values);
  Object.freeze(this);
}

module.exports = Options;

},{"fs":undefined}],20:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty;

/**
 * An auto incrementing id which we can use to create "unique" Ultron instances
 * so we can track the event emitters that are added through the Ultron
 * interface.
 *
 * @type {Number}
 * @private
 */
var id = 0;

/**
 * Ultron is high-intelligence robot. It gathers intelligence so it can start improving
 * upon his rudimentary design. It will learn from your EventEmitting patterns
 * and exterminate them.
 *
 * @constructor
 * @param {EventEmitter} ee EventEmitter instance we need to wrap.
 * @api public
 */
function Ultron(ee) {
  if (!(this instanceof Ultron)) return new Ultron(ee);

  this.id = id++;
  this.ee = ee;
}

/**
 * Register a new EventListener for the given event.
 *
 * @param {String} event Name of the event.
 * @param {Functon} fn Callback function.
 * @param {Mixed} context The context of the function.
 * @returns {Ultron}
 * @api public
 */
Ultron.prototype.on = function on(event, fn, context) {
  fn.__ultron = this.id;
  this.ee.on(event, fn, context);

  return this;
};
/**
 * Add an EventListener that's only called once.
 *
 * @param {String} event Name of the event.
 * @param {Function} fn Callback function.
 * @param {Mixed} context The context of the function.
 * @returns {Ultron}
 * @api public
 */
Ultron.prototype.once = function once(event, fn, context) {
  fn.__ultron = this.id;
  this.ee.once(event, fn, context);

  return this;
};

/**
 * Remove the listeners we assigned for the given event.
 *
 * @returns {Ultron}
 * @api public
 */
Ultron.prototype.remove = function remove() {
  var args = arguments
    , event;

  //
  // When no event names are provided we assume that we need to clear all the
  // events that were assigned through us.
  //
  if (args.length === 1 && 'string' === typeof args[0]) {
    args = args[0].split(/[, ]+/);
  } else if (!args.length) {
    args = [];

    for (event in this.ee._events) {
      if (has.call(this.ee._events, event)) args.push(event);
    }
  }

  for (var i = 0; i < args.length; i++) {
    var listeners = this.ee.listeners(args[i]);

    for (var j = 0; j < listeners.length; j++) {
      event = listeners[j];

      //
      // Once listeners have a `listener` property that stores the real listener
      // in the EventEmitter that ships with Node.js.
      //
      if (event.listener) {
        if (event.listener.__ultron !== this.id) continue;
        delete event.listener.__ultron;
      } else {
        if (event.__ultron !== this.id) continue;
        delete event.__ultron;
      }

      this.ee.removeListener(args[i], event);
    }
  }

  return this;
};

/**
 * Destroy the Ultron instance, remove all listeners and release all references.
 *
 * @returns {Boolean}
 * @api public
 */
Ultron.prototype.destroy = function destroy() {
  if (!this.ee) return false;

  this.remove();
  this.ee = null;

  return true;
};

//
// Expose the module.
//
module.exports = Ultron;

},{}],21:[function(require,module,exports){
'use strict';

/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var WS = module.exports = require('./lib/WebSocket');

WS.Server = require('./lib/WebSocketServer');
WS.Sender = require('./lib/Sender');
WS.Receiver = require('./lib/Receiver');

/**
 * Create a new WebSocket server.
 *
 * @param {Object} options Server options
 * @param {Function} fn Optional connection listener.
 * @returns {WS.Server}
 * @api public
 */
WS.createServer = function createServer(options, fn) {
  var server = new WS.Server(options);

  if (typeof fn === 'function') {
    server.on('connection', fn);
  }

  return server;
};

/**
 * Create a new WebSocket connection.
 *
 * @param {String} address The URL/address we need to connect to.
 * @param {Function} fn Open listener.
 * @returns {WS}
 * @api public
 */
WS.connect = WS.createConnection = function connect(address, fn) {
  var client = new WS(address);

  if (typeof fn === 'function') {
    client.on('open', fn);
  }

  return client;
};

},{"./lib/Receiver":29,"./lib/Sender":31,"./lib/WebSocket":34,"./lib/WebSocketServer":35}],22:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var util = require('util');

function BufferPool(initialSize, growStrategy, shrinkStrategy) {
  if (this instanceof BufferPool === false) {
    throw new TypeError("Classes can't be function-called");
  }

  if (typeof initialSize === 'function') {
    shrinkStrategy = growStrategy;
    growStrategy = initialSize;
    initialSize = 0;
  }
  else if (typeof initialSize === 'undefined') {
    initialSize = 0;
  }
  this._growStrategy = (growStrategy || function(db, size) {
    return db.used + size;
  }).bind(null, this);
  this._shrinkStrategy = (shrinkStrategy || function(db) {
    return initialSize;
  }).bind(null, this);
  this._buffer = initialSize ? new Buffer(initialSize) : null;
  this._offset = 0;
  this._used = 0;
  this._changeFactor = 0;
  this.__defineGetter__('size', function(){
    return this._buffer == null ? 0 : this._buffer.length;
  });
  this.__defineGetter__('used', function(){
    return this._used;
  });
}

BufferPool.prototype.get = function(length) {
  if (this._buffer == null || this._offset + length > this._buffer.length) {
    var newBuf = new Buffer(this._growStrategy(length));
    this._buffer = newBuf;
    this._offset = 0;
  }
  this._used += length;
  var buf = this._buffer.slice(this._offset, this._offset + length);
  this._offset += length;
  return buf;
}

BufferPool.prototype.reset = function(forceNewBuffer) {
  var len = this._shrinkStrategy();
  if (len < this.size) this._changeFactor -= 1;
  if (forceNewBuffer || this._changeFactor < -2) {
    this._changeFactor = 0;
    this._buffer = len ? new Buffer(len) : null;
  }
  this._offset = 0;
  this._used = 0;
}

module.exports = BufferPool;

},{"util":undefined}],23:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

module.exports.BufferUtil = {
  merge: function(mergedBuffer, buffers) {
    var offset = 0;
    for (var i = 0, l = buffers.length; i < l; ++i) {
      var buf = buffers[i];
      buf.copy(mergedBuffer, offset);
      offset += buf.length;
    }
  },
  mask: function(source, mask, output, offset, length) {
    var maskNum = mask.readUInt32LE(0, true);
    var i = 0;
    for (; i < length - 3; i += 4) {
      var num = maskNum ^ source.readUInt32LE(i, true);
      if (num < 0) num = 4294967296 + num;
      output.writeUInt32LE(num, offset + i, true);
    }
    switch (length % 4) {
      case 3: output[offset + i + 2] = source[i + 2] ^ mask[2];
      case 2: output[offset + i + 1] = source[i + 1] ^ mask[1];
      case 1: output[offset + i] = source[i] ^ mask[0];
      case 0:;
    }
  },
  unmask: function(data, mask) {
    var maskNum = mask.readUInt32LE(0, true);
    var length = data.length;
    var i = 0;
    for (; i < length - 3; i += 4) {
      var num = maskNum ^ data.readUInt32LE(i, true);
      if (num < 0) num = 4294967296 + num;
      data.writeUInt32LE(num, i, true);
    }
    switch (length % 4) {
      case 3: data[i + 2] = data[i + 2] ^ mask[2];
      case 2: data[i + 1] = data[i + 1] ^ mask[1];
      case 1: data[i] = data[i] ^ mask[0];
      case 0:;
    }
  }
}

},{}],24:[function(require,module,exports){
'use strict';

/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

try {
  module.exports = require('bufferutil');
} catch (e) {
  module.exports = require('./BufferUtil.fallback');
}

},{"./BufferUtil.fallback":23,"bufferutil":undefined}],25:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

module.exports = {
  isValidErrorCode: function(code) {
    return (code >= 1000 && code <= 1011 && code != 1004 && code != 1005 && code != 1006) ||
         (code >= 3000 && code <= 4999);
  },
  1000: 'normal',
  1001: 'going away',
  1002: 'protocol error',
  1003: 'unsupported data',
  1004: 'reserved',
  1005: 'reserved for extensions',
  1006: 'reserved for extensions',
  1007: 'inconsistent or invalid data',
  1008: 'policy violation',
  1009: 'message too big',
  1010: 'extension handshake missing',
  1011: 'an unexpected condition prevented the request from being fulfilled',
};
},{}],26:[function(require,module,exports){

var util = require('util');

/**
 * Module exports.
 */

exports.parse = parse;
exports.format = format;

/**
 * Parse extensions header value
 */

function parse(value) {
  value = value || '';

  var extensions = {};

  value.split(',').forEach(function(v) {
    var params = v.split(';');
    var token = params.shift().trim();
    var paramsList = extensions[token] = extensions[token] || [];
    var parsedParams = {};

    params.forEach(function(param) {
      var parts = param.trim().split('=');
      var key = parts[0];
      var value = parts[1];
      if (typeof value === 'undefined') {
        value = true;
      } else {
        // unquote value
        if (value[0] === '"') {
          value = value.slice(1);
        }
        if (value[value.length - 1] === '"') {
          value = value.slice(0, value.length - 1);
        }
      }
      (parsedParams[key] = parsedParams[key] || []).push(value);
    });

    paramsList.push(parsedParams);
  });

  return extensions;
}

/**
 * Format extensions header value
 */

function format(value) {
  return Object.keys(value).map(function(token) {
    var paramsList = value[token];
    if (!util.isArray(paramsList)) {
      paramsList = [paramsList];
    }
    return paramsList.map(function(params) {
      return [token].concat(Object.keys(params).map(function(k) {
        var p = params[k];
        if (!util.isArray(p)) p = [p];
        return p.map(function(v) {
          return v === true ? k : k + '=' + v;
        }).join('; ');
      })).join('; ');
    }).join(', ');
  }).join(', ');
}

},{"util":undefined}],27:[function(require,module,exports){

var zlib = require('zlib');

var AVAILABLE_WINDOW_BITS = [8, 9, 10, 11, 12, 13, 14, 15];
var DEFAULT_WINDOW_BITS = 15;
var DEFAULT_MEM_LEVEL = 8;

PerMessageDeflate.extensionName = 'permessage-deflate';

/**
 * Per-message Compression Extensions implementation
 */

function PerMessageDeflate(options, isServer) {
  if (this instanceof PerMessageDeflate === false) {
    throw new TypeError("Classes can't be function-called");
  }

  this._options = options || {};
  this._isServer = !!isServer;
  this._inflate = null;
  this._deflate = null;
  this.params = null;
}

/**
 * Create extension parameters offer
 *
 * @api public
 */

PerMessageDeflate.prototype.offer = function() {
  var params = {};
  if (this._options.serverNoContextTakeover) {
    params.server_no_context_takeover = true;
  }
  if (this._options.clientNoContextTakeover) {
    params.client_no_context_takeover = true;
  }
  if (this._options.serverMaxWindowBits) {
    params.server_max_window_bits = this._options.serverMaxWindowBits;
  }
  if (this._options.clientMaxWindowBits) {
    params.client_max_window_bits = this._options.clientMaxWindowBits;
  } else if (this._options.clientMaxWindowBits == null) {
    params.client_max_window_bits = true;
  }
  return params;
};

/**
 * Accept extension offer
 *
 * @api public
 */

PerMessageDeflate.prototype.accept = function(paramsList) {
  paramsList = this.normalizeParams(paramsList);

  var params;
  if (this._isServer) {
    params = this.acceptAsServer(paramsList);
  } else {
    params = this.acceptAsClient(paramsList);
  }

  this.params = params;
  return params;
};

/**
 * Releases all resources used by the extension
 *
 * @api public
 */

PerMessageDeflate.prototype.cleanup = function() {
  if (this._inflate) {
    if (this._inflate.writeInProgress) {
      this._inflate.pendingClose = true;
    } else {
      if (this._inflate.close) this._inflate.close();
      this._inflate = null;
    }
  }
  if (this._deflate) {
    if (this._deflate.writeInProgress) {
      this._deflate.pendingClose = true;
    } else {
      if (this._deflate.close) this._deflate.close();
      this._deflate = null;
    }
  }
};

/**
 * Accept extension offer from client
 *
 * @api private
 */

PerMessageDeflate.prototype.acceptAsServer = function(paramsList) {
  var accepted = {};
  var result = paramsList.some(function(params) {
    accepted = {};
    if (this._options.serverNoContextTakeover === false && params.server_no_context_takeover) {
      return;
    }
    if (this._options.serverMaxWindowBits === false && params.server_max_window_bits) {
      return;
    }
    if (typeof this._options.serverMaxWindowBits === 'number' &&
        typeof params.server_max_window_bits === 'number' &&
        this._options.serverMaxWindowBits > params.server_max_window_bits) {
      return;
    }
    if (typeof this._options.clientMaxWindowBits === 'number' && !params.client_max_window_bits) {
      return;
    }

    if (this._options.serverNoContextTakeover || params.server_no_context_takeover) {
      accepted.server_no_context_takeover = true;
    }
    if (this._options.clientNoContextTakeover) {
      accepted.client_no_context_takeover = true;
    }
    if (this._options.clientNoContextTakeover !== false && params.client_no_context_takeover) {
      accepted.client_no_context_takeover = true;
    }
    if (typeof this._options.serverMaxWindowBits === 'number') {
      accepted.server_max_window_bits = this._options.serverMaxWindowBits;
    } else if (typeof params.server_max_window_bits === 'number') {
      accepted.server_max_window_bits = params.server_max_window_bits;
    }
    if (typeof this._options.clientMaxWindowBits === 'number') {
      accepted.client_max_window_bits = this._options.clientMaxWindowBits;
    } else if (this._options.clientMaxWindowBits !== false && typeof params.client_max_window_bits === 'number') {
      accepted.client_max_window_bits = params.client_max_window_bits;
    }
    return true;
  }, this);

  if (!result) {
    throw new Error('Doesn\'t support the offered configuration');
  }

  return accepted;
};

/**
 * Accept extension response from server
 *
 * @api privaye
 */

PerMessageDeflate.prototype.acceptAsClient = function(paramsList) {
  var params = paramsList[0];
  if (this._options.clientNoContextTakeover != null) {
    if (this._options.clientNoContextTakeover === false && params.client_no_context_takeover) {
      throw new Error('Invalid value for "client_no_context_takeover"');
    }
  }
  if (this._options.clientMaxWindowBits != null) {
    if (this._options.clientMaxWindowBits === false && params.client_max_window_bits) {
      throw new Error('Invalid value for "client_max_window_bits"');
    }
    if (typeof this._options.clientMaxWindowBits === 'number' &&
        (!params.client_max_window_bits || params.client_max_window_bits > this._options.clientMaxWindowBits)) {
      throw new Error('Invalid value for "client_max_window_bits"');
    }
  }
  return params;
};

/**
 * Normalize extensions parameters
 *
 * @api private
 */

PerMessageDeflate.prototype.normalizeParams = function(paramsList) {
  return paramsList.map(function(params) {
    Object.keys(params).forEach(function(key) {
      var value = params[key];
      if (value.length > 1) {
        throw new Error('Multiple extension parameters for ' + key);
      }

      value = value[0];

      switch (key) {
      case 'server_no_context_takeover':
      case 'client_no_context_takeover':
        if (value !== true) {
          throw new Error('invalid extension parameter value for ' + key + ' (' + value + ')');
        }
        params[key] = true;
        break;
      case 'server_max_window_bits':
      case 'client_max_window_bits':
        if (typeof value === 'string') {
          value = parseInt(value, 10);
          if (!~AVAILABLE_WINDOW_BITS.indexOf(value)) {
            throw new Error('invalid extension parameter value for ' + key + ' (' + value + ')');
          }
        }
        if (!this._isServer && value === true) {
          throw new Error('Missing extension parameter value for ' + key);
        }
        params[key] = value;
        break;
      default:
        throw new Error('Not defined extension parameter (' + key + ')');
      }
    }, this);
    return params;
  }, this);
};

/**
 * Decompress message
 *
 * @api public
 */

PerMessageDeflate.prototype.decompress = function (data, fin, callback) {
  var endpoint = this._isServer ? 'client' : 'server';

  if (!this._inflate) {
    var maxWindowBits = this.params[endpoint + '_max_window_bits'];
    this._inflate = zlib.createInflateRaw({
      windowBits: 'number' === typeof maxWindowBits ? maxWindowBits : DEFAULT_WINDOW_BITS
    });
  }
  this._inflate.writeInProgress = true;

  var self = this;
  var buffers = [];

  this._inflate.on('error', onError).on('data', onData);
  this._inflate.write(data);
  if (fin) {
    this._inflate.write(new Buffer([0x00, 0x00, 0xff, 0xff]));
  }
  this._inflate.flush(function() {
    cleanup();
    callback(null, Buffer.concat(buffers));
  });

  function onError(err) {
    cleanup();
    callback(err);
  }

  function onData(data) {
    buffers.push(data);
  }

  function cleanup() {
    if (!self._inflate) return;
    self._inflate.removeListener('error', onError);
    self._inflate.removeListener('data', onData);
    self._inflate.writeInProgress = false;
    if ((fin && self.params[endpoint + '_no_context_takeover']) || self._inflate.pendingClose) {
      if (self._inflate.close) self._inflate.close();
      self._inflate = null;
    }
  }
};

/**
 * Compress message
 *
 * @api public
 */

PerMessageDeflate.prototype.compress = function (data, fin, callback) {
  var endpoint = this._isServer ? 'server' : 'client';

  if (!this._deflate) {
    var maxWindowBits = this.params[endpoint + '_max_window_bits'];
    this._deflate = zlib.createDeflateRaw({
      flush: zlib.Z_SYNC_FLUSH,
      windowBits: 'number' === typeof maxWindowBits ? maxWindowBits : DEFAULT_WINDOW_BITS,
      memLevel: this._options.memLevel || DEFAULT_MEM_LEVEL
    });
  }
  this._deflate.writeInProgress = true;

  var self = this;
  var buffers = [];

  this._deflate.on('error', onError).on('data', onData);
  this._deflate.write(data);
  this._deflate.flush(function() {
    cleanup();
    var data = Buffer.concat(buffers);
    if (fin) {
      data = data.slice(0, data.length - 4);
    }
    callback(null, data);
  });

  function onError(err) {
    cleanup();
    callback(err);
  }

  function onData(data) {
    buffers.push(data);
  }

  function cleanup() {
    if (!self._deflate) return;
    self._deflate.removeListener('error', onError);
    self._deflate.removeListener('data', onData);
    self._deflate.writeInProgress = false;
    if ((fin && self.params[endpoint + '_no_context_takeover']) || self._deflate.pendingClose) {
      if (self._deflate.close) self._deflate.close();
      self._deflate = null;
    }
  }
};

module.exports = PerMessageDeflate;

},{"zlib":undefined}],28:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var util = require('util');

/**
 * State constants
 */

var EMPTY = 0
  , BODY = 1;
var BINARYLENGTH = 2
  , BINARYBODY = 3;

/**
 * Hixie Receiver implementation
 */

function Receiver () {
  if (this instanceof Receiver === false) {
    throw new TypeError("Classes can't be function-called");
  }

  this.state = EMPTY;
  this.buffers = [];
  this.messageEnd = -1;
  this.spanLength = 0;
  this.dead = false;

  this.onerror = function() {};
  this.ontext = function() {};
  this.onbinary = function() {};
  this.onclose = function() {};
  this.onping = function() {};
  this.onpong = function() {};
}

module.exports = Receiver;

/**
 * Add new data to the parser.
 *
 * @api public
 */

Receiver.prototype.add = function(data) {
  var self = this;
  function doAdd() {
    if (self.state === EMPTY) {
      if (data.length == 2 && data[0] == 0xFF && data[1] == 0x00) {
        self.reset();
        self.onclose();
        return;
      }
      if (data[0] === 0x80) {
        self.messageEnd = 0;
        self.state = BINARYLENGTH;
        data = data.slice(1);
      } else {

      if (data[0] !== 0x00) {
        self.error('payload must start with 0x00 byte', true);
        return;
      }
      data = data.slice(1);
      self.state = BODY;

      }
    }
    if (self.state === BINARYLENGTH) {
      var i = 0;
      while ((i < data.length) && (data[i] & 0x80)) {
        self.messageEnd = 128 * self.messageEnd + (data[i] & 0x7f);
        ++i;
      }
      if (i < data.length) {
        self.messageEnd = 128 * self.messageEnd + (data[i] & 0x7f);
        self.state = BINARYBODY;
        ++i;
      }
      if (i > 0)
        data = data.slice(i);
    }
    if (self.state === BINARYBODY) {
      var dataleft = self.messageEnd - self.spanLength;
      if (data.length >= dataleft) {
        // consume the whole buffer to finish the frame
        self.buffers.push(data);
        self.spanLength += dataleft;
        self.messageEnd = dataleft;
        return self.parse();
      }
      // frame's not done even if we consume it all
      self.buffers.push(data);
      self.spanLength += data.length;
      return;
    }
    self.buffers.push(data);
    if ((self.messageEnd = bufferIndex(data, 0xFF)) != -1) {
      self.spanLength += self.messageEnd;
      return self.parse();
    }
    else self.spanLength += data.length;
  }
  while(data) data = doAdd();
};

/**
 * Releases all resources used by the receiver.
 *
 * @api public
 */

Receiver.prototype.cleanup = function() {
  this.dead = true;
  this.state = EMPTY;
  this.buffers = [];
};

/**
 * Process buffered data.
 *
 * @api public
 */

Receiver.prototype.parse = function() {
  var output = new Buffer(this.spanLength);
  var outputIndex = 0;
  for (var bi = 0, bl = this.buffers.length; bi < bl - 1; ++bi) {
    var buffer = this.buffers[bi];
    buffer.copy(output, outputIndex);
    outputIndex += buffer.length;
  }
  var lastBuffer = this.buffers[this.buffers.length - 1];
  if (this.messageEnd > 0) lastBuffer.copy(output, outputIndex, 0, this.messageEnd);
  if (this.state !== BODY) --this.messageEnd;
  var tail = null;
  if (this.messageEnd < lastBuffer.length - 1) {
    tail = lastBuffer.slice(this.messageEnd + 1);
  }
  this.reset();
  this.ontext(output.toString('utf8'));
  return tail;
};

/**
 * Handles an error
 *
 * @api private
 */

Receiver.prototype.error = function (reason, terminate) {
  this.reset();
  this.onerror(reason, terminate);
  return this;
};

/**
 * Reset parser state
 *
 * @api private
 */

Receiver.prototype.reset = function (reason) {
  if (this.dead) return;
  this.state = EMPTY;
  this.buffers = [];
  this.messageEnd = -1;
  this.spanLength = 0;
};

/**
 * Internal api
 */

function bufferIndex(buffer, byte) {
  for (var i = 0, l = buffer.length; i < l; ++i) {
    if (buffer[i] === byte) return i;
  }
  return -1;
}

},{"util":undefined}],29:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var util = require('util')
  , Validation = require('./Validation').Validation
  , ErrorCodes = require('./ErrorCodes')
  , BufferPool = require('./BufferPool')
  , bufferUtil = require('./BufferUtil').BufferUtil
  , PerMessageDeflate = require('./PerMessageDeflate');

/**
 * HyBi Receiver implementation
 */

function Receiver (extensions) {
  if (this instanceof Receiver === false) {
    throw new TypeError("Classes can't be function-called");
  }

  // memory pool for fragmented messages
  var fragmentedPoolPrevUsed = -1;
  this.fragmentedBufferPool = new BufferPool(1024, function(db, length) {
    return db.used + length;
  }, function(db) {
    return fragmentedPoolPrevUsed = fragmentedPoolPrevUsed >= 0 ?
      Math.ceil((fragmentedPoolPrevUsed + db.used) / 2) :
      db.used;
  });

  // memory pool for unfragmented messages
  var unfragmentedPoolPrevUsed = -1;
  this.unfragmentedBufferPool = new BufferPool(1024, function(db, length) {
    return db.used + length;
  }, function(db) {
    return unfragmentedPoolPrevUsed = unfragmentedPoolPrevUsed >= 0 ?
      Math.ceil((unfragmentedPoolPrevUsed + db.used) / 2) :
      db.used;
  });

  this.extensions = extensions || {};
  this.state = {
    activeFragmentedOperation: null,
    lastFragment: false,
    masked: false,
    opcode: 0,
    fragmentedOperation: false
  };
  this.overflow = [];
  this.headerBuffer = new Buffer(10);
  this.expectOffset = 0;
  this.expectBuffer = null;
  this.expectHandler = null;
  this.currentMessage = [];
  this.messageHandlers = [];
  this.expectHeader(2, this.processPacket);
  this.dead = false;
  this.processing = false;

  this.onerror = function() {};
  this.ontext = function() {};
  this.onbinary = function() {};
  this.onclose = function() {};
  this.onping = function() {};
  this.onpong = function() {};
}

module.exports = Receiver;

/**
 * Add new data to the parser.
 *
 * @api public
 */

Receiver.prototype.add = function(data) {
  var dataLength = data.length;
  if (dataLength == 0) return;
  if (this.expectBuffer == null) {
    this.overflow.push(data);
    return;
  }
  var toRead = Math.min(dataLength, this.expectBuffer.length - this.expectOffset);
  fastCopy(toRead, data, this.expectBuffer, this.expectOffset);
  this.expectOffset += toRead;
  if (toRead < dataLength) {
    this.overflow.push(data.slice(toRead));
  }
  while (this.expectBuffer && this.expectOffset == this.expectBuffer.length) {
    var bufferForHandler = this.expectBuffer;
    this.expectBuffer = null;
    this.expectOffset = 0;
    this.expectHandler.call(this, bufferForHandler);
  }
};

/**
 * Releases all resources used by the receiver.
 *
 * @api public
 */

Receiver.prototype.cleanup = function() {
  this.dead = true;
  this.overflow = null;
  this.headerBuffer = null;
  this.expectBuffer = null;
  this.expectHandler = null;
  this.unfragmentedBufferPool = null;
  this.fragmentedBufferPool = null;
  this.state = null;
  this.currentMessage = null;
  this.onerror = null;
  this.ontext = null;
  this.onbinary = null;
  this.onclose = null;
  this.onping = null;
  this.onpong = null;
};

/**
 * Waits for a certain amount of header bytes to be available, then fires a callback.
 *
 * @api private
 */

Receiver.prototype.expectHeader = function(length, handler) {
  if (length == 0) {
    handler(null);
    return;
  }
  this.expectBuffer = this.headerBuffer.slice(this.expectOffset, this.expectOffset + length);
  this.expectHandler = handler;
  var toRead = length;
  while (toRead > 0 && this.overflow.length > 0) {
    var fromOverflow = this.overflow.pop();
    if (toRead < fromOverflow.length) this.overflow.push(fromOverflow.slice(toRead));
    var read = Math.min(fromOverflow.length, toRead);
    fastCopy(read, fromOverflow, this.expectBuffer, this.expectOffset);
    this.expectOffset += read;
    toRead -= read;
  }
};

/**
 * Waits for a certain amount of data bytes to be available, then fires a callback.
 *
 * @api private
 */

Receiver.prototype.expectData = function(length, handler) {
  if (length == 0) {
    handler(null);
    return;
  }
  this.expectBuffer = this.allocateFromPool(length, this.state.fragmentedOperation);
  this.expectHandler = handler;
  var toRead = length;
  while (toRead > 0 && this.overflow.length > 0) {
    var fromOverflow = this.overflow.pop();
    if (toRead < fromOverflow.length) this.overflow.push(fromOverflow.slice(toRead));
    var read = Math.min(fromOverflow.length, toRead);
    fastCopy(read, fromOverflow, this.expectBuffer, this.expectOffset);
    this.expectOffset += read;
    toRead -= read;
  }
};

/**
 * Allocates memory from the buffer pool.
 *
 * @api private
 */

Receiver.prototype.allocateFromPool = function(length, isFragmented) {
  return (isFragmented ? this.fragmentedBufferPool : this.unfragmentedBufferPool).get(length);
};

/**
 * Start processing a new packet.
 *
 * @api private
 */

Receiver.prototype.processPacket = function (data) {
  if (this.extensions[PerMessageDeflate.extensionName]) {
    if ((data[0] & 0x30) != 0) {
      this.error('reserved fields (2, 3) must be empty', 1002);
      return;
    }
  } else {
    if ((data[0] & 0x70) != 0) {
      this.error('reserved fields must be empty', 1002);
      return;
    }
  }
  this.state.lastFragment = (data[0] & 0x80) == 0x80;
  this.state.masked = (data[1] & 0x80) == 0x80;
  var compressed = (data[0] & 0x40) == 0x40;
  var opcode = data[0] & 0xf;
  if (opcode === 0) {
    if (compressed) {
      this.error('continuation frame cannot have the Per-message Compressed bits', 1002);
      return;
    }
    // continuation frame
    this.state.fragmentedOperation = true;
    this.state.opcode = this.state.activeFragmentedOperation;
    if (!(this.state.opcode == 1 || this.state.opcode == 2)) {
      this.error('continuation frame cannot follow current opcode', 1002);
      return;
    }
  }
  else {
    if (opcode < 3 && this.state.activeFragmentedOperation != null) {
      this.error('data frames after the initial data frame must have opcode 0', 1002);
      return;
    }
    if (opcode >= 8 && compressed) {
      this.error('control frames cannot have the Per-message Compressed bits', 1002);
      return;
    }
    this.state.compressed = compressed;
    this.state.opcode = opcode;
    if (this.state.lastFragment === false) {
      this.state.fragmentedOperation = true;
      this.state.activeFragmentedOperation = opcode;
    }
    else this.state.fragmentedOperation = false;
  }
  var handler = opcodes[this.state.opcode];
  if (typeof handler == 'undefined') this.error('no handler for opcode ' + this.state.opcode, 1002);
  else {
    handler.start.call(this, data);
  }
};

/**
 * Endprocessing a packet.
 *
 * @api private
 */

Receiver.prototype.endPacket = function() {
  if (!this.state.fragmentedOperation) this.unfragmentedBufferPool.reset(true);
  else if (this.state.lastFragment) this.fragmentedBufferPool.reset(true);
  this.expectOffset = 0;
  this.expectBuffer = null;
  this.expectHandler = null;
  if (this.state.lastFragment && this.state.opcode === this.state.activeFragmentedOperation) {
    // end current fragmented operation
    this.state.activeFragmentedOperation = null;
  }
  this.state.lastFragment = false;
  this.state.opcode = this.state.activeFragmentedOperation != null ? this.state.activeFragmentedOperation : 0;
  this.state.masked = false;
  this.expectHeader(2, this.processPacket);
};

/**
 * Reset the parser state.
 *
 * @api private
 */

Receiver.prototype.reset = function() {
  if (this.dead) return;
  this.state = {
    activeFragmentedOperation: null,
    lastFragment: false,
    masked: false,
    opcode: 0,
    fragmentedOperation: false
  };
  this.fragmentedBufferPool.reset(true);
  this.unfragmentedBufferPool.reset(true);
  this.expectOffset = 0;
  this.expectBuffer = null;
  this.expectHandler = null;
  this.overflow = [];
  this.currentMessage = [];
  this.messageHandlers = [];
};

/**
 * Unmask received data.
 *
 * @api private
 */

Receiver.prototype.unmask = function (mask, buf, binary) {
  if (mask != null && buf != null) bufferUtil.unmask(buf, mask);
  if (binary) return buf;
  return buf != null ? buf.toString('utf8') : '';
};

/**
 * Concatenates a list of buffers.
 *
 * @api private
 */

Receiver.prototype.concatBuffers = function(buffers) {
  var length = 0;
  for (var i = 0, l = buffers.length; i < l; ++i) length += buffers[i].length;
  var mergedBuffer = new Buffer(length);
  bufferUtil.merge(mergedBuffer, buffers);
  return mergedBuffer;
};

/**
 * Handles an error
 *
 * @api private
 */

Receiver.prototype.error = function (reason, protocolErrorCode) {
  this.reset();
  this.onerror(reason, protocolErrorCode);
  return this;
};

/**
 * Execute message handler buffers
 *
 * @api private
 */

Receiver.prototype.flush = function() {
  if (this.processing || this.dead) return;

  var handler = this.messageHandlers.shift();
  if (!handler) return;

  this.processing = true;
  var self = this;

  handler(function() {
    self.processing = false;
    self.flush();
  });
};

/**
 * Apply extensions to message
 *
 * @api private
 */

Receiver.prototype.applyExtensions = function(messageBuffer, fin, compressed, callback) {
  var self = this;
  if (compressed) {
    this.extensions[PerMessageDeflate.extensionName].decompress(messageBuffer, fin, function(err, buffer) {
      if (self.dead) return;
      if (err) {
        callback(new Error('invalid compressed data'));
        return;
      }
      callback(null, buffer);
    });
  } else {
    callback(null, messageBuffer);
  }
};

/**
 * Buffer utilities
 */

function readUInt16BE(start) {
  return (this[start]<<8) +
         this[start+1];
}

function readUInt32BE(start) {
  return (this[start]<<24) +
         (this[start+1]<<16) +
         (this[start+2]<<8) +
         this[start+3];
}

function fastCopy(length, srcBuffer, dstBuffer, dstOffset) {
  switch (length) {
    default: srcBuffer.copy(dstBuffer, dstOffset, 0, length); break;
    case 16: dstBuffer[dstOffset+15] = srcBuffer[15];
    case 15: dstBuffer[dstOffset+14] = srcBuffer[14];
    case 14: dstBuffer[dstOffset+13] = srcBuffer[13];
    case 13: dstBuffer[dstOffset+12] = srcBuffer[12];
    case 12: dstBuffer[dstOffset+11] = srcBuffer[11];
    case 11: dstBuffer[dstOffset+10] = srcBuffer[10];
    case 10: dstBuffer[dstOffset+9] = srcBuffer[9];
    case 9: dstBuffer[dstOffset+8] = srcBuffer[8];
    case 8: dstBuffer[dstOffset+7] = srcBuffer[7];
    case 7: dstBuffer[dstOffset+6] = srcBuffer[6];
    case 6: dstBuffer[dstOffset+5] = srcBuffer[5];
    case 5: dstBuffer[dstOffset+4] = srcBuffer[4];
    case 4: dstBuffer[dstOffset+3] = srcBuffer[3];
    case 3: dstBuffer[dstOffset+2] = srcBuffer[2];
    case 2: dstBuffer[dstOffset+1] = srcBuffer[1];
    case 1: dstBuffer[dstOffset] = srcBuffer[0];
  }
}

function clone(obj) {
  var cloned = {};
  for (var k in obj) {
    if (obj.hasOwnProperty(k)) {
      cloned[k] = obj[k];
    }
  }
  return cloned;
}

/**
 * Opcode handlers
 */

var opcodes = {
  // text
  '1': {
    start: function(data) {
      var self = this;
      // decode length
      var firstLength = data[1] & 0x7f;
      if (firstLength < 126) {
        opcodes['1'].getData.call(self, firstLength);
      }
      else if (firstLength == 126) {
        self.expectHeader(2, function(data) {
          opcodes['1'].getData.call(self, readUInt16BE.call(data, 0));
        });
      }
      else if (firstLength == 127) {
        self.expectHeader(8, function(data) {
          if (readUInt32BE.call(data, 0) != 0) {
            self.error('packets with length spanning more than 32 bit is currently not supported', 1008);
            return;
          }
          opcodes['1'].getData.call(self, readUInt32BE.call(data, 4));
        });
      }
    },
    getData: function(length) {
      var self = this;
      if (self.state.masked) {
        self.expectHeader(4, function(data) {
          var mask = data;
          self.expectData(length, function(data) {
            opcodes['1'].finish.call(self, mask, data);
          });
        });
      }
      else {
        self.expectData(length, function(data) {
          opcodes['1'].finish.call(self, null, data);
        });
      }
    },
    finish: function(mask, data) {
      var self = this;
      var packet = this.unmask(mask, data, true) || new Buffer(0);
      var state = clone(this.state);
      this.messageHandlers.push(function(callback) {
        self.applyExtensions(packet, state.lastFragment, state.compressed, function(err, buffer) {
          if (err) return self.error(err.message, 1007);
          if (buffer != null) self.currentMessage.push(buffer);

          if (state.lastFragment) {
            var messageBuffer = self.concatBuffers(self.currentMessage);
            self.currentMessage = [];
            if (!Validation.isValidUTF8(messageBuffer)) {
              self.error('invalid utf8 sequence', 1007);
              return;
            }
            self.ontext(messageBuffer.toString('utf8'), {masked: state.masked, buffer: messageBuffer});
          }
          callback();
        });
      });
      this.flush();
      this.endPacket();
    }
  },
  // binary
  '2': {
    start: function(data) {
      var self = this;
      // decode length
      var firstLength = data[1] & 0x7f;
      if (firstLength < 126) {
        opcodes['2'].getData.call(self, firstLength);
      }
      else if (firstLength == 126) {
        self.expectHeader(2, function(data) {
          opcodes['2'].getData.call(self, readUInt16BE.call(data, 0));
        });
      }
      else if (firstLength == 127) {
        self.expectHeader(8, function(data) {
          if (readUInt32BE.call(data, 0) != 0) {
            self.error('packets with length spanning more than 32 bit is currently not supported', 1008);
            return;
          }
          opcodes['2'].getData.call(self, readUInt32BE.call(data, 4, true));
        });
      }
    },
    getData: function(length) {
      var self = this;
      if (self.state.masked) {
        self.expectHeader(4, function(data) {
          var mask = data;
          self.expectData(length, function(data) {
            opcodes['2'].finish.call(self, mask, data);
          });
        });
      }
      else {
        self.expectData(length, function(data) {
          opcodes['2'].finish.call(self, null, data);
        });
      }
    },
    finish: function(mask, data) {
      var self = this;
      var packet = this.unmask(mask, data, true) || new Buffer(0);
      var state = clone(this.state);
      this.messageHandlers.push(function(callback) {
        self.applyExtensions(packet, state.lastFragment, state.compressed, function(err, buffer) {
          if (err) return self.error(err.message, 1007);
          if (buffer != null) self.currentMessage.push(buffer);
          if (state.lastFragment) {
            var messageBuffer = self.concatBuffers(self.currentMessage);
            self.currentMessage = [];
            self.onbinary(messageBuffer, {masked: state.masked, buffer: messageBuffer});
          }
          callback();
        });
      });
      this.flush();
      this.endPacket();
    }
  },
  // close
  '8': {
    start: function(data) {
      var self = this;
      if (self.state.lastFragment == false) {
        self.error('fragmented close is not supported', 1002);
        return;
      }

      // decode length
      var firstLength = data[1] & 0x7f;
      if (firstLength < 126) {
        opcodes['8'].getData.call(self, firstLength);
      }
      else {
        self.error('control frames cannot have more than 125 bytes of data', 1002);
      }
    },
    getData: function(length) {
      var self = this;
      if (self.state.masked) {
        self.expectHeader(4, function(data) {
          var mask = data;
          self.expectData(length, function(data) {
            opcodes['8'].finish.call(self, mask, data);
          });
        });
      }
      else {
        self.expectData(length, function(data) {
          opcodes['8'].finish.call(self, null, data);
        });
      }
    },
    finish: function(mask, data) {
      var self = this;
      data = self.unmask(mask, data, true);

      var state = clone(this.state);
      this.messageHandlers.push(function() {
        if (data && data.length == 1) {
          self.error('close packets with data must be at least two bytes long', 1002);
          return;
        }
        var code = data && data.length > 1 ? readUInt16BE.call(data, 0) : 1000;
        if (!ErrorCodes.isValidErrorCode(code)) {
          self.error('invalid error code', 1002);
          return;
        }
        var message = '';
        if (data && data.length > 2) {
          var messageBuffer = data.slice(2);
          if (!Validation.isValidUTF8(messageBuffer)) {
            self.error('invalid utf8 sequence', 1007);
            return;
          }
          message = messageBuffer.toString('utf8');
        }
        self.onclose(code, message, {masked: state.masked});
        self.reset();
      });
      this.flush();
    },
  },
  // ping
  '9': {
    start: function(data) {
      var self = this;
      if (self.state.lastFragment == false) {
        self.error('fragmented ping is not supported', 1002);
        return;
      }

      // decode length
      var firstLength = data[1] & 0x7f;
      if (firstLength < 126) {
        opcodes['9'].getData.call(self, firstLength);
      }
      else {
        self.error('control frames cannot have more than 125 bytes of data', 1002);
      }
    },
    getData: function(length) {
      var self = this;
      if (self.state.masked) {
        self.expectHeader(4, function(data) {
          var mask = data;
          self.expectData(length, function(data) {
            opcodes['9'].finish.call(self, mask, data);
          });
        });
      }
      else {
        self.expectData(length, function(data) {
          opcodes['9'].finish.call(self, null, data);
        });
      }
    },
    finish: function(mask, data) {
      var self = this;
      data = this.unmask(mask, data, true);
      var state = clone(this.state);
      this.messageHandlers.push(function(callback) {
        self.onping(data, {masked: state.masked, binary: true});
        callback();
      });
      this.flush();
      this.endPacket();
    }
  },
  // pong
  '10': {
    start: function(data) {
      var self = this;
      if (self.state.lastFragment == false) {
        self.error('fragmented pong is not supported', 1002);
        return;
      }

      // decode length
      var firstLength = data[1] & 0x7f;
      if (firstLength < 126) {
        opcodes['10'].getData.call(self, firstLength);
      }
      else {
        self.error('control frames cannot have more than 125 bytes of data', 1002);
      }
    },
    getData: function(length) {
      var self = this;
      if (this.state.masked) {
        this.expectHeader(4, function(data) {
          var mask = data;
          self.expectData(length, function(data) {
            opcodes['10'].finish.call(self, mask, data);
          });
        });
      }
      else {
        this.expectData(length, function(data) {
          opcodes['10'].finish.call(self, null, data);
        });
      }
    },
    finish: function(mask, data) {
      var self = this;
      data = self.unmask(mask, data, true);
      var state = clone(this.state);
      this.messageHandlers.push(function(callback) {
        self.onpong(data, {masked: state.masked, binary: true});
        callback();
      });
      this.flush();
      this.endPacket();
    }
  }
}

},{"./BufferPool":22,"./BufferUtil":24,"./ErrorCodes":25,"./PerMessageDeflate":27,"./Validation":33,"util":undefined}],30:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var events = require('events')
  , util = require('util')
  , EventEmitter = events.EventEmitter;

/**
 * Hixie Sender implementation
 */

function Sender(socket) {
  if (this instanceof Sender === false) {
    throw new TypeError("Classes can't be function-called");
  }

  events.EventEmitter.call(this);

  this.socket = socket;
  this.continuationFrame = false;
  this.isClosed = false;
}

module.exports = Sender;

/**
 * Inherits from EventEmitter.
 */

util.inherits(Sender, events.EventEmitter);

/**
 * Frames and writes data.
 *
 * @api public
 */

Sender.prototype.send = function(data, options, cb) {
  if (this.isClosed) return;

  var isString = typeof data == 'string'
    , length = isString ? Buffer.byteLength(data) : data.length
    , lengthbytes = (length > 127) ? 2 : 1 // assume less than 2**14 bytes
    , writeStartMarker = this.continuationFrame == false
    , writeEndMarker = !options || !(typeof options.fin != 'undefined' && !options.fin)
    , buffer = new Buffer((writeStartMarker ? ((options && options.binary) ? (1 + lengthbytes) : 1) : 0) + length + ((writeEndMarker && !(options && options.binary)) ? 1 : 0))
    , offset = writeStartMarker ? 1 : 0;

  if (writeStartMarker) {
    if (options && options.binary) {
      buffer.write('\x80', 'binary');
      // assume length less than 2**14 bytes
      if (lengthbytes > 1)
        buffer.write(String.fromCharCode(128+length/128), offset++, 'binary');
      buffer.write(String.fromCharCode(length&0x7f), offset++, 'binary');
    } else
      buffer.write('\x00', 'binary');
  }

  if (isString) buffer.write(data, offset, 'utf8');
  else data.copy(buffer, offset, 0);

  if (writeEndMarker) {
    if (options && options.binary) {
      // sending binary, not writing end marker
    } else
      buffer.write('\xff', offset + length, 'binary');
    this.continuationFrame = false;
  }
  else this.continuationFrame = true;

  try {
    this.socket.write(buffer, 'binary', cb);
  } catch (e) {
    this.error(e.toString());
  }
};

/**
 * Sends a close instruction to the remote party.
 *
 * @api public
 */

Sender.prototype.close = function(code, data, mask, cb) {
  if (this.isClosed) return;
  this.isClosed = true;
  try {
    if (this.continuationFrame) this.socket.write(new Buffer([0xff], 'binary'));
    this.socket.write(new Buffer([0xff, 0x00]), 'binary', cb);
  } catch (e) {
    this.error(e.toString());
  }
};

/**
 * Sends a ping message to the remote party. Not available for hixie.
 *
 * @api public
 */

Sender.prototype.ping = function(data, options) {};

/**
 * Sends a pong message to the remote party. Not available for hixie.
 *
 * @api public
 */

Sender.prototype.pong = function(data, options) {};

/**
 * Handles an error
 *
 * @api private
 */

Sender.prototype.error = function (reason) {
  this.emit('error', reason);
  return this;
};

},{"events":undefined,"util":undefined}],31:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var events = require('events')
  , util = require('util')
  , EventEmitter = events.EventEmitter
  , ErrorCodes = require('./ErrorCodes')
  , bufferUtil = require('./BufferUtil').BufferUtil
  , PerMessageDeflate = require('./PerMessageDeflate');

/**
 * HyBi Sender implementation
 */

function Sender(socket, extensions) {
  if (this instanceof Sender === false) {
    throw new TypeError("Classes can't be function-called");
  }

  events.EventEmitter.call(this);

  this._socket = socket;
  this.extensions = extensions || {};
  this.firstFragment = true;
  this.compress = false;
  this.messageHandlers = [];
  this.processing = false;
}

/**
 * Inherits from EventEmitter.
 */

util.inherits(Sender, events.EventEmitter);

/**
 * Sends a close instruction to the remote party.
 *
 * @api public
 */

Sender.prototype.close = function(code, data, mask, cb) {
  if (typeof code !== 'undefined') {
    if (typeof code !== 'number' ||
      !ErrorCodes.isValidErrorCode(code)) throw new Error('first argument must be a valid error code number');
  }
  code = code || 1000;
  var dataBuffer = new Buffer(2 + (data ? Buffer.byteLength(data) : 0));
  writeUInt16BE.call(dataBuffer, code, 0);
  if (dataBuffer.length > 2) dataBuffer.write(data, 2);

  var self = this;
  this.messageHandlers.push(function(callback) {
    self.frameAndSend(0x8, dataBuffer, true, mask);
    callback();
    if (typeof cb == 'function') cb();
  });
  this.flush();
};

/**
 * Sends a ping message to the remote party.
 *
 * @api public
 */

Sender.prototype.ping = function(data, options) {
  var mask = options && options.mask;
  var self = this;
  this.messageHandlers.push(function(callback) {
    self.frameAndSend(0x9, data || '', true, mask);
    callback();
  });
  this.flush();
};

/**
 * Sends a pong message to the remote party.
 *
 * @api public
 */

Sender.prototype.pong = function(data, options) {
  var mask = options && options.mask;
  var self = this;
  this.messageHandlers.push(function(callback) {
    self.frameAndSend(0xa, data || '', true, mask);
    callback();
  });
  this.flush();
};

/**
 * Sends text or binary data to the remote party.
 *
 * @api public
 */

Sender.prototype.send = function(data, options, cb) {
  var finalFragment = options && options.fin === false ? false : true;
  var mask = options && options.mask;
  var compress = options && options.compress;
  var opcode = options && options.binary ? 2 : 1;
  if (this.firstFragment === false) {
    opcode = 0;
    compress = false;
  } else {
    this.firstFragment = false;
    this.compress = compress;
  }
  if (finalFragment) this.firstFragment = true

  var compressFragment = this.compress;

  var self = this;
  this.messageHandlers.push(function(callback) {
    self.applyExtensions(data, finalFragment, compressFragment, function(err, data) {
      if (err) {
        if (typeof cb == 'function') cb(err);
        else self.emit('error', err);
        return;
      }
      self.frameAndSend(opcode, data, finalFragment, mask, compress, cb);
      callback();
    });
  });
  this.flush();
};

/**
 * Frames and sends a piece of data according to the HyBi WebSocket protocol.
 *
 * @api private
 */

Sender.prototype.frameAndSend = function(opcode, data, finalFragment, maskData, compressed, cb) {
  var canModifyData = false;

  if (!data) {
    try {
      this._socket.write(new Buffer([opcode | (finalFragment ? 0x80 : 0), 0 | (maskData ? 0x80 : 0)].concat(maskData ? [0, 0, 0, 0] : [])), 'binary', cb);
    }
    catch (e) {
      if (typeof cb == 'function') cb(e);
      else this.emit('error', e);
    }
    return;
  }

  if (!Buffer.isBuffer(data)) {
    canModifyData = true;
    if (data && (typeof data.byteLength !== 'undefined' || typeof data.buffer !== 'undefined')) {
      data = getArrayBuffer(data);
    } else {
      //
      // If people want to send a number, this would allocate the number in
      // bytes as memory size instead of storing the number as buffer value. So
      // we need to transform it to string in order to prevent possible
      // vulnerabilities / memory attacks.
      //
      if (typeof data === 'number') data = data.toString();

      data = new Buffer(data);
    }
  }

  var dataLength = data.length
    , dataOffset = maskData ? 6 : 2
    , secondByte = dataLength;

  if (dataLength >= 65536) {
    dataOffset += 8;
    secondByte = 127;
  }
  else if (dataLength > 125) {
    dataOffset += 2;
    secondByte = 126;
  }

  var mergeBuffers = dataLength < 32768 || (maskData && !canModifyData);
  var totalLength = mergeBuffers ? dataLength + dataOffset : dataOffset;
  var outputBuffer = new Buffer(totalLength);
  outputBuffer[0] = finalFragment ? opcode | 0x80 : opcode;
  if (compressed) outputBuffer[0] |= 0x40;

  switch (secondByte) {
    case 126:
      writeUInt16BE.call(outputBuffer, dataLength, 2);
      break;
    case 127:
      writeUInt32BE.call(outputBuffer, 0, 2);
      writeUInt32BE.call(outputBuffer, dataLength, 6);
  }

  if (maskData) {
    outputBuffer[1] = secondByte | 0x80;
    var mask = this._randomMask || (this._randomMask = getRandomMask());
    outputBuffer[dataOffset - 4] = mask[0];
    outputBuffer[dataOffset - 3] = mask[1];
    outputBuffer[dataOffset - 2] = mask[2];
    outputBuffer[dataOffset - 1] = mask[3];
    if (mergeBuffers) {
      bufferUtil.mask(data, mask, outputBuffer, dataOffset, dataLength);
      try {
        this._socket.write(outputBuffer, 'binary', cb);
      }
      catch (e) {
        if (typeof cb == 'function') cb(e);
        else this.emit('error', e);
      }
    }
    else {
      bufferUtil.mask(data, mask, data, 0, dataLength);
      try {
        this._socket.write(outputBuffer, 'binary');
        this._socket.write(data, 'binary', cb);
      }
      catch (e) {
        if (typeof cb == 'function') cb(e);
        else this.emit('error', e);
      }
    }
  }
  else {
    outputBuffer[1] = secondByte;
    if (mergeBuffers) {
      data.copy(outputBuffer, dataOffset);
      try {
        this._socket.write(outputBuffer, 'binary', cb);
      }
      catch (e) {
        if (typeof cb == 'function') cb(e);
        else this.emit('error', e);
      }
    }
    else {
      try {
        this._socket.write(outputBuffer, 'binary');
        this._socket.write(data, 'binary', cb);
      }
      catch (e) {
        if (typeof cb == 'function') cb(e);
        else this.emit('error', e);
      }
    }
  }
};

/**
 * Execute message handler buffers
 *
 * @api private
 */

Sender.prototype.flush = function() {
  if (this.processing) return;

  var handler = this.messageHandlers.shift();
  if (!handler) return;

  this.processing = true;

  var self = this;

  handler(function() {
    self.processing = false;
    self.flush();
  });
};

/**
 * Apply extensions to message
 *
 * @api private
 */

Sender.prototype.applyExtensions = function(data, fin, compress, callback) {
  if (compress && data) {
    if ((data.buffer || data) instanceof ArrayBuffer) {
      data = getArrayBuffer(data);
    }
    this.extensions[PerMessageDeflate.extensionName].compress(data, fin, callback);
  } else {
    callback(null, data);
  }
};

module.exports = Sender;

function writeUInt16BE(value, offset) {
  this[offset] = (value & 0xff00)>>8;
  this[offset+1] = value & 0xff;
}

function writeUInt32BE(value, offset) {
  this[offset] = (value & 0xff000000)>>24;
  this[offset+1] = (value & 0xff0000)>>16;
  this[offset+2] = (value & 0xff00)>>8;
  this[offset+3] = value & 0xff;
}

function getArrayBuffer(data) {
  // data is either an ArrayBuffer or ArrayBufferView.
  var array = new Uint8Array(data.buffer || data)
    , l = data.byteLength || data.length
    , o = data.byteOffset || 0
    , buffer = new Buffer(l);
  for (var i = 0; i < l; ++i) {
    buffer[i] = array[o+i];
  }
  return buffer;
}

function getRandomMask() {
  return new Buffer([
    ~~(Math.random() * 255),
    ~~(Math.random() * 255),
    ~~(Math.random() * 255),
    ~~(Math.random() * 255)
  ]);
}

},{"./BufferUtil":24,"./ErrorCodes":25,"./PerMessageDeflate":27,"events":undefined,"util":undefined}],32:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
 
module.exports.Validation = {
  isValidUTF8: function(buffer) {
    return true;
  }
};


},{}],33:[function(require,module,exports){
'use strict';

/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

try {
  module.exports = require('utf-8-validate');
} catch (e) {
  module.exports = require('./Validation.fallback');
}

},{"./Validation.fallback":32,"utf-8-validate":undefined}],34:[function(require,module,exports){
'use strict';

/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var url = require('url')
  , util = require('util')
  , http = require('http')
  , https = require('https')
  , crypto = require('crypto')
  , stream = require('stream')
  , Ultron = require('ultron')
  , Options = require('options')
  , Sender = require('./Sender')
  , Receiver = require('./Receiver')
  , SenderHixie = require('./Sender.hixie')
  , ReceiverHixie = require('./Receiver.hixie')
  , Extensions = require('./Extensions')
  , PerMessageDeflate = require('./PerMessageDeflate')
  , EventEmitter = require('events').EventEmitter;

/**
 * Constants
 */

// Default protocol version

var protocolVersion = 13;

// Close timeout

var closeTimeout = 30 * 1000; // Allow 30 seconds to terminate the connection cleanly

/**
 * WebSocket implementation
 *
 * @constructor
 * @param {String} address Connection address.
 * @param {String|Array} protocols WebSocket protocols.
 * @param {Object} options Additional connection options.
 * @api public
 */
function WebSocket(address, protocols, options) {
  if (this instanceof WebSocket === false) {
    return new WebSocket(address, protocols, options);
  }

  EventEmitter.call(this);

  if (protocols && !Array.isArray(protocols) && 'object' === typeof protocols) {
    // accept the "options" Object as the 2nd argument
    options = protocols;
    protocols = null;
  }

  if ('string' === typeof protocols) {
    protocols = [ protocols ];
  }

  if (!Array.isArray(protocols)) {
    protocols = [];
  }

  this._socket = null;
  this._ultron = null;
  this._closeReceived = false;
  this.bytesReceived = 0;
  this.readyState = null;
  this.supports = {};
  this.extensions = {};

  if (Array.isArray(address)) {
    initAsServerClient.apply(this, address.concat(options));
  } else {
    initAsClient.apply(this, [address, protocols, options]);
  }
}

/**
 * Inherits from EventEmitter.
 */
util.inherits(WebSocket, EventEmitter);

/**
 * Ready States
 */
["CONNECTING", "OPEN", "CLOSING", "CLOSED"].forEach(function each(state, index) {
    WebSocket.prototype[state] = WebSocket[state] = index;
});

/**
 * Gracefully closes the connection, after sending a description message to the server
 *
 * @param {Object} data to be sent to the server
 * @api public
 */
WebSocket.prototype.close = function close(code, data) {
  if (this.readyState === WebSocket.CLOSED) return;

  if (this.readyState === WebSocket.CONNECTING) {
    this.readyState = WebSocket.CLOSED;
    return;
  }

  if (this.readyState === WebSocket.CLOSING) {
    if (this._closeReceived && this._isServer) {
      this.terminate();
    }
    return;
  }

  var self = this;
  try {
    this.readyState = WebSocket.CLOSING;
    this._closeCode = code;
    this._closeMessage = data;
    var mask = !this._isServer;
    this._sender.close(code, data, mask, function(err) {
      if (err) self.emit('error', err);

      if (self._closeReceived && self._isServer) {
        self.terminate();
      } else {
        // ensure that the connection is cleaned up even when no response of closing handshake.
        clearTimeout(self._closeTimer);
        self._closeTimer = setTimeout(cleanupWebsocketResources.bind(self, true), closeTimeout);
      }
    });
  } catch (e) {
    this.emit('error', e);
  }
};

/**
 * Pause the client stream
 *
 * @api public
 */
WebSocket.prototype.pause = function pauser() {
  if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');

  return this._socket.pause();
};

/**
 * Sends a ping
 *
 * @param {Object} data to be sent to the server
 * @param {Object} Members - mask: boolean, binary: boolean
 * @param {boolean} dontFailWhenClosed indicates whether or not to throw if the connection isnt open
 * @api public
 */
WebSocket.prototype.ping = function ping(data, options, dontFailWhenClosed) {
  if (this.readyState !== WebSocket.OPEN) {
    if (dontFailWhenClosed === true) return;
    throw new Error('not opened');
  }

  options = options || {};

  if (typeof options.mask === 'undefined') options.mask = !this._isServer;

  this._sender.ping(data, options);
};

/**
 * Sends a pong
 *
 * @param {Object} data to be sent to the server
 * @param {Object} Members - mask: boolean, binary: boolean
 * @param {boolean} dontFailWhenClosed indicates whether or not to throw if the connection isnt open
 * @api public
 */
WebSocket.prototype.pong = function(data, options, dontFailWhenClosed) {
  if (this.readyState !== WebSocket.OPEN) {
    if (dontFailWhenClosed === true) return;
    throw new Error('not opened');
  }

  options = options || {};

  if (typeof options.mask === 'undefined') options.mask = !this._isServer;

  this._sender.pong(data, options);
};

/**
 * Resume the client stream
 *
 * @api public
 */
WebSocket.prototype.resume = function resume() {
  if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');

  return this._socket.resume();
};

/**
 * Sends a piece of data
 *
 * @param {Object} data to be sent to the server
 * @param {Object} Members - mask: boolean, binary: boolean, compress: boolean
 * @param {function} Optional callback which is executed after the send completes
 * @api public
 */

WebSocket.prototype.send = function send(data, options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = {};
  }

  if (this.readyState !== WebSocket.OPEN) {
    if (typeof cb === 'function') cb(new Error('not opened'));
    else throw new Error('not opened');
    return;
  }

  if (!data) data = '';
  if (this._queue) {
    var self = this;
    this._queue.push(function() { self.send(data, options, cb); });
    return;
  }

  options = options || {};
  options.fin = true;

  if (typeof options.binary === 'undefined') {
    options.binary = (data instanceof ArrayBuffer || data instanceof Buffer ||
      data instanceof Uint8Array ||
      data instanceof Uint16Array ||
      data instanceof Uint32Array ||
      data instanceof Int8Array ||
      data instanceof Int16Array ||
      data instanceof Int32Array ||
      data instanceof Float32Array ||
      data instanceof Float64Array);
  }

  if (typeof options.mask === 'undefined') options.mask = !this._isServer;
  if (typeof options.compress === 'undefined') options.compress = true;
  if (!this.extensions[PerMessageDeflate.extensionName]) {
    options.compress = false;
  }

  var readable = typeof stream.Readable === 'function'
    ? stream.Readable
    : stream.Stream;

  if (data instanceof readable) {
    startQueue(this);
    var self = this;

    sendStream(this, data, options, function send(error) {
      process.nextTick(function tock() {
        executeQueueSends(self);
      });

      if (typeof cb === 'function') cb(error);
    });
  } else {
    this._sender.send(data, options, cb);
  }
};

/**
 * Streams data through calls to a user supplied function
 *
 * @param {Object} Members - mask: boolean, binary: boolean, compress: boolean
 * @param {function} 'function (error, send)' which is executed on successive ticks of which send is 'function (data, final)'.
 * @api public
 */
WebSocket.prototype.stream = function stream(options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = {};
  }

  var self = this;

  if (typeof cb !== 'function') throw new Error('callback must be provided');

  if (this.readyState !== WebSocket.OPEN) {
    if (typeof cb === 'function') cb(new Error('not opened'));
    else throw new Error('not opened');
    return;
  }

  if (this._queue) {
    this._queue.push(function () { self.stream(options, cb); });
    return;
  }

  options = options || {};

  if (typeof options.mask === 'undefined') options.mask = !this._isServer;
  if (typeof options.compress === 'undefined') options.compress = true;
  if (!this.extensions[PerMessageDeflate.extensionName]) {
    options.compress = false;
  }

  startQueue(this);

  function send(data, final) {
    try {
      if (self.readyState !== WebSocket.OPEN) throw new Error('not opened');
      options.fin = final === true;
      self._sender.send(data, options);
      if (!final) process.nextTick(cb.bind(null, null, send));
      else executeQueueSends(self);
    } catch (e) {
      if (typeof cb === 'function') cb(e);
      else {
        delete self._queue;
        self.emit('error', e);
      }
    }
  }

  process.nextTick(cb.bind(null, null, send));
};

/**
 * Immediately shuts down the connection
 *
 * @api public
 */
WebSocket.prototype.terminate = function terminate() {
  if (this.readyState === WebSocket.CLOSED) return;

  if (this._socket) {
    this.readyState = WebSocket.CLOSING;

    // End the connection
    try { this._socket.end(); }
    catch (e) {
      // Socket error during end() call, so just destroy it right now
      cleanupWebsocketResources.call(this, true);
      return;
    }

    // Add a timeout to ensure that the connection is completely
    // cleaned up within 30 seconds, even if the clean close procedure
    // fails for whatever reason
    // First cleanup any pre-existing timeout from an earlier "terminate" call,
    // if one exists.  Otherwise terminate calls in quick succession will leak timeouts
    // and hold the program open for `closeTimout` time.
    if (this._closeTimer) { clearTimeout(this._closeTimer); }
    this._closeTimer = setTimeout(cleanupWebsocketResources.bind(this, true), closeTimeout);
  } else if (this.readyState === WebSocket.CONNECTING) {
    cleanupWebsocketResources.call(this, true);
  }
};

/**
 * Expose bufferedAmount
 *
 * @api public
 */
Object.defineProperty(WebSocket.prototype, 'bufferedAmount', {
  get: function get() {
    var amount = 0;
    if (this._socket) {
      amount = this._socket.bufferSize || 0;
    }
    return amount;
  }
});

/**
 * Emulates the W3C Browser based WebSocket interface using function members.
 *
 * @see http://dev.w3.org/html5/websockets/#the-websocket-interface
 * @api public
 */
['open', 'error', 'close', 'message'].forEach(function(method) {
  Object.defineProperty(WebSocket.prototype, 'on' + method, {
    /**
     * Returns the current listener
     *
     * @returns {Mixed} the set function or undefined
     * @api public
     */
    get: function get() {
      var listener = this.listeners(method)[0];
      return listener ? (listener._listener ? listener._listener : listener) : undefined;
    },

    /**
     * Start listening for events
     *
     * @param {Function} listener the listener
     * @returns {Mixed} the set function or undefined
     * @api public
     */
    set: function set(listener) {
      this.removeAllListeners(method);
      this.addEventListener(method, listener);
    }
  });
});

/**
 * Emulates the W3C Browser based WebSocket interface using addEventListener.
 *
 * @see https://developer.mozilla.org/en/DOM/element.addEventListener
 * @see http://dev.w3.org/html5/websockets/#the-websocket-interface
 * @api public
 */
WebSocket.prototype.addEventListener = function(method, listener) {
  var target = this;

  function onMessage (data, flags) {
    listener.call(target, new MessageEvent(data, !!flags.binary, target));
  }

  function onClose (code, message) {
    listener.call(target, new CloseEvent(code, message, target));
  }

  function onError (event) {
    event.type = 'error';
    event.target = target;
    listener.call(target, event);
  }

  function onOpen () {
    listener.call(target, new OpenEvent(target));
  }

  if (typeof listener === 'function') {
    if (method === 'message') {
      // store a reference so we can return the original function from the
      // addEventListener hook
      onMessage._listener = listener;
      this.on(method, onMessage);
    } else if (method === 'close') {
      // store a reference so we can return the original function from the
      // addEventListener hook
      onClose._listener = listener;
      this.on(method, onClose);
    } else if (method === 'error') {
      // store a reference so we can return the original function from the
      // addEventListener hook
      onError._listener = listener;
      this.on(method, onError);
    } else if (method === 'open') {
      // store a reference so we can return the original function from the
      // addEventListener hook
      onOpen._listener = listener;
      this.on(method, onOpen);
    } else {
      this.on(method, listener);
    }
  }
};

module.exports = WebSocket;
module.exports.buildHostHeader = buildHostHeader

/**
 * W3C MessageEvent
 *
 * @see http://www.w3.org/TR/html5/comms.html
 * @constructor
 * @api private
 */
function MessageEvent(dataArg, isBinary, target) {
  this.type = 'message';
  this.data = dataArg;
  this.target = target;
  this.binary = isBinary; // non-standard.
}

/**
 * W3C CloseEvent
 *
 * @see http://www.w3.org/TR/html5/comms.html
 * @constructor
 * @api private
 */
function CloseEvent(code, reason, target) {
  this.type = 'close';
  this.wasClean = (typeof code === 'undefined' || code === 1000);
  this.code = code;
  this.reason = reason;
  this.target = target;
}

/**
 * W3C OpenEvent
 *
 * @see http://www.w3.org/TR/html5/comms.html
 * @constructor
 * @api private
 */
function OpenEvent(target) {
  this.type = 'open';
  this.target = target;
}

// Append port number to Host header, only if specified in the url
// and non-default
function buildHostHeader(isSecure, hostname, port) {
  var headerHost = hostname;
  if (hostname) {
    if ((isSecure && (port != 443)) || (!isSecure && (port != 80))){
      headerHost = headerHost + ':' + port;
    }
  }
  return headerHost;
}

/**
 * Entirely private apis,
 * which may or may not be bound to a sepcific WebSocket instance.
 */
function initAsServerClient(req, socket, upgradeHead, options) {
  options = new Options({
    protocolVersion: protocolVersion,
    protocol: null,
    extensions: {}
  }).merge(options);

  // expose state properties
  this.protocol = options.value.protocol;
  this.protocolVersion = options.value.protocolVersion;
  this.extensions = options.value.extensions;
  this.supports.binary = (this.protocolVersion !== 'hixie-76');
  this.upgradeReq = req;
  this.readyState = WebSocket.CONNECTING;
  this._isServer = true;

  // establish connection
  if (options.value.protocolVersion === 'hixie-76') {
    establishConnection.call(this, ReceiverHixie, SenderHixie, socket, upgradeHead);
  } else {
    establishConnection.call(this, Receiver, Sender, socket, upgradeHead);
  }
}

function initAsClient(address, protocols, options) {
  options = new Options({
    origin: null,
    protocolVersion: protocolVersion,
    host: null,
    headers: null,
    protocol: protocols.join(','),
    agent: null,

    // ssl-related options
    pfx: null,
    key: null,
    passphrase: null,
    cert: null,
    ca: null,
    ciphers: null,
    rejectUnauthorized: null,
    perMessageDeflate: true,
    localAddress: null
  }).merge(options);

  if (options.value.protocolVersion !== 8 && options.value.protocolVersion !== 13) {
    throw new Error('unsupported protocol version');
  }

  // verify URL and establish http class
  var serverUrl = url.parse(address);
  var isUnixSocket = serverUrl.protocol === 'ws+unix:';
  if (!serverUrl.host && !isUnixSocket) throw new Error('invalid url');
  var isSecure = serverUrl.protocol === 'wss:' || serverUrl.protocol === 'https:';
  var httpObj = isSecure ? https : http;
  var port = serverUrl.port || (isSecure ? 443 : 80);
  var auth = serverUrl.auth;

  // prepare extensions
  var extensionsOffer = {};
  var perMessageDeflate;
  if (options.value.perMessageDeflate) {
    perMessageDeflate = new PerMessageDeflate(typeof options.value.perMessageDeflate !== true ? options.value.perMessageDeflate : {}, false);
    extensionsOffer[PerMessageDeflate.extensionName] = perMessageDeflate.offer();
  }

  // expose state properties
  this._isServer = false;
  this.url = address;
  this.protocolVersion = options.value.protocolVersion;
  this.supports.binary = (this.protocolVersion !== 'hixie-76');

  // begin handshake
  var key = new Buffer(options.value.protocolVersion + '-' + Date.now()).toString('base64');
  var shasum = crypto.createHash('sha1');
  shasum.update(key + '258EAFA5-E914-47DA-95CA-C5AB0DC85B11');
  var expectedServerKey = shasum.digest('base64');

  var agent = options.value.agent;

  var headerHost = buildHostHeader(isSecure, serverUrl.hostname, port)

  var requestOptions = {
    port: port,
    host: serverUrl.hostname,
    headers: {
      'Connection': 'Upgrade',
      'Upgrade': 'websocket',
      'Host': headerHost,
      'Sec-WebSocket-Version': options.value.protocolVersion,
      'Sec-WebSocket-Key': key
    }
  };

  // If we have basic auth.
  if (auth) {
    requestOptions.headers.Authorization = 'Basic ' + new Buffer(auth).toString('base64');
  }

  if (options.value.protocol) {
    requestOptions.headers['Sec-WebSocket-Protocol'] = options.value.protocol;
  }

  if (options.value.host) {
    requestOptions.headers.Host = options.value.host;
  }

  if (options.value.headers) {
    for (var header in options.value.headers) {
       if (options.value.headers.hasOwnProperty(header)) {
        requestOptions.headers[header] = options.value.headers[header];
       }
    }
  }

  if (Object.keys(extensionsOffer).length) {
    requestOptions.headers['Sec-WebSocket-Extensions'] = Extensions.format(extensionsOffer);
  }

  if (options.isDefinedAndNonNull('pfx')
   || options.isDefinedAndNonNull('key')
   || options.isDefinedAndNonNull('passphrase')
   || options.isDefinedAndNonNull('cert')
   || options.isDefinedAndNonNull('ca')
   || options.isDefinedAndNonNull('ciphers')
   || options.isDefinedAndNonNull('rejectUnauthorized')) {

    if (options.isDefinedAndNonNull('pfx')) requestOptions.pfx = options.value.pfx;
    if (options.isDefinedAndNonNull('key')) requestOptions.key = options.value.key;
    if (options.isDefinedAndNonNull('passphrase')) requestOptions.passphrase = options.value.passphrase;
    if (options.isDefinedAndNonNull('cert')) requestOptions.cert = options.value.cert;
    if (options.isDefinedAndNonNull('ca')) requestOptions.ca = options.value.ca;
    if (options.isDefinedAndNonNull('ciphers')) requestOptions.ciphers = options.value.ciphers;
    if (options.isDefinedAndNonNull('rejectUnauthorized')) requestOptions.rejectUnauthorized = options.value.rejectUnauthorized;

    if (!agent) {
        // global agent ignores client side certificates
        agent = new httpObj.Agent(requestOptions);
    }
  }

  requestOptions.path = serverUrl.path || '/';

  if (agent) {
    requestOptions.agent = agent;
  }

  if (isUnixSocket) {
    requestOptions.socketPath = serverUrl.pathname;
  }

  if (options.value.localAddress) {
    requestOptions.localAddress = options.value.localAddress;
  }

  if (options.value.origin) {
    if (options.value.protocolVersion < 13) requestOptions.headers['Sec-WebSocket-Origin'] = options.value.origin;
    else requestOptions.headers.Origin = options.value.origin;
  }

  var self = this;
  var req = httpObj.request(requestOptions);

  req.on('error', function onerror(error) {
    self.emit('error', error);
    cleanupWebsocketResources.call(self, error);
  });

  req.once('response', function response(res) {
    var error;

    if (!self.emit('unexpected-response', req, res)) {
      error = new Error('unexpected server response (' + res.statusCode + ')');
      req.abort();
      self.emit('error', error);
    }

    cleanupWebsocketResources.call(self, error);
  });

  req.once('upgrade', function upgrade(res, socket, upgradeHead) {
    if (self.readyState === WebSocket.CLOSED) {
      // client closed before server accepted connection
      self.emit('close');
      self.removeAllListeners();
      socket.end();
      return;
    }

    var serverKey = res.headers['sec-websocket-accept'];
    if (typeof serverKey === 'undefined' || serverKey !== expectedServerKey) {
      self.emit('error', 'invalid server key');
      self.removeAllListeners();
      socket.end();
      return;
    }

    var serverProt = res.headers['sec-websocket-protocol'];
    var protList = (options.value.protocol || "").split(/, */);
    var protError = null;

    if (!options.value.protocol && serverProt) {
      protError = 'server sent a subprotocol even though none requested';
    } else if (options.value.protocol && !serverProt) {
      protError = 'server sent no subprotocol even though requested';
    } else if (serverProt && protList.indexOf(serverProt) === -1) {
      protError = 'server responded with an invalid protocol';
    }

    if (protError) {
      self.emit('error', protError);
      self.removeAllListeners();
      socket.end();
      return;
    } else if (serverProt) {
      self.protocol = serverProt;
    }

    var serverExtensions = Extensions.parse(res.headers['sec-websocket-extensions']);
    if (perMessageDeflate && serverExtensions[PerMessageDeflate.extensionName]) {
      try {
        perMessageDeflate.accept(serverExtensions[PerMessageDeflate.extensionName]);
      } catch (err) {
        self.emit('error', 'invalid extension parameter');
        self.removeAllListeners();
        socket.end();
        return;
      }
      self.extensions[PerMessageDeflate.extensionName] = perMessageDeflate;
    }

    establishConnection.call(self, Receiver, Sender, socket, upgradeHead);

    // perform cleanup on http resources
    req.removeAllListeners();
    req = null;
    agent = null;
  });

  req.end();
  this.readyState = WebSocket.CONNECTING;
}

function establishConnection(ReceiverClass, SenderClass, socket, upgradeHead) {
  var ultron = this._ultron = new Ultron(socket)
    , called = false
    , self = this;

  socket.setTimeout(0);
  socket.setNoDelay(true);

  this._receiver = new ReceiverClass(this.extensions);
  this._socket = socket;

  // socket cleanup handlers
  ultron.on('end', cleanupWebsocketResources.bind(this));
  ultron.on('close', cleanupWebsocketResources.bind(this));
  ultron.on('error', cleanupWebsocketResources.bind(this));

  // ensure that the upgradeHead is added to the receiver
  function firstHandler(data) {
    if (called || self.readyState === WebSocket.CLOSED) return;

    called = true;
    socket.removeListener('data', firstHandler);
    ultron.on('data', realHandler);

    if (upgradeHead && upgradeHead.length > 0) {
      realHandler(upgradeHead);
      upgradeHead = null;
    }

    if (data) realHandler(data);
  }

  // subsequent packets are pushed straight to the receiver
  function realHandler(data) {
    self.bytesReceived += data.length;
    self._receiver.add(data);
  }

  ultron.on('data', firstHandler);

  // if data was passed along with the http upgrade,
  // this will schedule a push of that on to the receiver.
  // this has to be done on next tick, since the caller
  // hasn't had a chance to set event handlers on this client
  // object yet.
  process.nextTick(firstHandler);

  // receiver event handlers
  self._receiver.ontext = function ontext(data, flags) {
    flags = flags || {};

    self.emit('message', data, flags);
  };

  self._receiver.onbinary = function onbinary(data, flags) {
    flags = flags || {};

    flags.binary = true;
    self.emit('message', data, flags);
  };

  self._receiver.onping = function onping(data, flags) {
    flags = flags || {};

    self.pong(data, {
      mask: !self._isServer,
      binary: flags.binary === true
    }, true);

    self.emit('ping', data, flags);
  };

  self._receiver.onpong = function onpong(data, flags) {
    self.emit('pong', data, flags || {});
  };

  self._receiver.onclose = function onclose(code, data, flags) {
    flags = flags || {};

    self._closeReceived = true;
    self.close(code, data);
  };

  self._receiver.onerror = function onerror(reason, errorCode) {
    // close the connection when the receiver reports a HyBi error code
    self.close(typeof errorCode !== 'undefined' ? errorCode : 1002, '');
    self.emit('error', reason, errorCode);
  };

  // finalize the client
  this._sender = new SenderClass(socket, this.extensions);
  this._sender.on('error', function onerror(error) {
    self.close(1002, '');
    self.emit('error', error);
  });

  this.readyState = WebSocket.OPEN;
  this.emit('open');
}

function startQueue(instance) {
  instance._queue = instance._queue || [];
}

function executeQueueSends(instance) {
  var queue = instance._queue;
  if (typeof queue === 'undefined') return;

  delete instance._queue;
  for (var i = 0, l = queue.length; i < l; ++i) {
    queue[i]();
  }
}

function sendStream(instance, stream, options, cb) {
  stream.on('data', function incoming(data) {
    if (instance.readyState !== WebSocket.OPEN) {
      if (typeof cb === 'function') cb(new Error('not opened'));
      else {
        delete instance._queue;
        instance.emit('error', new Error('not opened'));
      }
      return;
    }

    options.fin = false;
    instance._sender.send(data, options);
  });

  stream.on('end', function end() {
    if (instance.readyState !== WebSocket.OPEN) {
      if (typeof cb === 'function') cb(new Error('not opened'));
      else {
        delete instance._queue;
        instance.emit('error', new Error('not opened'));
      }
      return;
    }

    options.fin = true;
    instance._sender.send(null, options);

    if (typeof cb === 'function') cb(null);
  });
}

function cleanupWebsocketResources(error) {
  if (this.readyState === WebSocket.CLOSED) return;

  var emitClose = this.readyState !== WebSocket.CONNECTING;
  this.readyState = WebSocket.CLOSED;

  clearTimeout(this._closeTimer);
  this._closeTimer = null;

  if (emitClose) {
    // If the connection was closed abnormally (with an error), or if
    // the close control frame was not received then the close code
    // must default to 1006.
    if (error || !this._closeReceived) {
      this._closeCode = 1006;
    }
    this.emit('close', this._closeCode || 1000, this._closeMessage || '');
  }

  if (this._socket) {
    if (this._ultron) this._ultron.destroy();
    this._socket.on('error', function onerror() {
      try { this.destroy(); }
      catch (e) {}
    });

    try {
      if (!error) this._socket.end();
      else this._socket.destroy();
    } catch (e) { /* Ignore termination errors */ }

    this._socket = null;
    this._ultron = null;
  }

  if (this._sender) {
    this._sender.removeAllListeners();
    this._sender = null;
  }

  if (this._receiver) {
    this._receiver.cleanup();
    this._receiver = null;
  }

  if (this.extensions[PerMessageDeflate.extensionName]) {
    this.extensions[PerMessageDeflate.extensionName].cleanup();
  }

  this.extensions = null;

  this.removeAllListeners();
  this.on('error', function onerror() {}); // catch all errors after this
  delete this._queue;
}

},{"./Extensions":26,"./PerMessageDeflate":27,"./Receiver":29,"./Receiver.hixie":28,"./Sender":31,"./Sender.hixie":30,"crypto":undefined,"events":undefined,"http":undefined,"https":undefined,"options":19,"stream":undefined,"ultron":20,"url":undefined,"util":undefined}],35:[function(require,module,exports){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var util = require('util')
  , events = require('events')
  , http = require('http')
  , crypto = require('crypto')
  , Options = require('options')
  , WebSocket = require('./WebSocket')
  , Extensions = require('./Extensions')
  , PerMessageDeflate = require('./PerMessageDeflate')
  , tls = require('tls')
  , url = require('url');

/**
 * WebSocket Server implementation
 */

function WebSocketServer(options, callback) {
  if (this instanceof WebSocketServer === false) {
    return new WebSocketServer(options, callback);
  }

  events.EventEmitter.call(this);

  options = new Options({
    host: '0.0.0.0',
    port: null,
    server: null,
    verifyClient: null,
    handleProtocols: null,
    path: null,
    noServer: false,
    disableHixie: false,
    clientTracking: true,
    perMessageDeflate: true
  }).merge(options);

  if (!options.isDefinedAndNonNull('port') && !options.isDefinedAndNonNull('server') && !options.value.noServer) {
    throw new TypeError('`port` or a `server` must be provided');
  }

  var self = this;

  if (options.isDefinedAndNonNull('port')) {
    this._server = http.createServer(function (req, res) {
      var body = http.STATUS_CODES[426];
      res.writeHead(426, {
        'Content-Length': body.length,
        'Content-Type': 'text/plain'
      });
      res.end(body);
    });
    this._server.allowHalfOpen = false;
    this._server.listen(options.value.port, options.value.host, callback);
    this._closeServer = function() { if (self._server) self._server.close(); };
  }
  else if (options.value.server) {
    this._server = options.value.server;
    if (options.value.path) {
      // take note of the path, to avoid collisions when multiple websocket servers are
      // listening on the same http server
      if (this._server._webSocketPaths && options.value.server._webSocketPaths[options.value.path]) {
        throw new Error('two instances of WebSocketServer cannot listen on the same http server path');
      }
      if (typeof this._server._webSocketPaths !== 'object') {
        this._server._webSocketPaths = {};
      }
      this._server._webSocketPaths[options.value.path] = 1;
    }
  }
  if (this._server) this._server.once('listening', function() { self.emit('listening'); });

  if (typeof this._server != 'undefined') {
    this._server.on('error', function(error) {
      self.emit('error', error)
    });
    this._server.on('upgrade', function(req, socket, upgradeHead) {
      //copy upgradeHead to avoid retention of large slab buffers used in node core
      var head = new Buffer(upgradeHead.length);
      upgradeHead.copy(head);

      self.handleUpgrade(req, socket, head, function(client) {
        self.emit('connection'+req.url, client);
        self.emit('connection', client);
      });
    });
  }

  this.options = options.value;
  this.path = options.value.path;
  this.clients = [];
}

/**
 * Inherits from EventEmitter.
 */

util.inherits(WebSocketServer, events.EventEmitter);

/**
 * Immediately shuts down the connection.
 *
 * @api public
 */

WebSocketServer.prototype.close = function(callback) {
  // terminate all associated clients
  var error = null;
  try {
    for (var i = 0, l = this.clients.length; i < l; ++i) {
      this.clients[i].terminate();
    }
  }
  catch (e) {
    error = e;
  }

  // remove path descriptor, if any
  if (this.path && this._server._webSocketPaths) {
    delete this._server._webSocketPaths[this.path];
    if (Object.keys(this._server._webSocketPaths).length == 0) {
      delete this._server._webSocketPaths;
    }
  }

  // close the http server if it was internally created
  try {
    if (typeof this._closeServer !== 'undefined') {
      this._closeServer();
    }
  }
  finally {
    delete this._server;
  }
  if(callback)
    callback(error);
  else if(error)
    throw error;
}

/**
 * Handle a HTTP Upgrade request.
 *
 * @api public
 */

WebSocketServer.prototype.handleUpgrade = function(req, socket, upgradeHead, cb) {
  // check for wrong path
  if (this.options.path) {
    var u = url.parse(req.url);
    if (u && u.pathname !== this.options.path) return;
  }

  if (typeof req.headers.upgrade === 'undefined' || req.headers.upgrade.toLowerCase() !== 'websocket') {
    abortConnection(socket, 400, 'Bad Request');
    return;
  }

  if (req.headers['sec-websocket-key1']) handleHixieUpgrade.apply(this, arguments);
  else handleHybiUpgrade.apply(this, arguments);
}

module.exports = WebSocketServer;

/**
 * Entirely private apis,
 * which may or may not be bound to a sepcific WebSocket instance.
 */

function handleHybiUpgrade(req, socket, upgradeHead, cb) {
  // handle premature socket errors
  var errorHandler = function() {
    try { socket.destroy(); } catch (e) {}
  }
  socket.on('error', errorHandler);

  // verify key presence
  if (!req.headers['sec-websocket-key']) {
    abortConnection(socket, 400, 'Bad Request');
    return;
  }

  // verify version
  var version = parseInt(req.headers['sec-websocket-version']);
  if ([8, 13].indexOf(version) === -1) {
    abortConnection(socket, 400, 'Bad Request');
    return;
  }

  // verify protocol
  var protocols = req.headers['sec-websocket-protocol'];

  // verify client
  var origin = version < 13 ?
    req.headers['sec-websocket-origin'] :
    req.headers['origin'];

  // handle extensions offer
  var extensionsOffer = Extensions.parse(req.headers['sec-websocket-extensions']);

  // handler to call when the connection sequence completes
  var self = this;
  var completeHybiUpgrade2 = function(protocol) {

    // calc key
    var key = req.headers['sec-websocket-key'];
    var shasum = crypto.createHash('sha1');
    shasum.update(key + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
    key = shasum.digest('base64');

    var headers = [
        'HTTP/1.1 101 Switching Protocols'
      , 'Upgrade: websocket'
      , 'Connection: Upgrade'
      , 'Sec-WebSocket-Accept: ' + key
    ];

    if (typeof protocol != 'undefined') {
      headers.push('Sec-WebSocket-Protocol: ' + protocol);
    }

    var extensions = {};
    try {
      extensions = acceptExtensions.call(self, extensionsOffer);
    } catch (err) {
      abortConnection(socket, 400, 'Bad Request');
      return;
    }

    if (Object.keys(extensions).length) {
      var serverExtensions = {};
      Object.keys(extensions).forEach(function(token) {
        serverExtensions[token] = [extensions[token].params]
      });
      headers.push('Sec-WebSocket-Extensions: ' + Extensions.format(serverExtensions));
    }

    // allows external modification/inspection of handshake headers
    self.emit('headers', headers);

    socket.setTimeout(0);
    socket.setNoDelay(true);
    try {
      socket.write(headers.concat('', '').join('\r\n'));
    }
    catch (e) {
      // if the upgrade write fails, shut the connection down hard
      try { socket.destroy(); } catch (e) {}
      return;
    }

    var client = new WebSocket([req, socket, upgradeHead], {
      protocolVersion: version,
      protocol: protocol,
      extensions: extensions
    });

    if (self.options.clientTracking) {
      self.clients.push(client);
      client.on('close', function() {
        var index = self.clients.indexOf(client);
        if (index != -1) {
          self.clients.splice(index, 1);
        }
      });
    }

    // signal upgrade complete
    socket.removeListener('error', errorHandler);
    cb(client);
  }

  // optionally call external protocol selection handler before
  // calling completeHybiUpgrade2
  var completeHybiUpgrade1 = function() {
    // choose from the sub-protocols
    if (typeof self.options.handleProtocols == 'function') {
        var protList = (protocols || "").split(/, */);
        var callbackCalled = false;
        var res = self.options.handleProtocols(protList, function(result, protocol) {
          callbackCalled = true;
          if (!result) abortConnection(socket, 401, 'Unauthorized');
          else completeHybiUpgrade2(protocol);
        });
        if (!callbackCalled) {
            // the handleProtocols handler never called our callback
            abortConnection(socket, 501, 'Could not process protocols');
        }
        return;
    } else {
        if (typeof protocols !== 'undefined') {
            completeHybiUpgrade2(protocols.split(/, */)[0]);
        }
        else {
            completeHybiUpgrade2();
        }
    }
  }

  // optionally call external client verification handler
  if (typeof this.options.verifyClient == 'function') {
    var info = {
      origin: origin,
      secure: typeof req.connection.authorized !== 'undefined' || typeof req.connection.encrypted !== 'undefined',
      req: req
    };
    if (this.options.verifyClient.length == 2) {
      this.options.verifyClient(info, function(result, code, name) {
        if (typeof code === 'undefined') code = 401;
        if (typeof name === 'undefined') name = http.STATUS_CODES[code];

        if (!result) abortConnection(socket, code, name);
        else completeHybiUpgrade1();
      });
      return;
    }
    else if (!this.options.verifyClient(info)) {
      abortConnection(socket, 401, 'Unauthorized');
      return;
    }
  }

  completeHybiUpgrade1();
}

function handleHixieUpgrade(req, socket, upgradeHead, cb) {
  // handle premature socket errors
  var errorHandler = function() {
    try { socket.destroy(); } catch (e) {}
  }
  socket.on('error', errorHandler);

  // bail if options prevent hixie
  if (this.options.disableHixie) {
    abortConnection(socket, 401, 'Hixie support disabled');
    return;
  }

  // verify key presence
  if (!req.headers['sec-websocket-key2']) {
    abortConnection(socket, 400, 'Bad Request');
    return;
  }

  var origin = req.headers['origin']
    , self = this;

  // setup handshake completion to run after client has been verified
  var onClientVerified = function() {
    var wshost;
    if (!req.headers['x-forwarded-host'])
        wshost = req.headers.host;
    else
        wshost = req.headers['x-forwarded-host'];
    var location = ((req.headers['x-forwarded-proto'] === 'https' || socket.encrypted) ? 'wss' : 'ws') + '://' + wshost + req.url
      , protocol = req.headers['sec-websocket-protocol'];

    // handshake completion code to run once nonce has been successfully retrieved
    var completeHandshake = function(nonce, rest) {
      // calculate key
      var k1 = req.headers['sec-websocket-key1']
        , k2 = req.headers['sec-websocket-key2']
        , md5 = crypto.createHash('md5');

      [k1, k2].forEach(function (k) {
        var n = parseInt(k.replace(/[^\d]/g, ''))
          , spaces = k.replace(/[^ ]/g, '').length;
        if (spaces === 0 || n % spaces !== 0){
          abortConnection(socket, 400, 'Bad Request');
          return;
        }
        n /= spaces;
        md5.update(String.fromCharCode(
          n >> 24 & 0xFF,
          n >> 16 & 0xFF,
          n >> 8  & 0xFF,
          n       & 0xFF));
      });
      md5.update(nonce.toString('binary'));

      var headers = [
          'HTTP/1.1 101 Switching Protocols'
        , 'Upgrade: WebSocket'
        , 'Connection: Upgrade'
        , 'Sec-WebSocket-Location: ' + location
      ];
      if (typeof protocol != 'undefined') headers.push('Sec-WebSocket-Protocol: ' + protocol);
      if (typeof origin != 'undefined') headers.push('Sec-WebSocket-Origin: ' + origin);

      socket.setTimeout(0);
      socket.setNoDelay(true);
      try {
        // merge header and hash buffer
        var headerBuffer = new Buffer(headers.concat('', '').join('\r\n'));
        var hashBuffer = new Buffer(md5.digest('binary'), 'binary');
        var handshakeBuffer = new Buffer(headerBuffer.length + hashBuffer.length);
        headerBuffer.copy(handshakeBuffer, 0);
        hashBuffer.copy(handshakeBuffer, headerBuffer.length);

        // do a single write, which - upon success - causes a new client websocket to be setup
        socket.write(handshakeBuffer, 'binary', function(err) {
          if (err) return; // do not create client if an error happens
          var client = new WebSocket([req, socket, rest], {
            protocolVersion: 'hixie-76',
            protocol: protocol
          });
          if (self.options.clientTracking) {
            self.clients.push(client);
            client.on('close', function() {
              var index = self.clients.indexOf(client);
              if (index != -1) {
                self.clients.splice(index, 1);
              }
            });
          }

          // signal upgrade complete
          socket.removeListener('error', errorHandler);
          cb(client);
        });
      }
      catch (e) {
        try { socket.destroy(); } catch (e) {}
        return;
      }
    }

    // retrieve nonce
    var nonceLength = 8;
    if (upgradeHead && upgradeHead.length >= nonceLength) {
      var nonce = upgradeHead.slice(0, nonceLength);
      var rest = upgradeHead.length > nonceLength ? upgradeHead.slice(nonceLength) : null;
      completeHandshake.call(self, nonce, rest);
    }
    else {
      // nonce not present in upgradeHead, so we must wait for enough data
      // data to arrive before continuing
      var nonce = new Buffer(nonceLength);
      upgradeHead.copy(nonce, 0);
      var received = upgradeHead.length;
      var rest = null;
      var handler = function (data) {
        var toRead = Math.min(data.length, nonceLength - received);
        if (toRead === 0) return;
        data.copy(nonce, received, 0, toRead);
        received += toRead;
        if (received == nonceLength) {
          socket.removeListener('data', handler);
          if (toRead < data.length) rest = data.slice(toRead);
          completeHandshake.call(self, nonce, rest);
        }
      }
      socket.on('data', handler);
    }
  }

  // verify client
  if (typeof this.options.verifyClient == 'function') {
    var info = {
      origin: origin,
      secure: typeof req.connection.authorized !== 'undefined' || typeof req.connection.encrypted !== 'undefined',
      req: req
    };
    if (this.options.verifyClient.length == 2) {
      var self = this;
      this.options.verifyClient(info, function(result, code, name) {
        if (typeof code === 'undefined') code = 401;
        if (typeof name === 'undefined') name = http.STATUS_CODES[code];

        if (!result) abortConnection(socket, code, name);
        else onClientVerified.apply(self);
      });
      return;
    }
    else if (!this.options.verifyClient(info)) {
      abortConnection(socket, 401, 'Unauthorized');
      return;
    }
  }

  // no client verification required
  onClientVerified();
}

function acceptExtensions(offer) {
  var extensions = {};
  var options = this.options.perMessageDeflate;
  if (options && offer[PerMessageDeflate.extensionName]) {
    var perMessageDeflate = new PerMessageDeflate(options !== true ? options : {}, true);
    perMessageDeflate.accept(offer[PerMessageDeflate.extensionName]);
    extensions[PerMessageDeflate.extensionName] = perMessageDeflate;
  }
  return extensions;
}

function abortConnection(socket, code, name) {
  try {
    var response = [
      'HTTP/1.1 ' + code + ' ' + name,
      'Content-type: text/html'
    ];
    socket.write(response.concat('', '').join('\r\n'));
  }
  catch (e) { /* ignore errors - we've aborted this connection */ }
  finally {
    // ensure that an early aborted connection is shut down completely
    try { socket.destroy(); } catch (e) {}
  }
}

},{"./Extensions":26,"./PerMessageDeflate":27,"./WebSocket":34,"crypto":undefined,"events":undefined,"http":undefined,"options":19,"tls":undefined,"url":undefined,"util":undefined}],36:[function(require,module,exports){
/**
 * @author qiao / https://github.com/qiao
 * @author mrdoob / http://mrdoob.com
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @contributor d3x0r / http://github.com/d3x0r  - add enable/disable to allow disconnecting these events
 */

THREE.OrbitControls = function ( object, clusterLookAt, domElement ) {
	// mode 1, is limited
	this.mode = 2;
	this.object = object;
	this.cluster = clusterLookAt;
	this.domElement = ( domElement !== undefined ) ? domElement : document;

	// API

	this.enabled = true;

	this.center = new THREE.Vector3();

	this.userZoom = true;
	this.userZoomSpeed = 0.10;

	this.userRotate = true;
	this.userRotateSpeed = 1.0;

	this.userPan = true;
	this.userPanSpeed = 2.0;

	this.autoRotate = false;
	this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60

	this.minPolarAngle = 0; // radians
	this.maxPolarAngle = Math.PI; // radians

	this.minDistance = 0;
	this.maxDistance = Infinity;

	// 65 /*A*/, 83 /*S*/, 68 /*D*/
	this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40, ROTATE: 65, ZOOM: 83, PAN: 68 };

	// internals

	var scope = this;

	var EPS = 0.000001;
	var PIXELS_PER_ROUND = 1800;

	var rotateStart = new THREE.Vector2();
	var rotateEnd = new THREE.Vector2();
	var rotateDelta = new THREE.Vector2();

	var zoomStart = new THREE.Vector2();
	var zoomEnd = new THREE.Vector2();
	var zoomDelta = new THREE.Vector2();

	var phiDelta = 0;
	var thetaDelta = 0;
	var scale = 1;

	var lastPosition = new THREE.Vector3();

	var STATE = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2 };
	var state = STATE.NONE;

	// events

	var changeEvent = { type: 'change' };


	this.rotateLeft = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		thetaDelta -= angle;

	};

	this.rotateRight = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		thetaDelta += angle;

	};

	this.rotateUp = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		phiDelta -= angle;

	};

	this.rotateDown = function ( angle ) {

		if ( angle === undefined ) {

			angle = getAutoRotationAngle();

		}

		phiDelta += angle;

	};

	this.zoomIn = function ( zoomScale ) {

		if ( zoomScale === undefined ) {

			zoomScale = getZoomScale();

		}

		scale /= zoomScale;

	};

	this.zoomOut = function ( zoomScale ) {

		if ( zoomScale === undefined ) {

			zoomScale = getZoomScale();

		}

		scale *= zoomScale;

	};

	this.pan = function ( distance ) {

		distance.transformDirection( this.object.matrix );
		distance.multiplyScalar( scope.userPanSpeed );

		this.object.position.add( distance );
		this.center.add( distance );

	};

	this.update = function () {

		var position = this.object.position;
		var offset = position.clone().sub( this.center );

		// angle from z-axis around y-axis

		var theta = Math.atan2( offset.x, offset.z );

		// angle from y-axis

		var phi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );

		if ( this.autoRotate ) {

			this.rotateLeft( getAutoRotationAngle() );

		}

		if( this.mode == 2 ) {
			if( phiDelta || thetaDelta ) {
				this.object.matrix.rotateRelative( -phiDelta, thetaDelta, 0 );
				this.object.matrix.rotateRelative( 0, 0, -this.object.matrix.roll )
				var tmp = this.center.clone().addScaledVector( this.object.matrix.backward, offset.length() *(scale) );
				this.object.matrix.origin.copy( tmp );
				this.object.matrixWorldNeedsUpdate = true;
			}
		} else {
			theta += thetaDelta;
			phi += phiDelta;

			// restrict phi to be between desired limits
			phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );

			// restrict phi to be betwee EPS and PI-EPS
			phi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );

			var radius = offset.length() * scale;

			// restrict radius to be between desired limits
			radius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );

			offset.x = radius * Math.sin( phi ) * Math.sin( theta );
			offset.y = radius * Math.cos( phi );
			offset.z = radius * Math.sin( phi ) * Math.cos( theta );

			position.copy( this.center ).add( offset );

	        //console.log( "update lookAt?", thetaDelta, phiDelta)

			this.object.lookAt( this.center );

	        this.object.matrixWorldNeedsUpdate = true;
		}
		thetaDelta = 0;
		phiDelta = 0;
		scale = 1;

		if ( lastPosition.distanceTo( this.object.position ) > 0 ) {

			this.dispatchEvent( changeEvent );

			lastPosition.copy( this.object.position );

		}

	};


	function getAutoRotationAngle() {

		return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;

	}

	function getZoomScale() {

		return Math.pow( 0.95, scope.userZoomSpeed );

	}

	function onMouseDown( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userRotate === false ) return;

		event.preventDefault();

		if ( state === STATE.NONE )
		{
			if ( event.button === 0 )
				state = STATE.ROTATE;
			if ( event.button === 1 )
				state = STATE.ZOOM;
			if ( event.button === 2 )
				state = STATE.PAN;
		}


		if ( state === STATE.ROTATE ) {

			//state = STATE.ROTATE;

			rotateStart.set( event.clientX, event.clientY );

		} else if ( state === STATE.ZOOM ) {

			//state = STATE.ZOOM;

			zoomStart.set( event.clientX, event.clientY );

		} else if ( state === STATE.PAN ) {

			//state = STATE.PAN;

		}

		document.addEventListener( 'mousemove', onMouseMove, false );
		document.addEventListener( 'mouseup', onMouseUp, false );

	}

	function onMouseMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();



		if ( state === STATE.ROTATE ) {

			rotateEnd.set( event.clientX, event.clientY );
			rotateDelta.subVectors( rotateEnd, rotateStart );

			scope.rotateLeft( 2 * Math.PI * rotateDelta.x / PIXELS_PER_ROUND * scope.userRotateSpeed );
			scope.rotateUp( 2 * Math.PI * rotateDelta.y / PIXELS_PER_ROUND * scope.userRotateSpeed );

			rotateStart.copy( rotateEnd );

		} else if ( state === STATE.ZOOM ) {

			zoomEnd.set( event.clientX, event.clientY );
			zoomDelta.subVectors( zoomEnd, zoomStart );

			if ( zoomDelta.y > 0 ) {

				scope.zoomIn();

			} else {

				scope.zoomOut();

			}

			zoomStart.copy( zoomEnd );

		} else if ( state === STATE.PAN ) {

			var movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;
			var movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;

			scope.pan( new THREE.Vector3( - movementX, movementY, 0 ) );

		}

	}

	function onMouseUp( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userRotate === false ) return;

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );

		state = STATE.NONE;

	}

	function onMouseWheel( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userZoom === false ) return;

		var delta = 0;

		if ( event.wheelDelta ) { // WebKit / Opera / Explorer 9

			delta = event.wheelDelta;

		} else if ( event.detail ) { // Firefox

			delta = - event.detail;

		}

		if ( delta > 0 ) {

			scope.zoomOut();

		} else {

			scope.zoomIn();

		}

	}

	function onKeyDown( event ) {

		if ( scope.enabled === false ) return;
		if ( scope.userPan === false ) return;

		switch ( event.keyCode ) {

			/*case scope.keys.UP:
				scope.pan( new THREE.Vector3( 0, 1, 0 ) );
				break;
			case scope.keys.BOTTOM:
				scope.pan( new THREE.Vector3( 0, - 1, 0 ) );
				break;
			case scope.keys.LEFT:
				scope.pan( new THREE.Vector3( - 1, 0, 0 ) );
				break;
			case scope.keys.RIGHT:
				scope.pan( new THREE.Vector3( 1, 0, 0 ) );
				break;
			*/
			case scope.keys.ROTATE:
				state = STATE.ROTATE;
				break;
			case scope.keys.ZOOM:
				state = STATE.ZOOM;
				break;
			case scope.keys.PAN:
				state = STATE.PAN;
				break;

		}

	}

	function onKeyUp( event ) {

		switch ( event.keyCode ) {

			case scope.keys.ROTATE:
			case scope.keys.ZOOM:
			case scope.keys.PAN:
				state = STATE.NONE;
				break;
		}

	}

	var ongoingTouches = [];

	function copyTouch(touch) {
	  return { identifier: touch.identifier, pageX: touch.pageX, pageY: touch.pageY };
	}
	function ongoingTouchIndexById(idToFind) {
	  for (var i = 0; i < ongoingTouches.length; i++) {
	    var id = ongoingTouches[i].identifier;

	    if (id == idToFind) {
	      return i;
	    }
	  }
	  return -1;    // not found
	}
	function onTouchDown(event) {
	  event.preventDefault();
	  var touches = event.changedTouches;
	  for( var i = 0; i < touches.length; i++ ) {

			if ( scope.enabled === false ) return;
			if ( scope.userRotate === false ) return;

			event.preventDefault();

			if ( state === STATE.NONE )
			{
				if ( event.button === 0 )
					state = STATE.ROTATE;
				if ( event.button === 1 )
					state = STATE.ZOOM;
				if ( event.button === 2 )
					state = STATE.PAN;
			}


			if ( state === STATE.ROTATE ) {
				rotateStart.set( touches[0].pageX, touches[0].pageY );
			} else if ( state === STATE.ZOOM ) {
				//state = STATE.ZOOM;
				zoomStart.set( touches[0].pageX, touches[0].pageY );
			} else if ( state === STATE.PAN ) {
				//state = STATE.PAN;
			}


	    console.log( `touch ${i}=${touches[i]}`);
	    ongoingTouches.push( copyTouch( touches[i] ) );

	  }
	}

	function onTouchUp(event) {
	  event.preventDefault();
		var touches = event.changedTouches;
	  for( var i = 0; i < touches.length; i++ ) {
	    var idx = ongoingTouchIndexById(touches[i].identifier);
	    if( idx >= 0 ) {
				ongoingTouches.splice(idx, 1);  // remove it; we're done
			}
		}
	}

	function onTouchMove(event) {
	  event.preventDefault();
	  var touches = event.changedTouches;
	  for( var i = 0; i < touches.length; i++ ) {
	    var idx = ongoingTouchIndexById(touches[i].identifier);
			console.log( `got touch ${idx}` );
	    if( idx >= 0 ) {

				if ( scope.enabled === false ) return;

				if ( state === STATE.ROTATE ) {

					rotateEnd.set( touches[i].pageX, touches[i].pageY );
					rotateDelta.subVectors( rotateEnd, rotateStart );

					scope.rotateLeft( 2 * Math.PI * rotateDelta.x / PIXELS_PER_ROUND * scope.userRotateSpeed );
					scope.rotateUp( 2 * Math.PI * rotateDelta.y / PIXELS_PER_ROUND * scope.userRotateSpeed );

					rotateStart.copy( rotateEnd );

				} else if ( state === STATE.ZOOM ) {

					zoomEnd.set( event.clientX, event.clientY );
					zoomDelta.subVectors( zoomEnd, zoomStart );

					if ( zoomDelta.y > 0 ) {

						scope.zoomIn();

					} else {

						scope.zoomOut();

					}

					zoomStart.copy( zoomEnd );

				} else if ( state === STATE.PAN ) {

					var movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;
					var movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;

					scope.pan( new THREE.Vector3( - movementX, movementY, 0 ) );

				}



				ongoingTouches[idx].pageX = touches[i].pageX;
				ongoingTouches[idx].pageY = touches[i].pageY;
	      //ongoingTouches.splice( idx, 1, copyTouch( touches[i] ) );
	    }
	  }
	}

	function onTouchCancel(event) {
	  event.preventDefault();
		  console.log("touchcancel.");
		  var touches = event.changedTouches;

		  for (var i = 0; i < touches.length; i++) {
				var idx = ongoingTouchIndexById(touches[i].identifier);
		    if( idx >= 0 ) {
		    	ongoingTouches.splice(i, 1);  // remove it; we're done
				}
		  }
		}




    function ignore(event) {
        event.preventDefault();
    }
    this.disable = function() {
    	scope.domElement.removeEventListener( 'contextmenu', ignore, false );
			scope.domElement.removeEventListener( 'touchstart', onTouchDown, false );
	    scope.domElement.removeEventListener( 'touchend', onTouchUp, false );
	    scope.domElement.removeEventListener( 'touchcancel', onTouchCancel, false );
	    scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );
    	scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );
    	scope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );
    	scope.domElement.removeEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    	window.removeEventListener( 'keydown', onKeyDown, false );
    	window.removeEventListener( 'keyup', onKeyUp, false );
    }

    this.enable = function() {
    	scope.domElement.addEventListener( 'contextmenu', ignore, false );
			scope.domElement.addEventListener( 'touchstart', onTouchDown, false );
	    scope.domElement.addEventListener( 'touchend', onTouchUp, false );
	    scope.domElement.addEventListener( 'touchcancel', onTouchCancel, false );
	    scope.domElement.addEventListener( 'touchmove', onTouchMove, false );
    	scope.domElement.addEventListener( 'mousedown', onMouseDown, false );
    	scope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );
    	scope.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
    	window.addEventListener( 'keydown', onKeyDown, false );
    	window.addEventListener( 'keyup', onKeyUp, false );
			Voxelarium.camera.matrixAutoUpdate = false;
    }
    this.enable();

};

THREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );

},{}],37:[function(require,module,exports){


var bit_masks = [];
for( var mask = 0, n = 0; n <= 32; n++ )
{
    bit_masks[n] = mask;
    mask = ( mask << 1 ) | 1;
}


Voxelarium.BitStream = function( base_buffer )
{
    var stream =
	{
		storage : base_buffer || new ArrayBuffer(512 /*available*/),
		available : ( base_buffer && base_buffer.byteLength ) || 512,
        used : 0,
		used_bits : 0,

		getBytes : function(  ) {
			return { data : stream.storage, bytes_used : stream.used + 1 };
		},

		expand : function()
		{
			var new_size = stream.available * 2;
			var new_storage = new ArrayBuffer(new_size);
            for( var n = 0; n < stream.available; n++ )
                new_storage[n] = stream.storage[n];
			stream.storage = new_storage;
			stream.available = new_size;

		},

		seek : function( position )
		{
			if( (position >> 3) >= stream.available )
				throw new Error( "attempt to seek beyond end of data" );

			stream.used = position >> 3;
			stream.used_bits = position & 0x7;
		},

		write : function( value, bits )
		{
			if( bits > 64 )
				throw new Error( "Attempt to write more bits than data passed" );
			var tmp;
			if( stream.used == stream.available ) Expand();
			tmp = stream.storage[stream.used] || 0;
			tmp |= (value << stream.used_bits)&0xFF;
			stream.storage[stream.used] = tmp;
			var bit_counter = 8 - stream.used_bits;
			stream.used_bits += bits;
			while( stream.used_bits >= 8 )
			{
				stream.used_bits -= 8;
				stream.used++;
				if( stream.used == stream.available ) stream.expand();
				if( stream.used_bits > 0 )
				{
					tmp = 0;
					stream.storage[stream.used] = ( value >> ( bit_counter ) ) & 0xFF;
				}
			}
		},


		read : function( bits )
		{
			if( bits > 64 )
				throw new error( "Attempt to read more bits than data passed" );
			var tmp;
			//if( stream.used == stream.available )
			//	throw new Error( "No more data" );
			tmp = stream.storage[stream.used];
			var result = ( tmp >> stream.used_bits );
			var bit_counter = 8 - stream.used_bits;
			stream.used_bits += bits;
			while( stream.used_bits >= 8 )
			{
				stream.used_bits -= 8;
				stream.used++;
				if( stream.used_bits > 0 )
				{
					tmp = stream.storage[stream.used];
					result |= ( tmp << ( bit_counter ) ) & 0xFF;
					stream.bit_counter += 8;
				}
			}
			result &= bit_masks[bits];
            return result;
		}
	}
    return stream;
}



Voxelarium.BitStream.GetMinBitsNeededForValue = function( value )
{
    var n;
   for( n = 1; n <= 32; n++ ) {
       if( ( ( value & bit_masks[n] ) ^ value ) == 0 )
            break;
   }
   return n;
}

},{}],38:[function(require,module,exports){

require( "./constants.js");
require( "./reactor.js" );

Voxelarium.Cluster = function( x, y, z, props ) {
    var cluster = {
        mesher : null,
        WorkingFullSector : null,
        WorkingEmptySector: null,

        SectorList : [],

        sectorSizeX : x || 32,
        sectorSizeY : y || 32,
        sectorSizeZ : z || 32,
        sectorSize : 0, // filled in later

        voxelUnitSize : props && props.unitSize || 20,

        sectorHashSize_x : 8,
        sectorHashSize_y : 8,
        sectorHashSize_z : 8,
        TableSize : 0,//SectorHashSize_x * SectorHashSize_y * SectorHashSize_z,
        SectorTable : new Array( 8*8*8 ),

        pivot : new THREE.Vector3(),
        location : new THREE.Matrix4(),
        UniverseNum : 0,
        lookupTables : null
        ,createSector : function( x, y, z ) {
            var sector = Voxelarium.Sector( this, x, y, z );
            this.SectorList.push( sector );

            var hashOfs;
            sector.next = this.SectorTable[ hashOfs = ( x % this.sectorHashSize_x
                                + ( y % this.sectorHashSize_y ) * ( this.sectorHashSize_x )
                                + ( z % this.sectorHashSize_z ) * (this.sectorHashSize_y*this.sectorHashSize_x) ) ];
            if( sector.next )
                sector.next.pred = sector;
            this.SectorTable[hashOfs] = sector;

			var n;
			for( n = 0; n < 6; n++ )
			{
				var near_sec = this.getSector( x + Voxelarium.NormalBasePosition[n].x
												  , y + Voxelarium.NormalBasePosition[n].y
												  , z + Voxelarium.NormalBasePosition[n].z
                                                  , true );
				if( near_sec != null )
				{
					sector.near_sectors[n] = near_sec;
					near_sec.near_sectors[n ^ 1] = sector;
				}
			}
            return sector;
        }

        ,getVoxelRef : function( is3dSpaceCoords, x, y, z ) {
            if( is3dSpaceCoords ) {
              x = Math.floor( x / this.voxelUnitSize );
              y = Math.floor( y / this.voxelUnitSize );
              z = Math.floor( z / this.voxelUnitSize );
            }
            var sx = Math.floor( x / this.sectorSizeX );
            var sy = Math.floor( y / this.sectorSizeY );
            var sz = Math.floor( z / this.sectorSizeZ );
            //if( !is3dSpaceCoords) {
              //console.log( `Get ${sx} ${sy} ${sz}`)
            //}
            var sector = cluster.getSector( sx, sy, sz, true );
            if( sector ) {
                return sector.getVoxelRef( x % this.sectorSizeX, y % this.sectorSizeY, z % this.sectorSizeZ);
            } else {
                // pass world coordinates, since there's no sector to give a base position
                return Voxelarium.VoxelRef( cluster, null, x, y, z );
            }
            return null;
        }
        , setCube : function( x, y, z, cube ){
            var sx = x / this.sectorSizeX;
            var sy = y / this.sectorSizeY;
            var sz = z / this.sectorSizeZ;
            var subx = ( sx % 1 ) * this.sectorSizeX;
            var suby = ( sy % 1 ) * this.sectorSizeY;
            var subz = ( sz % 1 ) * this.sectorSizeZ;
            var wx = Math.floor( sx );
            var wy = Math.floor( sy );
            var wz = Math.floor( sz );
            var sector = this.getSector( wx, wy, wz );

            sector.setCube( subx, suby, subz, cube );
        }
        , getSector : function( x, y, z, do_not_create ) {
            var base;
            base = this.SectorTable[ x % this.sectorHashSize_x
                                + ( y % this.sectorHashSize_y ) * ( this.sectorHashSize_x )
                                + ( z % this.sectorHashSize_z ) * ( this.sectorHashSize_y*this.sectorHashSize_x) ];
            while( base
                && ( ( base.pos.x !== x )
                    || ( base.pos.y !== y )
                    || ( base.pos.z !== z ) ) )
                base = base.next;
            if( !do_not_create )
                if( !base )
                    base = this.createSector( x, y, z )
            return base;
        }
        , getGeometryBuffer : null
    }

    cluster.TableSize = cluster.sectorHashSize_x * cluster.sectorHashSize_y * cluster.sectorHashSize_z;
    cluster.sectorSize = cluster.sectorSizeX * cluster.sectorSizeY * cluster.sectorSizeZ;
    cluster.lookupTables = InitStatics( cluster.sectorSizeX, cluster.sectorSizeY, cluster.sectorSizeZ )

    cluster.SectorTable = new Array( cluster.TableSize );
    // maybe reactor is universal?
    cluster.reactor = Voxelarium.Reactor( cluster );

    Object.defineProperties( cluster
        , { 'sectorSizeX' : {writeable:false}
            , 'sectorSizeY' : {writeable:false}
            , 'sectorSizeZ' : {writeable:false}
            , 'sectorSize' : {writeable:false}
            , 'sectorHashSize_x' : {writeable:false}
            , 'sectorHashSize_y' : {writeable:false}
            , 'sectorHashSize_z' : {writeable:false}
            , 'TableSize' : {writeable:false}
            , 'voxelUnitSize' : {writeable:false}
            , 'lookupTables' : {writeable:false}
            , 'SectorTable' : {writeable:false}
            , 'reactor' : {writeable:false}
        } )


    cluster.WorkingFullSector = Voxelarium.Sector( cluster );
    cluster.WorkingFullSector.Pos_y = -1;
    cluster.WorkingFullSector.MakeSector( Voxelarium.Voxels.types[1] );
    cluster.WorkingEmptySector= Voxelarium.Sector( cluster );
    cluster.WorkingEmptySector.Pos_y = 0;
    cluster.WorkingEmptySector.MakeSector( Voxelarium.Voxels.types[0] );


    return cluster;
}

var SectorTables = []; // cache of lookup tables
function InitStatics( x,y,z)
		{
			var tables = SectorTables.find( (tab)=>{ return( tab.x==x && tab.y==y && tab.z == z ) });
			if( !tables )
			{
				tables = {
					x: x,
					y: y,
					z: z,
					tableX : new Array( x+2 ),
					tableY : new Array( y+2 ),
					tableZ : new Array( z+2 ),
					ofTableX : new Array( x+2 ),
					ofTableY : new Array( y+2 ),
					ofTableZ : new Array( z+2 )
				}
				//tables.tableX.forEach( (elem)=>{elem=0})
				//console.log( "tableX init is ", tables.tableX)
				tables.tableX[0] = 1;
				tables.tableX[x + 1] = 2;
				tables.tableZ[0] = 3;
				tables.tableZ[y + 1] = 6;
				tables.tableY[0] = 9;
				tables.tableY[z + 1] = 18;
                n = 0;
                tables.ofTableX[n] = ( ( ( n == 0 ) ? ( x - 1 ) : ( n == ( x + 1 ) ) ? 0 : ( n - 1 ) ) * y );
                tables.ofTableY[n] = ( ( ( n == 0 ) ? ( y - 1 ) : ( n == ( y + 1 ) ) ? 0 : ( n - 1 ) ) );
                tables.ofTableZ[n] = ( ( ( n == 0 ) ? ( z - 1 ) : ( n == ( z + 1 ) ) ? 0 : ( n - 1 ) ) * y * z );
                n = x+1;
                tables.ofTableX[n] = ( ( ( n == 0 ) ? ( x - 1 ) : ( n == ( x + 1 ) ) ? 0 : ( n - 1 ) ) * y );
                tables.ofTableY[n] = ( ( ( n == 0 ) ? ( y - 1 ) : ( n == ( y + 1 ) ) ? 0 : ( n - 1 ) ) );
                tables.ofTableZ[n] = ( ( ( n == 0 ) ? ( z - 1 ) : ( n == ( z + 1 ) ) ? 0 : ( n - 1 ) ) * y * z );
        for(  n = 1; n < x + 1; n++ ) {
					tables.ofTableX[n] = ( ( ( n == 0 ) ? ( x - 1 ) : ( n == ( x + 1 ) ) ? 0 : ( n - 1 ) ) * y );
                    tables.tableX[n] = 0;
        }
				for( var n = 1; n < y + 1; n++ ){
					tables.ofTableY[n] = ( ( ( n == 0 ) ? ( y - 1 ) : ( n == ( y + 1 ) ) ? 0 : ( n - 1 ) ) );
                    tables.tableY[n] = 0;
        }
				for(  n = 1; n < z + 1; n++ ) {
					tables.ofTableZ[n] = ( ( ( n == 0 ) ? ( z - 1 ) : ( n == ( z + 1 ) ) ? 0 : ( n - 1 ) ) * y * z );
          tables.tableZ[n] = 0;
        }
				SectorTables.push( tables );
			}
            Object.defineProperties( tables
                , { "x" : { writable:false}
                ,  "y" : { writable:false}
                ,  "z" : { writable:false}
                ,  "tableX" : { writable:false}
                ,  "tableY" : { writable:false}
                ,  "tableZ" : { writable:false}
                ,  "ofTableX" : { writable:false}
                ,  "ofTableY" : { writable:false}
                ,  "ofTableZ" : { writable:false}
            });
            Object.freeze( tables.tableX );
            Object.freeze( tables.tableY );
            Object.freeze( tables.tableZ );
            Object.freeze( tables.ofTableX );
            Object.freeze( tables.ofTableY );
            Object.freeze( tables.ofTableZ );
			return tables;
		}

},{"./constants.js":39,"./reactor.js":49}],39:[function(require,module,exports){

Voxelarium.D = function( valname, value ) {
    if( typeof valname == "object" ) {
        Object.keys(valname).forEach( (key)=>{
            Object.defineProperty(Voxelarium, key, { value:valname[key], writable: false })
        })
    } else
        Object.defineProperty(Voxelarium, valname, { writable: false })
}
Voxelarium.Enum = function( valname, value ) {
    if( typeof valname == "object" ) {
        Object.keys(valname).forEach( (key)=>{
            Object.defineProperty(Voxelarium, key, { value:valname[key], writable: false })
            Object.keys(valname[key]).forEach( (evalue)=>{
                Object.defineProperty(Voxelarium[key], evalue, { value:valname[key][evalue], writable: false })

            })
        })
    } else
        Object.defineProperty(Voxelarium, valname, { writable: false })
}


Voxelarium.D( {
        ZVOXEL_DRAWINFO_VOID : 0,
//public const int ZVOXEL_DRAWINFO_NOTVOID = 1;
    ZVOXEL_DRAWINFO_DRAWFULLVOXELOPACITY : 1,
  ZVOXEL_DRAWINFO_DRAWTRANSPARENTRENDERING : 2,
  ZVOXEL_DRAWINFO_SPECIALRENDERING : 8,
  ZVOXEL_DRAWINFO_SHADER : 16,
  ZVOXEL_DRAWINFO_DECAL : 32,  // image is used over shader output
})
Voxelarium.D( {
    ZVOXEL_DRAWINFO_CULLINGBITS : ( /*ZVOXEL_DRAWINFO_NOTVOID |*/ Voxelarium.ZVOXEL_DRAWINFO_DRAWFULLVOXELOPACITY | Voxelarium.ZVOXEL_DRAWINFO_DRAWTRANSPARENTRENDERING )
});


Voxelarium.Enum( {
    FACEDRAW_Operations : {
			LEFT : 0x00001
		, RIGHT : 0x00002
		, AHEAD : 0x00004
		, BEHIND : 0x00008
		, ABOVE : 0x00010
		, BELOW : 0x00020
		, LEFT_HAS_ABOVE : 0x00000400
		, LEFT_HAS_BELOW : 0x00000800
		, LEFT_HAS_AHEAD : 0x00001000
		, LEFT_HAS_BEHIND : 0x00002000
		, RIGHT_HAS_ABOVE : 0x00004000
		, RIGHT_HAS_BELOW : 0x00008000
		, RIGHT_HAS_AHEAD : 0x00010000
		, RIGHT_HAS_BEHIND : 0x00020000
		, ABOVE_HAS_LEFT : 0x00000400//LEFT_HAS_ABOVE
		, ABOVE_HAS_RIGHT : 0x00004000//RIGHT_HAS_ABOVE
		, ABOVE_HAS_AHEAD : 0x00040000
		, ABOVE_HAS_BEHIND : 0x00080000
		, BELOW_HAS_LEFT : 0x00000800//LEFT_HAS_BELOW
		, BELOW_HAS_RIGHT : 0x00008000//RIGHT_HAS_BELOW
		, BELOW_HAS_AHEAD : 0x00100000
		, BELOW_HAS_BEHIND : 0x00200000
		, AHEAD_HAS_LEFT : 0x00001000//LEFT_HAS_AHEAD
		, AHEAD_HAS_RIGHT : 0x00100000//RIGHT_HAS_AHEAD
		, AHEAD_HAS_ABOVE : 0x00040000//ABOVE_HAS_AHEAD
		, AHEAD_HAS_BELOW : 0x00100000//BELOW_HAS_AHEAD
		, BEHIND_HAS_LEFT : 0x00002000//LEFT_HAS_BEHIND
		, BEHIND_HAS_RIGHT : 0x00020000//RIGHT_HAS_BEHIND
		, BEHIND_HAS_ABOVE : 0x00080000//ABOVE_HAS_BEHIND
		, BEHIND_HAS_BELOW : 0x00200000//BELOW_HAS_BEHIND
		, ALL : ( 1|2|4|8|16|32 /* LEFT | RIGHT | AHEAD | BEHIND | ABOVE | BELOW */ )
		, NONE : 0x00000
		, FLANK : ( 1|2|4|8 /* LEFT | RIGHT | AHEAD | BEHIND */ )
		, UD : ( 16|32 /*ABOVE | BELOW*/ )
		, ALL_BITS : 0x3FFFFF
    }});


Voxelarium.Enum( { RelativeVoxelOrds : {
	INCENTER :0
   , LEFT     :1
   , RIGHT :2
   , INFRONT :3
   , AHEAD : 3 //RelativeVoxelOrds.INFRONT
   , BEHIND  :4
   , ABOVE   :5
   , BELOW   :6

   , LEFT_ABOVE :7
   , ABOVE_LEFT : 7//RelativeVoxelOrds.LEFT_ABOVE
   , RIGHT_ABOVE :8
   , ABOVE_RIGHT : 8//RelativeVoxelOrds.RIGHT_ABOVE

   , INFRONT_ABOVE :9
   , AHEAD_ABOVE : 9// RelativeVoxelOrds.INFRONT_ABOVE
   , ABOVE_AHEAD : 9//RelativeVoxelOrds.INFRONT_ABOVE

   , BEHIND_ABOVE  :10
   , ABOVE_BEHIND : 10//RelativeVoxelOrds.BEHIND_ABOVE

   , LEFT_AHEAD   :11
   , AHEAD_LEFT : 11//RelativeVoxelOrds.LEFT_AHEAD

   , RIGHT_AHEAD   :12
   , AHEAD_RIGHT : 12//RelativeVoxelOrds.RIGHT_AHEAD

   , LEFT_BELOW :13
   , BELOW_LEFT : 13//RelativeVoxelOrds.LEFT_BELOW
   , RIGHT_BELOW :14
   , BELOW_RIGHT : 14//RelativeVoxelOrds.RIGHT_BELOW
   , INFRONT_BELOW :15
   , AHEAD_BELOW : 15//RelativeVoxelOrds.INFRONT_BELOW
   , BELOW_AHEAD : 15//RelativeVoxelOrds.INFRONT_BELOW
   , BEHIND_BELOW  :16
   , BELOW_BEHIND : 16//RelativeVoxelOrds.BEHIND_BELOW

   , LEFT_BEHIND   :17
   , BEHIND_LEFT : 17//RelativeVoxelOrds.LEFT_BEHIND
   , BEHIND_RIGHT   :18
   , RIGHT_BEHIND : 18//RelativeVoxelOrds.BEHIND_RIGHT


   , LEFT_AHEAD_ABOVE   : 19
   , RIGHT_AHEAD_ABOVE  : 20
   , LEFT_AHEAD_BELOW   : 21
   , RIGHT_AHEAD_BELOW  : 22
   , LEFT_BEHIND_ABOVE  : 23
   , RIGHT_BEHIND_ABOVE : 24
   , LEFT_BEHIND_BELOW  : 25
   , RIGHT_BEHIND_BELOW : 26

   , LEFT_ABOVE_AHEAD : 19//RelativeVoxelOrds.LEFT_AHEAD_ABOVE   //: 19
   , RIGHT_ABOVE_AHEAD : 20//RelativeVoxelOrds.RIGHT_AHEAD_ABOVE  // : 20
   , LEFT_BELOW_AHEAD : 21//RelativeVoxelOrds.LEFT_AHEAD_BELOW     //: 21
   , RIGHT_BELOW_AHEAD : 22//RelativeVoxelOrds.RIGHT_AHEAD_BELOW   //: 22
   , LEFT_ABOVE_BEHIND : 23//RelativeVoxelOrds.LEFT_BEHIND_ABOVE  //: 23
   , RIGHT_ABOVE_BEHIND : 24//RelativeVoxelOrds.RIGHT_BEHIND_ABOVE// : 24
   , LEFT_BELOW_BEHIND : 25//RelativeVoxelOrds.LEFT_BEHIND_BELOW  //: 25
   , RIGHT_BELOW_BEHIND : 26//RelativeVoxelOrds.RIGHT_BEHIND_BELOW// : 26

   , ABOVE_AHEAD_LEFT : 19//RelativeVoxelOrds.LEFT_AHEAD_ABOVE   //: 19
   , ABOVE_AHEAD_RIGHT : 20//RelativeVoxelOrds.RIGHT_AHEAD_ABOVE  // : 20
   , BELOW_AHEAD_LEFT : 21//RelativeVoxelOrds.LEFT_AHEAD_BELOW    // : 21
   , BELOW_AHEAD_RIGHT : 22//RelativeVoxelOrds.RIGHT_AHEAD_BELOW  // : 22
   , ABOVE_BEHIND_LEFT : 23//RelativeVoxelOrds.LEFT_BEHIND_ABOVE  //: 23
   , ABOVE_BEHIND_RIGHT : 24//RelativeVoxelOrds.RIGHT_BEHIND_ABOVE //: 24
   , BELOW_BEHIND_LEFT : 25//RelativeVoxelOrds.LEFT_BEHIND_BELOW  //: 25
   , BELOW_BEHIND_RIGHT : 26//RelativeVoxelOrds.RIGHT_BEHIND_BELOW// : 26

   , AHEAD_ABOVE_LEFT : 19//RelativeVoxelOrds.LEFT_AHEAD_ABOVE   //: 19
   , AHEAD_ABOVE_RIGHT : 20//RelativeVoxelOrds.RIGHT_AHEAD_ABOVE //  : 20
   , AHEAD_BELOW_LEFT : 21//RelativeVoxelOrds.LEFT_AHEAD_BELOW   //  : 21
   , BEHIND_ABOVE_LEFT : 22//RelativeVoxelOrds.LEFT_BEHIND_ABOVE // : 23
   , AHEAD_BELOW_RIGHT : 23//RelativeVoxelOrds.RIGHT_AHEAD_BELOW //  : 22
   , BEHIND_ABOVE_RIGHT : 24//RelativeVoxelOrds.RIGHT_BEHIND_ABOVE //: 24
   , BEHIND_BELOW_LEFT : 25//RelativeVoxelOrds.LEFT_BEHIND_BELOW  //: 25
   , BEHIND_BELOW_RIGHT : 26//RelativeVoxelOrds.RIGHT_BEHIND_BELOW //: 26

   , ABOVE_LEFT_AHEAD : 19//RelativeVoxelOrds.LEFT_AHEAD_ABOVE  // : 19
   , ABOVE_RIGHT_AHEAD : 20//RelativeVoxelOrds.RIGHT_AHEAD_ABOVE //  : 20
   , BELOW_LEFT_AHEAD : 21//RelativeVoxelOrds.LEFT_AHEAD_BELOW    // : 21
   , BELOW_RIGHT_AHEAD : 22//RelativeVoxelOrds.RIGHT_AHEAD_BELOW  // : 22
   , ABOVE_LEFT_BEHIND : 23//RelativeVoxelOrds.LEFT_BEHIND_ABOVE  //: 23
   , ABOVE_RIGHT_BEHIND : 24//RelativeVoxelOrds.RIGHT_BEHIND_ABOVE //: 24
   , BELOW_LEFT_BEHIND : 25//RelativeVoxelOrds.LEFT_BEHIND_BELOW  //: 25
   , BELOW_RIGHT_BEHIND : 26//RelativeVoxelOrds.RIGHT_BEHIND_BELOW //: 26

   , AHEAD_LEFT_ABOVE : 19//RelativeVoxelOrds.LEFT_AHEAD_ABOVE  // : 19
   , AHEAD_RIGHT_ABOVE : 20//RelativeVoxelOrds.RIGHT_AHEAD_ABOVE //  : 20
   , AHEAD_LEFT_BELOW : 21//RelativeVoxelOrds.LEFT_AHEAD_BELOW   //  : 21
   , AHEAD_RIGHT_BELOW : 22//RelativeVoxelOrds.RIGHT_AHEAD_BELOW //  : 22
   , BEHIND_LEFT_ABOVE : 23//RelativeVoxelOrds.LEFT_BEHIND_ABOVE // : 23
   , BEHIND_RIGHT_ABOVE : 24//RelativeVoxelOrds.RIGHT_BEHIND_ABOVE //: 24
   , BEHIND_LEFT_BELOW : 25//RelativeVoxelOrds.LEFT_BEHIND_BELOW  //: 25
   , BEHIND_RIGHT_BELOW : 26//RelativeVoxelOrds.RIGHT_BEHIND_BELOW //: 26
}})


const IntFaceStateTable = [
          [ // State 0: Clear = no FullOpaque = no TranspRend = no
            0 , // Clear = 1 FullOpaque = 0 TranspRend = 0
            0 , // Clear = 0 FullOpaque = 1 TranspRend = 0
            0 , // Clear = 0 FullOpaque = 0 TranspRend = 1
            0 , // Clear = 0 FullOpaque = 1 TranspRend = 1
          ] ,
          [ // State 2: Clear = no FullOpaque = yes TranspRend = no
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 1 FullOpaque = 0 TranspRend = 0
            0 , // Clear = 0 FullOpaque = 1 TranspRend = 0
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 0 TranspRend = 1
            0 , // Clear = 0 FullOpaque = 1 TranspRend = 1
            ],
          [ // State 4 : Clear = no FullOpaque = no TranspRend = yes
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 1 FullOpaque = 0 TranspRend = 0
            0  , // Clear = 0 FullOpaque = 1 TranspRend = 0
            0 , // Clear = 0 FullOpaque = 0 TranspRend = 1
            0 , // Clear = 0 FullOpaque = 1 TranspRend = 1
          ],
          null/*new VoxelSector.FACEDRAW_Operations[]{ // State 5: Clear = yes FullOpaque = yes TranspRend = yes
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 1 FullOpaque = 0 TranspRend = 0
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 0
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 0 TranspRend = 1
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 1
          }*/,
      ];

      Voxelarium.IntFaceStateTable = IntFaceStateTable;

const ExtFaceStateTable = [
          [ // State 0: Clear = no FullOpaque = no TranspRend = no
            0 , // Clear = 1 FullOpaque = 0 TranspRend = 0
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 0
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 0 TranspRend = 1
            Voxelarium.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 1
        ],
          [ // State 2: Clear = no FullOpaque = yes TranspRend = no
            0  , // Clear = 0 FullOpaque = 0 TranspRend = 0
            0  , // Clear = 0 FullOpaque = 1 TranspRend = 0
            0  , // Clear = 0 FullOpaque = 0 TranspRend = 1
            0  , // Clear = 1 FullOpaque = 1 TranspRend = 1
        ],
          [ // State 4 : Clear = no FullOpaque = no TranspRend = yes
            0 , // Clear = 1
            Voxelarium.FACEDRAW_Operations.ALL_BITS  , // Clear = 0 FullOpaque = 1 TranspRend = 0
            0  , // FullOpaque = 0 TranspRend = 1
            0  , // FullOpaque = 1 TranspRend = 1
          ],
         null/* new VoxelSector.FACEDRAW_Operations[8]{ // State 7: Clear = yes FullOpaque = yes TranspRend = yes
            0   , // Clear = 1 FullOpaque = 0 TranspRend = 0
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 0
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 0 TranspRend = 1
            VoxelSector.FACEDRAW_Operations.ALL_BITS , // Clear = 0 FullOpaque = 1 TranspRend = 1
          }*/
      ];
      Voxelarium.ExtFaceStateTable = ExtFaceStateTable;

function ZBlocPosN( x, y, z ) {
    this.x = x;
    this.y = y;
    this.z = z;
}

    const NormalBasePosition = Voxelarium.NormalBasePosition = [
          new ZBlocPosN ( -1, 0, 0 )
          , new ZBlocPosN ( 1, 0, 0 )
          , new ZBlocPosN( 0, 0, 1 )
          , new ZBlocPosN( 0, 0, -1 )
          , new ZBlocPosN( 0, 1, 0 )
          , new ZBlocPosN( 0, -1, 0 ) ];


},{}],40:[function(require,module,exports){
var font = {
height:8, baseline:0, chars:65536, flags:64, name:"TI99.js", characters:[null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:1,w:7,ofs:2,asc:7,dsc:1,data:new Uint8Array([1,1,1,1,1,0,1]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:5,data:new Uint8Array([5,5,5]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([10,10,31,10,31,10,10]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,21,5,14,20,21,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([3,19,8,4,2,25,24]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([2,5,5,2,21,9,22]) }
,{sz:2,w:7,ofs:2,asc:7,dsc:5,data:new Uint8Array([2,2,1]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([4,2,1,1,1,2,4]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([1,2,4,4,4,2,1]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:2,data:new Uint8Array([10,4,31,4,10]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:2,data:new Uint8Array([4,4,31,4,4]) }
,{sz:2,w:7,ofs:1,asc:3,dsc:1,data:new Uint8Array([3,2,1]) }
,{sz:5,w:7,ofs:0,asc:4,dsc:4,data:new Uint8Array([31]) }
,{sz:2,w:7,ofs:1,asc:2,dsc:1,data:new Uint8Array([3,3]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:2,data:new Uint8Array([16,8,4,2,1]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,17,17,17,17,14]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([2,3,2,2,2,2,7]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,16,8,4,2,31]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,16,12,16,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([8,12,10,9,31,8,8]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,1,15,16,16,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([12,2,1,15,17,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,16,8,4,2,2,2]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,17,14,17,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,17,30,16,8,6]) }
,{sz:2,w:7,ofs:1,asc:6,dsc:2,data:new Uint8Array([3,3,0,3,3]) }
,{sz:2,w:7,ofs:1,asc:6,dsc:1,data:new Uint8Array([3,3,0,3,2,1]) }
,{sz:4,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([8,4,2,1,2,4,8]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:3,data:new Uint8Array([31,0,31]) }
,{sz:4,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([1,2,4,8,4,2,1]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,16,8,4,0,4]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,29,21,29,1,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,17,31,17,17,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([15,18,18,14,18,18,15]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,1,1,1,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([15,18,18,18,18,18,15]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,1,1,15,1,1,31]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,1,1,15,1,1,1]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,1,29,17,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,17,31,17,17,17]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([7,2,2,2,2,2,7]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([16,16,16,16,16,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,9,5,3,5,9,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([1,1,1,1,1,1,31]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,27,21,21,17,17,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,19,19,21,25,25,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,17,17,17,17,17,31]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([15,17,17,15,1,1,1]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,17,17,21,9,22]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([15,17,17,15,5,9,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([14,17,1,14,16,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,4,4,4,4,4,4]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,17,17,17,17,14]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,17,10,10,4,4]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,17,21,21,21,10]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,10,4,10,17,17]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([17,17,10,4,4,4,4]) }
,{sz:5,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([31,16,8,4,2,1,31]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([7,1,1,1,1,1,7]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:2,data:new Uint8Array([1,2,4,8,16]) }
,{sz:3,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([7,4,4,4,4,4,7]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:4,data:new Uint8Array([4,10,17]) }
,{sz:5,w:7,ofs:0,asc:1,dsc:1,data:new Uint8Array([31]) }
,{sz:3,w:7,ofs:1,asc:6,dsc:4,data:new Uint8Array([1,2,4]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([14,17,31,17,17]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([15,18,14,18,15]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([30,1,1,1,30]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([15,18,18,18,15]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([31,1,15,1,31]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([31,1,15,1,1]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([30,1,29,17,14]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,17,31,17,17]) }
,{sz:3,w:7,ofs:1,asc:5,dsc:1,data:new Uint8Array([7,2,2,2,7]) }
,{sz:4,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([8,8,8,9,6]) }
,{sz:4,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([9,5,3,5,9]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([1,1,1,1,31]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,27,21,17,17]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,19,21,25,17]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([31,17,17,17,31]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([15,17,15,1,1]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([14,17,21,9,22]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([15,17,15,9,17]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([30,1,14,16,15]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([31,4,4,4,4]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,17,17,17,14]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,17,10,10,4]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,17,21,21,10]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,10,4,10,17]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([17,10,4,4,4]) }
,{sz:5,w:7,ofs:0,asc:5,dsc:1,data:new Uint8Array([31,8,4,2,31]) }
,{sz:4,w:7,ofs:0,asc:7,dsc:1,data:new Uint8Array([12,2,2,1,2,2,12]) }
,{sz:1,w:7,ofs:2,asc:7,dsc:1,data:new Uint8Array([1,1,1,0,1,1,1]) }
,{sz:4,w:7,ofs:1,asc:7,dsc:1,data:new Uint8Array([3,4,4,8,4,4,3]) }
,{sz:5,w:7,ofs:0,asc:6,dsc:4,data:new Uint8Array([2,21,8]) }
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,null
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:0,w:7,ofs:0,asc:0,dsc:0}
,{sz:5,w:7,ofs:0,asc:4,dsc:4,data:new Uint8Array([31]) }
] };

Voxelarium.Fonts.TI99 = font;

},{}],41:[function(require,module,exports){

if( Number(THREE.REVISION) >= 76 ) {
	var count_is_getter = false;
  Object.freeze( count_is_getter );
}
else {
	var count_is_getter = true;
  Object.freeze( count_is_getter );
}

const attribs = [ { name:"position",
                    bytes:4,
                    size:3,
                    normalize:false,
                    buftype:Float32Array },
                  { name:"uv",
                    bytes:4,
                    size:2,
                    normalize:false,
                    buftype:Float32Array },
                  { name:"color",
                    bytes:4,
                    size:4,
                    normalize:false,
                    buftype:Float32Array },
                  { name:"normal",
                    bytes:4,
                    size:3,
                    normalize:false,
                    buftype:Float32Array },

//, "in_FaceColor", "in_Modulous"
//, "in_Pow"
//, "in_flat_color", "in_use_texture", "in_decal_texture"
];


Voxelarium.GeometryBasicBuffer = function () {
    var buffer = {};
     buffer.geometry = new THREE.BufferGeometry();

     buffer.geometry.uniforms = {
             edge_only : false,
     	};

    // create a simple square shape. We duplicate the top left and bottom right
    // vertices because each vertex needs to appear once per triangle.
    buffer.position = new Float32Array( [] );
    buffer.uv = new Float32Array( [] );
    buffer.color = new Float32Array( [] );
    buffer.normal = new Float32Array( [] );
    /*
    buffer.in_FaceColor = new Uint8Array( [] );
    buffer.in_Pow = new Uint8Array( [] );
    buffer.in_use_texture = new Uint8Array( [] );
    buffer.in_flat_color = new Uint8Array( [] );
    buffer.in_decal_texture = new Uint8Array( [] );
    buffer.in_Modulous = new Int8Array( [] );
    */
    buffer.available = 0;
    buffer.used = 0;

    buffer.clear = function() {
        this.used = 0;
    }

    attribs.forEach( (att)=>{
      buffer.geometry.addAttribute( att.name, new THREE.BufferAttribute( buffer[att.name], att.size, att.normalize ))
    })


     buffer.expand = function() {
         var newbuf;
         this.available = ( this.available + 1 ) * 2;

          attribs.forEach( (attrib)=>{
            newbuf =   new attrib.buftype( new ArrayBuffer( this.available * ( attrib.bytes * attrib.size ) ) );
            newbuf.set( buffer[attrib.name] );
            buffer[attrib.name] = newbuf;
          })
     };

     buffer.markDirty = function () {
        this.geometry.drawRange.count = this.used;
         attribs.forEach( (attrib)=>{
             var attribu = this.geometry.getAttribute(attrib.name);
             attribu.needsUpdate = true;
						 if( Voxelarium.Settings.AltSpace ) {

             	attribu.array = buffer[attrib.name].subarray( 0, this.used * attrib.size );
						}else
						 	attribu.array = buffer[attrib.name];
						 if( !count_is_getter )
                attribu.count = this.used;
         })
         //console.log( "dirty", this.geometry.attributes );
     }

     buffer.addPoint = function( v, t, tBase, c, fc, n, p, ut, flat, dt, mod ) {
         if( this.used >= this.available )
            this.expand();
            const u2 = this.used * 2;
            const u3 = this.used * 3;
            const u4 = this.used * 4;
        if( t ) {
            this.uv[u2+0] = t[tBase+0];
            this.uv[u2+1] = t[tBase+1];
        }
        else {
            this.uv[u2+0] = 0;
            this.uv[u2+1] = 0;
        }
        this.position[u3 + 0 ] = v.x;
        this.position[u3 + 1 ] = v.y;
        this.position[u3 + 2 ] = v.z;

          this.color[u4 + 0 ] = 1;
          this.color[u4 + 1 ] = 1;
          this.color[u4 + 2 ] = 1;
          this.color[u4 + 3 ] = 1;

        this.normal[u3 + 0] = n?n.x:0;
        this.normal[u3 + 1] = n?n.y:0;
        this.normal[u3 + 2] = n?n.z:1;

        /*
        if( fc ) {
        this.in_FaceColor[u4 + 0 ] = fc.x*255;
        this.in_FaceColor[u4 + 1 ] = fc.y*255;
        this.in_FaceColor[u4 + 2 ] = fc.z*255;
        this.in_FaceColor[u4 + 3 ] = fc.w*255; }

        this.in_Pow[ this.used ] = p;
        this.in_use_texture[ this.used ] = ut;
        this.in_flat_color[this.used] = flat;
        this.in_decal_texture[this.used] = dt;
        this.in_Modulous[this.used * 2 + 0] = mod[0];
        this.in_Modulous[this.used * 2 + 1] = mod[1];
*/
        this.used++;
    };

     //buffer.

     buffer.AddQuad = function( norm, P1,P2,P3,P4,faceColor,color,pow ) {

         const min = 0;
         const max = 1;
         this.addPoint( P1, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,min] );
         this.addPoint( P2, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( P3, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
         this.addPoint( P2, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( P4, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,max] );
         this.addPoint( P3, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
     }
     buffer.AddQuadTexture = function( norm, P1,P2,P3,P4,textureCoords ) {
         const min = 0;
         const max = 1;
         this.addPoint( P1, textureCoords.uv_array, 0, white, undefined, norm, undefined, 255, false, false, [min,min] );
         this.addPoint( P2, textureCoords.uv_array, 2, white, undefined, norm, undefined, 255, false, false, [max,min] );
         this.addPoint( P3, textureCoords.uv_array, 4, white, undefined, norm, undefined, 255, false, false, [min,max] );
         this.addPoint( P2, textureCoords.uv_array, 2, white, undefined, norm, undefined, 255, false, false, [max,min] );
         this.addPoint( P4, textureCoords.uv_array, 6, white, undefined, norm, undefined, 255, false, false, [max,max] );
         this.addPoint( P3, textureCoords.uv_array, 4, white, undefined, norm, undefined, 255, false, false, [min,max] );
     }
     buffer.addSimpleQuad = function( quad, color, faceColor, norm, pow ) {
         var min = 0;
         var max = 1;
         this.addPoint( quad[0], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,min] );
         this.addPoint( quad[1], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( quad[2], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
         this.addPoint( quad[1], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( quad[3], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,max] );
         this.addPoint( quad[2], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
     }
     const white = new THREE.Vector4( 0.5, 0.5, 0.5, 1 );
     buffer.addSimpleQuadTex = function( quad, uvs, norm, pow ) {
         var min = 0;
         var max = 1.0;
         this.addPoint( quad[0], uvs, 0, white, white, norm, pow, 255, false, false, [min,min] );
         this.addPoint( quad[1], uvs, 2, white, white, norm, pow, 255, false, false, [max,min] );
         this.addPoint( quad[2], uvs, 4, white, white, norm, pow, 255, false, false, [min,max] );
         this.addPoint( quad[1], uvs, 2, white, white, norm, pow, 255, false, false, [max,min] );
         this.addPoint( quad[3], uvs, 6, white, white, norm, pow, 255, false, false, [max,max] );
         this.addPoint( quad[2], uvs, 4, white, white, norm, pow, 255, false, false, [min,max] );
     }

     buffer.makeVoxCube = function( size, voxelType ) {
        var v1 = new THREE.Vector3(1,1,1);
        var v2 = new THREE.Vector3(-1,1,1);
        var v3 = new THREE.Vector3(1,-1,1);
        var v4 = new THREE.Vector3(-1,-1,1);
        var v5 = new THREE.Vector3(1,1,-1);
        var v6 = new THREE.Vector3(-1,1,-1);
        var v7 = new THREE.Vector3(1,-1,-1);
        var v8 = new THREE.Vector3(-1,-1,-1);
        var quad;
        if( voxelType && voxelType.image ) {
            var in_uvs = voxelType.textureCoords.uvs;
            var uvs = voxelType.textureCoords.uv_array;
            buffer.addSimpleQuadTex( quad=[v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size),v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size)]
                , uvs
                , THREE.Vector3Forward
                , 200 )
                //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();

            buffer.addSimpleQuadTex( quad = [v6.clone().multiplyScalar(size),v5.clone().multiplyScalar(size),v8.clone().multiplyScalar(size),v7.clone().multiplyScalar(size)]
                , voxelType.textureCoords.uvs
                , THREE.Vector3Backward
                , 200 )
                //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v5.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Up
                    , 200 )
                  //  quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Down
                    , 200 )
                    //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v5.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v3.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Right
                    , 200 )
                    //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v2.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Left
                    , 200 )
                    //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();

        }else {
        buffer.addSimpleQuad( quad=[v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size),v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size)]
            , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0.2, 0.0, 1, 1.0 )
            , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Forward
            , 200 )
            //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v6.clone().multiplyScalar(size),v5.clone().multiplyScalar(size),v8.clone().multiplyScalar(size),v7.clone().multiplyScalar(size)]
            , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0.2, 1, 0, 1.0 )
            , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Backward
            , 200 )
            //quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v5.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 0.0, 0, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Up
                , 200 )
          //      quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0, 1, 1, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Down
                , 200 )
            //    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v5.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v3.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 0.0, 1, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Right
                , 200 )
            //    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v2.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 1, 0, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Left
                , 200 )
          //      quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        }
        this.markDirty(  );
     }

     //var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
     //var mesh = new THREE.Mesh( geometry, material );
     return buffer;
}




function updatePosition() {
    buffer.geometry.attributes.position.needsUpdate = true;
}

},{}],42:[function(require,module,exports){

const attribs = ["position","uv"
,"in_Color", "in_FaceColor", "in_Modulous"
,"normal", "in_Pow", "in_flat_color", "in_use_texture", "in_decal_texture"
];
const attrib_bytes =     [4,4,1,1,1,4,4,1,1,1]
const attrib_sizes =     [3,2,4,4,2,3,1,1,1,1]
const attrib_normalize = [false,false,true,true,0,0,0,0,1,0]
const attrib_buftype = [Float32Array,Float32Array
    ,Uint8Array,Uint8Array,Uint8Array
    ,Float32Array,Float32Array,Uint8Array,Uint8Array, Uint8Array]

Voxelarium.GeometryBuffer = function () {
    var buffer = {};
     buffer.geometry = new THREE.BufferGeometry();

     buffer.geometry.uniforms = {
             edge_only : false,
     	};

    // create a simple square shape. We duplicate the top left and bottom right
    // vertices because each vertex needs to appear once per triangle.
    buffer.position = new Float32Array( [] );
    buffer.uv = new Float32Array( [] );
    buffer.in_Color = new Uint8Array( [] );
    buffer.in_FaceColor = new Uint8Array( [] );
    buffer.normal = new Float32Array( [] );
    buffer.in_Pow = new Float32Array( [] );
    buffer.in_use_texture = new Uint8Array( [] );
    buffer.in_flat_color = new Uint8Array( [] );
    buffer.in_decal_texture = new Uint8Array( [] );
    buffer.in_Modulous = new Int8Array( [] );
    buffer.available = 0;
    buffer.used = 0;

    buffer.clear = function() {
        this.used = 0;
    }

    attribs.forEach( (att,index)=>{
      buffer.geometry.addAttribute( att, new THREE.BufferAttribute( buffer[att], attrib_sizes[index], attrib_normalize[index] ))
    })


     buffer.expand = function() {
         var newbuf;
         this.available = ( this.available + 1 ) * 2;

          attribs.forEach( (att,index)=>{
            newbuf =   new attrib_buftype[index]( new ArrayBuffer( this.available * ( attrib_bytes[index] * attrib_sizes[index] ) ) );
            newbuf.set( buffer[att] );
            buffer[att] = newbuf;
          })
     };

     buffer.markDirty = function () {

         attribs.forEach( (att)=>{
             var attrib = this.geometry.getAttribute(att);
             attrib.needsUpdate = true;
             attrib.array = buffer[att];
             attrib.count = buffer.used;
         })
         //console.log( "dirty", this.geometry.attributes );
     }

     buffer.addPoint = function( v, t, tBase, c, fc, n, p, ut, flat, dt, mod ) {
         if( this.used >= this.available )
            this.expand();
            const u2 = this.used * 2;
            const u3 = this.used * 3;
            const u4 = this.used * 4;
        if( t ) {
            this.uv[u2+0] = t[tBase+0];
            this.uv[u2+1] = t[tBase+1];
        }
        else {
            this.uv[u2+0] = 0;
            this.uv[u2+1] = 0;
        }
        this.position[u3 + 0 ] = v.x;
        this.position[u3 + 1 ] = v.y;
        this.position[u3 + 2 ] = v.z;
        if( c ) {
        this.in_Color[u4 + 0 ] = c.x*255;
        this.in_Color[u4 + 1 ] = c.y*255;
        this.in_Color[u4 + 2 ] = c.z*255;
        this.in_Color[u4 + 3 ] = c.w*255; }

        if( fc ) {
        this.in_FaceColor[u4 + 0 ] = fc.x*255;
        this.in_FaceColor[u4 + 1 ] = fc.y*255;
        this.in_FaceColor[u4 + 2 ] = fc.z*255;
        this.in_FaceColor[u4 + 3 ] = fc.w*255; }

        this.normal[u3 + 0] = n?n.x:0;
        this.normal[u3 + 1] = n?n.y:0;
        this.normal[u3 + 2] = n?n.z:1;

        this.in_Pow[ this.used ] = p;
        this.in_use_texture[ this.used ] = ut;
        this.in_flat_color[this.used] = flat;
        this.in_decal_texture[this.used] = dt;
        this.in_Modulous[this.used * 2 + 0] = mod[0];
        this.in_Modulous[this.used * 2 + 1] = mod[1];

        this.used++;
    };

     //buffer.

     buffer.AddQuad = function( norm, P1,P2,P3,P4,faceColor,color,pow ) {

         const min = 0;
         const max = 1;
         this.addPoint( P1, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,min] );
         this.addPoint( P2, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( P3, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
         this.addPoint( P2, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( P4, undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,max] );
         this.addPoint( P3, undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
     }
     buffer.AddQuadTexture = function( norm, P1,P2,P3,P4,textureCoords ) {
         const min = 0;
         const max = 1;
         this.addPoint( P1, textureCoords.uv_array, 0, undefined, undefined, norm, undefined, 255, false, false, [min,min] );
         this.addPoint( P2, textureCoords.uv_array, 2, undefined, undefined, norm, undefined, 255, false, false, [max,min] );
         this.addPoint( P3, textureCoords.uv_array, 4, undefined, undefined, norm, undefined, 255, false, false, [min,max] );
         this.addPoint( P2, textureCoords.uv_array, 2, undefined, undefined, norm, undefined, 255, false, false, [max,min] );
         this.addPoint( P4, textureCoords.uv_array, 6, undefined, undefined, norm, undefined, 255, false, false, [max,max] );
         this.addPoint( P3, textureCoords.uv_array, 4, undefined, undefined, norm, undefined, 255, false, false, [min,max] );
     }
     buffer.addSimpleQuad = function( quad, color, faceColor, norm, pow ) {
         var min = 0;
         var max = 1;
         this.addPoint( quad[0], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,min] );
         this.addPoint( quad[1], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( quad[2], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
         this.addPoint( quad[1], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,min] );
         this.addPoint( quad[3], undefined, undefined, color, faceColor, norm, pow, false, false, false, [max,max] );
         this.addPoint( quad[2], undefined, undefined, color, faceColor, norm, pow, false, false, false, [min,max] );
     }
     const white = new THREE.Vector4( 0.5, 0, 0, 1 );
     buffer.addSimpleQuadTex = function( quad, uvs, norm, pow ) {
         var min = 0;
         var max = 1.0;
         this.addPoint( quad[0], uvs, 0, white, white, norm, pow, 255, false, false, [min,min] );
         this.addPoint( quad[1], uvs, 2, white, white, norm, pow, 255, false, false, [max,min] );
         this.addPoint( quad[2], uvs, 4, white, white, norm, pow, 255, false, false, [min,max] );
         this.addPoint( quad[1], uvs, 2, white, white, norm, pow, 255, false, false, [max,min] );
         this.addPoint( quad[3], uvs, 6, white, white, norm, pow, 255, false, false, [max,max] );
         this.addPoint( quad[2], uvs, 4, white, white, norm, pow, 255, false, false, [min,max] );
     }

     buffer.makeVoxCube = function( size, voxelType ) {
        var v1 = new THREE.Vector3(1,1,1);
        var v2 = new THREE.Vector3(-1,1,1);
        var v3 = new THREE.Vector3(1,-1,1);
        var v4 = new THREE.Vector3(-1,-1,1);
        var v5 = new THREE.Vector3(1,1,-1);
        var v6 = new THREE.Vector3(-1,1,-1);
        var v7 = new THREE.Vector3(1,-1,-1);
        var v8 = new THREE.Vector3(-1,-1,-1);
        var quad;
        if( voxelType && voxelType.image
				   && (( voxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_SHADER ) == 0 )
           ) {
            var in_uvs = voxelType.textureCoords.uvs;
            var uvs = voxelType.textureCoords.uv_array;
            buffer.addSimpleQuadTex( quad=[v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size),v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size)]
                , uvs
                , THREE.Vector3Forward
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();

            buffer.addSimpleQuadTex( quad = [v6.clone().multiplyScalar(size),v5.clone().multiplyScalar(size),v8.clone().multiplyScalar(size),v7.clone().multiplyScalar(size)]
                , voxelType.textureCoords.uvs
                , THREE.Vector3Backward
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v5.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Up
                    , 200 )
                    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Down
                    , 200 )
                    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v5.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v3.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Right
                    , 200 )
                    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
            buffer.addSimpleQuadTex( quad = [v2.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                    , voxelType.textureCoords.uvs
                    , THREE.Vector3Left
                    , 200 )
                    quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();

        }else {
        buffer.addSimpleQuad( quad=[v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size),v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size)]
            , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0.2, 0.0, 1, 1.0 )
            , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Forward
            , 200 )
            quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v6.clone().multiplyScalar(size),v5.clone().multiplyScalar(size),v8.clone().multiplyScalar(size),v7.clone().multiplyScalar(size)]
            , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0.2, 1, 0, 1.0 )
            , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Backward
            , 200 )
            quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v5.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 0.0, 0, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Up
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 0, 1, 1, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Down
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v5.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v3.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 0.0, 1, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Right
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        buffer.addSimpleQuad( quad = [v2.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , voxelType && voxelType.properties.EdgeColor || new THREE.Vector4( 1, 1, 0, 1.0 )
                , voxelType && voxelType.properties.FaceColor || new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Left
                , 200 )
                quad[0].delete(); quad[1].delete(); quad[2].delete(); quad[3].delete();
        }
        this.markDirty(  );
     }

     //var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
     //var mesh = new THREE.Mesh( geometry, material );
     return buffer;
}




function updatePosition() {
    buffer.geometry.attributes.position.needsUpdate = true;
}

},{}],43:[function(require,module,exports){


Voxelarium.GeometryBufferMono = function () {
    var buffer = {};
     buffer.geometry = new THREE.BufferGeometry();
     buffer.geometry.uniforms = {
             in_Color : new THREE.Vector4(1,0,0,1),
             in_FaceColor : new THREE.Vector4(0,1,0,1),
             in_Pow : 20.0 ,
             edge_only : true,
     	};
    // create a simple square shape. We duplicate the top left and bottom right
    // vertices because each vertex needs to appear once per triangle.
    buffer.position = new Float32Array( [] );
    buffer.in_Texture = new Float32Array( [] );
    //buffer.in_Color = new Uint8Array( [] );
    //buffer.in_FaceColor = new Uint8Array( [] );
    buffer.in_Normal = new Float32Array( [] );
    //buffer.in_Pow = new Uint8Array( [] );
    buffer.in_use_texture = new Uint8Array( [] );
    buffer.in_flat_color = new Uint8Array( [] );
    buffer.in_decal_texture = new Uint8Array( [] );
    buffer.in_Modulous = new Int8Array( [] );
    buffer.available = 0;
    buffer.used = 0;

    buffer.clear = function() {
        this.used = 0;
    }
/*
    attribute vec4 vPosition;
    attribute vec2 in_Texture;
    attribute  vec4 in_Color;
    attribute  vec4 in_FaceColor;
    attribute vec3 in_Normal;
    attribute  float in_Pow;

    attribute  float in_use_texture;
    attribute  float in_flat_color;
    attribute  float in_decal_texture;

    attribute  vec2 in_Modulous;
*/
//buffer.geometry
    buffer.geometry.addAttribute( 'position', new THREE.BufferAttribute( buffer.position, 3 ) );
     buffer.geometry.addAttribute( 'in_Texture', new THREE.BufferAttribute( buffer.in_Texture, 2 ) );
     //buffer.geometry.addAttribute( 'in_Color', new THREE.BufferAttribute( buffer.in_Color, 4,true ) );
     //buffer.geometry.addAttribute( 'in_FaceColor', new THREE.BufferAttribute( buffer.in_FaceColor, 4, true ) );
     buffer.geometry.addAttribute( 'in_Normal', new THREE.BufferAttribute( buffer.in_Normal, 3 ) );
     //buffer.geometry.addAttribute( 'in_Pow', new THREE.BufferAttribute( buffer.in_Pow, 1 ) );
     buffer.geometry.addAttribute( 'in_use_texture', new THREE.BufferAttribute( buffer.in_use_texture, 1 ) );
     buffer.geometry.addAttribute( 'in_flat_color', new THREE.BufferAttribute( buffer.in_flat_color, 1 ) );
     buffer.geometry.addAttribute( 'in_decal_texture', new THREE.BufferAttribute( buffer.in_decal_texture, 1 ) );
     buffer.geometry.addAttribute( 'in_Modulous', new THREE.BufferAttribute( buffer.in_Modulous, 2, false ) );



     buffer.expand = function() {
         var newbuf;
         this.available = ( this.available + 1 ) * 2;

         newbuf =   new Float32Array( new ArrayBuffer( this.available * ( 4 * 3 ) ) );
         newbuf.set( buffer.position );
         buffer.position = newbuf;

         newbuf =   new Float32Array( new ArrayBuffer( this.available * ( 4 * 2 ) ) );
         newbuf.set( buffer.in_Texture );
         buffer.in_Texture = newbuf;

         newbuf =   new Float32Array( new ArrayBuffer( this.available * ( 4 * 3 ) ) );
         newbuf.set( buffer.in_Normal );
         buffer.in_Normal = newbuf;

         newbuf =   new Uint8Array( new ArrayBuffer( this.available * ( 1 * 1 ) ) );
         newbuf.set( buffer.in_use_texture );
         buffer.in_use_texture = newbuf;

         newbuf =   new Uint8Array( new ArrayBuffer( this.available * ( 1 * 1 ) ) );
         newbuf.set( buffer.in_flat_color );
         buffer.in_flat_color = newbuf;

         newbuf =   new Uint8Array( new ArrayBuffer( this.available * ( 1 * 1 ) ) );
         newbuf.set( buffer.in_decal_texture );
         buffer.in_decal_texture = newbuf;

         newbuf =   new Int8Array( new ArrayBuffer( this.available * ( 4 * 2 ) ) );
         newbuf.set( buffer.in_Modulous );
         buffer.in_Modulous = newbuf;

     };

     buffer.markDirty = function () {
         ["position","in_Texture"
         ,"in_Modulous"
         ,"in_Normal", "in_flat_color", "in_use_texture", "in_decal_texture"
     ].forEach( (att)=>{
             var attrib = this.geometry.getAttribute(att);
             attrib.needsUpdate = true;
             attrib.array = buffer[att];
         })

         this.geometry.attributes.position.needsUpdate = true;
         this.geometry.attributes.in_Texture.needsUpdate = true;
         this.geometry.attributes.in_Normal.needsUpdate = true;
         this.geometry.attributes.in_use_texture.needsUpdate = true;
         this.geometry.attributes.in_flat_color.needsUpdate = true;
         this.geometry.attributes.in_decal_texture.needsUpdate = true;
         this.geometry.attributes.in_Modulous.needsUpdate = true;
     }

     buffer.addPoint = function( v, n, ut, flat, dt, mod ) {
         if( this.used >= this.available )
            this.expand();
            const u3 = this.used * 3;
            const u4 = this.used * 4;
        this.position[u3 + 0 ] = v.x;
        this.position[u3 + 1 ] = v.y;
        this.position[u3 + 2 ] = v.z;


        this.in_Normal[u3 + 0] = n?n.x:0;
        this.in_Normal[u3 + 1] = n?n.y:0;
        this.in_Normal[u3 + 2] = n?n.z:1;

        this.in_use_texture[ this.used ] = ut;
        this.in_flat_color[this.used] = flat;
        this.in_decal_texture[this.used] = dt;
        this.in_Modulous[this.used * 2 + 0] = mod[0];
        this.in_Modulous[this.used * 2 + 1] = mod[1];

        this.used++;
    };

     //buffer.

     buffer.AddQuad = function( norm, P1,P2,P3,P4 ) {

         const min = 0;
         const max = 1;
         this.addPoint( P1, norm, false, false, false, [min,min] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P4,  norm, false, false, false, [max,max] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
     }
     buffer.AddQuadTexture = function( norm, P1,P2,P3,P4,textureCoords ) {
         const min = 0;
         const max = 1;
         this.addPoint( P1, norm, false, false, false, [min,min] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P4,  norm, false, false, false, [max,max] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
     }
     const white = new THREE.Vector4( 0.5, 0.5, 0, 1 );
     buffer.addSimpleQuadTex = function( quad, uvs, norm, pow ) {
         var min = 0;
         var max = 1.0;
         this.addPoint( P1, norm, false, false, false, [min,min] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
         this.addPoint( P2,  norm, false, false, false, [max,min] );
         this.addPoint( P4,  norm, false, false, false, [max,max] );
         this.addPoint( P3,  norm, false, false, false, [min,max] );
     }
     buffer.addSimpleQuad = function( quad, norm ) {
         var min = -2;
         var max = 2;
         this.addPoint( quad[0], undefined, norm, false, false, false, [min,min] );
         this.addPoint( quad[1], undefined, norm, false, false, false, [max,min] );
         this.addPoint( quad[2], undefined, norm, false, false, false, [min,max] );
         this.addPoint( quad[1], undefined, norm, false, false, false, [max,min] );
         this.addPoint( quad[3], undefined, norm, false, false, false, [max,max] );
         this.addPoint( quad[2], undefined, norm, false, false, false, [min,max] );
     }

     buffer.makeVoxCube = function(size) {
        var v1 = new THREE.Vector3(1,1,1);
        var v2 = new THREE.Vector3(-1,1,1);
        var v3 = new THREE.Vector3(1,-1,1);
        var v4 = new THREE.Vector3(-1,-1,1);
        var v5 = new THREE.Vector3(1,1,-1);
        var v6 = new THREE.Vector3(-1,1,-1);
        var v7 = new THREE.Vector3(1,-1,-1);
        var v8 = new THREE.Vector3(-1,-1,-1);
        buffer.addSimpleQuad( [v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size),v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size)]
            , new THREE.Vector4( 0.2, 0.0, 1, 1.0 ), new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Forward
            , 200 )
        buffer.addSimpleQuad( [v6.clone().multiplyScalar(size),v5.clone().multiplyScalar(size),v8.clone().multiplyScalar(size),v7.clone().multiplyScalar(size)]
            , new THREE.Vector4( 0.2, 1, 0, 1.0 ), new THREE.Vector4( 0, 0, 0, 0.5 )
            , THREE.Vector3Backward
            , 200 )
        buffer.addSimpleQuad( [v5.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v2.clone().multiplyScalar(size)]
                , new THREE.Vector4( 1, 0.0, 0, 1.0 ), new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Up
                , 200 )
        buffer.addSimpleQuad( [v3.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , new THREE.Vector4( 0, 1, 1, 1.0 ), new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Down
                , 200 )
        buffer.addSimpleQuad( [v5.clone().multiplyScalar(size),v1.clone().multiplyScalar(size),v7.clone().multiplyScalar(size),v3.clone().multiplyScalar(size)]
                , new THREE.Vector4( 1, 0.0, 1, 1.0 ), new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Right
                , 200 )
        buffer.addSimpleQuad( [v2.clone().multiplyScalar(size),v6.clone().multiplyScalar(size),v4.clone().multiplyScalar(size),v8.clone().multiplyScalar(size)]
                , new THREE.Vector4( 1, 1, 0, 1.0 )
                , new THREE.Vector4( 0, 0, 0, 0.5 )
                , THREE.Vector3Left
                , 200 )
        this.markDirty(  );
     }

     //var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
     //var mesh = new THREE.Mesh( geometry, material );
     return buffer;
}




function updatePosition() {
    buffer.geometry.attributes.position.needsUpdate = true;
}

},{}],44:[function(require,module,exports){


Voxelarium.GeometryShader = function() {
    return new THREE.ShaderMaterial( {

	uniforms: {
        edge_only : { type: "f", value : 0 },
        map : { type : "t", value : null }
	},
    transparent : true,
     blending: THREE.NormalBlending,
	vertexShader: `
    #define USE_MAP

    #include <common>
    #include <uv_pars_vertex>
    #include <uv2_pars_vertex>
    #include <envmap_pars_vertex>
    #include <color_pars_vertex>
    #include <morphtarget_pars_vertex>
    #include <skinning_pars_vertex>
    #include <logdepthbuf_pars_vertex>
    #include <clipping_planes_pars_vertex>

    attribute  vec4 in_Color;
    attribute  vec4 in_FaceColor;
    attribute  float in_Pow;

    attribute  float in_use_texture;
    attribute  float in_flat_color;
    attribute  float in_decal_texture;

    attribute  vec2 in_Modulous;
    varying vec4 ex_Color;
    varying vec2 ex_texCoord;
    varying float ex_Dot;
    varying  float ex_Pow;
    varying  float ex_Pow2;
    varying float vDepth;
    varying float ex_use_texture;
    varying float ex_flat_color;
    varying float ex_decal_texture;
    varying vec4 ex_FaceColor;
    #define EPSILON 1e-6

    varying  vec2 ex_Modulous;

    varying vec4 fe_normal, light_dir, eye_vec, lookat;
    //const float PI =  3.14159265;

    void main() {

    	#include <uv_vertex>
    	#include <uv2_vertex>
    	#include <color_vertex>
    	#include <skinbase_vertex>

    	#ifdef USE_ENVMAP

    	#include <beginnormal_vertex>
    	#include <morphnormal_vertex>
    	#include <skinnormal_vertex>
    	#include <defaultnormal_vertex>

    	#endif

    	#include <begin_vertex>
    	#include <morphtarget_vertex>
    	#include <skinning_vertex>

        #include <project_vertex>
/*

        {
        	vec4 ambient, diffuse, specular;
        	float NdotL, RdotV;

        	//fe_normal = vec4(gl_NormalMatrix * gl_Normal, 0.0);

        	vec4 vVertex = modelViewMatrix * vec4( transformed, 1.0 );

        	//light_dir = gl_LightSource[0].position - vVertex;

        	eye_vec = -vVertex;

        	vec4 temp_pos = projectionMatrix * vVertex;

        	float dist = length(eye_vec);
        	lookat = eye_vec - temp_pos;
        	vec4 dir = temp_pos - eye_vec;
        	vec4 center = normalize(-eye_vec);
        	vec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);

        	vec4 c = temp_pos - proj;

        	float magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));

        	c = length(c) * magnitude * normalize(c);

        	vec4 dir2 = normalize(c-lookat);

        	dir2 = (dir2 * dist);

        	gl_Position.xyz = dir2.xyz;
        	gl_Position.w = temp_pos.w;

        }
*/
    	#include <logdepthbuf_vertex>

    	#include <worldpos_vertex>
    	#include <clipping_planes_vertex>
    	#include <envmap_vertex>


{
        ex_texCoord = uv;
        ex_Color = in_Color;
        ex_FaceColor = in_FaceColor;

        //normal = normalMatrix * normal;

        //dottmp = dot( normal, vec3( 0.0, 1.0, 0.0 ) );
        //dottmpright = dot( normal, vec3( 1.0, 0.0, 0.0 ) );

        ex_Pow = in_Pow;// * (/*sqrt/(1.0-dottmpright*dottmpright));
        ex_Pow2 = in_Pow;// * (/*sqrt/(1.0-dottmp*dottmp));

        ex_use_texture = in_use_texture;
        ex_flat_color = in_flat_color;
        ex_Modulous = in_Modulous;
}

    }
    `,
fragmentShader:`
    uniform vec3 diffuse;
    uniform float opacity;

    #ifndef FLAT_SHADED

    	varying vec3 vNormal;

    #endif
    #define USE_MAP

    #include <common>
    #include <color_pars_fragment>
    #include <uv_pars_fragment>
    #include <uv2_pars_fragment>
    #include <map_pars_fragment>
    #include <alphamap_pars_fragment>
    #include <aomap_pars_fragment>
    #include <envmap_pars_fragment>
    #include <fog_pars_fragment>
    #include <specularmap_pars_fragment>
    #include <logdepthbuf_pars_fragment>
    #include <clipping_planes_pars_fragment>

    varying vec2 ex_texCoord;
    varying vec4 ex_Color;

    varying float ex_Pow;
    varying float ex_Pow2;
    varying float ex_use_texture;
    varying float ex_flat_color;
    varying vec2 ex_Modulous;
    varying vec4 ex_FaceColor;
    //uniform sampler2D tex;
    uniform float edge_only;

    uniform float logDepthBufFC;
    varying float vFragDepth;

    void main() {

    	#include <clipping_planes_fragment>

    	vec4 diffuseColor = vec4( diffuse, opacity );

    	#include <logdepthbuf_fragment>
    	#include <map_fragment>
    	#include <color_fragment>
    	#include <alphamap_fragment>
    	#include <alphatest_fragment>
    	#include <specularmap_fragment>



        //if(2.0 > 1.0)
        {
                if( ex_use_texture > 0.5 )
                {
                    if( edge_only > 0.5 )
                        diffuseColor = vec4(1.0);
                    else
                        diffuseColor = vec4( texture2D( map, ex_texCoord ).rgb, 1.0 );
                      //  diffuseColor = vec4( ex_texCoord, texture2D( map, ex_texCoord ).r, 1.0 );
                    //diffuseColor =vec4(ex_texCoord.x,ex_texCoord.y,0,1);// ex_Color;
                }
                else if( ex_flat_color > 0.5 )
                {
                    diffuseColor =vec4(1,0,1,1);// ex_Color;
                }
                else
                {
                    float a = mod(ex_Modulous.x +0.5, 1.0 )-0.5;
                    float b = mod(ex_Modulous.y +0.5, 1.0 )-0.5;

                    float g;
                    float h;
                    vec3 white;
                    a = 4.0*(0.25-a*a);
                    b = 4.0*(0.25-b*b);
                    a = pow( abs(a), ex_Pow );
                    b = pow( abs(b), ex_Pow2 );

                 //g = pow( ( max(a,b)),in_Pow);
                    //h = pow( ( a*b),in_Pow/4);
                    g = min(1.0,b+a);
                    h = max((b+a)-1.0,0.0)/3.0;
                    white = vec3(1.0,1.0,1.0) * max(ex_Color.r,max(ex_Color.g,ex_Color.b));
                    //	diffuseColor = vec4( h * white + (g * ex_Color.rgb), ex_Color.a ) ;
                    //  diffuseColor = vec4( g * ex_Color.rgb, ex_Color.a ) ;
                    if( edge_only > 0.5 )
                         diffuseColor = vec4( h* ( white - ex_FaceColor.rgb )+ (g* ex_Color.rgb), (g * ex_Color.a) ) ;
                    else
                         diffuseColor = vec4( ex_FaceColor.a*(1.0-g)*ex_FaceColor.rgb + h* ( white - ex_FaceColor.rgb ) + (g* ex_Color.rgb), (1.0-g)*ex_FaceColor.a + (g * ex_Color.a) ) ;
                    //diffuseColor = vec4( (1.0-g)*ex_FaceColor.rgb + h* ( white - ex_FaceColor.rgb )+ (g* ex_Color.rgb), (1.0-g)*ex_FaceColor.a + (g * ex_Color.a) ) ;
                    //diffuseColor = vec4(g,h,1,1);
                    //diffuseColor = ex_Color;
                }
        }


    	ReflectedLight reflectedLight;
    	reflectedLight.directDiffuse = vec3( 0.0 );
    	reflectedLight.directSpecular = vec3( 0.0 );
    	reflectedLight.indirectDiffuse = diffuseColor.rgb;
    	reflectedLight.indirectSpecular = vec3( 0.0 );

    	#include <aomap_fragment>

    	vec3 outgoingLight = reflectedLight.indirectDiffuse;

    	#include <envmap_fragment>

    	gl_FragColor = diffuseColor;//vec4( outgoingLight, diffuseColor.a );

    	#include <premultiplied_alpha_fragment>
    	#include <tonemapping_fragment>
    	#include <encodings_fragment>
    	#include <fog_fragment>

    }
    `
} );

/*
#if !MORE_ROUNDED
              g = sqrt((a*a+b*b)/2);
              h = pow(g,200.0) * 0.5;  // up to 600 even works...
              g = pow( ( max(a,b)),400);
              h = (g+h);
              gl_FragColor = vec4( h * in_Color.rgb, in_Color.a ) ;
#else
*/

}

},{}],45:[function(require,module,exports){


Voxelarium.GeometryShaderMono = function() {
    return new THREE.ShaderMaterial( {

	uniforms: {
        in_Color : { value : new THREE.Vector3() },
        in_FaceColor : { value : new THREE.Vector3() },
        in_Pow : { value : 0.0 },
        edge_only : { value : 0 },
	},
    transparent : true,
     blending: THREE.NormalBlending,
	vertexShader: `
                //attribute vec4 position;
                uniform mat3 rotation;
    			attribute vec2 in_Texture;
    			uniform  vec4 in_Color;
    			uniform  vec4 in_FaceColor;
    			attribute vec3 in_Normal;
    			uniform  float in_Pow;
                attribute  float in_use_texture;
    			attribute  float in_flat_color;
    			attribute  float in_decal_texture;

        		attribute  vec2 in_Modulous;
    			varying vec4 ex_Color;
    			varying vec2 ex_texCoord;
    			varying float ex_Dot;
    			varying  float ex_Pow;
                varying  float ex_Pow2;
    			float ex_use_texture;
    			float ex_flat_color;
    			float ex_decal_texture;
    			varying vec4 ex_FaceColor;

    			varying  vec2 ex_Modulous;
    			void main(void) {
    				vec3 normal;
    				float dottmp;
                    float dottmpright;
    			    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    				ex_texCoord = in_Texture/32768.0;
    				ex_Color = in_Color;
    				ex_FaceColor = in_FaceColor;

    				normal = normalMatrix * in_Normal;

    				dottmp = dot( normal, vec3( 0.0, 1.0, 0.0 ) );
                    dottmpright = dot( normal, vec3( 1.0, 0.0, 0.0 ) );

    				ex_Pow = in_Pow;// * (/*sqrt*/(1.0-dottmpright*dottmpright));
                    ex_Pow2 = in_Pow;// * (/*sqrt*/(1.0-dottmp*dottmp));

    				ex_use_texture = in_use_texture;
    				ex_flat_color = in_flat_color;
    				ex_Modulous = in_Modulous;
    			}
    `,//.replace(/[^\x00-\x7F]/g, ""),
	fragmentShader:`
    			varying vec2 ex_texCoord;
    			varying vec4 ex_Color;

                varying float ex_Pow;
                varying float ex_Pow2;
    			float ex_use_texture;
    			float ex_flat_color;
    			varying vec2 ex_Modulous;
    			varying vec4 ex_FaceColor;
                uniform  float edge_only;
    			uniform sampler2D tex;
    			void main(void) {
    			  if( ex_use_texture > 0.5 )
    				{
    					gl_FragColor = ex_Color * texture2D( tex, ex_texCoord );
                        gl_FragColor =vec4(1,0,0,1);// ex_Color;
    				}
    				else if( ex_flat_color > 0.5 )
    				{
    					gl_FragColor =vec4(1,0,1,1);// ex_Color;
    				}
    				else
    				{
                        float a = mod(ex_Modulous.x +0.5, 1.0 )-0.5;
        				float b = mod(ex_Modulous.y +0.5, 1.0 )-0.5;

        				float g;
        				float h;
        				vec3 white;
        				a = 4.0*(0.25-a*a);
        				b = 4.0*(0.25-b*b);
        				a = pow( a, ex_Pow );
        				b = pow( b, ex_Pow2 );

        			 //g = pow( ( max(a,b)),in_Pow);
        				//h = pow( ( a*b),in_Pow/4);
        				g = min(1.0,b+a);
        				h = max((b+a)-1.0,0.0)/3.0;
        				white = vec3(1.0,1.0,1.0) * max(ex_Color.r,max(ex_Color.g,ex_Color.b));
        			//	gl_FragColor = vec4( h * white + (g * ex_Color.rgb), ex_Color.a ) ;
        			//  gl_FragColor = vec4( g * ex_Color.rgb, ex_Color.a ) ;
                    if( edge_only > 0.5 )
                        gl_FragColor = vec4( h* ( white - ex_FaceColor.rgb )+ (g* ex_Color.rgb), (g * ex_Color.a) ) ;
                    else
        			    gl_FragColor = vec4( ex_FaceColor.a*(1.0-g)*ex_FaceColor.rgb + h* ( white - ex_FaceColor.rgb )+ (g* ex_Color.rgb), (1.0-g)*ex_FaceColor.a + (g * ex_Color.a) ) ;
                    //    gl_FragColor = vec4( ex_FaceColor.a*(1.0-g)*ex_FaceColor.rgb +  (g* ex_Color.rgb), (1.0-g)*ex_FaceColor.a + (g * ex_Color.a) ) ;
    			}
            }
            `,//.replace(/[^\x00-\x7F]/g, "")

} );

/*
#if !MORE_ROUNDED
              g = sqrt((a*a+b*b)/2);
              h = pow(g,200.0) * 0.5;  // up to 600 even works...
              g = pow( ( max(a,b)),400);
              h = (g+h);
              gl_FragColor = vec4( h * in_Color.rgb, in_Color.a ) ;
#else
*/

}

},{}],46:[function(require,module,exports){
"use strict";
var voxels = require( "./voxels.js")


Voxelarium.BasicMesher = function(  ) {
    var mesher = {
		Culler : function( cluster ) {
            var culler = {
              cluster : cluster,
    			cullSector : function( sector, internal_faces, interesting_faces ) {
    				if( internal_faces )
    					Render_Basic.SectorUpdateFaceCulling( sector, false );
    				else
    					Render_Basic.SectorUpdateFaceCulling_Partial( sector, interesting_faces, false );
    			},

    			cullSingleVoxel : function ( _Sector, offset ) {

    				var Offset = new Array(19);//uint[19];
    				var VoxelState = new Array(19);
    				var Voxel;
    				var sector = new Array(19);

    				var ExtFaceState;
    				var IntFaceState;

    				if( !( sector[Voxelarium.RelativeVoxelOrds.INCENTER] = _Sector ) ) return;
    				Offset[Voxelarium.RelativeVoxelOrds.INCENTER] = offset;
                    var cluster = _Sector.cluster;
    				Offset[Voxelarium.RelativeVoxelOrds.LEFT] = offset - ( 1 * cluster.sectorSizeY );
    				Offset[Voxelarium.RelativeVoxelOrds.RIGHT] = offset + ( 1 * cluster.sectorSizeY );
    				Offset[Voxelarium.RelativeVoxelOrds.AHEAD] = offset + ( 1 * cluster.sectorSizeX * cluster.sectorSizeY );
    				Offset[Voxelarium.RelativeVoxelOrds.BEHIND] = offset - ( 1 * cluster.sectorSizeX * cluster.sectorSizeY );
    				Offset[Voxelarium.RelativeVoxelOrds.ABOVE] = offset + ( 1 );
    				Offset[Voxelarium.RelativeVoxelOrds.BELOW] = offset - ( 1 );

    				if( 0 == ( ( offset / cluster.sectorSizeY ) % cluster.sectorSizeX ) )
    				{
    					if( !( sector[Voxelarium.RelativeVoxelOrds.LEFT] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.LEFT] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.LEFT] += ( cluster.sectorSizeX * cluster.sectorSizeY );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.LEFT] = _Sector;

    				if( (cluster.sectorSizeX-1) == ( ( offset / cluster.sectorSizeY ) % cluster.sectorSizeX ) )
    				{
    					if( null == ( sector[Voxelarium.RelativeVoxelOrds.RIGHT] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.RIGHT] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.RIGHT] -= ( cluster.sectorSizeX * cluster.sectorSizeY );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.RIGHT] = _Sector;

    				if( (cluster.sectorSizeZ-1) == ( ( offset / cluster.sectorSizeY ) % cluster.sectorSizeX ) )
    				{
    					if( null == ( sector[Voxelarium.RelativeVoxelOrds.AHEAD] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.INFRONT - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.AHEAD] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.AHEAD] -= ( cluster.sectorSizeX * cluster.sectorSizeY * cluster.sectorSizeZ );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.AHEAD] = _Sector;

    				if( 0 == ( ( offset / ( cluster.sectorSizeY * cluster.sectorSizeX ) ) % cluster.sectroSizeZ ) )
    				{
    					if( null == ( sector[Voxelarium.RelativeVoxelOrds.BEHIND] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.BEHIND] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.BEHIND] += ( cluster.sectorSizeX * cluster.sectorSizeY * cluster.sectorSizeZ );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.BEHIND] = _Sector;

    				if( (cluster.sectorSizeY-1) == ( offset % cluster.sectorSizeY ) )
    				{
    					if( null == ( sector[Voxelarium.RelativeVoxelOrds.ABOVE] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.ABOVE] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.ABOVE] -= ( cluster.sectorSizeY );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.ABOVE] = _Sector;

    				if( 0 == ( offset % cluster.sectorSizeY ) )
    				{
    					if( null == ( sector[Voxelarium.RelativeVoxelOrds.BELOW] = _Sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1] ) )
    						sector[Voxelarium.RelativeVoxelOrds.BELOW] = VoxelWorld.WorkingFullSector;
    					Offset[Voxelarium.RelativeVoxelOrds.BELOW] += ( cluster.sectorSizeY );
    				}
    				else
    					sector[Voxelarium.RelativeVoxelOrds.BELOW] = _Sector;

    				// Computing absolute memory pointer of blocks
    				for( var i = 0; i < 7; i++ )
    				{
    					sector[i].data.sleepState.clear( Offset[i] );
    					sector[i].Flag_IsActiveVoxels = true;

    					//Voxel_Address[i] = sector[i].Data.Data[Offset[i]];
    					VoxelType = ( sector[i].data.data[Offset[i]] );
    					if( ( VoxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_DRAWFULLVOXELOPACITY ) != 0 )
    						sector[i].Flag_Render_Dirty = true;
    					if( ( VoxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_DRAWTRANSPARENTRENDERING ) != 0 )
    						sector[i].Flag_Render_Dirty_Transparent = true;
    					VoxelState[i] = ( VoxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS );
    				}

    				VoxelType = _Sector.data.data[Offset[Voxelarium.RelativeVoxelOrds.INCENTER]];

    				// Getting case subtables.

    				ExtFaceState = Voxelarium.ExtFaceStateTable[VoxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
    				IntFaceState = Voxelarium.IntFaceStateTable[VoxelType.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];

    				// Computing face culling for center main stored voxel.

    				FaceCulling[Offset[Voxelarium.RelativeVoxelOrds.INCENTER]]
    												= (( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.LEFT]] & Voxelarium.FACEDRAW_Operations.LEFT )
    													   | ( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.RIGHT]] & Voxelarium.FACEDRAW_Operations.RIGHT )
    													   | ( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.INFRONT]] & Voxelarium.FACEDRAW_Operations.AHEAD )
    													   | ( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.BEHIND]] & Voxelarium.FACEDRAW_Operations.BEHIND )
    													   | ( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.ABOVE]] & Voxelarium.FACEDRAW_Operations.ABOVE )
    													   | ( IntFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.BELOW]] & Voxelarium.FACEDRAW_Operations.BELOW ))
    													   ;

    				// Computing face culling for nearboring voxels faces touching center voxel.
    				{
    					var Culler;
    					var Culling;
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.LEFT].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;

    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.LEFT];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.RIGHT ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.LEFT]] & Voxelarium.FACEDRAW_Operations.RIGHT ) );
    						Culling[ofs] = val;

    					}
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.RIGHT].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;
    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.RIGHT];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.LEFT ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.RIGHT]] & Voxelarium.FACEDRAW_Operations.LEFT ) );
    						Culling[ofs] = val;
    					}
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.AHEAD].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;
    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.AHEAD];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.BEHIND ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.AHEAD]] & Voxelarium.FACEDRAW_Operations.BEHIND ) );
    						Culling[ofs] = val;
    					}
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.BEHIND].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;
    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.BEHIND];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.AHEAD ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.BEHIND]] & Voxelarium.FACEDRAW_Operations.AHEAD ) );
    						Culling[ofs] = val;
    					}
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.ABOVE].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;
    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.ABOVE];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.BELOW ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.ABOVE]] & Voxelarium.FACEDRAW_Operations.BELOW ) );
    						Culling[ofs] = val;
    					}
    					if( ( Culler = sector[Voxelarium.RelativeVoxelOrds.BELOW].Culler ) != null )
    					{
    						Culling = Culler.FaceCulling;
    						var ofs = Offset[Voxelarium.RelativeVoxelOrds.BELOW];
    						var val = ( ( Culling[ofs] & ( ~Voxelarium.FACEDRAW_Operations.ABOVE ) )
    							| ( ExtFaceState[VoxelState[Voxelarium.RelativeVoxelOrds.BELOW]] & Voxelarium.FACEDRAW_Operations.ABOVE ) );
    						Culling[ofs] = val;
    					}
    				}
    				// printf("State[Center]:%x [Left]%x [Right]%x [INFRONT]%x [BEHIND]%x [ABOVE]%x [BELOW]%x\n",VoxelState[Voxelarium.RelativeVoxelOrds.INCENTER],VoxelState[Voxelarium.RelativeVoxelOrds.LEFT],VoxelState[Voxelarium.RelativeVoxelOrds.RIGHT],VoxelState[Voxelarium.RelativeVoxelOrds.INFRONT],VoxelState[Voxelarium.RelativeVoxelOrds.BEHIND],VoxelState[Voxelarium.RelativeVoxelOrds.ABOVE],VoxelState[Voxelarium.RelativeVoxelOrds.BELOW]);
    			},

    			cullSingleVoxel2 : function( x, y, z ) {
    				var sector = cluster.getSector( x / cluster.sectorSizeX, y / cluster.sectorSizeY, z / cluster.sectorSizeZ );
    				var offset = ( ( ( x % cluster.sectorSizeX ) * cluster.sectorSizeY )
    								+ ( y % cluster.sectorSizeY )
    								+ ( ( z % cluster.sectorSizeZ ) << ( cluster.sectorSizeY + cluster.sectorSizeX ) ) );
    				CullSingleVoxel( sector, offset );
    			}
            }

            culler.FaceCulling = new Array(cluster.sectorSize);
            var n;
            for( n = 0; n < cluster.sectorSize; n++ )
                culler.FaceCulling[n] = 0xFF;
            return culler;
        }
        , sectorTable : new Array(27)
		, SectorDataTable : new Array(27)
		, BlocMatrix : [new Array(9),new Array(9),new Array(9)]

    , initCulling : function( sector ) {
      var tmp = sector.data.FaceCulling = new Array( sector.cluster.sectorSize );
      for( var n = 0; n < tmp.length; n++ )
        tmp[n] = 0xFF;
    }
		,SectorUpdateFaceCulling : function ( sector, isolated )
		{
			var MissingSector;
      var cluster = sector.cluster;
			var tmpp;
			var i;
      var sectorTable = this.sectorTable;
      var SectorDataTable = this.SectorDataTable;
      var BlocMatrix = this.BlocMatrix;

			if( isolated ) MissingSector = cluster.WorkingEmptySector;
			else MissingSector = cluster.WorkingFullSector;

			// (Voxelarium.FACEDRAW_Operations.ABOVE | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.BEHIND);
			for( i = 0; i < 27; i++ ) sectorTable[i] = MissingSector;
			sectorTable[0] = sector; if( sectorTable[0] == null ) { return; }
			sectorTable[1] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1]; if( sectorTable[1] == null ) { sectorTable[1] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.LEFT; }
			sectorTable[2] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1]; if( sectorTable[2] == null ) { sectorTable[2] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.RIGHT; }
			sectorTable[3] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1]; if( sectorTable[3] == null ) { sectorTable[3] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.BEHIND; }
			sectorTable[6] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1]; if( sectorTable[6] == null ) { sectorTable[6] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.AHEAD; }
			sectorTable[9] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1]; if( sectorTable[9] == null ) { sectorTable[9] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.BELOW; }
			sectorTable[18] = sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1]; if( sectorTable[18] == null ) { sectorTable[18] = MissingSector; sectorTable[0].PartialCulling |= Voxelarium.FACEDRAW_Operations.ABOVE; }
			for( i = 0; i < 27; i++ ) SectorDataTable[i] = sectorTable[i].data.data;


			var xc, yc, zc;
			var xp, yp, zp;
			var xpp, ypp, zpp;
			var info;

      const tables = sector.cluster.lookupTables;
			//sectorTable[0].Flag_Void_Regular = true;
			//sectorTable[0].Flag_Void_Transparent = true;

			for( xc = 0; xc < cluster.sectorSizeX; xc++ )
			{
				xp = xc + 1; xpp = xc + 2;
				for( zc = 0; zc < cluster.sectorSizeZ; zc++ )
				{
					zp = zc + 1; zpp = zc + 2;

					// Prefetching the bloc matrix (only 2 rows)
					//    BlocMatrix[1][0] = SectorDataTable[(VoxelSector.tables.tableX[xc ]+tables.tableY[0]+tables.tableZ[zc ])][tables.ofTableX[xc]+tables.ofTableY[0]+tables.ofTableZ[zc]];
					BlocMatrix[1][1] = SectorDataTable[( tables.tableX[xp] + tables.tableY[0] + tables.tableZ[zc] )][tables.ofTableX[xp] + tables.ofTableY[0] + tables.ofTableZ[zc]];
					//    BlocMatrix[1][2] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[0]+tables.tableZ[zc ])][tables.ofTableX[xpp]+tables.ofTableY[0]+tables.ofTableZ[zc ]]
					BlocMatrix[1][3] = SectorDataTable[( tables.tableX[xc] + tables.tableY[0] + tables.tableZ[zp] )][tables.ofTableX[xc] + tables.ofTableY[0] + tables.ofTableZ[zp]];
					BlocMatrix[1][4] = SectorDataTable[( tables.tableX[xp] + tables.tableY[0] + tables.tableZ[zp] )][tables.ofTableX[xp] + tables.ofTableY[0] + tables.ofTableZ[zp]];
					BlocMatrix[1][5] = SectorDataTable[( tables.tableX[xpp] + tables.tableY[0] + tables.tableZ[zp] )][tables.ofTableX[xpp] + tables.ofTableY[0] + tables.ofTableZ[zp]];
					//    BlocMatrix[1][6] = SectorDataTable[(tables.tableX[xc ]+tables.tableY[0]+tables.tableZ[zpp])][tables.ofTableX[xc ]+tables.ofTableY[0]+tables.ofTableZ[zpp]]
					BlocMatrix[1][7] = SectorDataTable[( tables.tableX[xp] + tables.tableY[0] + tables.tableZ[zpp] )][tables.ofTableX[xp] + tables.ofTableY[0] + tables.ofTableZ[zpp]];
					//    BlocMatrix[1][8] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[0]+tables.tableZ[zpp])][tables.ofTableX[xpp]+tables.ofTableY[0]+tables.ofTableZ[zpp]]

					//    BlocMatrix[2][0] = SectorDataTable[(tables.tableX[xc ]+tables.tableY[1]+tables.tableZ[zc ])][tables.ofTableX[xc ]+tables.ofTableY[1]+tables.ofTableZ[zc ]]
					BlocMatrix[2][1] = SectorDataTable[( tables.tableX[xp] + tables.tableY[1] + tables.tableZ[zc] )][tables.ofTableX[xp] + tables.ofTableY[1] + tables.ofTableZ[zc]];
					//    BlocMatrix[2][2] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[1]+tables.tableZ[zc ])][tables.ofTableX[xpp]+tables.ofTableY[1]+tables.ofTableZ[zc ]]
					BlocMatrix[2][3] = SectorDataTable[( tables.tableX[xc] + tables.tableY[1] + tables.tableZ[zp] )][tables.ofTableX[xc] + tables.ofTableY[1] + tables.ofTableZ[zp]];
					BlocMatrix[2][4] = SectorDataTable[( tables.tableX[xp] + tables.tableY[1] + tables.tableZ[zp] )][tables.ofTableX[xp] + tables.ofTableY[1] + tables.ofTableZ[zp]];
					BlocMatrix[2][5] = SectorDataTable[( tables.tableX[xpp] + tables.tableY[1] + tables.tableZ[zp] )][tables.ofTableX[xpp] + tables.ofTableY[1] + tables.ofTableZ[zp]];
					//    BlocMatrix[2][6] = SectorDataTable[(tables.tableX[xc ]+tables.tableY[1]+tables.tableZ[zpp])][tables.ofTableX[xc ]+tables.ofTableY[1]+tables.ofTableZ[zpp]]
					BlocMatrix[2][7] = SectorDataTable[( tables.tableX[xp] + tables.tableY[1] + tables.tableZ[zpp] )][tables.ofTableX[xp] + tables.ofTableY[1] + tables.ofTableZ[zpp]];
					//    BlocMatrix[2][8] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[1]+tables.tableZ[zpp])][tables.ofTableX[xpp]+tables.ofTableY[1]+tables.ofTableZ[zpp]]

					for( yc = 0; yc < cluster.sectorSizeY; yc++ )
					{
						yp = yc + 1; ypp = yc + 2;

						// Scrolling bloc matrix by exchangingypp references.
						tmpp = BlocMatrix[0];
						BlocMatrix[0] = BlocMatrix[1];
						BlocMatrix[1] = BlocMatrix[2];
						BlocMatrix[2] = tmpp;

						// Fetching a new bloc of data slice;
                        var hereOfs;

						//      BlocMatrix[2][0] = SectorDataTable[(tables.tableX[xc ]+tables.tableY[ypp]+tables.tableZ[zc ])].Data;    [tables.ofTableX[xc ]+tables.ofTableY[ypp]+tables.ofTableZ[zc ]]
						BlocMatrix[2][1] = SectorDataTable[( tables.tableX[xp] + tables.tableY[ypp] + tables.tableZ[zc] )][tables.ofTableX[xp] + tables.ofTableY[ypp] + tables.ofTableZ[zc]];
						//      BlocMatrix[2][2] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[ypp]+tables.tableZ[zc ])].Data;	   [tables.ofTableX[xpp]+tables.ofTableY[ypp]+tables.ofTableZ[zc ]]
						BlocMatrix[2][3] = SectorDataTable[( tables.tableX[xc] + tables.tableY[ypp] + tables.tableZ[zp] )][tables.ofTableX[xc] + tables.ofTableY[ypp] + tables.ofTableZ[zp]];
						BlocMatrix[2][4] = SectorDataTable[( tables.tableX[xp] + tables.tableY[ypp] + tables.tableZ[zp] )][tables.ofTableX[xp] + tables.ofTableY[ypp] + tables.ofTableZ[zp]];
						BlocMatrix[2][5] = SectorDataTable[( tables.tableX[xpp] + tables.tableY[ypp] + tables.tableZ[zp] )][tables.ofTableX[xpp] + tables.ofTableY[ypp] + tables.ofTableZ[zp]];
                        if( !BlocMatrix[2][5] ){
                            console.log( "voxel in sector has become undefined.")
                            return;
                            //debugger
                        }
						//      BlocMatrix[2][6] = SectorDataTable[(tables.tableX[xc ]+tables.tableY[ypp]+tables.tableZ[zpp])].Data;	   [tables.ofTableX[xc ]+tables.ofTableY[ypp]+tables.ofTableZ[zpp]]
						BlocMatrix[2][7] = SectorDataTable[( tables.tableX[xp] + tables.tableY[ypp] + tables.tableZ[zpp] )][tables.ofTableX[xp] + tables.ofTableY[ypp] + tables.ofTableZ[zpp]];
						//      BlocMatrix[2][8] = SectorDataTable[(tables.tableX[xpp]+tables.tableY[ypp]+tables.tableZ[zpp])].Data;	   [tables.ofTableX[xpp]+tables.ofTableY[ypp]+tables.ofTableZ[zpp]]

						// Compute face culling info
						info = 0;
						if( BlocMatrix[1][4] )
						{
                            let MainVoxelDrawInfo = BlocMatrix[1][4].properties.DrawInfo;
							let SubTable = Voxelarium.IntFaceStateTable[MainVoxelDrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];

							info |= ( ( SubTable[BlocMatrix[1][1].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.BEHIND );
							info |= ( ( SubTable[BlocMatrix[1][7].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.AHEAD );
							info |= ( ( SubTable[BlocMatrix[1][3].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.LEFT );
							info |= ( ( SubTable[BlocMatrix[1][5].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.RIGHT );
							info |= ( ( SubTable[BlocMatrix[0][4].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.BELOW );
							info |= ( ( SubTable[BlocMatrix[2][4].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS] ) & Voxelarium.FACEDRAW_Operations.ABOVE );
						}

						// Write face culling info to face culling table
                        sector.data.FaceCulling[tables.ofTableX[xp] + tables.ofTableY[yp] + tables.ofTableZ[zp]] = info;
					}
				}
			}

		}


		,SectorUpdateFaceCulling_Partial : function ( cluster, sector
					, FacesToDraw, Isolated )
		{
			var MissingSector;
			var Sector_In, Sector_Out;
			var i;
			var CuledFaces;
			var Off_Ip, Off_In, Off_Op, Off_Out, Off_Aux;
			var VoxelData_In, VoxelData_Out;
			var VoxelFC_In;
			var x, y, z;
			var FaceState;
			//extern ushort IntFaceStateTable[][8];

			x = sector.pos.x;
			y = sector.pos.y;
			z = sector.pos.z;

			if( Isolated ) MissingSector = cluster.WorkingEmptySector;
			else MissingSector = cluster.WorkingFullSector;

			Sector_In = sector; if( Sector_In == null ) return ( 0 );
			Sector_Out = null;  // again a redundant assignment
			CuledFaces = 0;

			// Top Side
      VoxelFC_In = Sector_In.data.FaceCulling;
      VoxelData_In = Sector_In.data;

			if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.ABOVE ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1])
           || ( Sector_Out = MissingSector ) )  )
				{
					VoxelData_Out = Sector_Out.data;

					for( Off_Ip = cluster.sectorSizeY - 1, Off_Op = 0;
						Off_Ip < ( cluster.sectorSizeY * cluster.sectorSizeX );
						Off_Ip += cluster.sectorSizeY,
						Off_Op += cluster.sectorSizeY ) // x (0..15)
					{
						for( Off_Aux = 0;
							Off_Aux < ( cluster.sectorSizeX * cluster.sectorSizeY * cluster.sectorSizeZ );
							Off_Aux += ( cluster.sectorSizeX * cluster.sectorSizeY ) ) // z (0..15)
						{
							Off_In = Off_Ip + Off_Aux;
							Off_Out = Off_Op + Off_Aux;
							FaceState = Voxelarium.IntFaceStateTable[VoxelData_In.data[Off_In].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][VoxelData_Out.data[Off_Out].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
							if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.ABOVE;
							else VoxelFC_In[Off_In] &= ( ( ~Voxelarium.FACEDRAW_Operations.ABOVE ) & 0xFF );
						}
					}
					CuledFaces |= Voxelarium.FACEDRAW_Operations.ABOVE;
				}
			// Bottom Side

			if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.BELOW ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1]) || ( Sector_Out = MissingSector)) != null )
				{
					VoxelData_Out = Sector_Out.data;

					for( Off_Ip = 0, Off_Op = cluster.sectorSizeY - 1;
						 Off_Ip < ( cluster.sectorSizeY * cluster.sectorSizeZ );
						 Off_Ip += cluster.sectorSizeY,
						 Off_Op += cluster.sectorSizeY ) // x (0..15)
					{
						for( Off_Aux = 0;
							 Off_Aux < ( cluster.sectorSizeX * cluster.sectorSizeY * cluster.sectorSizeZ );
							 Off_Aux += ( cluster.sectorSizeX * cluster.sectorSizeY ) ) // z (0..15)
						{
							Off_In = Off_Ip + Off_Aux;
							Off_Out = Off_Op + Off_Aux;
							Voxel_In = VoxelData_In.data[Off_In];
							Voxel_Out = VoxelData_Out.data[Off_Out];
							//ZVoxelType * VtIn =  VoxelTypeTable[ Voxel_In ];
							//ZVoxelType * VtOut = VoxelTypeTable[ Voxel_Out ];


							FaceState = Voxelarium.IntFaceStateTable[Voxel_In.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][Voxel_Out.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];

							//FaceState = IntFaceStateTable[ VoxelTypeTable[ VoxelData_In.Data[Off_In] ].DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS ][ VoxelTypeTable[ VoxelData_Out.Data[Off_Out] ].DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS ];
							if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.BELOW;
							else VoxelFC_In[Off_In] &= ( ~Voxelarium.FACEDRAW_Operations.BELOW & 0xFF );
						}
					}
					CuledFaces |= Voxelarium.FACEDRAW_Operations.BELOW;
				}
					// Left Side

					if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.LEFT ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1]) || ( Sector_Out = MissingSector)) != null )
				{
					VoxelData_Out = Sector_Out.data;
					// VoxelData_In[63]=1;
					// VoxelData_In[63 + cluster.sectorSizeY*15 ]=14; // x
					// VoxelData_In[63 + cluster.sectorSizeY * cluster.sectorSizeX * 15] = 13; // z

					for( Off_Ip = 0, Off_Op = (cluster.sectorSizeY * ( cluster.sectorSizeX - 1 ));
						Off_Ip < ( cluster.sectorSizeY * cluster.sectorSizeX * cluster.sectorSizeZ );
						Off_Ip += ( cluster.sectorSizeY * cluster.sectorSizeX ),
						Off_Op += ( cluster.sectorSizeY * cluster.sectorSizeX ) ) // z (0..15)
					{
						for( Off_Aux = 0; Off_Aux < cluster.sectorSizeY; Off_Aux++ ) // y (0..63)
						{
							Off_In = Off_Ip + Off_Aux;
							Off_Out = Off_Op + Off_Aux;
							//VoxelData_In[Off_In]=1; VoxelData_Out[Off_Out]=14;
							FaceState = Voxelarium.IntFaceStateTable[VoxelData_In.data[Off_In].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][VoxelData_Out.data[Off_Out].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
							if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.LEFT;
							else VoxelFC_In[Off_In] &= ( ~Voxelarium.FACEDRAW_Operations.LEFT & 0xFF );
						}
					}
					CuledFaces |= Voxelarium.FACEDRAW_Operations.LEFT;
				}

			// Right Side

			if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.RIGHT ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1]) || ( Sector_Out = MissingSector)) != null )
				{
					VoxelData_Out = Sector_Out.data;

					for( Off_Ip = ( cluster.sectorSizeY * ( cluster.sectorSizeX - 1 )), Off_Op = 0;
						Off_Op < ( cluster.sectorSizeY * cluster.sectorSizeX * cluster.sectorSizeZ );
						Off_Ip += ( cluster.sectorSizeY * cluster.sectorSizeX ), Off_Op += ( cluster.sectorSizeY * cluster.sectorSizeX ) ) // z (0..15)
					{
						for( Off_Aux = 0; Off_Aux < cluster.sectorSizeY; Off_Aux++ ) // y (0..63)
						{
							Off_In = Off_Ip + Off_Aux;
							Off_Out = Off_Op + Off_Aux;
							FaceState = Voxelarium.IntFaceStateTable[VoxelData_In.data[Off_In].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][VoxelData_Out.data[Off_Out].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
							if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.RIGHT; else VoxelFC_In[Off_In] &= ( ~Voxelarium.FACEDRAW_Operations.RIGHT & 0xFF );
						}
					}
					CuledFaces |= Voxelarium.FACEDRAW_Operations.RIGHT;
				}

			// Front Side

			if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.AHEAD ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1]) || ( Sector_Out = MissingSector)) != null )
				{
					VoxelData_Out = Sector_Out.data;

					for( Off_Ip = ( cluster.sectorSizeY * cluster.sectorSizeX * ( cluster.sectorSizeZ - 1 ) ), Off_Op = 0;
						Off_Op < ( cluster.sectorSizeY * cluster.sectorSizeX );
						Off_Ip += cluster.sectorSizeY, Off_Op += cluster.sectorSizeY ) // x (0..15)
					{
						for( Off_Aux = 0; Off_Aux < cluster.sectorSizeY; Off_Aux++ ) // y (0..63)
						{
							Off_In = Off_Ip + Off_Aux;
							Off_Out = Off_Op + Off_Aux;
							FaceState = Voxelarium.IntFaceStateTable[VoxelData_In.data[Off_In].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][VoxelData_Out.data[Off_Out].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
							if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.AHEAD;
							else VoxelFC_In[Off_In] &= ( ~Voxelarium.FACEDRAW_Operations.AHEAD & 0xFF );
						}
					}
					CuledFaces |= Voxelarium.FACEDRAW_Operations.AHEAD;
				}

			// Back Side

			if( ( FacesToDraw & Voxelarium.FACEDRAW_Operations.BEHIND ) != 0 )
				if( ( ( Sector_Out = sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1] ) || ( Sector_Out = MissingSector ) ) != null )
						{
							VoxelData_Out = Sector_Out.data;

							for( Off_Ip = 0, Off_Op = ( cluster.sectorSizeY * cluster.sectorSizeX * ( cluster.sectorSizeZ - 1 ) );
								Off_Ip < ( cluster.sectorSizeY * cluster.sectorSizeX );
								Off_Ip += cluster.sectorSizeY, Off_Op += cluster.sectorSizeY ) // x (0..15)
							{
								for( Off_Aux = 0; Off_Aux < cluster.sectorSizeY; Off_Aux++ ) // y (0..63)
								{
									Off_In = Off_Ip + Off_Aux;
									Off_Out = Off_Op + Off_Aux;
									FaceState = Voxelarium.IntFaceStateTable[VoxelData_In.data[Off_In].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS][VoxelData_Out.data[Off_Out].properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_CULLINGBITS];
									if( FaceState != 0 ) VoxelFC_In[Off_In] |= Voxelarium.FACEDRAW_Operations.BEHIND; else VoxelFC_In[Off_In] &= ( ~Voxelarium.FACEDRAW_Operations.BEHIND & 0xFF );
								}
							}
							CuledFaces |= Voxelarium.FACEDRAW_Operations.BEHIND;
						}

			//sector.PartialCulling ^= CuledFaces & ( Voxelarium.FACEDRAW_Operations.ABOVE | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.BEHIND );
			//sector.PartialCulling &= ( Voxelarium.FACEDRAW_Operations.ABOVE | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.BEHIND );
			if( CuledFaces != 0 )
			{
				//Log.log( "sector {0} {1} {2} is dirty", sector.pos.x, sector.pos.y, sector.pos.z );
				Sector_Out.Flag_Render_Dirty = true;
        Sector_In.Flag_Render_Dirty = true;
			}

			return ( CuledFaces );
		}

		, UpdateCulling : function ( Location, ImportanceFactor )
		{
			if( Location.sector == null )
			{
				return;
			}
			Location.sector.cluster.culler.CullSingleVoxel( Location.sector, Location.Offset );

			Location.sector.Flag_IsModified |= ImportanceFactor;
		}

		, SetVoxel_WithCullingUpdate : function ( VoxelType
							, ImportanceFactor
							, CreateExtension
							, Location )
		{
			if( !Location.sector )
				return false;

			// Delete Old voxel extended informations if any
			var Voxel = Location.sector.data.data[Location.Offset];
			var OtherInfos = Location.sector.data.otherInfos[Location.Offset];

			if( OtherInfos )
			{
				if( VoxelType.properties.Is_HasAllocatedMemoryExtension ) Voxel.deleteVoxelExtension( otherInfos );
			}

			// Storing Extension
			if( VoxelType.createVoxelExtension )
				Location.sector.Data.OtherInfos[Location.Offset] = VoxelType.createVoxelExtension();

			// Storing Voxel

			Location.sector.data.data[Location.Offset] = VoxelType;

			if( VoxelType.properties.Is_Active )
				Location.sector.Flag_IsActiveVoxels = true;

			UpdateCulling( Location, ImportanceFactor );
			return ( true );
		}

		, MakeSectorRenderingData : function ( sector )
		{
			var face = new THREE.Vector4( 255, 0, 0, 255 ), edge = new THREE.Vector4( 0, 0, 0, 255 );
			var power = 400;
			var x, y, z;
			var ofs;
			var info;
			var cube;
			/* build sector geometry */
      var cluster = sector.cluster;
			var Offset;
			var cubx, cuby, cubz;
			var Sector_Display_x, Sector_Display_y, Sector_Display_z;
			var Draw;
            var P0,P1,P2,P3,P4,P5,P6,P7;

            if( !sector.solid_geometry ) {
                sector.solid_geometry = cluster.getGeometryBuffer();
                sector.Flag_Render_Dirty = true;
            }
            if( !sector.data.FaceCulling )
            {
                sector.culler = cluster.mesher.culler;
                this.initCulling( sector );
              }
			// Display list creation or reuse.
			if( sector.Flag_Render_Dirty )
			{
				var geometry = sector.solid_geometry;
				var voxelSize = cluster.voxelUnitSize;
				var FaceCulling = sector.data.FaceCulling;
				//Log.log( "Is Dirty Building sector {0} {1} {2}", sector.pos.x, sector.pos.y, sector.pos.z );
				Sector_Display_x = ( sector.pos.x * cluster.sectorSizeX * voxelSize );
				Sector_Display_y = ( sector.pos.y * cluster.sectorSizeY * voxelSize );
				Sector_Display_z = ( sector.pos.z * cluster.sectorSizeZ * voxelSize );

				sector.Flag_Void_Regular = true;
				sector.Flag_Void_Transparent = true;
				sector.Flag_Void_Custom = true;
                //sector.physics.Empty = true;
				{
					geometry.clear();
					/*
					Log.log( "sector is {6} {7} {8} near l{0} r{1} ab{2} bl{3} bh{4} ah{5}"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT-1] != null ) ? "Yes" : "no"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1] != null ) ? "Yes" : "no"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1] != null ) ? "Yes" : "no"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1] != null ) ? "Yes" : "no"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1] != null ) ? "Yes" : "no"
						, ( sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1] != null ) ? "Yes" : "no"
						, sector.pos.x, sector.pos.y, sector.pos.z
						);
					*/
          sector.data.data.forEach( (voxel,Offset)=>
					{
                        if( geometry.available > 256000 ){
                            debugger;
                            return;
                        }
                        if( !voxel ) return;
						{
							{
								info = FaceCulling[Offset];

								if( voxel && info != Voxelarium.FACEDRAW_Operations.NONE )
								{
                                    if( voxel.properties.DrawInfo === Voxelarium.ZVOXEL_DRAWINFO_VOID )
                                        Draw = false;
									else if( voxel.properties.Draw_TransparentRendering )
										{ Draw = false; sector.Flag_Void_Transparent = false; }
									else
										{ Draw = true; sector.Flag_Void_Regular = false; }
								}
								else
									Draw = false;

								if( Draw )
								{
									var box = voxel.TextureCoords;
									var face_is_shaded;

									if( !Voxelarium.Settings.use_basic_material &&
                      ( voxel.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_SHADER ) != 0 )
									{
										face = voxel.properties.FaceColor;
										edge = voxel.properties.EdgeColor;
										power = voxel.properties.EdgePower;
										face_is_shaded = true;
									}
									else 
                   {
                    cube = voxel;
	                  face_is_shaded = false; // uses texture instead of algorithm
                  }


									if( info != 0 )
									{
										//Log.log( "Set sector {0} {1} {2} offset {3}   {4:x}", sector.pos.x, sector.pos.y, sector.pos.z, Offset, info );
										//sector.physics.SetVoxel( Offset );
									}
									else
									{
										//sector.physics.ClearVoxel( Offset );
										//continue;
									}


                  cubx = Sector_Display_x + voxelSize * ( Math.floor( Offset / cluster.sectorSizeY ) % cluster.sectorSizeX );
									cuby = Sector_Display_y + voxelSize * ( ( Offset ) % cluster.sectorSizeY );
									cubz = Sector_Display_z + voxelSize * ( Math.floor( Offset / (cluster.sectorSizeX * cluster.sectorSizeY ) ) % cluster.sectorSizeZ );
									//cubx = ( x * voxelSize + Sector_Display_x );
									//cuby = ( y * voxelSize + Sector_Display_y );
									//cubz = ( z * voxelSize + Sector_Display_z );

									if( 0 != ( voxel.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_SPECIALRENDERING ))
									{ /*VoxelTypeTable[cube].SpecialRender( cubx, cuby, cubz ); */
										console.log( "Need to add custom pass for special render" );
										return;//continue;
									}

									P0 = new THREE.Vector3( cubx, cuby, cubz );
									P1 = new THREE.Vector3( cubx + voxelSize, cuby, cubz );
									P2 = new THREE.Vector3( cubx + voxelSize,cuby, cubz + voxelSize );
									P3 = new THREE.Vector3( cubx, cuby, cubz + voxelSize );
									P4 = new THREE.Vector3( cubx, cuby + voxelSize, cubz );
									P5 = new THREE.Vector3( cubx + voxelSize, cuby + voxelSize, cubz );
									P6 = new THREE.Vector3( cubx + voxelSize, cuby + voxelSize, cubz + voxelSize );
									P7 = new THREE.Vector3( cubx, cuby + voxelSize, cubz + voxelSize );

									//Left
									if( ( info & Voxelarium.FACEDRAW_Operations.LEFT ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P4 , P0, P3, P7 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.LEFT], P3, P7, P0, P4, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.LEFT], P3, P7, P0, P4, voxel.textureCoords );
									}

									// Right
									if( ( info & Voxelarium.FACEDRAW_Operations.RIGHT ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P5, P6, P2, P1 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.RIGHT], P1, P5, P2, P6, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.RIGHT], P1, P5, P2, P6, voxel.textureCoords );
									}
									//Front
									if( ( info & Voxelarium.FACEDRAW_Operations.BEHIND ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P0, P4, P5, P1 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.BEHIND], P0, P4, P1, P5, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.BEHIND], P0, P4, P1, P5, voxel.textureCoords );
									}

									//Back
									if( ( info & Voxelarium.FACEDRAW_Operations.AHEAD ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P2, P6, P3, P7 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.AHEAD], P2, P6, P3, P7, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.AHEAD], P2, P6, P3, P7, voxel.textureCoords );
									}

									// Top
									if( ( info & Voxelarium.FACEDRAW_Operations.ABOVE ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P4, P7, P5, P6 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.ABOVE], P4, P7, P5, P6, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.ABOVE], P4, P7, P5, P6, voxel.textureCoords );
									}

									// Bottom
									if( ( info & Voxelarium.FACEDRAW_Operations.BELOW ) != 0 )
									{
										//Log.log( "Add {0} {1} {2} {3}", P0, P1, P3, P2 );
										if( face_is_shaded )
											geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.BELOW], P3, P0, P2, P1, face, edge, power );
										else
											geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.BELOW], P3, P0, P2, P1, voxel.textureCoords );
									}
								}
								//else
								//	sector.physics.ClearVoxel( Offset );
							}
						}
					});
				}
        geometry.markDirty();
				sector.Flag_Render_Dirty = false;
			}
		}

        , fixed_lists : false

		, MakeSectorRenderingData_Sorted : function ( sector, viewed_as
											, centerX, centerY, centerZ )
		{
			if( sector.Flag_Void_Transparent )
				return;

			if( !fixed_lists )
			{
				for( var n = 19; n < 27; n++ )
					for( var m = 0; m < 3; m++ )
						OrderedFaces[n][m] = 0;
				fixed_lists = true;
			}

            var face = new THREE.Vector4( 256, 0, 0, 256 ), edge = new THREE.Vector4( 0, 0, 0, 256 );
			var power = 400;
			var x, y, z;
			var info;
			var sorted_draw_info = sorted_draw_infos[viewed_as];
			var cube, prevcube;
			/* build sector geometry */

			var Offset;
			var cubx, cuby, cubz;
			var Sector_Display_x, Sector_Display_y, Sector_Display_z;
			var Draw;

			var P0, P1, P2, P3, P4, P5, P6, P7;

			//Log.log( "Building sector {0} {1} {2}", sector.pos.x, sector.pos.y, sector.pos.z );
			// Display list creation or reuse.
			var geometry = sector.transparent_geometry;
			var voxelSize = sector.cluster.voxelUnitSize;
			var FaceCulling = sector.data.FaceCulling;
			Sector_Display_x = ( sector.pos.x * sector.Size_x * voxelSize );
			Sector_Display_y = ( sector.pos.y * sector.Size_y * voxelSize );
			Sector_Display_z = ( sector.pos.z * sector.Size_z * voxelSize );

			var SectorIndexes = SortedSectorIndexes[viewed_as];
			/*
			if( geometry.transparent_render_sorting != viewed_as )
			{
				geometry.transparent_render_sorting = viewed_as;
				sector.Flag_Render_Dirty_Transparent = true;
				geometry.sortedX = -1;
			}
			if( viewed_as == Voxelarium.RelativeVoxelOrds.INCENTER )
			{
				if( center_sorted_x != centerX
					|| center_sorted_y != centerY
					|| center_sorted_z != centerZ )
				{
					sector.Flag_Render_Dirty_Transparent = true;
					BuildSortListInSector( centerX, centerY, centerZ );
				}
			}
			*/
			if( sector.Flag_Render_Dirty_Transparent )
			{
				//Log.log( "Regnerate Alpha Geometry {0} {1} {2}", sector.pos.x, sector.pos.y, sector.pos.z );
				{
					var face_is_shaded = true;
					var view_order_list = null;
					geometry.Clear();

					prevcube = 0;
					for( var OffsetIndex = 0; OffsetIndex < VoxelSector.ZVOXELBLOCKCOUNT; OffsetIndex++ )
					{
						{
							{
								Offset = SectorIndexes[OffsetIndex];

								cube = sector.data.data[Offset];
								info = FaceCulling[Offset];// & (Voxelarium.FACEDRAW_Operations.ALL_BITS);// sorted_draw_info;
								//info = (Voxelarium.FACEDRAW_Operations)FaceCulling[Offset] & sorted_draw_info;

								if( cube && ( info )!= Voxelarium.FACEDRAW_Operations.NONE )
								{
									Draw = cube.properties.Draw_TransparentRendering;
								}
								else
									Draw = false;

								if( Draw )
								{
									var box;
									if( prevcube !== cube )
									{
										box = voxel.textureCoords;
										if( ( cube.properties.DrawInfo & Voxelarium.ZVOXEL_DRAWINFO_SHADER ) != 0 )
										{
											face = cube.properties.FaceColor;
											edge = cube.properties.EdgeColor;
											power = cube.properties.EdgePower;
											face_is_shaded = true;
										}
										else
											face_is_shaded = false;
									}
									prevcube = cube;

									cubx = ( Offset / cluster.sectorSizeY ) % cluster.sectorSizeX;
									cuby = ( Offset ) % cluster.sectorSizeY;
									cubz = ( Offset / (cluster.sectorSizeX * cluster.sectorSizeY ) ) % cluster.sectorSizeZ;

									P0.X = cubx; P0.Y = cuby; P0.Z = cubz;
									P1.X = cubx + voxelSize; P1.Y = cuby; P1.Z = cubz;
									P2.X = cubx + voxelSize; P2.Y = cuby; P2.Z = cubz + voxelSize;
									P3.X = cubx; P3.Y = cuby; P3.Z = cubz + voxelSize;
									P4.X = cubx; P4.Y = cuby + voxelSize; P4.Z = cubz;
									P5.X = cubx + voxelSize; P5.Y = cuby + voxelSize; P5.Z = cubz;
									P6.X = cubx + voxelSize; P6.Y = cuby + voxelSize; P6.Z = cubz + voxelSize;
									P7.X = cubx; P7.Y = cuby + voxelSize; P7.Z = cubz + voxelSize;


									if( viewed_as < 1 )
									{
										if( cubx < centerX )
											if( cuby < centerY )
												if( cubz < centerZ )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD];
											else
												if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD];
										else
											if( cuby < centerY )
											if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD];
										else
												if( cubz < centerZ )
											view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND];
										else
											view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD];
									}
									else if( viewed_as < 7 )
									{
										switch( viewed_as )
										{
										case Voxelarium.RelativeVoxelOrds.LEFT:
											if( cuby < centerY )
												if( cubz < centerZ )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD];
											else
												if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD];
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT:
											if( cuby < centerY )
												if( cubz < centerZ )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD];
											else
												if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD];
											break;
										case Voxelarium.RelativeVoxelOrds.AHEAD:
											if( cuby < centerY )
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD];
											else
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD];
											break;
										case Voxelarium.RelativeVoxelOrds.BEHIND:
											if( cuby < centerY )
												if( cubz < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND];
											else
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND];
											break;
										case Voxelarium.RelativeVoxelOrds.ABOVE:
											if( cubz < centerZ )
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND];
											else
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD];
											break;
										case Voxelarium.RelativeVoxelOrds.BELOW:
											if( cubz < centerZ )
												if( cubz < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND];
											else
												if( cubx < centerX )
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD];
												else
													view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD];
											break;
										}
									}
									else if( viewed_as < 19 )
									{
										switch( viewed_as )
										{
										case Voxelarium.RelativeVoxelOrds.LEFT_AHEAD:
											if( cuby < centerY )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD:
											if( cuby < centerY )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.LEFT_BEHIND:
											if( cuby < centerY )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND:
											if( cuby < centerY )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD:
											if( cubx < centerX )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_ABOVE];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.BELOW_AHEAD:
											if( cubx < centerX )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_BELOW];
											break;
										case Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND:
											if( cubx < centerX )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_ABOVE];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.BELOW_BEHIND:
											if( cubx < centerX )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_BELOW];
											break;
										case Voxelarium.RelativeVoxelOrds.LEFT_ABOVE:
											if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_ABOVE];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.LEFT_BELOW:
											if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_BEHIND_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD_BELOW];
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE:
											if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_ABOVE];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_ABOVE];
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT_BELOW:
											if( cubz < centerZ )
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND_BELOW];
											else
												view_order_list = OrderedFaces[Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD_BELOW];
											break;
										}
									}
									else
										view_order_list = OrderedFaces[viewed_as];
									for( var f = 0; f < 6; f++ )
									{
										switch( view_order_list[f] )
										{
										case Voxelarium.RelativeVoxelOrds.LEFT:
											//Left
											if( ( info & Voxelarium.FACEDRAW_Operations.LEFT ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P4 , P0, P3, P7 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.LEFT], P3, P7, P0, P4, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.LEFT], P3, P7, P0, P4, voxel.textureCoords );
											}
											break;
										case Voxelarium.RelativeVoxelOrds.RIGHT:

											// Right
											if( ( info & Voxelarium.FACEDRAW_Operations.RIGHT ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P5, P6, P2, P1 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.RIGHT], P1, P5, P2, P6, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.RIGHT], P1, P5, P2, P6, voxel.textureCoords );
											}
											break;
										case Voxelarium.RelativeVoxelOrds.BEHIND:
											//Front
											if( ( info & Voxelarium.FACEDRAW_Operations.BEHIND ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P0, P4, P5, P1 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.BEHIND], P0, P4, P1, P5, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.BEHIND], P0, P4, P1, P5, voxel.textureCoords );
											}
											break;
										case Voxelarium.RelativeVoxelOrds.AHEAD:
											//Back
											if( ( info & Voxelarium.FACEDRAW_Operations.AHEAD ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P2, P6, P3, P7 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.AHEAD], P2, P6, P3, P7, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.AHEAD], P2, P6, P3, P7, voxel.textureCoords );
											}
											break;
										case Voxelarium.RelativeVoxelOrds.ABOVE:
											// Top
											if( ( info & Voxelarium.FACEDRAW_Operations.ABOVE ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P4, P7, P5, P6 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.ABOVE], P4, P7, P5, P6, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.ABOVE], P4, P7, P5, P6, voxel.textureCoords );
											}
											break;
										case Voxelarium.RelativeVoxelOrds.BELOW:
											// Bottom
											if( ( info & Voxelarium.FACEDRAW_Operations.BELOW ) != 0 )
											{
												//Log.log( "Add {0} {1} {2} {3}", P0, P1, P3, P2 );
												if( face_is_shaded )
													geometry.AddQuad( normals[Voxelarium.RelativeVoxelOrds.BELOW], P3, P0, P2, P1, face, edge, power );
												else
													geometry.AddQuadTexture( normals[Voxelarium.RelativeVoxelOrds.BELOW], P3, P0, P2, P1, voxel.textureCoords );
											}
											break;
										}
									}
								}
							}
						}
					}
				}
                geometry.markDirty();

				sector.Flag_Render_Dirty_Transparent = false;
			}
		}



		, sorted_draw_infos : new Array( 27)
        , SortedSectorIndexes : new Array(27) //ushort[27][];
		, center_sorted_x : -1
        , center_sorted_y : 0
        , center_sorted_z : 0

		/// <summary>
		/// Build the INCENTER order list.
		/// </summary>
		/// <param name="x">voxel position of viewpoint</param>
		/// <param name="y">voxel position of viewpoint</param>
		/// <param name="z">voxel position of viewpoint</param>
		, BuildSortListInSector : function ( cluster, eye_x, eye_y, eye_z )
		{
			var x, y, z;
			var tmpx, tmpy, tmpz;
			var d;
			var val;
			if( center_sorted_x != eye_x || center_sorted_y != eye_y || center_sorted_z != eye_z )
			{
				var n;
				center_sorted_x = eye_x;
				center_sorted_y = eye_y;
				center_sorted_z = eye_z;
				// x, y, z po
				sorter.Clear();
				for( x = 0; x < cluster.sectorSizeX; x++ )
					for( y = 0; y < cluster.sectorSizeY; y++ )
						for( z = 0; z < cluster.sectorSizeZ; z++ )
						{
							val = (ushort)( x * cluster.sectorSizeY + y + z * cluster.sectorSizeX * cluster.sectorSizeY );
							tmpx = x - eye_x;
							tmpy = y - eye_y;
							tmpz = z - eye_z;
							d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
							sorter.Add( d, val );
						}

				var Indexes;
				Indexes = SortedSectorIndexes[0];
				n = VoxelSector.ZVOXELBLOCKCOUNT;
                sorter.forEach( (index)=>{
					// retrieved closest to furthest so... reverse storing it.
					Indexes[--n] = index;
                })
			}
		}


		, BuildSortList : function (  )
		{
			var x, y, z;
			var tmpx, tmpy, tmpz;
			var d;
			var val;
			var binaryOutput = new ushort[VoxelSector.ZVOXELBLOCKCOUNT];
			var binaryOutputIndex = 0;

            var sorter = Voxelarium.sorters[cluster.sectorSize];
            if( !sorter )
                sorter = Voxelarium.sorters[cluster.sectorSize] = Voxelarium.SortingTree( cluster.sectorSize );
			//start_steps += 27;
			sorter.AutoBalance = true;

			var i;
			for( i = Voxelarium.RelativeVoxelOrds.INCENTER;
						i <= Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT_BELOW; i++ )
			{
				var Indexes;
				var n, m;
				var xval, zval;
				Indexes = SortedSectorIndexes[i] = new ushort[VoxelSector.ZVOXELBLOCKCOUNT];
				n = 0;
				m = VoxelSector.ZVOXELBLOCKCOUNT - 1;
				sorter.Clear();
				switch( i )
				{
					case Voxelarium.RelativeVoxelOrds.INCENTER:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL;
						// no information; this one has to be done custom.
						break;
					case Voxelarium.RelativeVoxelOrds.LEFT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.LEFT;
						//for( n = 0; n < VoxelSector.ZVOXELBLOCKCOUNT; n++ )
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)(zval + y); //(ushort)( binaryOutput[n] );
									//x = ( val >> VoxelSector.ZVOXELBLOCSHIFT_Y ) & VoxelSector.ZVOXELBLOCMASK_X;
									//y = ( val  ) & VoxelSector.ZVOXELBLOCMASK_Y;
									//z = ( val >> ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) & VoxelSector.ZVOXELBLOCMASK_Z;
									tmpx = cluster.sectorSizeX - x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									//Log.log("Add {0} {1} {2}  {3}", x, y, z, d);
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.RIGHT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.RIGHT;
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.ABOVE;
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.BELOW;
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = cluster.sectorSizeY - y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.AHEAD;
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ Voxelarium.FACEDRAW_Operations.BEHIND;
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;

					case Voxelarium.RelativeVoxelOrds.LEFT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ (Voxelarium.FACEDRAW_Operations.LEFT|Voxelarium.FACEDRAW_Operations.AHEAD);
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.RIGHT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.AHEAD );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.LEFT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.BEHIND );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.RIGHT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.BEHIND );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y - ( cluster.sectorSizeY / 2 );
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;

					case Voxelarium.RelativeVoxelOrds.ABOVE_LEFT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_RIGHT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.BEHIND | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									val = (ushort)( x * cluster.sectorSizeY + y + z * cluster.sectorSizeX * cluster.sectorSizeY );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;

					case Voxelarium.RelativeVoxelOrds.ABOVE_LEFT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_RIGHT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_LEFT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.BEHIND |Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									val = (ushort)( x * cluster.sectorSizeY + y + z * cluster.sectorSizeX * cluster.sectorSizeY );
									tmpx = cluster.sectorSizeX - x;
									tmpy = y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.ABOVE_RIGHT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.BEHIND |Voxelarium.FACEDRAW_Operations.ABOVE );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;

					case Voxelarium.RelativeVoxelOrds.BELOW_LEFT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.BELOW );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_RIGHT:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.BELOW );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = z - ( cluster.sectorSizeZ / 2 );
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.BEHIND | Voxelarium.FACEDRAW_Operations.BELOW );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = cluster.sectorSizeY - y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.AHEAD | Voxelarium.FACEDRAW_Operations.BELOW );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x - ( cluster.sectorSizeX / 2 );
									tmpy = cluster.sectorSizeY - y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;

					case Voxelarium.RelativeVoxelOrds.BELOW_LEFT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.AHEAD );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_RIGHT_AHEAD:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.AHEAD );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_LEFT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.LEFT | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.BEHIND );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = cluster.sectorSizeX - x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
					case Voxelarium.RelativeVoxelOrds.BELOW_RIGHT_BEHIND:
						sorted_draw_infos[i] = Voxelarium.FACEDRAW_Operations.ALL ^ ( Voxelarium.FACEDRAW_Operations.RIGHT | Voxelarium.FACEDRAW_Operations.BELOW | Voxelarium.FACEDRAW_Operations.BEHIND );
						for( x = 0; x < cluster.sectorSizeX; x++ )
						{
							xval = x * cluster.sectorSizeY;
							for( z = 0; z < cluster.sectorSizeZ; z++ )
							{
								zval = xval + z * cluster.sectorSizeX * cluster.sectorSizeY;
								for( y = 0; y < cluster.sectorSizeY; y++ )
								{
									val = (ushort)( zval + y );
									tmpx = x;
									tmpy = cluster.sectorSizeY - y;
									tmpz = cluster.sectorSizeZ - z;
									d = ( tmpx * tmpx ) + ( tmpy * tmpy ) + ( tmpz * tmpz );
									sorter.Add( d, val );
								}
							}
						}
						break;
				}

				n = VoxelSector.ZVOXELBLOCKCOUNT;
				sorcer.forEach( ()=>
    				{
    					// retrieved closest to furthest so... reverse storing it.
    					//Log.log( "index is {0} {1} {2}"
    					//	, ( index >> VoxelSector.ZVOXELBLOCSHIFT_Y ) & VoxelSector.ZVOXELBLOCMASK_X
    					//	, index & VoxelSector.ZVOXELBLOCMASK_Y
    					//	, ( index >> ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) & VoxelSector.ZVOXELBLOCMASK_Z );
    					Indexes[--n] = index;
    				} );
				start_percent = ( ++start_step * 100 ) / start_steps;


				// strong test to make sure every offset is represented once.
				// paranoid debugging.
				/*
				if( i != Voxelarium.RelativeVoxelOrds.INCENTER )
				{
					int ofs, check;
					for( ofs = 0; ofs < VoxelSector.ZVOXELBLOCKCOUNT; ofs++ )
					{
						for( check = 0; check < VoxelSector.ZVOXELBLOCKCOUNT; check++ )
						{
							if( Indexes[check] == ofs )
								break;
						}
						if( check == VoxelSector.ZVOXELBLOCKCOUNT )
							Debugger.Break();
					}
				}
				*/
			}
		}
    }

    return mesher;
}

const normals = [ THREE.Vector3Zero
        , THREE.Vector3Left
        , THREE.Vector3Right
        , THREE.Vector3Ahead
        , THREE.Vector3Behind
        , THREE.Vector3Above
        , THREE.Vector3Below ];


Voxelarium.OrderedFaces = [
    // CENTER
          null
    // LEFT 1
        , null
    // RIGHT 2
        , null
    // AHEAD 3
        , null
    // BEHIND 4
        , null
    // ABOVE 5
        , null
    // BELOW 6
        , null
    // LEFT_ABOVE  7
        , null
    // RIGHT_ABOVE 8
        , null
    // AHEAD_ABOVE 9
        , null
    // BEHIND_ABOVE  10
        , null
    // LEFT_AHEAD 11
        , null
    // RIGHT_AHEAD 12
        , null
    // LEFT_BELOW 13
        , null
    //RIGHT_BELOW //14
        , null
    //INFRONT_BELOW //15
        , null
    //BEHIND_BELOW  //16
        , null
    //LEFT_BEHIND   //17
        , null
    //BEHIND_RIGHT   //18
        , null
    // LEFT_AHEAD_ABOVE   // 19
        , [ Voxelarium.RelativeVoxelOrds.LEFT, Voxelarium.RelativeVoxelOrds.AHEAD,Voxelarium.RelativeVoxelOrds.ABOVE,Voxelarium.RelativeVoxelOrds.BELOW,Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.RIGHT ]
    // RIGHT_AHEAD_ABOVE  // 20
        , [ Voxelarium.RelativeVoxelOrds.RIGHT, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.LEFT ]
    // LEFT_AHEAD_BELOW   // 21
        , [ Voxelarium.RelativeVoxelOrds.LEFT, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.RIGHT ]
    // RIGHT_AHEAD_BELOW  // 22
        , [ Voxelarium.RelativeVoxelOrds.RIGHT, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.LEFT ]
    // LEFT_BEHIND_ABOVE  // 23
        , [ Voxelarium.RelativeVoxelOrds.LEFT, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.RIGHT ]
    // RIGHT_BEHIND_ABOVE // 24
        , [ Voxelarium.RelativeVoxelOrds.RIGHT, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.LEFT ]
    // LEFT_BEHIND_BELOW  // 25
        , [ Voxelarium.RelativeVoxelOrds.LEFT, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.RIGHT ]
    // RIGHT_BEHIND_BELOW // 26
        , [ Voxelarium.RelativeVoxelOrds.RIGHT, Voxelarium.RelativeVoxelOrds.BEHIND, Voxelarium.RelativeVoxelOrds.BELOW, Voxelarium.RelativeVoxelOrds.ABOVE, Voxelarium.RelativeVoxelOrds.AHEAD, Voxelarium.RelativeVoxelOrds.LEFT ]
    ];

Voxelarium.mesher = { sorters : [] }

},{"./voxels.js":68}],47:[function(require,module,exports){

require( "./packedboolarray.js" )
Voxelarium.ModificationTracker = function(size) {
    return {
        lastCycle : -1,
        cycle : 0,
        modified : Voxelarium.PackedBoolArray( size ),
        clear : function(){ this.lastCycle = this.cycle; modified.clear(); },
        setCycle : function(cycle) { this.cycle = cycle },
        get : function( offset ) { if( this.lastCycle != this.cycle ) return false; return this.modified.get(offset); },
        set : function( offset ) { if( this.lastCycle != this.cycle ) this.clear();  this.modified.set(offset); }
    }
}

},{"./packedboolarray.js":48}],48:[function(require,module,exports){


//FastBit_Array_32k


Voxelarium.PackedBoolArray = function ( size ){
    if( !size )
        size = 32*32*32;
    var pba = {
        _bits : new ArrayBuffer( Math.floor( ( size + 31 ) /32 ) * 4 ),
        bits : null,
        get : function( bit ) { return ( this.bits[bit>>5] & 1 << ( bit & 0x1f ) ) !== 0; },
        set : function( bit ) { this.bits[bit>>5] |= 1 << ( bit & 0x1f ); },
        clear : function( bit ) { this.bits[bit>>5] &= ~(1 << ( bit & 0x1f )) },
        clearAll : function() { for( var n = 0; n < bits.length; n++) bits[n] = 0; }
    };
    pba.bits = new Uint32Array( pba._bits );
    return pba;

}

},{}],49:[function(require,module,exports){

Voxelarium.Reactor = function( world ) {
    var reactor = {
     StepOne : true,
     CycleNum : 0,
     world: world,

    processSectors : function ( world, LastLoopTime )
    {
        var x, y, z;

        var LowActivityTrigger;

        //Log.log( "Begin Reaction Processing" );
        var Sectors_processed = 0;
        var Voxels_Processed = 0;

        reactor.cycle++;

        if( !reactor.stepOne ) return;

        world.sectors.forEach( (Sector)=>{

            Sectors_processed++;

            LowActivityTrigger = Sector.Flag_IsActiveLowRefresh
                && ( ( ( CycleNum ) & Sector.LowRefresh_Mask ) == 0 );
            Sector.ModifTracker.SetActualCycleNum( CycleNum );
            if( Sector.Flag_IsActiveVoxels | LowActivityTrigger )
            {
                for( x = 0; x <= 6; x++ )
                {
                    if( Sector.near_sectors[x] != null )
                        Sector.near_sectors[x].ModifTracker.SetActualCycleNum( CycleNum );
                }

                var Extension = Sector.data.otherInfos;
                var VoxelP = Sector.data.data;

                var zofs, xofs;
                var IsActiveVoxels = false;
                MainOffset = 0;
                var RSx = Sector.Pos_x * Sector.size_x;
                var RSy = Sector.Pos_y * Sector.size_y;
                var RSz = Sector.Pos_z * Sector.size_z;
                var vref = {
                    world : world,
                    sector : Sector,
                }
                var sleep = Sector.data.sleepState;
                Sector.data.data.forEach( (voxel, MainOfset)=>{
                    if( sleep.get( MainOffset ) )
                        return;

                    vref.VoxelExtension = Extension[MainOffset];
                    vref.Type = VoxelP[MainOffset]
                    if( vref.Type.properties.Is_Active )
                    {

                        if( !Sector.ModifTracker.Get( MainOffset ) ) // If voxel is already processed, don't process it once more in the same cycle.
                        {
                            Voxels_Processed++;
                            vref.wx = RSx + ( vref.x = x );
                            vref.wy = RSy + ( vref.y = y );
                            vref.wz = RSz + ( vref.z = z );
                            vref.offset = MainOffset;
                            Sector.ModifTracker.Set(SecondaryOffset[i]);
                            try
                            {
                                if( vref.Type.React( vref, LastLoopTime ) )
                                    IsActiveVoxels = true;
                                else
                                    vref.Sector.data.sleepState.set( vref.offset );

                            }
                            catch( err )
                            {
                                console.log( "Voxel Reaction Exception : ", err );
                            }
                        }
                    }
                    else
                        sleep.set( MainOffset );
                    Sector.Flag_IsActiveVoxels = IsActiveVoxels;
                })
            }
        })
        //StepOne = false;
        //Log.log( "Finish Reaction Processing {0} {1} ", Sectors_processed, Voxels_Processed );
    }

    }
    return reactor;
}

},{}],50:[function(require,module,exports){
"use strict";

require( "./packedboolarray.js")
require( "./modtracker.js")



Voxelarium.Sector = function( cluster, x, y, z ) {

	var newSector = {
        next : null,
		pred : null,

		GlobalList_Next : null,
		GlobalList_Pred : null,

		near_sectors : new Array(27), // can index with relativeOrds-1 (self is not in this array)

		handle_x : 0, handle_y:0, handle_z : 0, // used in Genesis templates; 'origin' of this sector
		pos : new THREE.Vector3( x, y, z ),

		// Version control : Added for handling better world evolution.
		ZoneType : 0,     // The type of the zone.
		ZoneVersion : 0,  // The version of the generator used for this zone.
		GeneratorVersion : 0, // Main generator version. Updated at world change.
		RingNum : 0,

		cluster : cluster,

		data : { data : new Array( cluster.sectorSize )
				, sleepState : Voxelarium.PackedBoolArray( cluster.sectorSize )
            	, otherInfos : []
							, FaceCulling : null
            	},
		ModifTracker : Voxelarium.ModificationTracker( cluster.sectorSize ),

        mesher : null,

		THREE_solid : null,
        solid_geometry : null,
		transparent_geometry: null,
		custom_geometry: null,
		cachedString : null,

		enableGeometry : function() {
			this.solid_geometry = Voxelarium.GeometryBuffer();
			this.transparent_geometry = Voxelarium.GeometryBuffer();
			//this.custom_geometry = Voxelarium.GeometryBuffer();
		},

		getOffset : function( x, y, z ) {
			return cluster.lookupTables.ofTableX[x+1] + cluster.lookupTables.ofTableY[y+1] + cluster.lookupTables.ofTableZ[z+1];

			var offset;
			offset = ( y % this.cluster.sectorSizeY )
				+ ( ( x % this.cluster.sectorSizeX ) * this.cluster.sectorSizeY )
				+ ( ( z % this.cluster.sectorSizeZ ) * ( this.cluster.sectorSizeY * this.cluster.sectorSizeX ) );
			return offset;
		},

		setCube : function( x, y, z, CubeValue ) {
			var offset = this.getOffset( x, y, z );
			this.data.data[offset] = CubeValue;

			if( CubeValue && CubeValue.extension )
				this.data.otherInfos[offset] = CubeValue.extension();
			else
				this.data.otherInfos[offset] = null;
			this.Flag_Render_Dirty = true;
		},

		getCube : function( x, y, z ) {
			var offset = getOffset( x, y, z );
			return ( newSector.data.data[Offset] );
		},

		MakeSector : function( type ) {
			var x, y, z;
			var Cnt;
			if( type ) Cnt = type;
			else if( this.Pos_y < 0 ) { Cnt = Voxelarium.Voxels.types[0]; this.Flag_Void_Regular = false; this.Flag_Void_Transparent = true; }
			else { Cnt = null; this.Flag_Void_Regular = true; this.Flag_Void_Transparent = true; }
			for( z = 0; z < this.cluster.sectorSizeX; z++ )
			{
				for( y = 0; y < this.cluster.sectorSizeY; y++ )
				{
					for( x = 0; x < this.cluster.sectorSizeZ; x++ )
					{
						newSector.setCube( x, y, z, Cnt );
					}
				}
			}
		},

		getVoxelRef : function(x,y,z) {
			if( x < 0 ) x += this.cluster.sectorSizeX;
			if( y < 0 ) y += this.cluster.sectorSizeY;
			if( z < 0 ) z += this.cluster.sectorSizeZ;
			 return makeVoxelRef( this.cluster, this, x, y, z ); },

		stringify : function() {
			var v = v|| VoxelCompressor();
			var data = v.CompressVoxelData( this.data.data );
			var n = 0;
			var string = "";
			//var sv = new StringView( data.data );
			//var testString = sv.toString();
			//var testString2 = '\u0008\u0000\u0000\u0001\u0002\u0033\u00ef'
			for( n = 0; n < data.bytes_used; n++ ) {
				var val = data.data[n];
				if( !val )
					string += "\\0";
				else {
					var out = String.fromCodePoint( val );
					if( out === "\\" )
						string += "\\/";
					else if( out === "/" )
						string += "\\|";
					else
						string += out;
				}
			}

			var array = new ArrayBuffer(string.length);
			var escape = false;
			var out = 0;
			for( n = 0; n < string.length; n++ )
				{ var val = string.codePointAt( n );
					if( escape ) {
						if( val === 48 )
							val = 0;
						escape = false;
					}else {
						if( val == 92 ) {
							escape = true;
							continue;
						}
					}
					array[out++] = val;
					//console.log( val )
				 };
				 //console.log( "Buffer was", data.data );
				 //console.log( "which became", string );

				 {
					 var test_out = [];
					 console.log( "decoding string just encoded to see if it's valid;if failed, debugger; will trigger")
                                         var a = JSON.stringify(string);
					 var xfer = JSON.parse( a );
					 if( xfer !== string )
					 	debugger;
					 decodeString( string, test_out );
					 if( test_out.length === data.data.length ) {
						 for( var n = 0; n < test_out.length; n++ ) {
							 if( test_out[n] !== data.data[n] )
							 	debugger;

						 }
					 }
				 }
			 this.cachedString = string;
			return string;
		},

		decode : function( string ) {
			console.log( "decode", string );
			if( string === this.cachedString )
				return; // already have this as the thing.
			this.cachedString = string;
			decodeString( string, this.data.data )
			this.Flag_Render_Dirty = true;
			this.cluster.mesher.SectorUpdateFaceCulling( this, true )
			//basicMesher.SectorUpdateFaceCulling_Partial( cluster, sector, Voxelarium.FACEDRAW_Operations.ALL, true )
			this.cluster.mesher.MakeSectorRenderingData( this );

			}



    }

function decodeString( string, into ){
	var bytes = 0;
			for( var n = 0; n < string.length; n++ ){
				if( string[n] === '\\' ) {
					continue;
				} else bytes++;
			}

			var buffer = new ArrayBuffer(bytes);
			bytes = 0;
			for( var n = 0; n < string.length; n++ ){
				if( string[n] === '\\' ) {
					if( string[n+1] === '0' )
						buffer[bytes++] = 0;
					else if( string[n+1] === '/' )
						buffer[bytes++] = '\\';
					else if( string[n+1] === '|' )
						buffer[bytes++] = '/';
					else
						throw new Error( "Invalid encoding" );
					n++;
					continue;
				}
				else
					buffer[bytes++] = string.codePointAt( n );
			}


			var v = v|| VoxelCompressor();
			var data = v.DecompressVoxelData( buffer, into );

		}


    return newSector;
}


function VoxelCompressor() {
		/*
						{
						VoxelDataCompressor vdc = new VoxelDataCompressor();
						ushort[] decompress = new ushort[32 * 32 * 32];
						byte[] data;
						int bytes;
						vdc.CompressVoxelData( Sector.Data.Data, out data, out bytes );
						Log.log( "compressed sector is {0}", bytes, 0 );
						vdc.DecompressVoxelData( data, decompress );
						{
							int n;
							for( n = 0; n < 32 * 32 * 32; n++ )
								if( decompress[n] != Sector.Data.Data[n] )
								{
									int a = 3;
								}
						}
					}

		*/

			/// <summary>
			/// Handles compressing and decompressing ushort array that is the sector content
			/// </summary>
	var vc = {

			WriteCubes : function( stream, bits, count, index )
			{
				// 1 count 2 bits = 3   vs 9
				// 1 count 3 bits = 4   vs 10
				// 1 count  4 bits  = 5     vs 11
				// 1 count  5 bits  = 6     vs 12
				// 1 count  6 bits  = 7     vs 13
				// 1 count  7 bits  = 8     vs 14

				// 2 count 2 bits = 6   vs 9
				// 2 count 3 bits = 8   vs 10
				// 2 count  4 bits  = 10    vs 11
				// 2 count  5 bits  = 12    vs 12
				// 2 count  6 bits  = 14    vs 13
				// 2 count  7 bits  = 16    vs 14

				// 3 count 2 bits = 9   vs 9
				// 3 count 3 bits = 12  vs 10
				// 3 count  4 bits  = 15    vs 11
				// 3 count  5 bits  = 18    vs 12
				// 3 count  6 bits  = 21    vs 13
				// 3 count  7 bits  = 24    vs 14


				if( ( (bits +1) * count ) <= ( 7 + bits ) )
				{
					for( var n = 0; n < count; n++ )
					{
						stream.write( 0, 1 );
						stream.write( index, bits );
					}
				}
				else
				{
					stream.write( 1, 1 );
					//Log.log( "Write count {0}", count );
					/*
					if( ( count & 0x8000 ) != 0 )
					{
						stream.Write( ( ( count >> 15 ) & 0x1F ) | 0x20, 7 );
						stream.Write( ( ( count >> 10 ) & 0x1F ) | 0x20, 7 );
						stream.Write( ( ( count >> 5 ) & 0x1F ) | 0x20, 7 );
						stream.Write( ( ( count  ) & 0x1F ), 7 );
					}
					else */
					count -= 2; // always at least 1, and then this value always starts at atleast 2; and very small delta sets can be 3, but typically 2.
					if( ( count & 0xFC00 ) != 0 )
					{
						stream.write( ( ( count >> 10 ) & 0x1F ) | 0x20, 6 );
						stream.write( ( ( count >> 5 ) & 0x1F ) | 0x20, 6 );
						stream.write( ( ( count ) & 0x1F ), 6 );
					}
					else if( ( count & 0xFFE0 ) != 0 )
					{
						stream.write( ( ( count >> 5 ) & 0x1F ) | 0x20, 6 );
						stream.write( ( ( count ) & 0x1F ) , 6 );
					}
					else
					{
						stream.write( ( ( count ) & 0x1F ), 6 );
					}
					//stream.Write( count, 16 );
					stream.write( index, bits );
				}

			},

			CompressVoxelData : function( data )
			{
				var stream = Voxelarium.BitStream();
				var len = data.length;
				var n;
				var types = [];

				for( n = 0; n < len; n++ )
				{
					var vox = Voxelarium.Voxels.getIndex( data[n] )
					if( types.findIndex( (v) => v===vox ) < 0 )
						types.push( vox );
				}

				var bits = Voxelarium.BitStream.GetMinBitsNeededForValue( types.length - 1 ); // 4 is 0,1,2,3; needs only 2 bits...
				//bits = (bits + 7 ) & 0xf8;
				stream.seek( 16 ); // seek bit count
				stream.write( bits, 8 );
				stream.write( types.length-1, bits );
				types.forEach( (type)=>{
					stream.write( type, 16 ); } );
				var prior_cube = 0xFFFF, cube;
				var index = 0;
				var count = 0;
	            for( n = 0; n < len; n++ )
				{
					var cube = Voxelarium.Voxels.getIndex( data[n] )
					if( prior_cube != cube )
					{
						if( count > 0 )
							vc.WriteCubes( stream, bits, count, index );
						index = types.findIndex( (v)=>(v=== cube ) );
						prior_cube = cube;
						count = 1;
					}
					else
						count++;
				}
				vc.WriteCubes( stream, bits, count, index );

				var result = stream.getBytes();
				result.data[0] = (( result.bytes_used ) & 0xFF);
				result.data[1] = ( ( result.bytes_used ) >> 8);
				// already compressed as can be.
				if( result.bytes_used < 20 )
					return result;

				/* can gzip the stream at this point too and save 10-20% more */
				/*
				MemoryStream final_stream = new MemoryStream();
				final_stream.Seek( 2, SeekOrigin.Begin );
				//DeflateStream gz_stream = new DeflateStream( final_stream, CompressionMode.Compress );
				//GZipStream gz_stream = new GZipStream( final_stream, CompressionMode.Compress );
				GZipStream gz_stream = new GZipStream( final_stream, CompressionLevel.Fastest );
				//for( n = 2; n < bytes_used; n++ )
				//	gz_stream.WriteByte( result[n] );
				gz_stream.Write( result, 2, bytes_used - 2 );
				gz_stream.Close();
				result = final_stream.ToArray();//.GetBuffer();
				Log.log( "Compressed another {0}%", (float)( 100.0f * (float)( bytes_used - result.Length ) / ( bytes_used - 2 ) ) );
				// store old length so we know how much to request decompressing.
				result[0] = (byte)( ( bytes_used ) & 0xFF );
				result[1] = (byte)( ( bytes_used ) >> 8 );
				bytes_used = result.Length;// (int)final_stream.Length;
				gz_stream.Dispose();
				*/
				return result;
			},

			DecompressVoxelData : function(  data, result )
			{
				var stream;
				var DataBytes;
				{
					stream = Voxelarium.BitStream( data );
					stream.seek( 16 ); // seek by bit position
				}
				var types = [];

				var bits;
				var TypeCount;
				bits = stream.read( 8);
				TypeCount = stream.read( bits );
				TypeCount++; // always at least one.
				var n;
				for( n = 0; n < TypeCount; n++ )
				{
					var val;
					val = stream.read( 16 );
					var assertVal;
					assertVal = Voxelarium.Voxels.types[val];
					if( assertVal )
						types.push( assertVal );
					else
						types.push( Voxelarium.Voxels.Void );
				}

				var outpos = 0;
				do
				{
					var vox;
					var val;
					var count;
					val = stream.read( 1 );
					if( val == 0 )
					{
						val = stream.read( bits );
						vox = types[val];
						if( !vox ) debugger;
						result[outpos++] = vox;
					}
					else
					{
						var count_tmp;
						count_tmp = stream.read( 6  );
						count = count_tmp & 0x1F;
						if( ( count_tmp & 0x20 ) != 0 )
						{
							count <<= 5;
							count_tmp = stream.read( 6 );
							count |= count_tmp & 0x1F;
							if( ( count_tmp & 0x20 ) != 0 )
							{
								count <<= 5;
								count_tmp = stream.read( 6 );
								count |= count_tmp & 0x1F;
							}
						}
						count += 2;
						//stream.Read( 16, out count );
						//Log.log( "Read count {0}", count );
						val = stream.read( bits );
						vox = types[val];
						if( !vox ) {
							vox = types[0];
							debugger;
						}
						//console.log( "Set vox to ", vox )
						for( n = 0; n < count; n++ )
							result[outpos++] = vox;
					}
				} while( outpos < result.length );

			}

		}
	return vc;
}

function NearVoxelRef() {
	var result = {
	 sector:this,
	 voxelType:null,
	 offset:0,
	 voxelExtension:null
 	}
	result.voxelType = this.data.data[result.offset];
	result.voxelExtension = this.data.otherInfos[result.offset];
	 return result;
}

function VoxelRef( x, y, z ) {
}

var refPool = [];

Voxelarium.VoxelRef = makeVoxelRef


function makeVoxelRef( cluster, sector, x, y, z )
{
	var result;
	result = refPool.pop();
	if( !result ) {
		result = { sector : sector
				, offset : 0
				, x : x, y : y, z : z
			 	, wx : sector?(sector.pos.x * cluster.sectorSizeX + x):x
				, wy : sector?(sector.pos.y * cluster.sectorSizeY + y):y
				, wz : sector?(sector.pos.z * cluster.sectorSizeZ + z):z
				, voxelType : null
				, cluster : cluster
				, voxelExtension : null
				, forEach : forEach
				, delete : function() { refPool.push( this ); }
				, clone : function() { return this.sector.getVoxelRef( this.x, this.y, this.z ) }
				, getNearVoxel : GetVoxelRef
				 }
		Object.seal( result );
	}
	else {
		result.sector = sector;
		result.offset = 0;
		result.x = x;
		result.y = y;
		result.z = z;
		result.wx = sector?(sector.pos.x * cluster.sectorSizeX + x):x
		result.wy = sector?(sector.pos.y * cluster.sectorSizeY + y):y
		result.wz = sector?(sector.pos.z * cluster.sectorSizeZ + z):z
		result.voxelType = null;
		result.cluster = cluster;
		result.voxelExtension = null;
	}
    if( sector ) {
		// wx coords will still be accurate even if the sub-range and origin sector move now.
		if( result.x < 0 ) { result.x += cluster.sectorSizeX; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT] || result.sector ) }
		if( result.y < 0 ) { result.y += cluster.sectorSizeY; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW] || result.sector ) }
		if( result.z < 0 ) { result.z += cluster.sectorSizeZ; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD] || result.sector ) }
		if( result.x >= cluster.sectorSizeX ) { result.x -= cluster.sectorSizeX; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT] || result.sector ) }
		if( result.y >= cluster.sectorSizeY ) { result.y += cluster.sectorSizeY; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE] || result.sector ) }
		if( result.z >= cluster.sectorSizeZ ) { result.z += cluster.sectorSizeZ; result.sector = ( result.sector && result.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND] || result.sector ) }

		result.offset = ( result.x * cluster.sectorSizeY )  + result.y + ( result.z * ( cluster.sectorSizeY * cluster.sectorSizeX ) );
		  result.voxelType = sector.data.data[result.offset]
		  if( !result.voxelType )
		  	return null;
		  result.voxelExtension = sector.data.otherInfos[result.offset];
    }
	return result;
}

	function forEach( voxelRef2, not_zero, callback )
	{
		var voxelRef1 = this;
		//if( voxelRef1.sector == null || voxelRef2.sector == null )
		//	return not_zero ? 1 : 0;
		if( voxelRef1.cluster !== voxelRef2.cluster )
			return not_zero ? 1 : 0;
		var cluster = voxelRef1.cluster;

		var v1x = voxelRef1.wx;
		var v1y = voxelRef1.wy;
		var v1z = voxelRef1.wz;
		var v2x = voxelRef2.wx;
		var v2y = voxelRef2.wy;
		var v2z = voxelRef2.wz;
		var del_x = v2x - v1x;
		var del_y = v2y - v1y;
		var del_z = v2z - v1z;
		var abs_x = del_x < 0 ? -del_x : del_x;
		var abs_y = del_y < 0 ? -del_y : del_y;
		var abs_z = del_z < 0 ? -del_z : del_z;
		// cannot use iterate if either end is undefined.
		if( del_x != 0 )
		{
			if( del_y != 0 )
			{
				if( del_z != 0 )
				{
					if( abs_x > abs_y || ( abs_z > abs_y ) )
					{
						if( abs_z > abs_x )
						{
							// z is longest path
							var erry = -abs_z / 2;
							var errx = -abs_z / 2;
							var incy = del_y < 0 ? -1 : 1;
							var incx = del_x < 0 ? -1 : 1;
							var incz = del_z < 0 ? -1 : 1;
							{
								var x = v1x;
								var y = v1y;
								for( var z = v1z + incz; z != v2z; z += incz )
								{
									errx += abs_x;
									if( errx > 0 )
									{
										errx -= abs_z;
										x += incx;
									}
									erry += abs_y;
									if( erry > 0 )
									{
										erry -= abs_z;
										y += incy;
									}
									{
										let v = cluster.getVoxelRef( false, x, y, z );
										if( v ) {
											let val = callback( v );
											if( val !== v ) v.delete();
											if( ( !not_zero && val ) || ( not_zero && !val ) )
												return val;
										}
									}
								}
							}
						}
						else
						{
							// x is longest.
							var erry = -abs_x / 2;
							var errz = -abs_x / 2;
							var incy = del_y < 0 ? -1 : 1;
							var incx = del_x < 0 ? -1 : 1;
							var incz = del_z < 0 ? -1 : 1;
							{
								var y = v1y;
								var z = v1z;
								for( var x = v1x + incx; x != v2x; x += incx )
								{
									errz += abs_z;
									if( errz > 0 )
									{
										errz -= abs_x;
										z += incz;
									}
									erry += abs_y;
									if( erry > 0 )
									{
										erry -= abs_x;
										y += incy;
									}
									{
										let v = cluster.getVoxelRef( false, x, y, z );
										if( v ) {
											let val = callback( v );
											if( val !== v ) v.delete();
											if( ( !not_zero && val ) || ( not_zero && !val ) )
												return val;
										}
									}
								}
							}
						}
					}
					else
					{
						// y is longest.
						var errx = -abs_y / 2;
						var errz = -abs_y / 2;
						var incy = del_y < 0 ? -1 : 1;
						var incx = del_x < 0 ? -1 : 1;
						var incz = del_z < 0 ? -1 : 1;
						{
							var x = v1x;
							var z = v1z;
							for( var y = v1y + incy; y != v2y; y += incy )
							{
								errx += abs_x;
								if( errx > 0 )
								{
									errx -= abs_y;
									x += incx;
								}
								errz += abs_z;
								if( errz > 0 )
								{
									errz -= abs_y;
									z += incz;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
				}
				else
				{
					// z is constant
					if( abs_x > abs_y )
					{
						// x is longest
						var erry = -abs_x / 2;
						var incy = del_y < 0 ? -1 : 1;
						var incx = del_x < 0 ? -1 : 1;
						{
							var y = v1y;
							var z = v1z;
							for( var x = v1x + incx; x != v2x; x += incx )
							{
								erry += abs_y;
								if( erry > 0 )
								{
									erry -= abs_x;
									y += incy;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
					else
					{
						// y is longest.
						var errx = -abs_y / 2;
						var incy = del_y < 0 ? -1 : 1;
						var incx = del_x < 0 ? -1 : 1;
						{
							var x = v1x;
							var z = v1z;
							for( var y = v1y + incy; y != v2y; y += incy )
							{
								errx += abs_x;
								if( errx > 0 )
								{
									errx -= abs_y;
									x += incx;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
				}
			}
			else
			{
				if( del_z != 0 )
				{
					if( abs_x > abs_z )
					{
						// x is longest.
						var errz = -abs_x / 2;
						var incx = del_x < 0 ? -1 : 1;
						var incz = del_z < 0 ? -1 : 1;
						{
							var y = v1y;
							var z = v1z;
							for( var x = v1x + incx; x != v2x; x += incx )
							{
								errz += abs_z;
								if( errz > 0 )
								{
									errz -= abs_x;
									z += incz;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
					else
					{
						// z is longest path
						var errx = -abs_z / 2;
						var incx = del_x < 0 ? -1 : 1;
						var incz = del_z < 0 ? -1 : 1;
						{
							var x = v1x;
							var y = v1y;
							for( var z = v1z + incz; z != v2z; z += incz )
							{
								errx += abs_x;
								if( errx > 0 )
								{
									errx -= abs_z;
									x += incx;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
				}
				else
				{
					// x is only changing.
					var incx = del_x < 0 ? -1 : 1;
					for( var x = v1x + incx; x != v2x; x += incx )
					{
						let v = cluster.getVoxelRef( false, x, y, z );
						if( v ) {
							let val = callback( v );
							if( val !== v ) v.delete();
							if( ( !not_zero && val ) || ( not_zero && !val ) )
								return val;
						}
					}
				}
			}
		}
		else
		{
			if( del_y != 0 )
			{
				if( del_z != 0 )
				{
					if( abs_y > abs_z )
					{
						// y is longest.
						var errz = -abs_y / 2;
						var incy = del_y < 0 ? -1 : 1;
						var incz = del_z < 0 ? -1 : 1;
						{
							var x = v1x;
							var z = v1z;
							for( var y = v1y + incy; y != v2y; y += incy )
							{
								errz += abs_z;
								if( errz > 0 )
								{
									errz -= abs_y;
									z += incz;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
					else
					{
						// z is longest path
						var erry = -abs_z / 2;
						var incy = del_y < 0 ? -1 : 1;
						var incz = del_z < 0 ? -1 : 1;
						{
							var x = v1x;
							var y = v1y;
							for( var z = v1z + incz; z != v2z; z += incz )
							{
								erry += abs_y;
								if( erry > 0 )
								{
									erry -= abs_z;
									y += incy;
								}
								{
									let v = cluster.getVoxelRef( false, x, y, z );
									if( v ) {
										let val = callback( v );
										if( val !== v ) v.delete();
										if( ( !not_zero && val ) || ( not_zero && !val ) )
											return val;
									}
								}
							}
						}
					}
				}
				else
				{
					// no del_x, no del_z
					// y is only changing.
					var incy = del_y < 0 ? -1 : 1;
					for( var y = v1y + incy; y != v2y; y += incy )
					{
						let v = cluster.getVoxelRef( false, x, y, z );
						if( v ) {
							let val = callback( v );
							if( val !== v ) v.delete();
							if( ( !not_zero && val ) || ( not_zero && !val ) )
								return val;
						}
					}
				}
			}
			else
			{
				// no del_x, no del_y...
				if( del_z != 0 )
				{
					if( del_z > 0 )
						for( var z = v1z + 1; z < v2z; z++ )
						{
							let v = cluster.getVoxelRef( false, x, y, z );
							if( v ) {
								let val = callback( v );
								if( val !== v ) v.delete();
								if( ( !not_zero && val ) || ( not_zero && !val ) )
									return val;
							}
						}
					else
						for( var z = v2z + 1; z < v1z; z++ )
						{
							let v = cluster.getVoxelRef( false, x, y, z );
							if( v ) {
								let val = callback( v );
								if( val !== v ) v.delete();
								if( ( !not_zero && val ) || ( not_zero && !val ) )
									return val;
							}
						}

				}
				else
				{
					// no delta diff, nothing to do.
				}
			}
		}
		return not_zero ? 1 : 0;
	}

	function GetVoxelRefs( nearOnly )
	{
		var result = {
			ResultSectors : new Array(nearOnly ? 7 : 19),
			ResultOffsets : new Array(nearOnly ? 7 : 19)
		}
		GetVoxelRefs( ResultSectors, ResultOffsets, nearOnly );
	}

	function GetVoxelRef( direction )
	{
		that = this.clone();
		switch( direction )
		{
		default:
			throw new Error( "Creating voxel ref " + direction + " is not implemented " );
			break;
		case Voxelarium.RelativeVoxelOrds.LEFT:
			that.wx--;
			if( that.x > 0 )
			{
				that.x--;
				that.Offset -= that.sector.Size_y;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.x = (byte)( that.sector.Size_x - 1 );
					that.Offset += that.sector.Size_y * ( that.sector.Size_x - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.RIGHT:
			that.wx++;
			if( that.x < (that.sector.Size_x-1 ) )
			{
				that.x++;
				that.Offset += that.sector.Size_y;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.x = 0;
					that.Offset -= that.sector.Size_y * ( that.sector.Size_x - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BEHIND:
			that.wz--;
			if( that.z > 0 )
			{
				that.z--;
				that.Offset -= that.sector.Size_y*that.sector.Size_x;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.z = (byte)( that.sector.Size_z - 1 );
					that.Offset += ( that.sector.Size_x * that.sector.Size_y * ( that.sector.Size_z - 2 ) );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.AHEAD:
			that.wz++;
			if( that.z < ( that.sector.Size_z - 1 ) )
			{
				that.z++;
				that.Offset += that.sector.Size_y*that.sector.Size_x;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.z = 0;
					that.Offset -= ( that.sector.Size_x * that.sector.Size_y * ( that.sector.Size_z - 2 ) );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BELOW:
			that.wy--;
			if( that.y > 0 )
			{
				that.y--;
				that.Offset--;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.y = (byte)( that.sector.Size_y - 1 );
					that.Offset += ( that.sector.Size_y - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.ABOVE:
			that.wy++;
			if( that.y < ( that.sector.Size_y - 1 ) )
			{
				that.y++;
				that.Offset++;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.y = 0;
					that.Offset -= ( that.sector.Size_y - 2 );
				}
			}
			break;
		}
		if( that.sector != null )
		{
			that.Type = that.sector.data.data[that.offset];
			that.VoxelExtension = that.sector.data.otherInfos[that.offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
		return that;
	}

	function GetNearVoxelRef( direction )
	{
		var that = GetNearVoxelRef( )
		var cluster = this.sector.cluster;
		that.sector = this.sector;
		that.Offset = this.Offset;
		switch( direction )
		{
		default:
			throw new NotImplementedException( "Creating voxel ref " + direction + " is not implemented " );
			break;
		case Voxelarium.RelativeVoxelOrds.LEFT:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != 0 )
				that.Offset -= that.sector.Size_y;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
			}
			break;
		case Voxelarium.RelativeVoxelOrds.RIGHT:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y )
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BEHIND:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != 0 )
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
			}
			break;
		case Voxelarium.RelativeVoxelOrds.AHEAD:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) )
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BELOW:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != 0 )
				that.Offset--;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
			}
			break;
		case Voxelarium.RelativeVoxelOrds.ABOVE:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != VoxelSector.ZVOXELBLOCMASK_Y )
				that.Offset++;
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
			}
			break;
		}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}


	function GetNearLeftVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != 0 )
				that.Offset -= that.sector.Size_y;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				if( that.sector != null )
					that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearRightVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y )
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				if( that.sector != null )
					that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearAheadVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) )
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
				if( that.sector != null )
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearBehindVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != 0 )
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
				if( that.sector != null )
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearAboveVoxelRef( that,  self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != VoxelSector.ZVOXELBLOCMASK_Y )
				that.Offset++;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
				if( that.sector != null )
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearBelowVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != 0 )
				that.Offset--;
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
				if( that.sector != null )
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
			}
		if( that.sector != null )
		{
			that.Type = self.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}



	function GetNearVoxelRef( that,  self, direction )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
		switch( direction )
		{
		default:
			throw new NotImplementedException( "Creating voxel ref " + direction + " is not implemented " );
			break;
		case Voxelarium.RelativeVoxelOrds.LEFT:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != 0 )
			{
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.RIGHT:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y )
			{
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BEHIND:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != 0 )
			{
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.AHEAD:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) )
			{
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.BELOW:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != 0 )
			{
				that.Offset--;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
				}
			}
			break;
		case Voxelarium.RelativeVoxelOrds.ABOVE:
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != VoxelSector.ZVOXELBLOCMASK_Y )
			{
				that.Offset++;
			}
			else
			{
				that.sector = self.sector.near_sectors[direction - 1];
				if( that.sector != null )
				{
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
				}
			}
			break;
		}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearLeftVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != 0 )
			{
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				if( that.sector != null )
				{
					that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearRightVoxelRef( that,self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y ) ) != VoxelSector.ZVOXELBLOCMASK_X << VoxelSector.ZVOXELBLOCSHIFT_Y )
			{
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				if( that.sector != null )
				{
					that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_X - 2 );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearAheadVoxelRef( that,self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) )
			{
				that.Offset += VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
				if( that.sector != null )
				{
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearBehindVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) ) ) != 0 )
			{
				that.Offset -= VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
				if( that.sector != null )
				{
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_X * VoxelSector.ZVOXELBLOCSIZE_Y * ( VoxelSector.ZVOXELBLOCSIZE_Z - 2 ) );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearAboveVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != VoxelSector.ZVOXELBLOCMASK_Y )
			{
				that.Offset++;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
				if( that.sector != null )
				{
					that.Offset -= ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetNearBelowVoxelRef( that, self )
	{
		that.sector = self.sector;
		that.Offset = self.Offset;
			if( ( that.Offset & ( VoxelSector.ZVOXELBLOCMASK_Y ) ) != 0 )
			{
				that.Offset--;
			}
			else
			{
				that.sector = self.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
				if( that.sector != null )
				{
					that.Offset += ( VoxelSector.ZVOXELBLOCSIZE_Y - 2 );
				}
			}
		if( that.sector != null )
		{
			that.Type = self.sector.VoxelTypeManager.VoxelTable[that.sector.Data.Data[that.Offset]];
			that.VoxelExtension = that.sector.Data.OtherInfos[that.Offset];
		}
		else
		{
			that.Type = null;
			that.VoxelExtension = null;
		}
	}

	function GetVoxelRefs( nearOnly )
	{
		if( nearOnly )
		{
			var result = new array(7);
			//result[0] = this;
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.LEFT]   , this, Voxelarium.RelativeVoxelOrds.LEFT );
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.RIGHT]  , this, Voxelarium.RelativeVoxelOrds.RIGHT );
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.AHEAD]  , this, Voxelarium.RelativeVoxelOrds.AHEAD );
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.BEHIND] , this, Voxelarium.RelativeVoxelOrds.BEHIND );
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.ABOVE]  , this, Voxelarium.RelativeVoxelOrds.ABOVE );
			GetNearVoxelRef(  result[Voxelarium.RelativeVoxelOrds.BELOW]  , this, Voxelarium.RelativeVoxelOrds.BELOW );
		}
		else
		{
			var result = new VoxelRef[27];
		}
		return result;

	}

	function GetVoxelRefs( ResultSectors,  ResultOffsets,  nearOnly )
	{
		//ResultSectors = new VoxelSector[nearOnly ? 7 : 19];
		//ResultOffsets = new uint[nearOnly ? 7 : 19];

		ResultSectors[Voxelarium.RelativeVoxelOrds.INCENTER] = this.sector;
		var origin = this.Offset.clonse();//( this.x <<VoxelSector.ZVOXELBLOCSHIFT_Y ) + this.y + ( this.z << (VoxelSector.ZVOXELBLOCSHIFT_X +VoxelSector.ZVOXELBLOCSHIFT_Y ) );
		{
			var input = VoxelSector.RelativeVoxelOffsets_Unwrapped;
			var n;
			var idx = 0;
			ResultOffsets[idx] = origin + input[idx]; idx++;
			ResultOffsets[idx] = origin + input[idx]; idx++; //1
			ResultOffsets[idx] = origin + input[idx]; idx++; //2
			ResultOffsets[idx] = origin + input[idx]; idx++; //3
			ResultOffsets[idx] = origin + input[idx]; idx++; //4
			ResultOffsets[idx] = origin + input[idx]; idx++; //5
			ResultOffsets[idx] = origin + input[idx]; idx++; //6
			if( !nearOnly ) for( n = 0; n < 20; n++ ) { ResultOffsets[idx] = origin + input[idx]; idx++; }

			if( this.x == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT]
						= this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector;
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.LEFT - 1, 0]] += ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.LEFT - 1, n]] += ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else if( this.x == ( VoxelSector.ZVOXELBLOCSIZE_X - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.RIGHT - 1, 0]] -= ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.RIGHT - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
			}
			else
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector;
			}
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BELOW - 1, 0]] += ( VoxelSector.ZVOXELBLOCSIZE_Y );
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BELOW - 1, n]] += ( VoxelSector.ZVOXELBLOCSIZE_Y );
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.ABOVE - 1, 0]] -= ( VoxelSector.ZVOXELBLOCSIZE_Y );
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.ABOVE - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_Y );
			}
			else
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
			}

			if( this.z == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BEHIND - 1, 0]] += ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BEHIND - 1, n]] += ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;
				ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.AHEAD - 1, 0]] -= ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
				if( !nearOnly ) for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.AHEAD - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
			}
			else
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;
			}

			// test to make sure resulting offsets are within range.
			//for( n = 0; n < 27; n++ ) if( ResultOffsets[n] & 0xFFFF8000 ) DebugBreak();
		}
		if( nearOnly )
			return;

		if( this.x == 0 )
		{
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else //----------------------------------------------
				{
					// left bound, top bound, front nobound
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector;
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;

					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else //----------------------------------------------
			{
				// left bound, above/below unbound
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] != null ? ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1] : null;
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					// left bound, y unbound z unbound
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
		}
		else if( this.x == ( VoxelSector.ZVOXELBLOCSIZE_X - 1 ) )
		{
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
		}
		else //---------------------------------------------------------
		{
			// left/right unbound... left and right should never be terms of equality
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
			}
			else  //----------------------------------------------
			{
				// x not on bound, y not on bound.
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
			}
		}
	}

	// result set is only 9 (3x3 face)
	function GetVoxelRefs(  ResultSectors,  ResultOffsets, faceOnly )
	{
		var result = {
			ResultSectors : new Array(27),
			ResultOffsets : new Array(27)
		}

		ResultSectors[Voxelarium.RelativeVoxelOrds.INCENTER] = this.sector;
		var origin = ( this.x << VoxelSector.ZVOXELBLOCSHIFT_Y ) + this.y + ( this.z << ( VoxelSector.ZVOXELBLOCSHIFT_X + VoxelSector.ZVOXELBLOCSHIFT_Y ) );
		{
			var input = VoxelSector.RelativeVoxelOffsets_Unwrapped;
			var n;
			for( n = 0; n < 9; n++ )
				ResultOffsets[n] = (uint)(origin + VoxelSector.RelativeVoxelOffsets_Unwrapped[VoxelSector.VoxelFaceGroups[faceOnly, n]]);

			switch( faceOnly )
			{
				case Voxelarium.RelativeVoxelOrds.LEFT:
					if( this.x == 0 )
					{
						for( n = 0; n < 9; n++ )
						{
							ResultSectors[n] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector;
							ResultOffsets[n] += ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
						}
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector;
					}
					break;
				case Voxelarium.RelativeVoxelOrds.RIGHT:
					if( this.x == ( VoxelSector.ZVOXELBLOCSIZE_X - 1 ) )
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
						for( n = 0; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.RIGHT - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_X ) * VoxelSector.ZVOXELBLOCSIZE_Y;
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT] = this.sector;
					}
					break;
				case Voxelarium.RelativeVoxelOrds.ABOVE:
					if( this.y == 0 )
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
						ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BELOW - 1, 0]] += ( VoxelSector.ZVOXELBLOCSIZE_Y );
						for( n = 0; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BELOW - 1, n]] += ( VoxelSector.ZVOXELBLOCSIZE_Y );
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
					}
					break;
				case Voxelarium.RelativeVoxelOrds.BELOW:
					if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
						ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.ABOVE - 1, 0]] -= ( VoxelSector.ZVOXELBLOCSIZE_Y );
						for( n = 0; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.ABOVE - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_Y );
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
					}
					break;
				case Voxelarium.RelativeVoxelOrds.BEHIND:
					if( this.z == 0 )
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
						ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BEHIND - 1, 0]] += ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
						for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.BEHIND - 1, n]] += ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;
					}
					break;
				case Voxelarium.RelativeVoxelOrds.AHEAD:
					if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1]; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;
						ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.AHEAD - 1, 0]] -= ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
						for( n = 1; n < 9; n++ ) ResultOffsets[VoxelSector.VoxelFaceGroups[Voxelarium.RelativeVoxelOrds.AHEAD - 1, n]] -= ( VoxelSector.ZVOXELBLOCSIZE_Z ) * VoxelSector.ZVOXELBLOCSIZE_Y * VoxelSector.ZVOXELBLOCSIZE_X;
					}
					else
					{
						ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector; ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;
					}
					break;
			}
			// test to make sure resulting offsets are within range.
			//for( n = 0; n < 27; n++ ) if( ResultOffsets[n] & 0xFFFF8000 ) DebugBreak();
		}


		if( this.x == 0 )
		{
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else //----------------------------------------------
				{
					// left bound, top bound, front nobound
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD] = this.sector;
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND] = this.sector;

					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else //----------------------------------------------
			{
				// left bound, above/below unbound
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.LEFT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					// left bound, y unbound z unbound
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
		}
		else if( this.x == ( VoxelSector.ZVOXELBLOCSIZE_X - 1 ) )
		{
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.BELOW - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE] = this.sector.near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW] = this.sector;
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.ABOVE - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
			else
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD].near_sectors[Voxelarium.RelativeVoxelOrds.RIGHT - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW];
				}
			}
		}
		else //---------------------------------------------------------
		{
			// left/right unbound... left and right should never be terms of equality
			if( this.y == 0 )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW].near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
			}
			else if( this.y == ( VoxelSector.ZVOXELBLOCSIZE_Y - 1 ) )
			{
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				if( this.z == 0 )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.BEHIND - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];

				}
				else if( this.z == ( VoxelSector.ZVOXELBLOCSIZE_Z - 1 ) )
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE].near_sectors[Voxelarium.RelativeVoxelOrds.AHEAD - 1];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				}
				else
				{
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
					ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW];
				}
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND];
			}
			else  //----------------------------------------------
			{
				// x not on bound, y not on bound.
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW] = ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT];

				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_LEFT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND_RIGHT] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];

				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_AHEAD] = ResultSectors[Voxelarium.RelativeVoxelOrds.AHEAD];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.LEFT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_ABOVE_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
				ResultSectors[Voxelarium.RelativeVoxelOrds.RIGHT_BELOW_BEHIND] = ResultSectors[Voxelarium.RelativeVoxelOrds.BEHIND];
			}
		}
	}

},{"./modtracker.js":47,"./packedboolarray.js":48}],51:[function(require,module,exports){


Voxelarium.SortingTree = function(Capacity){
    var sorter = {
		/// <summary>
		/// storage type for Sorting Tree
		/// </summary>

		storage : [],
		root : -1,
		used : 0,
        autoBalance : false,
        clear : function() { this.root = -1; this.used = 0; },
        add : Add,
        balance : Balance,
        forEach : foreach
    };

	storage = [];
    for( var n = 0; n < Capacit; n++ )
        storage.push( { key : 0, value : null,
                 lesser : 0, greater : 0, parent : 0, children : 0
            } );

    return sorter;
}

function DumpTree( current, level ) {
	if( current == -1 ) {
		if( root == -1 )
			return;
		console.log( "Start Tree Dump" );
		DumpTree( root, level + 1 );
	} else {
		if( this.storage[current].lesser != -1 ) {
			DumpTree( this.storage[current].lesser, level + 1 );
		}
		console.log( "Cur: " + current + " Par: " + this.storage[current].parent
			+ " Les: " + this.storage[current].lesser
			+ " Grt: " + this.storage[current].greater
			+ " Lev: " + level + " cld: " + this.storage[current].children + "  Key: " + this.storage[current].key + " val: " + this.storage[current].value );
		if( this.storage[current].greater != -1 ) {
			DumpTree( this.storage[current].greater, level + 1 );
		}
	}
}


function RotateLeft( node, node_id )
{
	if( node.parent == -1 )
	{
		root = node.greater;
		this.storage[root].parent = -1;
	}
	else
	{
		if( this.storage[node.parent].lesser == node_id )
			this.storage[node.parent].lesser = node.greater;
		else
			this.storage[node.parent].greater = node.greater;
		this.storage[node.greater].parent = node.parent;
	}
	node.children -= ( this.storage[node.greater].children + 1 );
	node.parent = node.greater;
	var temp = this.storage[node.greater].lesser;
	node.greater = temp;
	this.storage[node.parent].lesser = node_id;
	if( temp >= 0 )
	{
		this.storage[temp].parent = node_id;
		this.storage[node.parent].children -= ( this.storage[temp].children + 1 );
		node.children += ( this.storage[temp].children + 1 );
	}
	this.storage[node.parent].children += ( node.children + 1 );
}

function RotateRight( node, node_id )
{
	if( node.parent == -1 )
	{
		root = node.lesser;
		this.storage[root].parent = -1;
	}
	else
	{
		if( this.storage[node.parent].lesser == node_id )
			this.storage[node.parent].lesser = node.lesser;
		else
			this.storage[node.parent].greater = node.lesser;
		this.storage[node.lesser].parent = node.parent;
	}
	node.children -= ( this.storage[node.lesser].children + 1 );
	node.parent = node.lesser;
	var temp = this.storage[node.lesser].greater;
	node.lesser = temp;
	this.storage[node.parent].greater = node_id;  // actually oldnode.lesser
	if( temp >= 0 )
	{
		this.storage[temp].parent = node_id;
		this.storage[node.parent].children -= ( this.storage[temp].children + 1 );
		node.children += ( this.storage[temp].children + 1 );
	}
	this.storage[node.parent].children += ( node.children + 1 );
}

function Balance( node, node_id )
{
	if( !this.AutoBalance ) return;
    var left_children = node.lesser == -1 ? 0 : ( this.storage[node.lesser].children + 1 );
	var right_children = node.greater == -1 ? 0 : ( this.storage[node.greater].children + 1 );
	if( left_children == 0 )
	{
		if( right_children > 1 )
            RotateLeft( node, node_id );
	}
	else if( right_children == 0 )
	{
		if( left_children > 1 )
		{
			RotateRight( node, node_id );
		}
	}
	else if( right_children > ( left_children * 3 ) )
	{
		RotateLeft( node, node_id );
		Balance( storage[node.lesser], node.lesser );
	}
	else if( left_children > ( right_children * 3 ) )
	{
		RotateRight( node, node_id );
		Balance( storage[node.greater], node.greater );
	}
}

function addNode( node,  parent_id, K,  V ) {
	node.key = K;
	node.value = V;
	node.lesser = -1;
	node.greater = -1;
	node.parent = parent_id;
	node.children = 0;
}


function ScanAdd( node, node_id, K, V )
{
	if( K < node.key )
	{
		if( node.lesser == -1 )
		{
			node.children++;
			this.addNode( storage[used], node_id, K, V );
			node.lesser = used;
			used++;
		}
		else
		{
			node.children++;
			ScanAdd( storage[node.lesser], node.lesser, K, V );
			Balance( node, node_id );
		}
	}
	else if( K >= node.key )
	{
		if( node.greater == -1 )
		{
			node.children++;
			this.addNode( storage[used], node_id, K, V );
			node.greater = used;
			used++;
		}
		else
		{
			node.children++;
			ScanAdd( storage[node.greater], node.greater, K, V );
			Balance( node, node_id );
		}
	}
}

function Add( K, V )
{
	if( root == -1 )
	{
		root = 0;
		this.addNode( this.storage[root], -1, K, V );
		used++;
	}
	else
		ScanAdd( this.storage[root], root, K, V );
}


function foreach( callback ) {
    var current = -1;

	var next;
    while( true ) {
		if( current == -1 )
		{
			current = Tree.root;
			if( current == -1 )
				return false;
			while( ( next = Tree.storage[current].lesser ) != -1 )
				current = next;
            callback( this.storage[current].value );
            continue;
		}
		else if( ( next = Tree.storage[current].greater ) != -1 )
		{
			current = next;
			while( ( next = Tree.storage[current].lesser ) != -1 )
				current = next;
            callback( this.storage[current].value );
            continue;
		}

		else while( ( next = Tree.storage[current].parent ) != -1 )
		{
			// came from lesser, so this is next larger.
			if( Tree.storage[next].lesser == current )
			{
				current = next;
                callback( this.storage[current].value );
                continue;
			}
			else
				current = next;
		}
        break;
    }
}

},{}],52:[function(require,module,exports){
"use strict";

Voxelarium.TextureAtlas = {
    texture : null,
    texture_count : 0,
    texture_size : 0,
    renderTarget : null,
    canvas : null,
    context : null,
    texture : null,
    x_ofs : 0,
    y_ofs : 0,
    init : function( count, size ) {
        this.texture_count = count;
        this.texture_size = size;
        this.canvas = document.createElement('canvas');
        this.canvas.width = 2048;
        this.canvas.height = 2048;
    	this.context = this.canvas.getContext('2d');
        this.context.fillStyle="clear";
        this.context.fillRect(0,0,2048,2048);
        //this.context.clearRect(20,20,100,50);
        this.texture = new THREE.Texture(this.canvas)
        this.texture.magFilter = THREE.NearestFilter;
        this.texture.minFilter = THREE.NearestFilter;
    	//this.texture.needsUpdate = true;

    },
    add : function( image )
   {
       var coords = {
           uvs : new Array(8),
           uv_array : null,
           coord : { position : { x : 0, y : 0 }, size : {x : 0,y:0 } }
       }
       if( this.y_ofs >= 32 )
       {
           for(  var n = 0; n < 8; n++ )
               uvs[n] = 0;
           coords.coord.position.x = 0;
           coords.coord.position.y = 0;
           coords.coord.size.x = 0;
           coords.coord.size.y = 0;
           return coords;
       }
       var scalar = 1.0 / ( this.texture_count);
       //Log.log( "output texture to atlas... {0} {1}", x_ofs, y_ofs );
       coords.coord.position.x = ( scalar ) * this.x_ofs;
       coords.coord.position.y = ( scalar ) * this.y_ofs;
       coords.coord.size.x = ( scalar );
       coords.coord.size.y = ( scalar );

       coords.uvs[0 * 2 + 0] = ( scalar ) * this.x_ofs;
       coords.uvs[0 * 2 + 1] = 1-(( scalar ) * this.y_ofs);
       coords.uvs[1 * 2 + 0] = coords.uvs[0 * 2 + 0] + ( scalar );
       coords.uvs[1 * 2 + 1] = coords.uvs[0 * 2 + 1];
       coords.uvs[2 * 2 + 0] = coords.uvs[0 * 2 + 0];
       coords.uvs[2 * 2 + 1] = (coords.uvs[0 * 2 + 1] - ( scalar ));
       coords.uvs[3 * 2 + 0] = coords.uvs[1 * 2 + 0];
       coords.uvs[3 * 2 + 1] = coords.uvs[2 * 2 + 1];

       var in_uvs = coords.uvs;
       coords.uv_array = [in_uvs[1*2+0]
                   ,in_uvs[1*2+1]
                   ,in_uvs[0*2+0]
                   ,in_uvs[0*2+1]
                   ,in_uvs[3*2+0]
                   ,in_uvs[3*2+1]
                   ,in_uvs[2*2+0]
                   ,in_uvs[2*2+1]
               ];


       this.context.drawImage( image, this.texture_size * this.x_ofs, this.texture_size * this.y_ofs, this.texture_size, this.texture_size )

       this.texture.needsUpdate = true;

       this.x_ofs++;
       if( this.x_ofs == this.texture_count )
       {
           this.x_ofs = 0;
           this.y_ofs++;
       }
       return coords;
   }
}

},{}],53:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author julianwa / https://github.com/julianwa
 */

THREE.RenderableObject = function () {

	this.id = 0;

	this.object = null;
	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableFace = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();
	this.v3 = new THREE.RenderableVertex();

	this.normalModel = new THREE.Vector3();

	this.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
	this.vertexNormalsLength = 0;

	this.color = new THREE.Color();
	this.material = null;
	this.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableVertex = function () {

	this.position = new THREE.Vector3();
	this.positionWorld = new THREE.Vector3();
	this.positionScreen = new THREE.Vector4();

	this.visible = true;

};

THREE.RenderableVertex.prototype.copy = function ( vertex ) {

	this.positionWorld.copy( vertex.positionWorld );
	this.positionScreen.copy( vertex.positionScreen );

};

//

THREE.RenderableLine = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();

	this.vertexColors = [ new THREE.Color(), new THREE.Color() ];
	this.material = null;

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableSprite = function () {

	this.id = 0;

	this.object = null;

	this.x = 0;
	this.y = 0;
	this.z = 0;

	this.rotation = 0;
	this.scale = new THREE.Vector2();

	this.material = null;
	this.renderOrder = 0;

};

//

THREE.Projector = function () {

	var _object, _objectCount, _objectPool = [], _objectPoolLength = 0,
	_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,
	_face, _faceCount, _facePool = [], _facePoolLength = 0,
	_line, _lineCount, _linePool = [], _linePoolLength = 0,
	_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,

	_renderData = { objects: [], lights: [], elements: [] },

	_vector3 = new THREE.Vector3(),
	_vector4 = new THREE.Vector4(),

	_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),
	_boundingBox = new THREE.Box3(),
	_points3 = new Array( 3 ),
	_points4 = new Array( 4 ),

	_viewMatrix = new THREE.Matrix4(),
	_viewProjectionMatrix = new THREE.Matrix4(),

	_modelMatrix,
	_modelViewProjectionMatrix = new THREE.Matrix4(),

	_normalMatrix = new THREE.Matrix3(),

	_frustum = new THREE.Frustum(),

	_clippedVertex1PositionScreen = new THREE.Vector4(),
	_clippedVertex2PositionScreen = new THREE.Vector4();

	//

	this.projectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );
		vector.project( camera );

	};

	this.unprojectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );
		vector.unproject( camera );

	};

	this.pickingRay = function ( vector, camera ) {

		console.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );

	};

	//

	var RenderList = function () {

		var normals = [];
		var uvs = [];

		var object = null;
		var material = null;

		var normalMatrix = new THREE.Matrix3();

		function setObject( value ) {

			object = value;
			material = object.material;

			normalMatrix.getNormalMatrix( object.matrixWorld );

			normals.length = 0;
			uvs.length = 0;

		}

		function projectVertex( vertex ) {

			var position = vertex.position;
			var positionWorld = vertex.positionWorld;
			var positionScreen = vertex.positionScreen;

			positionWorld.copy( position ).applyMatrix4( _modelMatrix );
			positionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );

			var invW = 1 / positionScreen.w;

			positionScreen.x *= invW;
			positionScreen.y *= invW;
			positionScreen.z *= invW;

			vertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&
					 positionScreen.y >= - 1 && positionScreen.y <= 1 &&
					 positionScreen.z >= - 1 && positionScreen.z <= 1;

		}

		function pushVertex( x, y, z ) {

			_vertex = getNextVertexInPool();
			_vertex.position.set( x, y, z );

			projectVertex( _vertex );

		}

		function pushNormal( x, y, z ) {

			normals.push( x, y, z );

		}

		function pushUv( x, y ) {

			uvs.push( x, y );

		}

		function checkTriangleVisibility( v1, v2, v3 ) {

			if ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;

			_points3[ 0 ] = v1.positionScreen;
			_points3[ 1 ] = v2.positionScreen;
			_points3[ 2 ] = v3.positionScreen;

			return _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );

		}

		function checkBackfaceCulling( v1, v2, v3 ) {

			return ( ( v3.positionScreen.x - v1.positionScreen.x ) *
				    ( v2.positionScreen.y - v1.positionScreen.y ) -
				    ( v3.positionScreen.y - v1.positionScreen.y ) *
				    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;

		}

		function pushLine( a, b ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];

			_line = getNextLineInPool();

			_line.id = object.id;
			_line.v1.copy( v1 );
			_line.v2.copy( v2 );
			_line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;
			_line.renderOrder = object.renderOrder;

			_line.material = object.material;

			_renderData.elements.push( _line );

		}

		function pushTriangle( a, b, c ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];
			var v3 = _vertexPool[ c ];

			if ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;

			if ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {

				_face = getNextFaceInPool();

				_face.id = object.id;
				_face.v1.copy( v1 );
				_face.v2.copy( v2 );
				_face.v3.copy( v3 );
				_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
				_face.renderOrder = object.renderOrder;

				// use first vertex normal as face normal

				_face.normalModel.fromArray( normals, a * 3 );
				_face.normalModel.applyMatrix3( normalMatrix ).normalize();

				for ( var i = 0; i < 3; i ++ ) {

					var normal = _face.vertexNormalsModel[ i ];
					normal.fromArray( normals, arguments[ i ] * 3 );
					normal.applyMatrix3( normalMatrix ).normalize();

					var uv = _face.uvs[ i ];
					uv.fromArray( uvs, arguments[ i ] * 2 );

				}

				_face.vertexNormalsLength = 3;

				_face.material = object.material;

				_renderData.elements.push( _face );

			}

		}

		return {
			setObject: setObject,
			projectVertex: projectVertex,
			checkTriangleVisibility: checkTriangleVisibility,
			checkBackfaceCulling: checkBackfaceCulling,
			pushVertex: pushVertex,
			pushNormal: pushNormal,
			pushUv: pushUv,
			pushLine: pushLine,
			pushTriangle: pushTriangle
		}

	};

	var renderList = new RenderList();

	this.projectScene = function ( scene, camera, sortObjects, sortElements ) {

		_faceCount = 0;
		_lineCount = 0;
		_spriteCount = 0;

		_renderData.elements.length = 0;

		if ( scene.autoUpdate === true ) scene.updateMatrixWorld();
		if ( camera.parent === null ) camera.updateMatrixWorld();

		_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );
		_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );

		_frustum.setFromMatrix( _viewProjectionMatrix );

		//

		_objectCount = 0;

		_renderData.objects.length = 0;
		_renderData.lights.length = 0;

		function addObject( object ) {

			_object = getNextObjectInPool();
			_object.id = object.id;
			_object.object = object;

			_vector3.setFromMatrixPosition( object.matrixWorld );
			_vector3.applyProjection( _viewProjectionMatrix );
			_object.z = _vector3.z;
			_object.renderOrder = object.renderOrder;

			_renderData.objects.push( _object );

		}

		scene.traverseVisible( function ( object ) {

			if ( object instanceof THREE.Light ) {

				_renderData.lights.push( object );

			} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;

				addObject( object );

			} else if ( object instanceof THREE.Sprite ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;

				addObject( object );

			}

		} );

		if ( sortObjects === true ) {

			_renderData.objects.sort( painterSort );

		}

		//

		for ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {

			var object = _renderData.objects[ o ].object;
			var geometry = object.geometry;

			renderList.setObject( object );

			_modelMatrix = object.matrixWorld;

			_vertexCount = 0;

			if ( object instanceof THREE.Mesh ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;
					var groups = geometry.groups;

					if ( attributes.position === undefined ) continue;

					var positions = attributes.position.array;

					for ( var i = 0, l = positions.length; i < l; i += 3 ) {

						renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

					}

					if ( attributes.normal !== undefined ) {

						var normals = attributes.normal.array;

						for ( var i = 0, l = normals.length; i < l; i += 3 ) {

							renderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );

						}

					}

					if ( attributes.uv !== undefined ) {

						var uvs = attributes.uv.array;

						for ( var i = 0, l = uvs.length; i < l; i += 2 ) {

							renderList.pushUv( uvs[ i ], uvs[ i + 1 ] );

						}

					}

					if ( geometry.index !== null ) {

						var indices = geometry.index.array;

						if ( groups.length > 0 ) {

							for ( var o = 0; o < groups.length; o ++ ) {

								var group = groups[ o ];

								for ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {

									renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

								}

							}

						} else {

							for ( var i = 0, l = indices.length; i < l; i += 3 ) {

								renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

							}

						}

					} else {

						for ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {

							renderList.pushTriangle( i, i + 1, i + 2 );

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					var vertices = geometry.vertices;
					var faces = geometry.faces;
					var faceVertexUvs = geometry.faceVertexUvs[ 0 ];

					_normalMatrix.getNormalMatrix( _modelMatrix );

					var material = object.material;

					var isFaceMaterial = material instanceof THREE.MultiMaterial;
					var objectMaterials = isFaceMaterial === true ? object.material : null;

					for ( var v = 0, vl = vertices.length; v < vl; v ++ ) {

						var vertex = vertices[ v ];

						_vector3.copy( vertex );

						if ( material.morphTargets === true ) {

							var morphTargets = geometry.morphTargets;
							var morphInfluences = object.morphTargetInfluences;

							for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {

								var influence = morphInfluences[ t ];

								if ( influence === 0 ) continue;

								var target = morphTargets[ t ];
								var targetVertex = target.vertices[ v ];

								_vector3.x += ( targetVertex.x - vertex.x ) * influence;
								_vector3.y += ( targetVertex.y - vertex.y ) * influence;
								_vector3.z += ( targetVertex.z - vertex.z ) * influence;

							}

						}

						renderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );

					}

					for ( var f = 0, fl = faces.length; f < fl; f ++ ) {

						var face = faces[ f ];

						material = isFaceMaterial === true
							 ? objectMaterials.materials[ face.materialIndex ]
							 : object.material;

						if ( material === undefined ) continue;

						var side = material.side;

						var v1 = _vertexPool[ face.a ];
						var v2 = _vertexPool[ face.b ];
						var v3 = _vertexPool[ face.c ];

						if ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;

						var visible = renderList.checkBackfaceCulling( v1, v2, v3 );

						if ( side !== THREE.DoubleSide ) {

							if ( side === THREE.FrontSide && visible === false ) continue;
							if ( side === THREE.BackSide && visible === true ) continue;

						}

						_face = getNextFaceInPool();

						_face.id = object.id;
						_face.v1.copy( v1 );
						_face.v2.copy( v2 );
						_face.v3.copy( v3 );

						_face.normalModel.copy( face.normal );

						if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

							_face.normalModel.negate();

						}

						_face.normalModel.applyMatrix3( _normalMatrix ).normalize();

						var faceVertexNormals = face.vertexNormals;

						for ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {

							var normalModel = _face.vertexNormalsModel[ n ];
							normalModel.copy( faceVertexNormals[ n ] );

							if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

								normalModel.negate();

							}

							normalModel.applyMatrix3( _normalMatrix ).normalize();

						}

						_face.vertexNormalsLength = faceVertexNormals.length;

						var vertexUvs = faceVertexUvs[ f ];

						if ( vertexUvs !== undefined ) {

							for ( var u = 0; u < 3; u ++ ) {

								_face.uvs[ u ].copy( vertexUvs[ u ] );

							}

						}

						_face.color = face.color;
						_face.material = material;

						_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
						_face.renderOrder = object.renderOrder;

						_renderData.elements.push( _face );

					}

				}

			} else if ( object instanceof THREE.Line ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;

					if ( attributes.position !== undefined ) {

						var positions = attributes.position.array;

						for ( var i = 0, l = positions.length; i < l; i += 3 ) {

							renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

						}

						if ( geometry.index !== null ) {

							var indices = geometry.index.array;

							for ( var i = 0, l = indices.length; i < l; i += 2 ) {

								renderList.pushLine( indices[ i ], indices[ i + 1 ] );

							}

						} else {

							var step = object instanceof THREE.LineSegments ? 2 : 1;

							for ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {

								renderList.pushLine( i, i + 1 );

							}

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );

					var vertices = object.geometry.vertices;

					if ( vertices.length === 0 ) continue;

					v1 = getNextVertexInPool();
					v1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );

					var step = object instanceof THREE.LineSegments ? 2 : 1;

					for ( var v = 1, vl = vertices.length; v < vl; v ++ ) {

						v1 = getNextVertexInPool();
						v1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );

						if ( ( v + 1 ) % step > 0 ) continue;

						v2 = _vertexPool[ _vertexCount - 2 ];

						_clippedVertex1PositionScreen.copy( v1.positionScreen );
						_clippedVertex2PositionScreen.copy( v2.positionScreen );

						if ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {

							// Perform the perspective divide
							_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );
							_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );

							_line = getNextLineInPool();

							_line.id = object.id;
							_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );
							_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );

							_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );
							_line.renderOrder = object.renderOrder;

							_line.material = object.material;

							if ( object.material.vertexColors === THREE.VertexColors ) {

								_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );
								_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );

							}

							_renderData.elements.push( _line );

						}

					}

				}

			} else if ( object instanceof THREE.Sprite ) {

				_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );
				_vector4.applyMatrix4( _viewProjectionMatrix );

				var invW = 1 / _vector4.w;

				_vector4.z *= invW;

				if ( _vector4.z >= - 1 && _vector4.z <= 1 ) {

					_sprite = getNextSpriteInPool();
					_sprite.id = object.id;
					_sprite.x = _vector4.x * invW;
					_sprite.y = _vector4.y * invW;
					_sprite.z = _vector4.z;
					_sprite.renderOrder = object.renderOrder;
					_sprite.object = object;

					_sprite.rotation = object.rotation;

					_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );
					_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );

					_sprite.material = object.material;

					_renderData.elements.push( _sprite );

				}

			}

		}

		if ( sortElements === true ) {

			_renderData.elements.sort( painterSort );

		}

		return _renderData;

	};

	// Pools

	function getNextObjectInPool() {

		if ( _objectCount === _objectPoolLength ) {

			var object = new THREE.RenderableObject();
			_objectPool.push( object );
			_objectPoolLength ++;
			_objectCount ++;
			return object;

		}

		return _objectPool[ _objectCount ++ ];

	}

	function getNextVertexInPool() {

		if ( _vertexCount === _vertexPoolLength ) {

			var vertex = new THREE.RenderableVertex();
			_vertexPool.push( vertex );
			_vertexPoolLength ++;
			_vertexCount ++;
			return vertex;

		}

		return _vertexPool[ _vertexCount ++ ];

	}

	function getNextFaceInPool() {

		if ( _faceCount === _facePoolLength ) {

			var face = new THREE.RenderableFace();
			_facePool.push( face );
			_facePoolLength ++;
			_faceCount ++;
			return face;

		}

		return _facePool[ _faceCount ++ ];


	}

	function getNextLineInPool() {

		if ( _lineCount === _linePoolLength ) {

			var line = new THREE.RenderableLine();
			_linePool.push( line );
			_linePoolLength ++;
			_lineCount ++;
			return line;

		}

		return _linePool[ _lineCount ++ ];

	}

	function getNextSpriteInPool() {

		if ( _spriteCount === _spritePoolLength ) {

			var sprite = new THREE.RenderableSprite();
			_spritePool.push( sprite );
			_spritePoolLength ++;
			_spriteCount ++;
			return sprite;

		}

		return _spritePool[ _spriteCount ++ ];

	}

	//

	function painterSort( a, b ) {

		if ( a.renderOrder !== b.renderOrder ) {

			return a.renderOrder - b.renderOrder;

		} else if ( a.z !== b.z ) {

			return b.z - a.z;

		} else if ( a.id !== b.id ) {

			return a.id - b.id;

		} else {

			return 0;

		}

	}

	function clipLine( s1, s2 ) {

		var alpha1 = 0, alpha2 = 1,

		// Calculate the boundary coordinate of each vertex for the near and far clip planes,
		// Z = -1 and Z = +1, respectively.
		bc1near =  s1.z + s1.w,
		bc2near =  s2.z + s2.w,
		bc1far =  - s1.z + s1.w,
		bc2far =  - s2.z + s2.w;

		if ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {

			// Both vertices lie entirely within all clip planes.
			return true;

		} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {

			// Both vertices lie entirely outside one of the clip planes.
			return false;

		} else {

			// The line segment spans at least one clip plane.

			if ( bc1near < 0 ) {

				// v1 lies outside the near plane, v2 inside
				alpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );

			} else if ( bc2near < 0 ) {

				// v2 lies outside the near plane, v1 inside
				alpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );

			}

			if ( bc1far < 0 ) {

				// v1 lies outside the far plane, v2 inside
				alpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );

			} else if ( bc2far < 0 ) {

				// v2 lies outside the far plane, v2 inside
				alpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );

			}

			if ( alpha2 < alpha1 ) {

				// The line segment spans two boundaries, but is outside both of them.
				// (This can't happen when we're only clipping against just near/far but good
				//  to leave the check here for future usage if other clip planes are added.)
				return false;

			} else {

				// Update the s1 and s2 vertices to match the clipped line segment.
				s1.lerp( s2, alpha1 );
				s2.lerp( s1, 1 - alpha2 );

				return true;

			}

		}

	}

};

},{}],54:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.BloomPass = function ( strength, kernelSize, sigma, resolution ) {

	THREE.Pass.call( this );

	strength = ( strength !== undefined ) ? strength : 1;
	kernelSize = ( kernelSize !== undefined ) ? kernelSize : 25;
	sigma = ( sigma !== undefined ) ? sigma : 4.0;
	resolution = ( resolution !== undefined ) ? resolution : 256;

	// render targets

	var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };

	this.renderTargetX = new THREE.WebGLRenderTarget( resolution, resolution, pars );
	this.renderTargetY = new THREE.WebGLRenderTarget( resolution, resolution, pars );

	// copy material

	if ( THREE.CopyShader === undefined )
		console.error( "THREE.BloomPass relies on THREE.CopyShader" );

	var copyShader = THREE.CopyShader;

	this.copyUniforms = THREE.UniformsUtils.clone( copyShader.uniforms );

	this.copyUniforms[ "opacity" ].value = strength;

	this.materialCopy = new THREE.ShaderMaterial( {

		uniforms: this.copyUniforms,
		vertexShader: copyShader.vertexShader,
		fragmentShader: copyShader.fragmentShader,
		blending: THREE.AdditiveBlending,
		transparent: true

	} );

	// convolution material

	if ( THREE.ConvolutionShader === undefined )
		console.error( "THREE.BloomPass relies on THREE.ConvolutionShader" );

	var convolutionShader = THREE.ConvolutionShader;

	this.convolutionUniforms = THREE.UniformsUtils.clone( convolutionShader.uniforms );

	this.convolutionUniforms[ "uImageIncrement" ].value = THREE.BloomPass.blurX;
	this.convolutionUniforms[ "cKernel" ].value = THREE.ConvolutionShader.buildKernel( sigma );

	this.materialConvolution = new THREE.ShaderMaterial( {

		uniforms: this.convolutionUniforms,
		vertexShader:  convolutionShader.vertexShader,
		fragmentShader: convolutionShader.fragmentShader,
		defines: {
			"KERNEL_SIZE_FLOAT": kernelSize.toFixed( 1 ),
			"KERNEL_SIZE_INT": kernelSize.toFixed( 0 )
		}

	} );

	this.needsSwap = false;

	this.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );
	this.scene  = new THREE.Scene();

	this.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );
	this.scene.add( this.quad );

};

THREE.BloomPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.BloomPass,

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		if ( maskActive ) renderer.context.disable( renderer.context.STENCIL_TEST );

		// Render quad with blured scene into texture (convolution pass 1)

		this.quad.material = this.materialConvolution;

		this.convolutionUniforms[ "tDiffuse" ].value = readBuffer.texture;
		this.convolutionUniforms[ "uImageIncrement" ].value = THREE.BloomPass.blurX;

		renderer.render( this.scene, this.camera, this.renderTargetX, true );


		// Render quad with blured scene into texture (convolution pass 2)

		this.convolutionUniforms[ "tDiffuse" ].value = this.renderTargetX.texture;
		this.convolutionUniforms[ "uImageIncrement" ].value = THREE.BloomPass.blurY;

		renderer.render( this.scene, this.camera, this.renderTargetY, true );

		// Render original scene with superimposed blur to texture

		this.quad.material = this.materialCopy;

		this.copyUniforms[ "tDiffuse" ].value = this.renderTargetY.texture;

		if ( maskActive ) renderer.context.enable( renderer.context.STENCIL_TEST );

		renderer.render( this.scene, this.camera, readBuffer, this.clear );

	}

} );

THREE.BloomPass.blurX = new THREE.Vector2( 0.001953125, 0.0 );
THREE.BloomPass.blurY = new THREE.Vector2( 0.0, 0.001953125 );

},{}],55:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 */

THREE.ClearPass = function ( clearColor, clearAlpha ) {

	THREE.Pass.call( this );

	this.needsSwap = false;

	this.clearColor = ( clearColor !== undefined ) ? clearColor : 0x000000;
	this.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;

};

THREE.ClearPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.ClearPass,

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		var oldClearColor, oldClearAlpha;

		if ( this.clearColor ) {

			oldClearColor = renderer.getClearColor().getHex();
			oldClearAlpha = renderer.getClearAlpha();

			renderer.setClearColor( this.clearColor, this.clearAlpha );

		}

		renderer.setRenderTarget( this.renderToScreen ? null : readBuffer );
		renderer.clear();

		if ( this.clearColor ) {

			renderer.setClearColor( oldClearColor, oldClearAlpha );

		}

	}

} );

},{}],56:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.EffectComposer = function ( renderer, renderTarget ) {

	this.renderer = renderer;

	if ( renderTarget === undefined ) {

		var parameters = {
			minFilter: THREE.LinearFilter,
			magFilter: THREE.LinearFilter,
			format: THREE.RGBAFormat,
			stencilBuffer: false
		};
		var size = renderer.getSize();
		renderTarget = new THREE.WebGLRenderTarget( size.width, size.height, parameters );

	}

	this.renderTarget1 = renderTarget;
	this.renderTarget2 = renderTarget.clone();

	this.writeBuffer = this.renderTarget1;
	this.readBuffer = this.renderTarget2;

	this.passes = [];

	if ( THREE.CopyShader === undefined )
		console.error( "THREE.EffectComposer relies on THREE.CopyShader" );

	this.copyPass = new THREE.ShaderPass( THREE.CopyShader );

};

Object.assign( THREE.EffectComposer.prototype, {

	swapBuffers: function() {

		var tmp = this.readBuffer;
		this.readBuffer = this.writeBuffer;
		this.writeBuffer = tmp;

	},

	addPass: function ( pass ) {

		this.passes.push( pass );

		var size = this.renderer.getSize();
		pass.setSize( size.width, size.height );

	},

	insertPass: function ( pass, index ) {

		this.passes.splice( index, 0, pass );

	},

	render: function ( delta ) {

		var maskActive = false;

		var pass, i, il = this.passes.length;

		for ( i = 0; i < il; i ++ ) {

			pass = this.passes[ i ];

			if ( pass.enabled === false ) continue;

			pass.render( this.renderer, this.writeBuffer, this.readBuffer, delta, maskActive );

			if ( pass.needsSwap ) {

				if ( maskActive ) {

					var context = this.renderer.context;

					context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );

					this.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, delta );

					context.stencilFunc( context.EQUAL, 1, 0xffffffff );

				}

				this.swapBuffers();

			}

			if ( THREE.MaskPass !== undefined ) {

				if ( pass instanceof THREE.MaskPass ) {

					maskActive = true;

				} else if ( pass instanceof THREE.ClearMaskPass ) {

					maskActive = false;

				}

			}

		}

	},

	reset: function ( renderTarget ) {

		if ( renderTarget === undefined ) {

			var size = this.renderer.getSize();

			renderTarget = this.renderTarget1.clone();
			renderTarget.setSize( size.width, size.height );

		}

		this.renderTarget1.dispose();
		this.renderTarget2.dispose();
		this.renderTarget1 = renderTarget;
		this.renderTarget2 = renderTarget.clone();

		this.writeBuffer = this.renderTarget1;
		this.readBuffer = this.renderTarget2;

	},

	setSize: function ( width, height ) {

		this.renderTarget1.setSize( width, height );
		this.renderTarget2.setSize( width, height );

		for ( var i = 0; i < this.passes.length; i ++ ) {

			this.passes[i].setSize( width, height );

		}

	}

} );


THREE.Pass = function () {

	// if set to true, the pass is processed by the composer
	this.enabled = true;

	// if set to true, the pass indicates to swap read and write buffer after rendering
	this.needsSwap = true;

	// if set to true, the pass clears its buffer before rendering
	this.clear = false;

	// if set to true, the result of the pass is rendered to screen
	this.renderToScreen = false;

};

Object.assign( THREE.Pass.prototype, {

	setSize: function( width, height ) {},

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		console.error( "THREE.Pass: .render() must be implemented in derived pass." );

	}

} );

},{}],57:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.MaskPass = function ( scene, camera ) {

	THREE.Pass.call( this );

	this.scene = scene;
	this.camera = camera;

	this.clear = true;
	this.needsSwap = false;

	this.inverse = false;

};

THREE.MaskPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.MaskPass,

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		var context = renderer.context;
		var state = renderer.state;

		// don't update color or depth

		state.buffers.color.setMask( false );
		state.buffers.depth.setMask( false );

		// lock buffers

		state.buffers.color.setLocked( true );
		state.buffers.depth.setLocked( true );

		// set up stencil

		var writeValue, clearValue;

		if ( this.inverse ) {

			writeValue = 0;
			clearValue = 1;

		} else {

			writeValue = 1;
			clearValue = 0;

		}

		state.buffers.stencil.setTest( true );
		state.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );
		state.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );
		state.buffers.stencil.setClear( clearValue );

		// draw into the stencil buffer

		renderer.render( this.scene, this.camera, readBuffer, this.clear );
		renderer.render( this.scene, this.camera, writeBuffer, this.clear );

		// unlock color and depth buffer for subsequent rendering

		state.buffers.color.setLocked( false );
		state.buffers.depth.setLocked( false );

		// only render where stencil is set to 1

		state.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff );  // draw if == 1
		state.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );

	}

} );


THREE.ClearMaskPass = function () {

	THREE.Pass.call( this );

	this.needsSwap = false;

};

THREE.ClearMaskPass.prototype = Object.create( THREE.Pass.prototype );

Object.assign( THREE.ClearMaskPass.prototype, {

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		renderer.state.buffers.stencil.setTest( false );

	}

} );

},{}],58:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {

	THREE.Pass.call( this );

	this.scene = scene;
	this.camera = camera;

	this.overrideMaterial = overrideMaterial;

	this.clearColor = clearColor;
	this.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;

	this.clear = true;
	this.needsSwap = false;

};

THREE.RenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.RenderPass,

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		var oldAutoClear = renderer.autoClear;
		renderer.autoClear = false;

		this.scene.overrideMaterial = this.overrideMaterial;

		var oldClearColor, oldClearAlpha;

		if ( this.clearColor ) {

			oldClearColor = renderer.getClearColor().getHex();
			oldClearAlpha = renderer.getClearAlpha();

			renderer.setClearColor( this.clearColor, this.clearAlpha );

		}

		renderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );

		if ( this.clearColor ) {

			renderer.setClearColor( oldClearColor, oldClearAlpha );

		}

		this.scene.overrideMaterial = null;
		renderer.autoClear = oldAutoClear;
	}

} );

},{}],59:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.ShaderPass = function ( shader, textureID ) {

	THREE.Pass.call( this );

	this.textureID = ( textureID !== undefined ) ? textureID : "tDiffuse";

	if ( shader instanceof THREE.ShaderMaterial ) {

		this.uniforms = shader.uniforms;

		this.material = shader;

	} else if ( shader ) {

		this.uniforms = THREE.UniformsUtils.clone( shader.uniforms );

		this.material = new THREE.ShaderMaterial( {

			defines: shader.defines || {},
			uniforms: this.uniforms,
			vertexShader: shader.vertexShader,
			fragmentShader: shader.fragmentShader

		} );

	}

	this.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );
	this.scene = new THREE.Scene();

	this.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );
	this.scene.add( this.quad );

};

THREE.ShaderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.ShaderPass,

	render: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		if ( this.uniforms[ this.textureID ] ) {

			this.uniforms[ this.textureID ].value = readBuffer.texture;

		}

		this.quad.material = this.material;

		if ( this.renderToScreen ) {

			renderer.render( this.scene, this.camera );

		} else {

			renderer.render( this.scene, this.camera, writeBuffer, this.clear );

		}

	}

} );

},{}],60:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 */

THREE.TexturePass = function ( map, opacity ) {

	THREE.Pass.call( this );

	if ( THREE.CopyShader === undefined )
		console.error( "THREE.TexturePass relies on THREE.CopyShader" );

	var shader = THREE.CopyShader;

	this.map = map;
	this.opacity = ( opacity !== undefined ) ? opacity : 1.0;

	this.uniforms = THREE.UniformsUtils.clone( shader.uniforms );

	this.material = new THREE.ShaderMaterial( {

		uniforms: this.uniforms,
		vertexShader: shader.vertexShader,
		fragmentShader: shader.fragmentShader,
		depthTest: false,
		depthWrite: false

	} );

	this.needsSwap = false;

	this.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );
	this.scene  = new THREE.Scene();

	this.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );
	this.scene.add( this.quad );

};

THREE.TexturePass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {

	constructor: THREE.TexturePass,

	render: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {

		var oldAutoClear = renderer.autoClear;
		renderer.autoClear = false;

		this.quad.material = this.material;

		this.uniforms[ "opacity" ].value = this.opacity;
		this.uniforms[ "tDiffuse" ].value = this.map;
		this.material.transparent = ( this.opacity < 1.0 );

		renderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );

		renderer.autoClear = oldAutoClear;
	}

} );

},{}],61:[function(require,module,exports){
/**
 * @author alteredq / http://alteredqualia.com/
 *
 * Full-screen textured quad shader
 */

THREE.CopyShader = {

	uniforms: {

		"tDiffuse": { value: null },
		"opacity":  { value: 1.0 }

	},

	vertexShader: [

		"varying vec2 vUv;",

		"void main() {",

			"vUv = uv;",
			"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

		"}"

	].join( "\n" ),

	fragmentShader: [

		"uniform float opacity;",

		"uniform sampler2D tDiffuse;",

		"varying vec2 vUv;",

		"void main() {",

			"vec4 texel = texture2D( tDiffuse, vUv );",
			"gl_FragColor = opacity * texel;",

		"}"

	].join( "\n" )

};

},{}],62:[function(require,module,exports){
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Two pass Gaussian blur filter (horizontal and vertical blur shaders)
 * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/
 *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html
 *
 * - 9 samples per pass
 * - standard deviation 2.7
 * - "h" and "v" parameters should be set to "1 / width" and "1 / height"
 */

THREE.HorizontalBlurShader = {

	uniforms: {

		"tDiffuse": { value: null },
		"h":        { value: 1.0 / 512.0 }

	},

	vertexShader: [

		"varying vec2 vUv;",

		"void main() {",

			"vUv = uv;",
			"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

		"}"

	].join( "\n" ),

	fragmentShader: [

		"uniform sampler2D tDiffuse;",
		"uniform float h;",

		"varying vec2 vUv;",

		"void main() {",

			"vec4 sum = vec4( 0.0 );",

			"sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;",
			"sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;",
			"sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;",
			"sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;",
			"sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;",
			"sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;",
			"sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;",
			"sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;",

			"gl_FragColor = sum;",

		"}"

	].join( "\n" )

};

},{}],63:[function(require,module,exports){
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Two pass Gaussian blur filter (horizontal and vertical blur shaders)
 * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/
 *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html
 *
 * - 9 samples per pass
 * - standard deviation 2.7
 * - "h" and "v" parameters should be set to "1 / width" and "1 / height"
 */

THREE.VerticalBlurShader = {

	uniforms: {

		"tDiffuse": { value: null },
		"v":        { value: 1.0 / 512.0 }

	},

	vertexShader: [

		"varying vec2 vUv;",

		"void main() {",

			"vUv = uv;",
			"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

		"}"

	].join( "\n" ),

	fragmentShader: [

		"uniform sampler2D tDiffuse;",
		"uniform float v;",

		"varying vec2 vUv;",

		"void main() {",

			"vec4 sum = vec4( 0.0 );",

			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;",
			"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;",

			"gl_FragColor = sum;",

		"}"

	].join( "\n" )

};

},{}],64:[function(require,module,exports){


exports.drawCharacter = function drawCharacter( cluster, pos, v, c, font ) {
    var pchar;
    if( pchar = font.characters[c] ) {
        var data  = pchar.data;
		// background may have an alpha value -
		// but we should still assume that black is transparent...
		var size = pchar.sz;
		var width = pchar.w;
		if( ( font.flags & 3 ) == 0/*FONT_FLAG_MONO*/ )
		{
			var CharDatax = CharData1;
			var inc = Math.floor( (pchar.sz+7)/8 );
		}
		else if( ( font.flags & 3 ) == 1/*FONT_FLAG_2BIT*/ )
		{
			var CharDatax = CharData2;
			var inc = Math.floor((pchar.sz+3)/4);
		}
		else if( ( font.flags & 3 ) == 3 || ( font.flags & 3 )  == 2 )
		{
			var CharDatax = CharData8;
			var inc = (char.sz);
		}

        if( ( font.flags & 3 ) == 0 ) {
            return drawMonoChar( cluster, pos, v, pchar, font, CharDatax, inc );
        }
    }
}

//---------------------------------------------------------------------------
function CharData8( bits, ofs, bit ) { return bits[ofs+bit]; }
//---------------------------------------------------------------------------
function CharData2( bits, ofs, bit ) { return (bits[ofs+bit>>2] >> (2*(bit&3)))&3; }
//---------------------------------------------------------------------------
function CharData1( bits, ofs, bit ) { return (bits[ofs+(bit>>3)] >> (bit&7))&1; }


function drawMonoChar( cluster, pos, v, pchar, font, CharDatax, inc ) {
    var line_target;
    var y = pos.y + ( font.baseline + pchar.asc );
    var x = pos.x + ( pchar.ofs );
    var line = 0;//UseFont.baseline - pchar.ascent;
    var dOfs = 0;
    var line_target =  pchar.asc - pchar.dsc;//(UseFont.baseline - pchar.asc) + ( UseFont.baseline - pchar.descent );
    var data  = pchar.data;
    var size = pchar.sz;
    for(;
         line <= line_target;
         line++ )
    {
        for( var bit = 0; bit < size; bit++ )
        {
            var chardata = CharDatax( data, dOfs, bit );
            if( chardata )
                cluster.setCube( x + bit, y - line, 0, v );
        }
        dOfs += inc;
    }
    return pchar.w;
}

},{}],65:[function(require,module,exports){


var currentRef;
var currentAddRef;

var selector = Voxelarium.selector = {

    get currentVoxel () {
        return currentRef;
    },
    set currentVoxel (ref) {
        currentRef = ref;
    },
    get currentAddVoxel () {
        return currentAddRef;
    },
    set currentAddVoxel (ref) {
        currentAddRef = ref;
    },
    material : new THREE.LineBasicMaterial({ color:'white'
        ,vertexColors: THREE.VertexColors
        ,linewidth:1 /* windows == 1 always */
        }),
    geometry : new THREE.Geometry(),
    mesh : null,
    meshGlow : null,
};
selector.material.depthWrite = false;
selector.material.depthTest = false;

selector.mesh = new THREE.LineSegments( selector.geometry, selector.material );
selector.meshGlow = new THREE.LineSegments( selector.geometry, selector.material );


Voxelarium.selector.update = function() {
    var color = new THREE.Color( 0.8, 0, 0 );
    var unit = currentRef?currentRef.cluster.voxelUnitSize:10;
    var x = 0
    var y = 0
    var z = 0
    var geometry = selector.geometry;
    geometry.vertices.length = 0;
    geometry.colors.length = 0;
    for( var n = 0; n < 2; n++ ) {
        if( n == 0 ) {
            if( !currentRef )
            {
                //return;
              }
              else {
                unit = currentRef.cluster.voxelUnitSize;
                x = currentRef.wx * unit
                y = currentRef.wy * unit
                z = currentRef.wz * unit
              }
          }else{
              //color.delete();
              color = new THREE.Color( 0, 0.8, 0 );
              if( !currentAddRef )
              {
                  //return;
                }
                else {
                  x = currentAddRef.wx * unit
                  y = currentAddRef.wy * unit
                  z = currentAddRef.wz * unit
                }

          }
    var P = [new THREE.Vector3( x, y, z )
        , new THREE.Vector3( x + unit, y, z )
        , new THREE.Vector3( x, y + unit, z )
        , new THREE.Vector3( x + unit, y + unit, z )
        , new THREE.Vector3( x, y, z + unit )
        , new THREE.Vector3( x + unit, y, z + unit )
        , new THREE.Vector3( x, y + unit, z + unit )
        , new THREE.Vector3( x + unit, y + unit, z + unit )
        ]
    geometry.colors.push( color );
    geometry.vertices.push( P[0] );
    geometry.colors.push( color );
    geometry.vertices.push( P[1] );
    geometry.colors.push( color );
    geometry.vertices.push( P[1] );
    geometry.colors.push( color );
    geometry.vertices.push( P[3] );
    geometry.colors.push( color );
    geometry.vertices.push( P[3] );
    geometry.colors.push( color );
    geometry.vertices.push( P[2] );
    geometry.colors.push( color );
    geometry.vertices.push( P[2] );
    geometry.colors.push( color );
    geometry.vertices.push( P[0] );

    geometry.colors.push( color );
    geometry.vertices.push( P[4] );
    geometry.colors.push( color );
    geometry.vertices.push( P[5] );
    geometry.colors.push( color );
    geometry.vertices.push( P[5] );
    geometry.colors.push( color );
    geometry.vertices.push( P[7] );
    geometry.colors.push( color );
    geometry.vertices.push( P[7] );
    geometry.colors.push( color );
    geometry.vertices.push( P[6] );
    geometry.colors.push( color );
    geometry.vertices.push( P[6] );
    geometry.colors.push( color );
    geometry.vertices.push( P[4] );

    geometry.colors.push( color );
    geometry.vertices.push( P[0] );
    geometry.colors.push( color );
    geometry.vertices.push( P[4] );
    geometry.colors.push( color );
    geometry.vertices.push( P[1] );
    geometry.colors.push( color );
    geometry.vertices.push( P[5] );
    geometry.colors.push( color );
    geometry.vertices.push( P[2] );
    geometry.colors.push( color );
    geometry.vertices.push( P[6] );
    geometry.colors.push( color );
    geometry.vertices.push( P[3] );
    geometry.colors.push( color );
    geometry.vertices.push( P[7] );

    }
    //color.delete();
    geometry.computeBoundingSphere();
    geometry.verticesNeedUpdate = true;
    geometry.colorsNeedUpdate = true;
}

},{}],66:[function(require,module,exports){
"use strict";

var types = Voxelarium.Voxels;

var keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40
	, A:65, S:83, D:68, W:87, SPACE:32, C:67
    , I : 73, ESCAPE : 27 };


function InventoryItem ( voxelType ) {
    var item = {
        voxelType : voxelType,  // voxel type
        THREE_solid : null,
        geometry : Voxelarium.Settings.use_basic_material
					? Voxelarium.GeometryBasicBuffer()
					: Voxelarium.GeometryBuffer() ,

    }
    item.geometry.makeVoxCube( 0.25, voxelType );

    return item;
}

Voxelarium.Inventory = function( geometryShader,domElement ) {
    var domElement = ( domElement !== undefined ) ? domElement : document;
    var inventory = {
         raycaster : new THREE.Raycaster(),
        items : [],
        enabled : false,
        build_vertical : true,
        THREE_solid : new THREE.Object3D(),
         x_max : 15, y_max : 12,
         x_inc : 0.75, y_inc : 0.75,
         mouseRay : { n : THREE.Vector3Zero.clone(), o: new THREE.Vector3().delete() },
         last_intersects : null,
         deactivates : [],
         //mouseClock : new THREE.Clock();

        updatePositions : function() {
            var x = 0, y = 0;
            inventory.items.forEach( (item)=>{
                if( y >= this.y_max || x >= this.x_max ) {
                    item.THREE_solid.visible = false;
                  return;
                }
                item.THREE_solid.visible = true;
                item.THREE_solid.matrix.origin.set( x, y, 0 );
                if( this.build_vertical ) {
                    y += this.y_inc;
                    if( y >= this.y_max ) {
                      y = 0;
                      x += this.x_inc;
                    }
                }else {
                    x += this.x_inc;
                    if( x >= this.x_max ) {
                      x = 0;
                      y += this.y_inc;
                    }
                }
            })
        },
        activate : function(  inactiveCallback ) {
            domElement.addEventListener( 'contextmenu', ignore, false );
        	domElement.addEventListener( 'mousedown', onMouseDown, false );
        	domElement.addEventListener( 'mousewheel', onMouseWheel, false );
            domElement.addEventListener( 'mousemove', onMouseMove, false );
            domElement.addEventListener( 'mouseup', onMouseUp, false );
            window.addEventListener( 'keydown', onKeyDown, false );
            window.addEventListener( 'keyup', onKeyUp, false );
            inventory.THREE_solid.visible = true;
            inventory.enabled = true;
            if( inactiveCallback )
                inventory.deactivates.push( inactiveCallback )
        },
        deactivate : function( ) {
            domElement.removeEventListener( 'contextmenu', ignore, false );
            domElement.removeEventListener( 'mousedown', onMouseDown, false );
            domElement.removeEventListener( 'mousewheel', onMouseWheel, false );
            //domElement.removeEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox
            domElement.removeEventListener( 'mousemove', onMouseMove, false );
            domElement.removeEventListener( 'mouseup', onMouseUp, false );
            window.removeEventListener( 'keydown', onKeyDown, false );
            window.removeEventListener( 'keyup', onKeyUp, false );

            inventory.THREE_solid.visible = false;
            inventory.enabled = false;
            if( inventory.deactivates.length ) {
                inventory.deactivates.forEach( (cb)=>cb() );
                inventory.deactivates.length = 0;
            }

        },
        animate : function( camera, tick ) {
            if( !camera )return;
            if( !inventory.enabled) return;
            var o;
			var inventoryO;
            var f;

            ( inventoryO = this.THREE_solid.matrix.origin/*position*/  ).copy( camera.matrix.origin );
            //f = camera.matrix.forward

			o = inventory.raycaster.ray.origin.clone();
			f = inventory.raycaster.ray.direction;

            o.addScaledVector( f, 11 );

			var tmpdel = f.dot( camera.matrix.forward.delete() );
			inventoryO.addScaledVector( camera.matrix.forward.delete(),  11 / tmpdel );

            var m = this.THREE_solid.matrix;
            var away = camera.matrix.origin.clone().addScaledVector( o, 2 )
            m.lookAt( o, camera.matrix.origin, camera.matrix.up )
            m.rotateOrtho( Math.PI, 0, 2 );
            //var d = camera.matrix.down;
            inventoryO.addScaledVector( m.down.delete(), (this.y_max-this.y_inc)/2 );
            inventoryO.addScaledVector( m.right.delete(), (this.x_max-this.x_inc)/2 );


			//inventoryO.copy( o );

            this.THREE_solid.matrixWorldNeedsUpdate = true;

            inventory.last_intersects = inventory.raycaster.intersectObjects( inventory.THREE_solid.children );
            inventory.selector.currentVoxel = null;
            for ( var i = 0; i < inventory.last_intersects.length; i++ ) {
                if( inventory.last_intersects[i].object !== inventory.selector.THREE_solid ) {
                    inventory.selector.currentVoxel = inventory.last_intersects[i];
                    break;
                }
                //inventory.selector.currentVoxel = intersects[i];
                //inventory.selector.currentVoxel = intersects[i].object.item
                //intersects[ i ].object.material.color.set( 0xff0000 );

            }
            var obj;
            if( inventory.selector.currentVoxel ) {
                obj = inventory.selector.currentVoxel.object;
                obj.matrix.motion.rotation.x = 0.50;
                obj.matrix.motion.rotation.y = 1.50;
                obj.matrix.motion.rotation.z = 2.30;
                //obj.matrix.motion.torque.x = 0.25;
                obj.matrix.move(tick);
                obj.matrixWorldNeedsUpdate = true;

            }
            updateSelector();
            //if( inventory.selector.currentVoxel )
            //    inventory.selector.currentVoxel.object.visible = false;
            //for ( var i = 0; i < inventory.last_intersects.length; i++ ) {
                //console.log( inventory.last_intersects[i])
        		//intersects[ i ].object.material.color.set( 0xff0000 );

        	//}
        }
    }
    types.types.forEach( (voxel)=>{
        var item;
        inventory.items.push( item = InventoryItem( voxel ) );
        inventory.THREE_solid.add( item.THREE_solid = new THREE.Mesh( item.geometry.geometry, geometryShader ) );
        item.THREE_solid.frustumCulled = false;
        item.THREE_solid.item = item;
        item.THREE_solid.matrixAutoUpdate = false;
    })
    inventory.updatePositions();
    inventory.THREE_solid.matrixAutoUpdate = false;
    inventory.THREE_solid.visible = false;
    var currentRef;
    var currentAddRef;

    inventory.selector = {

        get currentVoxel () {
            return currentRef;
        },
        set currentVoxel (ref) {
            currentRef = ref;
        },
        get currentAddVoxel () {
            return currentAddRef;
        },
        set currentAddVoxel (ref) {
            currentAddRef = ref;
        },
        material : new THREE.LineBasicMaterial({ color:'white'
            //,vertexColors: THREE.VertexColors
            ,linewidth:1 /* windows == 1 always */
            }),
        geometry : new THREE.Geometry(),
        THREE_solid : null,
        meshGlow : null,
    };
    inventory.selector.material.depthWrite = false;
    inventory.selector.material.depthTest = false;

    inventory.selector.THREE_solid = new THREE.LineSegments( inventory.selector.geometry, inventory.selector.material );
    inventory.selector.meshGlow = new THREE.LineSegments( inventory.selector.geometry, inventory.selector.material );
    inventory.selector.THREE_solid.frustumCulled = false;

    inventory.THREE_solid.add( inventory.selector.THREE_solid );


    function updateSelector() {
        var color = new THREE.Color( 0.8, 0, 0 );
        var unit = 0.8;
        var x = 0
        var y = 0
        var z = 0
        var geometry = inventory.selector.geometry;
        geometry.vertices.length = 0;
        geometry.colors.length = 0;
        if( !currentRef ){
            geometry.computeBoundingSphere();
            geometry.verticesNeedUpdate = true;
            geometry.colorsNeedUpdate = true;

            return;
        }
        var origin = currentRef.object.matrix.origin;
        //console.log( `inventory at ${origin.x} ${origin.y} ${origin.z}`)
        for( var n = 0; n < 1; n++ ) {
            x = origin.x  - unit/2 - 0.1
            y = origin.y  - unit/2 - 0.1
            z = origin.z  - unit/2 - 0.1
          unit += 0.2;
        var P = [new THREE.Vector3( x, y, z )
            , new THREE.Vector3( x + unit, y, z )
            , new THREE.Vector3( x, y + unit, z )
            , new THREE.Vector3( x + unit, y + unit, z )
            , new THREE.Vector3( x, y, z + unit )
            , new THREE.Vector3( x + unit, y, z + unit )
            , new THREE.Vector3( x, y + unit, z + unit )
            , new THREE.Vector3( x + unit, y + unit, z + unit )
            ]
        geometry.colors.push( color );
        geometry.vertices.push( P[0] );
        geometry.colors.push( color );
        geometry.vertices.push( P[1] );
        geometry.colors.push( color );
        geometry.vertices.push( P[1] );
        geometry.colors.push( color );
        geometry.vertices.push( P[3] );
        geometry.colors.push( color );
        geometry.vertices.push( P[3] );
        geometry.colors.push( color );
        geometry.vertices.push( P[2] );
        geometry.colors.push( color );
        geometry.vertices.push( P[2] );
        geometry.colors.push( color );
        geometry.vertices.push( P[0] );

        geometry.colors.push( color );
        geometry.vertices.push( P[4] );
        geometry.colors.push( color );
        geometry.vertices.push( P[5] );
        geometry.colors.push( color );
        geometry.vertices.push( P[5] );
        geometry.colors.push( color );
        geometry.vertices.push( P[7] );
        geometry.colors.push( color );
        geometry.vertices.push( P[7] );
        geometry.colors.push( color );
        geometry.vertices.push( P[6] );
        geometry.colors.push( color );
        geometry.vertices.push( P[6] );
        geometry.colors.push( color );
        geometry.vertices.push( P[4] );

        geometry.colors.push( color );
        geometry.vertices.push( P[0] );
        geometry.colors.push( color );
        geometry.vertices.push( P[4] );
        geometry.colors.push( color );
        geometry.vertices.push( P[1] );
        geometry.colors.push( color );
        geometry.vertices.push( P[5] );
        geometry.colors.push( color );
        geometry.vertices.push( P[2] );
        geometry.colors.push( color );
        geometry.vertices.push( P[6] );
        geometry.colors.push( color );
        geometry.vertices.push( P[3] );
        geometry.colors.push( color );
        geometry.vertices.push( P[7] );

        }
        //color.delete();
        geometry.computeBoundingSphere();
        geometry.verticesNeedUpdate = true;
        geometry.colorsNeedUpdate = true;
    }


    return inventory;


     function setMouseRay( camera, e ) {
        var rect = domElement.getBoundingClientRect();
        const w = rect.right-rect.left;//window.innerWidth;
        const h = rect.bottom-rect.top;//window.innerHeight;
        var x = (((e.clientX-rect.left)-(w/2.0))/w) * 2;
        var y = (((e.clientY-rect.top)-(h/2.0))/h) * 2;
        //console.log( `mouse at ${x}, ${y}` )

        inventory.raycaster.setFromCamera( {x:x,y:-y}, camera );

    }


      function onMouseDown(event) {
          if ( inventory.enabled === false ) return;
          event.preventDefault();
          if( inventory.selector.currentVoxel ) {
              controlGame.setCurrentType( inventory.selector.currentVoxel.object.item.voxelType );

              inventory.deactivate();
          }
          //inventory.last_intersects = inventory.raycaster.intersectObjects( inventory.THREE_solid.children );
          for ( var i = 0; i < inventory.last_intersects.length; i++ ) {
              if( inventory.last_intersects[i].object !== inventory.selector.THREE_solid ) {
                  inventory.selector.currentVoxel = inventory.last_intersects[i];
                  break;
              }
              //inventory.selector.currentVoxel = intersects[i];
              //inventory.selector.currentVoxel = intersects[i].object.item
              //intersects[ i ].object.material.color.set( 0xff0000 );

          }

      }

      function onMouseUp(event) {
          if ( inventory.enabled === false ) return;
          event.preventDefault();
      }

        function onMouseMove( event ) {
        	if ( inventory.enabled === false ) return;
        	event.preventDefault();
            setMouseRay( camera, event );
        }

        function onMouseWheel( event ) {
            event.preventDefault();
            mouseScrollX += event.wheelDeltaX;
            mouseScrollY += event.wheelDeltaY;
        }

      function ignore(event) {
          event.preventDefault();
      }

      function onKeyDown( event ) {


      	switch ( event.keyCode ) {
            case keys.ESCAPE:
      		case keys.I:
      			inventory.deactivate();
      			break;
      	}

      }

      function onKeyUp( event ) {

      	switch ( event.keyCode ) {
      	}
      }


}

},{}],67:[function(require,module,exports){

//var Gun = require( "gun" );
var Gun = require( "../node_modules/gun/gun.js" );

var db = {};
Voxelarium.db = db;

//Voxelarium.db = db;

//global = Gun({prefix: 'global/', peers: ['https://localhost:8080/gun']})
//local = Gun({prefix: 'local/'}).


db.globalDb = Gun( {prefix: 'global/', peers: [`ws://${location.host}/gun`]} ).get( "Voxelarium" );
//db.globalDb = Gun( location.origin + '/gun' ).get( "Voxelarium" );
//db.globalDb = Gun( {prefix: 'global/', peers: [`https://${location.origin}/gun`]} ).get( "Voxelarium" );
db.localDb = Gun( {prefix: 'local/'}).get( "org.d3x0r.voxelarium.local" );
//db.localDb = db.globalDb.path( "local" );

db.world = {
    db : null, //db.globalDb
    cluster : null,
    loadSector : loadSector,
    storeSector : storeSector,
    getPath : getPath,
    listeners : [],
}

db.player = { local: db.localDb.path( "player" )
        , global : null // have to wait for player ID before
        , _quat: new THREE.Quaternion()
        , _origin : new THREE.Vector3()
        , quat: new THREE.Quaternion()
        , origin : new THREE.Vector3()
        , positionUpdate : false
        , inventory : []
        , id : null
        , world_id : null
    }

function sectorUpdated( sector, stuff ) {
  var x, y, z;
  var base_x = ( sector.pos.x >> 2 ) * 4;
  var base_y = ( sector.pos.y >> 2 ) * 4;
  var base_z = ( sector.pos.z >> 2 ) * 4;
  console.log( "Got sector update event", stuff)
  for( x = 0; x <= 3; x++ )
    for( y = 0; y <= 3; y++ )
      for( z = 0; z <= 3; z++ ) {
        var key = `${x}${y}${z}`
        var val;
        if( val = stuff[key] ) {
          var sector = db.world.cluster.getSector( base_x + x, base_y + y, base_z + z, true )
          if( sector )
            if( sector.cachedString !== val ) {
              console.log( "new sector string - need decode.")
              sector.decode( val )
            }
        }
      }

}

function addListener( sector ) {
  var where = getZonePath(sector);
  if( db.world.listeners.findIndex( (val)=>where===val ) < 0 ) {
    db.world.listeners.push( where );
    db.world.db.path( where ).on( (data)=>{ sectorUpdated(sector,data) }, { delta: true } )
    return false;
  }
}
function getZonePath( sector ) {
  return `sector.${sector.pos.x>>2}.${sector.pos.y>>2}.${sector.pos.z>>2}`
}
function getPath( sector ) {
  return `${getZonePath(sector)}.${sector.pos.x&3}${sector.pos.y&3}${sector.pos.z&3}`
}
//db.player = db.globalDb.get( "player" );

function playerPositionChange( data ) {
    var lastq = db.player.quat
    var q = db.player._quat.set( data.qx,data.qy,data.qz,data.qw)
    var lasto = db.player.origin
    var o = db.player._origin.set( data.ox, data.oy, data.oz );
    if( q.x != lastq.x ||
        q.y != lastq.y ||
        q.z != lastq.z ||
        q.w != lastq.w
    ) {
        var a = ( q.x - lastq.x );
        var b = ( q.y - lastq.y );
        var c = ( q.z - lastq.z );

        if( a*a+b*b+c*c > 0.001 )
        {
            db.player.positionUpdate = true; // skip next animate update
            Voxelarium.camera.matrix.makeRotationFromQuaternion( db.player._quat );
            Voxelarium.camera.matrixWorldNeedsUpdate = true;
        }
    }
    if( o.x != lasto.x ||
        o.y != lasto.y ||
        o.z != lasto.z
            ) {
        var a = ( o.x - lasto.x );
        var b = ( o.y - lasto.y );
        var c = ( o.z - lasto.z );

        if( a*a+b*b+c*c > 0.001 )
        {
            db.player.positionUpdate = true; // skip next animate update
            Voxelarium.camera.position.copy( o );
            Voxelarium.camera.matrixWorldNeedsUpdate = true;
        }
    }
    //console.log( "data : ", data);
}


function setupEvents( cb ) {
    //db.player.local.path("position").on( playerPositionChange );
    db.player.global.path("position").on( playerPositionChange );
    loadWorld( cb );
}

function loadVoxels(cb, val){
  var count = val.voxelTypeCount;
  //console.log( "have " , count )
  db.world.voxelInfo.path( "voxelTypes" ).map( (data,field)=>{
      var t = Voxelarium.Voxels.types[Number(field)];
      if( t ) return;
      //console.log( "reloading ", field, data.ID)
      t = Voxelarium.Voxels.types[data.ID] = eval( data.code );

      if( data.texture ) {
        count++;
        ( t.image = new Image() ).src = t.textureData = data.texture;

          t.image.onload = ()=> {
             //console.log( "Wait until load to setup coords")
             t.textureCoords = Voxelarium.TextureAtlas.add( t.image )
             //console.log( "pending ", count );
             if( !--count ) { console.log( "ZERO!" ); cb(); }
          }

      }
      if( !--count ) cb();
  });
}


function initialVoxelTypeLoad(branch,cb) {
    console.log( "Loading initial voxels...")
    Voxelarium.Voxels.load( ()=>{
        var voxelTypes = {};
        var n = 0;
        Voxelarium.Voxels.types.forEach( (type)=>{
            if( !type.ID ) return;
            n++;
            voxelTypes[ type.ID ] = { ID:type.ID, code: type.codeData, texture : type.textureData};
        });
        branch.put( { voxelTypes : voxelTypes, voxelTypeCount : n } );
        cb();
    });
}

function loadWorld( cb ) {
    ( db.world.voxelInfo = db.world.db.path( "voxelInfo" ) )
        .not( function(){
          console.log( "No VoxelInfo; load default");
            initialVoxelTypeLoad(db.world.voxelInfo,cb)
         }).val( (val)=>{
            console.log( "skip a beat and load the voxels....")
           setTimeout(
               ()=>{ loadVoxels(cb,val) }
             )
        } );
}

function doDefaultInit( data ) {
    if( !db.player.id ) {
        console.log( "do default init... pick a player ID and give him an initial world_id")
        db.player.id = new Date().getTime();
        db.player.world_id = 0;
        console.log( "put local.id=player.id")
        db.player.local.path("id").put( db.player.id )
        console.log( "put local.world_id=player.world_id")
        db.player.local.path("world_id").put( db.player.world_id )
        console.log( "done putting world_id")
    }else {
        console.log( "skipped redundant init")
    }
    // the val() in init will fire here; so global gets initialized in normal path...
}

function doDefaultInitTrigger() {
    console.log( "put init=true")
	  db.player.local.path( "init" ).put( true );
    console.log( "local put init has finished for inital Db Kick;" );
}

function doDefaultGlobalInitTrigger() {
    console.log( " kick global?")
    db.player.global.path( "init" ).put( true );
    console.log( "global put init has finished for inital Db Kick")

}

function playerConnect( val, field ) {
  console.log( "player has connected", val, field );
}

var defaultTimeout;
var defaultGlobalTimeout;
db.init = function( cb ) {
    // defaultTimeout = setTimeout( doDefaultInitTrigger, 250 );
    db.player.local.path("id").not( doDefaultInit ).val( (data)=>{
        console.log( "value is ", data)
        //clearTimeout( defaultTimeout );
        db.player.id = data;
        db.globalDb.path( "player" ).map( playerConnect );
        db.player.global = db.globalDb.path( "player" ).path( data );
        console.log( "going to request world_id...")
        db.player.local.path("world_id").val( (data)=> {
            console.log( "received world_id")
          db.player.world_id = data;
          db.world.db = db.globalDb.path( "world" ).path( db.player.world_id );
          db.player.global.map().val( playerConnect );
          db.player.global.path("position").on( playerPositionChange );
          loadWorld( cb );
        } );
        console.log( "requested world id - done with val callback")
    })
    //db.player.local.path("id").put( new Date().getTime() )
}

db.animate = function() {
    //db.player.put( {position:Voxelarium.camera.position} )
    if( !db.player.global )
        return;
    var m = Voxelarium.camera.matrix;
    var oldq = db.player._quat
    var newq = db.player.quat.setFromRotationMatrix( m );
    var oldo = db.player._origin
    var newo = db.player.origin.copy( m.origin );


    if( oldq.x !== newq.x ||
        oldq.y !== newq.y ||
        oldq.z !== newq.z ||
        oldq.w !== newq.w ||
        oldo.x !== newo.x ||
        oldo.y !== newo.y ||
        oldo.z !== newo.z )
    {
        var a = ( oldo.x - newo.x );
        var b = ( oldo.y - newo.y );
        var c = ( oldo.z - newo.z );

        var d = ( oldq.x - newq.x );
        var e = ( oldq.y - newq.y );
        var f = ( oldq.z - newq.z );
        var g = ( oldq.w - newq.w );
        //console.log( `a is ${a*a+b*b+c*c}  b is ${d*d+e*e+f*f+g*g}`)
        if( ( a*a+b*b+c*c > 0.001 )
            ||( d*d+e*e+f*f+g*g > 0.001 ) )
        {
            var pos_msg = {qx:newq.x,qy:newq.y,qz:newq.z,qw:newq.w
                            ,ox:m.origin.x,oy:m.origin.y,oz:m.origin.z}
            //console.log( "put", pos_msg )
            //db.player.local.path( "position").put( pos_msg )
            db.player.global.path( "position").put( pos_msg )
            oldq.copy( newq );
            oldo.copy( newo );
        }
    }
}


function storeSector( sector ) {
    if( !db.world.cluster )
      db.world.cluster = sector.cluster;
    addListener( sector );
    //console.log( "put sector update " )
    var string;
      this.db.path(getPath(sector)).put( string = sector.stringify() );
      console.log( "put-ed sector update ", string )
}

function loadSector( sector ) {
      addListener( sector );
      //this.db.path(getPath(sector)).on( cb );
}

//gun.get( `org.d3x0r.voxelarium.universe.${universe}.player.${self}`)

},{"../node_modules/gun/gun.js":11}],68:[function(require,module,exports){

Voxelarium.Voxels = {
	types : [],
	add : function( type, properties,reaction ) {
        	//this.types.push(
						this[type] = {
						 ID : this.types.length
                		, name : type
                		, properties : properties
				, reaction : reaction
			 	, createVoxelExtension : null
				, deleteVoxelExtension : null
				, textureCoords : {}
				, image : null
				, texture : null
				, codeData : null
				, textureData : null
			}
		  //);
			if( typeof properties.DrawInfo === "undefined" )
				properties.DrawInfo = Voxelarium.ZVOXEL_DRAWINFO_DRAWFULLVOXELOPACITY;
			return this[type];
		}
/*
Is_PlayerCanPassThrough = false;
Draw_TransparentRendering = false;
Draw_FullVoxelOpacity = true;
DrawInfo = VoxelGlobalSettings.ZVOXEL_DRAWINFO_DRAWFULLVOXELOPACITY;
ExtensionType = 0;
Is_VoxelExtension = false;
Is_HasAllocatedMemoryExtension = false;
MiningHardness = 1000.0f;
MiningType = 2;
Is_NoType = false;
Is_UserTypeTransformable = true;
Is_Harming = false;
FrictionCoef = 0.001;
Grip_Horizontal = 0.9;
Grip_Vertical = 0.0;
Is_SpaceGripType = false;
Is_KeepControlOnJumping = true;
HarmingLifePointsPerSecond = 0.0;
Is_Active = false;
Is_CanBeReplacedBy_Water = false;
Is_CanBeReplacedBy_GreenAcid = false;
Is_CanBeReplacedBy_MustardGaz = false;
Is_CombinableWith_GreenAcid = true;
Is_CanTriggerBomb = false;
Is_Liquid = false;
Is_Gaz = false;
Is_Interface_StoreBlock = false;
Is_Interface_PushBlock = false;
Is_Interface_PullBlock = false;
Is_Interface_GetInfo = false;
Is_Interface_SetInfo = false;
Is_Pumpable_ByPump_T1 = false;
Is_Pumpable_ByPump_T2 = false;
Is_Loadable_ByLoader_L1 = true;
BvProp_MoveableByTreadmill = true;
BvProp_FastMoving = false;
Is_Rideable = false;
Is_HasHelpingMessage = false;
BvProp_CanBePickedUpByRobot = true;
BvProp_XrRobotPickMinLevel = 1;
BvProp_PrRobotReplaceMinLevel = 0;
BvProp_PrRobotPickMinLevel = 0;
BvProp_PrRobotMoveMinLevel = 0;
BvProp_AtomicFireResistant = false;
BvProp_EgmyT1Resistant = false;
LiquidDensity = 0.0;
BlastResistance = 1;
FabInfo = null;
Documentation_PageNum = 0;
*/

}

Voxelarium.Voxels.types.push(
Voxelarium.Voxels.add( "Void", {
      Is_PlayerCanPassThrough : true,
      Draw_TransparentRendering : false,
      Draw_FullVoxelOpacity : false,
      DrawInfo : Voxelarium.ZVOXEL_DRAWINFO_VOID,
      Is_Harming : false,
      FrictionCoef : 0.0001,
      Grip_Vertical : 0.0,
      Grip_Horizontal : 0.8,
      Is_SpaceGripType : false,
      Is_KeepControlOnJumping : true,
      Is_Active : false,
      Is_CanBeReplacedBy_Water : true,
      Is_CombinableWith_GreenAcid : false,
      Is_CanBeReplacedBy_GreenAcid : true,
      Is_CanBeReplacedBy_MustardGaz : true,
      BvProp_CanBePickedUpByRobot : false,
      BvProp_XrRobotPickMinLevel : 255,
      BvProp_PrRobotReplaceMinLevel : 0,
      BvProp_PrRobotPickMinLevel : 255,
      BvProp_PrRobotMoveMinLevel : 0,
      BvProp_AtomicFireResistant : true,
      Is_Liquid : false,
      Is_Gaz : true,
      Is_Loadable_ByLoader_L1 : false,
      BvProp_MoveableByTreadmill : false,
      BvProp_EgmyT1Resistant : false,
      LiquidDensity : 0.0,
} ) );

Voxelarium.Voxels.getIndex = function( type ) {
	var types = Voxelarium.Voxels.types;
	return types.findIndex( (v)=>v === type );
}

var xhrObj;
Voxelarium.Voxels.load = function( cb ) {
	var n = 1
	xhrObj = new XMLHttpRequest();
	//var xhrObj2 = new XMLHttpRequest();
	loadAVoxel( n, cb );
}

function loadAVoxel( n, cb ) {
	{
		try {
			xhrObj.open('GET', `./src/voxels/voxel_${n}.js`);
			//xhrObj.responseType = "text";
			//xhrObj.response = "";
			xhrObj.send(null);
			xhrObj.onerror = (err)=>{
				  //console.log( "require ", n );
		      //console.log( err );
					cb();
					return;
			};
			xhrObj.onload = ()=>{
				if( !xhrObj.status || xhrObj.status === 200 ) {
					//console.log( "load ", n)
					Voxelarium.Voxels.types.push( eval(xhrObj.responseText) );
					var t = Voxelarium.Voxels.types[n];

					t.codeData = xhrObj.responseText;
					xhrObj.open('GET', `./src/voxels/images/voxel_${n}.png`);
					xhrObj.onerror = (err)=>{
						 console.log( "error:", err);
				     loadAVoxel( n+1, cb );
				  }
					xhrObj.send(null);
					xhrObj.onload = ()=>{
						if( xhrObj.responseText.length > 0 ) {
							( t.image = new Image() ).src = xhrObj.responseText;
							t.textureData = xhrObj.response;
							t.image.onerror = (err)=>{ console.log( "image load error?", err)}
							//console.log( t );
							if( true || !t.image.width )
							{
								t.image.onload = ()=> {
									 //console.log( "Waited until load to setup coords", t)
								   t.textureCoords = Voxelarium.TextureAtlas.add( t.image )
							  }
							} else {
								//console.log( "don't have to delay load?")
							  //t.textureCoords = Voxelarium.TextureAtlas.add( t.image )
						  }
						}
						loadAVoxel( n+1, cb );
					}
				}
				else {
					console.log( "All completed... out of loadables...")
					cb();
				}
			}
			//require( `./voxels/voxel_${n}.js` )
		}
		catch( err ) {
			console.log( "require ", n );
	        	console.log( err );
				cb();
		}
	}

}

//Voxelarium.Voxels.types[0] = Voxelarium.Voxels.types.Void;
//Voxelarium.Voxels.types[1] = Voxelarium.Voxels.types["BlackRock Blue"];

},{}],69:[function(require,module,exports){

require( "./cluster.js")
var fonts = require( "./voxel.fonts.js" );

Voxelarium.World = function() {
    return {
        clusters : [],

        createCluster : function( mesher, voxelUnitSize ) {
            var cluster = Voxelarium.Cluster(32,32,32);
            cluster.mesher = mesher;
            cluster.voxelUnitSize = voxelUnitSize || 20;
            cluster.getGeometryBuffer = Voxelarium.Settings.use_basic_material
                ? Voxelarium.GeometryBasicBuffer
                : Voxelarium.GeometryBuffer;
            this.clusters.push( cluster );
            return cluster;
        },

        createTextCluster : function( text, v, mesher, font, voxelUnitSize ) {
            var cluster = Voxelarium.Cluster(256*8,8,1);
            cluster.mesher = mesher;
            cluster.voxelUnitSize = voxelUnitSize || 20;
            cluster.getGeometryBuffer = Voxelarium.GeometryBufferMono;
            this.clusters.push( cluster );
            //var sector = cluster.createSector( 0, 0, 0 );
            var pos = { x:0, y:0};

            for( var n = 0; n < text.length; n++ ) {
                var ch = text.codePointAt(n);

                var w = fonts.drawCharacter( cluster, pos, v, ch, font )
                pos.x += w;
            }


            return cluster;
        }
    }
}

},{"./cluster.js":38,"./voxel.fonts.js":64}],70:[function(require,module,exports){
/**
 * @author dmarcos / https://github.com/dmarcos
 * @author mrdoob / http://mrdoob.com
 */

THREE.VRControls = function ( object, onError ) {

	var scope = this;

	var vrDisplay, vrDisplays;

	var standingMatrix = new THREE.Matrix4();

	var frameData = null;

	if ( 'VRFrameData' in window ) {

		frameData = new VRFrameData();

	}

	function gotVRDisplays( displays ) {

		vrDisplays = displays;

		if ( displays.length > 0 ) {

			vrDisplay = displays[ 0 ];

		} else {

			if ( onError ) onError( 'VR input not available.' );

		}

	}

	if ( navigator.getVRDisplays ) {

		navigator.getVRDisplays().then( gotVRDisplays );

	}

  this.roomOrigin = new THREE.Vector3();

	// the Rift SDK returns the position in meters
	// this scale factor allows the user to define how meters
	// are converted to scene units.

	this.scale = 1;

	// If true will use "standing space" coordinate system where y=0 is the
	// floor and x=0, z=0 is the center of the room.
	this.standing = false;

	// Distance from the users eyes to the floor in meters. Used when
	// standing=true but the VRDisplay doesn't provide stageParameters.
	this.userHeight = 1.6;

	this.getVRDisplay = function () {

		return vrDisplay;

	};

	this.setVRDisplay = function ( value ) {

		vrDisplay = value;

	};

	this.getVRDisplays = function () {

		console.warn( 'THREE.VRControls: getVRDisplays() is being deprecated.' );
		return vrDisplays;

	};

	this.getStandingMatrix = function () {

		return standingMatrix;

	};

	this.update = function () {

		if ( vrDisplay ) {

			var pose;

			if ( vrDisplay.getFrameData ) {

				vrDisplay.getFrameData( frameData );
				pose = frameData.pose;

			} else if ( vrDisplay.getPose ) {

				pose = vrDisplay.getPose();

			}

			if ( pose.orientation !== null ) {

				object.quaternion.fromArray( pose.orientation );

			}

			if ( pose.position !== null ) {

				object.position.fromArray( pose.position );
				object.position.add( this.roomOrigin );

			} else {

				object.position.set( 0, 0, 0 );

			}

			if ( this.standing ) {

				if ( vrDisplay.stageParameters ) {

					object.updateMatrix();

					standingMatrix.fromArray( vrDisplay.stageParameters.sittingToStandingTransform );
					object.applyMatrix( standingMatrix );

				} else {

					object.position.setY( object.position.y + this.userHeight );

				}

			}

			object.position.multiplyScalar( scope.scale );

		}

	};

	this.resetPose = function () {

		if ( vrDisplay ) {

			vrDisplay.resetPose();

		}

	};

	this.resetSensor = function () {

		console.warn( 'THREE.VRControls: .resetSensor() is now .resetPose().' );
		this.resetPose();

	};

	this.zeroSensor = function () {

		console.warn( 'THREE.VRControls: .zeroSensor() is now .resetPose().' );
		this.resetPose();

	};

	this.dispose = function () {

		vrDisplay = null;

	};

};

},{}],71:[function(require,module,exports){
/**
 * @author dmarcos / https://github.com/dmarcos
 * @author mrdoob / http://mrdoob.com
 *
 * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html
 *
 * Firefox: http://mozvr.com/downloads/
 * Chromium: https://webvr.info/get-chrome
 *
 */

THREE.VREffect = function ( renderer, onError ) {

	var vrDisplay, vrDisplays;
	var eyeTranslationL = new THREE.Vector3();
	var eyeTranslationR = new THREE.Vector3();
	var renderRectL, renderRectR;

	var frameData = null;

	if ( 'VRFrameData' in window ) {

		frameData = new VRFrameData();

	}

	function gotVRDisplays( displays ) {

		vrDisplays = displays;

		if ( displays.length > 0 ) {

			vrDisplay = displays[ 0 ];

		} else {

			if ( onError ) onError( 'HMD not available' );

		}

	}

	if ( navigator.getVRDisplays ) {

		navigator.getVRDisplays().then( gotVRDisplays );

	}

	//

	this.isPresenting = false;
	this.scale = 1;

	var scope = this;

	var rendererSize = renderer.getSize();
	var rendererUpdateStyle = false;
	var rendererPixelRatio = renderer.getPixelRatio();

	this.getVRDisplay = function () {

		return vrDisplay;

	};

	this.setVRDisplay = function ( value ) {

		vrDisplay = value;

	};

	this.getVRDisplays = function () {

		console.warn( 'THREE.VREffect: getVRDisplays() is being deprecated.' );
		return vrDisplays;

	};

  this.getSize = function() {
		return renderer.getSize();
	}
	this.setSize = function ( width, height, updateStyle ) {

		rendererSize = { width: width, height: height };
		rendererUpdateStyle = updateStyle;

		if ( scope.isPresenting ) {

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			renderer.setPixelRatio( 1 );
			renderer.setSize( eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false );

		} else {

			renderer.setPixelRatio( rendererPixelRatio );
			renderer.setSize( width, height, updateStyle );

		}

	};

	// fullscreen

	var canvas = renderer.domElement;
	var requestFullscreen;
	var exitFullscreen;
	var fullscreenElement;
	var defaultLeftBounds = [ 0.0, 0.0, 0.5, 1.0 ];
	var defaultRightBounds = [ 0.5, 0.0, 0.5, 1.0 ];

	function onVRDisplayPresentChange() {

		var wasPresenting = scope.isPresenting;
		scope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;

		if ( scope.isPresenting ) {

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			var eyeWidth = eyeParamsL.renderWidth;
			var eyeHeight = eyeParamsL.renderHeight;

			if ( !wasPresenting ) {

				rendererPixelRatio = renderer.getPixelRatio();
				rendererSize = renderer.getSize();

				renderer.setPixelRatio( 1 );
				renderer.setSize( eyeWidth * 2, eyeHeight, false );

			}

		} else if ( wasPresenting ) {

			renderer.setPixelRatio( rendererPixelRatio );
			renderer.setSize( rendererSize.width, rendererSize.height, rendererUpdateStyle );

		}

	}

	window.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );

	this.setFullScreen = function ( boolean ) {

		return new Promise( function ( resolve, reject ) {

			if ( vrDisplay === undefined ) {

				reject( new Error( 'No VR hardware found.' ) );
				return;

			}

			if ( scope.isPresenting === boolean ) {

				resolve();
				return;

			}

			if ( boolean ) {

				resolve( vrDisplay.requestPresent( [ { source: canvas } ] ) );

			} else {

				resolve( vrDisplay.exitPresent() );

			}

		} );

	};

	this.requestPresent = function () {

		return this.setFullScreen( true );

	};

	this.exitPresent = function () {

		return this.setFullScreen( false );

	};

	this.requestAnimationFrame = function ( f ) {

		if ( vrDisplay !== undefined ) {

			return vrDisplay.requestAnimationFrame( f );

		} else {

			return window.requestAnimationFrame( f );

		}

	};

	this.cancelAnimationFrame = function ( h ) {

		if ( vrDisplay !== undefined ) {

			vrDisplay.cancelAnimationFrame( h );

		} else {

			window.cancelAnimationFrame( h );

		}

	};

	this.submitFrame = function () {

		if ( vrDisplay !== undefined && scope.isPresenting ) {

			vrDisplay.submitFrame();

		}

	};

	this.autoSubmitFrame = true;

	// render

	var cameraL = new THREE.PerspectiveCamera();
	cameraL.layers.enable( 1 );

	var cameraR = new THREE.PerspectiveCamera();
	cameraR.layers.enable( 2 );

	this.render = function ( scene, camera, renderTarget, forceClear ) {

		if ( vrDisplay && scope.isPresenting ) {

			var autoUpdate = scene.autoUpdate;

			if ( autoUpdate ) {

				scene.updateMatrixWorld();
				scene.autoUpdate = false;

			}

			var eyeParamsL = vrDisplay.getEyeParameters( 'left' );
			var eyeParamsR = vrDisplay.getEyeParameters( 'right' );

			eyeTranslationL.fromArray( eyeParamsL.offset );
			eyeTranslationR.fromArray( eyeParamsR.offset );

			if ( Array.isArray( scene ) ) {

				console.warn( 'THREE.VREffect.render() no longer supports arrays. Use object.layers instead.' );
				scene = scene[ 0 ];

			}

			// When rendering we don't care what the recommended size is, only what the actual size
			// of the backbuffer is.
			var size = renderer.getSize();
			var layers = vrDisplay.getLayers();
			var leftBounds;
			var rightBounds;

			if ( layers.length ) {

				var layer = layers[ 0 ];

				leftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;
				rightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;

			} else {

				leftBounds = defaultLeftBounds;
				rightBounds = defaultRightBounds;

			}

			renderRectL = {
				x: Math.round( size.width * leftBounds[ 0 ] ),
				y: Math.round( size.height * leftBounds[ 1 ] ),
				width: Math.round( size.width * leftBounds[ 2 ] ),
				height: Math.round(size.height * leftBounds[ 3 ] )
			};
			renderRectR = {
				x: Math.round( size.width * rightBounds[ 0 ] ),
				y: Math.round( size.height * rightBounds[ 1 ] ),
				width: Math.round( size.width * rightBounds[ 2 ] ),
				height: Math.round(size.height * rightBounds[ 3 ] )
			};

			if ( renderTarget ) {

				renderer.setRenderTarget( renderTarget );
				renderTarget.scissorTest = true;

			} else {

				renderer.setRenderTarget( null );
				renderer.setScissorTest( true );

			}

			if ( renderer.autoClear || forceClear ) renderer.clear();

			if ( camera.parent === null ) camera.updateMatrixWorld();

			camera.matrixWorld.decompose( cameraL.position, cameraL.quaternion, cameraL.scale );
			camera.matrixWorld.decompose( cameraR.position, cameraR.quaternion, cameraR.scale );

			var scale = this.scale;
			cameraL.translateOnAxis( eyeTranslationL, scale );
			cameraR.translateOnAxis( eyeTranslationR, scale );

			if ( vrDisplay.getFrameData ) {

				vrDisplay.depthNear = camera.near;
				vrDisplay.depthFar = camera.far;

				vrDisplay.getFrameData( frameData );

				cameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;
				cameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;

			} else {

				cameraL.projectionMatrix = fovToProjection( eyeParamsL.fieldOfView, true, camera.near, camera.far );
				cameraR.projectionMatrix = fovToProjection( eyeParamsR.fieldOfView, true, camera.near, camera.far );

			}

			// render left eye
			if ( renderTarget ) {

				renderTarget.viewport.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );
				renderTarget.scissor.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );

			} else {

				renderer.setViewport( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );
				renderer.setScissor( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );

			}
			renderer.render( scene, cameraL, renderTarget, forceClear );

			// render right eye
			if ( renderTarget ) {

				renderTarget.viewport.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );
				renderTarget.scissor.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );

			} else {

				renderer.setViewport( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );
				renderer.setScissor( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );

			}
			renderer.render( scene, cameraR, renderTarget, forceClear );

			if ( renderTarget ) {

				renderTarget.viewport.set( 0, 0, size.width, size.height );
				renderTarget.scissor.set( 0, 0, size.width, size.height );
				renderTarget.scissorTest = false;
				renderer.setRenderTarget( null );

			} else {

				renderer.setViewport( 0, 0, size.width, size.height );
				renderer.setScissorTest( false );

			}

			if ( autoUpdate ) {

				scene.autoUpdate = true;

			}

			if ( scope.autoSubmitFrame ) {

				scope.submitFrame();

			}

			return;

		}

		// Regular render mode if not HMD

		renderer.render( scene, camera, renderTarget, forceClear );

	};

	this.dispose = function () {

		window.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );

	};

	//

	function fovToNDCScaleOffset( fov ) {

		var pxscale = 2.0 / ( fov.leftTan + fov.rightTan );
		var pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;
		var pyscale = 2.0 / ( fov.upTan + fov.downTan );
		var pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;
		return { scale: [ pxscale, pyscale ], offset: [ pxoffset, pyoffset ] };

	}

	function fovPortToProjection( fov, rightHanded, zNear, zFar ) {

		rightHanded = rightHanded === undefined ? true : rightHanded;
		zNear = zNear === undefined ? 0.01 : zNear;
		zFar = zFar === undefined ? 10000.0 : zFar;

		var handednessScale = rightHanded ? - 1.0 : 1.0;

		// start with an identity matrix
		var mobj = new THREE.Matrix4();
		var m = mobj.elements;

		// and with scale/offset info for normalized device coords
		var scaleAndOffset = fovToNDCScaleOffset( fov );

		// X result, map clip edges to [-w,+w]
		m[ 0 * 4 + 0 ] = scaleAndOffset.scale[ 0 ];
		m[ 0 * 4 + 1 ] = 0.0;
		m[ 0 * 4 + 2 ] = scaleAndOffset.offset[ 0 ] * handednessScale;
		m[ 0 * 4 + 3 ] = 0.0;

		// Y result, map clip edges to [-w,+w]
		// Y offset is negated because this proj matrix transforms from world coords with Y=up,
		// but the NDC scaling has Y=down (thanks D3D?)
		m[ 1 * 4 + 0 ] = 0.0;
		m[ 1 * 4 + 1 ] = scaleAndOffset.scale[ 1 ];
		m[ 1 * 4 + 2 ] = - scaleAndOffset.offset[ 1 ] * handednessScale;
		m[ 1 * 4 + 3 ] = 0.0;

		// Z result (up to the app)
		m[ 2 * 4 + 0 ] = 0.0;
		m[ 2 * 4 + 1 ] = 0.0;
		m[ 2 * 4 + 2 ] = zFar / ( zNear - zFar ) * - handednessScale;
		m[ 2 * 4 + 3 ] = ( zFar * zNear ) / ( zNear - zFar );

		// W result (= Z in)
		m[ 3 * 4 + 0 ] = 0.0;
		m[ 3 * 4 + 1 ] = 0.0;
		m[ 3 * 4 + 2 ] = handednessScale;
		m[ 3 * 4 + 3 ] = 0.0;

		mobj.transpose();

		return mobj;

	}

	function fovToProjection( fov, rightHanded, zNear, zFar ) {

		var DEG2RAD = Math.PI / 180.0;

		var fovPort = {
			upTan: Math.tan( fov.upDegrees * DEG2RAD ),
			downTan: Math.tan( fov.downDegrees * DEG2RAD ),
			leftTan: Math.tan( fov.leftDegrees * DEG2RAD ),
			rightTan: Math.tan( fov.rightDegrees * DEG2RAD )
		};

		return fovPortToProjection( fovPort, rightHanded, zNear, zFar );

	}

};

},{}],72:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 */

THREE.OBJLoader = function ( manager ) {

	this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;

	this.materials = null;

	this.regexp = {
		// v float float float
		vertex_pattern           : /^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// vn float float float
		normal_pattern           : /^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// vt float float
		uv_pattern               : /^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
		// f vertex vertex vertex
		face_vertex              : /^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,
		// f vertex/uv vertex/uv vertex/uv
		face_vertex_uv           : /^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,
		// f vertex/uv/normal vertex/uv/normal vertex/uv/normal
		face_vertex_uv_normal    : /^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,
		// f vertex//normal vertex//normal vertex//normal
		face_vertex_normal       : /^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,
		// o object_name | g group_name
		object_pattern           : /^[og]\s*(.+)?/,
		// s boolean
		smoothing_pattern        : /^s\s+(\d+|on|off)/,
		// mtllib file_reference
		material_library_pattern : /^mtllib /,
		// usemtl material_name
		material_use_pattern     : /^usemtl /
	};

};

THREE.OBJLoader.prototype = {

	constructor: THREE.OBJLoader,

	load: function ( url, onLoad, onProgress, onError ) {

		var scope = this;

		var loader = new THREE.XHRLoader( scope.manager );
		loader.setPath( this.path );
		loader.load( url, function ( text ) {

			onLoad( scope.parse( text ) );

		}, onProgress, onError );

	},

	setPath: function ( value ) {

		this.path = value;

	},

	setMaterials: function ( materials ) {

		this.materials = materials;

	},

	_createParserState : function () {

		var state = {
			objects  : [],
			object   : {},

			vertices : [],
			normals  : [],
			uvs      : [],

			materialLibraries : [],

			startObject: function ( name, fromDeclaration ) {

				// If the current object (initial from reset) is not from a g/o declaration in the parsed
				// file. We need to use it for the first parsed g/o to keep things in sync.
				if ( this.object && this.object.fromDeclaration === false ) {

					this.object.name = name;
					this.object.fromDeclaration = ( fromDeclaration !== false );
					return;

				}

				var previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );

				if ( this.object && typeof this.object._finalize === 'function' ) {

					this.object._finalize( true );

				}

				this.object = {
					name : name || '',
					fromDeclaration : ( fromDeclaration !== false ),

					geometry : {
						vertices : [],
						normals  : [],
						uvs      : []
					},
					materials : [],
					smooth : true,

					startMaterial : function( name, libraries ) {

						var previous = this._finalize( false );

						// New usemtl declaration overwrites an inherited material, except if faces were declared
						// after the material, then it must be preserved for proper MultiMaterial continuation.
						if ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {

							this.materials.splice( previous.index, 1 );

						}

						var material = {
							index      : this.materials.length,
							name       : name || '',
							mtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),
							smooth     : ( previous !== undefined ? previous.smooth : this.smooth ),
							groupStart : ( previous !== undefined ? previous.groupEnd : 0 ),
							groupEnd   : -1,
							groupCount : -1,
							inherited  : false,

							clone : function( index ) {
								var cloned = {
									index      : ( typeof index === 'number' ? index : this.index ),
									name       : this.name,
									mtllib     : this.mtllib,
									smooth     : this.smooth,
									groupStart : 0,
									groupEnd   : -1,
									groupCount : -1,
									inherited  : false
								};
								cloned.clone = this.clone.bind(cloned);
								return cloned;
							}
						};

						this.materials.push( material );

						return material;

					},

					currentMaterial : function() {

						if ( this.materials.length > 0 ) {
							return this.materials[ this.materials.length - 1 ];
						}

						return undefined;

					},

					_finalize : function( end ) {

						var lastMultiMaterial = this.currentMaterial();
						if ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {

							lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;
							lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;
							lastMultiMaterial.inherited = false;

						}

						// Ignore objects tail materials if no face declarations followed them before a new o/g started.
						if ( end && this.materials.length > 1 ) {

							for ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {
								if ( this.materials[mi].groupCount <= 0 ) {
									this.materials.splice( mi, 1 );
								}
							}

						}

						// Guarantee at least one empty material, this makes the creation later more straight forward.
						if ( end && this.materials.length === 0 ) {

							this.materials.push({
								name   : '',
								smooth : this.smooth
							});

						}

						return lastMultiMaterial;

					}
				};

				// Inherit previous objects material.
				// Spec tells us that a declared material must be set to all objects until a new material is declared.
				// If a usemtl declaration is encountered while this new object is being parsed, it will
				// overwrite the inherited material. Exception being that there was already face declarations
				// to the inherited material, then it will be preserved for proper MultiMaterial continuation.

				if ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === "function" ) {

					var declared = previousMaterial.clone( 0 );
					declared.inherited = true;
					this.object.materials.push( declared );

				}

				this.objects.push( this.object );

			},

			finalize : function() {

				if ( this.object && typeof this.object._finalize === 'function' ) {

					this.object._finalize( true );

				}

			},

			parseVertexIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;

			},

			parseNormalIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;

			},

			parseUVIndex: function ( value, len ) {

				var index = parseInt( value, 10 );
				return ( index >= 0 ? index - 1 : index + len / 2 ) * 2;

			},

			addVertex: function ( a, b, c ) {

				var src = this.vertices;
				var dst = this.object.geometry.vertices;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ b + 2 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );
				dst.push( src[ c + 2 ] );

			},

			addVertexLine: function ( a ) {

				var src = this.vertices;
				var dst = this.object.geometry.vertices;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );

			},

			addNormal : function ( a, b, c ) {

				var src = this.normals;
				var dst = this.object.geometry.normals;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ a + 2 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ b + 2 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );
				dst.push( src[ c + 2 ] );

			},

			addUV: function ( a, b, c ) {

				var src = this.uvs;
				var dst = this.object.geometry.uvs;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );
				dst.push( src[ b + 0 ] );
				dst.push( src[ b + 1 ] );
				dst.push( src[ c + 0 ] );
				dst.push( src[ c + 1 ] );

			},

			addUVLine: function ( a ) {

				var src = this.uvs;
				var dst = this.object.geometry.uvs;

				dst.push( src[ a + 0 ] );
				dst.push( src[ a + 1 ] );

			},

			addFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {

				var vLen = this.vertices.length;

				var ia = this.parseVertexIndex( a, vLen );
				var ib = this.parseVertexIndex( b, vLen );
				var ic = this.parseVertexIndex( c, vLen );
				var id;

				if ( d === undefined ) {

					this.addVertex( ia, ib, ic );

				} else {

					id = this.parseVertexIndex( d, vLen );

					this.addVertex( ia, ib, id );
					this.addVertex( ib, ic, id );

				}

				if ( ua !== undefined ) {

					var uvLen = this.uvs.length;

					ia = this.parseUVIndex( ua, uvLen );
					ib = this.parseUVIndex( ub, uvLen );
					ic = this.parseUVIndex( uc, uvLen );

					if ( d === undefined ) {

						this.addUV( ia, ib, ic );

					} else {

						id = this.parseUVIndex( ud, uvLen );

						this.addUV( ia, ib, id );
						this.addUV( ib, ic, id );

					}

				}

				if ( na !== undefined ) {

					// Normals are many times the same. If so, skip function call and parseInt.
					var nLen = this.normals.length;
					ia = this.parseNormalIndex( na, nLen );

					ib = na === nb ? ia : this.parseNormalIndex( nb, nLen );
					ic = na === nc ? ia : this.parseNormalIndex( nc, nLen );

					if ( d === undefined ) {

						this.addNormal( ia, ib, ic );

					} else {

						id = this.parseNormalIndex( nd, nLen );

						this.addNormal( ia, ib, id );
						this.addNormal( ib, ic, id );

					}

				}

			},

			addLineGeometry: function ( vertices, uvs ) {

				this.object.geometry.type = 'Line';

				var vLen = this.vertices.length;
				var uvLen = this.uvs.length;

				for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {

					this.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );

				}

				for ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {

					this.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );

				}

			}

		};

		state.startObject( '', false );

		return state;

	},

	parse: function ( text ) {

		console.time( 'OBJLoader' );

		var state = this._createParserState();

		if ( text.indexOf( '\r\n' ) !== - 1 ) {

			// This is faster than String.split with regex that splits on both
			text = text.replace( /\r\n/g, '\n' );

		}

		if ( text.indexOf( '\\\n' ) !== - 1) {

			// join lines separated by a line continuation character (\)
			text = text.replace( /\\\n/g, '' );

		}

		var lines = text.split( '\n' );
		var line = '', lineFirstChar = '', lineSecondChar = '';
		var lineLength = 0;
		var result = [];

		// Faster to just trim left side of the line. Use if available.
		var trimLeft = ( typeof ''.trimLeft === 'function' );

		for ( var i = 0, l = lines.length; i < l; i ++ ) {

			line = lines[ i ];

			line = trimLeft ? line.trimLeft() : line.trim();

			lineLength = line.length;

			if ( lineLength === 0 ) continue;

			lineFirstChar = line.charAt( 0 );

			// @todo invoke passed in handler if any
			if ( lineFirstChar === '#' ) continue;

			if ( lineFirstChar === 'v' ) {

				lineSecondChar = line.charAt( 1 );

				if ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {

					// 0                  1      2      3
					// ["v 1.0 2.0 3.0", "1.0", "2.0", "3.0"]

					state.vertices.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] ),
						parseFloat( result[ 3 ] )
					);

				} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {

					// 0                   1      2      3
					// ["vn 1.0 2.0 3.0", "1.0", "2.0", "3.0"]

					state.normals.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] ),
						parseFloat( result[ 3 ] )
					);

				} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {

					// 0               1      2
					// ["vt 0.1 0.2", "0.1", "0.2"]

					state.uvs.push(
						parseFloat( result[ 1 ] ),
						parseFloat( result[ 2 ] )
					);

				} else {

					throw new Error( "Unexpected vertex/normal/uv line: '" + line  + "'" );

				}

			} else if ( lineFirstChar === "f" ) {

				if ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {

					// f vertex/uv/normal vertex/uv/normal vertex/uv/normal
					// 0                        1    2    3    4    5    6    7    8    9   10         11         12
					// ["f 1/1/1 2/2/2 3/3/3", "1", "1", "1", "2", "2", "2", "3", "3", "3", undefined, undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],
						result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],
						result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]
					);

				} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {

					// f vertex/uv vertex/uv vertex/uv
					// 0                  1    2    3    4    5    6   7          8
					// ["f 1/1 2/2 3/3", "1", "1", "2", "2", "3", "3", undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
						result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
					);

				} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {

					// f vertex//normal vertex//normal vertex//normal
					// 0                     1    2    3    4    5    6   7          8
					// ["f 1//1 2//2 3//3", "1", "1", "2", "2", "3", "3", undefined, undefined]

					state.addFace(
						result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
						undefined, undefined, undefined, undefined,
						result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
					);

				} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {

					// f vertex vertex vertex
					// 0            1    2    3   4
					// ["f 1 2 3", "1", "2", "3", undefined]

					state.addFace(
						result[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]
					);

				} else {

					throw new Error( "Unexpected face line: '" + line  + "'" );

				}

			} else if ( lineFirstChar === "l" ) {

				var lineParts = line.substring( 1 ).trim().split( " " );
				var lineVertices = [], lineUVs = [];

				if ( line.indexOf( "/" ) === - 1 ) {

					lineVertices = lineParts;

				} else {

					for ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {

						var parts = lineParts[ li ].split( "/" );

						if ( parts[ 0 ] !== "" ) lineVertices.push( parts[ 0 ] );
						if ( parts[ 1 ] !== "" ) lineUVs.push( parts[ 1 ] );

					}

				}
				state.addLineGeometry( lineVertices, lineUVs );

			} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {

				// o object_name
				// or
				// g group_name

				// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869
				// var name = result[ 0 ].substr( 1 ).trim();
				var name = ( " " + result[ 0 ].substr( 1 ).trim() ).substr( 1 );

				state.startObject( name );

			} else if ( this.regexp.material_use_pattern.test( line ) ) {

				// material

				state.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );

			} else if ( this.regexp.material_library_pattern.test( line ) ) {

				// mtl file

				state.materialLibraries.push( line.substring( 7 ).trim() );

			} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {

				// smooth shading

				// @todo Handle files that have varying smooth values for a set of faces inside one geometry,
				// but does not define a usemtl for each face set.
				// This should be detected and a dummy material created (later MultiMaterial and geometry groups).
				// This requires some care to not create extra material on each smooth value for "normal" obj files.
				// where explicit usemtl defines geometry groups.
				// Example asset: examples/models/obj/cerberus/Cerberus.obj

				var value = result[ 1 ].trim().toLowerCase();
				state.object.smooth = ( value === '1' || value === 'on' );

				var material = state.object.currentMaterial();
				if ( material ) {

					material.smooth = state.object.smooth;

				}

			} else {

				// Handle null terminated files without exception
				if ( line === '\0' ) continue;

				throw new Error( "Unexpected line: '" + line  + "'" );

			}

		}

		state.finalize();

		var container = new THREE.Group();
		container.materialLibraries = [].concat( state.materialLibraries );

		for ( var i = 0, l = state.objects.length; i < l; i ++ ) {

			var object = state.objects[ i ];
			var geometry = object.geometry;
			var materials = object.materials;
			var isLine = ( geometry.type === 'Line' );

			// Skip o/g line declarations that did not follow with any faces
			if ( geometry.vertices.length === 0 ) continue;

			var buffergeometry = new THREE.BufferGeometry();

			buffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );

			if ( geometry.normals.length > 0 ) {

				buffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );

			} else {

				buffergeometry.computeVertexNormals();

			}

			if ( geometry.uvs.length > 0 ) {

				buffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );

			}

			// Create materials

			var createdMaterials = [];

			for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {

				var sourceMaterial = materials[mi];
				var material = undefined;

				if ( this.materials !== null ) {

					material = this.materials.create( sourceMaterial.name );

					// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.
					if ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {

						var materialLine = new THREE.LineBasicMaterial();
						materialLine.copy( material );
						material = materialLine;

					}

				}

				if ( ! material ) {

					material = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );
					material.name = sourceMaterial.name;

				}

				material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;

				createdMaterials.push(material);

			}

			// Create mesh

			var mesh;

			if ( createdMaterials.length > 1 ) {

				for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {

					var sourceMaterial = materials[mi];
					buffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );

				}

				var multiMaterial = new THREE.MultiMaterial( createdMaterials );
				mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, multiMaterial ) : new THREE.LineSegments( buffergeometry, multiMaterial ) );

			} else {

				mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );
			}

			mesh.name = object.name;

			container.add( mesh );

		}

		console.timeEnd( 'OBJLoader' );

		return container;

	}

};

},{}],73:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel("FPS","#0ff","#002")),f=h(new Stats.Panel("MS","#0f0","#020"));
if(self.performance&&self.performance.memory)var t=h(new Stats.Panel("MB","#f08","#201"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};
Stats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r;q.height=f;q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");b.font="bold "+9*a+"px Helvetica,Arial,sans-serif";b.textBaseline="top";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,
v){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+" "+h+" ("+e(c)+"-"+e(g)+")",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};"object"===typeof module&&(module.exports=Stats);

},{}],74:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com
 */

THREE.PaintViveController = function ( id ) {

	THREE.ViveController.call( this, id );

	var PI2 = Math.PI * 2;

	var MODES = { COLOR: 0, SIZE: 1 };
	var mode = MODES.COLOR;

	var color = new THREE.Color( 1, 1, 1 );
	var size = 1.0;

	//

	function generateHueTexture() {

		var canvas = document.createElement( 'canvas' );
		canvas.width = 256;
		canvas.height = 256;

		var context = canvas.getContext( '2d' );
		var imageData = context.getImageData( 0, 0, 256, 256 );
		var data = imageData.data;

		for ( var i = 0, j = 0; i < data.length; i += 4, j ++ ) {

			var x = ( ( j % 256 ) / 256 ) - 0.5;
			var y = ( Math.floor( j / 256 ) / 256 ) - 0.5;

			color.setHSL( Math.atan2( y, x ) / PI2, 1,( 0.5 - Math.sqrt( x * x + y * y ) ) * 2.0 );

			data[ i + 0 ] = color.r * 256;
			data[ i + 1 ] = color.g * 256;
			data[ i + 2 ] = color.b * 256;
			data[ i + 3 ] = 256;

		}

		context.putImageData( imageData, 0, 0 );

		return new THREE.CanvasTexture( canvas );

	}

	var geometry = new THREE.CircleGeometry( 1, 32 );
	var material = new THREE.MeshBasicMaterial( { map: generateHueTexture() } );
	var mesh = new THREE.Mesh( geometry, material );
	mesh.position.set( 0, 0.005, 0.0495 );
	mesh.rotation.x = - 1.45;
	mesh.scale.setScalar( 0.02 );
	this.add( mesh )

	var geometry = new THREE.IcosahedronGeometry( 0.1, 2 );
	var material = new THREE.MeshBasicMaterial();
	material.color = color;
	var ball = new THREE.Mesh( geometry, material );
	mesh.add( ball );

	function onAxisChanged( event ) {

		if ( this.getButtonState( 'thumbpad' ) === false ) return;

		var x = event.axes[ 0 ] / 2.0;
		var y = - event.axes[ 1 ] / 2.0;

		if ( mode === MODES.COLOR ) {
			color.setHSL( Math.atan2( y, x ) / PI2, 1, ( 0.5 - Math.sqrt( x * x + y * y ) ) * 2.0 );
			ball.position.x = event.axes[ 0 ];
			ball.position.y = event.axes[ 1 ];
		}

		if ( mode === MODES.SIZE ) {
			size = y + 1;
		}

	}

	function onGripsDown( event ) {

		if ( mode === MODES.COLOR ) {
			mode = MODES.SIZE;
			mesh.visible = false;
			return;
		}

		if ( mode === MODES.SIZE ) {
			mode = MODES.COLOR;
			mesh.visible = true;
			return;
		}

	}

	this.getColor = function () { return color; };
	this.getSize = function () { return size; };

	this.addEventListener( 'axischanged', onAxisChanged );
	this.addEventListener( 'gripsdown', onGripsDown );

};

THREE.PaintViveController.prototype = Object.create( THREE.ViveController.prototype );
THREE.PaintViveController.prototype.constructor = THREE.PaintViveController;

},{}],75:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com
 * @author stewdio / http://stewd.io
 */

THREE.ViveController = function ( id ) {

	THREE.Object3D.call( this );

	var scope = this;
	var gamepad;

	var axes = [ 0, 0 ];
	var thumbpadIsPressed = false;
	var triggerIsPressed = false;
	var gripsArePressed = false;
	var menuIsPressed = false;

	function findGamepad( id ) {

		// Iterate across gamepads as Vive Controllers may not be
		// in position 0 and 1.

		var gamepads = navigator.getGamepads();

		for ( var i = 0, j = 0; i < 4; i ++ ) {

			var gamepad = gamepads[ i ];

			if ( gamepad && gamepad.id === 'OpenVR Gamepad' ) {

				if ( j === id ) return gamepad;

				j ++;

			}

		}

	}

	this.matrixAutoUpdate = false;
	this.standingMatrix = new THREE.Matrix4();

	this.getGamepad = function () {

		return gamepad;

	};

	this.getButtonState = function ( button ) {

		if ( button === 'thumbpad' ) return thumbpadIsPressed;
		if ( button === 'trigger' ) return triggerIsPressed;
		if ( button === 'grips' ) return gripsArePressed;
		if ( button === 'menu' ) return menuIsPressed;

	};

	this.update = function () {

		gamepad = findGamepad( id );

		if ( gamepad !== undefined && gamepad.pose !== undefined ) {

			if ( gamepad.pose === null ) return; // No user action yet

			//  Position and orientation.

			var pose = gamepad.pose;

			if ( pose.position !== null ) scope.position.fromArray( pose.position );
			if ( pose.orientation !== null ) scope.quaternion.fromArray( pose.orientation );
			scope.matrix.compose( scope.position, scope.quaternion, scope.scale );
			scope.matrix.multiplyMatrices( scope.standingMatrix, scope.matrix );
			scope.matrixWorldNeedsUpdate = true;
			scope.visible = true;

			//  Thumbpad and Buttons.

			if ( axes[ 0 ] !== gamepad.axes[ 0 ] || axes[ 1 ] !== gamepad.axes[ 1 ] ) {

				axes[ 0 ] = gamepad.axes[ 0 ]; //  X axis: -1 = Left, +1 = Right.
				axes[ 1 ] = gamepad.axes[ 1 ]; //  Y axis: -1 = Bottom, +1 = Top.
				scope.dispatchEvent( { type: 'axischanged', axes: axes } );

			}

			if ( thumbpadIsPressed !== gamepad.buttons[ 0 ].pressed ) {

				thumbpadIsPressed = gamepad.buttons[ 0 ].pressed;
				scope.dispatchEvent( { type: thumbpadIsPressed ? 'thumbpaddown' : 'thumbpadup' } );

			}

			if ( triggerIsPressed !== gamepad.buttons[ 1 ].pressed ) {

				triggerIsPressed = gamepad.buttons[ 1 ].pressed;
				scope.dispatchEvent( { type: triggerIsPressed ? 'triggerdown' : 'triggerup' } );

			}

			if ( gripsArePressed !== gamepad.buttons[ 2 ].pressed ) {

				gripsArePressed = gamepad.buttons[ 2 ].pressed;
				scope.dispatchEvent( { type: gripsArePressed ? 'gripsdown' : 'gripsup' } );

			}

			if ( menuIsPressed !== gamepad.buttons[ 3 ].pressed ) {

				menuIsPressed = gamepad.buttons[ 3 ].pressed;
				scope.dispatchEvent( { type: menuIsPressed ? 'menudown' : 'menuup' } );

			}

		} else {

			scope.visible = false;

		}

	};

};

THREE.ViveController.prototype = Object.create( THREE.Object3D.prototype );
THREE.ViveController.prototype.constructor = THREE.ViveController;

},{}],76:[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com
 * Based on @tojiro's vr-samples-utils.js
 */

this.WEBVR = {

	isLatestAvailable: function () {

		console.warn( 'WEBVR: isLatestAvailable() is being deprecated. Use .isAvailable() instead.' );
		return this.isAvailable();

	},

	isAvailable: function () {

		return navigator.getVRDisplays !== undefined;

	},

	getMessage: function () {

		var message;

		if ( navigator.getVRDisplays ) {

			navigator.getVRDisplays().then( function ( displays ) {

				if ( displays.length === 0 ) message = 'WebVR supported, but no VRDisplays found.';

			} );

		} else {

			message = 'Your browser does not support WebVR. See <a href="http://webvr.info">webvr.info</a> for assistance.';

		}

		if ( message !== undefined ) {

			var container = document.createElement( 'div' );
			container.style.position = 'absolute';
			container.style.left = '0';
			container.style.top = '0';
			container.style.right = '0';
			container.style.zIndex = '999';
			container.align = 'center';

			var error = document.createElement( 'div' );
			error.style.fontFamily = 'sans-serif';
			error.style.fontSize = '16px';
			error.style.fontStyle = 'normal';
			error.style.lineHeight = '26px';
			error.style.backgroundColor = '#fff';
			error.style.color = '#000';
			error.style.padding = '10px 20px';
			error.style.margin = '50px';
			error.style.display = 'inline-block';
			error.innerHTML = message;
			container.appendChild( error );

			return container;

		}

	},

	getButton: function ( effect ) {

		var button = document.createElement( 'button' );
		button.style.position = 'absolute';
		button.style.left = 'calc(50% - 50px)';
		button.style.bottom = '20px';
		button.style.width = '100px';
		button.style.border = '0';
		button.style.padding = '8px';
		button.style.cursor = 'pointer';
		button.style.backgroundColor = '#000';
		button.style.color = '#fff';
		button.style.fontFamily = 'sans-serif';
		button.style.fontSize = '13px';
		button.style.fontStyle = 'normal';
		button.style.textAlign = 'center';
		button.style.zIndex = '999';
		button.textContent = 'ENTER VR';
		button.onclick = function() {

			effect.isPresenting ? effect.exitPresent() : effect.requestPresent();

		};

		window.addEventListener( 'vrdisplaypresentchange', function ( event ) {

			button.textContent = effect.isPresenting ? 'EXIT VR' : 'ENTER VR';

		}, false );

		return button;

	}

};

},{}],77:[function(require,module,exports){

if( !THREE.REVISION.includes( "d3x0r" ) ) {

if( Number(THREE.REVISION) === 74 ) {
}

var vector3Pool = [];
THREE.Vector3Pool = {
	new : function(x,y,z) {
		var r = vector3Pool.pop();
		if( r ) {
			r.x = x;
			r.y = y;
			r.z = z;
		}
		else{
			r = new THREE.Vector3(x,y,z);
		}
		return r;
	}
}

THREE.Vector3.prototype.delete = function() {
    vector3Pool.push( this );
    return this;
}

var vector4Pool = [];
THREE.Vector4Pool = {
	new : function(x,y,z,w) {
		var r = vector4Pool.pop();
		if( r ) {
			r.x = x;
			r.y = y;
			r.z = z;
			r.w = w;
		}
		else{
			r = new THREE.Vector4(x,y,z,w);
		}
		return r;
	}
}

THREE.Vector4.prototype.delete = function() {
    vector4Pool.push( this );
    return this;
}


/*
	INLINEFUNC( void, Rotate, ( RCOORD dAngle, P_POINT vaxis1, P_POINT vaxis2 ) )
	{
	   _POINT v1, v2;
	   _POINT vsave;
	   RCOORD dsin = (RCOORD)SIN( dAngle )
	   	  , dcos = (RCOORD)COS( dAngle );
	   MemCpy( vsave, vaxis1, sizeof( _POINT ) );
	   DOFUNC(scale)( v1, vaxis1, dcos );
	   DOFUNC(scale)( v2, vaxis2, dsin );
	   DOFUNC(sub)( vaxis1, v1, v2 );
	   DOFUNC(scale)( v2, vsave, dsin );
	   DOFUNC(scale)( v1, vaxis2, dcos );
	   DOFUNC(add)( vaxis2, v2, v1 );
	}
*/

THREE.Vector3Unit = new      THREE.Vector3(  1,  1,  1 );
THREE.Vector3Zero = new      THREE.Vector3(  0,  0,  0 );
THREE.Vector3Right = new     THREE.Vector3( -1,  0,  0 );
THREE.Vector3Backward = new  THREE.Vector3(  0,  0,  1 );
THREE.Vector3Up = new        THREE.Vector3(  0,  1,  0 );
THREE.Vector3Left = new      THREE.Vector3(  1,  0,  0 );
THREE.Vector3Forward = new   THREE.Vector3(  0,  0, -1 );
THREE.Vector3Down = new      THREE.Vector3(  0, -1,  0 );


["Vector3Unit"
,"Vector3Zero"
,"Vector3Right"
,"Vector3Backward"
,"Vector3Up"
,"Vector3Left"
,"Vector3Forward"
,"Vector3Down"].forEach( function(key){
	Object.freeze(THREE[key])
	Object.defineProperty(THREE[key], "x", { writable: false })
	Object.defineProperty(THREE[key], "y", { writable: false })
	Object.defineProperty(THREE[key], "z", { writable: false })
})

var oldProto = THREE.Matrix4.prototype;
var oldMatrixContructor = THREE.Matrix4.prototype.constructor;
THREE.Matrix4x = function() {
	this.elements = new Float32Array( [

		1, 0, 0, 0,
		0, 1, 0, 0,
		0, 0, 1, 0,
		0, 0, 0, 1

	] );

	Object.defineProperty(this, "elements", { writable:false } );


}

THREE.Matrix4.prototype.__defineGetter__( "motion", function(){
	if( !this._motion ){
        this._motion = {
        	tick : 0,
        	speed : new THREE.Vector3(),
                acceleration : new THREE.Vector3(),
                rotation : new THREE.Vector3(),
                torque : new THREE.Vector3(),
                mass : 1.0,
                move : function( m, delta ) {
					this.speed.addScaledVector( this.acceleration, delta );
					var del = this.speed.clone().multiplyScalar( delta );

					m.origin.addScaledVector( m.forward, del.z );
					m.origin.addScaledVector( m.up, del.y );
					m.origin.addScaledVector( m.left, del.x );

					this.rotation.addScaledVector( this.torque, delta );
					var this_move = this.rotation.clone().multiplyScalar( delta )
					m.rotateRelative( this_move.x, this_move.y, this_move.z );
					this_move.delete();
					del.delete();
				},
				rotate : function( m, delta ) {
					var iterations = 1;

					var max = Math.abs( this.rotation.x );
					var tmp = Math.abs( this.rotation.y );
					if( tmp > max ) {
						max = tmp;
						tmp = Math.abs( this.rotation.z );
						if( tmp > max ) {
							max = tmp;
							while( ( ( max * delta ) / iterations ) > 0.1 )
								iterations++;
						} else {
							while( ( ( max * delta ) / iterations ) > 0.1 )
								iterations++;
						}
					} else {
						tmp = Math.abs( this.rotation.z );
						if( tmp > max ) {
							max = tmp;
							while( ( ( max * delta ) / iterations ) > 0.1 )
								iterations++;
						} else {
							while( ( ( max * delta ) / iterations ) > 0.1 )
								iterations++;
						}
					}
					var delx = ( this.rotation.x * delta ) / iterations;
					var dely = ( this.rotation.y * delta ) / iterations;
					var delz = ( this.rotation.z * delta ) / iterations;
					for( var n = 0; n < iterations; n++ ) {
						m.rotateRelative( delx, dely, delz );
					}
					// delta = delta / 1000;
					/*
					   ** this is becoming a physics engine frame...
					   ** might as well just add that.
                	var delta_accel = this.acceleration.clone().multiplyScalar(delta);
					if( ( this.rotation.x > ( Math.PI / 4 ) )
					   ||( this.rotation.x < -( Math.PI / 4 ) )
					   ||( this.rotation.y > ( Math.PI / 4 ) )
					   ||( this.rotation.y < -( Math.PI / 4 ) )
					   ||( this.rotation.z > ( Math.PI / 4 ) )
					   ||( this.rotation.z < -( Math.PI / 4 ) )
					   ){
						   var max = this.rotation.x;
						   if( max < this.rotation.y )
						   	 max = this.rotation.y;
						   if( max < this.rotation.z )
						     max = this.rotation.z;
						 var min = this.rotation.x;
  						   if( min > this.rotation.y )
  						   	 max = this.rotation.y;
  						   if( min > this.rotation.z )
  						     max = this.rotation.z;
							if( min < 0 )
								if( max < -min )
									max = -min;
							var t;
							for( t = 1; t < 100; t++ )
								if( ( max / t ) < ( Math.PI / 4 ))
									break;

							delta_accel.scale( 1 / t );
					   }
					  */
				  },


			rotate : function( m, delta ) {
				var iterations = 1;

				var max = Math.abs( this.rotation.x );
				var tmp = Math.abs( this.rotation.y );
				if( tmp > max ) {
					max = tmp;
					tmp = Math.abs( this.rotation.z );
					if( tmp > max ) {
						max = tmp;
						while( ( ( max * delta ) / iterations ) > 0.1 )
							iterations++;
					} else {
						while( ( ( max * delta ) / iterations ) > 0.1 )
							iterations++;
					}
				} else {
					tmp = Math.abs( this.rotation.z );
					if( tmp > max ) {
						max = tmp;
						while( ( ( max * delta ) / iterations ) > 0.1 )
							iterations++;
					} else {
						while( ( ( max * delta ) / iterations ) > 0.1 )
							iterations++;
					}
				}
				var delx = ( this.rotation.x * delta ) / iterations;
				var dely = ( this.rotation.y * delta ) / iterations;
				var delz = ( this.rotation.z * delta ) / iterations;
				for( var n = 0; n < iterations; n++ ) {
					m.rotateRelative( delx, dely, delz );
				}
				// delta = delta / 1000;
				/*
					 ** this is becoming a physics engine frame...
					 ** might as well just add that.
								var delta_accel = this.acceleration.clone().multiplyScalar(delta);
				if( ( this.rotation.x > ( Math.PI / 4 ) )
					 ||( this.rotation.x < -( Math.PI / 4 ) )
					 ||( this.rotation.y > ( Math.PI / 4 ) )
					 ||( this.rotation.y < -( Math.PI / 4 ) )
					 ||( this.rotation.z > ( Math.PI / 4 ) )
					 ||( this.rotation.z < -( Math.PI / 4 ) )
					 ){
						 var max = this.rotation.x;
						 if( max < this.rotation.y )
							 max = this.rotation.y;
						 if( max < this.rotation.z )
							 max = this.rotation.z;
					 var min = this.rotation.x;
							 if( min > this.rotation.y )
								 max = this.rotation.y;
							 if( min > this.rotation.z )
								 max = this.rotation.z;
						if( min < 0 )
							if( max < -min )
								max = -min;
						var t;
						for( t = 1; t < 100; t++ )
							if( ( max / t ) < ( Math.PI / 4 ))
								break;

						delta_accel.scale( 1 / t );
					 }
					*/
				}

	        };
	}
	return this._motion;
} );

THREE.Matrix4.prototype.__defineGetter__( "origin", function(){
	if( !this._origin ){
		var self = this;
		this._origin = new THREE.Vector3();
		Object.defineProperty(this, "_origin", { writable:false } );
		Object.defineProperty( this._origin, "x", {
			get : function(){
				return self.elements[12];
			},
			set : function(v){
				self.elements[12] = v;
			}
		})
		Object.defineProperty( this._origin, "y", {
			get : ()=>{
				return self.elements[13];
			},
			set : (v)=>{
				self.elements[13] = v;
			}
		})
		Object.defineProperty( this._origin, "z", {
			get : ()=>{
				return self.elements[14];
			},
			set : (v)=>{
				self.elements[14] = v;
			}
		})
	}
	return this._origin;
} );




THREE.Matrix4.prototype.rotateOrtho = function( angle, axis1, axis2 ) {
		if( !angle ) return;
		// 0 = x;  0
		// 1 = y;  4
		// 2 = z;  8
		var te = this.elements;
		var sa = Math.sin( angle );
		var ca = Math.cos( angle );
        switch( axis1 )	{
			case 0: switch( axis2 ){
				case 0:
					throw new Error( "Invalid axis combination, cannot rotate axis toward itself")
				break;
				case 1:
					var save1x = te[0], save1y = te[1], save1z = te[2];
					var tmp1x = te[0] * ca, tmp1y = te[1] * ca, tmp1z = te[2] * ca;
					var tmp2x = te[4] * sa, tmp2y = te[5] * sa, tmp2z = te[6] * sa;
					te[0] = tmp1x - tmp2x; te[1] = tmp1y - tmp2y; te[2] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[4] * ca; tmp1y = te[5] * ca; tmp1z = te[6] * ca;
					te[4] = tmp1x + tmp2x; te[5] = tmp1y + tmp2y; te[6] = tmp1z + tmp2z;
					break;
				case 2:
					var save1x = te[0], save1y = te[1], save1z = te[2];
					var tmp1x = te[0] * ca, tmp1y = te[1] * ca, tmp1z = te[2] * ca;
					var tmp2x = te[8] * sa, tmp2y = te[9] * sa, tmp2z = te[10] * sa;
					te[0] = tmp1x - tmp2x; te[1] = tmp1y - tmp2y; te[2] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[8] * ca; tmp1y = te[9] * ca; tmp1z = te[10] * ca;
					te[8] = tmp1x + tmp2x; te[9] = tmp1y + tmp2y; te[10] = tmp1z + tmp2z;
					break;
			}
			break;
			case 1: switch( axis2 ){
				case 0:
					var save1x = te[4], save1y = te[5], save1z = te[6];
					var tmp1x = te[4] * ca, tmp1y = te[5] * ca, tmp1z = te[6] * ca;
					var tmp2x = te[0] * sa, tmp2y = te[1] * sa, tmp2z = te[2] * sa;
					te[4] = tmp1x - tmp2x; te[5] = tmp1y - tmp2y; te[6] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[0] * ca; tmp1y = te[1] * ca; tmp1z = te[2] * ca;
					te[0] = tmp1x + tmp2x; te[1] = tmp1y + tmp2y; te[2] = tmp1z + tmp2z;
					break;
				case 1:
					throw new Error( "Invalid axis combination, cannot rotate axis toward itself")
				break;
				case 2:
					var save1x = te[4], save1y = te[5], save1z = te[6];
					var tmp1x = te[4] * ca, tmp1y = te[5] * ca, tmp1z = te[6] * ca;
					var tmp2x = te[8] * sa, tmp2y = te[9] * sa, tmp2z = te[10] * sa;
					te[4] = tmp1x - tmp2x; te[5] = tmp1y - tmp2y; te[6] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[8] * ca; tmp1y = te[9] * ca; tmp1z = te[10] * ca;
					te[8] = tmp1x + tmp2x; te[9] = tmp1y + tmp2y; te[10] = tmp1z + tmp2z;
				break;
			}
			break;
			case 2: switch( axis2 ){
				case 0:
					var save1x = te[8], save1y = te[9], save1z = te[10];
					var tmp1x = te[8] * ca, tmp1y = te[9] * ca, tmp1z = te[10] * ca;
					var tmp2x = te[0] * sa, tmp2y = te[1] * sa, tmp2z = te[2] * sa;
					te[8] = tmp1x - tmp2x; te[9] = tmp1y - tmp2y; te[10] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[0] * ca; tmp1y = te[1] * ca; tmp1z = te[2] * ca;
					te[0] = tmp1x + tmp2x; te[1] = tmp1y + tmp2y; te[2] = tmp1z + tmp2z;
				break;
				case 1:
					var save1x = te[8], save1y = te[9], save1z = te[10];
					var tmp1x = te[8] * ca, tmp1y = te[9] * ca, tmp1z = te[10] * ca;
					var tmp2x = te[4] * sa, tmp2y = te[5] * sa, tmp2z = te[6] * sa;
					te[8] = tmp1x - tmp2x; te[9] = tmp1y - tmp2y; te[10] = tmp1z - tmp2z;
					tmp2x = save1x * sa; tmp2y = save1y * sa; tmp2z = save1z * sa;
					tmp1x = te[4] * ca; tmp1y = te[5] * ca; tmp1z = te[6] * ca;
					te[4] = tmp1x + tmp2x; te[5] = tmp1y + tmp2y; te[6] = tmp1z + tmp2z;
				break;
				case 2:
					throw new Error( "Invalid axis combination, cannot rotate axis toward itself")
				break;
			}
			break;
		}
    };
	THREE.Matrix4.prototype.Translate = function(x,y,z) {
			this.origin.x = x;
			this.origin.y = y;
			this.origin.z = z;
	};
	THREE.Matrix4.prototype.rotateRelative = function( x, y, z ){
		//console.trace( "rotate starts as ", this )
		if( typeof this.tick === "undefined" ) this.tick = 0;
		switch( this.tick++ ) {
			case 0:
				this.rotateOrtho( x, 1, 2 );
				this.rotateOrtho( y, 0, 2 );
				this.rotateOrtho( z, 0, 1 );
				break;
			case 1:
				this.rotateOrtho( y, 0, 2 );
				this.rotateOrtho( x, 1, 2 );
				this.rotateOrtho( z, 0, 1 );
				break;
			case 2:
				this.rotateOrtho( z, 0, 1 );
				this.rotateOrtho( x, 1, 2 );
				this.rotateOrtho( y, 0, 2 );
				break;
			case 3:
				this.rotateOrtho( x, 1, 2 );
				this.rotateOrtho( z, 0, 1 );
				this.rotateOrtho( y, 0, 2 );
				break;
			case 4:
				this.rotateOrtho( y, 0, 2 );
				this.rotateOrtho( z, 0, 1 );
				this.rotateOrtho( x, 1, 2 );
				break;
			case 5:
				this.rotateOrtho( z, 0, 1 );
				this.rotateOrtho( y, 0, 2 );
				this.rotateOrtho( x, 1, 2 );
				this.tick = 0;
				break;
		}
	};
	THREE.Matrix4.prototype.__defineGetter__( "left", function(){
        	return THREE.Vector3Pool.new( this.elements[0], this.elements[1], this.elements[2] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "right", function(){
		return THREE.Vector3Pool.new( -this.elements[0], -this.elements[1], -this.elements[2] );
	} );
	THREE.Matrix4.prototype.__defineGetter__( "up", function(){
        	return THREE.Vector3Pool.new( this.elements[4], this.elements[5], this.elements[6] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "down", function(){
		return THREE.Vector3Pool.new( -this.elements[4], -this.elements[5], -this.elements[6] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "forward", function(){
        	return THREE.Vector3Pool.new( -this.elements[8], -this.elements[9], -this.elements[10] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "backward", function(){
		return THREE.Vector3Pool.new( this.elements[8], this.elements[9], this.elements[10] );
        } );
	THREE.Matrix4.prototype.move = function (tick) {
        	if( this.motion )
				this.motion.move( this, tick );
        	//this.origin.addScaledVector( this.forward, z ).addScaledVector( this.up, y ).addScaledVector( this.left, x )
		};
	THREE.Matrix4.prototype.moveNow = function ( x,y,z ) { this.origin.addScaledVector( this.forward, z ).addScaledVector( this.up, y ).addScaledVector( this.left, x ) };
	THREE.Matrix4.prototype.moveForward = function ( n ) { this.origin.addScaledVector( this.forward, n ); };
	THREE.Matrix4.prototype.moveUp = function ( n ) { this.origin.addScaledVector( this.up, n ); };
	THREE.Matrix4.prototype.moveLeft = function ( n ) { this.origin.addScaledVector( this.left, n ); };
	THREE.Matrix4.prototype.moveBackward = function ( n ) { this.origin.addScaledVector( this.backward, n ); };
	THREE.Matrix4.prototype.moveDown = function ( n ) { this.origin.addScaledVector( this.down, n ); };
	THREE.Matrix4.prototype.moveRight = function ( n ) { this.origin.addScaledVector( this.right, n ); };

	THREE.Matrix4.prototype.__defineGetter__( "inv_left", function(){
        	return Vector3Pool.new( this.elements[0], this.elements[4], this.elements[8] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "inv_up", function(){
        	return Vector3Pool.new( this.elements[1], this.elements[5], this.elements[9] );
        } );
	THREE.Matrix4.prototype.__defineGetter__( "inv_forward", function(){
        	return Vector3Pool.new( this.elements[2], this.elements[6], this.elements[10] );
        } );

	THREE.Matrix4.prototype.getRoll = function( relativeUp ) {
		//if( !relativeUp ) relativeUp = THREE.Vector3Up;
		return Math.asin( this.right.dot( relativeUp ) );
	};
	THREE.Matrix4.prototype.getPitch = function( relativeForward ) {
		//if( !relativeForward ) relativeForward = THREE.Vector3Forward;
		return Math.asin( this.up.dot( relativeForward ) );
	};
	THREE.Matrix4.prototype.getYaw = function( relativeRight ) {
		//if( !relativeRight ) relativeRight = THREE.Vector3Right;
		return Math.asin( this.forward.dot( relativeRight ) );
	};
	THREE.Matrix4.prototype.__defineGetter__( "roll", function(){
		return this.getRoll( THREE.Vector3Up );
	} );
	THREE.Matrix4.prototype.__defineGetter__( "pitch", function(){
		return this.getPitch( THREE.Vector3Forward );
	} );
	THREE.Matrix4.prototype.__defineGetter__( "yaw", function(){
		return this.getYaw( THREE.Vector3Right );
	} );
}

},{}],78:[function(require,module,exports){

if( typeof Voxelarium === "undefined" ){
    this.Voxelarium = {};
//	var Voxelarium;
}

Voxelarium = { VERSION : "0.0.1",
  Settings : {
     VR : true,
     AltSpace : true,
      use_basic_material : true,
      use_vive : true,
  }
};

if( typeof updateVoxelariumSettings === 'function' ){
  updateVoxelariumSettings();
}

Object.freeze( Voxelarium.Settings );

if(  THREE === null ) {
//	THREE = require( "./three.js.74/build/three.js")
}
	require( "./three.js/personalFill.js")

//if( Voxelarium.Settings.AltSpace )
//   var altspace = require( "./AltSpaceVR/dist/altspace.js" );

Voxelarium.Stats = (!Voxelarium.Settings.VR)?require( './three.js/js/stats.min.js' ):function(){};
if( !Voxelarium.Settings.AltSpace && Voxelarium.Settings.VR ) {
  require( './three.js/js/controls/VRControls.js' );
  require( './three.js/js/effects/VREffect.js' );

  require( './three.js/js/vr/ViveController.js' );
  require( './three.js/js/vr/PaintViveController.js' );
  require( './three.js/js/vr/WebVR.js' );
  require( './three.js/js/loaders/OBJLoader.js' );
}

Voxelarium.clock = new THREE.Clock()


if( !Voxelarium.Settings.VR ) {
  require( "./orbit_controls.js" )
  require( "./NaturalCamera.js" )
  require( "./gameMouse.js" )
}

if( !Voxelarium.Settings.use_basic_material )
	require( "./glow.renderer.js" );

require( "./src/three.js.example/Projector.js" )
require( "./src/three.js.post/shaders/CopyShader.js")
require( "./src/three.js.post/shaders/HorizontalBlurShader.js")
require( "./src/three.js.post/shaders/VerticalBlurShader.js")
//require( "./src/three.js.post/shaders/ConvolutionShader.js")
//require( "./src/three.js.post/shaders/DotScreenShader.js")
//require( "./src/three.js.post/shaders/FilmShader.js")
require( "./src/three.js.post/EffectComposer.js")
require( "./src/three.js.post/BloomPass.js")


//require( "./src/three.js.post/AdaptiveToneMappingPass.js")
//require( "./src/three.js.post/BokehPass.js")
require( "./src/three.js.post/ClearPass.js")
//require( "./src/three.js.post/DotScreenPass.js")
//require( "./src/three.js.post/FilmPass.js")
//require( "./src/three.js.post/GlitchPass.js")
//require( "./src/three.js.post/ManualMSAARenderPass.js")
require( "./src/three.js.post/MaskPass.js")
require( "./src/three.js.post/RenderPass.js")
//require( "./src/three.js.post/SavePass.js")
require( "./src/three.js.post/ShaderPass.js")
//require( "./src/three.js.post/SMAAPass.js")
//require( "./src/three.js.post/TAARenderPass.js")
require( "./src/three.js.post/TexturePass.js")

Voxelarium.camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 0.001, 10000 );
//console.log( Voxelarium.camera.projectionMatrix.toArray() )
require( "./src/voxelarium.gun.db.js" )

//--- fonts ---
Voxelarium.Fonts = {};
require( "./src/fonts/TI99.js")
//require( "./src/fonts/msyh1.js")

require( "./src/constants.js")
require( "./src/bitstream.js")  // read and write bits

require( "./src/sector.js")
require( "./src/cluster.js")
require( "./src/world.js")

require( "./src/geometrybasicbuffer.js")
require( "./src/geometrybuffer.js")
require( "./src/geometrymaterial.js")
require( "./src/geometrybuffer.mono.js")
require( "./src/geometrymaterial.mono.js")
require( "./src/textureAtlas.canvas.js")

require( "./src/voxelSelector.js")

require( "./src/sorting.tree.js")
require( "./src/mesher.basic.js")

require( "./src/voxels.js" )  // must be after atlas


require( "./src/voxel_inventory.js")  // must be after voxels
//Object.freeze( Voxelarium );
//Voxelarium.freeze();

},{"./NaturalCamera.js":1,"./gameMouse.js":2,"./glow.renderer.js":3,"./orbit_controls.js":36,"./src/bitstream.js":37,"./src/cluster.js":38,"./src/constants.js":39,"./src/fonts/TI99.js":40,"./src/geometrybasicbuffer.js":41,"./src/geometrybuffer.js":42,"./src/geometrybuffer.mono.js":43,"./src/geometrymaterial.js":44,"./src/geometrymaterial.mono.js":45,"./src/mesher.basic.js":46,"./src/sector.js":50,"./src/sorting.tree.js":51,"./src/textureAtlas.canvas.js":52,"./src/three.js.example/Projector.js":53,"./src/three.js.post/BloomPass.js":54,"./src/three.js.post/ClearPass.js":55,"./src/three.js.post/EffectComposer.js":56,"./src/three.js.post/MaskPass.js":57,"./src/three.js.post/RenderPass.js":58,"./src/three.js.post/ShaderPass.js":59,"./src/three.js.post/TexturePass.js":60,"./src/three.js.post/shaders/CopyShader.js":61,"./src/three.js.post/shaders/HorizontalBlurShader.js":62,"./src/three.js.post/shaders/VerticalBlurShader.js":63,"./src/voxelSelector.js":65,"./src/voxel_inventory.js":66,"./src/voxelarium.gun.db.js":67,"./src/voxels.js":68,"./src/world.js":69,"./three.js/js/controls/VRControls.js":70,"./three.js/js/effects/VREffect.js":71,"./three.js/js/loaders/OBJLoader.js":72,"./three.js/js/stats.min.js":73,"./three.js/js/vr/PaintViveController.js":74,"./three.js/js/vr/ViveController.js":75,"./three.js/js/vr/WebVR.js":76,"./three.js/personalFill.js":77}]},{},[78])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1VzZXJzL1lvdXplci9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJOYXR1cmFsQ2FtZXJhLmpzIiwiZ2FtZU1vdXNlLmpzIiwiZ2xvdy5yZW5kZXJlci5qcyIsIm5vZGVfbW9kdWxlcy9mb3JtaWRhYmxlL2xpYi9maWxlLmpzIiwibm9kZV9tb2R1bGVzL2Zvcm1pZGFibGUvbGliL2luY29taW5nX2Zvcm0uanMiLCJub2RlX21vZHVsZXMvZm9ybWlkYWJsZS9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZm9ybWlkYWJsZS9saWIvanNvbl9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvZm9ybWlkYWJsZS9saWIvbXVsdGlwYXJ0X3BhcnNlci5qcyIsIm5vZGVfbW9kdWxlcy9mb3JtaWRhYmxlL2xpYi9vY3RldF9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvZm9ybWlkYWJsZS9saWIvcXVlcnlzdHJpbmdfcGFyc2VyLmpzIiwibm9kZV9tb2R1bGVzL2d1bi9ndW4uanMiLCJub2RlX21vZHVsZXMvZ3VuL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2d1bi9saWIvZmlsZS5qcyIsIm5vZGVfbW9kdWxlcy9ndW4vbGliL2h0dHAuanMiLCJub2RlX21vZHVsZXMvZ3VuL2xpYi9qc29ucC5qcyIsIm5vZGVfbW9kdWxlcy9ndW4vbGliL3NlcnZlci5qcyIsIm5vZGVfbW9kdWxlcy9ndW4vbGliL3dzLmpzIiwibm9kZV9tb2R1bGVzXFxndW5cXGxpYlxcamF2YXNjcmlwdFxcVm94ZWxhcml1bS5qc1xcbm9kZV9tb2R1bGVzXFxndW5cXGxpYlxcd3NwLmpzIiwibm9kZV9tb2R1bGVzL29wdGlvbnMvbGliL29wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvdWx0cm9uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3dzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9CdWZmZXJQb29sLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9CdWZmZXJVdGlsLmZhbGxiYWNrLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9CdWZmZXJVdGlsLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9FcnJvckNvZGVzLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9FeHRlbnNpb25zLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9QZXJNZXNzYWdlRGVmbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy93cy9saWIvUmVjZWl2ZXIuaGl4aWUuanMiLCJub2RlX21vZHVsZXMvd3MvbGliL1JlY2VpdmVyLmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9TZW5kZXIuaGl4aWUuanMiLCJub2RlX21vZHVsZXMvd3MvbGliL1NlbmRlci5qcyIsIm5vZGVfbW9kdWxlcy93cy9saWIvVmFsaWRhdGlvbi5mYWxsYmFjay5qcyIsIm5vZGVfbW9kdWxlcy93cy9saWIvVmFsaWRhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy93cy9saWIvV2ViU29ja2V0LmpzIiwibm9kZV9tb2R1bGVzL3dzL2xpYi9XZWJTb2NrZXRTZXJ2ZXIuanMiLCJvcmJpdF9jb250cm9scy5qcyIsInNyYy9iaXRzdHJlYW0uanMiLCJzcmMvY2x1c3Rlci5qcyIsInNyYy9jb25zdGFudHMuanMiLCJzcmMvZm9udHMvVEk5OS5qcyIsInNyYy9nZW9tZXRyeWJhc2ljYnVmZmVyLmpzIiwic3JjL2dlb21ldHJ5YnVmZmVyLmpzIiwic3JjL2dlb21ldHJ5YnVmZmVyLm1vbm8uanMiLCJzcmMvZ2VvbWV0cnltYXRlcmlhbC5qcyIsInNyYy9nZW9tZXRyeW1hdGVyaWFsLm1vbm8uanMiLCJzcmMvbWVzaGVyLmJhc2ljLmpzIiwic3JjL21vZHRyYWNrZXIuanMiLCJzcmMvcGFja2VkYm9vbGFycmF5LmpzIiwic3JjL3JlYWN0b3IuanMiLCJzcmMvc2VjdG9yLmpzIiwic3JjL3NvcnRpbmcudHJlZS5qcyIsInNyYy90ZXh0dXJlQXRsYXMuY2FudmFzLmpzIiwic3JjL3RocmVlLmpzLmV4YW1wbGUvUHJvamVjdG9yLmpzIiwic3JjL3RocmVlLmpzLnBvc3QvQmxvb21QYXNzLmpzIiwic3JjL3RocmVlLmpzLnBvc3QvQ2xlYXJQYXNzLmpzIiwic3JjL3RocmVlLmpzLnBvc3QvRWZmZWN0Q29tcG9zZXIuanMiLCJzcmMvdGhyZWUuanMucG9zdC9NYXNrUGFzcy5qcyIsInNyYy90aHJlZS5qcy5wb3N0L1JlbmRlclBhc3MuanMiLCJzcmMvdGhyZWUuanMucG9zdC9TaGFkZXJQYXNzLmpzIiwic3JjL3RocmVlLmpzLnBvc3QvVGV4dHVyZVBhc3MuanMiLCJzcmMvdGhyZWUuanMucG9zdC9zaGFkZXJzL0NvcHlTaGFkZXIuanMiLCJzcmMvdGhyZWUuanMucG9zdC9zaGFkZXJzL0hvcml6b250YWxCbHVyU2hhZGVyLmpzIiwic3JjL3RocmVlLmpzLnBvc3Qvc2hhZGVycy9WZXJ0aWNhbEJsdXJTaGFkZXIuanMiLCJzcmMvdm94ZWwuZm9udHMuanMiLCJzcmMvdm94ZWxTZWxlY3Rvci5qcyIsInNyYy92b3hlbF9pbnZlbnRvcnkuanMiLCJzcmMvdm94ZWxhcml1bS5ndW4uZGIuanMiLCJzcmMvdm94ZWxzLmpzIiwic3JjL3dvcmxkLmpzIiwidGhyZWUuanMvanMvY29udHJvbHMvVlJDb250cm9scy5qcyIsInRocmVlLmpzL2pzL2VmZmVjdHMvVlJFZmZlY3QuanMiLCJ0aHJlZS5qcy9qcy9sb2FkZXJzL09CSkxvYWRlci5qcyIsInRocmVlLmpzL2pzL3N0YXRzLm1pbi5qcyIsInRocmVlLmpzL2pzL3ZyL1BhaW50Vml2ZUNvbnRyb2xsZXIuanMiLCJ0aHJlZS5qcy9qcy92ci9WaXZlQ29udHJvbGxlci5qcyIsInRocmVlLmpzL2pzL3ZyL1dlYlZSLmpzIiwidGhyZWUuanMvcGVyc29uYWxGaWxsLmpzIiwidm94ZWxhcml1bS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2huQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNpQkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4ekVBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3I4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDamdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2prQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbk5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN1FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcjBEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzV6RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqNkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdlNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9kQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdnVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDamZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXHJcbiAqIEBhdXRob3IgZDN4MHIgLyBodHRwczovL2dpdGh1Yi5jb20vZDN4MHJcclxuICovXHJcblxyXG5USFJFRS5OYXR1cmFsQ29udHJvbHMgPSBmdW5jdGlvbiAoIG9iamVjdCwgZG9tRWxlbWVudCApIHtcclxuXHJcbiAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuXHR0aGlzLmRvbUVsZW1lbnQgPSAoIGRvbUVsZW1lbnQgIT09IHVuZGVmaW5lZCApID8gZG9tRWxlbWVudCA6IGRvY3VtZW50O1xyXG5cclxuXHR0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHQvLyA2NSAvKkEqLywgODMgLypTKi8sIDY4IC8qRCovXHJcblx0dGhpcy5rZXlzID0geyBMRUZUOiAzNywgVVA6IDM4LCBSSUdIVDogMzksIEJPVFRPTTogNDBcclxuICAgICAgICAsIEE6NjUsIFM6ODMsIEQ6NjgsIFc6ODcsIFNQQUNFOjMyLCBDOjY3IH07XHJcblxyXG5cdC8vIGludGVybmFsc1xyXG5cclxuXHR2YXIgc2NvcGUgPSB0aGlzO1xyXG5cclxuXHR2YXIgcm90YXRlU3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG5cdHZhciByb3RhdGVFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG5cdHZhciByb3RhdGVEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcblxyXG5cdHZhciBwaGlEZWx0YSA9IDA7XHJcblx0dmFyIHRoZXRhRGVsdGEgPSAwO1xyXG5cdHZhciBzY2FsZSA9IDE7XHJcblxyXG5cdHZhciBsYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuXHJcblxyXG5cdHRoaXMucm90YXRlTGVmdCA9IGZ1bmN0aW9uICggYW5nbGUgKSB7XHJcblxyXG5cdFx0aWYgKCBhbmdsZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0YW5nbGUgPSBnZXRBdXRvUm90YXRpb25BbmdsZSgpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aGV0YURlbHRhIC09IGFuZ2xlO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24gKCBhbmdsZSApIHtcclxuXHJcblx0XHRpZiAoIGFuZ2xlID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRhbmdsZSA9IGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoZXRhRGVsdGEgKz0gYW5nbGU7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMucm90YXRlVXAgPSBmdW5jdGlvbiAoIGFuZ2xlICkge1xyXG5cclxuXHRcdGlmICggYW5nbGUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGFuZ2xlID0gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cGhpRGVsdGEgLT0gYW5nbGU7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMucm90YXRlRG93biA9IGZ1bmN0aW9uICggYW5nbGUgKSB7XHJcblxyXG5cdFx0aWYgKCBhbmdsZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0YW5nbGUgPSBnZXRBdXRvUm90YXRpb25BbmdsZSgpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRwaGlEZWx0YSArPSBhbmdsZTtcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoIHRpY2sgKSB7XHJcblxyXG4gICAgdG91Y2hVcGRhdGUoKTtcclxuXHJcbiAgICBpZiggcGhpRGVsdGEgKVxyXG4gICAgICAgIHZhciBhID0gMztcclxuICAgICAgICBzY29wZS5vYmplY3QubWF0cml4Lm1vdGlvbi5yb3RhdGlvbi54ID0gLXBoaURlbHRhO1xyXG4gICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnJvdGF0aW9uLnkgPSB0aGV0YURlbHRhOy8vLCAwICk7XHJcblxyXG4gICAgICAgIC8vc2NvcGUub2JqZWN0Lm1hdHJpeC5yb3RhdGVSZWxhdGl2ZSggLXBoaURlbHRhLCB0aGV0YURlbHRhLCAwICk7XHJcbiAgICAgICAgc2NvcGUub2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBzY29wZS5vYmplY3QubWF0cml4Lm1vdmUoIHRpY2sgKTtcclxuICAgICAgICBzY29wZS5vYmplY3QubWF0cml4LnJvdGF0ZVJlbGF0aXZlKCAwLCAwLCAtc2NvcGUub2JqZWN0Lm1hdHJpeC5yb2xsICk7XHJcblxyXG4gICAgICAgIHRoZXRhRGVsdGEgPSAwO1xyXG5cdFx0cGhpRGVsdGEgPSAwO1xyXG5cdH07XHJcblxyXG5cclxuXHJcblx0ZnVuY3Rpb24gb25Nb3VzZURvd24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdHJvdGF0ZVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9uTW91c2VNb3ZlKCBldmVudCApIHtcclxuXHJcblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgcm90YXRlRW5kLnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cdFx0cm90YXRlRGVsdGEuc3ViVmVjdG9ycyggcm90YXRlRW5kLCByb3RhdGVTdGFydCApO1xyXG5cclxuICAgICAgICByb3RhdGVEZWx0YS54ID0gMzIgKiAocm90YXRlRGVsdGEueCAvIHdpbmRvdy5pbm5lcldpZHRoKVxyXG4gICAgICAgIHJvdGF0ZURlbHRhLnkgPSAzMiAqIChyb3RhdGVEZWx0YS55IC8gd2luZG93LmlubmVySGVpZ2h0KVxyXG5cclxuXHRcdHNjb3BlLnJvdGF0ZUxlZnQoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueCAgKTtcclxuXHRcdHNjb3BlLnJvdGF0ZVVwKCAyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnkgKTtcclxuXHJcblx0XHRyb3RhdGVTdGFydC5jb3B5KCByb3RhdGVFbmQgKTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlVXAoIGV2ZW50ICkge1xyXG5cclxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblx0XHRpZiAoIHNjb3BlLnVzZXJSb3RhdGUgPT09IGZhbHNlICkgcmV0dXJuO1xyXG5cclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xyXG5cclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlV2hlZWwoIGV2ZW50ICkge1xyXG5cclxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblx0XHRpZiAoIHNjb3BlLnVzZXJab29tID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHR2YXIgZGVsdGEgPSAwO1xyXG5cclxuXHRcdGlmICggZXZlbnQud2hlZWxEZWx0YSApIHsgLy8gV2ViS2l0IC8gT3BlcmEgLyBFeHBsb3JlciA5XHJcblxyXG5cdFx0XHRkZWx0YSA9IGV2ZW50LndoZWVsRGVsdGE7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggZXZlbnQuZGV0YWlsICkgeyAvLyBGaXJlZm94XHJcblxyXG5cdFx0XHRkZWx0YSA9IC0gZXZlbnQuZGV0YWlsO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGRlbHRhID4gMCApIHtcclxuXHJcblx0XHRcdHNjb3BlLnpvb21PdXQoKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0c2NvcGUuem9vbUluKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9uS2V5RG93biggZXZlbnQgKSB7XHJcblxyXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHRcdGlmICggc2NvcGUudXNlclBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuICAgICAgICAgICAgY2FzZSBzY29wZS5rZXlzLlNQQUNFOlxyXG4gICAgICAgICAgICAgICAgc2NvcGUub2JqZWN0Lm1hdHJpeC5tb3Rpb24uc3BlZWQueSA9IDEwMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHNjb3BlLmtleXMuQzpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnkgPSAtMTAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugc2NvcGUua2V5cy5BOlxyXG4gICAgICAgICAgICAgICAgc2NvcGUub2JqZWN0Lm1hdHJpeC5tb3Rpb24uc3BlZWQueCA9IC0xMDA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5XOlxyXG4gICAgICAgICAgICAgICAgc2NvcGUub2JqZWN0Lm1hdHJpeC5tb3Rpb24uc3BlZWQueiA9IDEwMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlM6XHJcbiAgICAgICAgICAgICAgICBzY29wZS5vYmplY3QubWF0cml4Lm1vdGlvbi5zcGVlZC56ID0gLTEwMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLkQ6XHJcbiAgICAgICAgICAgICAgICBzY29wZS5vYmplY3QubWF0cml4Lm1vdGlvbi5zcGVlZC54ID0gMTAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9uS2V5VXAoIGV2ZW50ICkge1xyXG5cclxuICAgICAgICBzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG4gICAgICAgICAgICBjYXNlIHNjb3BlLmtleXMuU1BBQ0U6XHJcbiAgICAgICAgICAgICAgICBzY29wZS5vYmplY3QubWF0cml4Lm1vdGlvbi5zcGVlZC55ID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHNjb3BlLmtleXMuQzpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHNjb3BlLmtleXMuQTpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnggPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuVzpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnogPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuUzpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnogPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuRDpcclxuICAgICAgICAgICAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgubW90aW9uLnNwZWVkLnggPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHRcdC8vc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHJcblx0XHQvL1x0XHRicmVhaztcclxuXHRcdC8vfVxyXG5cclxuXHR9XHJcblxyXG52YXIgdG91Y2hlcyA9IFtdO1xyXG5cclxuVG91Y2hMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oYyl7IGZvciggdmFyIG4gPSAwOyBuIDwgdGhpcy5sZW5ndGg7IG4rKyApIGModGhpc1tuXSk7IH1cclxuXHJcbmZ1bmN0aW9uIHRvdWNoVXBkYXRlKCkge1xyXG4gIGlmKCB0b3VjaGVzLmxlbmd0aCA9PSAxICl7XHJcbiAgICB2YXIgdCA9IHRvdWNoZXNbMF07XHJcbiAgICBpZiggdC5uZXcgKVxyXG4gICAge1xyXG4gICAgICByb3RhdGVTdGFydC5zZXQoIHQueCwgdC55ICk7XHJcbiAgICAgIHQubmV3ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHJvdGF0ZUVuZC5zZXQoIHQueCwgdC55ICk7XHJcbiAgICAgIFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICk7XHJcblxyXG4gICAgICAgICAgICByb3RhdGVEZWx0YS54ID0gLTIgKiAocm90YXRlRGVsdGEueCAvIHdpbmRvdy5pbm5lcldpZHRoKVxyXG4gICAgICAgICAgICByb3RhdGVEZWx0YS55ID0gLSAyICogKHJvdGF0ZURlbHRhLnkgLyB3aW5kb3cuaW5uZXJIZWlnaHQpXHJcbiAgICAgIFx0XHRzY29wZS5yb3RhdGVMZWZ0KCBNYXRoLlBJLzIgKiByb3RhdGVEZWx0YS54ICAgKTtcclxuICAgICAgXHRcdHNjb3BlLnJvdGF0ZVVwKCBNYXRoLlBJLzIgKiByb3RhdGVEZWx0YS55ICk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCByb3RhdGVEZWx0YSApXHJcbiAgICAgIFx0XHRyb3RhdGVTdGFydC5jb3B5KCByb3RhdGVFbmQgKTtcclxuXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvdWNoU3RhcnQoIGUgKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGUuY2hhbmdlZFRvdWNoZXMuZm9yRWFjaCggKHRvdWNoKT0+e1xyXG4gICAgdG91Y2hlcy5wdXNoKCB7SUQ6dG91Y2guaWRlbnRpZmllcixcclxuICAgICAgeCA6IHRvdWNoLmNsaWVudFgsXHJcbiAgICAgIHkgOiB0b3VjaC5jbGllbnRZLFxyXG4gICAgICBuZXcgOiB0cnVlXHJcbiAgICB9KVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG91Y2hNb3ZlKCBlICkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBlLmNoYW5nZWRUb3VjaGVzLmZvckVhY2goICh0b3VjaENoYW5nZWQpPT57XHJcbiAgICB2YXIgdG91Y2ggPSB0b3VjaGVzLmZpbmQoICh0KT0+IHQuSUQgPT09IHRvdWNoQ2hhbmdlZC5pZGVudGlmaWVyICk7XHJcbiAgICBpZiggdG91Y2ggKSB7XHJcbiAgICAgIHRvdWNoLnggPSB0b3VjaENoYW5nZWQuY2xpZW50WDtcclxuICAgICAgdG91Y2gueSA9IHRvdWNoQ2hhbmdlZC5jbGllbnRZO1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG91Y2hFbmQoIGUgKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGUuY2hhbmdlZFRvdWNoZXMuZm9yRWFjaCggKHRvdWNoQ2hhbmdlZCk9PntcclxuICAgIHZhciB0b3VjaEluZGV4ID0gdG91Y2hlcy5maW5kSW5kZXgoICh0KT0+IHQuSUQgPT09IHRvdWNoQ2hhbmdlZC5pZGVudGlmaWVyICk7XHJcbiAgICBpZiggdG91Y2hJbmRleCA+PSAwIClcclxuICAgICAgIHRvdWNoZXMuc3BsaWNlKCB0b3VjaEluZGV4LCAxIClcclxuICB9KVxyXG59XHJcblxyXG4gICAgZnVuY3Rpb24gaWdub3JlKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdjb250ZXh0bWVudScsIGlnbm9yZSwgZmFsc2UgKTtcclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlICk7XHJcbiAgICBcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNld2hlZWwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7XHJcbiAgICBcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ0RPTU1vdXNlU2Nyb2xsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApOyAvLyBmaXJlZm94XHJcbiAgICBcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIG9uS2V5RG93biwgZmFsc2UgKTtcclxuICAgIFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIG9uS2V5VXAsIGZhbHNlICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lbmFibGUgPSBmdW5jdGlvbigpIHtcclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnY29udGV4dG1lbnUnLCBpZ25vcmUsIGZhbHNlICk7XHJcbiAgICBcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBmYWxzZSApO1xyXG4gICAgXHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZXdoZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xyXG4gICAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBmYWxzZSApO1xyXG4gICAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgZmFsc2UgKTtcclxuICAgICAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSApO1xyXG5cclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NTW91c2VTY3JvbGwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7IC8vIGZpcmVmb3hcclxuICAgIFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xyXG4gICAgXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgb25LZXlVcCwgZmFsc2UgKTtcclxuICAgIH1cclxuICAgIHRoaXMuZW5hYmxlKCk7XHJcblxyXG59O1xyXG5cclxuLy9USFJFRS5OYXR1cmFsQ2FtZXJhLlxyXG5cclxuVEhSRUUuTmF0dXJhbENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUgKTtcclxuIiwiXHJcblxyXG52YXIgY2FzdGluZyA9IHtcclxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgdGhpcy5jdWJlcyA9IDA7IH0sXHJcbiAgICBtYXRlcmlhbCA6IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6J2JsdWUnLGxpbmV3aWR0aDozfSksXHJcbiAgICBnZW9tZXRyeSA6IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxcclxuICAgIG1lc2ggOiBudWxsLFxyXG4gICAgYWRkUmVmIDogbnVsbCxcclxuICAgIGN1YmVzIDogMFxyXG59O1xyXG5jYXN0aW5nLmdlb21ldHJ5LmR5bmFtaWMgPSB0cnVlO1xyXG5jYXN0aW5nLm1lc2ggPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBjYXN0aW5nLmdlb21ldHJ5LCBjYXN0aW5nLm1hdGVyaWFsICk7XHJcbiBjYXN0aW5nLm1lc2guZnJ1c3R1bUN1bGxlZCA9IGZhbHNlO1xyXG4gdmFyIHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSggNTAwICogMyApOyAvLyAzIHZlcnRpY2VzIHBlciBwb2ludFxyXG5jYXN0aW5nLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggdmVydGljZXMsIDMgKSApXHJcblxyXG5jYXN0aW5nLmFkZFJlZiA9IGZ1bmN0aW9uIHVwZGF0ZUNhc3RNZXNoKCBjdXJyZW50UmVmKSB7XHJcbiAge1xyXG4gICAgdmFyIHVuaXQgPSBjdXJyZW50UmVmLmNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIHZhciB4ID0gY3VycmVudFJlZi53eCAqIHVuaXRcclxuICAgIHZhciB5ID0gY3VycmVudFJlZi53eSAqIHVuaXRcclxuICAgIHZhciB6ID0gY3VycmVudFJlZi53eiAqIHVuaXRcclxuICB9XHJcbiAgdmFyIFAgPSBbbmV3IFRIUkVFLlZlY3RvcjMoIHgsIHksIHogKVxyXG4gICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCArIHVuaXQsIHksIHogKVxyXG4gICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSArIHVuaXQsIHogKVxyXG4gICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCArIHVuaXQsIHkgKyB1bml0LCB6IClcclxuICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHgsIHksIHogKyB1bml0IClcclxuICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5LCB6ICsgdW5pdCApXHJcbiAgICAsIG5ldyBUSFJFRS5WZWN0b3IzKCB4LCB5ICsgdW5pdCwgeiArIHVuaXQgKVxyXG4gICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCArIHVuaXQsIHkgKyB1bml0LCB6ICsgdW5pdCApXHJcbiAgICBdXHJcbiAgICB2YXIgZ2VvbWV0cnkgPSBjYXN0aW5nLmdlb21ldHJ5O1xyXG4gICAgLy8gICAgY29uc29sZS5sb2coIFwiYWRkXCIsIHgsIHksIHogKVxyXG4gICAgdmFyIHYgPSBjYXN0aW5nLmN1YmVzICogMjQqMztcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzBdLng7IHZlcnRpY2VzW3YrK10gPSBQWzBdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzBdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFsxXS54OyB2ZXJ0aWNlc1t2KytdID0gUFsxXS55OyB2ZXJ0aWNlc1t2KytdID0gUFsxXS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbMV0ueDsgdmVydGljZXNbdisrXSA9IFBbMV0ueTsgdmVydGljZXNbdisrXSA9IFBbMV0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzNdLng7IHZlcnRpY2VzW3YrK10gPSBQWzNdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzNdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFszXS54OyB2ZXJ0aWNlc1t2KytdID0gUFszXS55OyB2ZXJ0aWNlc1t2KytdID0gUFszXS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbMl0ueDsgdmVydGljZXNbdisrXSA9IFBbMl0ueTsgdmVydGljZXNbdisrXSA9IFBbMl0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzJdLng7IHZlcnRpY2VzW3YrK10gPSBQWzJdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzJdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFswXS54OyB2ZXJ0aWNlc1t2KytdID0gUFswXS55OyB2ZXJ0aWNlc1t2KytdID0gUFswXS56O1xyXG5cclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzRdLng7IHZlcnRpY2VzW3YrK10gPSBQWzRdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzRdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFs1XS54OyB2ZXJ0aWNlc1t2KytdID0gUFs1XS55OyB2ZXJ0aWNlc1t2KytdID0gUFs1XS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbNV0ueDsgdmVydGljZXNbdisrXSA9IFBbNV0ueTsgdmVydGljZXNbdisrXSA9IFBbNV0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzddLng7IHZlcnRpY2VzW3YrK10gPSBQWzddLnk7IHZlcnRpY2VzW3YrK10gPSBQWzddLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFs3XS54OyB2ZXJ0aWNlc1t2KytdID0gUFs3XS55OyB2ZXJ0aWNlc1t2KytdID0gUFs3XS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbNl0ueDsgdmVydGljZXNbdisrXSA9IFBbNl0ueTsgdmVydGljZXNbdisrXSA9IFBbNl0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzZdLng7IHZlcnRpY2VzW3YrK10gPSBQWzZdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzZdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFs0XS54OyB2ZXJ0aWNlc1t2KytdID0gUFs0XS55OyB2ZXJ0aWNlc1t2KytdID0gUFs0XS56O1xyXG5cclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzBdLng7IHZlcnRpY2VzW3YrK10gPSBQWzBdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzBdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFs0XS54OyB2ZXJ0aWNlc1t2KytdID0gUFs0XS55OyB2ZXJ0aWNlc1t2KytdID0gUFs0XS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbMV0ueDsgdmVydGljZXNbdisrXSA9IFBbMV0ueTsgdmVydGljZXNbdisrXSA9IFBbMV0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzVdLng7IHZlcnRpY2VzW3YrK10gPSBQWzVdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzVdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFsyXS54OyB2ZXJ0aWNlc1t2KytdID0gUFsyXS55OyB2ZXJ0aWNlc1t2KytdID0gUFsyXS56O1xyXG4gICAgdmVydGljZXNbdisrXSA9IFBbNl0ueDsgdmVydGljZXNbdisrXSA9IFBbNl0ueTsgdmVydGljZXNbdisrXSA9IFBbNl0uejtcclxuICAgIHZlcnRpY2VzW3YrK10gPSBQWzNdLng7IHZlcnRpY2VzW3YrK10gPSBQWzNdLnk7IHZlcnRpY2VzW3YrK10gPSBQWzNdLno7XHJcbiAgICB2ZXJ0aWNlc1t2KytdID0gUFs3XS54OyB2ZXJ0aWNlc1t2KytdID0gUFs3XS55OyB2ZXJ0aWNlc1t2KytdID0gUFs3XS56O1xyXG4gICAgdGhpcy5jdWJlcysrO1xyXG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWVcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZSA9IHRydWU7XHJcbn1cclxuXHJcblxyXG5cclxuVEhSRUUuR2FtZU1vdXNlID0gZnVuY3Rpb24gKCBvYmplY3QsIGRvbUVsZW1lbnQgKSB7XHJcbiAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuXHR0aGlzLmRvbUVsZW1lbnQgPSAoIGRvbUVsZW1lbnQgIT09IHVuZGVmaW5lZCApID8gZG9tRWxlbWVudCA6IGRvY3VtZW50O1xyXG4gICAgdGhpcy5jYXN0aW5nID0gY2FzdGluZztcclxuICB0aGlzLmNhbWVyYSA9IG51bGw7XHJcbiAgdmFyIHNjb3BlID0gdGhpcztcclxuICB0aGlzLm1vZGUgPSAwO1xyXG4gIHRoaXMudm94ZWxTZWxlY3RvciA9IG51bGw7XHJcbiAgdGhpcy5jbHVzdGVycyA9IG51bGw7XHJcbiAgdGhpcy5tb3VzZVJheSA9IHsgbiA6IFRIUkVFLlZlY3RvcjNaZXJvLmNsb25lKCksIG86IG5ldyBUSFJFRS5WZWN0b3IzKCkuZGVsZXRlKCkgfVxyXG4gIHRoaXMubW91c2VDbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpO1xyXG4gIHRoaXMubW91c2VFdmVudHMgPSBbXTtcclxuICB0aGlzLmN1cnJlbnRBZGRUeXBlID0gVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbMl07XHJcblxyXG4gIHZhciBtb3VzZUJ1dHRvbkNvdW50ID0gMDtcclxuICB2YXIgbW91c2VTY3JvbGxYID0gMDtcclxuICB2YXIgbW91c2VTY3JvbGxZID0gMDtcclxuICB2YXIgY3Vyc29yRGlzdGFuY2UgPSA2NTA7XHJcblxyXG4gIHRoaXMuc2V0Q3VycmVudFR5cGUgPSBmdW5jdGlvbiggdHlwZSApIHtcclxuICAgICAgdGhpcy5jdXJyZW50QWRkVHlwZSA9IHR5cGU7XHJcbiAgfVxyXG4gIHRoaXMuc2V0TW91c2VSYXkgPSBmdW5jdGlvbiggY2FtZXJhLCBlICkge1xyXG4gICAgICAvLyNkZWZpbmUgQkVHSU5fU0NBTEUgMVxyXG4gICAgICB2YXIgcmVjdCA9IHNjb3BlLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGNvbnN0IHcgPSByZWN0LnJpZ2h0LXJlY3QubGVmdDsvL3dpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBjb25zdCBoID0gcmVjdC5ib3R0b20tcmVjdC50b3A7Ly93aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgIHZhciB4ID0gKCgoZS5jbGllbnRYLXJlY3QubGVmdCktKHcvMi4wKSkvdykgKiAyO1xyXG4gICAgICB2YXIgeSA9ICgoKGUuY2xpZW50WS1yZWN0LnRvcCktKGgvMi4wKSkvaCkgKiAyO1xyXG4gICAgICAvL2NvbnNvbGUubG9nKCBgbW91c2UgYXQgJHt4fSwgJHt5fWAgKVxyXG5cclxuICAgICAgdmFyIG1vdXNlX3JheV9zbG9wZSA9IGNhbWVyYS5tYXRyaXgubGVmdC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKCB4KmNhbWVyYS5hc3BlY3QgKTtcclxuICAgICAgbW91c2VfcmF5X3Nsb3BlLmFkZFNjYWxlZFZlY3RvciggY2FtZXJhLm1hdHJpeC51cCwgLSh5KSApO1xyXG5cclxuICAgICAgLy8gMC40NyBpcyBzb21lIG1hZ2ljIG51bWJlciBmb3IgOTAgZGVncmVlIEZPVlxyXG4gICAgICAvL21vdXNlX3JheV9zbG9wZS5hZGRTY2FsZWRWZWN0b3IoIGNhbWVyYS5tYXRyaXguZm9yd2FyZCwgLTAuNDcgKTtcclxuICAgICAgLy8gNzUgZGVncmVlIHZpZXcgYW5kIGxpa2UgMy80IGFzcGVjdFxyXG4gICAgICAvL21vdXNlX3JheV9zbG9wZS5hZGRTY2FsZWRWZWN0b3IoIGNhbWVyYS5tYXRyaXguZm9yd2FyZCwgLTAuNjA1ICk7Ly8tTWF0aC5zcXJ0KDEgLSBtb3VzZV9yYXlfc2xvcGUubGVuZ3RoKCkpICk7XHJcbiAgICAgIG1vdXNlX3JheV9zbG9wZS5hZGRTY2FsZWRWZWN0b3IoIGNhbWVyYS5tYXRyaXguYmFja3dhcmQsIC0xLjMwNCk7Ly8wLjY1MiApOy8vLU1hdGguc3FydCgxIC0gbW91c2VfcmF5X3Nsb3BlLmxlbmd0aCgpKSApO1xyXG5cclxuICAgICAgLy9tb3VzZV9yYXlfc2xvcGUudW5wcm9qZWN0KCBjYW1lcmEgKTtcclxuXHJcbiAgICAgIC8vdmFyIG1vdXNlX3JheV90YXJnZXQgPSBUSFJFRS5WZWN0b3IzWmVyby5jbG9uZSgpLmFkZFNjYWxlZFZlY3RvciggVEhSRUUuVmVjdG9yM0ZvcndhcmQsIDEwMDAgKTtcclxuICAgICAgLy9tb3VzZV9yYXlfdGFyZ2V0LmFkZFNjYWxlZFZlY3RvciggVEhSRUUuVmVjdG9yM0xlZnQsICBjYW1lcmEuYXNwZWN0KjEwMDAqeCApO1xyXG4gICAgICAvL21vdXNlX3JheV90YXJnZXQuYWRkU2NhbGVkVmVjdG9yKCBUSFJFRS5WZWN0b3IzVXAsIC0oMTAwMCkqeSApO1xyXG5cclxuICAgICAgLy9tb3VzZV9yYXlfb3JpZ2luLmFwcGx5TWF0cml4NCggY2FtZXJhLm1hdHJpeCApO1xyXG4gICAgICAvL21vdXNlX3JheV90YXJnZXQuYXBwbHlNYXRyaXg0KCBjYW1lcmEubWF0cml4ICk7XHJcblxyXG4gICAgICAvL3ZhciBtb3VzZV9yYXlfc2xvcGUgPSBtb3VzZV9yYXlfdGFyZ2V0LmNsb25lKCkuc3ViKCBtb3VzZV9yYXlfb3JpZ2luICk7XHJcbiAgICAgIC8vbW91c2VfcmF5X3Nsb3BlLnN1YihjYW1lcmEubWF0cml4Lm9yaWdpbik7XHJcbiAgXHQgIG1vdXNlX3JheV9zbG9wZS5ub3JtYWxpemUoKTtcclxuICAgICAgLy9tb3VzZV9yYXlfb3JpZ2luLmRlbGV0ZSgpO1xyXG4gICAgICBzY29wZS5tb3VzZVJheS5uLmRlbGV0ZSgpO1xyXG5cclxuICAgICAgc2NvcGUubW91c2VSYXkubiA9IG1vdXNlX3JheV9zbG9wZTtcclxuICAgICAgc2NvcGUubW91c2VSYXkubyA9IGNhbWVyYS5tYXRyaXgub3JpZ2luO1xyXG4gIH1cclxuXHJcbiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKCAhc2NvcGUuY2x1c3RlcnMgKVxyXG4gICAgICByZXR1cm47XHJcbiAgICAgc3dpdGNoKCBzY29wZS5tb2RlIClcclxuICAgICB7XHJcbiAgICAgY2FzZSAwOlxyXG4gICAgICAgIHZhciBjbHVzdGVyID0gc2NvcGUuY2x1c3RlcnNbMF07XHJcbiAgICAgICAgaWYoIG1vdXNlU2Nyb2xsWSApIHtcclxuICAgICAgICAgICAgY3Vyc29yRGlzdGFuY2UgKz0gKCBtb3VzZVNjcm9sbFkgLyAxMjAgKSAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgICAgICAgICAgbW91c2VTY3JvbGxZID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIHNjb3BlLm1vdXNlUmF5ICkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHNjb3BlLm1vdXNlUmF5Lm87XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJheUNhc3QoIGNsdXN0ZXIsIHNjb3BlLm1vdXNlUmF5Lm8sIHNjb3BlLm1vdXNlUmF5Lm4gKVxyXG5cclxuICAgICAgICAgICAgaWYoIFZveGVsYXJpdW0uc2VsZWN0b3IuY3VycmVudFZveGVsIClcclxuICAgICAgICAgICAgICBWb3hlbGFyaXVtLnNlbGVjdG9yLmN1cnJlbnRWb3hlbC5kZWxldGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCByZXN1bHQgKSB7XHJcbiAgICAgICAgICAgICAgICBWb3hlbGFyaXVtLnNlbGVjdG9yLmN1cnJlbnRBZGRWb3hlbCA9IGNsdXN0ZXIuZ2V0Vm94ZWxSZWYoIGZhbHNlLCByZXN1bHQuUHJlZFBvaW50ZWRWb3hlbC54LCByZXN1bHQuUHJlZFBvaW50ZWRWb3hlbC55LCByZXN1bHQuUHJlZFBvaW50ZWRWb3hlbC56IClcclxuICAgICAgICAgICAgICBWb3hlbGFyaXVtLnNlbGVjdG9yLmN1cnJlbnRWb3hlbCA9IHJlc3VsdC5yZWY7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvKiB0aGlzIHdhcyBhbm90aGVyIHdheSBvZiBnZXR0aW5nIHZveGVscy4uLiByYXljYXN0IGlzIHRoZSByb3V0aW5lIGZvciB0aGlzIG5vdz9cclxuICAgICAgICAgICAgcmF5Q2FzdCBwcm9qZWN0cyBhIGxpbmUgdGhyb3VnaCBlYWNoIHBsYW5lIGdvaW5nIGdvaW5nIG91dCwgYW5kIGlzIG1vcmUgYWNjdXJhdGUgdGhhbiB0aGlzLlxyXG4gICAgICAgICAgICBQbHVzIHJheUNhc3QgY2FuIHJldHVybiB0aGUgc2lkZSBvZiBkZXRlY3Rpb24uICovXHJcbiAgICAgICAgICBpZiggZmFsc2UgKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdm94ID0gby5jbG9uZSgpLmFkZFNjYWxlZFZlY3Rvciggc2NvcGUubW91c2VSYXkubiwgY3Vyc29yRGlzdGFuY2UgKS5kZWxldGUoKVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2clRvID0gVm94ZWxhcml1bS5Wb3hlbFJlZiggY2x1c3RlciwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICwgTWF0aC5mbG9vcih2b3gueC9jbHVzdGVyLnZveGVsVW5pdFNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgLCBNYXRoLmZsb29yKHZveC55L2NsdXN0ZXIudm94ZWxVbml0U2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICAsIE1hdGguZmxvb3Iodm94LnovY2x1c3Rlci52b3hlbFVuaXRTaXplKSApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZyRnJvbSA9IFZveGVsYXJpdW0uVm94ZWxSZWYoIGNsdXN0ZXIsIG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLCBNYXRoLmZsb29yKG8ueC9jbHVzdGVyLnZveGVsVW5pdFNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICwgTWF0aC5mbG9vcihvLnkvY2x1c3Rlci52b3hlbFVuaXRTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAsIE1hdGguZmxvb3Ioby56L2NsdXN0ZXIudm94ZWxVbml0U2l6ZSkgKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIFwidGhpbmdzIGFyZSBcIiwgdnJUbywgdnJGcm9tIClcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5jYXN0aW5nLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCBcIi0tLS0tLS0tLS0gbmV3IHNldCAtLS0tLS0tLS0tLSBcIilcclxuICAgICAgICAgICAgICAgIHZhciByZWYgPSB2ckZyb20uZm9yRWFjaCggdnJUbywgZmFsc2UsIChyZWYpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmNhc3RpbmcuYWRkUmVmKCByZWYgKTtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggYGNoZWNrIGF0IGAsIHJlZi53eCwgcmVmLnd5LCByZWYud3ogKVxyXG4gICAgICAgICAgICAgICAgICBpZiggcmVmLnZveGVsVHlwZSAmJiAhcmVmLnZveGVsVHlwZS5wcm9wZXJ0aWVzLklzX1BsYXllckNhblBhc3NUaHJvdWdoIClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVmO1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvL2lmKCByZWYgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB0aGlzLmNhc3RpbmcuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB0aGlzLmNhc3RpbmcuZ2VvbWV0cnkuc2V0RHJhd1JhbmdlKCAwLCAodGhpcy5jYXN0aW5nLmN1YmVzLTEpKjI0ICk7XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgIGlmKCByZWYgKSB7XHJcbiAgICAgICAgICAgICAgICAgIFZveGVsYXJpdW0uc2VsZWN0b3IuY3VycmVudFZveGVsID0gcmVmO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgVm94ZWxhcml1bS5zZWxlY3Rvci5jdXJyZW50Vm94ZWwgPSBjbHVzdGVyLmdldFZveGVsUmVmKCB0cnVlLCB2b3gueCwgdm94LnksIHZveC56ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2clRvLmRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdnJGcm9tLmRlbGV0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiggc2NvcGUubW91c2VFdmVudHMgKSB7XHJcbiAgICAgICAgICAgIHZhciBtRXZlbnQgPSBzY29wZS5tb3VzZUV2ZW50cy5zaGlmdCgpO1xyXG4gICAgICAgICAgICBpZiggbUV2ZW50ICkge1xyXG4gICAgICAgICAgICAgICAgaWYoIG1FdmVudC5kb3duICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBtRXZlbnQuYnV0dG9uID09PSAwICkgeyAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWYgPSBWb3hlbGFyaXVtLnNlbGVjdG9yLmN1cnJlbnRBZGRWb3hlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHJlZiAmJiByZWYuc2VjdG9yICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYuc2VjdG9yLnNldEN1YmUoIHJlZi54LCByZWYueSwgcmVmLnosIHNjb3BlLmN1cnJlbnRBZGRUeXBlIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbHVzdGVyLm1lc2hlci5TZWN0b3JVcGRhdGVGYWNlQ3VsbGluZyggcmVmLnNlY3RvciwgdHJ1ZSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Jhc2ljTWVzaGVyLlNlY3RvclVwZGF0ZUZhY2VDdWxsaW5nX1BhcnRpYWwoIGNsdXN0ZXIsIHNlY3RvciwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCwgdHJ1ZSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYuY2x1c3Rlci5tZXNoZXIuTWFrZVNlY3RvclJlbmRlcmluZ0RhdGEoIHJlZi5zZWN0b3IgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZveGVsYXJpdW0uZGIud29ybGQuc3RvcmVTZWN0b3IoIHJlZi5zZWN0b3IgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIG1FdmVudC5idXR0b24gPT09IDIgKSB7IC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWYgPSBWb3hlbGFyaXVtLnNlbGVjdG9yLmN1cnJlbnRWb3hlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHJlZiAmJiByZWYuc2VjdG9yICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYuc2VjdG9yLnNldEN1YmUoIHJlZi54LCByZWYueSwgcmVmLnosIFZveGVsYXJpdW0uVm94ZWxzLlZvaWQgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLmNsdXN0ZXIubWVzaGVyLlNlY3RvclVwZGF0ZUZhY2VDdWxsaW5nKCByZWYuc2VjdG9yLCB0cnVlIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzaWNNZXNoZXIuU2VjdG9yVXBkYXRlRmFjZUN1bGxpbmdfUGFydGlhbCggY2x1c3Rlciwgc2VjdG9yLCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMLCB0cnVlIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbHVzdGVyLm1lc2hlci5NYWtlU2VjdG9yUmVuZGVyaW5nRGF0YSggcmVmLnNlY3RvciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVm94ZWxhcml1bS5kYi53b3JsZC5zdG9yZVNlY3RvciggcmVmLnNlY3RvciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICB9XHJcbiAgICAgIC8qXHJcbiAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXgucm90YXRlUmVsYXRpdmUoIC1waGlEZWx0YSwgdGhldGFEZWx0YSwgMCApO1xyXG4gICAgICBzY29wZS5vYmplY3QubWF0cml4LnJvdGF0ZVJlbGF0aXZlKCAwLCAwLCAtc2NvcGUub2JqZWN0Lm1hdHJpeC5yb2xsICk7XHJcbiAgICAgIHNjb3BlLm9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgKi9cclxuICB9XHJcblxyXG5mdW5jdGlvbiBtb3VzZUV2ZW50KCB4LCB5LCBiLCBkb3duICkge1xyXG4gICAgdmFyIGV2ID0geyB4IDogeCxcclxuICAgICAgICB5IDogeSxcclxuICAgICAgICBidXR0b24gOiBiLFxyXG4gICAgICAgIGRlbHRhIDogc2NvcGUubW91c2VDbG9jay5nZXREZWx0YSgpLFxyXG4gICAgICAgIGRvd24gOiBkb3duXHJcbiAgICB9XHJcblxyXG4gICAgc2NvcGUubW91c2VFdmVudHMucHVzaCggZXYgKTtcclxufVxyXG5cclxudmFyIG9uZ29pbmdUb3VjaGVzID0gW107XHJcblxyXG5mdW5jdGlvbiBjb3B5VG91Y2godG91Y2gpIHtcclxuICByZXR1cm4geyBpZGVudGlmaWVyOiB0b3VjaC5pZGVudGlmaWVyLCBwYWdlWDogdG91Y2gucGFnZVgsIHBhZ2VZOiB0b3VjaC5wYWdlWSB9O1xyXG59XHJcbmZ1bmN0aW9uIG9uZ29pbmdUb3VjaEluZGV4QnlJZChpZFRvRmluZCkge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb25nb2luZ1RvdWNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBpZCA9IG9uZ29pbmdUb3VjaGVzW2ldLmlkZW50aWZpZXI7XHJcblxyXG4gICAgaWYgKGlkID09IGlkVG9GaW5kKSB7XHJcbiAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gLTE7ICAgIC8vIG5vdCBmb3VuZFxyXG59XHJcbmZ1bmN0aW9uIG9uVG91Y2hEb3duKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB2YXIgdG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xyXG4gIGZvciggdmFyIGkgPSAwOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKyApIHtcclxuICAgIGNvbnNvbGUubG9nKCBgdG91Y2ggJHtpfT0ke3RvdWNoZXNbaV19YCk7XHJcbiAgICBvbmdvaW5nVG91Y2hlcy5wdXNoKCBjb3B5VG91Y2goIHRvdWNoZXNbaV0gKSApO1xyXG5cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG91Y2hVcChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB2YXIgdG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xyXG4gIGZvciggdmFyIGkgPSAwOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKyApIHtcclxuICAgIHZhciBpZHggPSBvbmdvaW5nVG91Y2hJbmRleEJ5SWQodG91Y2hlc1tpXS5pZGVudGlmaWVyKTtcclxuICAgIGlmKCBpZHggPj0gMCApIHtcclxuICAgICAgb25nb2luZ1RvdWNoZXMuc3BsaWNlKCBpZHgsIDEsIGNvcHlUb3VjaCggdG91Y2hlc1tpXSApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvdWNoQ2FuY2VsKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxufVxyXG5cclxuXHJcblxyXG4gIGZ1bmN0aW9uIG9uTW91c2VEb3duKGV2ZW50KSB7XHJcbiAgICAgIGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIG1vdXNlRXZlbnQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFksIGV2ZW50LmJ1dHRvbiwgdHJ1ZSApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25Nb3VzZVVwKGV2ZW50KSB7XHJcbiAgICAgIGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIG1vdXNlRXZlbnQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFksIGV2ZW50LmJ1dHRvbiwgZmFsc2UgKTtcclxuICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoIGV2ZW50ICkge1xyXG5cclxuICAgIFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcbiAgICBcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHNjb3BlLnNldE1vdXNlUmF5KCBjYW1lcmEsIGV2ZW50ICk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uTW91c2VXaGVlbCggZXZlbnQgKSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBtb3VzZVNjcm9sbFggKz0gZXZlbnQud2hlZWxEZWx0YVg7XHJcbiAgICAgICAgbW91c2VTY3JvbGxZICs9IGV2ZW50LndoZWVsRGVsdGFZO1xyXG4gICAgfVxyXG5cclxuICBmdW5jdGlvbiBpZ25vcmUoZXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIHRoaXMuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY29udGV4dG1lbnUnLCBpZ25vcmUsIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0Jywgb25Ub3VjaERvd24sIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd0b3VjaGVuZCcsIG9uVG91Y2hVcCwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNoY2FuY2VsJywgb25Ub3VjaENhbmNlbCwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSApO1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXdoZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnRE9NTW91c2VTY3JvbGwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7IC8vIGZpcmVmb3hcclxuICAgIC8vd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xyXG4gICAgLy93aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgb25LZXlVcCwgZmFsc2UgKTtcclxuICB9XHJcblxyXG4gIHRoaXMuZW5hYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdjb250ZXh0bWVudScsIGlnbm9yZSwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCBvblRvdWNoRG93biwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoZW5kJywgb25Ub3VjaFVwLCBmYWxzZSApO1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hjYW5jZWwnLCBvblRvdWNoQ2FuY2VsLCBmYWxzZSApO1xyXG4gICAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlICk7XHJcbiAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNld2hlZWwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7IC8vIGZpcmVmb3hcclxuICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTU1vdXNlU2Nyb2xsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApOyAvLyBmaXJlZm94XHJcbiAgICAvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIG9uS2V5RG93biwgZmFsc2UgKTtcclxuICAgIC8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIG9uS2V5VXAsIGZhbHNlICk7XHJcbiAgfVxyXG4gIHRoaXMuZW5hYmxlKCk7XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uICByYXlDYXN0KGNsdXN0ZXIsIG8sIGZvcndhcmQgKVxyXG57XHJcbiAgICB2YXIgT3V0ID0gbnVsbDtcclxuICB2YXIgRGVsdGFfaCA9IG5ldyBUSFJFRS5WZWN0b3I0UG9vbC5uZXcoKSxEZWx0YV92ID0gbmV3IFRIUkVFLlZlY3RvcjRQb29sLm5ldygpLERlbHRhX3MgPSBuZXcgVEhSRUUuVmVjdG9yNFBvb2wubmV3KCk7XHJcbiAgdmFyIE9mZnNldF9oID0gbmV3IFRIUkVFLlZlY3RvcjRQb29sLm5ldygpLCBPZmZzZXRfdiA9IG5ldyBUSFJFRS5WZWN0b3I0UG9vbC5uZXcoKSwgT2Zmc2V0X3MgPSBuZXcgVEhSRUUuVmVjdG9yNFBvb2wubmV3KCk7XHJcbiAgdmFyIE5vcm1faCA9IG5ldyBUSFJFRS5WZWN0b3IzUG9vbC5uZXcoKSwgTm9ybV92ID0gbmV3IFRIUkVFLlZlY3RvcjNQb29sLm5ldygpLCBOb3JtX3MgPSBuZXcgVEhSRUUuVmVjdG9yM1Bvb2wubmV3KCk7XHJcbiAgdmFyIENvbGxpc2lvbl9oID0gbmV3IFRIUkVFLlZlY3RvcjRQb29sLm5ldygpLCBDb2xsaXNpb25fdiA9IG5ldyBUSFJFRS5WZWN0b3I0UG9vbC5uZXcoKSwgQ29sbGlzaW9uX3MgPSBuZXcgVEhSRUUuVmVjdG9yNFBvb2wubmV3KCk7XHJcblxyXG4gIHZhciBBY3R1YWxDdWJlX3gsQWN0dWFsQ3ViZV95LEFjdHVhbEN1YmVfejtcclxuICB2YXIgTmV3Q3ViZV94LE5ld0N1YmVfeSxOZXdDdWJlX3o7XHJcbiAgdmFyIENvbGxpZGVfWCwgQ29sbGlkZV9ZLCBDb2xsaWRlX1o7XHJcbiAgdmFyIGk7XHJcblxyXG4gIHZhciBOb3JtID0gZm9yd2FyZDtcclxuXHJcbiAgQ29sbGlkZV9YID0gQ29sbGlkZV9ZID0gQ29sbGlkZV9aID0gZmFsc2U7XHJcblxyXG4gIGlmIChOb3JtLnggPj0gMC4wMSApXHJcbiAge1xyXG4gICAgQ29sbGlkZV9YID0gdHJ1ZTtcclxuICAgIERlbHRhX2gueCA9IDEuMDtcclxuICAgIERlbHRhX2gueSA9IE5vcm0ueSAvIE5vcm0ueDtcclxuICAgIERlbHRhX2gueiA9IE5vcm0ueiAvIE5vcm0ueDtcclxuICAgIERlbHRhX2gudyA9IDA7XHJcbiAgICBEZWx0YV9oLncgPSBEZWx0YV9oLmxlbmd0aCgpO1xyXG5cclxuICAgIENvbGxpc2lvbl9oLnggPSAoTWF0aC5mbG9vcihvLnggLyBjbHVzdGVyLnZveGVsVW5pdFNpemUpICsgMS4wKSpjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBDb2xsaXNpb25faC55ID0gKENvbGxpc2lvbl9oLnggLSBvLngpICogRGVsdGFfaC55ICsgby55O1xyXG4gICAgQ29sbGlzaW9uX2gueiA9IChDb2xsaXNpb25faC54IC0gby54KSAqIERlbHRhX2gueiArIG8uejtcclxuICAgIENvbGxpc2lvbl9oLncgPSAoQ29sbGlzaW9uX2gueCAtIG8ueCkgKiBEZWx0YV9oLnc7XHJcblxyXG4gICAgT2Zmc2V0X2gueCA9IGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF9oLnkgPSBEZWx0YV9oLnkgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfaC56ID0gRGVsdGFfaC56ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgT2Zmc2V0X2gudyA9IERlbHRhX2gudyAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE5vcm1faC54ID0gT2Zmc2V0X2gueC8yOy8vIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICAgIE5vcm1faC55ID0gMCAvIChjbHVzdGVyLnZveGVsVW5pdFNpemUvMik7XHJcbiAgICBOb3JtX2gueiA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gIH1cclxuICBlbHNlIGlmIChOb3JtLnggPD0gLTAuMDEpXHJcbiAge1xyXG4gICAgQ29sbGlkZV9YID0gdHJ1ZTtcclxuXHJcbiAgICBEZWx0YV9oLnggPSAxLjA7XHJcbiAgICBEZWx0YV9oLnkgPSBOb3JtLnkgLyAtTm9ybS54O1xyXG4gICAgRGVsdGFfaC56ID0gTm9ybS56IC8gLU5vcm0ueDtcclxuICAgIERlbHRhX2gudyA9IDA7XHJcbiAgICBEZWx0YV9oLncgPSBEZWx0YV9oLmxlbmd0aCgpO1xyXG5cclxuICAgIENvbGxpc2lvbl9oLnggPSAoTWF0aC5mbG9vcihvLnggLyBjbHVzdGVyLnZveGVsVW5pdFNpemUpKSpjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBDb2xsaXNpb25faC55ID0gKG8ueCAtIENvbGxpc2lvbl9oLngpICogRGVsdGFfaC55ICsgby55O1xyXG4gICAgQ29sbGlzaW9uX2gueiA9IChvLnggLSBDb2xsaXNpb25faC54KSAqIERlbHRhX2gueiArIG8uejtcclxuICAgIENvbGxpc2lvbl9oLncgPSAoby54IC0gQ29sbGlzaW9uX2gueCkgKiBEZWx0YV9oLnc7XHJcbiAgICBPZmZzZXRfaC54ID0gLWNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF9oLnkgPSBEZWx0YV9oLnkgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfaC56ID0gRGVsdGFfaC56ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgT2Zmc2V0X2gudyA9IERlbHRhX2gudyAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE5vcm1faC54ID0gT2Zmc2V0X2gueC8yOy8vIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICAgIE5vcm1faC55ID0gMCAvIChjbHVzdGVyLnZveGVsVW5pdFNpemUvMik7XHJcbiAgICBOb3JtX2gueiA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gIH1cclxuXHJcbiAgaWYgKE5vcm0ueSA+PSAwLjAxIClcclxuICB7XHJcbiAgICBDb2xsaWRlX1kgPSB0cnVlO1xyXG4gICAgRGVsdGFfdi54ID0gTm9ybS54IC8gTm9ybS55O1xyXG4gICAgRGVsdGFfdi55ID0gMS4wO1xyXG4gICAgRGVsdGFfdi56ID0gTm9ybS56IC8gTm9ybS55O1xyXG4gICAgRGVsdGFfdi53ID0gMDtcclxuICAgIERlbHRhX3YudyA9IERlbHRhX3YubGVuZ3RoKCk7XHJcblxyXG4gICAgQ29sbGlzaW9uX3YueSA9IChNYXRoLmZsb29yKG8ueSAvIGNsdXN0ZXIudm94ZWxVbml0U2l6ZSkrMSkgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICB2YXIgZGVseSA9IChDb2xsaXNpb25fdi55IC0gby55KTtcclxuICAgIENvbGxpc2lvbl92LnggPSBkZWx5ICogRGVsdGFfdi54ICsgby54O1xyXG4gICAgQ29sbGlzaW9uX3YueiA9IGRlbHkgKiBEZWx0YV92LnogKyBvLno7XHJcbiAgICBDb2xsaXNpb25fdi53ID0gZGVseSAqIERlbHRhX3YudztcclxuICAgIE9mZnNldF92LnkgPSBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfdi54ID0gRGVsdGFfdi54ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgT2Zmc2V0X3YueiA9IERlbHRhX3YueiAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF92LncgPSBEZWx0YV92LncgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBOb3JtX3YueCA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV92LnkgPSBPZmZzZXRfdi55LzI7Ly8gLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV92LnogPSAwIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoTm9ybS55IDw9IC0wLjAxKVxyXG4gIHtcclxuICAgIENvbGxpZGVfWSA9IHRydWU7XHJcbiAgICBEZWx0YV92LnggPSBOb3JtLnggLyAtTm9ybS55O1xyXG4gICAgRGVsdGFfdi55ID0gMS4wO1xyXG4gICAgRGVsdGFfdi56ID0gTm9ybS56IC8gLU5vcm0ueTtcclxuICAgIERlbHRhX3YudyA9IDA7XHJcbiAgICBEZWx0YV92LncgPSBEZWx0YV92Lmxlbmd0aCgpO1xyXG5cclxuICAgIENvbGxpc2lvbl92LnkgPSAoTWF0aC5mbG9vcihvLnkgLyBjbHVzdGVyLnZveGVsVW5pdFNpemUpKSAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIHZhciBkZWx5ID0gKG8ueS1Db2xsaXNpb25fdi55ICk7XHJcbiAgICBDb2xsaXNpb25fdi54ID0gKGRlbHkpICogRGVsdGFfdi54ICsgby54O1xyXG4gICAgQ29sbGlzaW9uX3YueiA9IChkZWx5KSAqIERlbHRhX3YueiArIG8uejtcclxuICAgIENvbGxpc2lvbl92LncgPSAoZGVseSkgKiBEZWx0YV92Lnc7XHJcblxyXG4gICAgT2Zmc2V0X3YueSA9IC1jbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfdi54ID0gRGVsdGFfdi54ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgT2Zmc2V0X3YueiA9IERlbHRhX3YueiAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF92LncgPSBEZWx0YV92LncgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBOb3JtX3YueCA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV92LnkgPSBPZmZzZXRfdi55LzI7Ly8gLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV92LnogPSAwIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICB9XHJcblxyXG4gIGlmIChOb3JtLnogPj0gMC4wMSlcclxuICB7XHJcbiAgICBDb2xsaWRlX1ogPSB0cnVlO1xyXG4gICAgRGVsdGFfcy54ID0gTm9ybS54IC8gTm9ybS56O1xyXG4gICAgRGVsdGFfcy55ID0gTm9ybS55IC8gTm9ybS56O1xyXG4gICAgRGVsdGFfcy56ID0gMS4wO1xyXG4gICAgRGVsdGFfcy53ID0gMDtcclxuICAgIERlbHRhX3MudyA9IERlbHRhX3MubGVuZ3RoKCk7XHJcbiAgICBDb2xsaXNpb25fcy56ID0gKE1hdGguZmxvb3Ioby56IC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKSArIDEuMCkqY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgQ29sbGlzaW9uX3MueCA9IChDb2xsaXNpb25fcy56IC0gby56KSAqIERlbHRhX3MueCArIG8ueDtcclxuICAgIENvbGxpc2lvbl9zLnkgPSAoQ29sbGlzaW9uX3MueiAtIG8ueikgKiBEZWx0YV9zLnkgKyBvLnk7XHJcbiAgICBDb2xsaXNpb25fcy53ID0gKENvbGxpc2lvbl9zLnogLSBvLnopICogRGVsdGFfcy53O1xyXG5cclxuICAgIE9mZnNldF9zLnggPSBEZWx0YV9zLnggKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfcy55ID0gRGVsdGFfcy55ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgT2Zmc2V0X3MueiA9IGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF9zLncgPSBEZWx0YV9zLncgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBOb3JtX3MueCA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV9zLnkgPSAwIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICAgIE5vcm1fcy56ID0gT2Zmc2V0X3Muei8yOy8vIC8gKGNsdXN0ZXIudm94ZWxVbml0U2l6ZS8yKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoTm9ybS56IDw9IC0wLjAxKVxyXG4gIHtcclxuICAgIENvbGxpZGVfWiA9IHRydWU7XHJcbiAgICBEZWx0YV9zLnggPSBOb3JtLnggLyAtTm9ybS56O1xyXG4gICAgRGVsdGFfcy55ID0gTm9ybS55IC8gLU5vcm0uejtcclxuICAgIERlbHRhX3MueiA9IDEuMDtcclxuICAgIERlbHRhX3MudyA9IDA7XHJcbiAgICBEZWx0YV9zLncgPSBEZWx0YV9zLmxlbmd0aCgpO1xyXG4gICAgQ29sbGlzaW9uX3MueiA9IChNYXRoLmZsb29yKG8ueiAvIGNsdXN0ZXIudm94ZWxVbml0U2l6ZSkgKSpjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBDb2xsaXNpb25fcy54ID0gKG8ueiAtIENvbGxpc2lvbl9zLnopICogRGVsdGFfcy54ICsgby54O1xyXG4gICAgQ29sbGlzaW9uX3MueSA9IChvLnogLSBDb2xsaXNpb25fcy56KSAqIERlbHRhX3MueSArIG8ueTtcclxuICAgIENvbGxpc2lvbl9zLncgPSAoby56IC0gQ29sbGlzaW9uX3MueikgKiBEZWx0YV9zLnc7XHJcblxyXG4gICAgT2Zmc2V0X3MueCA9IERlbHRhX3MueCAqIGNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuICAgIE9mZnNldF9zLnkgPSBEZWx0YV9zLnkgKiBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfcy56ID0gLSBjbHVzdGVyLnZveGVsVW5pdFNpemU7XHJcbiAgICBPZmZzZXRfcy53ID0gRGVsdGFfcy53ICogY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG5cclxuICAgIE5vcm1fcy54ID0gMCAvIChjbHVzdGVyLnZveGVsVW5pdFNpemUvMik7XHJcbiAgICBOb3JtX3MueSA9IDAgLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gICAgTm9ybV9zLnogPSBPZmZzZXRfcy56LzI7Ly8gLyAoY2x1c3Rlci52b3hlbFVuaXRTaXplLzIpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuLy8gIHByaW50ZihcInlhdzogJTA0bGYgcGl0Y2g6ICVsZiBPZmZzZXRfeTolbGYgT2Zmc2V0X3o6JWxmIHh5ejolbGYgJWxmICVsZiBOWFlaOiVsZiAlbGYgJWxmIER4eXo6JWxmICVsZiAlbGZcIiwgeWF3LHBpdGNoLCBEZWx0YV9oLnksIERlbHRhX2gueix4LHkseiwgTm9ybV9oLngsIE5vcm1faC55LCBOb3JtX2gueiwgRGVsdGFfaC54LCBEZWx0YV9oLnksIERlbHRhX2gueik7XHJcbiAvL3ByaW50ZihcIkFuZ2xlICh5OiVsZiBwOiVsZikgWFlaOiglbGYgJWxmICVsZikgT2ZmKCVsZiAlbGYgJWxmICVsZikgQ29sbCglbGYgJWxmICVsZiAlbGYpIE5vcm0oJWxnICVsZyAlbGYpIDpcXG5cIiwgeWF3LHBpdGNoLHgseSx6LCBPZmZzZXRfcy54LCBPZmZzZXRfcy55LCBPZmZzZXRfcy56LCBPZmZzZXRfcy53LCBDb2xsaXNpb25fcy54LCBDb2xsaXNpb25fcy55LCBDb2xsaXNpb25fcy56LCBDb2xsaXNpb25fcy53LCBOb3JtX3MueCxOb3JtX3MueSwgTm9ybV9zLnopO1xyXG5cclxuICB2YXIgTWF0Y2hfaCA9IDA7XHJcbiAgdmFyIE1hdGNoX3MgPSAwO1xyXG4gIHZhciBNYXRjaF92ID0gMDtcclxuICB2YXIgQ3ljbGUgPSAxO1xyXG4gIHZhciBNaW5XID0gMTAwMDAwMC4wO1xyXG4gIHZhciByZWY7XHJcbiAgLy9jb25zb2xlLmxvZyggJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICBmb3IgKGk9MDtpPDE1MDtpKyspXHJcbiAge1xyXG5cclxuICAgIC8vIEhvcml6b250YWwgWCBheGlzLlxyXG4gICAgaWYgKENvbGxpZGVfWClcclxuICAgIHtcclxuICAgICAgaWYgKE1hdGNoX2g9PTAgJiYgQ29sbGlzaW9uX2gudyA8IE1pblcpXHJcbiAgICAgIHtcclxuICAgICAgICBBY3R1YWxDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC54IC0gTm9ybV9oLngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC55IC0gTm9ybV9oLnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC56IC0gTm9ybV9oLnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC54ICsgTm9ybV9oLngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC55ICsgTm9ybV9oLnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25faC56ICsgTm9ybV9oLnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBpZiggKCByZWYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgTmV3Q3ViZV94LCBOZXdDdWJlX3ksIE5ld0N1YmVfeikgKSAmJiByZWYuc2VjdG9yICYmICFyZWYudm94ZWxUeXBlLnByb3BlcnRpZXMuSXNfUGxheWVyQ2FuUGFzc1Rocm91Z2gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCBgeCBjaGVjayAke05ld0N1YmVfeH0gICR7TmV3Q3ViZV95fSAgJHtOZXdDdWJlX3p9ICAgICR7QWN0dWFsQ3ViZV94fSAke0FjdHVhbEN1YmVfeX0gJHtBY3R1YWxDdWJlX3p9ICAke01pbld9ICAke0NvbGxpc2lvbl9oLnd9YClcclxuICAgICAgICAgICAgT3V0ID0geyBQcmVkUG9pbnRlZFZveGVsIDogbmV3IFRIUkVFLlZlY3RvcjMoIEFjdHVhbEN1YmVfeCwgQWN0dWFsQ3ViZV95LCBBY3R1YWxDdWJlX3ogKSxcclxuICAgICAgICAgICAgICAgICAgICBQb2ludGVkVm94ZWwgOiBuZXcgVEhSRUUuVmVjdG9yMyggTmV3Q3ViZV94LCBOZXdDdWJlX3ksIE5ld0N1YmVfeiApLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZiA6IHJlZlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAvLyBwcmludGYoXCIgTUFUQ0hfSDogJWxmXFxuXCIsQ29sbGlzaW9uX2gudyk7XHJcbiAgICAgICAgICBNYXRjaF9oID0gQ3ljbGU7XHJcbiAgICAgICAgICBNaW5XID0gQ29sbGlzaW9uX2gudztcclxuICAgICAgICB9IGVsc2UgaWYoIHJlZiApIHJlZi5kZWxldGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhvcml6b250YWwgWiBheGlzLlxyXG5cclxuICAgIGlmIChDb2xsaWRlX1opXHJcbiAgICB7XHJcbiAgICAgIGlmIChNYXRjaF9zID09IDAgJiYgQ29sbGlzaW9uX3MudyA8IE1pblcpXHJcbiAgICAgIHtcclxuICAgICAgICBBY3R1YWxDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy54IC0gTm9ybV9zLngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy55IC0gTm9ybV9zLnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy56IC0gTm9ybV9zLnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy54ICsgTm9ybV9zLngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy55ICsgTm9ybV9zLnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25fcy56ICsgTm9ybV9zLnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCBgeiBjaGVjayAke05ld0N1YmVfeH0gICR7TmV3Q3ViZV95fSAgJHtOZXdDdWJlX3p9ICAke01pbld9ICAke0NvbGxpc2lvbl9zLnd9IGApXHJcbiAgICAgICAgaWYoICggcmVmID0gY2x1c3Rlci5nZXRWb3hlbFJlZiggZmFsc2UsIE5ld0N1YmVfeCwgTmV3Q3ViZV95LCBOZXdDdWJlX3opICkgJiYgcmVmLnNlY3RvciAmJiAhcmVmLnZveGVsVHlwZS5wcm9wZXJ0aWVzLklzX1BsYXllckNhblBhc3NUaHJvdWdoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggYHogY2hlY2sgJHtOZXdDdWJlX3h9ICAke05ld0N1YmVfeX0gICR7TmV3Q3ViZV96fSAgJHtNaW5XfSAgJHtDb2xsaXNpb25fcy53fSBgKVxyXG4gICAgICAgICAgT3V0ID0geyBQcmVkUG9pbnRlZFZveGVsIDogbmV3IFRIUkVFLlZlY3RvcjMoIEFjdHVhbEN1YmVfeCwgQWN0dWFsQ3ViZV95LCBBY3R1YWxDdWJlX3ogKSxcclxuICAgICAgICAgICAgICAgICAgUG9pbnRlZFZveGVsIDogbmV3IFRIUkVFLlZlY3RvcjMoIE5ld0N1YmVfeCwgTmV3Q3ViZV95LCBOZXdDdWJlX3ogKSxcclxuICAgICAgICAgICAgICAgICAgcmVmIDogcmVmXHJcbiAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgLy8gcHJpbnRmKFwiIE1BVENIX1M6ICVsZlxcblwiLENvbGxpc2lvbl9zLncpO1xyXG4gICAgICAgICAgTWF0Y2hfcyA9IEN5Y2xlO1xyXG4gICAgICAgICAgTWluVyA9IENvbGxpc2lvbl9zLnc7XHJcbiAgICAgICAgfSBlbHNlIGlmKCByZWYgKSByZWYuZGVsZXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJ0aWNhbCBZIGF4aXMuXHJcblxyXG4gICAgaWYgKENvbGxpZGVfWSlcclxuICAgIHtcclxuICAgICAgaWYgKE1hdGNoX3Y9PTAgJiYgQ29sbGlzaW9uX3YudyA8IE1pblcpXHJcbiAgICAgIHtcclxuICAgICAgICBBY3R1YWxDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi54IC0gTm9ybV92LngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi55IC0gTm9ybV92LnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBBY3R1YWxDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi56IC0gTm9ybV92LnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ggPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi54ICsgTm9ybV92LngpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3kgPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi55ICsgTm9ybV92LnkpIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBOZXdDdWJlX3ogPSBNYXRoLmZsb29yKChDb2xsaXNpb25fdi56ICsgTm9ybV92LnopIC8gY2x1c3Rlci52b3hlbFVuaXRTaXplKTtcclxuICAgICAgICBpZiggKCByZWYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgTmV3Q3ViZV94LCBOZXdDdWJlX3ksIE5ld0N1YmVfeikgKSAmJiByZWYuc2VjdG9yICYmICFyZWYudm94ZWxUeXBlLnByb3BlcnRpZXMuSXNfUGxheWVyQ2FuUGFzc1Rocm91Z2ggKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggYHkgY2hlY2sgJHtOZXdDdWJlX3h9ICAke05ld0N1YmVfeX0gICR7TmV3Q3ViZV96fSAgJHtNaW5XfSAgJHtDb2xsaXNpb25fdi53fSBgKVxyXG4gICAgICAgICAgT3V0ID0geyBQcmVkUG9pbnRlZFZveGVsIDogbmV3IFRIUkVFLlZlY3RvcjMoIEFjdHVhbEN1YmVfeCwgQWN0dWFsQ3ViZV95LCBBY3R1YWxDdWJlX3ogKSxcclxuICAgICAgICAgICAgICAgICAgUG9pbnRlZFZveGVsIDogbmV3IFRIUkVFLlZlY3RvcjMoIE5ld0N1YmVfeCwgTmV3Q3ViZV95LCBOZXdDdWJlX3ogKSxcclxuICAgICAgICAgICAgICAgICAgcmVmIDogcmVmXHJcbiAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgLy8gcHJpbnRmKFwiIE1BVENIX1Y6ICVsZlxcblwiLENvbGxpc2lvbl92LncpO1xyXG4gICAgICAgICAgTWF0Y2hfdiA9IEN5Y2xlO1xyXG4gICAgICAgICAgTWluVyA9IENvbGxpc2lvbl92Lnc7XHJcbiAgICAgICAgfSBlbHNlIGlmKCByZWYgKSByZWYuZGVsZXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgIC8vcHJpbnRmKFwiIE1hdGNoIChIOiVsZiBTOiVsZiBWOiVsZikgXFxuXCIsIENvbGxpc2lvbl9oLncsIENvbGxpc2lvbl9zLncsIENvbGxpc2lvbl92LncpO1xyXG4gICAgICBpZiAoTWF0Y2hfaD4wICYmIChNYXRjaF9oIC0gQ3ljbGUpPC0xMDApIHJldHVybiBPdXQ7XHJcbiAgICAgIGlmIChNYXRjaF9zPjAgJiYgKE1hdGNoX3MgLSBDeWNsZSk8LTEwMCkgcmV0dXJuIE91dDtcclxuICAgICAgaWYgKE1hdGNoX3Y+MCAmJiAoTWF0Y2hfdiAtIEN5Y2xlKTwtMTAwKSByZXR1cm4gT3V0O1xyXG5cclxuICAgIENvbGxpc2lvbl9oLnggKz0gT2Zmc2V0X2gueDsgQ29sbGlzaW9uX2gueSArPSBPZmZzZXRfaC55OyBDb2xsaXNpb25faC56ICs9IE9mZnNldF9oLno7IENvbGxpc2lvbl9oLncgKz0gT2Zmc2V0X2gudztcclxuICAgIENvbGxpc2lvbl92LnggKz0gT2Zmc2V0X3YueDsgQ29sbGlzaW9uX3YueSArPSBPZmZzZXRfdi55OyBDb2xsaXNpb25fdi56ICs9IE9mZnNldF92Lno7IENvbGxpc2lvbl92LncgKz0gT2Zmc2V0X3YudztcclxuICAgIENvbGxpc2lvbl9zLnggKz0gT2Zmc2V0X3MueDsgQ29sbGlzaW9uX3MueSArPSBPZmZzZXRfcy55OyBDb2xsaXNpb25fcy56ICs9IE9mZnNldF9zLno7IENvbGxpc2lvbl9zLncgKz0gT2Zmc2V0X3MudztcclxuICAgIEN5Y2xlICsrO1xyXG4gIH1cclxuICBEZWx0YV9oLmRlbGV0ZSgpO1xyXG4gIERlbHRhX3YuZGVsZXRlKCk7XHJcbiAgRGVsdGFfcy5kZWxldGUoKTtcclxuICBPZmZzZXRfaC5kZWxldGUoKTtcclxuICBPZmZzZXRfdi5kZWxldGUoKTtcclxuICBPZmZzZXRfcy5kZWxldGUoKTtcclxuICBOb3JtX2guZGVsZXRlKCk7XHJcbiAgTm9ybV92LmRlbGV0ZSgpO1xyXG4gIE5vcm1fcy5kZWxldGUoKTtcclxuICBDb2xsaXNpb25faC5kZWxldGUoKTtcclxuICBDb2xsaXNpb25fdi5kZWxldGUoKTtcclxuICBDb2xsaXNpb25fcy5kZWxldGUoKTtcclxuXHJcbiAgcmV0dXJuIE91dDtcclxufVxyXG4iLCJcclxuXHJcbmdsb3cgPSB7XG5cbiBnbG93Y29tcG9zZXIgOiBudWxsLFxyXG4gc2NlbmVjb21wb3NlciA6IG51bGwsXHJcbiBmaW5hbGNvbXBvc2VyIDogbnVsbCxcclxuXHJcbiByZW5kZXJUYXJnZXRHbG93IDogbnVsbCxcclxuXHRyZW5kZXJUYXJnZXQgOiBudWxsLFxyXG4gICAgICAgIHJlbmRlciA6IG51bGwsXG4gICAgfTtcblxuXG52YXIgZ2xvd2NvbXBvc2VyO1xyXG52YXIgc2NlbmVjb21wb3NlcjtcclxudmFyIGZpbmFsY29tcG9zZXI7XHJcblxyXG52YXIgcmVuZGVyVGFyZ2V0R2xvdztcclxudmFyXHRyZW5kZXJUYXJnZXQ7XHJcblxyXG52YXIgZmluYWxzaGFkZXIgPSB7XHJcbiAgICB1bmlmb3Jtczoge1xyXG4gICAgICAgIHREaWZmdXNlOiB7IHR5cGU6IFwidFwiLCB2YWx1ZTogMCwgdGV4dHVyZTogbnVsbCB9LCAvLyBUaGUgYmFzZSBzY2VuZSBidWZmZXJcclxuICAgICAgICB0R2xvdzogeyB0eXBlOiBcInRcIiwgdmFsdWU6IDEsIHRleHR1cmU6IG51bGwgfSwgLy8gVGhlIGdsb3cgc2NlbmUgYnVmZmVyXHJcblx0XHR0RGlmZnVzZURlcHRoOiB7IHR5cGU6IFwidFwiLCB2YWx1ZTogMCwgdGV4dHVyZTogbnVsbCB9LCAvLyBUaGUgYmFzZSBzY2VuZSBidWZmZXJcclxuICAgICAgICB0R2xvd0RlcHRoOiB7IHR5cGU6IFwidFwiLCB2YWx1ZTogMSwgdGV4dHVyZTogbnVsbCB9LCAvLyBUaGUgZ2xvdyBzY2VuZSBidWZmZXJcclxuXHRcdGNhbWVyYU5lYXI6IHsgdHlwZTogJ2YnLCB2YWx1ZTogMSB9LFxyXG5cdFx0Y2FtZXJhRmFyOiB7IHR5cGU6ICdmJywgdmFsdWU6IDEwMDAwIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIHZlcnRleFNoYWRlcjogW1xyXG4gICAgICAgIFwidmFyeWluZyB2ZWMyIHZVdjtcIixcclxuXHJcbiAgICAgICAgXCJ2b2lkIG1haW4oKSB7XCIsXHJcblxyXG4gICAgICAgICAgICBcInZVdiA9IHZlYzIoIHV2LngsIHV2LnkgKTtcIixcclxuICAgICAgICAgICAgXCJnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXHJcblxyXG4gICAgICAgIFwifVwiXHJcbiAgICBdLmpvaW4oXCJcIiksXHJcblxyXG4gICAgZnJhZ21lbnRTaGFkZXI6IFtcclxuICAgICAgICBcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFxyXG4gICAgICAgIFwidW5pZm9ybSBzYW1wbGVyMkQgdEdsb3c7XCIsXHJcblx0XHRcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlRGVwdGg7XCIsXHJcblx0XHRcInVuaWZvcm0gc2FtcGxlcjJEIHRHbG93RGVwdGg7XCIsXHJcblx0XHRcInVuaWZvcm0gZmxvYXQgY2FtZXJhTmVhcjtcIixcclxuIFx0XHRcInVuaWZvcm0gZmxvYXQgY2FtZXJhRmFyO1wiLFxyXG5cclxuICAgICAgICBcInZhcnlpbmcgdmVjMiB2VXY7XCIsXHJcblxyXG5cdFx0XCJmbG9hdCByZWFkRGVwdGggKHNhbXBsZXIyRCBkZXB0aFNhbXBsZXIsIHZlYzIgY29vcmQpIHtcIixcclxuICAgICAgICBcIiAgZmxvYXQgY2FtZXJhRmFyUGx1c05lYXIgPSBjYW1lcmFGYXIgKyBjYW1lcmFOZWFyO1wiLFxyXG4gICAgICAgIFwiICBmbG9hdCBjYW1lcmFGYXJNaW51c05lYXIgPSBjYW1lcmFGYXIgLSBjYW1lcmFOZWFyO1wiLFxyXG4gICAgICAgIFwiICBmbG9hdCBjYW1lcmFDb2VmID0gMi4wICogY2FtZXJhTmVhcjtcIixcclxuICAgICAgICBcIiAgcmV0dXJuIDEuMC0oY2FtZXJhQ29lZiAvIChjYW1lcmFGYXJQbHVzTmVhciAtIHRleHR1cmUyRChkZXB0aFNhbXBsZXIsIGNvb3JkKS54ICogY2FtZXJhRmFyTWludXNOZWFyKSk7XCIsXHJcbiAgICAgICAgXCJ9XCIsXHJcblxyXG4gICAgICAgIFwidm9pZCBtYWluKCkge1wiLFxyXG5cclxuICAgICAgICAgICAgXCJ2ZWM0IHRleGVsID0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdlV2ICk7XCIsXHJcbiAgICAgICAgICAgIFwidmVjNCBnbG93ID0gdGV4dHVyZTJEKCB0R2xvdywgdlV2ICk7XCIsXHJcblx0XHRcdFwiZmxvYXQgdGV4ZWxEZXB0aCA9IHJlYWREZXB0aCggdERpZmZ1c2VEZXB0aCwgdlV2ICk7XCIsXHJcblx0XHRcdFwiZmxvYXQgZ2xvd0RlcHRoID0gcmVhZERlcHRoKCB0R2xvd0RlcHRoLCB2VXYgKTtcIixcclxuXHRcdFx0Ly9cImZsb2F0IHRleGVsRGVwdGggPSB0ZXh0dXJlMkQodERpZmZ1c2VEZXB0aCwgdlV2KS54O1wiLFxyXG4gICAgICAgICAgICAvL1wiaWYoICh0ZXhlbC5yK3RleGVsLmcrdGV4ZWwuYik9PSAwLjAgKSBcIixcclxuXHRcdFx0XCIgICAgZ2xfRnJhZ0NvbG9yID0gKHRleGVsICsgdmVjNCgwLjUsIDAuNzUsIDEuMCwgMy4wKSAqIGdsb3cgKiAxLjApO1wiLCAvLyBCbGVuZCB0aGUgdHdvIGJ1ZmZlcnMgdG9nZXRoZXIgKEkgY29sb3JpemVkIGFuZCBpbnRlbnNpZmllZCB0aGUgZ2xvdyBhdCB0aGUgc2FtZSB0aW1lKVxyXG5cdFx0XHQvL1wiICAgIGdsX0ZyYWdDb2xvciArPSAgdmVjNCh0ZXhlbERlcHRoLCBnbG93RGVwdGgsIDAsIDEuMCk7XCIsIC8vIEJsZW5kIHRoZSB0d28gYnVmZmVycyB0b2dldGhlciAoSSBjb2xvcml6ZWQgYW5kIGludGVuc2lmaWVkIHRoZSBnbG93IGF0IHRoZSBzYW1lIHRpbWUpXHJcblx0XHRcdC8vXCJlbHNlIGdsX0ZyYWdDb2xvciA9IHRleGVsO1wiLFxyXG5cdFx0XHQvL1wiZ2xfRnJhZ0NvbG9yID0gdGV4ZWw7XCIsXHJcblxyXG4gICAgICAgIFwifVwiXHJcbiAgICBdLmpvaW4oXCJcIilcclxufTtcclxuXHJcbnZhciBwcmVHbG93O1xyXG52YXIgcHJlRmxhdDtcclxudmFyIG92ZXJsYXk7XHJcbnZhciBzY2VuZTtcclxuXG5nbG93Lm1ha2VDb21wb3NlcnMgPVxuZnVuY3Rpb24gbWFrZUNvbXBvc2VycyggcmVuZGVyZXIsIHNjZW5lRmxhdCwgcHJlRmxhdFNldHVwLCBzY2VuZUdsb3csIHByZUdsb3dTZXR1cCwgc2NlbmVPdmVyICkge1xyXG4gIHNjZW5lID0gc2NlbmVGbGF0O1xyXG4gIGdsb3cucmVuZGVyZXIgPSByZW5kZXJlcjtcblx0cmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XHJcblxyXG4gIGlmKCAhVm94ZWxhcml1bS5TZXR0aW5ncy51c2VfYmFzaWNfbWF0ZXJpYWwgKSB7XHJcblxyXG4gICAgb3ZlcmxheSA9IHNjZW5lT3ZlcjtcclxuICAgIHByZUdsb3cgPSBwcmVHbG93U2V0dXA7XHJcbiAgICBwcmVGbGF0ID0gcHJlRmxhdFNldHVwO1xyXG5cdC8vIFByZXBhcmUgdGhlIGdsb3cgY29tcG9zZXIncyByZW5kZXIgdGFyZ2V0XHJcblx0dmFyIHJlbmRlclRhcmdldFBhcmFtZXRlcnMgPSB7IG1pbkZpbHRlcjogVEhSRUUuTGluZWFyRmlsdGVyXHJcblx0XHRcdCwgbWFnRmlsdGVyOiBUSFJFRS5MaW5lYXJGaWx0ZXJcclxuXHRcdFx0Ly8sIGZvcm1hdDogVEhSRUUuUkdCRm9ybWF0XHJcblx0XHRcdCwgc3RlbmNpbEJ1ZmVyOiBmYWxzZSB9O1xyXG5cdGlmKCAhcmVuZGVyVGFyZ2V0R2xvdyApe1xyXG5cdCAgcmVuZGVyVGFyZ2V0R2xvdyA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodC8qLCByZW5kZXJUYXJnZXRQYXJhbWV0ZXJzKi8gKTtcclxuXHQgIHJlbmRlclRhcmdldEdsb3cudGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcblx0ICByZW5kZXJUYXJnZXRHbG93LnRleHR1cmUubWFnRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xyXG5cdCAgcmVuZGVyVGFyZ2V0R2xvdy50ZXh0dXJlLnN0ZW5jaWxCdWZlciA9IGZhbHNlO1xyXG5cdCAgcmVuZGVyVGFyZ2V0R2xvdy5kZXB0aFRleHR1cmUgPSBuZXcgVEhSRUUuRGVwdGhUZXh0dXJlKCApO1xyXG5cdFx0Ly9yZW5kZXJUYXJnZXRHbG93LmRlcHRoVGV4dHVyZS50eXBlID0gaXNXZWJHTDIgPyBUSFJFRS5GbG9hdFR5cGUgOiBUSFJFRS5VbnNpZ25lZFNob3J0VHlwZTtcclxuXHR9XHJcblx0Ly8gUHJlcGFyZSB0aGUgYmx1ciBzaGFkZXIgcGFzc2VzXHJcblx0dmFyIGhibHVyID0gbmV3IFRIUkVFLlNoYWRlclBhc3MoIFRIUkVFLkhvcml6b250YWxCbHVyU2hhZGVyICk7XHJcblx0dmFyIHZibHVyID0gbmV3IFRIUkVFLlNoYWRlclBhc3MoIFRIUkVFLlZlcnRpY2FsQmx1clNoYWRlciApO1xyXG5cclxuXHR2YXIgYmx1cmluZXNzID0gMTtcclxuXHJcblx0aGJsdXIudW5pZm9ybXNbIFwiaFwiIF0udmFsdWUgPSBibHVyaW5lc3MgLyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHQvL2hibHVyLm1hdGVyaWFsLmRlcHRoVGVzdCA9IGZhbHNlO1xyXG5cdC8vaGJsdXIubWF0ZXJpYWwuZGVwdGhXcml0ZSA9IGZhbHNlO1xyXG5cclxuXHR2Ymx1ci51bmlmb3Jtc1sgXCJ2XCIgXS52YWx1ZSA9IGJsdXJpbmVzcyAvIHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHQvL3ZibHVyLm1hdGVyaWFsLmRlcHRoVGVzdCA9IGZhbHNlO1xyXG5cdC8vdmJsdXIubWF0ZXJpYWwuZGVwdGhXcml0ZSA9IGZhbHNlO1xyXG5cclxuXHQvLyBQcmVwYXJlIHRoZSBnbG93IHNjZW5lIHJlbmRlciBwYXNzXHJcblx0dmFyIHJlbmRlck1vZGVsR2xvdyA9IG5ldyBUSFJFRS5SZW5kZXJQYXNzKCBzY2VuZUdsb3csIGNhbWVyYSk7XHJcblxyXG5cdC8vIENyZWF0ZSB0aGUgZ2xvdyBjb21wb3NlclxyXG5cdGdsb3djb21wb3NlciA9IG5ldyBUSFJFRS5FZmZlY3RDb21wb3NlciggcmVuZGVyZXIsIHJlbmRlclRhcmdldEdsb3cgKTtcclxuXHJcblx0Ly8gQWRkIGFsbCB0aGUgZ2xvdyBwYXNzZXNcclxuXHRnbG93Y29tcG9zZXIuYWRkUGFzcyggcmVuZGVyTW9kZWxHbG93ICk7XHJcblx0Z2xvd2NvbXBvc2VyLmFkZFBhc3MoIGhibHVyICk7XHJcblx0Z2xvd2NvbXBvc2VyLmFkZFBhc3MoIHZibHVyICk7XHJcblxyXG5cclxuXHQvLyBQcmVwYXJlIHRoZSBiYXNlIHNjZW5lIHJlbmRlciBwYXNzXHJcblx0dmFyIHJlbmRlck1vZGVsID0gbmV3IFRIUkVFLlJlbmRlclBhc3MoIHNjZW5lRmxhdCwgY2FtZXJhICk7XHJcblx0dmFyIHJlbmRlck1vZGVsMiA9IG5ldyBUSFJFRS5SZW5kZXJQYXNzKCBzY2VuZUdsb3csIGNhbWVyYSApO1xyXG4gICAgLy92YXIgcmVuZGVyTW9kZWwzID0gbmV3IFRIUkVFLlJlbmRlclBhc3MoIHNjZW5lT3ZlciwgY2FtZXJhICk7XHJcblx0cmVuZGVyTW9kZWwuY2xlYXIgPSB0cnVlO1xyXG5cdHJlbmRlck1vZGVsMi5jbGVhciA9IGZhbHNlO1xyXG4gICAgLy9yZW5kZXJNb2RlbDMuY2xlYXIgPSBmYWxzZTtcclxuXHJcblxyXG5cdC8vIFByZXBhcmUgdGhlIGNvbXBvc2VyJ3MgcmVuZGVyIHRhcmdldFxyXG5cdGlmKCAhcmVuZGVyVGFyZ2V0ICkge1xyXG5cdFx0cmVuZGVyVGFyZ2V0ID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0LyosIHJlbmRlclRhcmdldFBhcmFtZXRlcnMqLyApO1xyXG5cdFx0cmVuZGVyVGFyZ2V0R2xvdy50ZXh0dXJlLm1pbkZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcclxuXHRcdHJlbmRlclRhcmdldEdsb3cudGV4dHVyZS5tYWdGaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcblx0XHRyZW5kZXJUYXJnZXRHbG93LnRleHR1cmUuc3RlbmNpbEJ1ZmVyID0gZmFsc2U7XHJcblx0XHRyZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlID0gbmV3IFRIUkVFLkRlcHRoVGV4dHVyZSgpO1xyXG5cdFx0Ly9yZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLnR5cGUgPSBpc1dlYkdMMiA/IFRIUkVFLkZsb2F0VHlwZSA6IFRIUkVFLlVuc2lnbmVkU2hvcnRUeXBlO1xyXG5cdFx0Ly9yZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlLnR5cGUgPSBUSFJFRS5GbG9hdFR5cGUgOy8vOiBUSFJFRS5VbnNpZ25lZFNob3J0VHlwZTtcclxuXHR9XHJcblx0Ly8gQ3JlYXRlIHRoZSBjb21wb3NlclxyXG4vL1x0c2NlbmVjb21wb3NlciA9IG5ldyBUSFJFRS5FZmZlY3RDb21wb3NlciggcmVuZGVyZXIsIHJlbmRlclRhcmdldCApO1xyXG5cclxuXHQvLyBGaXJzdCB3ZSBuZWVkIHRvIGFzc2lnbiB0aGUgZ2xvdyBjb21wb3NlcidzIG91dHB1dCByZW5kZXIgdGFyZ2V0IHRvIHRoZSB0R2xvdyBzYW1wbGVyMkQgb2Ygb3VyIHNoYWRlclxyXG5cdC8vIE9sZCBUaHJlZS5qcyBwcmUtcjUwXHJcblx0Ly9maW5hbHNoYWRlci51bmlmb3Jtc1sgXCJ0R2xvd1wiIF0udGV4dHVyZSA9IGdsb3djb21wb3Nlci5yZW5kZXJUYXJnZXQyO1xyXG5cdC8vIE5ldyBUaHJlZS5qc1xyXG5cdGZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcInRHbG93XCIgXS52YWx1ZSA9IGdsb3djb21wb3Nlci5yZW5kZXJUYXJnZXQyO1xyXG5cdGZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcInRHbG93RGVwdGhcIiBdLnZhbHVlID0gcmVuZGVyVGFyZ2V0R2xvdy5kZXB0aFRleHR1cmU7XHJcblx0ZmluYWxzaGFkZXIudW5pZm9ybXNbIFwidERpZmZ1c2VEZXB0aFwiIF0udmFsdWUgPSByZW5kZXJUYXJnZXQuZGVwdGhUZXh0dXJlO1xyXG5cdGZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcImNhbWVyYU5lYXJcIl0udmFsdWUgPSBjYW1lcmEubmVhcjtcclxuXHRmaW5hbHNoYWRlci51bmlmb3Jtc1sgXCJjYW1lcmFGYXJcIl0udmFsdWUgPSBjYW1lcmEuZmFyO1xyXG5cclxuXHQvL2ZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcInREaWZmdXNlXCIgXS52YWx1ZSA9IHNjZW5lY29tcG9zZXIucmVuZGVyVGFyZ2V0MjtcclxuXHQvLyBOb3RlIHRoYXQgdGhlIHREaWZmdXNlIHNhbXBsZXIyRCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZmlsbGVkIGJ5IHRoZSBFZmZlY3RDb21wb3NlclxyXG5cclxuXHQvLyBQcmVwYXJlIHRoZSBhZGRpdGl2ZSBibGVuZGluZyBwYXNzXHJcblx0dmFyIGZpbmFsUGFzcyA9IG5ldyBUSFJFRS5TaGFkZXJQYXNzKCBmaW5hbHNoYWRlciApO1xyXG4gICAgLy9maW5hbFBhc3MuXHJcblx0ZmluYWxQYXNzLm5lZWRzU3dhcCA9IGZhbHNlO1xyXG5cdC8vIE1ha2Ugc3VyZSB0aGUgYWRkaXRpdmUgYmxlbmRpbmcgaXMgcmVuZGVyZWQgdG8gdGhlIHNjcmVlbiAoc2luY2UgaXQncyB0aGUgbGFzdCBwYXNzKVxyXG5cdGZpbmFsUGFzcy5yZW5kZXJUb1NjcmVlbiA9IHRydWU7XHJcbiAgICAvL3JlbmRlck1vZGVsMy5yZW5kZXJUb1NjcmVlbiA9IHRydWU7XHJcblxyXG5cdC8vIENyZWF0ZSB0aGUgY29tcG9zZXJcclxuXHRmaW5hbGNvbXBvc2VyID0gbmV3IFRIUkVFLkVmZmVjdENvbXBvc2VyKCByZW5kZXJlciwgcmVuZGVyVGFyZ2V0ICk7XHJcblxyXG5cdC8vIEFkZCBhbGwgcGFzc2VzXHJcblx0ZmluYWxjb21wb3Nlci5hZGRQYXNzKCByZW5kZXJNb2RlbCApO1xyXG5cdGZpbmFsY29tcG9zZXIuYWRkUGFzcyggcmVuZGVyTW9kZWwyICk7XHJcblx0ZmluYWxjb21wb3Nlci5hZGRQYXNzKCBmaW5hbFBhc3MgKTtcclxufVxyXG4gICAgLy9maW5hbGNvbXBvc2VyLmFkZFBhc3MoIHJlbmRlck1vZGVsMyApO1xyXG59XHJcblxyXG5cclxuXHJcbi8vZXhwb3J0cy5yZW5kZXIgPVxuZ2xvdy5yZW5kZXIgPSBmdW5jdGlvbiBnbG93UmVuZGVyKCkge1xuICBpZiggIVZveGVsYXJpdW0uU2V0dGluZ3MudXNlX2Jhc2ljX21hdGVyaWFsICkge1xyXG4gICAgcHJlR2xvdygpO1xyXG4gICAgZ2xvd2NvbXBvc2VyLnJlbmRlcigpO1xyXG5cclxuICAgIHByZUZsYXQoKTtcclxuXHQvL3NjZW5lY29tcG9zZXIucmVuZGVyKCk7XHJcblxyXG5cdGZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcInRHbG93XCIgXS52YWx1ZSA9IGdsb3djb21wb3Nlci5yZW5kZXJUYXJnZXQyO1xyXG5cdGZpbmFsc2hhZGVyLnVuaWZvcm1zWyBcInRHbG93RGVwdGhcIiBdLnZhbHVlID0gcmVuZGVyVGFyZ2V0R2xvdy5kZXB0aFRleHR1cmUudGV4dHVyZTtcclxuXHRmaW5hbHNoYWRlci51bmlmb3Jtc1sgXCJ0RGlmZnVzZURlcHRoXCIgXS52YWx1ZSA9IHJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUudGV4dHVyZTtcclxuXHRmaW5hbHNoYWRlci51bmlmb3Jtc1sgXCJjYW1lcmFOZWFyXCJdLnZhbHVlID0gY2FtZXJhLm5lYXI7XHJcblx0ZmluYWxzaGFkZXIudW5pZm9ybXNbIFwiY2FtZXJhRmFyXCJdLnZhbHVlID0gY2FtZXJhLmZhcjtcclxuXHJcblxyXG4gICAgZmluYWxjb21wb3Nlci5yZW5kZXIoKTtcclxuXHQgICBpZiggb3ZlcmxheSApXHJcblx0ICAgICBnbG93LnJlbmRlcmVyLnJlbmRlciggb3ZlcmxheSwgY2FtZXJhICk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZ2xvdy5yZW5kZXJlci5yZW5kZXIoIHNjZW5lLCBjYW1lcmEgKTtcclxuICAgIGlmKCBvdmVybGF5IClcclxuICBcdCAgICAgZ2xvdy5yZW5kZXJlci5yZW5kZXIoIG92ZXJsYXksIGNhbWVyYSApO1xyXG5cclxuICB9XHJcbiAgaWYoIFZveGVsYXJpdW0uU2V0dGluZ3MuVlIgKVxuXHQgIGVmZmVjdC5zdWJtaXRGcmFtZSgpO1xyXG5cclxufVxyXG4iLCJpZiAoZ2xvYmFsLkdFTlRMWSkgcmVxdWlyZSA9IEdFTlRMWS5oaWphY2socmVxdWlyZSk7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpLFxuICAgIFdyaXRlU3RyZWFtID0gcmVxdWlyZSgnZnMnKS5Xcml0ZVN0cmVhbSxcbiAgICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXIsXG4gICAgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbmZ1bmN0aW9uIEZpbGUocHJvcGVydGllcykge1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB0aGlzLnNpemUgPSAwO1xuICB0aGlzLnBhdGggPSBudWxsO1xuICB0aGlzLm5hbWUgPSBudWxsO1xuICB0aGlzLnR5cGUgPSBudWxsO1xuICB0aGlzLmhhc2ggPSBudWxsO1xuICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBudWxsO1xuXG4gIHRoaXMuX3dyaXRlU3RyZWFtID0gbnVsbDtcbiAgXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgdGhpc1trZXldID0gcHJvcGVydGllc1trZXldO1xuICB9XG5cbiAgaWYodHlwZW9mIHRoaXMuaGFzaCA9PT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLmhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaChwcm9wZXJ0aWVzLmhhc2gpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuaGFzaCA9IG51bGw7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gRmlsZTtcbnV0aWwuaW5oZXJpdHMoRmlsZSwgRXZlbnRFbWl0dGVyKTtcblxuRmlsZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl93cml0ZVN0cmVhbSA9IG5ldyBXcml0ZVN0cmVhbSh0aGlzLnBhdGgpO1xufTtcblxuRmlsZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgc2l6ZTogdGhpcy5zaXplLFxuICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgdHlwZTogdGhpcy50eXBlLFxuICAgIG10aW1lOiB0aGlzLmxhc3RNb2RpZmllZERhdGUsXG4gICAgbGVuZ3RoOiB0aGlzLmxlbmd0aCxcbiAgICBmaWxlbmFtZTogdGhpcy5maWxlbmFtZSxcbiAgICBtaW1lOiB0aGlzLm1pbWVcbiAgfTtcbn07XG5cbkZpbGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyLCBjYikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmIChzZWxmLmhhc2gpIHtcbiAgICBzZWxmLmhhc2gudXBkYXRlKGJ1ZmZlcik7XG4gIH1cbiAgdGhpcy5fd3JpdGVTdHJlYW0ud3JpdGUoYnVmZmVyLCBmdW5jdGlvbigpIHtcbiAgICBzZWxmLmxhc3RNb2RpZmllZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHNlbGYuc2l6ZSArPSBidWZmZXIubGVuZ3RoO1xuICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCBzZWxmLnNpemUpO1xuICAgIGNiKCk7XG4gIH0pO1xufTtcblxuRmlsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2IpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAoc2VsZi5oYXNoKSB7XG4gICAgc2VsZi5oYXNoID0gc2VsZi5oYXNoLmRpZ2VzdCgnaGV4Jyk7XG4gIH1cbiAgdGhpcy5fd3JpdGVTdHJlYW0uZW5kKGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZW1pdCgnZW5kJyk7XG4gICAgY2IoKTtcbiAgfSk7XG59O1xuIiwiaWYgKGdsb2JhbC5HRU5UTFkpIHJlcXVpcmUgPSBHRU5UTFkuaGlqYWNrKHJlcXVpcmUpO1xuXG52YXIgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG52YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyksXG4gICAgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKSxcbiAgICBGaWxlID0gcmVxdWlyZSgnLi9maWxlJyksXG4gICAgTXVsdGlwYXJ0UGFyc2VyID0gcmVxdWlyZSgnLi9tdWx0aXBhcnRfcGFyc2VyJykuTXVsdGlwYXJ0UGFyc2VyLFxuICAgIFF1ZXJ5c3RyaW5nUGFyc2VyID0gcmVxdWlyZSgnLi9xdWVyeXN0cmluZ19wYXJzZXInKS5RdWVyeXN0cmluZ1BhcnNlcixcbiAgICBPY3RldFBhcnNlciAgICAgICA9IHJlcXVpcmUoJy4vb2N0ZXRfcGFyc2VyJykuT2N0ZXRQYXJzZXIsXG4gICAgSlNPTlBhcnNlciA9IHJlcXVpcmUoJy4vanNvbl9wYXJzZXInKS5KU09OUGFyc2VyLFxuICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXIsXG4gICAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyLFxuICAgIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpLlN0cmVhbSxcbiAgICBvcyA9IHJlcXVpcmUoJ29zJyk7XG5cbmZ1bmN0aW9uIEluY29taW5nRm9ybShvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJbmNvbWluZ0Zvcm0pKSByZXR1cm4gbmV3IEluY29taW5nRm9ybShvcHRzKTtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgb3B0cz1vcHRzfHx7fTtcblxuICB0aGlzLmVycm9yID0gbnVsbDtcbiAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuXG4gIHRoaXMubWF4RmllbGRzID0gb3B0cy5tYXhGaWVsZHMgfHwgMTAwMDtcbiAgdGhpcy5tYXhGaWVsZHNTaXplID0gb3B0cy5tYXhGaWVsZHNTaXplIHx8IDIgKiAxMDI0ICogMTAyNDtcbiAgdGhpcy5rZWVwRXh0ZW5zaW9ucyA9IG9wdHMua2VlcEV4dGVuc2lvbnMgfHwgZmFsc2U7XG4gIHRoaXMudXBsb2FkRGlyID0gb3B0cy51cGxvYWREaXIgfHwgb3MudG1wRGlyKCk7XG4gIHRoaXMuZW5jb2RpbmcgPSBvcHRzLmVuY29kaW5nIHx8ICd1dGYtOCc7XG4gIHRoaXMuaGVhZGVycyA9IG51bGw7XG4gIHRoaXMudHlwZSA9IG51bGw7XG4gIHRoaXMuaGFzaCA9IG9wdHMuaGFzaCB8fCBmYWxzZTtcbiAgdGhpcy5tdWx0aXBsZXMgPSBvcHRzLm11bHRpcGxlcyB8fCBmYWxzZTtcblxuICB0aGlzLmJ5dGVzUmVjZWl2ZWQgPSBudWxsO1xuICB0aGlzLmJ5dGVzRXhwZWN0ZWQgPSBudWxsO1xuXG4gIHRoaXMuX3BhcnNlciA9IG51bGw7XG4gIHRoaXMuX2ZsdXNoaW5nID0gMDtcbiAgdGhpcy5fZmllbGRzU2l6ZSA9IDA7XG4gIHRoaXMub3BlbmVkRmlsZXMgPSBbXTtcblxuICByZXR1cm4gdGhpcztcbn1cbnV0aWwuaW5oZXJpdHMoSW5jb21pbmdGb3JtLCBFdmVudEVtaXR0ZXIpO1xuZXhwb3J0cy5JbmNvbWluZ0Zvcm0gPSBJbmNvbWluZ0Zvcm07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihyZXEsIGNiKSB7XG4gIHRoaXMucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgcmVxLnBhdXNlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyB0aGUgc3RyZWFtIHdhcyBkZXN0cm95ZWRcbiAgICAgIGlmICghdGhpcy5lbmRlZCkge1xuICAgICAgICAvLyBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZCwgY3Jhc2ggJiBidXJuXG4gICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHRoaXMucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlcS5yZXN1bWUoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIHRoZSBzdHJlYW0gd2FzIGRlc3Ryb3llZFxuICAgICAgaWYgKCF0aGlzLmVuZGVkKSB7XG4gICAgICAgIC8vIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkLCBjcmFzaCAmIGJ1cm5cbiAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBTZXR1cCBjYWxsYmFjayBmaXJzdCwgc28gd2UgZG9uJ3QgbWlzcyBhbnl0aGluZyBmcm9tIGRhdGEgZXZlbnRzIGVtaXR0ZWRcbiAgLy8gaW1tZWRpYXRlbHkuXG4gIGlmIChjYikge1xuICAgIHZhciBmaWVsZHMgPSB7fSwgZmlsZXMgPSB7fTtcbiAgICB0aGlzXG4gICAgICAub24oJ2ZpZWxkJywgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgZmllbGRzW25hbWVdID0gdmFsdWU7XG4gICAgICB9KVxuICAgICAgLm9uKCdmaWxlJywgZnVuY3Rpb24obmFtZSwgZmlsZSkge1xuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZXMpIHtcbiAgICAgICAgICBpZiAoZmlsZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShmaWxlc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgZmlsZXNbbmFtZV0gPSBbZmlsZXNbbmFtZV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsZXNbbmFtZV0ucHVzaChmaWxlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsZXNbbmFtZV0gPSBmaWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWxlc1tuYW1lXSA9IGZpbGU7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNiKGVyciwgZmllbGRzLCBmaWxlcyk7XG4gICAgICB9KVxuICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY2IobnVsbCwgZmllbGRzLCBmaWxlcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIFBhcnNlIGhlYWRlcnMgYW5kIHNldHVwIHRoZSBwYXJzZXIsIHJlYWR5IHRvIHN0YXJ0IGxpc3RlbmluZyBmb3IgZGF0YS5cbiAgdGhpcy53cml0ZUhlYWRlcnMocmVxLmhlYWRlcnMpO1xuXG4gIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgZGF0YS5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXFcbiAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBzZWxmLl9lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLm9uKCdhYm9ydGVkJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmVtaXQoJ2Fib3J0ZWQnKTtcbiAgICAgIHNlbGYuX2Vycm9yKG5ldyBFcnJvcignUmVxdWVzdCBhYm9ydGVkJykpO1xuICAgIH0pXG4gICAgLm9uKCdkYXRhJywgZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICBzZWxmLndyaXRlKGJ1ZmZlcik7XG4gICAgfSlcbiAgICAub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHNlbGYuZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXJyID0gc2VsZi5fcGFyc2VyLmVuZCgpO1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBzZWxmLl9lcnJvcihlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS53cml0ZUhlYWRlcnMgPSBmdW5jdGlvbihoZWFkZXJzKSB7XG4gIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gIHRoaXMuX3BhcnNlQ29udGVudExlbmd0aCgpO1xuICB0aGlzLl9wYXJzZUNvbnRlbnRUeXBlKCk7XG59O1xuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gIGlmICh0aGlzLmVycm9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghdGhpcy5fcGFyc2VyKSB7XG4gICAgdGhpcy5fZXJyb3IobmV3IEVycm9yKCd1bmluaXRpYWxpemVkIHBhcnNlcicpKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gYnVmZmVyLmxlbmd0aDtcbiAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHRoaXMuYnl0ZXNSZWNlaXZlZCwgdGhpcy5ieXRlc0V4cGVjdGVkKTtcblxuICB2YXIgYnl0ZXNQYXJzZWQgPSB0aGlzLl9wYXJzZXIud3JpdGUoYnVmZmVyKTtcbiAgaWYgKGJ5dGVzUGFyc2VkICE9PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgdGhpcy5fZXJyb3IobmV3IEVycm9yKCdwYXJzZXIgZXJyb3IsICcrYnl0ZXNQYXJzZWQrJyBvZiAnK2J1ZmZlci5sZW5ndGgrJyBieXRlcyBwYXJzZWQnKSk7XG4gIH1cblxuICByZXR1cm4gYnl0ZXNQYXJzZWQ7XG59O1xuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIC8vIHRoaXMgZG9lcyBub3RoaW5nLCB1bmxlc3Mgb3ZlcndyaXR0ZW4gaW4gSW5jb21pbmdGb3JtLnBhcnNlXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gIC8vIHRoaXMgZG9lcyBub3RoaW5nLCB1bmxlc3Mgb3ZlcndyaXR0ZW4gaW4gSW5jb21pbmdGb3JtLnBhcnNlXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUub25QYXJ0ID0gZnVuY3Rpb24ocGFydCkge1xuICAvLyB0aGlzIG1ldGhvZCBjYW4gYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIHVzZXJcbiAgdGhpcy5oYW5kbGVQYXJ0KHBhcnQpO1xufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS5oYW5kbGVQYXJ0ID0gZnVuY3Rpb24ocGFydCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgaWYgKHBhcnQuZmlsZW5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciB2YWx1ZSA9ICcnXG4gICAgICAsIGRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2Rlcih0aGlzLmVuY29kaW5nKTtcblxuICAgIHBhcnQub24oJ2RhdGEnLCBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIHNlbGYuX2ZpZWxkc1NpemUgKz0gYnVmZmVyLmxlbmd0aDtcbiAgICAgIGlmIChzZWxmLl9maWVsZHNTaXplID4gc2VsZi5tYXhGaWVsZHNTaXplKSB7XG4gICAgICAgIHNlbGYuX2Vycm9yKG5ldyBFcnJvcignbWF4RmllbGRzU2l6ZSBleGNlZWRlZCwgcmVjZWl2ZWQgJytzZWxmLl9maWVsZHNTaXplKycgYnl0ZXMgb2YgZmllbGQgZGF0YScpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFsdWUgKz0gZGVjb2Rlci53cml0ZShidWZmZXIpO1xuICAgIH0pO1xuXG4gICAgcGFydC5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmVtaXQoJ2ZpZWxkJywgcGFydC5uYW1lLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fZmx1c2hpbmcrKztcblxuICB2YXIgZmlsZSA9IG5ldyBGaWxlKHtcbiAgICBwYXRoOiB0aGlzLl91cGxvYWRQYXRoKHBhcnQuZmlsZW5hbWUpLFxuICAgIG5hbWU6IHBhcnQuZmlsZW5hbWUsXG4gICAgdHlwZTogcGFydC5taW1lLFxuICAgIGhhc2g6IHNlbGYuaGFzaFxuICB9KTtcblxuICB0aGlzLmVtaXQoJ2ZpbGVCZWdpbicsIHBhcnQubmFtZSwgZmlsZSk7XG5cbiAgZmlsZS5vcGVuKCk7XG4gIHRoaXMub3BlbmVkRmlsZXMucHVzaChmaWxlKTtcblxuICBwYXJ0Lm9uKCdkYXRhJywgZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLnBhdXNlKCk7XG4gICAgZmlsZS53cml0ZShidWZmZXIsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5yZXN1bWUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcGFydC5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgZmlsZS5lbmQoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9mbHVzaGluZy0tO1xuICAgICAgc2VsZi5lbWl0KCdmaWxlJywgcGFydC5uYW1lLCBmaWxlKTtcbiAgICAgIHNlbGYuX21heWJlRW5kKCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZHVtbXlQYXJzZXIoc2VsZikge1xuICByZXR1cm4ge1xuICAgIGVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9tYXliZUVuZCgpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xufVxuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLl9wYXJzZUNvbnRlbnRUeXBlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmJ5dGVzRXhwZWN0ZWQgPT09IDApIHtcbiAgICB0aGlzLl9wYXJzZXIgPSBkdW1teVBhcnNlcih0aGlzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXRoaXMuaGVhZGVyc1snY29udGVudC10eXBlJ10pIHtcbiAgICB0aGlzLl9lcnJvcihuZXcgRXJyb3IoJ2JhZCBjb250ZW50LXR5cGUgaGVhZGVyLCBubyBjb250ZW50LXR5cGUnKSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMuaGVhZGVyc1snY29udGVudC10eXBlJ10ubWF0Y2goL29jdGV0LXN0cmVhbS9pKSkge1xuICAgIHRoaXMuX2luaXRPY3RldFN0cmVhbSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddLm1hdGNoKC91cmxlbmNvZGVkL2kpKSB7XG4gICAgdGhpcy5faW5pdFVybGVuY29kZWQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXS5tYXRjaCgvbXVsdGlwYXJ0L2kpKSB7XG4gICAgdmFyIG0gPSB0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddLm1hdGNoKC9ib3VuZGFyeT0oPzpcIihbXlwiXSspXCJ8KFteO10rKSkvaSk7XG4gICAgaWYgKG0pIHtcbiAgICAgIHRoaXMuX2luaXRNdWx0aXBhcnQobVsxXSB8fCBtWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZXJyb3IobmV3IEVycm9yKCdiYWQgY29udGVudC10eXBlIGhlYWRlciwgbm8gbXVsdGlwYXJ0IGJvdW5kYXJ5JykpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXS5tYXRjaCgvanNvbi9pKSkge1xuICAgIHRoaXMuX2luaXRKU09OZW5jb2RlZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuX2Vycm9yKG5ldyBFcnJvcignYmFkIGNvbnRlbnQtdHlwZSBoZWFkZXIsIHVua25vd24gY29udGVudC10eXBlOiAnK3RoaXMuaGVhZGVyc1snY29udGVudC10eXBlJ10pKTtcbn07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gIGlmICh0aGlzLmVycm9yIHx8IHRoaXMuZW5kZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmVycm9yID0gZXJyO1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcblxuICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLm9wZW5lZEZpbGVzKSkge1xuICAgIHRoaXMub3BlbmVkRmlsZXMuZm9yRWFjaChmdW5jdGlvbihmaWxlKSB7XG4gICAgICBmaWxlLl93cml0ZVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICBzZXRUaW1lb3V0KGZzLnVubGluaywgMCwgZmlsZS5wYXRoLCBmdW5jdGlvbihlcnJvcikgeyB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS5fcGFyc2VDb250ZW50TGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuYnl0ZXNSZWNlaXZlZCA9IDA7XG4gIGlmICh0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10pIHtcbiAgICB0aGlzLmJ5dGVzRXhwZWN0ZWQgPSBwYXJzZUludCh0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10sIDEwKTtcbiAgfSBlbHNlIGlmICh0aGlzLmhlYWRlcnNbJ3RyYW5zZmVyLWVuY29kaW5nJ10gPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuYnl0ZXNFeHBlY3RlZCA9IDA7XG4gIH1cblxuICBpZiAodGhpcy5ieXRlc0V4cGVjdGVkICE9PSBudWxsKSB7XG4gICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHRoaXMuYnl0ZXNSZWNlaXZlZCwgdGhpcy5ieXRlc0V4cGVjdGVkKTtcbiAgfVxufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS5fbmV3UGFyc2VyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgTXVsdGlwYXJ0UGFyc2VyKCk7XG59O1xuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLl9pbml0TXVsdGlwYXJ0ID0gZnVuY3Rpb24oYm91bmRhcnkpIHtcbiAgdGhpcy50eXBlID0gJ211bHRpcGFydCc7XG5cbiAgdmFyIHBhcnNlciA9IG5ldyBNdWx0aXBhcnRQYXJzZXIoKSxcbiAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgaGVhZGVyRmllbGQsXG4gICAgICBoZWFkZXJWYWx1ZSxcbiAgICAgIHBhcnQ7XG5cbiAgcGFyc2VyLmluaXRXaXRoQm91bmRhcnkoYm91bmRhcnkpO1xuXG4gIHBhcnNlci5vblBhcnRCZWdpbiA9IGZ1bmN0aW9uKCkge1xuICAgIHBhcnQgPSBuZXcgU3RyZWFtKCk7XG4gICAgcGFydC5yZWFkYWJsZSA9IHRydWU7XG4gICAgcGFydC5oZWFkZXJzID0ge307XG4gICAgcGFydC5uYW1lID0gbnVsbDtcbiAgICBwYXJ0LmZpbGVuYW1lID0gbnVsbDtcbiAgICBwYXJ0Lm1pbWUgPSBudWxsO1xuXG4gICAgcGFydC50cmFuc2ZlckVuY29kaW5nID0gJ2JpbmFyeSc7XG4gICAgcGFydC50cmFuc2ZlckJ1ZmZlciA9ICcnO1xuXG4gICAgaGVhZGVyRmllbGQgPSAnJztcbiAgICBoZWFkZXJWYWx1ZSA9ICcnO1xuICB9O1xuXG4gIHBhcnNlci5vbkhlYWRlckZpZWxkID0gZnVuY3Rpb24oYiwgc3RhcnQsIGVuZCkge1xuICAgIGhlYWRlckZpZWxkICs9IGIudG9TdHJpbmcoc2VsZi5lbmNvZGluZywgc3RhcnQsIGVuZCk7XG4gIH07XG5cbiAgcGFyc2VyLm9uSGVhZGVyVmFsdWUgPSBmdW5jdGlvbihiLCBzdGFydCwgZW5kKSB7XG4gICAgaGVhZGVyVmFsdWUgKz0gYi50b1N0cmluZyhzZWxmLmVuY29kaW5nLCBzdGFydCwgZW5kKTtcbiAgfTtcblxuICBwYXJzZXIub25IZWFkZXJFbmQgPSBmdW5jdGlvbigpIHtcbiAgICBoZWFkZXJGaWVsZCA9IGhlYWRlckZpZWxkLnRvTG93ZXJDYXNlKCk7XG4gICAgcGFydC5oZWFkZXJzW2hlYWRlckZpZWxkXSA9IGhlYWRlclZhbHVlO1xuXG4gICAgdmFyIG0gPSBoZWFkZXJWYWx1ZS5tYXRjaCgvXFxibmFtZT1cIihbXlwiXSspXCIvaSk7XG4gICAgaWYgKGhlYWRlckZpZWxkID09ICdjb250ZW50LWRpc3Bvc2l0aW9uJykge1xuICAgICAgaWYgKG0pIHtcbiAgICAgICAgcGFydC5uYW1lID0gbVsxXTtcbiAgICAgIH1cblxuICAgICAgcGFydC5maWxlbmFtZSA9IHNlbGYuX2ZpbGVOYW1lKGhlYWRlclZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGhlYWRlckZpZWxkID09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICBwYXJ0Lm1pbWUgPSBoZWFkZXJWYWx1ZTtcbiAgICB9IGVsc2UgaWYgKGhlYWRlckZpZWxkID09ICdjb250ZW50LXRyYW5zZmVyLWVuY29kaW5nJykge1xuICAgICAgcGFydC50cmFuc2ZlckVuY29kaW5nID0gaGVhZGVyVmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBoZWFkZXJGaWVsZCA9ICcnO1xuICAgIGhlYWRlclZhbHVlID0gJyc7XG4gIH07XG5cbiAgcGFyc2VyLm9uSGVhZGVyc0VuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHN3aXRjaChwYXJ0LnRyYW5zZmVyRW5jb2Rpbmcpe1xuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgIGNhc2UgJzdiaXQnOlxuICAgICAgY2FzZSAnOGJpdCc6XG4gICAgICBwYXJzZXIub25QYXJ0RGF0YSA9IGZ1bmN0aW9uKGIsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcGFydC5lbWl0KCdkYXRhJywgYi5zbGljZShzdGFydCwgZW5kKSk7XG4gICAgICB9O1xuXG4gICAgICBwYXJzZXIub25QYXJ0RW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHBhcnQuZW1pdCgnZW5kJyk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICBwYXJzZXIub25QYXJ0RGF0YSA9IGZ1bmN0aW9uKGIsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcGFydC50cmFuc2ZlckJ1ZmZlciArPSBiLnNsaWNlKHN0YXJ0LCBlbmQpLnRvU3RyaW5nKCdhc2NpaScpO1xuXG4gICAgICAgIC8qXG4gICAgICAgIGZvdXIgYnl0ZXMgKGNoYXJzKSBpbiBiYXNlNjQgY29udmVydHMgdG8gdGhyZWUgYnl0ZXMgaW4gYmluYXJ5XG4gICAgICAgIGVuY29kaW5nLiBTbyB3ZSBzaG91bGQgYWx3YXlzIHdvcmsgd2l0aCBhIG51bWJlciBvZiBieXRlcyB0aGF0XG4gICAgICAgIGNhbiBiZSBkaXZpZGVkIGJ5IDQsIGl0IHdpbGwgcmVzdWx0IGluIGEgbnVtYmVyIG9mIGJ1eXRlcyB0aGF0XG4gICAgICAgIGNhbiBiZSBkaXZpZGVkIHZ5IDMuXG4gICAgICAgICovXG4gICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludChwYXJ0LnRyYW5zZmVyQnVmZmVyLmxlbmd0aCAvIDQsIDEwKSAqIDQ7XG4gICAgICAgIHBhcnQuZW1pdCgnZGF0YScsIG5ldyBCdWZmZXIocGFydC50cmFuc2ZlckJ1ZmZlci5zdWJzdHJpbmcoMCwgb2Zmc2V0KSwgJ2Jhc2U2NCcpKTtcbiAgICAgICAgcGFydC50cmFuc2ZlckJ1ZmZlciA9IHBhcnQudHJhbnNmZXJCdWZmZXIuc3Vic3RyaW5nKG9mZnNldCk7XG4gICAgICB9O1xuXG4gICAgICBwYXJzZXIub25QYXJ0RW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHBhcnQuZW1pdCgnZGF0YScsIG5ldyBCdWZmZXIocGFydC50cmFuc2ZlckJ1ZmZlciwgJ2Jhc2U2NCcpKTtcbiAgICAgICAgcGFydC5lbWl0KCdlbmQnKTtcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzZWxmLl9lcnJvcihuZXcgRXJyb3IoJ3Vua25vd24gdHJhbnNmZXItZW5jb2RpbmcnKSk7XG4gICAgfVxuXG4gICAgc2VsZi5vblBhcnQocGFydCk7XG4gIH07XG5cblxuICBwYXJzZXIub25FbmQgPSBmdW5jdGlvbigpIHtcbiAgICBzZWxmLmVuZGVkID0gdHJ1ZTtcbiAgICBzZWxmLl9tYXliZUVuZCgpO1xuICB9O1xuXG4gIHRoaXMuX3BhcnNlciA9IHBhcnNlcjtcbn07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUuX2ZpbGVOYW1lID0gZnVuY3Rpb24oaGVhZGVyVmFsdWUpIHtcbiAgdmFyIG0gPSBoZWFkZXJWYWx1ZS5tYXRjaCgvXFxiZmlsZW5hbWU9XCIoLio/KVwiKCR8OyApL2kpO1xuICBpZiAoIW0pIHJldHVybjtcblxuICB2YXIgZmlsZW5hbWUgPSBtWzFdLnN1YnN0cihtWzFdLmxhc3RJbmRleE9mKCdcXFxcJykgKyAxKTtcbiAgZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC8lMjIvZywgJ1wiJyk7XG4gIGZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvJiMoW1xcZF17NH0pOy9nLCBmdW5jdGlvbihtLCBjb2RlKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gIH0pO1xuICByZXR1cm4gZmlsZW5hbWU7XG59O1xuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLl9pbml0VXJsZW5jb2RlZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnR5cGUgPSAndXJsZW5jb2RlZCc7XG5cbiAgdmFyIHBhcnNlciA9IG5ldyBRdWVyeXN0cmluZ1BhcnNlcih0aGlzLm1heEZpZWxkcylcbiAgICAsIHNlbGYgPSB0aGlzO1xuXG4gIHBhcnNlci5vbkZpZWxkID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICBzZWxmLmVtaXQoJ2ZpZWxkJywga2V5LCB2YWwpO1xuICB9O1xuXG4gIHBhcnNlci5vbkVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZW5kZWQgPSB0cnVlO1xuICAgIHNlbGYuX21heWJlRW5kKCk7XG4gIH07XG5cbiAgdGhpcy5fcGFyc2VyID0gcGFyc2VyO1xufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS5faW5pdE9jdGV0U3RyZWFtID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudHlwZSA9ICdvY3RldC1zdHJlYW0nO1xuICB2YXIgZmlsZW5hbWUgPSB0aGlzLmhlYWRlcnNbJ3gtZmlsZS1uYW1lJ107XG4gIHZhciBtaW1lID0gdGhpcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXTtcblxuICB2YXIgZmlsZSA9IG5ldyBGaWxlKHtcbiAgICBwYXRoOiB0aGlzLl91cGxvYWRQYXRoKGZpbGVuYW1lKSxcbiAgICBuYW1lOiBmaWxlbmFtZSxcbiAgICB0eXBlOiBtaW1lXG4gIH0pO1xuXG4gIHRoaXMuZW1pdCgnZmlsZUJlZ2luJywgZmlsZW5hbWUsIGZpbGUpO1xuICBmaWxlLm9wZW4oKTtcblxuICB0aGlzLl9mbHVzaGluZysrO1xuXG4gIHZhciBzZWxmID0gdGhpcztcblxuICBzZWxmLl9wYXJzZXIgPSBuZXcgT2N0ZXRQYXJzZXIoKTtcblxuICAvL0tlZXAgdHJhY2sgb2Ygd3JpdGVzIHRoYXQgaGF2ZW4ndCBmaW5pc2hlZCBzbyB3ZSBkb24ndCBlbWl0IHRoZSBmaWxlIGJlZm9yZSBpdCdzIGRvbmUgYmVpbmcgd3JpdHRlblxuICB2YXIgb3V0c3RhbmRpbmdXcml0ZXMgPSAwO1xuXG4gIHNlbGYuX3BhcnNlci5vbignZGF0YScsIGZ1bmN0aW9uKGJ1ZmZlcil7XG4gICAgc2VsZi5wYXVzZSgpO1xuICAgIG91dHN0YW5kaW5nV3JpdGVzKys7XG5cbiAgICBmaWxlLndyaXRlKGJ1ZmZlciwgZnVuY3Rpb24oKSB7XG4gICAgICBvdXRzdGFuZGluZ1dyaXRlcy0tO1xuICAgICAgc2VsZi5yZXN1bWUoKTtcblxuICAgICAgaWYoc2VsZi5lbmRlZCl7XG4gICAgICAgIHNlbGYuX3BhcnNlci5lbWl0KCdkb25lV3JpdGluZ0ZpbGUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgc2VsZi5fcGFyc2VyLm9uKCdlbmQnLCBmdW5jdGlvbigpe1xuICAgIHNlbGYuX2ZsdXNoaW5nLS07XG4gICAgc2VsZi5lbmRlZCA9IHRydWU7XG5cbiAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBmaWxlLmVuZChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5lbWl0KCdmaWxlJywgJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgc2VsZi5fbWF5YmVFbmQoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZihvdXRzdGFuZGluZ1dyaXRlcyA9PT0gMCl7XG4gICAgICBkb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuX3BhcnNlci5vbmNlKCdkb25lV3JpdGluZ0ZpbGUnLCBkb25lKTtcbiAgICB9XG4gIH0pO1xufTtcblxuSW5jb21pbmdGb3JtLnByb3RvdHlwZS5faW5pdEpTT05lbmNvZGVkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMudHlwZSA9ICdqc29uJztcblxuICB2YXIgcGFyc2VyID0gbmV3IEpTT05QYXJzZXIoKVxuICAgICwgc2VsZiA9IHRoaXM7XG5cbiAgaWYgKHRoaXMuYnl0ZXNFeHBlY3RlZCkge1xuICAgIHBhcnNlci5pbml0V2l0aExlbmd0aCh0aGlzLmJ5dGVzRXhwZWN0ZWQpO1xuICB9XG5cbiAgcGFyc2VyLm9uRmllbGQgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIHNlbGYuZW1pdCgnZmllbGQnLCBrZXksIHZhbCk7XG4gIH07XG5cbiAgcGFyc2VyLm9uRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5lbmRlZCA9IHRydWU7XG4gICAgc2VsZi5fbWF5YmVFbmQoKTtcbiAgfTtcblxuICB0aGlzLl9wYXJzZXIgPSBwYXJzZXI7XG59O1xuXG5JbmNvbWluZ0Zvcm0ucHJvdG90eXBlLl91cGxvYWRQYXRoID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgdmFyIG5hbWUgPSAndXBsb2FkXyc7XG4gIHZhciBidWYgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7ICsraSkge1xuICAgIG5hbWUgKz0gKCcwJyArIGJ1ZltpXS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgfVxuXG4gIGlmICh0aGlzLmtlZXBFeHRlbnNpb25zKSB7XG4gICAgdmFyIGV4dCA9IHBhdGguZXh0bmFtZShmaWxlbmFtZSk7XG4gICAgZXh0ICAgICA9IGV4dC5yZXBsYWNlKC8oXFwuW2EtejAtOV0rKS4qL2ksICckMScpO1xuXG4gICAgbmFtZSArPSBleHQ7XG4gIH1cblxuICByZXR1cm4gcGF0aC5qb2luKHRoaXMudXBsb2FkRGlyLCBuYW1lKTtcbn07XG5cbkluY29taW5nRm9ybS5wcm90b3R5cGUuX21heWJlRW5kID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5lbmRlZCB8fCB0aGlzLl9mbHVzaGluZyB8fCB0aGlzLmVycm9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5lbWl0KCdlbmQnKTtcbn07XG5cbiIsInZhciBJbmNvbWluZ0Zvcm0gPSByZXF1aXJlKCcuL2luY29taW5nX2Zvcm0nKS5JbmNvbWluZ0Zvcm07XG5JbmNvbWluZ0Zvcm0uSW5jb21pbmdGb3JtID0gSW5jb21pbmdGb3JtO1xubW9kdWxlLmV4cG9ydHMgPSBJbmNvbWluZ0Zvcm07XG4iLCJpZiAoZ2xvYmFsLkdFTlRMWSkgcmVxdWlyZSA9IEdFTlRMWS5oaWphY2socmVxdWlyZSk7XG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbmZ1bmN0aW9uIEpTT05QYXJzZXIoKSB7XG4gIHRoaXMuZGF0YSA9IG5ldyBCdWZmZXIoJycpO1xuICB0aGlzLmJ5dGVzV3JpdHRlbiA9IDA7XG59XG5leHBvcnRzLkpTT05QYXJzZXIgPSBKU09OUGFyc2VyO1xuXG5KU09OUGFyc2VyLnByb3RvdHlwZS5pbml0V2l0aExlbmd0aCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICB0aGlzLmRhdGEgPSBuZXcgQnVmZmVyKGxlbmd0aCk7XG59O1xuXG5KU09OUGFyc2VyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICBpZiAodGhpcy5kYXRhLmxlbmd0aCA+PSB0aGlzLmJ5dGVzV3JpdHRlbiArIGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBidWZmZXIuY29weSh0aGlzLmRhdGEsIHRoaXMuYnl0ZXNXcml0dGVuKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmRhdGEgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmRhdGEsIGJ1ZmZlcl0pO1xuICB9XG4gIHRoaXMuYnl0ZXNXcml0dGVuICs9IGJ1ZmZlci5sZW5ndGg7XG4gIHJldHVybiBidWZmZXIubGVuZ3RoO1xufTtcblxuSlNPTlBhcnNlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgdmFyIGZpZWxkcyA9IEpTT04ucGFyc2UodGhpcy5kYXRhLnRvU3RyaW5nKCd1dGY4JykpO1xuICAgIGZvciAodmFyIGZpZWxkIGluIGZpZWxkcykge1xuICAgICAgdGhpcy5vbkZpZWxkKGZpZWxkLCBmaWVsZHNbZmllbGRdKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHRoaXMuZGF0YSA9IG51bGw7XG5cbiAgdGhpcy5vbkVuZCgpO1xufTtcbiIsInZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXIsXG4gICAgcyA9IDAsXG4gICAgUyA9XG4gICAgeyBQQVJTRVJfVU5JTklUSUFMSVpFRDogcysrLFxuICAgICAgU1RBUlQ6IHMrKyxcbiAgICAgIFNUQVJUX0JPVU5EQVJZOiBzKyssXG4gICAgICBIRUFERVJfRklFTERfU1RBUlQ6IHMrKyxcbiAgICAgIEhFQURFUl9GSUVMRDogcysrLFxuICAgICAgSEVBREVSX1ZBTFVFX1NUQVJUOiBzKyssXG4gICAgICBIRUFERVJfVkFMVUU6IHMrKyxcbiAgICAgIEhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTogcysrLFxuICAgICAgSEVBREVSU19BTE1PU1RfRE9ORTogcysrLFxuICAgICAgUEFSVF9EQVRBX1NUQVJUOiBzKyssXG4gICAgICBQQVJUX0RBVEE6IHMrKyxcbiAgICAgIFBBUlRfRU5EOiBzKyssXG4gICAgICBFTkQ6IHMrK1xuICAgIH0sXG5cbiAgICBmID0gMSxcbiAgICBGID1cbiAgICB7IFBBUlRfQk9VTkRBUlk6IGYsXG4gICAgICBMQVNUX0JPVU5EQVJZOiBmICo9IDJcbiAgICB9LFxuXG4gICAgTEYgPSAxMCxcbiAgICBDUiA9IDEzLFxuICAgIFNQQUNFID0gMzIsXG4gICAgSFlQSEVOID0gNDUsXG4gICAgQ09MT04gPSA1OCxcbiAgICBBID0gOTcsXG4gICAgWiA9IDEyMixcblxuICAgIGxvd2VyID0gZnVuY3Rpb24oYykge1xuICAgICAgcmV0dXJuIGMgfCAweDIwO1xuICAgIH07XG5cbmZvciAocyBpbiBTKSB7XG4gIGV4cG9ydHNbc10gPSBTW3NdO1xufVxuXG5mdW5jdGlvbiBNdWx0aXBhcnRQYXJzZXIoKSB7XG4gIHRoaXMuYm91bmRhcnkgPSBudWxsO1xuICB0aGlzLmJvdW5kYXJ5Q2hhcnMgPSBudWxsO1xuICB0aGlzLmxvb2tiZWhpbmQgPSBudWxsO1xuICB0aGlzLnN0YXRlID0gUy5QQVJTRVJfVU5JTklUSUFMSVpFRDtcblxuICB0aGlzLmluZGV4ID0gbnVsbDtcbiAgdGhpcy5mbGFncyA9IDA7XG59XG5leHBvcnRzLk11bHRpcGFydFBhcnNlciA9IE11bHRpcGFydFBhcnNlcjtcblxuTXVsdGlwYXJ0UGFyc2VyLnN0YXRlVG9TdHJpbmcgPSBmdW5jdGlvbihzdGF0ZU51bWJlcikge1xuICBmb3IgKHZhciBzdGF0ZSBpbiBTKSB7XG4gICAgdmFyIG51bWJlciA9IFNbc3RhdGVdO1xuICAgIGlmIChudW1iZXIgPT09IHN0YXRlTnVtYmVyKSByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbk11bHRpcGFydFBhcnNlci5wcm90b3R5cGUuaW5pdFdpdGhCb3VuZGFyeSA9IGZ1bmN0aW9uKHN0cikge1xuICB0aGlzLmJvdW5kYXJ5ID0gbmV3IEJ1ZmZlcihzdHIubGVuZ3RoKzQpO1xuICB0aGlzLmJvdW5kYXJ5LndyaXRlKCdcXHJcXG4tLScsIDApO1xuICB0aGlzLmJvdW5kYXJ5LndyaXRlKHN0ciwgNCk7XG4gIHRoaXMubG9va2JlaGluZCA9IG5ldyBCdWZmZXIodGhpcy5ib3VuZGFyeS5sZW5ndGgrOCk7XG4gIHRoaXMuc3RhdGUgPSBTLlNUQVJUO1xuXG4gIHRoaXMuYm91bmRhcnlDaGFycyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm91bmRhcnkubGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLmJvdW5kYXJ5Q2hhcnNbdGhpcy5ib3VuZGFyeVtpXV0gPSB0cnVlO1xuICB9XG59O1xuXG5NdWx0aXBhcnRQYXJzZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIGkgPSAwLFxuICAgICAgbGVuID0gYnVmZmVyLmxlbmd0aCxcbiAgICAgIHByZXZJbmRleCA9IHRoaXMuaW5kZXgsXG4gICAgICBpbmRleCA9IHRoaXMuaW5kZXgsXG4gICAgICBzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICBmbGFncyA9IHRoaXMuZmxhZ3MsXG4gICAgICBsb29rYmVoaW5kID0gdGhpcy5sb29rYmVoaW5kLFxuICAgICAgYm91bmRhcnkgPSB0aGlzLmJvdW5kYXJ5LFxuICAgICAgYm91bmRhcnlDaGFycyA9IHRoaXMuYm91bmRhcnlDaGFycyxcbiAgICAgIGJvdW5kYXJ5TGVuZ3RoID0gdGhpcy5ib3VuZGFyeS5sZW5ndGgsXG4gICAgICBib3VuZGFyeUVuZCA9IGJvdW5kYXJ5TGVuZ3RoIC0gMSxcbiAgICAgIGJ1ZmZlckxlbmd0aCA9IGJ1ZmZlci5sZW5ndGgsXG4gICAgICBjLFxuICAgICAgY2wsXG5cbiAgICAgIG1hcmsgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHNlbGZbbmFtZSsnTWFyayddID0gaTtcbiAgICAgIH0sXG4gICAgICBjbGVhciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgZGVsZXRlIHNlbGZbbmFtZSsnTWFyayddO1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24obmFtZSwgYnVmZmVyLCBzdGFydCwgZW5kKSB7XG4gICAgICAgIGlmIChzdGFydCAhPT0gdW5kZWZpbmVkICYmIHN0YXJ0ID09PSBlbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2FsbGJhY2tTeW1ib2wgPSAnb24nK25hbWUuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkrbmFtZS5zdWJzdHIoMSk7XG4gICAgICAgIGlmIChjYWxsYmFja1N5bWJvbCBpbiBzZWxmKSB7XG4gICAgICAgICAgc2VsZltjYWxsYmFja1N5bWJvbF0oYnVmZmVyLCBzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRhdGFDYWxsYmFjayA9IGZ1bmN0aW9uKG5hbWUsIGNsZWFyKSB7XG4gICAgICAgIHZhciBtYXJrU3ltYm9sID0gbmFtZSsnTWFyayc7XG4gICAgICAgIGlmICghKG1hcmtTeW1ib2wgaW4gc2VsZikpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNsZWFyKSB7XG4gICAgICAgICAgY2FsbGJhY2sobmFtZSwgYnVmZmVyLCBzZWxmW21hcmtTeW1ib2xdLCBidWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICBzZWxmW21hcmtTeW1ib2xdID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhuYW1lLCBidWZmZXIsIHNlbGZbbWFya1N5bWJvbF0sIGkpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmW21hcmtTeW1ib2xdO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGMgPSBidWZmZXJbaV07XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSBTLlBBUlNFUl9VTklOSVRJQUxJWkVEOlxuICAgICAgICByZXR1cm4gaTtcbiAgICAgIGNhc2UgUy5TVEFSVDpcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICBzdGF0ZSA9IFMuU1RBUlRfQk9VTkRBUlk7XG4gICAgICBjYXNlIFMuU1RBUlRfQk9VTkRBUlk6XG4gICAgICAgIGlmIChpbmRleCA9PSBib3VuZGFyeS5sZW5ndGggLSAyKSB7XG4gICAgICAgICAgaWYgKGMgPT0gSFlQSEVOKSB7XG4gICAgICAgICAgICBmbGFncyB8PSBGLkxBU1RfQk9VTkRBUlk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjICE9IENSKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCAtIDEgPT0gYm91bmRhcnkubGVuZ3RoIC0gMikge1xuICAgICAgICAgIGlmIChmbGFncyAmIEYuTEFTVF9CT1VOREFSWSAmJiBjID09IEhZUEhFTil7XG4gICAgICAgICAgICBjYWxsYmFjaygnZW5kJyk7XG4gICAgICAgICAgICBzdGF0ZSA9IFMuRU5EO1xuICAgICAgICAgICAgZmxhZ3MgPSAwO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIShmbGFncyAmIEYuTEFTVF9CT1VOREFSWSkgJiYgYyA9PSBMRikge1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgY2FsbGJhY2soJ3BhcnRCZWdpbicpO1xuICAgICAgICAgICAgc3RhdGUgPSBTLkhFQURFUl9GSUVMRF9TVEFSVDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMgIT0gYm91bmRhcnlbaW5kZXgrMl0pIHtcbiAgICAgICAgICBpbmRleCA9IC0yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjID09IGJvdW5kYXJ5W2luZGV4KzJdKSB7XG4gICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUy5IRUFERVJfRklFTERfU1RBUlQ6XG4gICAgICAgIHN0YXRlID0gUy5IRUFERVJfRklFTEQ7XG4gICAgICAgIG1hcmsoJ2hlYWRlckZpZWxkJyk7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIGNhc2UgUy5IRUFERVJfRklFTEQ6XG4gICAgICAgIGlmIChjID09IENSKSB7XG4gICAgICAgICAgY2xlYXIoJ2hlYWRlckZpZWxkJyk7XG4gICAgICAgICAgc3RhdGUgPSBTLkhFQURFUlNfQUxNT1NUX0RPTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICBpZiAoYyA9PSBIWVBIRU4pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjID09IENPTE9OKSB7XG4gICAgICAgICAgaWYgKGluZGV4ID09IDEpIHtcbiAgICAgICAgICAgIC8vIGVtcHR5IGhlYWRlciBmaWVsZFxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGFDYWxsYmFjaygnaGVhZGVyRmllbGQnLCB0cnVlKTtcbiAgICAgICAgICBzdGF0ZSA9IFMuSEVBREVSX1ZBTFVFX1NUQVJUO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2wgPSBsb3dlcihjKTtcbiAgICAgICAgaWYgKGNsIDwgQSB8fCBjbCA+IFopIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUy5IRUFERVJfVkFMVUVfU1RBUlQ6XG4gICAgICAgIGlmIChjID09IFNQQUNFKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBtYXJrKCdoZWFkZXJWYWx1ZScpO1xuICAgICAgICBzdGF0ZSA9IFMuSEVBREVSX1ZBTFVFO1xuICAgICAgY2FzZSBTLkhFQURFUl9WQUxVRTpcbiAgICAgICAgaWYgKGMgPT0gQ1IpIHtcbiAgICAgICAgICBkYXRhQ2FsbGJhY2soJ2hlYWRlclZhbHVlJywgdHJ1ZSk7XG4gICAgICAgICAgY2FsbGJhY2soJ2hlYWRlckVuZCcpO1xuICAgICAgICAgIHN0YXRlID0gUy5IRUFERVJfVkFMVUVfQUxNT1NUX0RPTkU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFMuSEVBREVSX1ZBTFVFX0FMTU9TVF9ET05FOlxuICAgICAgICBpZiAoYyAhPSBMRikge1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlID0gUy5IRUFERVJfRklFTERfU1RBUlQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTLkhFQURFUlNfQUxNT1NUX0RPTkU6XG4gICAgICAgIGlmIChjICE9IExGKSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjaygnaGVhZGVyc0VuZCcpO1xuICAgICAgICBzdGF0ZSA9IFMuUEFSVF9EQVRBX1NUQVJUO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUy5QQVJUX0RBVEFfU1RBUlQ6XG4gICAgICAgIHN0YXRlID0gUy5QQVJUX0RBVEE7XG4gICAgICAgIG1hcmsoJ3BhcnREYXRhJyk7XG4gICAgICBjYXNlIFMuUEFSVF9EQVRBOlxuICAgICAgICBwcmV2SW5kZXggPSBpbmRleDtcblxuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAvLyBib3llci1tb29yZSBkZXJyaXZlZCBhbGdvcml0aG0gdG8gc2FmZWx5IHNraXAgbm9uLWJvdW5kYXJ5IGRhdGFcbiAgICAgICAgICBpICs9IGJvdW5kYXJ5RW5kO1xuICAgICAgICAgIHdoaWxlIChpIDwgYnVmZmVyTGVuZ3RoICYmICEoYnVmZmVyW2ldIGluIGJvdW5kYXJ5Q2hhcnMpKSB7XG4gICAgICAgICAgICBpICs9IGJvdW5kYXJ5TGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpIC09IGJvdW5kYXJ5RW5kO1xuICAgICAgICAgIGMgPSBidWZmZXJbaV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5kZXggPCBib3VuZGFyeS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoYm91bmRhcnlbaW5kZXhdID09IGMpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBkYXRhQ2FsbGJhY2soJ3BhcnREYXRhJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09IGJvdW5kYXJ5Lmxlbmd0aCkge1xuICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgaWYgKGMgPT0gQ1IpIHtcbiAgICAgICAgICAgIC8vIENSID0gcGFydCBib3VuZGFyeVxuICAgICAgICAgICAgZmxhZ3MgfD0gRi5QQVJUX0JPVU5EQVJZO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PSBIWVBIRU4pIHtcbiAgICAgICAgICAgIC8vIEhZUEhFTiA9IGVuZCBib3VuZGFyeVxuICAgICAgICAgICAgZmxhZ3MgfD0gRi5MQVNUX0JPVU5EQVJZO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4IC0gMSA9PSBib3VuZGFyeS5sZW5ndGgpICB7XG4gICAgICAgICAgaWYgKGZsYWdzICYgRi5QQVJUX0JPVU5EQVJZKSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICBpZiAoYyA9PSBMRikge1xuICAgICAgICAgICAgICAvLyB1bnNldCB0aGUgUEFSVF9CT1VOREFSWSBmbGFnXG4gICAgICAgICAgICAgIGZsYWdzICY9IH5GLlBBUlRfQk9VTkRBUlk7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCdwYXJ0RW5kJyk7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCdwYXJ0QmVnaW4nKTtcbiAgICAgICAgICAgICAgc3RhdGUgPSBTLkhFQURFUl9GSUVMRF9TVEFSVDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChmbGFncyAmIEYuTEFTVF9CT1VOREFSWSkge1xuICAgICAgICAgICAgaWYgKGMgPT0gSFlQSEVOKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCdwYXJ0RW5kJyk7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCdlbmQnKTtcbiAgICAgICAgICAgICAgc3RhdGUgPSBTLkVORDtcbiAgICAgICAgICAgICAgZmxhZ3MgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgIC8vIHdoZW4gbWF0Y2hpbmcgYSBwb3NzaWJsZSBib3VuZGFyeSwga2VlcCBhIGxvb2tiZWhpbmQgcmVmZXJlbmNlXG4gICAgICAgICAgLy8gaW4gY2FzZSBpdCB0dXJucyBvdXQgdG8gYmUgYSBmYWxzZSBsZWFkXG4gICAgICAgICAgbG9va2JlaGluZFtpbmRleC0xXSA9IGM7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldkluZGV4ID4gMCkge1xuICAgICAgICAgIC8vIGlmIG91ciBib3VuZGFyeSB0dXJuZWQgb3V0IHRvIGJlIHJ1YmJpc2gsIHRoZSBjYXB0dXJlZCBsb29rYmVoaW5kXG4gICAgICAgICAgLy8gYmVsb25ncyB0byBwYXJ0RGF0YVxuICAgICAgICAgIGNhbGxiYWNrKCdwYXJ0RGF0YScsIGxvb2tiZWhpbmQsIDAsIHByZXZJbmRleCk7XG4gICAgICAgICAgcHJldkluZGV4ID0gMDtcbiAgICAgICAgICBtYXJrKCdwYXJ0RGF0YScpO1xuXG4gICAgICAgICAgLy8gcmVjb25zaWRlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZXZlbiBzbyBpdCBpbnRlcnJ1cHRlZCB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAvLyBpdCBjb3VsZCBiZSB0aGUgYmVnaW5uaW5nIG9mIGEgbmV3IHNlcXVlbmNlXG4gICAgICAgICAgaS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFMuRU5EOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIGRhdGFDYWxsYmFjaygnaGVhZGVyRmllbGQnKTtcbiAgZGF0YUNhbGxiYWNrKCdoZWFkZXJWYWx1ZScpO1xuICBkYXRhQ2FsbGJhY2soJ3BhcnREYXRhJyk7XG5cbiAgdGhpcy5pbmRleCA9IGluZGV4O1xuICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIHRoaXMuZmxhZ3MgPSBmbGFncztcblxuICByZXR1cm4gbGVuO1xufTtcblxuTXVsdGlwYXJ0UGFyc2VyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oc2VsZiwgbmFtZSkge1xuICAgIHZhciBjYWxsYmFja1N5bWJvbCA9ICdvbicrbmFtZS5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKStuYW1lLnN1YnN0cigxKTtcbiAgICBpZiAoY2FsbGJhY2tTeW1ib2wgaW4gc2VsZikge1xuICAgICAgc2VsZltjYWxsYmFja1N5bWJvbF0oKTtcbiAgICB9XG4gIH07XG4gIGlmICgodGhpcy5zdGF0ZSA9PSBTLkhFQURFUl9GSUVMRF9TVEFSVCAmJiB0aGlzLmluZGV4ID09PSAwKSB8fFxuICAgICAgKHRoaXMuc3RhdGUgPT0gUy5QQVJUX0RBVEEgJiYgdGhpcy5pbmRleCA9PSB0aGlzLmJvdW5kYXJ5Lmxlbmd0aCkpIHtcbiAgICBjYWxsYmFjayh0aGlzLCAncGFydEVuZCcpO1xuICAgIGNhbGxiYWNrKHRoaXMsICdlbmQnKTtcbiAgfSBlbHNlIGlmICh0aGlzLnN0YXRlICE9IFMuRU5EKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcignTXVsdGlwYXJ0UGFyc2VyLmVuZCgpOiBzdHJlYW0gZW5kZWQgdW5leHBlY3RlZGx5OiAnICsgdGhpcy5leHBsYWluKCkpO1xuICB9XG59O1xuXG5NdWx0aXBhcnRQYXJzZXIucHJvdG90eXBlLmV4cGxhaW4gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICdzdGF0ZSA9ICcgKyBNdWx0aXBhcnRQYXJzZXIuc3RhdGVUb1N0cmluZyh0aGlzLnN0YXRlKTtcbn07XG4iLCJ2YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG5cdCwgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gT2N0ZXRQYXJzZXIob3B0aW9ucyl7XG5cdGlmKCEodGhpcyBpbnN0YW5jZW9mIE9jdGV0UGFyc2VyKSkgcmV0dXJuIG5ldyBPY3RldFBhcnNlcihvcHRpb25zKTtcblx0RXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG59XG5cbnV0aWwuaW5oZXJpdHMoT2N0ZXRQYXJzZXIsIEV2ZW50RW1pdHRlcik7XG5cbmV4cG9ydHMuT2N0ZXRQYXJzZXIgPSBPY3RldFBhcnNlcjtcblxuT2N0ZXRQYXJzZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgdGhpcy5lbWl0KCdkYXRhJywgYnVmZmVyKTtcblx0cmV0dXJuIGJ1ZmZlci5sZW5ndGg7XG59O1xuXG5PY3RldFBhcnNlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMuZW1pdCgnZW5kJyk7XG59O1xuIiwiaWYgKGdsb2JhbC5HRU5UTFkpIHJlcXVpcmUgPSBHRU5UTFkuaGlqYWNrKHJlcXVpcmUpO1xuXG4vLyBUaGlzIGlzIGEgYnVmZmVyaW5nIHBhcnNlciwgbm90IHF1aXRlIGFzIG5pY2UgYXMgdGhlIG11bHRpcGFydCBvbmUuXG4vLyBJZiBJIGZpbmQgdGltZSBJJ2xsIHJld3JpdGUgdGhpcyB0byBiZSBmdWxseSBzdHJlYW1pbmcgYXMgd2VsbFxudmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcblxuZnVuY3Rpb24gUXVlcnlzdHJpbmdQYXJzZXIobWF4S2V5cykge1xuICB0aGlzLm1heEtleXMgPSBtYXhLZXlzO1xuICB0aGlzLmJ1ZmZlciA9ICcnO1xufVxuZXhwb3J0cy5RdWVyeXN0cmluZ1BhcnNlciA9IFF1ZXJ5c3RyaW5nUGFyc2VyO1xuXG5RdWVyeXN0cmluZ1BhcnNlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdGhpcy5idWZmZXIgKz0gYnVmZmVyLnRvU3RyaW5nKCdhc2NpaScpO1xuICByZXR1cm4gYnVmZmVyLmxlbmd0aDtcbn07XG5cblF1ZXJ5c3RyaW5nUGFyc2VyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGZpZWxkcyA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMuYnVmZmVyLCAnJicsICc9JywgeyBtYXhLZXlzOiB0aGlzLm1heEtleXMgfSk7XG4gIGZvciAodmFyIGZpZWxkIGluIGZpZWxkcykge1xuICAgIHRoaXMub25GaWVsZChmaWVsZCwgZmllbGRzW2ZpZWxkXSk7XG4gIH1cbiAgdGhpcy5idWZmZXIgPSAnJztcblxuICB0aGlzLm9uRW5kKCk7XG59O1xuXG4iLCIvL2NvbnNvbGUubG9nKFwiISEhISEhISEhISEhISEhISBXQVJOSU5HIFRISVMgSVMgR1VOIDAuNSAhISEhISEhISEhISEhISEhISEhISEhXCIpO1xyXG47KGZ1bmN0aW9uKCl7XHJcblxyXG5cdC8qIFVOQlVJTEQgKi9cclxuXHR2YXIgcm9vdDtcclxuXHRpZih0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKXsgcm9vdCA9IHdpbmRvdyB9XHJcblx0aWYodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIil7IHJvb3QgPSBnbG9iYWwgfVxyXG5cdHJvb3QgPSByb290IHx8IHt9O1xyXG5cdHZhciBjb25zb2xlID0gcm9vdC5jb25zb2xlID0gcm9vdC5jb25zb2xlIHx8IHtsb2c6IGZ1bmN0aW9uKCl7fX07XHJcblx0ZnVuY3Rpb24gcmVxdWlyZShhcmcpe1xyXG5cdFx0cmV0dXJuIGFyZy5zbGljZT8gcmVxdWlyZVtyZXNvbHZlKGFyZyldIDogZnVuY3Rpb24obW9kLCBwYXRoKXtcclxuXHRcdFx0YXJnKG1vZCA9IHtleHBvcnRzOiB7fX0pO1xyXG5cdFx0XHRyZXF1aXJlW3Jlc29sdmUocGF0aCldID0gbW9kLmV4cG9ydHM7XHJcblx0XHR9XHJcblx0XHRmdW5jdGlvbiByZXNvbHZlKHBhdGgpe1xyXG5cdFx0XHRyZXR1cm4gcGF0aC5zcGxpdCgnLycpLnNsaWNlKC0xKS50b1N0cmluZygpLnJlcGxhY2UoJy5qcycsJycpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZih0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKXsgdmFyIGNvbW1vbiA9IG1vZHVsZSB9XHJcblx0LyogVU5CVUlMRCAqL1xyXG5cclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0Ly8gR2VuZXJpYyBqYXZhc2NyaXB0IHV0aWxpdGllcy5cclxuXHRcdHZhciBUeXBlID0ge307XHJcblx0XHRUeXBlLmZucyA9IFR5cGUuZm4gPSB7aXM6IGZ1bmN0aW9uKGZuKXsgcmV0dXJuICghIWZuICYmIGZuIGluc3RhbmNlb2YgRnVuY3Rpb24pIH19XHJcblx0XHRUeXBlLmJpID0ge2lzOiBmdW5jdGlvbihiKXsgcmV0dXJuIChiIGluc3RhbmNlb2YgQm9vbGVhbiB8fCB0eXBlb2YgYiA9PSAnYm9vbGVhbicpIH19XHJcblx0XHRUeXBlLm51bSA9IHtpczogZnVuY3Rpb24obil7IHJldHVybiAhbGlzdF9pcyhuKSAmJiAoKG4gLSBwYXJzZUZsb2F0KG4pICsgMSkgPj0gMCB8fCBJbmZpbml0eSA9PT0gbiB8fCAtSW5maW5pdHkgPT09IG4pIH19XHJcblx0XHRUeXBlLnRleHQgPSB7aXM6IGZ1bmN0aW9uKHQpeyByZXR1cm4gKHR5cGVvZiB0ID09ICdzdHJpbmcnKSB9fVxyXG5cdFx0VHlwZS50ZXh0LmlmeSA9IGZ1bmN0aW9uKHQpe1xyXG5cdFx0XHRpZihUeXBlLnRleHQuaXModCkpeyByZXR1cm4gdCB9XHJcblx0XHRcdGlmKHR5cGVvZiBKU09OICE9PSBcInVuZGVmaW5lZFwiKXsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpIH1cclxuXHRcdFx0cmV0dXJuICh0ICYmIHQudG9TdHJpbmcpPyB0LnRvU3RyaW5nKCkgOiB0O1xyXG5cdFx0fVxyXG5cdFx0VHlwZS50ZXh0LnJhbmRvbSA9IGZ1bmN0aW9uKGwsIGMpe1xyXG5cdFx0XHR2YXIgcyA9ICcnO1xyXG5cdFx0XHRsID0gbCB8fCAyNDsgLy8geW91IGFyZSBub3QgZ29pbmcgdG8gbWFrZSBhIDAgbGVuZ3RoIHJhbmRvbSBudW1iZXIsIHNvIG5vIG5lZWQgdG8gY2hlY2sgdHlwZVxyXG5cdFx0XHRjID0gYyB8fCAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XHJcblx0XHRcdHdoaWxlKGwgPiAwKXsgcyArPSBjLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjLmxlbmd0aCkpOyBsLS0gfVxyXG5cdFx0XHRyZXR1cm4gcztcclxuXHRcdH1cclxuXHRcdFR5cGUudGV4dC5tYXRjaCA9IGZ1bmN0aW9uKHQsIG8peyB2YXIgciA9IGZhbHNlO1xyXG5cdFx0XHR0ID0gdCB8fCAnJztcclxuXHRcdFx0byA9IFR5cGUudGV4dC5pcyhvKT8geyc9Jzogb30gOiBvIHx8IHt9OyAvLyB7J34nLCAnPScsICcqJywgJzwnLCAnPicsICcrJywgJy0nLCAnPycsICchJ30gLy8gaWdub3JlIGNhc2UsIGV4YWN0bHkgZXF1YWwsIGFueXRoaW5nIGFmdGVyLCBsZXhpY2FsbHkgbGFyZ2VyLCBsZXhpY2FsbHkgbGVzc2VyLCBhZGRlZCBpbiwgc3VidGFjdGVkIGZyb20sIHF1ZXN0aW9uYWJsZSBmdXp6eSBtYXRjaCwgYW5kIGVuZHMgd2l0aC5cclxuXHRcdFx0aWYoVHlwZS5vYmouaGFzKG8sJ34nKSl7IHQgPSB0LnRvTG93ZXJDYXNlKCk7IG9bJz0nXSA9IChvWyc9J10gfHwgb1snfiddKS50b0xvd2VyQ2FzZSgpIH1cclxuXHRcdFx0aWYoVHlwZS5vYmouaGFzKG8sJz0nKSl7IHJldHVybiB0ID09PSBvWyc9J10gfVxyXG5cdFx0XHRpZihUeXBlLm9iai5oYXMobywnKicpKXsgaWYodC5zbGljZSgwLCBvWycqJ10ubGVuZ3RoKSA9PT0gb1snKiddKXsgciA9IHRydWU7IHQgPSB0LnNsaWNlKG9bJyonXS5sZW5ndGgpIH0gZWxzZSB7IHJldHVybiBmYWxzZSB9fVxyXG5cdFx0XHRpZihUeXBlLm9iai5oYXMobywnIScpKXsgaWYodC5zbGljZSgtb1snISddLmxlbmd0aCkgPT09IG9bJyEnXSl7IHIgPSB0cnVlIH0gZWxzZSB7IHJldHVybiBmYWxzZSB9fVxyXG5cdFx0XHRpZihUeXBlLm9iai5oYXMobywnKycpKXtcclxuXHRcdFx0XHRpZihUeXBlLmxpc3QubWFwKFR5cGUubGlzdC5pcyhvWycrJ10pPyBvWycrJ10gOiBbb1snKyddXSwgZnVuY3Rpb24obSl7XHJcblx0XHRcdFx0XHRpZih0LmluZGV4T2YobSkgPj0gMCl7IHIgPSB0cnVlIH0gZWxzZSB7IHJldHVybiB0cnVlIH1cclxuXHRcdFx0XHR9KSl7IHJldHVybiBmYWxzZSB9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoVHlwZS5vYmouaGFzKG8sJy0nKSl7XHJcblx0XHRcdFx0aWYoVHlwZS5saXN0Lm1hcChUeXBlLmxpc3QuaXMob1snLSddKT8gb1snLSddIDogW29bJy0nXV0sIGZ1bmN0aW9uKG0pe1xyXG5cdFx0XHRcdFx0aWYodC5pbmRleE9mKG0pIDwgMCl7IHIgPSB0cnVlIH0gZWxzZSB7IHJldHVybiB0cnVlIH1cclxuXHRcdFx0XHR9KSl7IHJldHVybiBmYWxzZSB9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoVHlwZS5vYmouaGFzKG8sJz4nKSl7IGlmKHQgPiBvWyc+J10peyByID0gdHJ1ZSB9IGVsc2UgeyByZXR1cm4gZmFsc2UgfX1cclxuXHRcdFx0aWYoVHlwZS5vYmouaGFzKG8sJzwnKSl7IGlmKHQgPCBvWyc8J10peyByID0gdHJ1ZSB9IGVsc2UgeyByZXR1cm4gZmFsc2UgfX1cclxuXHRcdFx0ZnVuY3Rpb24gZnV6enkodCxmKXsgdmFyIG4gPSAtMSwgaSA9IDAsIGM7IGZvcig7YyA9IGZbaSsrXTspeyBpZighfihuID0gdC5pbmRleE9mKGMsIG4rMSkpKXsgcmV0dXJuIGZhbHNlIH19IHJldHVybiB0cnVlIH0gLy8gdmlhIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTIwNjAxMy9qYXZhc2NyaXB0LWZ1enp5LXNlYXJjaFxyXG5cdFx0XHRpZihUeXBlLm9iai5oYXMobywnPycpKXsgaWYoZnV6enkodCwgb1snPyddKSl7IHIgPSB0cnVlIH0gZWxzZSB7IHJldHVybiBmYWxzZSB9fSAvLyBjaGFuZ2UgbmFtZSFcclxuXHRcdFx0cmV0dXJuIHI7XHJcblx0XHR9XHJcblx0XHRUeXBlLmxpc3QgPSB7aXM6IGZ1bmN0aW9uKGwpeyByZXR1cm4gKGwgaW5zdGFuY2VvZiBBcnJheSkgfX1cclxuXHRcdFR5cGUubGlzdC5zbGl0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xyXG5cdFx0VHlwZS5saXN0LnNvcnQgPSBmdW5jdGlvbihrKXsgLy8gY3JlYXRlcyBhIG5ldyBzb3J0IGZ1bmN0aW9uIGJhc2VkIG9mZiBzb21lIGZpZWxkXHJcblx0XHRcdHJldHVybiBmdW5jdGlvbihBLEIpe1xyXG5cdFx0XHRcdGlmKCFBIHx8ICFCKXsgcmV0dXJuIDAgfSBBID0gQVtrXTsgQiA9IEJba107XHJcblx0XHRcdFx0aWYoQSA8IEIpeyByZXR1cm4gLTEgfWVsc2UgaWYoQSA+IEIpeyByZXR1cm4gMSB9XHJcblx0XHRcdFx0ZWxzZSB7IHJldHVybiAwIH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0VHlwZS5saXN0Lm1hcCA9IGZ1bmN0aW9uKGwsIGMsIF8peyByZXR1cm4gb2JqX21hcChsLCBjLCBfKSB9XHJcblx0XHRUeXBlLmxpc3QuaW5kZXggPSAxOyAvLyBjaGFuZ2UgdGhpcyB0byAwIGlmIHlvdSB3YW50IG5vbi1sb2dpY2FsLCBub24tbWF0aGVtYXRpY2FsLCBub24tbWF0cml4LCBub24tY29udmVuaWVudCBhcnJheSBub3RhdGlvblxyXG5cdFx0VHlwZS5vYmogPSB7aXM6IGZ1bmN0aW9uKG8peyByZXR1cm4gbz8gKG8gaW5zdGFuY2VvZiBPYmplY3QgJiYgby5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykubWF0Y2goL15cXFtvYmplY3QgKFxcdyspXFxdJC8pWzFdID09PSAnT2JqZWN0JyA6IGZhbHNlIH19XHJcblx0XHRUeXBlLm9iai5wdXQgPSBmdW5jdGlvbihvLCBmLCB2KXsgcmV0dXJuIChvfHx7fSlbZl0gPSB2LCBvIH0gXHJcblx0XHRUeXBlLm9iai5oYXMgPSBmdW5jdGlvbihvLCBmKXsgcmV0dXJuIG8gJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGYpIH1cclxuXHRcdFR5cGUub2JqLmRlbCA9IGZ1bmN0aW9uKG8sIGspe1xyXG5cdFx0XHRpZighbyl7IHJldHVybiB9XHJcblx0XHRcdG9ba10gPSBudWxsO1xyXG5cdFx0XHRkZWxldGUgb1trXTtcclxuXHRcdFx0cmV0dXJuIG87XHJcblx0XHR9XHJcblx0XHRUeXBlLm9iai5hcyA9IGZ1bmN0aW9uKG8sIGYsIHYpeyByZXR1cm4gb1tmXSA9IG9bZl0gfHwgKGFyZ3VtZW50cy5sZW5ndGggPj0gMz8gdiA6IHt9KSB9XHJcblx0XHRUeXBlLm9iai5pZnkgPSBmdW5jdGlvbihvKXtcclxuXHRcdFx0aWYob2JqX2lzKG8pKXsgcmV0dXJuIG8gfVxyXG5cdFx0XHR0cnl7byA9IEpTT04ucGFyc2Uobyk7XHJcblx0XHRcdH1jYXRjaChlKXtvPXt9fTtcclxuXHRcdFx0cmV0dXJuIG87XHJcblx0XHR9XHJcblx0XHQ7KGZ1bmN0aW9uKCl7IHZhciB1O1xyXG5cdFx0XHRmdW5jdGlvbiBtYXAodixmKXtcclxuXHRcdFx0XHRpZihvYmpfaGFzKHRoaXMsZikgJiYgdSAhPT0gdGhpc1tmXSl7IHJldHVybiB9XHJcblx0XHRcdFx0dGhpc1tmXSA9IHY7XHJcblx0XHRcdH1cclxuXHRcdFx0VHlwZS5vYmoudG8gPSBmdW5jdGlvbihmcm9tLCB0byl7XHJcblx0XHRcdFx0dG8gPSB0byB8fCB7fTtcclxuXHRcdFx0XHRvYmpfbWFwKGZyb20sIG1hcCwgdG8pO1xyXG5cdFx0XHRcdHJldHVybiB0bztcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdFR5cGUub2JqLmNvcHkgPSBmdW5jdGlvbihvKXsgLy8gYmVjYXVzZSBodHRwOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MDMyODIyNDAyNS9odHRwOi8vanNwZXJmLmNvbS9jbG9uaW5nLWFuLW9iamVjdC8yXHJcblx0XHRcdHJldHVybiAhbz8gbyA6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobykpOyAvLyBpcyBzaG9ja2luZ2x5IGZhc3RlciB0aGFuIGFueXRoaW5nIGVsc2UsIGFuZCBvdXIgZGF0YSBoYXMgdG8gYmUgYSBzdWJzZXQgb2YgSlNPTiBhbnl3YXlzIVxyXG5cdFx0fVxyXG5cdFx0OyhmdW5jdGlvbigpe1xyXG5cdFx0XHRmdW5jdGlvbiBlbXB0eSh2LGkpeyB2YXIgbiA9IHRoaXMubjtcclxuXHRcdFx0XHRpZihuICYmIChpID09PSBuIHx8IChvYmpfaXMobikgJiYgb2JqX2hhcyhuLCBpKSkpKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRpZihpKXsgcmV0dXJuIHRydWUgfVxyXG5cdFx0XHR9XHJcblx0XHRcdFR5cGUub2JqLmVtcHR5ID0gZnVuY3Rpb24obywgbil7XHJcblx0XHRcdFx0aWYoIW8peyByZXR1cm4gdHJ1ZSB9XHJcblx0XHRcdFx0cmV0dXJuIG9ial9tYXAobyxlbXB0eSx7bjpufSk/IGZhbHNlIDogdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0ZnVuY3Rpb24gdChrLHYpe1xyXG5cdFx0XHRcdGlmKDIgPT09IGFyZ3VtZW50cy5sZW5ndGgpe1xyXG5cdFx0XHRcdFx0dC5yID0gdC5yIHx8IHt9O1xyXG5cdFx0XHRcdFx0dC5yW2tdID0gdjtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9IHQuciA9IHQuciB8fCBbXTtcclxuXHRcdFx0XHR0LnIucHVzaChrKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0VHlwZS5vYmoubWFwID0gZnVuY3Rpb24obCwgYywgXyl7XHJcblx0XHRcdFx0dmFyIHUsIGkgPSAwLCB4LCByLCBsbCwgbGxlLCBmID0gZm5faXMoYyk7XHJcblx0XHRcdFx0dC5yID0gbnVsbDtcclxuXHRcdFx0XHRpZihPYmplY3Qua2V5cyAmJiBvYmpfaXMobCkpe1xyXG5cdFx0XHRcdFx0bGwgPSBPYmplY3Qua2V5cyhsKTsgbGxlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYobGlzdF9pcyhsKSB8fCBsbCl7XHJcblx0XHRcdFx0XHR4ID0gKGxsIHx8IGwpLmxlbmd0aDtcclxuXHRcdFx0XHRcdGZvcig7aSA8IHg7IGkrKyl7XHJcblx0XHRcdFx0XHRcdHZhciBpaSA9IChpICsgVHlwZS5saXN0LmluZGV4KTtcclxuXHRcdFx0XHRcdFx0aWYoZil7XHJcblx0XHRcdFx0XHRcdFx0ciA9IGxsZT8gYy5jYWxsKF8gfHwgdGhpcywgbFtsbFtpXV0sIGxsW2ldLCB0KSA6IGMuY2FsbChfIHx8IHRoaXMsIGxbaV0sIGlpLCB0KTtcclxuXHRcdFx0XHRcdFx0XHRpZihyICE9PSB1KXsgcmV0dXJuIHIgfVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vaWYoVHlwZS50ZXN0LmlzKGMsbFtpXSkpeyByZXR1cm4gaWkgfSAvLyBzaG91bGQgaW1wbGVtZW50IGRlZXAgZXF1YWxpdHkgdGVzdGluZyFcclxuXHRcdFx0XHRcdFx0XHRpZihjID09PSBsW2xsZT8gbGxbaV0gOiBpXSl7IHJldHVybiBsbD8gbGxbaV0gOiBpaSB9IC8vIHVzZSB0aGlzIGZvciBub3dcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRmb3IoaSBpbiBsKXtcclxuXHRcdFx0XHRcdFx0aWYoZil7XHJcblx0XHRcdFx0XHRcdFx0aWYob2JqX2hhcyhsLGkpKXtcclxuXHRcdFx0XHRcdFx0XHRcdHIgPSBfPyBjLmNhbGwoXywgbFtpXSwgaSwgdCkgOiBjKGxbaV0sIGksIHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYociAhPT0gdSl7IHJldHVybiByIH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly9pZihhLnRlc3QuaXMoYyxsW2ldKSl7IHJldHVybiBpIH0gLy8gc2hvdWxkIGltcGxlbWVudCBkZWVwIGVxdWFsaXR5IHRlc3RpbmchXHJcblx0XHRcdFx0XHRcdFx0aWYoYyA9PT0gbFtpXSl7IHJldHVybiBpIH0gLy8gdXNlIHRoaXMgZm9yIG5vd1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmPyB0LnIgOiBUeXBlLmxpc3QuaW5kZXg/IDAgOiAtMTtcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdFR5cGUudGltZSA9IHt9O1xyXG5cdFx0VHlwZS50aW1lLmlzID0gZnVuY3Rpb24odCl7IHJldHVybiB0PyB0IGluc3RhbmNlb2YgRGF0ZSA6ICgrbmV3IERhdGUoKS5nZXRUaW1lKCkpIH1cclxuXHJcblx0XHR2YXIgZm5faXMgPSBUeXBlLmZuLmlzO1xyXG5cdFx0dmFyIGxpc3RfaXMgPSBUeXBlLmxpc3QuaXM7XHJcblx0XHR2YXIgb2JqID0gVHlwZS5vYmosIG9ial9pcyA9IG9iai5pcywgb2JqX2hhcyA9IG9iai5oYXMsIG9ial9tYXAgPSBvYmoubWFwO1xyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBUeXBlO1xyXG5cdH0pKHJlcXVpcmUsICcuL3R5cGUnKTtcclxuXHRcdFxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHQvLyBPbiBldmVudCBlbWl0dGVyIGdlbmVyaWMgamF2YXNjcmlwdCB1dGlsaXR5LlxyXG5cdFx0ZnVuY3Rpb24gU2NvcGUoKXtcclxuXHRcdFx0ZnVuY3Rpb24gT24odGFnLCBhcmcsIGFzLCBlYXMsIHNraXApe1xyXG5cdFx0XHRcdHZhciBjdHggPSB0aGlzLCBvbnMgPSBjdHgub25zIHx8IChjdHgub25zID0ge30pLCBvbiA9IG9uc1t0YWddIHx8IChvbnNbdGFnXSA9IHtzOiBbXX0pLCBhY3QsIG1lbSwgTyA9IE9uLm9ucztcclxuXHRcdFx0XHRpZighYXJnKXtcclxuXHRcdFx0XHRcdGlmKDEgPT09IGFyZ3VtZW50cy5sZW5ndGgpeyAvLyBQZXJmb3JtYW5jZSBkcm9wcyBzaWduaWZpY2FudGx5IGV2ZW4gdGhvdWdoIGBhcmd1bWVudHMubGVuZ3RoYCBzaG91bGQgYmUgb2theSB0byB1c2UuXHJcblx0XHRcdFx0XHRcdHJldHVybiBvbjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoYXJnIGluc3RhbmNlb2YgRnVuY3Rpb24pe1xyXG5cdFx0XHRcdFx0YWN0ID0gbmV3IEFjdCh0YWcsIGFyZywgYXMsIG9uLCBjdHgpO1xyXG5cdFx0XHRcdFx0aWYoTyAmJiBPLmV2ZW50ICYmIGN0eCAhPT0gT24pe1xyXG5cdFx0XHRcdFx0XHRPbi5vbignZXZlbnQnLCBhY3QpO1xyXG5cdFx0XHRcdFx0XHRpZihub29wID09PSBhY3QuZm4pe1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBhY3Q7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYoLTEgPCBhY3QuaSl7IHJldHVybiBhY3QgfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0b24ucy5wdXNoKGFjdCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gYWN0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgcHJveHk7XHJcblx0XHRcdFx0aWYoTyAmJiBPLmVtaXQgJiYgY3R4ICE9PSBPbil7XHJcblx0XHRcdFx0XHR2YXIgZXYgPSB7dGFnOiB0YWcsIGFyZzogYXJnLCBvbjogb24sIGN0eDogY3R4fSwgdTtcclxuXHRcdFx0XHRcdE9uLm9uKCdlbWl0JywgZXYpO1xyXG5cdFx0XHRcdFx0aWYodSA9PT0gZXYuYXJnKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdGFyZyA9IGV2LmFyZztcclxuXHRcdFx0XHRcdHByb3h5ID0gZXYucHJveHk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9uLmFyZyA9IGFyZztcclxuXHRcdFx0XHRvbi5lbmQgPSBhcztcclxuXHRcdFx0XHRvbi5hcyA9IGVhcztcclxuXHRcdFx0XHR2YXIgaSA9IDAsIGFjdHMgPSBvbi5zLCBsID0gYWN0cy5sZW5ndGgsIGFyciA9IChhcmcgaW5zdGFuY2VvZiBBcnJheSksIGdhcCwgb2ZmLCBhY3Q7XHJcblx0XHRcdFx0Zm9yKDsgaSA8IGw7IGkrKyl7IGFjdCA9IGFjdHNbaV07XHJcblx0XHRcdFx0XHRpZihza2lwKXtcclxuXHRcdFx0XHRcdFx0aWYoc2tpcCA9PT0gYWN0KXtcclxuXHRcdFx0XHRcdFx0XHRza2lwID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgdG1wID0gYWN0LnRtcCA9IHt9O1xyXG5cdFx0XHRcdFx0aWYoIWFycil7XHJcblx0XHRcdFx0XHRcdGFjdC5mbi5jYWxsKGFjdC5hcywgYXJnLCBwcm94eXx8YWN0KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFjdC5mbi5hcHBseShhY3QuYXMsIGFyZy5jb25jYXQocHJveHl8fGFjdCkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYobm9vcCA9PT0gYWN0LmZuKXtcclxuXHRcdFx0XHRcdFx0b2ZmID0gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRtcC5oYWx0KXtcclxuXHRcdFx0XHRcdFx0aWYoMSA9PT0gdG1wLmhhbHQpe1xyXG5cdFx0XHRcdFx0XHRcdGdhcCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG9mZil7XHJcblx0XHRcdFx0XHR2YXIgc3RpbGwgPSBbXTtcclxuXHRcdFx0XHRcdGZvcihpID0gMDsgaSA8IGw7IGkrKyl7IGFjdCA9IGFjdHNbaV07XHJcblx0XHRcdFx0XHRcdGlmKG5vb3AgIT09IGFjdC5mbil7XHJcblx0XHRcdFx0XHRcdFx0c3RpbGwucHVzaChhY3QpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRvbi5zID0gc3RpbGw7XHJcblx0XHRcdFx0XHRpZigwID09PSBzdGlsbC5sZW5ndGgpe1xyXG5cdFx0XHRcdFx0XHRkZWxldGUgb25zW3RhZ107XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCFnYXAgJiYgYXMgJiYgYXMgaW5zdGFuY2VvZiBGdW5jdGlvbil7XHJcblx0XHRcdFx0XHRhcy5jYWxsKGVhcywgYXJnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdE9uLm9uID0gT247XHJcblx0XHRcdE9uLnNjb3BlID0gU2NvcGU7XHJcblx0XHRcdHJldHVybiBPbjtcclxuXHRcdH1cclxuXHRcdGZ1bmN0aW9uIEFjdCh0YWcsIGZuLCBhcywgb24sIGN0eCl7XHJcblx0XHRcdHRoaXMudGFnID0gdGFnO1xyXG5cdFx0XHR0aGlzLmZuID0gZm47XHJcblx0XHRcdHRoaXMuYXMgPSBhcztcclxuXHRcdFx0dGhpcy5vbiA9IG9uO1xyXG5cdFx0XHR0aGlzLmN0eCA9IGN0eDtcclxuXHRcdH1cclxuXHRcdEFjdC5jaGFpbiA9IEFjdC5wcm90b3R5cGU7XHJcblx0XHRBY3QuY2hhaW4uc3R1biA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKCF0aGlzLnRtcCl7IHRoaXMudG1wID0ge30gfVxyXG5cdFx0XHRpZighYXJndW1lbnRzLmxlbmd0aCl7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMudG1wLmhhbHQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBhY3QgPSB0aGlzLCBvbiA9IGFjdC5vbiwgaGFsdCA9IHtcclxuXHRcdFx0XHRyZXN1bWU6IGZ1bmN0aW9uKGFyZyl7XHJcblx0XHRcdFx0XHQvKlxyXG5cdFx0XHRcdFx0XHRUT0RPOiBCVUchXHJcblx0XHRcdFx0XHRcdFRPRE86IEJVRyFcclxuXHRcdFx0XHRcdFx0VE9ETzogQlVHIVxyXG5cdFx0XHRcdFx0XHRUT0RPOiBCVUchXHJcblx0XHRcdFx0XHRcdFRPRE86IEJVRyFcclxuXHRcdFx0XHRcdFx0V2h5IGRvZXMgb3VyIG1hcCBub3QgZ2V0IHVwZGF0ZXM/XHJcblx0XHRcdFx0XHRcdFBvcnRpb25zIGRvIGlmIHdlIGRvIG5vdCB1c2UgLmtleSB0byBzYXZlIHRoZSBpbml0aWFsIGRhdGEuXHJcblx0XHRcdFx0XHRcdFdoaWNoIG1ha2VzIG1lIHRoaW5rIGl0IHJlbGF0ZXMgdG8gcHNldWRvLCBob3dldmVyIGl0IGRvZXNuJ3QgZnVsbHkgd29yayBpZiBJIGdldCByaWQgb2YgdGhhdC5cclxuXHRcdFx0XHRcdFx0V2h5IHdoeSB3aHk/IFByb2JhYmx5IHNvbWV0aGluZyB0byBkbyB3aXRoIG1hcCBldmVudHMgYW5kIG1lbW9pemluZz9cclxuXHRcdFx0XHRcdCovXHJcblx0XHRcdFx0XHRhY3QuY3R4Lm9uKGFjdC50YWcsIChhcmd1bWVudHMubGVuZ3RoP1xyXG5cdFx0XHRcdFx0XHQxID09PSBhcmd1bWVudHMubGVuZ3RoPyBhcmcgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXHJcblx0XHRcdFx0XHQ6IGhhbHQuYXJnKSwgaGFsdC5lbmQsIGhhbHQuYXMsIGFjdCk7XHJcblx0XHRcdFx0fSwgYXJnOiBvbi5hcmcsXHJcblx0XHRcdFx0ZW5kOiBvbi5lbmQsXHJcblx0XHRcdFx0YXM6IG9uLmFzXHJcblx0XHRcdH07XHJcblx0XHRcdGFjdC50bXAuaGFsdCA9IDE7XHJcblx0XHRcdHJldHVybiBoYWx0LnJlc3VtZTtcclxuXHRcdH1cclxuXHRcdEFjdC5jaGFpbi5vZmYgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR0aGlzLmZuID0gbm9vcDtcclxuXHRcdH1cclxuXHRcdEFjdC5jaGFpbi5lbWl0ID0gZnVuY3Rpb24oYXJnKXtcclxuXHRcdFx0dmFyIGFjdCA9IHRoaXMsIGFyciA9IChhcmcgaW5zdGFuY2VvZiBBcnJheSk7XHJcblx0XHRcdGlmKCFhcnIpe1xyXG5cdFx0XHRcdGFjdC5mbi5jYWxsKGFjdC5hcywgYXJnLCBhY3QpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFjdC5mbi5hcHBseShhY3QuYXMsIGFyZy5jb25jYXQoYWN0KSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGZ1bmN0aW9uIG5vb3AoKXt9O1xyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBTY29wZSgpO1xyXG5cdH0pKHJlcXVpcmUsICcuL29uJyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHR2YXIgT24gPSByZXF1aXJlKCcuL29uJyk7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIENoYWluKGNyZWF0ZSwgb3B0KXtcclxuXHRcdFx0b3B0ID0gb3B0IHx8IHt9O1xyXG5cdFx0XHRvcHQuaWQgPSBvcHQuaWQgfHwgJyMnO1xyXG5cdFx0XHRvcHQucmlkID0gb3B0LnJpZCB8fCAnQCc7XHJcblx0XHRcdG9wdC51dWlkID0gb3B0LnV1aWQgfHwgZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRyZXR1cm4gKCtuZXcgRGF0ZSgpKSArIE1hdGgucmFuZG9tKCk7XHJcblx0XHRcdH07XHJcblx0XHRcdHZhciBvbiA9IE9uLnNjb3BlKCk7XHJcblxyXG5cdFx0XHRvbi5zdHVuID0gZnVuY3Rpb24oY2hhaW4sIGZuLCBhcyl7XHJcblx0XHRcdFx0dmFyIHJlcyA9IGZ1bmN0aW9uKG4pe1xyXG5cdFx0XHRcdFx0aWYoMSA9PT0gbil7XHJcblx0XHRcdFx0XHRcdGF0LnN0dW4uc2tpcCA9IDE7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKGF0LnN0dW4gPT09IHN0dW4pe1xyXG5cdFx0XHRcdFx0XHRkZWxldGUgYXQuc3R1bjtcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0b2ZmID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHZhciBpID0gMCwgcSA9IHJlcy5xdWV1ZSwgbCA9IHEubGVuZ3RoLCBjLCB2O1xyXG5cdFx0XHRcdFx0Zm9yKGk7IGkgPCBsOyBpKyspeyB2ID0gcVtpXTtcclxuXHRcdFx0XHRcdFx0YyA9IHZbMF07XHJcblx0XHRcdFx0XHRcdHYgPSB2WzFdO1xyXG5cdFx0XHRcdFx0XHRjLm9uKCdpbicsIHYuZ2V0LCB2KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBhdCA9IGNoYWluLl8sIG9mZiwgc3R1biA9IGF0LnN0dW4gPSBmdW5jdGlvbihhcmcpe1xyXG5cdFx0XHRcdFx0aWYob2ZmKXtcclxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuc3R1bjtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoYXQuc3R1bi5za2lwKXtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGF0LnN0dW4uc2tpcCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmVzLnF1ZXVlLnB1c2goW3RoaXMsIGFyZ10pO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJlcy5xdWV1ZSA9IFtdO1xyXG5cdFx0XHRcdHJldHVybiByZXM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBhc2sgPSBvbi5hc2sgPSBmdW5jdGlvbihjYiwgYXMpe1xyXG5cdFx0XHRcdGlmKCFhc2sub24peyBhc2sub24gPSBPbi5zY29wZSgpIH1cclxuXHRcdFx0XHR2YXIgaWQgPSBvcHQudXVpZCgpO1xyXG5cdFx0XHRcdGlmKGNiKXsgYXNrLm9uKGlkLCBjYiwgYXMpIH1cclxuXHRcdFx0XHRyZXR1cm4gaWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0YXNrLl8gPSBvcHQuaWQ7XHJcblx0XHRcdG9uLmFjayA9IGZ1bmN0aW9uKGF0LCByZXBseSl7XHJcblx0XHRcdFx0aWYoIWF0IHx8ICFyZXBseSB8fCAhYXNrLm9uKXsgcmV0dXJuIH1cclxuXHRcdFx0XHR2YXIgaWQgPSBhdFtvcHQuaWRdIHx8IGF0O1xyXG5cdFx0XHRcdGFzay5vbihpZCwgcmVwbHkpO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdG9uLmFjay5fID0gb3B0LnJpZDtcclxuXHRcdFx0LypcclxuXHRcdFx0b24ub24oJ2V2ZW50JywgZnVuY3Rpb24gZXZlbnQoYWN0KXtcclxuXHRcdFx0XHR2YXIgbGFzdCA9IGFjdC5vbi5sYXN0LCB0bXA7XHJcblx0XHRcdFx0aWYobGFzdCl7XHJcblx0XHRcdFx0XHRpZihsYXN0IGluc3RhbmNlb2YgQXJyYXkpe1xyXG5cdFx0XHRcdFx0XHRhY3QuZm4uYXBwbHkoYWN0LmFzLCBsYXN0LmNvbmNhdChhY3QpKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFjdC5mbi5jYWxsKGFjdC5hcywgbGFzdCwgYWN0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKGxhc3QgIT09IGFjdC5vbi5sYXN0KXtcclxuXHRcdFx0XHRcdFx0ZXZlbnQoYWN0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pOyovXHJcblxyXG5cdFx0XHRvbi5vbignZXZlbnQnLCBmdW5jdGlvbiBldmVudChhY3Qpe1xyXG5cdFx0XHRcdHZhciBsYXN0ID0gYWN0Lm9uLmxhc3QsIHRtcDtcclxuXHRcdFx0XHRpZihsYXN0KXtcclxuXHRcdFx0XHRcdGlmKGFjdC5vbi5tYXApe1xyXG5cdFx0XHRcdFx0XHRHdW4ub2JqLm1hcChhY3Qub24ubWFwLCBmdW5jdGlvbih2LGYpeyAvLyBUT0RPOiBCVUchIEd1biBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgbW9kdWxlLlxyXG5cdFx0XHRcdFx0XHRcdC8vZW1pdCh2WzBdLCBhY3QsIGV2ZW50LCB2WzFdKTsgLy8gYmVsb3cgZW5hYmxlcyBtb3JlIGNvbnRyb2xcclxuXHRcdFx0XHRcdFx0XHRlbWl0KHZbMV0sIGFjdCwgZXZlbnQsIHZbMl0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGVtaXQobGFzdCwgYWN0LCBldmVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihsYXN0ICE9PSBhY3Qub24ubGFzdCl7XHJcblx0XHRcdFx0XHRcdGV2ZW50KGFjdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZnVuY3Rpb24gZW1pdChsYXN0LCBhY3QsIGV2ZW50LCBldil7XHJcblx0XHRcdFx0aWYobGFzdCBpbnN0YW5jZW9mIEFycmF5KXtcclxuXHRcdFx0XHRcdGFjdC5mbi5hcHBseShhY3QuYXMsIGxhc3QuY29uY2F0KGV2fHxhY3QpKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YWN0LmZuLmNhbGwoYWN0LmFzLCBsYXN0LCBldnx8YWN0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG9uLm9uKCdlbWl0JywgZnVuY3Rpb24oZXYpe1xyXG5cdFx0XHRcdGlmKGV2Lm9uLm1hcCl7XHJcblx0XHRcdFx0XHQvKlxyXG5cdFx0XHRcdFx0ZXYuaWQgPSBldi5pZCB8fCBHdW4udGV4dC5yYW5kb20oNik7XHJcblx0XHRcdFx0XHRldi5vbi5tYXBbZXYuaWRdID0gZXYuYXJnO1xyXG5cdFx0XHRcdFx0ZXYucHJveHkgPSBldi5hcmdbMV07XHJcblx0XHRcdFx0XHRldi5hcmcgPSBldi5hcmdbMF07XHJcblx0XHRcdFx0XHQqLyAvLyBiZWxvdyBnaXZlcyBtb3JlIGNvbnRyb2wuXHJcblx0XHRcdFx0XHRldi5vbi5tYXBbZXYuYXJnWzBdXSA9IGV2LmFyZztcclxuXHRcdFx0XHRcdGV2LnByb3h5ID0gZXYuYXJnWzJdO1xyXG5cdFx0XHRcdFx0ZXYuYXJnID0gZXYuYXJnWzFdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRldi5vbi5sYXN0ID0gZXYuYXJnO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIG9uO1xyXG5cdFx0fVxyXG5cdFx0LypcclxuXHRcdGZ1bmN0aW9uIGJhY2t3YXJkKHNjb3BlLCBldil7IHZhciB0bXA7XHJcblx0XHRcdGlmKCFzY29wZSB8fCAhc2NvcGUub24peyByZXR1cm4gfVxyXG5cdFx0XHQvL2lmKHNjb3BlLm9uKCdiYWNrJykubGVuZ3RoKXtcclxuXHRcdFx0aWYoKHRtcCA9IHNjb3BlLm9ucykgJiYgKHRtcCA9IHRtcFtldl0pICYmIHRtcC5zLmxlbmd0aCl7XHJcblx0XHRcdFx0cmV0dXJuIHNjb3BlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBiYWNrd2FyZCgoc2NvcGUuYmFja3x8YmFja3dhcmQpLl8sIGV2KTtcclxuXHRcdH1cclxuXHRcdCovXHJcblx0XHRtb2R1bGUuZXhwb3J0cyA9IENoYWluO1xyXG5cdH0pKHJlcXVpcmUsICcuL29uaWZ5Jyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHQvLyBHZW5lcmljIGphdmFzY3JpcHQgc2NoZWR1bGVyIHV0aWxpdHkuXHJcblx0XHR2YXIgVHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xyXG5cdFx0ZnVuY3Rpb24gcyhzdGF0ZSwgY2IsIHRpbWUpeyAvLyBtYXliZSB1c2UgbHJ1LWNhY2hlP1xyXG5cdFx0XHRzLnRpbWUgPSB0aW1lIHx8IEd1bi50aW1lLmlzO1xyXG5cdFx0XHRzLndhaXRpbmcucHVzaCh7d2hlbjogc3RhdGUsIGV2ZW50OiBjYiB8fCBmdW5jdGlvbigpe319KTtcclxuXHRcdFx0aWYocy5zb29uZXN0IDwgc3RhdGUpeyByZXR1cm4gfVxyXG5cdFx0XHRzLnNldChzdGF0ZSk7XHJcblx0XHR9XHJcblx0XHRzLndhaXRpbmcgPSBbXTtcclxuXHRcdHMuc29vbmVzdCA9IEluZmluaXR5O1xyXG5cdFx0cy5zb3J0ID0gVHlwZS5saXN0LnNvcnQoJ3doZW4nKTtcclxuXHRcdHMuc2V0ID0gZnVuY3Rpb24oZnV0dXJlKXtcclxuXHRcdFx0aWYoSW5maW5pdHkgPD0gKHMuc29vbmVzdCA9IGZ1dHVyZSkpeyByZXR1cm4gfVxyXG5cdFx0XHR2YXIgbm93ID0gcy50aW1lKCk7XHJcblx0XHRcdGZ1dHVyZSA9IChmdXR1cmUgPD0gbm93KT8gMCA6IChmdXR1cmUgLSBub3cpO1xyXG5cdFx0XHRjbGVhclRpbWVvdXQocy5pZCk7XHJcblx0XHRcdHMuaWQgPSBzZXRUaW1lb3V0KHMuY2hlY2ssIGZ1dHVyZSk7XHJcblx0XHR9XHJcblx0XHRzLmVhY2ggPSBmdW5jdGlvbih3YWl0LCBpLCBtYXApe1xyXG5cdFx0XHR2YXIgY3R4ID0gdGhpcztcclxuXHRcdFx0aWYoIXdhaXQpeyByZXR1cm4gfVxyXG5cdFx0XHRpZih3YWl0LndoZW4gPD0gY3R4Lm5vdyl7XHJcblx0XHRcdFx0aWYod2FpdC5ldmVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgd2FpdC5ldmVudCgpIH0sMCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGN0eC5zb29uZXN0ID0gKGN0eC5zb29uZXN0IDwgd2FpdC53aGVuKT8gY3R4LnNvb25lc3QgOiB3YWl0LndoZW47XHJcblx0XHRcdFx0bWFwKHdhaXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRzLmNoZWNrID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIGN0eCA9IHtub3c6IHMudGltZSgpLCBzb29uZXN0OiBJbmZpbml0eX07XHJcblx0XHRcdHMud2FpdGluZy5zb3J0KHMuc29ydCk7XHJcblx0XHRcdHMud2FpdGluZyA9IFR5cGUubGlzdC5tYXAocy53YWl0aW5nLCBzLmVhY2gsIGN0eCkgfHwgW107XHJcblx0XHRcdHMuc2V0KGN0eC5zb29uZXN0KTtcclxuXHRcdH1cclxuXHRcdG1vZHVsZS5leHBvcnRzID0gcztcclxuXHR9KShyZXF1aXJlLCAnLi9zY2hlZHVsZScpO1xyXG5cclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0LyogQmFzZWQgb24gdGhlIEh5cG90aGV0aWNhbCBBbW5lc2lhIE1hY2hpbmUgdGhvdWdodCBleHBlcmltZW50ICovXHJcblx0XHRmdW5jdGlvbiBIQU0obWFjaGluZVN0YXRlLCBpbmNvbWluZ1N0YXRlLCBjdXJyZW50U3RhdGUsIGluY29taW5nVmFsdWUsIGN1cnJlbnRWYWx1ZSl7XHJcblx0XHRcdGlmKG1hY2hpbmVTdGF0ZSA8IGluY29taW5nU3RhdGUpe1xyXG5cdFx0XHRcdHJldHVybiB7ZGVmZXI6IHRydWV9OyAvLyB0aGUgaW5jb21pbmcgdmFsdWUgaXMgb3V0c2lkZSB0aGUgYm91bmRhcnkgb2YgdGhlIG1hY2hpbmUncyBzdGF0ZSwgaXQgbXVzdCBiZSByZXByb2Nlc3NlZCBpbiBhbm90aGVyIHN0YXRlLlxyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGluY29taW5nU3RhdGUgPCBjdXJyZW50U3RhdGUpe1xyXG5cdFx0XHRcdHJldHVybiB7aGlzdG9yaWNhbDogdHJ1ZX07IC8vIHRoZSBpbmNvbWluZyB2YWx1ZSBpcyB3aXRoaW4gdGhlIGJvdW5kYXJ5IG9mIHRoZSBtYWNoaW5lJ3Mgc3RhdGUsIGJ1dCBub3Qgd2l0aGluIHRoZSByYW5nZS5cclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihjdXJyZW50U3RhdGUgPCBpbmNvbWluZ1N0YXRlKXtcclxuXHRcdFx0XHRyZXR1cm4ge2NvbnZlcmdlOiB0cnVlLCBpbmNvbWluZzogdHJ1ZX07IC8vIHRoZSBpbmNvbWluZyB2YWx1ZSBpcyB3aXRoaW4gYm90aCB0aGUgYm91bmRhcnkgYW5kIHRoZSByYW5nZSBvZiB0aGUgbWFjaGluZSdzIHN0YXRlLlxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGluY29taW5nU3RhdGUgPT09IGN1cnJlbnRTdGF0ZSl7XHJcblx0XHRcdFx0aWYoaW5jb21pbmdWYWx1ZSA9PT0gY3VycmVudFZhbHVlKXsgLy8gTm90ZTogd2hpbGUgdGhlc2UgYXJlIHByYWN0aWNhbGx5IHRoZSBzYW1lLCB0aGUgZGVsdGFzIGNvdWxkIGJlIHRlY2huaWNhbGx5IGRpZmZlcmVudFxyXG5cdFx0XHRcdFx0cmV0dXJuIHtzdGF0ZTogdHJ1ZX07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8qXHJcblx0XHRcdFx0XHRUaGUgZm9sbG93aW5nIGlzIGEgbmFpdmUgaW1wbGVtZW50YXRpb24sIGJ1dCB3aWxsIGFsd2F5cyB3b3JrLlxyXG5cdFx0XHRcdFx0TmV2ZXIgY2hhbmdlIGl0IHVubGVzcyB5b3UgaGF2ZSBzcGVjaWZpYyBuZWVkcyB0aGF0IGFic29sdXRlbHkgcmVxdWlyZSBpdC5cclxuXHRcdFx0XHRcdElmIGNoYW5nZWQsIHlvdXIgZGF0YSB3aWxsIGRpdmVyZ2UgdW5sZXNzIHlvdSBndWFyYW50ZWUgZXZlcnkgcGVlcidzIGFsZ29yaXRobSBoYXMgYWxzbyBiZWVuIGNoYW5nZWQgdG8gYmUgdGhlIHNhbWUuXHJcblx0XHRcdFx0XHRBcyBhIHJlc3VsdCwgaXQgaXMgaGlnaGx5IGRpc2NvdXJhZ2VkIHRvIG1vZGlmeSBkZXNwaXRlIHRoZSBmYWN0IHRoYXQgaXQgaXMgbmFpdmUsXHJcblx0XHRcdFx0XHRiZWNhdXNlIGNvbnZlcmdlbmNlIChkYXRhIGludGVncml0eSkgaXMgZ2VuZXJhbGx5IG1vcmUgaW1wb3J0YW50LlxyXG5cdFx0XHRcdFx0QW55IGRpZmZlcmVuY2UgaW4gdGhpcyBhbGdvcml0aG0gbXVzdCBiZSBnaXZlbiBhIG5ldyBhbmQgZGlmZmVyZW50IG5hbWUuXHJcblx0XHRcdFx0Ki9cclxuXHRcdFx0XHRpZihMZXhpY2FsKGluY29taW5nVmFsdWUpIDwgTGV4aWNhbChjdXJyZW50VmFsdWUpKXsgLy8gTGV4aWNhbCBvbmx5IHdvcmtzIG9uIHNpbXBsZSB2YWx1ZSB0eXBlcyFcclxuXHRcdFx0XHRcdHJldHVybiB7Y29udmVyZ2U6IHRydWUsIGN1cnJlbnQ6IHRydWV9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihMZXhpY2FsKGN1cnJlbnRWYWx1ZSkgPCBMZXhpY2FsKGluY29taW5nVmFsdWUpKXsgLy8gTGV4aWNhbCBvbmx5IHdvcmtzIG9uIHNpbXBsZSB2YWx1ZSB0eXBlcyFcclxuXHRcdFx0XHRcdHJldHVybiB7Y29udmVyZ2U6IHRydWUsIGluY29taW5nOiB0cnVlfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHtlcnI6IFwieW91IGhhdmUgbm90IHByb3Blcmx5IGhhbmRsZWQgcmVjdXJzaW9uIHRocm91Z2ggeW91ciBkYXRhIG9yIGZpbHRlcmVkIGl0IGFzIEpTT05cIn07XHJcblx0XHR9XHJcblx0XHRmdW5jdGlvbiBMZXhpY2FsKHZhbHVlKXtcclxuXHRcdFx0Ly8gVE9ETzogQlVHISBIQU0gc2hvdWxkIHVuZGVyc3RhbmQgYSByZWxhdGlvbiAocG9pbnRlcikgYXMgYSB0eXBlIGFzIHdlbGwuXHJcblx0XHRcdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpeyAvLyBUZXh0XHJcblx0XHRcdFx0cmV0dXJuICdhYWFhYScrdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoKHZhbHVlIC0gcGFyc2VGbG9hdCh2YWx1ZSkgKyAxKSA+PSAwKXsgLy8gTnVtYmVycyAoSlNPTi1hYmxlKVxyXG5cdFx0XHRcdHJldHVybiAnYWFhYScrdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYodHJ1ZSA9PT0gdmFsdWUpeyAvLyBCb29sZWFuXHJcblx0XHRcdFx0cmV0dXJuICdhYWEnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGZhbHNlID09PSB2YWx1ZSl7IC8vIEJvb2xlYW5cclxuXHRcdFx0XHRyZXR1cm4gJ2FhJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihudWxsID09PSB2YWx1ZSl7IC8vIE51bGxcclxuXHRcdFx0XHRyZXR1cm4gJ2EnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHVuZGVmaW5lZCA9PT0gdmFsdWUpeyAvLyBVbmRlZmluZWRcclxuXHRcdFx0XHRyZXR1cm4gJyc7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICcnOyAvLyBOb3Qgc3VwcG9ydGVkXHJcblx0XHR9XHJcblx0XHR2YXIgdW5kZWZpbmVkO1xyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBIQU07XHJcblx0fSkocmVxdWlyZSwgJy4vSEFNJyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHR2YXIgVHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xyXG5cdFx0dmFyIFZhbCA9IHt9O1xyXG5cdFx0VmFsLmlzID0gZnVuY3Rpb24odil7IC8vIFZhbGlkIHZhbHVlcyBhcmUgYSBzdWJzZXQgb2YgSlNPTjogbnVsbCwgYmluYXJ5LCBudW1iZXIgKCFJbmZpbml0eSksIHRleHQsIG9yIGEgc291bCByZWxhdGlvbi4gQXJyYXlzIG5lZWQgc3BlY2lhbCBhbGdvcml0aG1zIHRvIGhhbmRsZSBjb25jdXJyZW5jeSwgc28gdGhleSBhcmUgbm90IHN1cHBvcnRlZCBkaXJlY3RseS4gVXNlIGFuIGV4dGVuc2lvbiB0aGF0IHN1cHBvcnRzIHRoZW0gaWYgbmVlZGVkIGJ1dCByZXNlYXJjaCB0aGVpciBwcm9ibGVtcyBmaXJzdC5cclxuXHRcdFx0dmFyIHU7XHJcblx0XHRcdGlmKHYgPT09IHUpeyByZXR1cm4gZmFsc2UgfVxyXG5cdFx0XHRpZih2ID09PSBudWxsKXsgcmV0dXJuIHRydWUgfSAvLyBcImRlbGV0ZXNcIiwgbnVsbGluZyBvdXQgZmllbGRzLlxyXG5cdFx0XHRpZih2ID09PSBJbmZpbml0eSl7IHJldHVybiBmYWxzZSB9IC8vIHdlIHdhbnQgdGhpcyB0byBiZSwgYnV0IEpTT04gZG9lcyBub3Qgc3VwcG9ydCBpdCwgc2FkIGZhY2UuXHJcblx0XHRcdGlmKGJpX2lzKHYpIC8vIGJ5IFwiYmluYXJ5XCIgd2UgbWVhbiBib29sZWFuLlxyXG5cdFx0XHR8fCBudW1faXModilcclxuXHRcdFx0fHwgdGV4dF9pcyh2KSl7IC8vIGJ5IFwidGV4dFwiIHdlIG1lYW4gc3RyaW5ncy5cclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTsgLy8gc2ltcGxlIHZhbHVlcyBhcmUgdmFsaWQuXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIFZhbC5yZWwuaXModikgfHwgZmFsc2U7IC8vIGlzIHRoZSB2YWx1ZSBhIHNvdWwgcmVsYXRpb24/IFRoZW4gaXQgaXMgdmFsaWQgYW5kIHJldHVybiBpdC4gSWYgbm90LCBldmVyeXRoaW5nIGVsc2UgcmVtYWluaW5nIGlzIGFuIGludmFsaWQgZGF0YSB0eXBlLiBDdXN0b20gZXh0ZW5zaW9ucyBjYW4gYmUgYnVpbHQgb24gdG9wIG9mIHRoZXNlIHByaW1pdGl2ZXMgdG8gc3VwcG9ydCBvdGhlciB0eXBlcy5cclxuXHRcdH1cclxuXHRcdFZhbC5yZWwgPSB7XzogJyMnfTtcclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0VmFsLnJlbC5pcyA9IGZ1bmN0aW9uKHYpeyAvLyB0aGlzIGRlZmluZXMgd2hldGhlciBhbiBvYmplY3QgaXMgYSBzb3VsIHJlbGF0aW9uIG9yIG5vdCwgdGhleSBsb29rIGxpa2UgdGhpczogeycjJzogJ1VVSUQnfVxyXG5cdFx0XHRcdGlmKHYgJiYgIXYuXyAmJiBvYmpfaXModikpeyAvLyBtdXN0IGJlIGFuIG9iamVjdC5cclxuXHRcdFx0XHRcdHZhciBvID0ge307XHJcblx0XHRcdFx0XHRvYmpfbWFwKHYsIG1hcCwgbyk7XHJcblx0XHRcdFx0XHRpZihvLmlkKXsgLy8gYSB2YWxpZCBpZCB3YXMgZm91bmQuXHJcblx0XHRcdFx0XHRcdHJldHVybiBvLmlkOyAvLyB5YXkhIFJldHVybiBpdC5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyB0aGUgdmFsdWUgd2FzIG5vdCBhIHZhbGlkIHNvdWwgcmVsYXRpb24uXHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gbWFwKHMsIGYpeyB2YXIgbyA9IHRoaXM7IC8vIG1hcCBvdmVyIHRoZSBvYmplY3QuLi5cclxuXHRcdFx0XHRpZihvLmlkKXsgcmV0dXJuIG8uaWQgPSBmYWxzZSB9IC8vIGlmIElEIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgd2UncmUgc3RpbGwgbG9vcGluZyB0aHJvdWdoIHRoZSBvYmplY3QsIGl0IGlzIGNvbnNpZGVyZWQgaW52YWxpZC5cclxuXHRcdFx0XHRpZihmID09IF9yZWwgJiYgdGV4dF9pcyhzKSl7IC8vIHRoZSBmaWVsZCBzaG91bGQgYmUgJyMnIGFuZCBoYXZlIGEgdGV4dCB2YWx1ZS5cclxuXHRcdFx0XHRcdG8uaWQgPSBzOyAvLyB3ZSBmb3VuZCB0aGUgc291bCFcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG8uaWQgPSBmYWxzZTsgLy8gaWYgdGhlcmUgZXhpc3RzIGFueXRoaW5nIGVsc2Ugb24gdGhlIG9iamVjdCB0aGF0IGlzbid0IHRoZSBzb3VsLCB0aGVuIGl0IGlzIGNvbnNpZGVyZWQgaW52YWxpZC5cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0oKSk7XHJcblx0XHRWYWwucmVsLmlmeSA9IGZ1bmN0aW9uKHQpeyByZXR1cm4gb2JqX3B1dCh7fSwgX3JlbCwgdCkgfSAvLyBjb252ZXJ0IGEgc291bCBpbnRvIGEgcmVsYXRpb24gYW5kIHJldHVybiBpdC5cclxuXHRcdHZhciBfcmVsID0gVmFsLnJlbC5fO1xyXG5cdFx0dmFyIGJpX2lzID0gVHlwZS5iaS5pcztcclxuXHRcdHZhciBudW1faXMgPSBUeXBlLm51bS5pcztcclxuXHRcdHZhciB0ZXh0X2lzID0gVHlwZS50ZXh0LmlzO1xyXG5cdFx0dmFyIG9iaiA9IFR5cGUub2JqLCBvYmpfaXMgPSBvYmouaXMsIG9ial9wdXQgPSBvYmoucHV0LCBvYmpfbWFwID0gb2JqLm1hcDtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gVmFsO1xyXG5cdH0pKHJlcXVpcmUsICcuL3ZhbCcpO1xyXG5cclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0dmFyIFR5cGUgPSByZXF1aXJlKCcuL3R5cGUnKTtcclxuXHRcdHZhciBWYWwgPSByZXF1aXJlKCcuL3ZhbCcpO1xyXG5cdFx0dmFyIE5vZGUgPSB7XzogJ18nfTtcclxuXHRcdE5vZGUuc291bCA9IGZ1bmN0aW9uKG4sIG8peyByZXR1cm4gKG4gJiYgbi5fICYmIG4uX1tvIHx8IF9zb3VsXSkgfSAvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiB0byBjaGVjayB0byBzZWUgaWYgdGhlcmUgaXMgYSBzb3VsIG9uIGEgbm9kZSBhbmQgcmV0dXJuIGl0LlxyXG5cdFx0Tm9kZS5zb3VsLmlmeSA9IGZ1bmN0aW9uKG4sIG8peyAvLyBwdXQgYSBzb3VsIG9uIGFuIG9iamVjdC5cclxuXHRcdFx0byA9ICh0eXBlb2YgbyA9PT0gJ3N0cmluZycpPyB7c291bDogb30gOiBvIHx8IHt9O1xyXG5cdFx0XHRuID0gbiB8fCB7fTsgLy8gbWFrZSBzdXJlIGl0IGV4aXN0cy5cclxuXHRcdFx0bi5fID0gbi5fIHx8IHt9OyAvLyBtYWtlIHN1cmUgbWV0YSBleGlzdHMuXHJcblx0XHRcdG4uX1tfc291bF0gPSBvLnNvdWwgfHwgbi5fW19zb3VsXSB8fCB0ZXh0X3JhbmRvbSgpOyAvLyBwdXQgdGhlIHNvdWwgb24gaXQuXHJcblx0XHRcdHJldHVybiBuO1xyXG5cdFx0fVxyXG5cdFx0OyhmdW5jdGlvbigpe1xyXG5cdFx0XHROb2RlLmlzID0gZnVuY3Rpb24obiwgY2IsIG8peyB2YXIgczsgLy8gY2hlY2tzIHRvIHNlZSBpZiBhbiBvYmplY3QgaXMgYSB2YWxpZCBub2RlLlxyXG5cdFx0XHRcdGlmKCFvYmpfaXMobikpeyByZXR1cm4gZmFsc2UgfSAvLyBtdXN0IGJlIGFuIG9iamVjdC5cclxuXHRcdFx0XHRpZihzID0gTm9kZS5zb3VsKG4pKXsgLy8gbXVzdCBoYXZlIGEgc291bCBvbiBpdC5cclxuXHRcdFx0XHRcdHJldHVybiAhb2JqX21hcChuLCBtYXAsIHtvOm8sbjpuLGNiOmNifSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gbm9wZSEgVGhpcyB3YXMgbm90IGEgdmFsaWQgbm9kZS5cclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBtYXAodiwgZil7IC8vIHdlIGludmVydCB0aGlzIGJlY2F1c2UgdGhlIHdheSB3ZSBjaGVjayBmb3IgdGhpcyBpcyB2aWEgYSBuZWdhdGlvbi5cclxuXHRcdFx0XHRpZihmID09PSBOb2RlLl8peyByZXR1cm4gfSAvLyBza2lwIG92ZXIgdGhlIG1ldGFkYXRhLlxyXG5cdFx0XHRcdGlmKCFWYWwuaXModikpeyByZXR1cm4gdHJ1ZSB9IC8vIGl0IGlzIHRydWUgdGhhdCB0aGlzIGlzIGFuIGludmFsaWQgbm9kZS5cclxuXHRcdFx0XHRpZih0aGlzLmNiKXsgdGhpcy5jYi5jYWxsKHRoaXMubywgdiwgZiwgdGhpcy5uKSB9IC8vIG9wdGlvbmFsbHkgY2FsbGJhY2sgZWFjaCBmaWVsZC92YWx1ZS5cclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0Tm9kZS5pZnkgPSBmdW5jdGlvbihvYmosIG8sIGFzKXsgLy8gcmV0dXJucyBhIG5vZGUgZnJvbSBhIHNoYWxsb3cgb2JqZWN0LlxyXG5cdFx0XHRcdGlmKCFvKXsgbyA9IHt9IH1cclxuXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBvID09PSAnc3RyaW5nJyl7IG8gPSB7c291bDogb30gfVxyXG5cdFx0XHRcdGVsc2UgaWYobyBpbnN0YW5jZW9mIEZ1bmN0aW9uKXsgbyA9IHttYXA6IG99IH1cclxuXHRcdFx0XHRpZihvLm1hcCl7IG8ubm9kZSA9IG8ubWFwLmNhbGwoYXMsIG9iaiwgdSwgby5ub2RlIHx8IHt9KSB9XHJcblx0XHRcdFx0aWYoby5ub2RlID0gTm9kZS5zb3VsLmlmeShvLm5vZGUgfHwge30sIG8pKXtcclxuXHRcdFx0XHRcdG9ial9tYXAob2JqLCBtYXAsIHtvcHQ6byxhczphc30pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gby5ub2RlOyAvLyBUaGlzIHdpbGwgb25seSBiZSBhIHZhbGlkIG5vZGUgaWYgdGhlIG9iamVjdCB3YXNuJ3QgYWxyZWFkeSBkZWVwIVxyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG1hcCh2LCBmKXsgdmFyIG8gPSB0aGlzLm9wdCwgdG1wLCB1OyAvLyBpdGVyYXRlIG92ZXIgZWFjaCBmaWVsZC92YWx1ZS5cclxuXHRcdFx0XHRpZihvLm1hcCl7XHJcblx0XHRcdFx0XHR0bXAgPSBvLm1hcC5jYWxsKHRoaXMuYXMsIHYsICcnK2YsIG8ubm9kZSk7XHJcblx0XHRcdFx0XHRpZih1ID09PSB0bXApe1xyXG5cdFx0XHRcdFx0XHRvYmpfZGVsKG8ubm9kZSwgZik7XHJcblx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdGlmKG8ubm9kZSl7IG8ubm9kZVtmXSA9IHRtcCB9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKFZhbC5pcyh2KSl7IFxyXG5cdFx0XHRcdFx0by5ub2RlW2ZdID0gdjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0oKSk7XHJcblx0XHR2YXIgb2JqID0gVHlwZS5vYmosIG9ial9pcyA9IG9iai5pcywgb2JqX2RlbCA9IG9iai5kZWwsIG9ial9tYXAgPSBvYmoubWFwO1xyXG5cdFx0dmFyIHRleHQgPSBUeXBlLnRleHQsIHRleHRfcmFuZG9tID0gdGV4dC5yYW5kb207XHJcblx0XHR2YXIgX3NvdWwgPSBWYWwucmVsLl87XHJcblx0XHR2YXIgdTtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gTm9kZTtcclxuXHR9KShyZXF1aXJlLCAnLi9ub2RlJyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHR2YXIgVHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xyXG5cdFx0dmFyIE5vZGUgPSByZXF1aXJlKCcuL25vZGUnKTtcclxuXHRcdGZ1bmN0aW9uIFN0YXRlKCl7XHJcblx0XHRcdHZhciB0ID0gdGltZSgpO1xyXG5cdFx0XHRpZihsYXN0IDwgdCl7XHJcblx0XHRcdFx0biA9IDA7XHJcblx0XHRcdFx0cmV0dXJuIGxhc3QgPSB0O1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBsYXN0ID0gdCArICgobiArPSAxKSAvIGQpO1xyXG5cdFx0fVxyXG5cdFx0U3RhdGUuXyA9ICc+JztcclxuXHRcdHZhciB0aW1lID0gVHlwZS50aW1lLmlzLCBsYXN0ID0gLUluZmluaXR5LCBuID0gMCwgZCA9IDEwMDA7XHJcblx0XHRTdGF0ZS5pZnkgPSBmdW5jdGlvbihuLCBmLCBzKXsgLy8gcHV0IGEgZmllbGQncyBzdGF0ZSBvbiBhIG5vZGUuXHJcblx0XHRcdGlmKCFuIHx8ICFuW05fXSl7IHJldHVybiB9IC8vIHJlamVjdCBpZiBpdCBpcyBub3Qgbm9kZS1saWtlLlxyXG5cdFx0XHR2YXIgdG1wID0gb2JqX2FzKG5bTl9dLCBTdGF0ZS5fKTsgLy8gZ3JhYiB0aGUgc3RhdGVzIGRhdGEuXHJcblx0XHRcdGlmKHUgIT09IGYgJiYgbnVtX2lzKHMpKXsgdG1wW2ZdID0gcyB9IC8vIGFkZCB0aGUgdmFsaWQgc3RhdGUuXHJcblx0XHRcdHJldHVybiBuO1xyXG5cdFx0fVxyXG5cdFx0U3RhdGUuaXMgPSBmdW5jdGlvbihuLCBmKXsgLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gZ2V0IHRoZSBzdGF0ZSBvbiBhIGZpZWxkIG9uIGEgbm9kZSBhbmQgcmV0dXJuIGl0LlxyXG5cdFx0XHR2YXIgdG1wID0gZiAmJiBuICYmIG5bTl9dICYmIG5bTl9dW1N0YXRlLl9dO1xyXG5cdFx0XHRpZighdG1wKXsgcmV0dXJuIH1cclxuXHRcdFx0cmV0dXJuIG51bV9pcyh0bXBbZl0pPyB0bXBbZl0gOiAtSW5maW5pdHk7XHJcblx0XHR9XHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFN0YXRlLm1hcCA9IGZ1bmN0aW9uKGNiLCBzLCBhcyl7IHZhciB1OyAvLyBmb3IgdXNlIHdpdGggTm9kZS5pZnlcclxuXHRcdFx0XHR2YXIgbyA9IG9ial9pcyhvID0gY2IgfHwgcyk/IG8gOiBudWxsO1xyXG5cdFx0XHRcdGNiID0gZm5faXMoY2IgPSBjYiB8fCBzKT8gY2IgOiBudWxsO1xyXG5cdFx0XHRcdGlmKG8gJiYgIWNiKXtcclxuXHRcdFx0XHRcdHMgPSBudW1faXMocyk/IHMgOiBTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0b1tOX10gPSBvW05fXSB8fCB7fTtcclxuXHRcdFx0XHRcdG9ial9tYXAobywgbWFwLCB7bzpvLHM6c30pO1xyXG5cdFx0XHRcdFx0cmV0dXJuIG87XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFzID0gYXMgfHwgb2JqX2lzKHMpPyBzIDogdTtcclxuXHRcdFx0XHRzID0gbnVtX2lzKHMpPyBzIDogU3RhdGUoKTtcclxuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24odiwgZiwgbywgb3B0KXtcclxuXHRcdFx0XHRcdGlmKCFjYil7XHJcblx0XHRcdFx0XHRcdG1hcC5jYWxsKHtvOiBvLCBzOiBzfSwgdixmKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHY7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjYi5jYWxsKGFzIHx8IHRoaXMgfHwge30sIHYsIGYsIG8sIG9wdCk7XHJcblx0XHRcdFx0XHRpZihvYmpfaGFzKG8sZikgJiYgdSA9PT0gb1tmXSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRtYXAuY2FsbCh7bzogbywgczogc30sIHYsZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG1hcCh2LGYpe1xyXG5cdFx0XHRcdGlmKE5fID09PSBmKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRTdGF0ZS5pZnkodGhpcy5vLCBmLCB0aGlzLnMpIDtcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdHZhciBvYmogPSBUeXBlLm9iaiwgb2JqX2FzID0gb2JqLmFzLCBvYmpfaGFzID0gb2JqLmhhcywgb2JqX2lzID0gb2JqLmlzLCBvYmpfbWFwID0gb2JqLm1hcDtcclxuXHRcdHZhciBudW0gPSBUeXBlLm51bSwgbnVtX2lzID0gbnVtLmlzO1xyXG5cdFx0dmFyIGZuID0gVHlwZS5mbiwgZm5faXMgPSBmbi5pcztcclxuXHRcdHZhciBOXyA9IE5vZGUuXywgdTtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gU3RhdGU7XHJcblx0fSkocmVxdWlyZSwgJy4vc3RhdGUnKTtcclxuXHJcblx0O3JlcXVpcmUoZnVuY3Rpb24obW9kdWxlKXtcclxuXHRcdHZhciBUeXBlID0gcmVxdWlyZSgnLi90eXBlJyk7XHJcblx0XHR2YXIgVmFsID0gcmVxdWlyZSgnLi92YWwnKTtcclxuXHRcdHZhciBOb2RlID0gcmVxdWlyZSgnLi9ub2RlJyk7XHJcblx0XHR2YXIgR3JhcGggPSB7fTtcclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3JhcGguaXMgPSBmdW5jdGlvbihnLCBjYiwgZm4sIGFzKXsgLy8gY2hlY2tzIHRvIHNlZSBpZiBhbiBvYmplY3QgaXMgYSB2YWxpZCBncmFwaC5cclxuXHRcdFx0XHRpZighZyB8fCAhb2JqX2lzKGcpIHx8IG9ial9lbXB0eShnKSl7IHJldHVybiBmYWxzZSB9IC8vIG11c3QgYmUgYW4gb2JqZWN0LlxyXG5cdFx0XHRcdHJldHVybiAhb2JqX21hcChnLCBtYXAsIHtmbjpmbixjYjpjYixhczphc30pOyAvLyBtYWtlcyBzdXJlIGl0IHdhc24ndCBhbiBlbXB0eSBvYmplY3QuXHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gbmYoZm4peyAvLyBvcHRpb25hbCBjYWxsYmFjayBmb3IgZWFjaCBub2RlLlxyXG5cdFx0XHRcdGlmKGZuKXsgTm9kZS5pcyhuZi5uLCBmbiwgbmYuYXMpIH0gLy8gd2hlcmUgd2UgdGhlbiBoYXZlIGFuIG9wdGlvbmFsIGNhbGxiYWNrIGZvciBlYWNoIGZpZWxkL3ZhbHVlLlxyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG1hcChuLCBzKXsgLy8gd2UgaW52ZXJ0IHRoaXMgYmVjYXVzZSB0aGUgd2F5IHdlIGNoZWNrIGZvciB0aGlzIGlzIHZpYSBhIG5lZ2F0aW9uLlxyXG5cdFx0XHRcdGlmKCFuIHx8IHMgIT09IE5vZGUuc291bChuKSB8fCAhTm9kZS5pcyhuLCB0aGlzLmZuKSl7IHJldHVybiB0cnVlIH0gLy8gaXQgaXMgdHJ1ZSB0aGF0IHRoaXMgaXMgYW4gaW52YWxpZCBncmFwaC5cclxuXHRcdFx0XHRpZighZm5faXModGhpcy5jYikpeyByZXR1cm4gfVx0XHJcblx0XHRcdFx0bmYubiA9IG47IG5mLmFzID0gdGhpcy5hcztcdCBcclxuXHRcdFx0XHR0aGlzLmNiLmNhbGwobmYuYXMsIG4sIHMsIG5mKTtcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3JhcGguaWZ5ID0gZnVuY3Rpb24ob2JqLCBlbnYsIGFzKXtcclxuXHRcdFx0XHR2YXIgYXQgPSB7cGF0aDogW10sIG9iajogb2JqfTtcclxuXHRcdFx0XHRpZighZW52KXtcclxuXHRcdFx0XHRcdGVudiA9IHt9O1xyXG5cdFx0XHRcdH0gZWxzZSBcclxuXHRcdFx0XHRpZih0eXBlb2YgZW52ID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdFx0XHRlbnYgPSB7c291bDogZW52fTtcclxuXHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRpZihlbnYgaW5zdGFuY2VvZiBGdW5jdGlvbil7XHJcblx0XHRcdFx0XHRlbnYubWFwID0gZW52O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihlbnYuc291bCl7XHJcblx0XHRcdFx0XHRhdC5yZWwgPSBWYWwucmVsLmlmeShlbnYuc291bCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVudi5ncmFwaCA9IGVudi5ncmFwaCB8fCB7fTtcclxuXHRcdFx0XHRlbnYuc2VlbiA9IGVudi5zZWVuIHx8IFtdO1xyXG5cdFx0XHRcdGVudi5hcyA9IGVudi5hcyB8fCBhcztcclxuXHRcdFx0XHRub2RlKGVudiwgYXQpO1xyXG5cdFx0XHRcdGVudi5yb290ID0gYXQubm9kZTtcclxuXHRcdFx0XHRyZXR1cm4gZW52LmdyYXBoO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG5vZGUoZW52LCBhdCl7IHZhciB0bXA7XHJcblx0XHRcdFx0aWYodG1wID0gc2VlbihlbnYsIGF0KSl7IHJldHVybiB0bXAgfVxyXG5cdFx0XHRcdGF0LmVudiA9IGVudjtcclxuXHRcdFx0XHRhdC5zb3VsID0gc291bDtcclxuXHRcdFx0XHRpZihOb2RlLmlmeShhdC5vYmosIG1hcCwgYXQpKXtcclxuXHRcdFx0XHRcdGF0LnJlbCA9IGF0LnJlbCB8fCBWYWwucmVsLmlmeShOb2RlLnNvdWwoYXQubm9kZSkpO1xyXG5cdFx0XHRcdFx0ZW52LmdyYXBoW1ZhbC5yZWwuaXMoYXQucmVsKV0gPSBhdC5ub2RlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gYXQ7XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gbWFwKHYsZixuKXtcclxuXHRcdFx0XHR2YXIgYXQgPSB0aGlzLCBlbnYgPSBhdC5lbnYsIGlzLCB0bXA7XHJcblx0XHRcdFx0aWYoTm9kZS5fID09PSBmICYmIG9ial9oYXModixWYWwucmVsLl8pKXtcclxuXHRcdFx0XHRcdHJldHVybiBuLl87IC8vIFRPRE86IEJ1Zz9cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoIShpcyA9IHZhbGlkKHYsZixuLCBhdCxlbnYpKSl7IHJldHVybiB9XHJcblx0XHRcdFx0aWYoIWYpe1xyXG5cdFx0XHRcdFx0YXQubm9kZSA9IGF0Lm5vZGUgfHwgbiB8fCB7fTtcclxuXHRcdFx0XHRcdGlmKG9ial9oYXModiwgTm9kZS5fKSl7XHJcblx0XHRcdFx0XHRcdGF0Lm5vZGUuXyA9IEd1bi5vYmouY29weSh2Ll8pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YXQubm9kZSA9IE5vZGUuc291bC5pZnkoYXQubm9kZSwgVmFsLnJlbC5pcyhhdC5yZWwpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYodG1wID0gZW52Lm1hcCl7XHJcblx0XHRcdFx0XHR0bXAuY2FsbChlbnYuYXMgfHwge30sIHYsZixuLCBhdCk7XHJcblx0XHRcdFx0XHRpZihvYmpfaGFzKG4sZikpe1xyXG5cdFx0XHRcdFx0XHR2ID0gbltmXTtcclxuXHRcdFx0XHRcdFx0aWYodSA9PT0gdil7XHJcblx0XHRcdFx0XHRcdFx0b2JqX2RlbChuLCBmKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYoIShpcyA9IHZhbGlkKHYsZixuLCBhdCxlbnYpKSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCFmKXsgcmV0dXJuIGF0Lm5vZGUgfVxyXG5cdFx0XHRcdGlmKHRydWUgPT09IGlzKXtcclxuXHRcdFx0XHRcdHJldHVybiB2O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0bXAgPSBub2RlKGVudiwge29iajogdiwgcGF0aDogYXQucGF0aC5jb25jYXQoZil9KTtcclxuXHRcdFx0XHRpZighdG1wLm5vZGUpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHJldHVybiB0bXAucmVsOyAvL3snIyc6IE5vZGUuc291bCh0bXAubm9kZSl9O1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIHNvdWwoaWQpeyB2YXIgYXQgPSB0aGlzO1xyXG5cdFx0XHRcdHZhciBwcmV2ID0gVmFsLnJlbC5pcyhhdC5yZWwpLCBncmFwaCA9IGF0LmVudi5ncmFwaDtcclxuXHRcdFx0XHRhdC5yZWwgPSBhdC5yZWwgfHwgVmFsLnJlbC5pZnkoaWQpO1xyXG5cdFx0XHRcdGF0LnJlbFtWYWwucmVsLl9dID0gaWQ7XHJcblx0XHRcdFx0aWYoYXQubm9kZSAmJiBhdC5ub2RlW05vZGUuX10pe1xyXG5cdFx0XHRcdFx0YXQubm9kZVtOb2RlLl9dW1ZhbC5yZWwuX10gPSBpZDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYob2JqX2hhcyhncmFwaCwgcHJldikpe1xyXG5cdFx0XHRcdFx0Z3JhcGhbaWRdID0gZ3JhcGhbcHJldl07XHJcblx0XHRcdFx0XHRvYmpfZGVsKGdyYXBoLCBwcmV2KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gdmFsaWQodixmLG4sIGF0LGVudil7IHZhciB0bXA7XHJcblx0XHRcdFx0aWYoVmFsLmlzKHYpKXsgcmV0dXJuIHRydWUgfVxyXG5cdFx0XHRcdGlmKG9ial9pcyh2KSl7IHJldHVybiAxIH1cclxuXHRcdFx0XHRpZih0bXAgPSBlbnYuaW52YWxpZCl7XHJcblx0XHRcdFx0XHR2ID0gdG1wLmNhbGwoZW52LmFzIHx8IHt9LCB2LGYsbik7XHJcblx0XHRcdFx0XHRyZXR1cm4gdmFsaWQodixmLG4sIGF0LGVudik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVudi5lcnIgPSBcIkludmFsaWQgdmFsdWUgYXQgJ1wiICsgYXQucGF0aC5jb25jYXQoZikuam9pbignLicpICsgXCInIVwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIHNlZW4oZW52LCBhdCl7XHJcblx0XHRcdFx0dmFyIGFyciA9IGVudi5zZWVuLCBpID0gYXJyLmxlbmd0aCwgaGFzO1xyXG5cdFx0XHRcdHdoaWxlKGktLSl7IGhhcyA9IGFycltpXTtcclxuXHRcdFx0XHRcdGlmKGF0Lm9iaiA9PT0gaGFzLm9iail7IHJldHVybiBoYXMgfVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhcnIucHVzaChhdCk7XHJcblx0XHRcdH1cclxuXHRcdH0oKSk7XHJcblx0XHRHcmFwaC5ub2RlID0gZnVuY3Rpb24obm9kZSl7XHJcblx0XHRcdHZhciBzb3VsID0gTm9kZS5zb3VsKG5vZGUpO1xyXG5cdFx0XHRpZighc291bCl7IHJldHVybiB9XHJcblx0XHRcdHJldHVybiBvYmpfcHV0KHt9LCBzb3VsLCBub2RlKTtcclxuXHRcdH1cclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3JhcGgudG8gPSBmdW5jdGlvbihncmFwaCwgcm9vdCwgb3B0KXtcclxuXHRcdFx0XHRpZighZ3JhcGgpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHZhciBvYmogPSB7fTtcclxuXHRcdFx0XHRvcHQgPSBvcHQgfHwge3NlZW46IHt9fTtcclxuXHRcdFx0XHRvYmpfbWFwKGdyYXBoW3Jvb3RdLCBtYXAsIHtvYmo6b2JqLCBncmFwaDogZ3JhcGgsIG9wdDogb3B0fSk7XHJcblx0XHRcdFx0cmV0dXJuIG9iajtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBtYXAodixmKXsgdmFyIHRtcCwgb2JqO1xyXG5cdFx0XHRcdGlmKE5vZGUuXyA9PT0gZil7XHJcblx0XHRcdFx0XHRpZihvYmpfZW1wdHkodiwgVmFsLnJlbC5fKSl7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMub2JqW2ZdID0gb2JqX2NvcHkodik7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCEodG1wID0gVmFsLnJlbC5pcyh2KSkpe1xyXG5cdFx0XHRcdFx0dGhpcy5vYmpbZl0gPSB2O1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvYmogPSB0aGlzLm9wdC5zZWVuW3RtcF0pe1xyXG5cdFx0XHRcdFx0dGhpcy5vYmpbZl0gPSBvYmo7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMub2JqW2ZdID0gdGhpcy5vcHQuc2Vlblt0bXBdID0gR3JhcGgudG8odGhpcy5ncmFwaCwgdG1wLCB0aGlzLm9wdCk7XHJcblx0XHRcdH1cclxuXHRcdH0oKSk7XHJcblx0XHR2YXIgZm5faXMgPSBUeXBlLmZuLmlzO1xyXG5cdFx0dmFyIG9iaiA9IFR5cGUub2JqLCBvYmpfaXMgPSBvYmouaXMsIG9ial9kZWwgPSBvYmouZGVsLCBvYmpfaGFzID0gb2JqLmhhcywgb2JqX2VtcHR5ID0gb2JqLmVtcHR5LCBvYmpfcHV0ID0gb2JqLnB1dCwgb2JqX21hcCA9IG9iai5tYXAsIG9ial9jb3B5ID0gb2JqLmNvcHk7XHJcblx0XHR2YXIgdTtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gR3JhcGg7XHJcblx0fSkocmVxdWlyZSwgJy4vZ3JhcGgnKTtcclxuXHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblxyXG5cdFx0ZnVuY3Rpb24gR3VuKG8pe1xyXG5cdFx0XHRpZighKHRoaXMgaW5zdGFuY2VvZiBHdW4pKXsgcmV0dXJuIEd1bi5jcmVhdGUobykgfVxyXG5cdFx0XHR0aGlzLl8gPSB7Z3VuOiB0aGlzfTtcclxuXHRcdH1cclxuXHJcblx0XHRHdW4uY3JlYXRlID0gZnVuY3Rpb24obyl7XHJcblx0XHRcdHJldHVybiBuZXcgR3VuKCkub3B0KG8pO1xyXG5cdFx0fTtcclxuXHJcblx0XHRHdW4uXyA9IHsgLy8gc29tZSByZXNlcnZlZCBrZXkgd29yZHMsIHRoZXNlIGFyZSBub3QgdGhlIG9ubHkgb25lcy5cclxuXHRcdFx0bWV0YTogJ18nIC8vIGFsbCBtZXRhZGF0YSBvZiB0aGUgbm9kZSBpcyBzdG9yZWQgaW4gdGhlIG1ldGEgcHJvcGVydHkgb24gdGhlIG5vZGUuXHJcblx0XHRcdCxzb3VsOiAnIycgLy8gYSBzb3VsIGlzIGEgVVVJRCBvZiBhIG5vZGUgYnV0IGl0IGFsd2F5cyBwb2ludHMgdG8gdGhlIFwibGF0ZXN0XCIgZGF0YSBrbm93bi5cclxuXHRcdFx0LGZpZWxkOiAnLicgLy8gYSBmaWVsZCBpcyBhIHByb3BlcnR5IG9uIGEgbm9kZSB3aGljaCBwb2ludHMgdG8gYSB2YWx1ZS5cclxuXHRcdFx0LHN0YXRlOiAnPicgLy8gb3RoZXIgdGhhbiB0aGUgc291bCwgd2Ugc3RvcmUgSEFNIG1ldGFkYXRhLlxyXG5cdFx0XHQsdmFsdWU6ICc9JyAvLyB0aGUgcHJpbWl0aXZlIHZhbHVlLlxyXG5cdFx0fVxyXG5cclxuXHRcdEd1bi5fXyA9IHtcclxuXHRcdFx0J18nOidtZXRhJ1xyXG5cdFx0XHQsJyMnOidzb3VsJ1xyXG5cdFx0XHQsJy4nOidmaWVsZCdcclxuXHRcdFx0LCc9JzondmFsdWUnXHJcblx0XHRcdCwnPic6J3N0YXRlJ1xyXG5cdFx0fVxyXG5cclxuXHRcdEd1bi52ZXJzaW9uID0gMC40O1xyXG5cclxuXHRcdEd1bi5pcyA9IGZ1bmN0aW9uKGd1bil7IHJldHVybiAoZ3VuIGluc3RhbmNlb2YgR3VuKSB9IC8vIGNoZWNrIHRvIHNlZSBpZiBpdCBpcyBhIEdVTiBpbnN0YW5jZS5cclxuXHJcblx0XHR2YXIgVHlwZSA9IHJlcXVpcmUoJy4vdHlwZScpO1xyXG5cdFx0VHlwZS5vYmoubWFwKFR5cGUsIGZ1bmN0aW9uKHYsZil7XHJcblx0XHRcdEd1bltmXSA9IHY7XHJcblx0XHR9KTtcclxuXHRcdEd1bi5IQU0gPSByZXF1aXJlKCcuL0hBTScpO1xyXG5cdFx0R3VuLnZhbCA9IHJlcXVpcmUoJy4vdmFsJyk7XHJcblx0XHRHdW4ubm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpO1xyXG5cdFx0R3VuLnN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xyXG5cdFx0R3VuLmdyYXBoID0gcmVxdWlyZSgnLi9ncmFwaCcpO1xyXG5cclxuXHRcdEd1bi5vbiA9IHJlcXVpcmUoJy4vb25pZnknKSgpO1xyXG5cdFx0XHJcblx0XHQvKlxyXG5cdFx0dmFyIG9wdCA9IHtjaGFpbjogJ2luJywgYmFjazogJ291dCcsIGV4dGVuZDogJ3Jvb3QnLCBpZDogR3VuLl8uc291bH07XHJcblx0XHRHdW4uY2hhaW4gPSByZXF1aXJlKCcuL2NoYWluJykoR3VuLCBvcHQpO1xyXG5cdFx0R3VuLmNoYWluLmNoYWluLm9wdCA9IG9wdDtcclxuXHRcdCovXHJcblx0XHQoR3VuLmNoYWluID0gR3VuLnByb3RvdHlwZSkuY2hhaW4gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgY2hhaW4gPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLCBfO1xyXG5cdFx0XHRfID0gY2hhaW4uXyB8fCAoY2hhaW4uXyA9IHt9KTtcclxuXHRcdFx0Xy5yb290ID0gdGhpcy5fLnJvb3Q7XHJcblx0XHRcdF8uYmFjayA9IHRoaXM7XHJcblx0XHRcdHJldHVybiBjaGFpbjtcclxuXHRcdH1cclxuXHRcdEd1bi5jaGFpbi50b0pTT04gPSBmdW5jdGlvbigpe307XHJcblxyXG5cdFx0OyhmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0R3VuLmNoYWluLm9wdCA9IGZ1bmN0aW9uKG9wdCl7XHJcblx0XHRcdFx0b3B0ID0gb3B0IHx8IHt9O1xyXG5cdFx0XHRcdHZhciBndW4gPSB0aGlzLCBhdCA9IGd1bi5fLCB0bXAsIHU7XHJcblx0XHRcdFx0aWYoIWF0LnJvb3QpeyByb290KGF0KSB9XHJcblx0XHRcdFx0dG1wID0gYXQub3B0ID0gYXQub3B0IHx8IHt9O1xyXG5cdFx0XHRcdGlmKHRleHRfaXMob3B0KSl7IG9wdCA9IHtwZWVyczogb3B0fSB9XHJcblx0XHRcdFx0ZWxzZSBpZihsaXN0X2lzKG9wdCkpeyBvcHQgPSB7cGVlcnM6IG9wdH0gfVxyXG5cdFx0XHRcdGlmKHRleHRfaXMob3B0LnBlZXJzKSl7IG9wdC5wZWVycyA9IFtvcHQucGVlcnNdIH1cclxuXHRcdFx0XHRpZihsaXN0X2lzKG9wdC5wZWVycykpeyBvcHQucGVlcnMgPSBvYmpfbWFwKG9wdC5wZWVycywgZnVuY3Rpb24obixmLG0pe20obix7fSl9KSB9XHJcblx0XHRcdFx0b2JqX21hcChvcHQsIGZ1bmN0aW9uIG1hcCh2LGYpe1xyXG5cdFx0XHRcdFx0aWYob2JqX2lzKHYpKXtcclxuXHRcdFx0XHRcdFx0dG1wID0gdG1wW2ZdIHx8ICh0bXBbZl0gPSB7fSk7IC8vIFRPRE86IEJ1Zz8gQmUgY2FyZWZ1bCBvZiBmYWxzZXkgdmFsdWVzIGdldHRpbmcgb3ZlcndyaXR0ZW4/XHJcblx0XHRcdFx0XHRcdG9ial9tYXAodiwgbWFwKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dG1wW2ZdID0gdjtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRHdW4ub24oJ29wdCcsIGF0KTtcclxuXHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIHJvb3QoYXQpe1xyXG5cdFx0XHRcdHZhciBndW4gPSBhdC5ndW47XHJcblx0XHRcdFx0YXQucm9vdCA9IGd1bjtcclxuXHRcdFx0XHRhdC5ncmFwaCA9IHt9O1xyXG5cdFx0XHRcdGd1bi5vbignaW4nLCBpbnB1dCwgYXQpO1xyXG5cdFx0XHRcdGd1bi5vbignb3V0Jywgb3V0cHV0LCBhdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gb3V0cHV0KGF0KXtcclxuXHRcdFx0XHR2YXIgY2F0ID0gdGhpcywgZ3VuID0gY2F0Lmd1biwgdG1wO1xyXG5cdFx0XHRcdGlmKGF0LnB1dCl7XHJcblx0XHRcdFx0XHRjYXQub24oJ2luJywgb2JqX3RvKGF0LCB7Z3VuOiBjYXQuZ3VufSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZighYXQuZ3VuKXtcclxuXHRcdFx0XHRcdGF0ID0gR3VuLm9iai50byhhdCwge2d1bjogZ3VufSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKGF0LnB1dCl7IEd1bi5vbigncHV0JywgYXQpIH1cclxuXHRcdFx0XHRpZihhdC5nZXQpeyBnZXQoYXQsIGNhdCkgfVxyXG5cdFx0XHRcdEd1bi5vbignb3V0JywgYXQpO1xyXG5cdFx0XHRcdGlmKCFjYXQuYmFjayl7IHJldHVybiB9XHJcblx0XHRcdFx0Y2F0LmJhY2sub24oJ291dCcsIGF0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBnZXQoYXQsIGNhdCl7XHJcblx0XHRcdFx0dmFyIHNvdWwgPSBhdC5nZXRbX3NvdWxdLCBub2RlID0gY2F0LmdyYXBoW3NvdWxdLCBmaWVsZCA9IGF0LmdldFtfZmllbGRdO1xyXG5cdFx0XHRcdGlmKG5vZGUgJiYgKCFmaWVsZCB8fCBvYmpfaGFzKG5vZGUsIGZpZWxkKSkpe1xyXG5cdFx0XHRcdFx0Ly8gVE9ETzogQlVHISEhIFNob3VsZG4ndCB0aGlzIGFjaz8/Pz8/XHJcblx0XHRcdFx0XHRpZihmaWVsZCl7XHJcblx0XHRcdFx0XHRcdG5vZGUgPSBHdW4ub2JqLnB1dCh7Xzogbm9kZS5ffSwgZmllbGQsIG5vZGVbZmllbGRdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhdC5vbignaW4nLCB7XHJcblx0XHRcdFx0XHRcdCdAJzogYXQucmVxPyBhdFsnIyddIDogMCwgLy8gdGVtcG9yYXJ5IGhhY2tcclxuXHRcdFx0XHRcdFx0cHV0OiBHdW4uZ3JhcGgubm9kZShub2RlKSAvLyBUT0RPOiBCVUchIENsb25lIG5vZGUhXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0R3VuLm9uKCdnZXQnLCBhdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gaW5wdXQoYXQpeyB2YXIgY2F0ID0gdGhpcztcclxuXHRcdFx0XHRpZihhdFsnQCddIHx8IGF0LmVyciB8fCB1ID09PSBhdC5wdXQpe1xyXG5cdFx0XHRcdFx0YXQuZ3VuID0gYXQuZ3VuIHx8IGNhdC5ndW47XHJcblx0XHRcdFx0XHRHdW4ub24uYWNrKGF0WydAJ10sIGF0KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY2F0LmdyYXBoKXtcclxuXHRcdFx0XHRcdEd1bi5vYmoubWFwKGF0LnB1dCwgaGFtLCB7YXQ6IGF0LCBjYXQ6IHRoaXN9KTsgLy8gYWxsIHVuaW9ucyBtdXN0IGhhcHBlbiBmaXJzdCwgc2FkbHkuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdEd1bi5vYmoubWFwKGF0LnB1dCwgbWFwLCB7YXQ6IGF0LCBjYXQ6IHRoaXN9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBoYW0oZGF0YSwga2V5KXtcclxuXHRcdFx0XHR2YXIgY2F0ID0gdGhpcy5jYXQsIGdyYXBoID0gY2F0LmdyYXBoO1xyXG5cdFx0XHRcdGdyYXBoW2tleV0gPSBHdW4uSEFNLnVuaW9uKGdyYXBoW2tleV0gfHwgZGF0YSwgZGF0YSkgfHwgZ3JhcGhba2V5XTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBtYXAoZGF0YSwga2V5KXtcclxuXHRcdFx0XHR2YXIgY2F0ID0gdGhpcy5jYXQsIGdyYXBoID0gY2F0LmdyYXBoLCBwYXRoID0gY2F0LnBhdGggfHwgKGNhdC5wYXRoID0ge30pLCBndW4sIGF0O1xyXG5cdFx0XHRcdGd1biA9IHBhdGhba2V5XSB8fCAocGF0aFtrZXldID0gY2F0Lmd1bi5nZXQoa2V5KSk7XHJcblx0XHRcdFx0KGF0ID0gZ3VuLl8pLmNoYW5nZSA9IGRhdGE7XHJcblx0XHRcdFx0aWYoZ3JhcGgpe1xyXG5cdFx0XHRcdFx0ZGF0YSA9IGdyYXBoW2tleV07IC8vIFRPRE8hIEJVRy9QRVJGISBDT1BZIT9cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXQucHV0ID0gZGF0YTtcclxuXHRcdFx0XHRndW4ub24oJ2luJywge1xyXG5cdFx0XHRcdFx0cHV0OiBkYXRhLFxyXG5cdFx0XHRcdFx0Z2V0OiBrZXksXHJcblx0XHRcdFx0XHRndW46IGd1bixcclxuXHRcdFx0XHRcdHZpYTogdGhpcy5hdFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KCkpO1xyXG5cdFx0dmFyIHRleHQgPSBUeXBlLnRleHQsIHRleHRfaXMgPSB0ZXh0LmlzLCB0ZXh0X3JhbmRvbSA9IHRleHQucmFuZG9tO1xyXG5cdFx0dmFyIGxpc3QgPSBUeXBlLmxpc3QsIGxpc3RfaXMgPSBsaXN0LmlzO1xyXG5cdFx0dmFyIG9iaiA9IFR5cGUub2JqLCBvYmpfaXMgPSBvYmouaXMsIG9ial9oYXMgPSBvYmouaGFzLCBvYmpfdG8gPSBvYmoudG8sIG9ial9tYXAgPSBvYmoubWFwO1xyXG5cdFx0dmFyIF9zb3VsID0gR3VuLl8uc291bCwgX2ZpZWxkID0gR3VuLl8uZmllbGQ7XHJcblx0XHR2YXIgdTtcclxuXHJcblx0XHRjb25zb2xlLmRlYnVnID0gZnVuY3Rpb24oaSwgcyl7IHJldHVybiAoY29uc29sZS5kZWJ1Zy5pICYmIGkgPT09IGNvbnNvbGUuZGVidWcuaSAmJiBjb25zb2xlLmRlYnVnLmkrKykgJiYgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKSwgcyB9O1xyXG5cclxuXHRcdEd1bi5sb2cgPSBmdW5jdGlvbigpeyByZXR1cm4gKCFHdW4ubG9nLm9mZiAmJiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpKSwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLmpvaW4oJyAnKSB9XHJcblx0XHRHdW4ubG9nLm9uY2UgPSBmdW5jdGlvbih3LHMsbyl7IHJldHVybiAobyA9IEd1bi5sb2cub25jZSlbd10gPSBvW3ddIHx8IDAsIG9bd10rKyB8fCBHdW4ubG9nKHMpIH1cclxuXHJcblx0XHRpZih0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKXsgd2luZG93Lkd1biA9IEd1biB9XHJcblx0XHRpZih0eXBlb2YgY29tbW9uICE9PSBcInVuZGVmaW5lZFwiKXsgY29tbW9uLmV4cG9ydHMgPSBHdW4gfVxyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBHdW47XHJcblx0fSkocmVxdWlyZSwgJy4vZ3VuJyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblxyXG5cdFx0dmFyIEd1biA9IHJlcXVpcmUoJy4vZ3VuJyk7XHJcblx0XHRtb2R1bGUuZXhwb3J0cyA9IEd1bjtcclxuXHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblx0XHRcdGZ1bmN0aW9uIG1ldGEodixmKXtcclxuXHRcdFx0XHRpZihvYmpfaGFzKEd1bi5fXywgZikpeyByZXR1cm4gfVxyXG5cdFx0XHRcdG9ial9wdXQodGhpcy5fLCBmLCB2KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBtYXAodmFsdWUsIGZpZWxkKXtcclxuXHRcdFx0XHRpZihHdW4uXy5tZXRhID09PSBmaWVsZCl7IHJldHVybiB9XHJcblx0XHRcdFx0dmFyIG5vZGUgPSB0aGlzLm5vZGUsIHZlcnRleCA9IHRoaXMudmVydGV4LCB1bmlvbiA9IHRoaXMudW5pb24sIG1hY2hpbmUgPSB0aGlzLm1hY2hpbmU7XHJcblx0XHRcdFx0dmFyIGlzID0gc3RhdGVfaXMobm9kZSwgZmllbGQpLCBjcyA9IHN0YXRlX2lzKHZlcnRleCwgZmllbGQpO1xyXG5cdFx0XHRcdGlmKHUgPT09IGlzIHx8IHUgPT09IGNzKXsgcmV0dXJuIHRydWUgfSAvLyBpdCBpcyB0cnVlIHRoYXQgdGhpcyBpcyBhbiBpbnZhbGlkIEhBTSBjb21wYXJpc29uLlxyXG5cdFx0XHRcdHZhciBpdiA9IHJlbF9pcyh2YWx1ZSkgfHwgdmFsdWUsIGN2ID0gcmVsX2lzKHZlcnRleFtmaWVsZF0pIHx8IHZlcnRleFtmaWVsZF07XHJcblx0XHRcdFx0XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cdFx0XHRcdC8vIFRPRE86IEJVRyEgTmVlZCB0byBjb21wYXJlIHJlbGF0aW9uIHRvIG5vdCByZWxhdGlvbiwgYW5kIGNob29zZSB0aGUgcmVsYXRpb24gaWYgdGhlcmUgaXMgYSBzdGF0ZSBjb25mbGljdC5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cdFx0XHRcdGlmKCF2YWxfaXMoaXYpICYmIHUgIT09IGl2KXsgcmV0dXJuIHRydWUgfSAvLyBVbmRlZmluZWQgaXMgb2theSBzaW5jZSBhIHZhbHVlIG1pZ2h0IG5vdCBleGlzdCBvbiBib3RoIG5vZGVzLiAvLyBpdCBpcyB0cnVlIHRoYXQgdGhpcyBpcyBhbiBpbnZhbGlkIEhBTSBjb21wYXJpc29uLlxyXG5cdFx0XHRcdGlmKCF2YWxfaXMoY3YpICYmIHUgIT09IGN2KXsgcmV0dXJuIHRydWUgfSAgLy8gVW5kZWZpbmVkIGlzIG9rYXkgc2luY2UgYSB2YWx1ZSBtaWdodCBub3QgZXhpc3Qgb24gYm90aCBub2Rlcy4gLy8gaXQgaXMgdHJ1ZSB0aGF0IHRoaXMgaXMgYW4gaW52YWxpZCBIQU0gY29tcGFyaXNvbi5cclxuXHRcdFx0XHR2YXIgSEFNID0gR3VuLkhBTShtYWNoaW5lLCBpcywgY3MsIGl2LCBjdik7XHJcblx0XHRcdFx0aWYoSEFNLmVycil7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIi4hSFlQT1RIRVRJQ0FMIEFNTkVTSUEgTUFDSElORSBFUlIhLlwiLCBIQU0uZXJyKTsgLy8gdGhpcyBlcnJvciBzaG91bGQgbmV2ZXIgaGFwcGVuLlxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihIQU0uc3RhdGUgfHwgSEFNLmhpc3RvcmljYWwgfHwgSEFNLmN1cnJlbnQpeyAvLyBUT0RPOiBCVUchIE5vdCBpbXBsZW1lbnRlZC5cclxuXHRcdFx0XHRcdC8vb3B0Lmxvd2VyKHZlcnRleCwge2ZpZWxkOiBmaWVsZCwgdmFsdWU6IHZhbHVlLCBzdGF0ZTogaXN9KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoSEFNLmluY29taW5nKXtcclxuXHRcdFx0XHRcdHVuaW9uW2ZpZWxkXSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0c3RhdGVfaWZ5KHVuaW9uLCBmaWVsZCwgaXMpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihIQU0uZGVmZXIpeyAvLyBUT0RPOiBCVUchIE5vdCBpbXBsZW1lbnRlZC5cclxuXHRcdFx0XHRcdC8qdXBwZXIud2FpdCA9IHRydWU7XHJcblx0XHRcdFx0XHRvcHQudXBwZXIuY2FsbChzdGF0ZSwgdmVydGV4LCBmaWVsZCwgaW5jb21pbmcsIGN0eC5pbmNvbWluZy5zdGF0ZSk7IC8vIHNpZ25hbHMgdGhhdCB0aGVyZSBhcmUgc3RpbGwgZnV0dXJlIG1vZGlmaWNhdGlvbnMuXHJcblx0XHRcdFx0XHRHdW4uc2NoZWR1bGUoY3R4LmluY29taW5nLnN0YXRlLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHR1cGRhdGUoaW5jb21pbmcsIGZpZWxkKTtcclxuXHRcdFx0XHRcdFx0aWYoY3R4LmluY29taW5nLnN0YXRlID09PSB1cHBlci5tYXgpeyAodXBwZXIubGFzdCB8fCBmdW5jdGlvbigpe30pKCkgfVxyXG5cdFx0XHRcdFx0fSwgZ3VuLl9fLm9wdC5zdGF0ZSk7Ki9cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0R3VuLkhBTS51bmlvbiA9IGZ1bmN0aW9uKHZlcnRleCwgbm9kZSwgb3B0KXtcclxuXHRcdFx0XHRpZighbm9kZSB8fCAhdmVydGV4IHx8ICFub2RlLl8gfHwgIXZlcnRleC5fKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRvcHQgPSBudW1faXMob3B0KT8ge21hY2hpbmU6IG9wdH0gOiB7bWFjaGluZTogKCtuZXcgRGF0ZSl9O1xyXG5cdFx0XHRcdG9wdC51bmlvbiA9IEd1bi5vYmouY29weSh2ZXJ0ZXgpO1xyXG5cdFx0XHRcdG9wdC52ZXJ0ZXggPSB2ZXJ0ZXg7XHJcblx0XHRcdFx0b3B0Lm5vZGUgPSBub2RlO1xyXG5cdFx0XHRcdG9ial9tYXAobm9kZS5fLCBtZXRhLCBvcHQudW5pb24pO1xyXG5cdFx0XHRcdGlmKG9ial9tYXAobm9kZSwgbWFwLCBvcHQpKXsgLy8gaWYgdGhpcyByZXR1cm5zIHRydWUgdGhlbiBzb21ldGhpbmcgd2FzIGludmFsaWQuXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBvcHQudW5pb247XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIFR5cGUgPSBHdW47XHJcblx0XHRcdHZhciBudW0gPSBUeXBlLm51bSwgbnVtX2lzID0gbnVtLmlzO1xyXG5cdFx0XHR2YXIgb2JqID0gVHlwZS5vYmosIG9ial9oYXMgPSBvYmouaGFzLCBvYmpfcHV0ID0gb2JqLnB1dCwgb2JqX21hcCA9IG9iai5tYXA7XHJcblx0XHRcdHZhciBub2RlID0gR3VuLm5vZGUsIG5vZGVfc291bCA9IG5vZGUuc291bCwgbm9kZV9pcyA9IG5vZGUuaXMsIG5vZGVfaWZ5ID0gbm9kZS5pZnk7XHJcblx0XHRcdHZhciBzdGF0ZSA9IEd1bi5zdGF0ZSwgc3RhdGVfaXMgPSBzdGF0ZS5pcywgc3RhdGVfaWZ5ID0gc3RhdGUuaWZ5O1xyXG5cdFx0XHR2YXIgdmFsID0gR3VuLnZhbCwgdmFsX2lzID0gdmFsLmlzLCByZWxfaXMgPSB2YWwucmVsLmlzO1xyXG5cdFx0XHR2YXIgdTtcclxuXHRcdH0oKSk7XHJcblxyXG5cdH0pKHJlcXVpcmUsICcuL2luZGV4Jyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHR2YXIgR3VuID0gcmVxdWlyZSgnLi9pbmRleCcpO1xyXG5cdFx0dmFyIG9iaiA9IEd1bi5vYmosIG9ial9pcyA9IG9iai5pcywgb2JqX3B1dCA9IG9iai5wdXQsIG9ial9tYXAgPSBvYmoubWFwLCBvYmpfZW1wdHkgPSBvYmouZW1wdHk7XHJcblx0XHR2YXIgbnVtID0gR3VuLm51bSwgbnVtX2lzID0gbnVtLmlzO1xyXG5cdFx0dmFyIF9zb3VsID0gR3VuLnZhbC5yZWwuXywgX2ZpZWxkID0gJy4nO1xyXG5cdFx0XHJcblx0XHQ7KGZ1bmN0aW9uKCl7IHZhciBvYmogPSB7fSwgdTtcclxuXHRcdFx0R3VuLmNoYWluLkJhY2sgPSBmdW5jdGlvbihuLCBvcHQpeyB2YXIgdG1wO1xyXG5cdFx0XHRcdGlmKC0xID09PSBuIHx8IEluZmluaXR5ID09PSBuKXtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLl8ucm9vdDtcclxuXHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRpZigxID09PSBuKXtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLl8uYmFjaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGd1biA9IHRoaXMsIGF0ID0gZ3VuLl87XHJcblx0XHRcdFx0aWYodHlwZW9mIG4gPT09ICdzdHJpbmcnKXtcclxuXHRcdFx0XHRcdG4gPSBuLnNwbGl0KCcuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKG4gaW5zdGFuY2VvZiBBcnJheSl7XHJcblx0XHRcdFx0XHR2YXIgaSA9IDAsIGwgPSBuLmxlbmd0aCwgdG1wID0gYXQ7XHJcblx0XHRcdFx0XHRmb3IoaTsgaSA8IGw7IGkrKyl7XHJcblx0XHRcdFx0XHRcdHRtcCA9ICh0bXB8fG9iailbbltpXV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZih1ICE9PSB0bXApe1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gb3B0PyBndW4gOiB0bXA7XHJcblx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdGlmKHRtcCA9IGF0LmJhY2spe1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdG1wLkJhY2sobiwgb3B0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYobiBpbnN0YW5jZW9mIEZ1bmN0aW9uKXtcclxuXHRcdFx0XHRcdHZhciB5ZXMsIHRtcCA9IHtfOntiYWNrOiBndW59fTtcclxuXHRcdFx0XHRcdHdoaWxlKCh0bXAgPSB0bXAuXykgJiYgKHRtcCA9IHRtcC5iYWNrKSAmJiAhKHllcyA9IG4odG1wLCBvcHQpKSl7fVxyXG5cdFx0XHRcdFx0cmV0dXJuIHllcztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0oKSlcclxuXHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0XHRHdW4uY2hhaW4ucHV0ID0gZnVuY3Rpb24oZGF0YSwgY2IsIG9wdCwgYXMpe1xyXG5cdFx0XHRcdC8vIFRPRE86IEJVRyEgUHV0IHByb2JhYmx5IGNhbm5vdCBoYW5kbGUgcGx1cmFsIGNoYWlucyFcclxuXHRcdFx0XHR2YXIgZ3VuID0gdGhpcywgcm9vdCA9IGd1bi5CYWNrKC0xKSwgdG1wO1xyXG5cdFx0XHRcdG9wdCA9IChvcHQgJiYgdHlwZW9mIG9wdCA9PT0gJ3N0cmluZycpPyB7c291bDogb3B0fSA6IG9wdCB8fCB7fTtcclxuXHRcdFx0XHRhcyA9IGFzIHx8IHtvcHQ6IG9wdCwgc291bDogb3B0LnNvdWx9O1xyXG5cdFx0XHRcdGFzLmd1biA9IGd1bjtcclxuXHRcdFx0XHRhcy5kYXRhID0gZGF0YTtcclxuXHRcdFx0XHRvcHQuYW55ID0gb3B0LmFueSB8fCBjYjtcclxuXHRcdFx0XHRpZihyb290ID09PSBndW4gfHwgYXMuc291bCl7XHJcblx0XHRcdFx0XHRpZighb2JqX2lzKGFzLmRhdGEpKXtcclxuXHRcdFx0XHRcdFx0KG9wdC5hbnl8fG5vb3ApLmNhbGwob3B0LmFzIHx8IGd1biwgYXMub3V0ID0ge2VycjogR3VuLmxvZyhcIk5vIGZpZWxkIHRvIHB1dFwiLCAodHlwZW9mIGFzLmRhdGEpLCAnXCInICsgYXMuZGF0YSArICdcIiBvbiEnKX0pO1xyXG5cdFx0XHRcdFx0XHRpZihhcy5yZXMpeyBhcy5yZXMoKSB9XHJcblx0XHRcdFx0XHRcdHJldHVybiBndW47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZighYXMuc291bCl7XHJcblx0XHRcdFx0XHRcdGlmKG9wdC5pbml0IHx8IGFzLmd1bi5CYWNrKCdvcHQuaW5pdCcpKXtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRhcy5ndW4gPSBndW4gPSByb290LmdldChhcy5zb3VsID0gYXMuc291bCB8fCAoYXMubm90ID0gR3VuLm5vZGUuc291bChhcy5kYXRhKSB8fCAob3B0LnV1aWQgfHwgcm9vdC5CYWNrKCdvcHQudXVpZCcpIHx8IEd1bi50ZXh0LnJhbmRvbSkoKSkpO1xyXG5cdFx0XHRcdFx0YXMucmVmID0gYXMucmVmIHx8IGFzLmd1bjtcclxuXHRcdFx0XHRcdGlmeShhcyk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihHdW4uaXMoZGF0YSkpe1xyXG5cdFx0XHRcdFx0ZGF0YS5hbnkoZnVuY3Rpb24oZSxkLGssYXQsZXYpe1xyXG5cdFx0XHRcdFx0XHRldi5vZmYoKTtcclxuXHRcdFx0XHRcdFx0dmFyIHMgPSBHdW4ubm9kZS5zb3VsKGQpO1xyXG5cdFx0XHRcdFx0XHRpZighcyl7R3VuLmxvZyhcIkNhbiBvbmx5IHNhdmUgYSBub2RlLCBub3QgYSBwcm9wZXJ0eS5cIik7cmV0dXJufVxyXG5cdFx0XHRcdFx0XHRndW4ucHV0KEd1bi52YWwucmVsLmlmeShzKSwgY2IsIG9wdCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHJldHVybiBndW47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFzLnJlZiA9IGFzLnJlZiB8fCAocm9vdCA9PT0gKHRtcCA9IGd1bi5CYWNrKDEpKSk/IGd1biA6IHRtcDtcclxuXHRcdFx0XHRhcy5yZWYuYW55KGFueSwge2FzOiBhcywgJy4nOiBudWxsfSk7XHJcblx0XHRcdFx0aWYoIWFzLm91dCl7XHJcblx0XHRcdFx0XHRhcy5yZXMgPSBhcy5yZXMgfHwgR3VuLm9uLnN0dW4oYXMucmVmKTtcclxuXHRcdFx0XHRcdGFzLmd1bi5fLnN0dW4gPSBhcy5yZWYuXy5zdHVuOyAvLyBUT0RPOiBCVUchIFRoZXNlIHN0dW5zIG5lZWQgdG8gYmUgYXR0YWNoZWQgYWxsIHRoZSB3YXkgZG93biwgbm90IGp1c3Qgb25lIGxldmVsLlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gaWZ5KGFzKXtcclxuXHRcdFx0XHRhcy5iYXRjaCA9IGJhdGNoO1xyXG5cdFx0XHRcdHZhciBvcHQgPSBhcy5vcHQsIGVudiA9IGFzLmVudiA9IEd1bi5zdGF0ZS5tYXAobWFwLCBvcHQuc3RhdGUpO1xyXG5cdFx0XHRcdGVudi5zb3VsID0gYXMuc291bDtcclxuXHRcdFx0XHRhcy5ncmFwaCA9IEd1bi5ncmFwaC5pZnkoYXMuZGF0YSwgZW52LCBhcyk7XHJcblx0XHRcdFx0aWYoZW52LmVycil7XHJcblx0XHRcdFx0XHQob3B0LmFueXx8bm9vcCkuY2FsbChvcHQuYXMgfHwgYXMuZ3VuLCBhcy5vdXQgPSB7ZXJyOiBHdW4ubG9nKGVudi5lcnIpfSk7XHJcblx0XHRcdFx0XHRpZihhcy5yZXMpeyBhcy5yZXMoKSB9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFzLmJhdGNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGJhdGNoKCl7IHZhciBhcyA9IHRoaXM7XHJcblx0XHRcdFx0aWYoIWFzLmdyYXBoIHx8IG9ial9tYXAoYXMuc3R1biwgbm8pKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRhcy5yZWYub24oJ291dCcsIHtcclxuXHRcdFx0XHRcdGd1bjogYXMucmVmLCBwdXQ6IGFzLm91dCA9IGFzLmVudi5ncmFwaCwgb3B0OiBhcy5vcHQsXHJcblx0XHRcdFx0XHQnIyc6IEd1bi5vbi5hc2soZnVuY3Rpb24oYWNrLCBldil7XHJcblx0XHRcdFx0XHRcdGlmKGFjayAmJiAwID09PSBhY2sub2speyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0XHRldi5vZmYoKTsgLy8gT25lIHJlc3BvbnNlIGlzIGdvb2QgZW5vdWdoIGZvciB1cyBjdXJyZW50bHkuIExhdGVyIHdlIG1heSB3YW50IHRvIGFkanVzdCB0aGlzLlxyXG5cdFx0XHRcdFx0XHRpZighYXMub3B0LmFueSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdGFzLm9wdC5hbnkuY2FsbChhcy5vcHQuYXMgfHwgYXMuZ3VuLCBhY2suZXJyLCBhY2sub2spO1xyXG5cdFx0XHRcdFx0fSwgYXMub3B0KVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGlmKGFzLnJlcyl7IGFzLnJlcygpIH1cclxuXHRcdFx0fSBmdW5jdGlvbiBubyh2LGYpeyBpZih2KXsgcmV0dXJuIHRydWUgfSB9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBtYXAodixmLG4sIGF0KXsgdmFyIGFzID0gdGhpcztcclxuXHRcdFx0XHRpZihmIHx8ICFhdC5wYXRoLmxlbmd0aCl7IHJldHVybiB9XHJcblx0XHRcdFx0dmFyIHBhdGggPSBhdC5wYXRoLCByZWYgPSBhcy5yZWYsIG9wdCA9IGFzLm9wdDtcclxuXHRcdFx0XHR2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDtcclxuXHRcdFx0XHRmb3IoaTsgaSA8IGw7IGkrKyl7XHJcblx0XHRcdFx0XHRyZWYgPSByZWYuZ2V0KHBhdGhbaV0sIG51bGwsIHtwYXRoOiB0cnVlfSk7IC8vIFRPRE86IEFQSSBjaGFuZ2UhIFdlIHdvbid0IG5lZWQgJ3BhdGg6IHRydWUnIGFueW1vcmUuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKGFzLm5vdCB8fCBHdW4ubm9kZS5zb3VsKGF0Lm9iaikpe1xyXG5cdFx0XHRcdFx0YXQuc291bChHdW4ubm9kZS5zb3VsKGF0Lm9iaikgfHwgKGFzLm9wdC51dWlkIHx8IGFzLmd1bi5CYWNrKCdvcHQudXVpZCcpIHx8IEd1bi50ZXh0LnJhbmRvbSkoKSk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdChhcy5zdHVuID0gYXMuc3R1biB8fCB7fSlbcGF0aF0gPSB0cnVlO1xyXG5cdFx0XHRcdGlmKGFzLnJlcyl7XHJcblx0XHRcdFx0XHRhcy5yZXMoMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJlZi5hbnkoc291bCwge2FzOiB7YXQ6IGF0LCBhczogYXN9LCAnLic6IG51bGx9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gc291bChhdCwgZXYpeyB2YXIgYXMgPSB0aGlzLmFzLCBjYXQgPSB0aGlzLmF0O1xyXG5cdFx0XHRcdGV2LnN0dW4oKTsgLy8gVE9ETzogQlVHIT9cclxuXHRcdFx0XHRldi5vZmYoKTtcclxuXHRcdFx0XHRjYXQuc291bChHdW4ubm9kZS5zb3VsKGNhdC5vYmopIHx8IEd1bi5ub2RlLnNvdWwoYXQucHV0KSB8fCBHdW4udmFsLnJlbC5pcyhhdC5wdXQpIHx8IChhcy5vcHQudXVpZCB8fCBhcy5ndW4uQmFjaygnb3B0LnV1aWQnKSB8fCBHdW4udGV4dC5yYW5kb20pKCkpOyAvLyBUT0RPOiBCVUchPyBEbyB3ZSByZWFsbHkgd2FudCB0aGUgc291bCBvZiB0aGUgb2JqZWN0IGdpdmVuIHRvIHVzPyBDb3VsZCB0aGF0IGJlIGRhbmdlcm91cz9cclxuXHRcdFx0XHRhcy5zdHVuW2NhdC5wYXRoXSA9IGZhbHNlO1xyXG5cdFx0XHRcdGFzLmJhdGNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGFueShhdCwgZXYpeyBcclxuXHRcdFx0XHRmdW5jdGlvbiBpbXBsaWNpdChhdCl7IC8vIFRPRE86IENMRUFOIFVQISEhISFcclxuXHRcdFx0XHRcdGlmKCFhdCB8fCAhYXQuZ2V0KXsgcmV0dXJuIH0gLy8gVE9ETzogQ0xFQU4gVVAhISEhIVxyXG5cdFx0XHRcdFx0YXMuZGF0YSA9IG9ial9wdXQoe30sIHRtcCA9IGF0LmdldCwgYXMuZGF0YSk7IC8vIFRPRE86IENMRUFOIFVQISEhISFcclxuXHRcdFx0XHRcdGF0ID0gYXQudmlhOyAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0XHRpZighYXQpeyByZXR1cm4gfSAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0XHR0bXAgPSBhdC5nZXQ7IC8vIFRPRE86IENMRUFOIFVQISEhISFcclxuXHRcdFx0XHRcdGlmKCFhdC52aWEgfHwgIWF0LnZpYS5nZXQpeyByZXR1cm4gfSAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0XHRpbXBsaWNpdChhdCk7ICAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0fSAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0dmFyIGFzID0gdGhpcztcclxuXHRcdFx0XHRpZihhdC5lcnIpeyBcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUGxlYXNlIHJlcG9ydCB0aGlzIGFzIGFuIGlzc3VlISBQdXQuYW55LmVyclwiKTtcclxuXHRcdFx0XHRcdHJldHVybiBcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGNhdCA9IGFzLnJlZi5fLCBkYXRhID0gYXQucHV0LCBvcHQgPSBhcy5vcHQsIHJvb3QsIHRtcDtcclxuXHRcdFx0XHRpZih1ID09PSBkYXRhKXtcclxuXHRcdFx0XHRcdGlmKG9wdC5pbml0IHx8IGFzLmd1bi5CYWNrKCdvcHQuaW5pdCcpKXtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0LypcclxuXHRcdFx0XHRcdFx0VE9ETzogVEhJUyBXSE9MRSBTRUNUSU9OIE5FRURTIFRPIEJFIENMRUFORUQgVVAhXHJcblx0XHRcdFx0XHRcdEltcGxpY2l0IGJlaGF2aW9yIHNob3VsZCBiZSBtdWNoIGNsZWFuZXIuIFJpZ2h0IG5vdyBpdCBpcyBoYWNreS5cclxuXHRcdFx0XHRcdCovXHJcblx0XHRcdFx0XHQvLyBUT0RPOiBCVUchISEhISEhIEFwcGFyZW50bHkgR3VuLm5vZGUuaWZ5IGRvZXNuJ3QgcHJvZHVjZSBhIHZhbGlkIEhBTSBub2RlP1xyXG5cdFx0XHRcdFx0aWYoYXMucmVmICE9PSBhcy5ndW4peyAvLyBUT0RPOiBDTEVBTiBVUCEhISEhXHJcblx0XHRcdFx0XHRcdHRtcCA9IGFzLmd1bi5fLmdldDsgLy8gVE9ETzogQ0xFQU4gVVAhISEhIVxyXG5cdFx0XHRcdFx0XHRpZighdG1wKXsgcmV0dXJuIH0gLy8gVE9ETzogQ0xFQU4gVVAhISEhIVxyXG5cdFx0XHRcdFx0XHRhcy5kYXRhID0gb2JqX3B1dCh7fSwgdG1wLCBhcy5kYXRhKTtcclxuXHRcdFx0XHRcdFx0dG1wID0gdTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKGFzLmd1bi5CYWNrKC0xKSAhPT0gY2F0LmJhY2spe1xyXG5cdFx0XHRcdFx0XHRpbXBsaWNpdChhdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgYXQuZ2V0O1xyXG5cdFx0XHRcdFx0YW55LmNhbGwoYXMsIHtcclxuXHRcdFx0XHRcdFx0cHV0OiBhcy5kYXRhLFxyXG5cdFx0XHRcdFx0XHRnZXQ6IGFzLm5vdCA9IGFzLnNvdWwgPSB0bXBcclxuXHRcdFx0XHRcdH0sIGV2KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZXYub2ZmKGV2LnN0dW4oKSk7XHJcblx0XHRcdFx0aWYoIWFzLm5vdCAmJiAhKGFzLnNvdWwgPSBHdW4ubm9kZS5zb3VsKGRhdGEpKSl7XHJcblx0XHRcdFx0XHRpZihhcy5wYXRoICYmIG9ial9pcyhhcy5kYXRhKSl7IC8vIEFwcGFyZW50bHkgbmVjZXNzYXJ5XHJcblx0XHRcdFx0XHRcdGFzLnNvdWwgPSAob3B0LnV1aWQgfHwgYXMuZ3VuLkJhY2soJ29wdC51dWlkJykgfHwgR3VuLnRleHQucmFuZG9tKSgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0LypcclxuXHRcdFx0XHRcdFx0XHRUT0RPOiBDTEVBTiBVUCEgSXMgYW55IG9mIHRoaXMgbmVjZXNzYXJ5P1xyXG5cdFx0XHRcdFx0XHQqL1xyXG5cdFx0XHRcdFx0XHRpZighYXQuZ2V0KXtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBsZWFzZSByZXBvcnQgdGhpcyBhcyBhbiBpc3N1ZSEgUHV0LmFueS5uby5zb3VsXCIpO1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQoYXMubmV4dCA9IGFzLm5leHQgfHwgR3VuLm9uLm5leHQoYXMucmVmKSkoZnVuY3Rpb24obmV4dCl7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogQlVHISBNYXliZSBkb24ndCBnbyBiYWNrIHVwIDEgYmVjYXVzZSAucHV0IGFscmVhZHkgZG9lcyB0aGF0IGlmIHJlZiBpc24ndCBhbHJlYWR5IHNwZWNpZmllZD9cclxuXHRcdFx0XHRcdFx0XHQocm9vdCA9IGFzLnJlZi5CYWNrKDEpKS5wdXQoZGF0YSA9IG9ial9wdXQoe30sIGF0LmdldCwgYXMuZGF0YSksIG9wdC5hbnksIG9wdCwge1xyXG5cdFx0XHRcdFx0XHRcdFx0b3B0OiBvcHQsXHJcblx0XHRcdFx0XHRcdFx0XHRyZWY6IHJvb3RcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHQvL0d1bi5vYmoudG8ob3B0LCB7XHJcblx0XHRcdFx0XHRcdFx0Ly9cdHJlZjogbnVsbCxcclxuXHRcdFx0XHRcdFx0XHQvL1x0Z3VuOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdC8vXHRuZXh0OiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdC8vXHRkYXRhOiBkYXRhXHJcblx0XHRcdFx0XHRcdFx0Ly99KSk7XHJcblx0XHRcdFx0XHRcdFx0Ly9uZXh0KCk7IC8vIFRPRE86IEJVRyEgTmVlZGVkPyBOb3QgbmVlZGVkP1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihhcy5yZWYgIT09IGFzLmd1biAmJiAhYXMubm90KXtcclxuXHRcdFx0XHRcdHRtcCA9IGFzLmd1bi5fLmdldDtcclxuXHRcdFx0XHRcdGlmKCF0bXApe1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBsZWFzZSByZXBvcnQgdGhpcyBhcyBhbiBpc3N1ZSEgUHV0Lm5vLmdldFwiKTsgLy8gVE9ETzogQlVHIT8/XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGFzLmRhdGEgPSBvYmpfcHV0KHt9LCB0bXAsIGFzLmRhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhcy5yZWYucHV0KGFzLmRhdGEsIG9wdC5hbnksIG9wdCwgYXMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvYmogPSBHdW4ub2JqLCBvYmpfaGFzID0gb2JqLmhhcywgb2JqX3B1dCA9IG9iai5wdXQ7XHJcblx0XHRcdHZhciB1LCBub29wID0gZnVuY3Rpb24oKXt9O1xyXG5cdFx0fSgpKTtcclxuXHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblx0XHRcdEd1bi5jaGFpbi5nZXQgPSBmdW5jdGlvbihsZXgsIGNiLCBvcHQpe1xyXG5cdFx0XHRcdGlmKCFvcHQgfHwgIW9wdC5wYXRoKXsgdmFyIGJhY2sgPSB0aGlzLkJhY2soLTEpOyB9IC8vIFRPRE86IENIQU5HSU5HIEFQSSEgUmVtb3ZlIHRoaXMgbGluZSFcclxuXHRcdFx0XHR2YXIgZ3VuLCBiYWNrID0gYmFjayB8fCB0aGlzLCBjYXQgPSBiYWNrLl87XHJcblx0XHRcdFx0dmFyIHBhdGggPSBjYXQucGF0aCB8fCBlbXB0eSwgdG1wO1xyXG5cdFx0XHRcdGlmKHR5cGVvZiBsZXggPT09ICdzdHJpbmcnKXtcclxuXHRcdFx0XHRcdGlmKCEoZ3VuID0gcGF0aFtsZXhdKSl7XHJcblx0XHRcdFx0XHRcdGd1biA9IGNhY2hlKGxleCwgYmFjayk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0aWYoIWxleCAmJiAwICE9IGxleCl7XHJcblx0XHRcdFx0XHQoZ3VuID0gYmFjay5jaGFpbigpKS5fLmVyciA9IHtlcnI6IEd1bi5sb2coJ0ludmFsaWQgZ2V0IHJlcXVlc3QhJywgbGV4KX07XHJcblx0XHRcdFx0XHRpZihjYil7IGNiLmNhbGwoZ3VuLCBndW4uXy5lcnIpIH1cclxuXHRcdFx0XHRcdHJldHVybiBndW47XHJcblx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0aWYobnVtX2lzKGxleCkpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJhY2suZ2V0KCcnK2xleCwgY2IsIG9wdCk7XHJcblx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0aWYodG1wID0gbGV4LnNvdWwpe1xyXG5cdFx0XHRcdFx0aWYoIShndW4gPSBwYXRoW3RtcF0pKXtcclxuXHRcdFx0XHRcdFx0Z3VuID0gY2FjaGUodG1wLCBiYWNrKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRtcCA9IGxleC5maWVsZCl7XHJcblx0XHRcdFx0XHRcdChvcHQgPSBvcHQgfHwge30pLnBhdGggPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZ3VuLmdldCh0bXAsIGNiLCBvcHQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGlmKHRtcCA9IGxleFtfc291bF0pe1xyXG5cdFx0XHRcdFx0aWYoIShndW4gPSBwYXRoW3RtcF0pKXtcclxuXHRcdFx0XHRcdFx0Z3VuID0gY2FjaGUodG1wLCBiYWNrKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHRtcCA9IGxleFtfZmllbGRdKXtcclxuXHRcdFx0XHRcdFx0KG9wdCA9IG9wdCB8fCB7fSkucGF0aCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdHJldHVybiBndW4uZ2V0KHRtcCwgY2IsIG9wdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRtcCA9IGNhdC5zdHVuKXtcclxuXHRcdFx0XHRcdGd1bi5fLnN0dW4gPSBndW4uXy5zdHVuIHx8IHRtcDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY2IgJiYgY2IgaW5zdGFuY2VvZiBGdW5jdGlvbil7XHJcblx0XHRcdFx0XHQoKG9wdCA9IG9wdCB8fCB7fSkuZ3VuID0gb3B0Lmd1biB8fCBndW4pLmFueShjYiwgb3B0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBjYWNoZShrZXksIGJhY2spe1xyXG5cdFx0XHRcdHZhciBjYXQgPSBiYWNrLl8sIHBhdGggPSBjYXQucGF0aCwgZ3VuID0gYmFjay5jaGFpbigpLCBhdCA9IGd1bi5fO1xyXG5cdFx0XHRcdGlmKCFwYXRoKXsgcGF0aCA9IGNhdC5wYXRoID0ge30gfVxyXG5cdFx0XHRcdHBhdGhbYXQuZ2V0ID0ga2V5XSA9IGd1bjtcclxuXHRcdFx0XHRhdC5zdHVuID0gYXQuc3R1biB8fCBjYXQuc3R1bjsgLy8gVE9ETzogQlVHISBDbGVhbiB1cCEgVGhpcyBpcyBraW5kYSB1Z2x5LiBUaGVzZSBuZWVkIHRvIGJlIGF0dGFjaGVkIGFsbCB0aGUgd2F5IGRvd24gcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGEgZ3VuIGNoYWluIGhhcyBiZWVuIGNhY2hlZCBvciBub3QgZm9yIHRoZSBmaXJzdCB0aW1lLiBcclxuXHRcdFx0XHRHdW4ub24oJ3BhdGgnLCBhdCk7XHJcblx0XHRcdFx0Ly9ndW4ub24oJ2luJywgaW5wdXQsIGF0KTsgLy8gRm9yICdpbicgaWYgSSBhZGQgbXkgb3duIGxpc3RlbmVycyB0byBlYWNoIHRoZW4gSSBNVVNUIGRvIGl0IGJlZm9yZSBpbiBnZXRzIGNhbGxlZC4gSWYgSSBsaXN0ZW4gZ2xvYmFsbHkgZm9yIGFsbCBpbmNvbWluZyBkYXRhIGluc3RlYWQgdGhvdWdoLCByZWdhcmRsZXNzIG9mIGluZGl2aWR1YWwgbGlzdGVuZXJzLCBJIGNhbiB0cmFuc2Zvcm0gdGhlIGRhdGEgdGhlcmUgYW5kIHRoZW4gYXMgd2VsbC5cclxuXHRcdFx0XHRndW4ub24oJ291dCcsIG91dHB1dCwgYXQpOyAvLyBIb3dldmVyIGZvciBvdXRwdXQsIHRoZXJlIGlzbid0IHJlYWxseSB0aGUgZ2xvYmFsIG9wdGlvbi4gSSBtdXN0IGxpc3RlbiBieSBhZGRpbmcgbXkgb3duIGxpc3RlbmVyIGluZGl2aWR1YWxseSBCRUZPUkUgdGhpcyBvbmUgaXMgZXZlciBjYWxsZWQuXHJcblx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBvdXRwdXQoYXQpe1xyXG5cdFx0XHRcdHZhciBjYXQgPSB0aGlzLCBndW4gPSBjYXQuZ3VuLCByb290ID0gZ3VuLkJhY2soLTEpLCBwdXQsIGdldCwgdG1wO1xyXG5cdFx0XHRcdGlmKCFhdC5ndW4pe1xyXG5cdFx0XHRcdFx0YXQuZ3VuID0gZ3VuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKDEwLCAnb3V0JywgY2F0LmdldCwgYXQuZ2V0KTtcclxuXHRcdFx0XHRpZihhdC5nZXQgJiYgIWF0LmdldFtfc291bF0pe1xyXG5cdFx0XHRcdFx0aWYodHlwZW9mIGF0LmdldCA9PT0gJ3N0cmluZycpeyAvLyByZXF1ZXN0IGZvciBzb3VsIVxyXG5cdFx0XHRcdFx0XHRpZihjYXQuYXNrKXtcclxuXHRcdFx0XHRcdFx0XHRpZihjYXQuYXNrW2F0LmdldF0pe1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRjYXQuYXNrW2F0LmdldF0gPSBhdFsnIyddIHx8IDE7XHJcblx0XHRcdFx0XHRcdFx0Y2F0Lm9uKCdpbicsIGZ1bmN0aW9uKHRhYywgZXYpeyBldi5vZmYoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZhciB0bXAgPSB0YWMucHV0O1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHUgIT09IHRtcFthdC5nZXRdICYmICh0bXAgPSAoY2F0LnBhdGh8fGVtcHR5KVthdC5nZXRdKSl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcCA9IHRtcC5fO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAuY2hhbmdlID0gdGFjLnB1dFthdC5nZXRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAucHV0ID0gdGFjLnB1dFthdC5nZXRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBDb3VsZCB3ZSBwYXNzIGl0IHRvIGlucHV0L21hcCBmdW5jdGlvbiBzaW5jZSB0aGV5IGFscmVhZHkgZG8gdGhpcz9cclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLm9uKCdpbicsIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRnZXQ6IGF0LmdldCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwdXQ6IHRhYy5wdXRbYXQuZ2V0XSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRndW46IHRtcC5ndW4sXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmlhOiB0YWNcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoISh0bXAgPSBHdW4ubm9kZS5zb3VsKHRtcCA9IHRhYy5wdXQpIHx8IEd1bi52YWwucmVsLmlzKHRtcCkpKXtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1wID0gKGNhdC5wYXRofHxlbXB0eSlbYXQuZ2V0XTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIXRtcCl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcC5vbignaW4nLCB7Z2V0OiBhdC5nZXQsIGd1bjp0bXAsIHZpYTogdGFjfSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGNhdC5hc2tbYXQuZ2V0XSA9IDA7XHJcblx0XHRcdFx0XHRcdFx0XHR0bXAgPSB7JyMnOiB0bXAsICcuJzogYXQuZ2V0fTtcclxuXHRcdFx0XHRcdFx0XHRcdHRtcCA9IHtndW46IGF0Lmd1biwgZ2V0OiB0bXB9O1xyXG5cdFx0XHRcdFx0XHRcdFx0dG1wWycjJ10gPSBHdW4ub24uYXNrKGFjaywgdG1wKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF0Lmd1bi5vbignb3V0JywgdG1wKTtcclxuXHRcdFx0XHRcdFx0XHR9KS5vZmYoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y2F0LmFzayA9IG9ial9wdXQoe30sIGF0LmdldCwgYXRbJyMnXSB8fCAxKTtcclxuXHRcdFx0XHRcdFx0Z3VuLm9uKCdpbicsIGlucHV0LCBjYXQpO1xyXG5cdFx0XHRcdFx0XHRpZihyb290ID09PSBjYXQuYmFjayl7XHJcblx0XHRcdFx0XHRcdFx0Y2F0LmFza1thdC5nZXRdID0gMDtcclxuXHRcdFx0XHRcdFx0XHR0bXAgPSB7JyMnOiBjYXQuZ2V0LCAnLic6IGF0LmdldH07XHJcblx0XHRcdFx0XHRcdFx0dG1wID0ge2d1bjogYXQuZ3VuLCBnZXQ6IHRtcH07XHJcblx0XHRcdFx0XHRcdFx0dG1wWycjJ10gPSBHdW4ub24uYXNrKGFjaywgdG1wKTtcclxuXHRcdFx0XHRcdFx0XHRhdC5ndW4ub24oJ291dCcsIHRtcCk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoNywgJ291dCcsIGNhdC5nZXQsIGF0LmdldCwgY2F0LmFzayk7XHJcblx0XHRcdFx0XHRcdGNhdC5iYWNrLm9uKCdvdXQnLCB7XHJcblx0XHRcdFx0XHRcdFx0Z3VuOiBjYXQuZ3VuLFxyXG5cdFx0XHRcdFx0XHRcdGdldDogY2F0LmdldFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0XHRpZihhdC5nZXQgaW5zdGFuY2VvZiBGdW5jdGlvbil7XHJcblx0XHRcdFx0XHRcdGlmKCFjYXQuYXNrKXtcclxuXHRcdFx0XHRcdFx0XHR2YXIgb3B0ID0gYXQub3B0IHx8IHt9O1xyXG5cdFx0XHRcdFx0XHRcdHRtcCA9IG9ial9oYXMob3B0LCAnLicpOyAvLyBUT0RPOiBDTEVBTiBVUCFcclxuXHRcdFx0XHRcdFx0XHRjYXQuYXNrID0gdG1wPyB7fSA6IHtfOjF9OyAvLyBUT0RPOiBDTEVBTiBVUCFcclxuXHRcdFx0XHRcdFx0XHRndW4ub24oJ2luJywgaW5wdXQsIGNhdCk7XHJcblx0XHRcdFx0XHRcdFx0aWYocm9vdCA9PT0gY2F0LmJhY2spe1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYoY2F0LmFzayAmJiBjYXQuYXNrLl8peyBjYXQuYXNrLl8gPSAwIH0gLy8gVE9ETzogQ0xFQU4gVVAhXHJcblx0XHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgb3B0WycuJ10peyBjYXQuYXNrW29wdFsnLiddXSA9IDAgfSAvLyBUT0RPOiBDTEVBTiBVUCFcclxuXHRcdFx0XHRcdFx0XHRcdHRtcCA9IHRtcD8geycjJzogY2F0LmdldCwgJy4nOiBvcHRbJy4nXX0gOiB7JyMnOiBjYXQuZ2V0fTsgLy8gVE9ETzogQ0xFQU4gVVAhXHJcblx0XHRcdFx0XHRcdFx0XHR0bXAgPSB7Z3VuOiBhdC5ndW4sIGdldDogdG1wfTtcclxuXHRcdFx0XHRcdFx0XHRcdHRtcFsnIyddID0gR3VuLm9uLmFzayhhY2ssIHRtcCk7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXQuYmFjay5vbignb3V0JywgdG1wKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1Zyg2LCAnb3V0JywgY2F0LmdldCk7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXQuYmFjay5vbignb3V0Jywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRndW46IGNhdC5ndW4sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGdldDogY2F0LmdldFxyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoOSwgJ291dCcsIGNhdC5nZXQpO1xyXG5cdFx0XHRcdFx0XHRpZihjYXQuc3R1biAmJiBjYXQuc3R1bihhdCkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0XHRndW4ub24oJ2luJywgYXQuZ2V0LCBhdCk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0LmJhY2sub24oJ291dCcsIGF0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBpbnB1dChhdCwgZXYpeyB2YXIgY2F0ID0gdGhpcywgdG1wO1xyXG5cdFx0XHRcdGNhdC5pZCA9IGNhdC5pZCB8fCBHdW4udGV4dC5yYW5kb20oNSk7IC8vIFRPRDogQlVHISBUaGlzIGFsbG93cyBmb3IgMUIgaXRlbSBlbnRyb3B5IGluIG1lbW9yeS4gSW4gdGhlIGZ1dHVyZSwgcGVvcGxlIG1pZ2h0IHdhbnQgdG8gZXhwYW5kIHRoaXMgdG8gYmUgbGFyZ2VyLlxyXG5cdFx0XHRcdGlmKGF0LmVycil7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBsZWFzZSByZXBvcnQgdGhpcyBhcyBhbiBpc3N1ZSEgSW4uZXJyXCIpOyAvLyBUT0RPOiBCVUchXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoMTAsICdpbnB1dCcsIGF0LCBjYXQuZ2V0KTtcclxuXHRcdFx0XHRpZih2YWx1ZS5jYWxsKGNhdCwgYXQsIGV2KSl7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHRtcCA9IGNhdC5saW5rKXtcclxuXHRcdFx0XHRcdGlmKHRtcCA9IHRtcC5yZXMpe1xyXG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBCVUchIE9yZGVyaW5nIG9mIHRoZSBjaGFuZ2Ugc2V0PyBXaGF0IGlmIHRoZSBwcm94aWVkIG9iamVjdCBoYXMgYSBjaGFuZ2UgYnV0IHRoZSBwYXJlbnQgaGFzIGEgaGFwcGVuZWQgdG9vLiBQcmV0ZW5kIHRoYXQgdGhlIHBhcmVudCBjaGFuZ2VkIHRoZSBmaWVsZCBzdWNoIHRoYXQgaXQgbm8gbG9uZ2VyIHBvaW50IHRvIHRoZSBwcm94eS4gQnV0IGluIHRoZSBjaGFuZ2VzZXQgaXQgbWlnaHQgZ2V0IGl0ZXJhdGVkIG92ZXIgbGFzdCwgdGh1cyBpdCB0aGUgdXBkYXRlIHdpbGwgZ2V0IHRyaWdnZXJlZCBoZXJlIG5vdyBmb3IgdGhlIHByb3h5LCBldmVuIHRob3VnaCB0aGlzIHVwZGF0ZSBpcyBzdXBwb3NlIHRvIHVuc3Vic2NyaWJlIGl0c2VsZi4gT3Igd2hhdCBpZiB0aGlzIG9yZGVyaW5nIGlzIGluY29uc2lzdGVudD8gT3IgaXMgdGhpcyBqdXN0IGJhc2ljYWxseSBpbXBvc3NpYmxlIGZyb20gdGhlIEFQSSdzIHB1dCBwZXJzcGVjdGl2ZT9cclxuXHRcdFx0XHRcdFx0dG1wKGNhdCk7IC8vIFRPRE86IEJVRyEgV2hhdCBhYm91dCB2aWE/IERvIHdlIG5lZWQgdG8gY2xvbmUgdGhpcz9cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b2JqX21hcChjYXQuY2hhbmdlLCBtYXAsIHthdDogYXQsIGNhdDogY2F0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0R3VuLmNoYWluLmdldC5pbnB1dCA9IGlucHV0O1xyXG5cdFx0XHRmdW5jdGlvbiB2YWx1ZShhdCwgZXYpe1xyXG5cdFx0XHRcdC8vdmFyIGNhdCA9IHRoaXMsIGlzID0gKHUgPT09IGF0LnB1dCkgfHwgR3VuLnZhbC5pcyhhdC5wdXQpLCByZWwgPSBHdW4udmFsLnJlbC5pcyhhdC5wdXQpLCB0bXAsIHU7XHJcblx0XHRcdFx0dmFyIGNhdCA9IHRoaXMsIHB1dCA9IGNhdC5jaGFuZ2UsIHJlbCwgdG1wLCB1O1xyXG5cdFx0XHRcdGlmKHUgPT09IHB1dCl7XHJcblx0XHRcdFx0XHRub3QoY2F0LCBhdCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoIWNhdC5saW5rICYmIEd1bi5ub2RlLnNvdWwocHV0KSAmJiAocmVsID0gR3VuLm5vZGUuc291bChhdC5wdXQpKSl7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygxMSwgJ3ZhbHVlJywgcHV0KTtcclxuXHRcdFx0XHRcdGFzayhjYXQsIHJlbCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCEocmVsID0gR3VuLnZhbC5yZWwuaXMocHV0KSkpe1xyXG5cdFx0XHRcdFx0aWYoIUd1bi52YWwuaXMocHV0KSl7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdG5vdChjYXQsIGF0KTtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2NhdC5jaGFuZ2UgPSBhdC5wdXQ7XHJcblx0XHRcdFx0aWYoY2F0Lmxpbmspe1xyXG5cdFx0XHRcdFx0aWYocmVsID09PSBjYXQubGluay5yZWwpe1xyXG5cdFx0XHRcdFx0XHRldi5zdHVuKCk7XHJcblx0XHRcdFx0XHRcdHRtcCA9IGNhdC5saW5rLnJlZi5fO1xyXG5cdFx0XHRcdFx0XHRjYXQuY2hhbmdlID0gdG1wLmNoYW5nZTtcclxuXHRcdFx0XHRcdFx0Y2F0LnB1dCA9IGF0LnB1dCA9IHRtcC5wdXQ7IC8vIFRPRE86IEJVRyEgTXV0YXRpbmcgYXQgZXZlbnQ/IE5lZWRlZCBmb3IgY2VydGFpbiB0ZXN0cywgYnV0IGlzIHRoaXMgYmFkP1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRub3QoY2F0LCBhdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRtcCA9IGV2LnN0dW4odG1wKTtcclxuXHRcdFx0XHQvL2NhdC5wdXQgPSB1OyAvLyBGb3IgcGVyZm9ybWFuY2Ugc2FrZSwgZG8gdGhpcyBub3cgdG8gcHJldmVudCBgLnZhbGAgZnJvbSBmaXJpbmcuXHJcblx0XHRcdFx0dG1wID0gY2F0LmxpbmsgPSB7cmVsOiByZWwsIHJlZjogY2F0Lmd1bi5CYWNrKC0xKS5nZXQocmVsKSwgcmVzOiB0bXAsIGFzOiBjYXR9O1xyXG5cdFx0XHRcdC8vIFRPRE86IEJVRz8/Pz8gQmVsb3cgYWxsb3dzIHN1YnNjcmlwdGlvbnMgdG8gaGFwcGVuIHdpdGhvdXQgdGhlIHNvdWwgaXRzZWxmIGJlaW5nIHN1YnNjcmliZWQuIFdpbGwgdGhpcyBjYXVzZSBwcm9ibGVtcz8gSSB0aGluayBpdCBzaG91bGQgYmUgb2theS4gTm90IHN1cmUgd2hhdCB0ZXN0IGlzIG5lY2Vzc2FyeS5cclxuXHRcdFx0XHR0bXAuc3ViID0gdG1wLnJlZi5fLm9uKCdpbicsIHByb3h5LCB0bXApOyAvLyBUT0RPOiBCVUchIElmIHNvbWVib2R5IGRvZXMgYC5vZmZgIGhvdyBkbyB3ZSBjbGVhbiB1cCB0aGVzZSB0aGluZ3MgZnJvbSBtZW1vcnk/XHJcblx0XHRcdFx0aWYodG1wLnJhbil7IHJldHVybiB9XHJcblx0XHRcdFx0YXNrKGNhdCwgcmVsKTtcclxuXHRcdFx0XHRpZighdG1wLnJhbil7XHJcblx0XHRcdFx0XHR0bXAucmVzKCk7IC8vIFRoaXMgaXMgbmVjZXNzYXJ5IGZvciB0aGluZ3MgdGhhdCBsaXN0ZW4gZm9yIGEgc291bCBvciByZWxhdGlvbiBvbmx5LlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBtYXAoZGF0YSwga2V5KXsgLy8gTWFwIG92ZXIgb25seSB0aGUgY2hhbmdlcyBvbiBldmVyeSB1cGRhdGUuXHJcblx0XHRcdFx0aWYoR3VuLl8ubWV0YSA9PT0ga2V5KXsgcmV0dXJuIH1cclxuXHRcdFx0XHR2YXIgY2F0ID0gdGhpcy5jYXQsIHBhdGggPSBjYXQucGF0aCB8fCB7fSwgZ3VuLCBhdCwgdG1wO1xyXG5cdFx0XHRcdGlmKCEoZ3VuID0gcGF0aFtrZXldKSl7IHJldHVybiB9XHJcblx0XHRcdFx0aWYoY2F0LnB1dCAmJiBvYmpfaGFzKGNhdC5wdXQsIGtleSkpeyBkYXRhID0gY2F0LnB1dFtrZXldIH0gLy8gQnV0IHVzZSB0aGUgYWN0dWFsIGRhdGEuXHJcblx0XHRcdFx0KGF0ID0gZ3VuLl8pLmNoYW5nZSA9IGNhdC5jaGFuZ2Vba2V5XTtcclxuXHRcdFx0XHRhdC5wdXQgPSBkYXRhO1xyXG5cdFx0XHRcdGlmKHRtcCA9IEd1bi52YWwucmVsLmlzKGF0LnB1dCkpeyAvLyBQRVJGT1JNQU5DRSBIQUNLIVxyXG5cdFx0XHRcdFx0aWYodG1wID0gZ3VuLkJhY2soLTEpLmdldCh0bXApLl8ucHV0KXsgLy8gUEVSRk9STUFOQ0UgSEFDSyFcclxuXHRcdFx0XHRcdFx0YXQucHV0ID0gZGF0YSA9IHRtcDsgLy8gUEVSRk9STUFOQ0UgSEFDSyFcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Z3VuLm9uKCdpbicsIHtcclxuXHRcdFx0XHRcdHB1dDogZGF0YSxcclxuXHRcdFx0XHRcdGdldDoga2V5LFxyXG5cdFx0XHRcdFx0Z3VuOiBndW4sXHJcblx0XHRcdFx0XHR2aWE6IHRoaXMuYXRcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBub3QoY2F0LCBhdCl7XHJcblx0XHRcdFx0dmFyIHRtcCwgdTtcclxuXHRcdFx0XHR0bXAgPSBjYXQubGluaztcclxuXHRcdFx0XHRpZih1ICE9PSBjYXQucHV0KXsgY2F0LmxpbmsgPSBudWxsOyB9IC8vIFRPRE86IEJVRyEgVGhpcyBtYXkgbWVhbiBgbm90YCB3aWxsIGJlIGZpcmVkIG11bHRpcGxlIHRpbWVzIHVudGlsIGRhdGEgaXMgZm91bmQuIElzIHRoaXMgb2theT9cclxuXHRcdFx0XHRpZihudWxsID09PSB0bXApeyByZXR1cm4gfVxyXG5cdFx0XHRcdGlmKHRtcCl7XHJcblx0XHRcdFx0XHRpZih0bXAuc3ViKXtcclxuXHRcdFx0XHRcdFx0dG1wLnN1Yi5vZmYoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRtcC5zdWIgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b2JqX21hcChjYXQuYXNrLCBmdW5jdGlvbih2LGtleSl7XHJcblx0XHRcdFx0XHRjYXQuYXNrW2tleV0gPSAxO1xyXG5cdFx0XHRcdFx0aWYoISh2ID0gKGNhdC5wYXRofHxlbXB0eSlba2V5XSkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0KHRtcCA9IHYuXykucHV0ID0gdG1wLmNoYW5nZSA9IHU7XHJcblx0XHRcdFx0XHR2Lm9uKCdpbicsIHtnZXQ6IGtleSwgcHV0OiB1LCBndW46IHYsIHZpYTogYXR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBhc2soY2F0LCBzb3VsKXtcclxuXHRcdFx0XHRpZighY2F0LmFzayl7IHJldHVybiB9XHJcblx0XHRcdFx0dmFyIHRtcCA9IGNhdC5hc2ssIGxleDtcclxuXHRcdFx0XHRpZihvYmpfaGFzKHRtcCwgJ18nKSl7XHJcblx0XHRcdFx0XHRpZighdG1wLl8peyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0dG1wLl8gPSAwO1xyXG5cdFx0XHRcdFx0bGV4ID0ge2d1bjogY2F0Lmd1biwgZ2V0OiB7JyMnOiBzb3VsfX07XHJcblx0XHRcdFx0XHRsZXhbJyMnXSA9IEd1bi5vbi5hc2soYWNrLCBsZXgpO1xyXG5cdFx0XHRcdFx0Y2F0Lmd1bi5vbignb3V0JywgbGV4KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVE9ETzogUEVSRiEgTWFrZSBpdCBzbyB3ZSBkbyBub3QgaGF2ZSB0byBpdGVyYXRlIHRocm91Z2ggdGhpcyBldmVyeSB0aW1lP1xyXG5cdFx0XHRcdG9ial9tYXAodG1wLCBmdW5jdGlvbih2LGtleSl7XHJcblx0XHRcdFx0XHRpZighdiB8fCAoY2F0LnB1dCAmJiBjYXQucHV0W2tleV0pKXsgcmV0dXJuIH0gLy8gVE9ETzogVGhpcyBzZWVtcyBsaWtlIGFuIG9wdGltaXphdGlvbj8gQnV0IGRvZXMgaXQgaGF2ZSBzaWRlIGVmZmVjdHM/IFByb2JhYmx5IG5vdCB3aXRob3V0IHRoZSB0bXBba2V5XSA9IDA7XHJcblx0XHRcdFx0XHRpZighKHYgPSAoY2F0LnBhdGh8fGVtcHR5KVtrZXldKSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHR0bXBba2V5XSA9IDA7XHJcblx0XHRcdFx0XHRsZXggPSB7Z3VuOiB2LCBnZXQ6IHsnIyc6IHNvdWwsICcuJzoga2V5fX07XHJcblx0XHRcdFx0XHRsZXhbJyMnXSA9IEd1bi5vbi5hc2soYWNrLCBsZXgpO1xyXG5cdFx0XHRcdFx0di5vbignb3V0JywgbGV4KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBwcm94eShhdCwgZXYpeyB2YXIgbGluayA9IHRoaXM7XHJcblx0XHRcdFx0bGluay5yYW4gPSB0cnVlO1xyXG5cdFx0XHRcdGlmKGZhbHNlID09PSBsaW5rLnN1Yil7IHJldHVybiBldi5vZmYoKSB9IC8vIHdpbGwgdGhpcyBhdXRvIGNsZWFuIGl0c2VsZiB1cD9cclxuXHRcdFx0XHRsaW5rLmFzLmNoYW5nZSA9IGxpbmsucmVmLl8uY2hhbmdlO1xyXG5cdFx0XHRcdGxpbmsuYXMucHV0ID0gYXQucHV0O1xyXG5cdFx0XHRcdGlucHV0LmNhbGwobGluay5hcywgYXQsIGV2KTsgLy8gVE9ETzogQlVHISBXaGF0IGFib3V0IHZpYT8gRG8gd2UgbmVlZCB0byBjbG9uZSB0aGlzP1xyXG5cdFx0XHR9XHJcblx0XHRcdEd1bi5jaGFpbi5hbnkgPSBmdW5jdGlvbihhbnksIG9wdCl7XHJcblx0XHRcdFx0aWYoIWFueSl7IHJldHVybiB0aGlzIH1cclxuXHRcdFx0XHR2YXIgY2hhaW4gPSB0aGlzLCBjYXQgPSBjaGFpbi5fLCBvcHQgPSBvcHQgfHwge30sIGxhc3QgPSB7fTsvL2Z1bmN0aW9uKCl7fTtcclxuXHRcdFx0XHRpZihvcHQuY2hhbmdlKXsgb3B0LmNoYW5nZSA9IDEgfVxyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoNSwgJ2FueScpO1xyXG5cdFx0XHRcdGNoYWluLm9uKCdvdXQnLCB7Z2V0OiBmdW5jdGlvbihhdCwgZXYpe1xyXG5cdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiYW55IVwiLCBhdCk7XHJcblx0XHRcdFx0XHRcdGlmKCFhdC5ndW4peyBjb25zb2xlLmxvZygnJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSVFWFBMT0RFJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUnLCBhdCkgfVxyXG5cdFx0XHRcdFx0XHR2YXIgZ3VuID0gYXQuZ3VuIHx8IGNoYWluLCBjYXQgPSBndW4uXztcclxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSBjYXQucHV0IHx8IGF0LnB1dCwgdG1wO1xyXG5cdFx0XHRcdFx0XHRpZigodG1wID0gYXQucHV0KSAmJiB0bXBbR3VuLnZhbC5yZWwuX10gJiYgKHRtcCA9IEd1bi52YWwucmVsLmlzKHRtcCkpKXtcclxuXHRcdFx0XHRcdFx0XHRpZihudWxsICE9PSBvcHRbJy4nXSl7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGF0ID0gb2JqX3RvKGF0LCB7cHV0OiBkYXRhID0gY2F0LmNoYW5nZSA9IGNhdC5wdXQgPSBHdW4uc3RhdGUuaWZ5KEd1bi5ub2RlLmlmeSh7fSwgdG1wKSl9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBCVUchIE5lZWQgdG8gdXNlIGF0LnB1dCA+IGNhdC5wdXQgZm9yIG1lcmdlZCBjYWNoZT9cclxuXHRcdFx0XHRcdFx0aWYodG1wID0gb3B0LmNoYW5nZSl7IC8vIFRPRE86IEJVRyEgT3B0IGlzIG91dGVyIHNjb3BlLCBndW4vY2F0L2RhdGEgbWlnaHQgYmUgaXRlcmF0aXZlIGFuZCB0aHVzIG9ubHkgaW5uZXIgc2NvcGU/IEFrYSwgd2UgY2FuJ3QgdXNlIGl0IGZvciBhbGwgb2YgdGhlbS4gXHJcblx0XHRcdFx0XHRcdFx0aWYoMSA9PT0gdG1wKXtcclxuXHRcdFx0XHRcdFx0XHRcdG9wdC5jaGFuZ2UgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRkYXRhID0gY2F0LmNoYW5nZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF0ID0gb2JqX3RvKGF0LCB7cHV0OiBkYXRhfSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHZhciBpZCA9IGNhdC5pZCthdC5nZXQ7XHJcblx0XHRcdFx0XHRcdC8qXHJcblx0XHRcdFx0XHRcdGlmKGxhc3RbaWRdID09IGRhdGEgJiYgb2JqX2hhcyhsYXN0LCBpZCkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0XHRsYXN0W2lkXSA9IGRhdGE7IC8vIFRPRE86IFBFUkYhIE1lbW9yeSBvcHRpbWl6YWl0b24/IENhbiB3ZSBhdm9pZCB0aGlzLlxyXG5cdFx0XHRcdFx0XHQqL1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmKGxhc3QucHV0ID09PSBkYXRhICYmIGxhc3QuZ2V0ID09PSBpZCl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdGxhc3QuZ2V0ID0gaWQ7XHJcblx0XHRcdFx0XHRcdGxhc3QucHV0ID0gZGF0YTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNhdC5sYXN0ID0gZGF0YTtcclxuXHRcdFx0XHRcdFx0aWYob3B0LmFzKXtcclxuXHRcdFx0XHRcdFx0XHRhbnkuY2FsbChvcHQuYXMsIGF0LCBldik7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0YW55LmNhbGwoZ3VuLCBhdC5lcnIsIGRhdGEsIGF0LmdldCwgY2F0LCBldik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIG9wdDogb3B0XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIGNoYWluO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIGFjayhhdCwgZXYpeyB2YXIgbGV4ID0gdGhpcy5nZXQsIGNoYWluID0gdGhpcy5ndW47XHJcblx0XHRcdFx0dmFyIHMgPSBsZXhbJyMnXSwgZiA9IGxleFsnLiddLCByb290ID0gYXQuZ3VuLkJhY2soLTEpLCBndW4gPSByb290LmdldChzKSwgdG1wO1xyXG5cdFx0XHRcdGlmKHRtcCA9IGF0LnB1dCl7XHJcblx0XHRcdFx0XHRpZighZiB8fCBvYmpfaGFzKHRtcFtzXSwgZikpe1xyXG5cdFx0XHRcdFx0XHRldi5vZmYoKTtcclxuXHRcdFx0XHRcdFx0YXRbJ0AnXSA9IDA7XHJcblx0XHRcdFx0XHRcdHJldHVybiByb290Lm9uKCdpbicsIGF0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8qXHJcblx0XHRcdFx0XHRpZighdG1wW3NdICYmICFvYmpfZW1wdHkodG1wKSl7IC8vIFRPRE86IEJVRyEgU2VlbXMgbGlrZSBpdCBqdXN0IGNhdXNlcyB1bm5lY2Vzc2FyeSBkYXRhL2V2ZW50IHRvIGJlIHRyaWdnZXJlZC4gTm90aGluZyBnZW51aW5lbHkgdXNlZnVsLlxyXG5cdFx0XHRcdFx0XHRldi5vZmYoKTsgLy8gVE9ETzogQlVHIT8gSXQgaXNuJ3QgbWF0Y2hpbmcgZGF0YSBieSBsZXggbWVhbnMsIGJ1dCBpdCBJUyBhIHJlcGx5P1xyXG5cdFx0XHRcdFx0XHRhdFsnQCddID0gMDtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHJvb3Qub24oJ2luJywgYXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ki9cclxuXHRcdFx0XHRcdGlmKGYgJiYgZ3VuLl8ucHV0KXtcclxuXHRcdFx0XHRcdFx0Z3VuID0gZ3VuLmdldChmLCBudWxsLCB7cGF0aDp0cnVlfSk7XHJcblx0XHRcdFx0XHRcdGlmKCFjaGFpbil7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQbGVhc2UgcmVwb3J0IHRoaXMgYXMgYW4gaXNzdWUhIGFjay5jaGFpblwiKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y2hhaW4ub24oJ2luJywge1xyXG5cdFx0XHRcdFx0XHRcdGVycjogYXQuZXJyLFxyXG5cdFx0XHRcdFx0XHRcdGdldDogZixcclxuXHRcdFx0XHRcdFx0XHRndW46IGNoYWluLFxyXG5cdFx0XHRcdFx0XHRcdHZpYToge2dldDpzLHZpYTphdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoZ3VuLl8ucHV0KXtcclxuXHRcdFx0XHRcdGd1biA9IGd1bi5nZXQoZiwgbnVsbCwge3BhdGg6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0Z3VuLm9uKCdpbicsIHtcclxuXHRcdFx0XHRcdFx0ZXJyOiBhdC5lcnIsXHJcblx0XHRcdFx0XHRcdGdldDogZixcclxuXHRcdFx0XHRcdFx0Z3VuOiBndW4sXHJcblx0XHRcdFx0XHRcdHZpYToge2dldDpzLHZpYTphdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRndW4ub24oJ2luJywge1xyXG5cdFx0XHRcdFx0ZXJyOiBhdC5lcnIsXHJcblx0XHRcdFx0XHRwdXQ6IGF0LnB1dD8gYXQucHV0W3NdIHx8IGF0LnB1dCA6IGF0LnB1dCxcclxuXHRcdFx0XHRcdGdldDogcyxcclxuXHRcdFx0XHRcdGd1bjogZ3VuLFxyXG5cdFx0XHRcdFx0dmlhOiBhdFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvYmogPSBHdW4ub2JqLCBvYmpfaGFzID0gb2JqLmhhcywgb2JqX3RvID0gb2JqLnRvO1xyXG5cdFx0XHR2YXIgZW1wdHkgPSB7fSwgdTtcclxuXHRcdFx0dmFyIF9zb3VsID0gR3VuLl8uc291bCwgX2ZpZWxkID0gR3VuLl8uZmllbGQsIF9zaWQgPSBHdW4ub24uYXNrLl8sIF9yaWQgPSBHdW4ub24uYWNrLl87XHJcblx0XHR9KCkpO1xyXG5cclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3VuLmNoYWluLmtleSA9IGZ1bmN0aW9uKGluZGV4LCBjYiwgb3B0KXtcclxuXHRcdFx0XHRpZighaW5kZXgpe1xyXG5cdFx0XHRcdFx0aWYoY2Ipe1xyXG5cdFx0XHRcdFx0XHRjYi5jYWxsKHRoaXMsIHtlcnI6IEd1bi5sb2coJ05vIGtleSEnKX0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHZhciBndW4gPSB0aGlzO1xyXG5cdFx0XHRcdGlmKHR5cGVvZiBvcHQgPT09ICdzdHJpbmcnKXtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUGxlYXNlIHJlcG9ydCB0aGlzIGFzIGFuIGlzc3VlISBrZXkub3B0LnN0cmluZ1wiKTtcclxuXHRcdFx0XHRcdHJldHVybiBndW47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKGd1biA9PT0gZ3VuLl8ucm9vdCl7aWYoY2Ipe2NiKHtlcnI6IEd1bi5sb2coXCJDYW4ndCBkbyB0aGF0IG9uIHJvb3QgaW5zdGFuY2UuXCIpfSl9O3JldHVybiBndW59XHJcblx0XHRcdFx0b3B0ID0gb3B0IHx8IHt9O1xyXG5cdFx0XHRcdG9wdC5rZXkgPSBpbmRleDtcclxuXHRcdFx0XHRvcHQuYW55ID0gY2IgfHwgZnVuY3Rpb24oKXt9O1xyXG5cdFx0XHRcdG9wdC5yZWYgPSBndW4uQmFjaygtMSkuZ2V0KG9wdC5rZXkpO1xyXG5cdFx0XHRcdG9wdC5ndW4gPSBvcHQuZ3VuIHx8IGd1bjtcclxuXHRcdFx0XHRndW4ub24oa2V5LCB7YXM6IG9wdH0pO1xyXG5cdFx0XHRcdGlmKCFvcHQuZGF0YSl7XHJcblx0XHRcdFx0XHRvcHQucmVzID0gR3VuLm9uLnN0dW4ob3B0LnJlZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBndW47XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24ga2V5KGF0LCBldil7IHZhciBvcHQgPSB0aGlzO1xyXG5cdFx0XHRcdGV2Lm9mZigpO1xyXG5cdFx0XHRcdG9wdC5zb3VsID0gR3VuLm5vZGUuc291bChhdC5wdXQpO1xyXG5cdFx0XHRcdGlmKCFvcHQuc291bCB8fCBvcHQua2V5ID09PSBvcHQuc291bCl7IHJldHVybiBvcHQuZGF0YSA9IHt9IH1cclxuXHRcdFx0XHRvcHQuZGF0YSA9IG9ial9wdXQoe30sIGtleWVkLl8sIEd1bi5ub2RlLmlmeShvYmpfcHV0KHt9LCBvcHQuc291bCwgR3VuLnZhbC5yZWwuaWZ5KG9wdC5zb3VsKSksICcjJytvcHQua2V5KycjJykpXHJcblx0XHRcdFx0aWYob3B0LnJlcyl7XHJcblx0XHRcdFx0XHRvcHQucmVzKDEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcHQucmVmLnB1dChvcHQuZGF0YSwgb3B0LmFueSwge3NvdWw6IG9wdC5rZXksIGtleTogb3B0LmtleX0pO1xyXG5cdFx0XHRcdGlmKG9wdC5yZXMpe1xyXG5cdFx0XHRcdFx0b3B0LnJlcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBrZXllZChmKXtcclxuXHRcdFx0XHRpZighZiB8fCAhKCcjJyA9PT0gZlswXSAmJiAnIycgPT09IGZbZi5sZW5ndGgtMV0pKXsgcmV0dXJuIH1cclxuXHRcdFx0XHR2YXIgcyA9IGYuc2xpY2UoMSwtMSk7XHJcblx0XHRcdFx0aWYoIXMpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHJldHVybiBzO1xyXG5cdFx0XHR9XHJcblx0XHRcdGtleWVkLl8gPSAnIyMnO1xyXG5cdFx0XHRHdW4ub24oJ3BhdGgnLCBmdW5jdGlvbihhdCl7XHJcblx0XHRcdFx0dmFyIGd1biA9IGF0Lmd1bjtcclxuXHRcdFx0XHRpZihndW4uQmFjaygtMSkgIT09IGF0LmJhY2speyByZXR1cm4gfVxyXG5cdFx0XHRcdGd1bi5vbignaW4nLCBwc2V1ZG8sIGd1bi5fKTtcclxuXHRcdFx0XHRndW4ub24oJ291dCcsIG5vcm1hbGl6ZSwgZ3VuLl8pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZnVuY3Rpb24gbm9ybWFsaXplKGF0KXsgdmFyIGNhdCA9IHRoaXM7XHJcblx0XHRcdFx0aWYoIWF0LnB1dCl7XHJcblx0XHRcdFx0XHRpZihhdC5nZXQpe1xyXG5cdFx0XHRcdFx0XHRzZWFyY2guY2FsbChjYXQsIGF0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoYXQub3B0ICYmIGF0Lm9wdC5rZXkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHZhciBwdXQgPSBhdC5wdXQsIGdyYXBoID0gY2F0Lmd1bi5CYWNrKC0xKS5fLmdyYXBoO1xyXG5cdFx0XHRcdEd1bi5ncmFwaC5pcyhwdXQsIGZ1bmN0aW9uKG5vZGUsIHNvdWwpe1xyXG5cdFx0XHRcdFx0aWYoIUd1bi5ub2RlLmlzKGdyYXBoWycjJytzb3VsKycjJ10sIGZ1bmN0aW9uIGVhY2gocmVsLGlkKXtcclxuXHRcdFx0XHRcdFx0aWYoaWQgIT09IEd1bi52YWwucmVsLmlzKHJlbCkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0XHRpZihyZWwgPSBncmFwaFsnIycraWQrJyMnXSl7XHJcblx0XHRcdFx0XHRcdFx0R3VuLm5vZGUuaXMocmVsLCBlYWNoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0R3VuLm5vZGUuc291bC5pZnkocmVsID0gcHV0W2lkXSA9IEd1bi5vYmouY29weShub2RlKSwgaWQpO1xyXG5cdFx0XHRcdFx0fSkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0R3VuLm9iai5kZWwocHV0LCBzb3VsKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBzZWFyY2goYXQpeyB2YXIgY2F0ID0gdGhpcztcclxuXHRcdFx0XHR2YXIgdG1wO1xyXG5cdFx0XHRcdGlmKCFHdW4ub2JqLmlzKGF0LmdldCkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdGlmKGNhdC5wc2V1ZG8pe1xyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoKHRtcCA9IGF0Lm9wdCkgJiYgKG51bGwgPT09IHRtcFsnLiddKSl7XHJcblx0XHRcdFx0XHR0bXBbJy4nXSA9ICcjIyc7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCh0bXAgPSBhdC5nZXQpICYmIEd1bi5vYmouaGFzKHRtcCwgJy4nKSl7XHJcblx0XHRcdFx0XHR0bXAgPSBhdFsnIyddO1xyXG5cdFx0XHRcdFx0YXRbJyMnXSA9IEd1bi5vbi5hc2socHJveHkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgdHJpZWQgPSB7fTtcclxuXHRcdFx0XHRmdW5jdGlvbiBwcm94eShhY2ssIGV2KXtcclxuXHRcdFx0XHRcdGV2Lm9mZigpO1xyXG5cdFx0XHRcdFx0dmFyIHB1dCA9IGFjay5wdXQsIGxleCA9IGF0LmdldDtcclxuXHRcdFx0XHRcdGlmKCFjYXQucHNldWRvKXsgcmV0dXJuIEd1bi5vbi5hY2sodG1wLCBhY2spIH1cclxuXHRcdFx0XHRcdGlmKGFjay5wdXQpe1xyXG5cdFx0XHRcdFx0XHRpZighbGV4WycuJ10pe1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBHdW4ub24uYWNrKHRtcCwgYWNrKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZihvYmpfaGFzKGFjay5wdXRbbGV4WycjJ11dLCBsZXhbJy4nXSkpe1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBHdW4ub24uYWNrKHRtcCwgYWNrKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0R3VuLm9iai5tYXAoY2F0LnNlZW4sIGZ1bmN0aW9uKHJlZixpZCl7IC8vIFRPRE86IEJVRyEgSW4tbWVtb3J5IHZlcnN1cyBmdXR1cmU/XHJcblx0XHRcdFx0XHRcdGlmKHRyaWVkW2lkXSl7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIEd1bi5vbi5hY2sodG1wLCBhY2spO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRyaWVkW2lkXSA9IHRydWU7XHJcblx0XHRcdFx0XHRcdHJlZi5vbignb3V0Jywge1xyXG5cdFx0XHRcdFx0XHRcdGd1bjogcmVmLFxyXG5cdFx0XHRcdFx0XHRcdGdldDogaWQgPSB7JyMnOiBpZCwgJy4nOiBhdC5nZXRbJy4nXX0sXHJcblx0XHRcdFx0XHRcdFx0JyMnOiBHdW4ub24uYXNrKHByb3h5KVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRmdW5jdGlvbiBwc2V1ZG8oYXQsIGV2KXsgdmFyIGNhdCA9IHRoaXM7XHJcblx0XHRcdFx0aWYoY2F0LnBzZXVkbyl7XHJcblx0XHRcdFx0XHRldi5zdHVuKCk7XHJcblx0XHRcdFx0XHRpZihjYXQucHNldWRvID09PSBhdC5wdXQpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0Y2F0LmNoYW5nZSA9IGNhdC5jaGFuZ2VkIHx8IGNhdC5wc2V1ZG87XHJcblx0XHRcdFx0XHRjYXQub24oJ2luJywgR3VuLm9iai50byhhdCwge3B1dDogY2F0LnB1dCA9IGNhdC5wc2V1ZG99KSk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCFhdC5wdXQpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHZhciByZWwgPSBHdW4udmFsLnJlbC5pcyhhdC5wdXRba2V5ZWQuX10pO1xyXG5cdFx0XHRcdGlmKCFyZWwpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHZhciBzb3VsID0gR3VuLm5vZGUuc291bChhdC5wdXQpLCByZXN1bWUgPSBldi5zdHVuKHJlc3VtZSksIHJvb3QgPSBjYXQuZ3VuLkJhY2soLTEpLCBzZWVuID0gY2F0LnNlZW4gPSB7fTtcclxuXHRcdFx0XHRjYXQucHNldWRvID0gY2F0LnB1dCA9IEd1bi5zdGF0ZS5pZnkoR3VuLm5vZGUuaWZ5KHt9LCBzb3VsKSk7XHJcblx0XHRcdFx0cm9vdC5nZXQocmVsKS5vbihlYWNoLCB0cnVlKTtcclxuXHRcdFx0XHRmdW5jdGlvbiBlYWNoKGNoYW5nZSl7XHJcblx0XHRcdFx0XHRHdW4ubm9kZS5pcyhjaGFuZ2UsIG1hcCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZ1bmN0aW9uIG1hcChyZWwsIHNvdWwpe1xyXG5cdFx0XHRcdFx0aWYoc291bCAhPT0gR3VuLnZhbC5yZWwuaXMocmVsKSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRpZihzZWVuW3NvdWxdKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdHNlZW5bc291bF0gPSByb290LmdldChzb3VsKS5vbihvbiwgdHJ1ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZ1bmN0aW9uIG9uKHB1dCl7XHJcblx0XHRcdFx0XHRjYXQucHNldWRvID0gR3VuLkhBTS51bmlvbihjYXQucHNldWRvLCBwdXQpIHx8IGNhdC5wc2V1ZG87XHJcblx0XHRcdFx0XHRjYXQuY2hhbmdlID0gY2F0LmNoYW5nZWQgPSBwdXQ7XHJcblx0XHRcdFx0XHRjYXQucHV0ID0gY2F0LnBzZXVkbztcclxuXHRcdFx0XHRcdHJlc3VtZSh7XHJcblx0XHRcdFx0XHRcdGd1bjogY2F0Lmd1bixcclxuXHRcdFx0XHRcdFx0cHV0OiBjYXQucHNldWRvLFxyXG5cdFx0XHRcdFx0XHRnZXQ6IHNvdWxcclxuXHRcdFx0XHRcdFx0Ly92aWE6IHRoaXMuYXRcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgb2JqID0gR3VuLm9iaiwgb2JqX2hhcyA9IG9iai5oYXM7XHJcblx0XHR9KCkpO1xyXG5cclxuXHRcdEd1bi5jaGFpbi5wYXRoID0gZnVuY3Rpb24oZmllbGQsIGNiLCBvcHQpe1xyXG5cdFx0XHR2YXIgYmFjayA9IHRoaXMsIGd1biA9IGJhY2ssIHRtcDtcclxuXHRcdFx0b3B0ID0gb3B0IHx8IHt9OyBvcHQucGF0aCA9IHRydWU7XHJcblx0XHRcdGlmKGd1biA9PT0gZ3VuLl8ucm9vdCl7aWYoY2Ipe2NiKHtlcnI6IEd1bi5sb2coXCJDYW4ndCBkbyB0aGF0IG9uIHJvb3QgaW5zdGFuY2UuXCIpfSl9cmV0dXJuIGd1bn1cclxuXHRcdFx0aWYodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdFx0dG1wID0gZmllbGQuc3BsaXQob3B0LnNwbGl0IHx8ICcuJyk7XHJcblx0XHRcdFx0aWYoMSA9PT0gdG1wLmxlbmd0aCl7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFjay5nZXQoZmllbGQsIGNiLCBvcHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRmaWVsZCA9IHRtcDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihmaWVsZCBpbnN0YW5jZW9mIEFycmF5KXtcclxuXHRcdFx0XHRpZihmaWVsZC5sZW5ndGggPiAxKXtcclxuXHRcdFx0XHRcdGd1biA9IGJhY2s7XHJcblx0XHRcdFx0XHR2YXIgaSA9IDAsIGwgPSBmaWVsZC5sZW5ndGg7XHJcblx0XHRcdFx0XHRmb3IoaTsgaSA8IGw7IGkrKyl7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoMywgJ3BhdGgnLCBmaWVsZFtpXSk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoMiwgJ3BhdGgnLCBmaWVsZFtpXSk7XHJcblx0XHRcdFx0XHRcdGd1biA9IGd1bi5nZXQoZmllbGRbaV0sIChpKzEgPT09IGwpPyBjYiA6IG51bGwsIG9wdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRndW4uYmFjayA9IGJhY2s7IC8vIFRPRE86IEFQSSBjaGFuZ2UhXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGd1biA9IGJhY2suZ2V0KGZpZWxkWzBdLCBjYiwgb3B0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZighZmllbGQgJiYgMCAhPSBmaWVsZCl7XHJcblx0XHRcdFx0cmV0dXJuIGJhY2s7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGJhY2suZ2V0KCcnK2ZpZWxkLCBjYiwgb3B0KTtcclxuXHRcdH1cclxuXHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblx0XHRcdEd1bi5jaGFpbi5vbiA9IGZ1bmN0aW9uKHRhZywgYXJnLCBlYXMsIGFzKXtcclxuXHRcdFx0XHR2YXIgZ3VuID0gdGhpcywgYXQgPSBndW4uXywgdG1wO1xyXG5cdFx0XHRcdGlmKCFhdC5vbil7IGF0Lm9uID0gR3VuLm9uIH1cclxuXHRcdFx0XHRpZih0eXBlb2YgdGFnID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdFx0XHRpZighYXJnKXsgcmV0dXJuIGF0Lm9uKHRhZykgfVxyXG5cdFx0XHRcdFx0YXQub24odGFnLCBhcmcsIGVhcyB8fCBhdCwgYXMpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIG9wdCA9IGFyZztcclxuXHRcdFx0XHRvcHQgPSAodHJ1ZSA9PT0gb3B0KT8ge2NoYW5nZTogdHJ1ZX0gOiBvcHQgfHwge307IFxyXG5cdFx0XHRcdG9wdC5vayA9IHRhZztcclxuXHRcdFx0XHRndW4uYW55KG9rLCB7YXM6IG9wdCwgY2hhbmdlOiBvcHQuY2hhbmdlfSk7IC8vIFRPRE86IFBFUkYhIEV2ZW50IGxpc3RlbmVyIGxlYWshISE/Pz8/XHJcblx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gb2soY2F0LCBldil7IHZhciBvcHQgPSB0aGlzO1xyXG5cdFx0XHRcdHZhciBkYXRhID0gY2F0LnB1dCwgdG1wOyBcclxuXHRcdFx0XHQvLyBUT0RPOiBCVUchIE5lZWQgdG8gdXNlIGF0LnB1dCA+IGNhdC5wdXQgZm9yIG1lcmdlZCBjYWNoZT9cclxuXHRcdFx0XHRpZih1ID09PSBkYXRhKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRpZihvcHQuYXMpe1xyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIkJBTkFOQSBDUkVBTSBQSUVcIiwgb3B0KTtcclxuXHRcdFx0XHRcdG9wdC5vay5jYWxsKG9wdC5hcywgY2F0LCBldik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCJISUNBRE9PIERBQUhcIiwgY2F0LCBvcHQpO1xyXG5cdFx0XHRcdFx0b3B0Lm9rLmNhbGwoY2F0Lmd1biwgZGF0YSwgY2F0LmdldCwgY2F0LCBldik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly9pZihvYmpfZW1wdHkodmFsdWUsIEd1bi5fLm1ldGEpICYmICEob3B0ICYmIG9wdC5lbXB0eSkpeyAvLyBUT0RPOiBQRVJGISBEZXByZWNhdGUhPz8/XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly99IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwidmFsdWVcIiwgdmFsdWUpO1xyXG5cdFx0XHRcdFx0XHQvL2lmKCEodmFsdWV8fGVtcHR5KVsnIyddLyogfHwgIXZhbF9yZWxfaXModmFsdWUpKi8peyAvLyBUT0RPOiBQZXJmb3JtYW5jZSBoaXQhPz8/PyAvLyBUT0RPOiBCVUchIFdFIHNob3VsZCBhdm9pZCB0aGlzLiBTbyB0aGF0IHdheSBpdCBpcyB1c2FibGUgd2l0aCBndW4gcGx1Z2luIGNoYWlucy5cclxuXHRcdFx0XHRcdFx0XHQvL2NiLmNhbGwoZ3VuLCB2YWx1ZSwgYXQuZ2V0KTsgLy8gVE9ETzogQlVHISBXaGF0IGFib3V0IHN0dW4/XHJcblx0XHRcdFx0XHRcdFx0Ly9yZXR1cm4gZ3VuO1xyXG5cdFx0XHRcdFx0XHQvL31cclxuXHRcdFx0XHRcdC8vfVxyXG5cclxuXHRcdFx0Ly8gVE9ETzogQlVHISBXaGF0IGFib3V0IHN0dW4/XHJcblx0XHRcdEd1bi5jaGFpbi52YWwgPSBmdW5jdGlvbihjYiwgb3B0KXtcclxuXHRcdFx0XHR2YXIgZ3VuID0gdGhpcywgYXQgPSBndW4uXywgdmFsdWUgPSBhdC5wdXQ7XHJcblx0XHRcdFx0aWYoIWF0LnN0dW4gJiYgdSAhPT0gdmFsdWUpe1xyXG5cdFx0XHRcdFx0Y2IuY2FsbChndW4sIHZhbHVlLCBhdC5nZXQpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY2Ipe1xyXG5cdFx0XHRcdFx0KG9wdCA9IG9wdCB8fCB7fSkub2sgPSBjYjtcclxuXHRcdFx0XHRcdG9wdC5jYXQgPSBhdDtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoNCwgJ3ZhbCcsIGF0KTtcclxuXHRcdFx0XHRcdGd1bi5hbnkodmFsLCB7YXM6IG9wdH0pO1xyXG5cdFx0XHRcdFx0b3B0LmFzeW5jID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdmFsKGF0LCBldiwgdG8peyB2YXIgb3B0ID0gdGhpcztcclxuXHRcdFx0XHR2YXIgY2F0ID0gb3B0LmNhdCwgZGF0YSA9IGF0LnB1dDtcclxuXHRcdFx0XHRpZih1ID09PSBkYXRhKXtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KGV2LnRvKTtcclxuXHRcdFx0XHRpZighdG8gJiYgb3B0LmFzeW5jKXtcclxuXHRcdFx0XHRcdGV2LnRvID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHR2YWwuY2FsbChvcHQsIGF0LCBldiwgZXYudG8gfHwgMSlcclxuXHRcdFx0XHRcdH0sIG9wdC53YWl0IHx8IDk5KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZXYub2ZmKCk7XHJcblx0XHRcdFx0b3B0Lm9rLmNhbGwoYXQuZ3VuIHx8IG9wdC5ndW4sIGRhdGEsIGF0LmdldCk7IC8vIFRPRE86IEJVRyEgb3B0Lmd1bj9cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0R3VuLmNoYWluLm9mZiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0dmFyIGd1biA9IHRoaXMsIGF0ID0gZ3VuLl8sIHRtcDtcclxuXHRcdFx0XHR2YXIgYmFjayA9IGF0LmJhY2sgfHwge30sIGNhdCA9IGJhY2suXztcclxuXHRcdFx0XHRpZighY2F0KXsgcmV0dXJuIH1cclxuXHRcdFx0XHRpZih0bXAgPSBjYXQucGF0aCl7XHJcblx0XHRcdFx0XHRpZih0bXBbYXQuZ2V0XSl7XHJcblx0XHRcdFx0XHRcdG9ial9kZWwodG1wLCBhdC5nZXQpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0b2JqX21hcCh0bXAsIGZ1bmN0aW9uKHBhdGgsIGtleSl7XHJcblx0XHRcdFx0XHRcdFx0aWYoZ3VuICE9PSBwYXRoKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdFx0XHRvYmpfZGVsKHRtcCwga2V5KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCh0bXAgPSBndW4uQmFjaygtMSkpID09PSBiYWNrKXtcclxuXHRcdFx0XHRcdG9ial9kZWwodG1wLmdyYXBoLCBhdC5nZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihhdC5vbnMgJiYgKHRtcCA9IGF0Lm9uc1snQCQnXSkpe1xyXG5cdFx0XHRcdFx0b2JqX21hcCh0bXAucywgZnVuY3Rpb24oZXYpe1xyXG5cdFx0XHRcdFx0XHRldi5vZmYoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvYmogPSBHdW4ub2JqLCBvYmpfaGFzID0gb2JqLmhhcywgb2JqX2RlbCA9IG9iai5kZWwsIG9ial90byA9IG9iai50bztcclxuXHRcdFx0dmFyIHZhbF9yZWxfaXMgPSBHdW4udmFsLnJlbC5pcztcclxuXHRcdFx0dmFyIGVtcHR5ID0ge30sIHU7XHJcblx0XHR9KCkpO1xyXG5cclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3VuLmNoYWluLm5vdCA9IGZ1bmN0aW9uKGNiLCBvcHQsIHQpe1xyXG5cdFx0XHRcdHZhciBndW4gPSB0aGlzLCBhdCA9IEd1bi5vYmoudG8oZ3VuLl8sIHtub3Q6IHtub3Q6IGNifX0pO1xyXG5cdFx0XHRcdGd1bi5hbnkob3VnaHQsIHthczogYXR9KTtcclxuXHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG91Z2h0KGNhdCwgZXYpeyBldi5vZmYoKTsgdmFyIGF0ID0gdGhpczsgLy8gVE9ETzogQlVHISBJcyB0aGlzIGNvcnJlY3Q/XHJcblx0XHRcdFx0aWYoY2F0LmVyciB8fCBjYXQucHV0KXsgcmV0dXJuIH1cclxuXHRcdFx0XHRpZighYXQubm90IHx8ICFhdC5ub3Qubm90KXsgcmV0dXJuIH1cclxuXHRcdFx0XHQvL2V2LnN0dW4oKTsgLy8gVE9ETzogQlVHPyBJIHRoaW5rIHRoaXMgaXMgY29ycmVjdC4gTk9XIElOQ09SUkVDVCBiZWNhdXNlIGFzIHRoaW5ncyBtdXRhdGUgd2UgbWlnaHQgd2FudCB0byByZXRyaWdnZXIhXHJcblx0XHRcdFx0YXQubm90Lm5vdC5jYWxsKGF0Lmd1biwgYXQuZ2V0LCBmdW5jdGlvbigpeyBjb25zb2xlLmxvZyhcIlBsZWFzZSByZXBvcnQgdGhpcyBidWcgb24gaHR0cHM6Ly9naXR0ZXIuaW0vYW1hcmsvZ3VuIGFuZCBpbiB0aGUgaXNzdWVzLlwiKTsgbmVlZC50by5pbXBsZW1lbnQ7IH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KCkpO1xyXG5cclxuXHRcdDsoZnVuY3Rpb24oKXtcclxuXHRcdFx0R3VuLmNoYWluLm1hcCA9IGZ1bmN0aW9uKGNiLCBvcHQsIHQpe1xyXG5cdFx0XHRcdHZhciBndW4gPSB0aGlzLCBjYXQgPSBndW4uXywgY2hhaW4gPSBjYXQubWFwO1xyXG5cdFx0XHRcdGlmKCFjaGFpbil7XHJcblx0XHRcdFx0XHRjaGFpbiA9IGNhdC5tYXAgPSBndW4uY2hhaW4oKTtcclxuXHRcdFx0XHRcdHZhciBsaXN0ID0gKGNhdCA9IGNoYWluLl8pLmxpc3QgPSBjYXQubGlzdCB8fCB7fTtcclxuXHRcdFx0XHRcdGNoYWluLm9uKCdpbicpLm1hcCA9IHt9O1xyXG5cdFx0XHRcdFx0Y2hhaW4ub24oJ291dCcsIGZ1bmN0aW9uKGF0KXtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1Zyg4LCAnbWFwIG91dCcsIGF0KTtcclxuXHRcdFx0XHQgXHRcdGlmKGF0LmdldCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXtcclxuXHRcdFx0XHRcdFx0XHRjaGFpbi5vbignaW4nLCBhdC5nZXQsIGF0KTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1Zyg5LCAnbWFwIG91dCcsIGF0KTtcclxuXHRcdFx0XHRcdFx0XHRjaGFpbi5vbignaW4nLCBndW4uZ2V0LmlucHV0LCBhdC5ndW4uXyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0aWYob3B0ICE9PSBmYWxzZSl7XHJcblx0XHRcdFx0XHRcdGd1bi5vbihtYXAsIHtjaGFuZ2U6IHRydWUsIGFzOiBjYXR9KTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygxLCAnbWFwJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKGNiKXtcclxuXHRcdFx0XHRcdGNoYWluLm9uKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGNoYWluO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIG1hcChhdCxldil7XHJcblx0XHRcdFx0dmFyIGNhdCA9IHRoaXMsIGd1biA9IGF0Lmd1biB8fCB0aGlzLmJhY2ssIHRhYyA9IGd1bi5fO1xyXG5cdFx0XHRcdG9ial9tYXAoYXQucHV0LCBlYWNoLCB7Z3VuOmd1biwgY2F0OiBjYXQsIGlkOiB0YWMuaWR8fGF0LmdldH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIGVhY2godixmKXtcclxuXHRcdFx0XHRpZihuXyA9PT0gZil7IHJldHVybiB9XHJcblx0XHRcdFx0dmFyIGd1biA9IHRoaXMuZ3VuLCBjYXQgPSB0aGlzLmNhdCwgaWQgPSB0aGlzLmlkO1xyXG5cdFx0XHRcdGlmKGNhdC5saXN0W2lkK2ZdKXsgcmV0dXJuIH1cclxuXHRcdFx0XHQvLyBUT0RPOiBCVUchIEdob3N0aW5nIVxyXG5cdFx0XHRcdGNhdC5saXN0W2lkK2ZdID0gZ3VuLnBhdGgoZikub24oZnVuY3Rpb24odixmLGEsZXYpe1xyXG5cdFx0XHRcdFx0Ly9jYXQub24oJ2luJyxbe2d1bjp0aGlzLGdldDpmLHB1dDp2fSxldl0pO1xyXG5cdFx0XHRcdFx0Y2F0Lm9uKCdpbicsW2lkK2Yse2d1bjp0aGlzLGdldDpmLHB1dDp2fSxldl0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvYmpfbWFwID0gR3VuLm9iai5tYXAsIG5vb3AgPSBmdW5jdGlvbigpe30sIGV2ZW50ID0ge3N0dW46IG5vb3AsIG9mZjogbm9vcH0sIG5fID0gR3VuLm5vZGUuXztcclxuXHRcdH0oKSk7XHJcblxyXG5cdFx0OyhmdW5jdGlvbigpe1xyXG5cdFx0XHRHdW4uY2hhaW4uaW5pdCA9IGZ1bmN0aW9uKCl7IC8vIFRPRE86IERFUFJFQ0FURT9cclxuXHRcdFx0XHQodGhpcy5fLm9wdCA9IHRoaXMuXy5vcHQgfHwge30pLmluaXQgPSB0cnVlO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLkJhY2soLTEpLnB1dChHdW4ubm9kZS5pZnkoe30sIHRoaXMuXy5nZXQpLCBudWxsLCB0aGlzLl8uZ2V0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSgpKTtcclxuXHJcblx0XHQ7KGZ1bmN0aW9uKCl7XHJcblx0XHRcdEd1bi5jaGFpbi5zZXQgPSBmdW5jdGlvbihpdGVtLCBjYiwgb3B0KXtcclxuXHRcdFx0XHR2YXIgZ3VuID0gdGhpcztcclxuXHRcdFx0XHRjYiA9IGNiIHx8IGZ1bmN0aW9uKCl7fTtcclxuXHRcdFx0XHRyZXR1cm4gaXRlbS52YWwoZnVuY3Rpb24obm9kZSl7XHJcblx0XHRcdFx0XHR2YXIgcHV0ID0ge30sIHNvdWwgPSBHdW4ubm9kZS5zb3VsKG5vZGUpO1xyXG5cdFx0XHRcdFx0aWYoIXNvdWwpeyByZXR1cm4gY2IuY2FsbChndW4sIHtlcnI6IEd1bi5sb2coJ09ubHkgYSBub2RlIGNhbiBiZSBsaW5rZWQhIE5vdCBcIicgKyBub2RlICsgJ1wiIScpfSkgfVxyXG5cdFx0XHRcdFx0Z3VuLnB1dChHdW4ub2JqLnB1dChwdXQsIHNvdWwsIEd1bi52YWwucmVsLmlmeShzb3VsKSksIGNiLCBvcHQpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KCkpO1xyXG5cdH0pKHJlcXVpcmUsICcuL2FwaScpO1xyXG5cclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0aWYodHlwZW9mIEpTT04gPT09ICd1bmRlZmluZWQnKXsgdGhyb3cgbmV3IEVycm9yKFwiSW5jbHVkZSBKU09OIGZpcnN0OiBhamF4LmNkbmpzLmNvbS9hamF4L2xpYnMvanNvbjIvMjAxMTAyMjMvanNvbjIuanNcIikgfSAvLyBmb3Igb2xkIElFIHVzZVxyXG5cdFx0aWYodHlwZW9mIEd1biA9PT0gJ3VuZGVmaW5lZCcpeyByZXR1cm4gfSAvLyBUT0RPOiBsb2NhbFN0b3JhZ2UgaXMgQnJvd3NlciBvbmx5LiBCdXQgaXQgd291bGQgYmUgbmljZSBpZiBpdCBjb3VsZCBzb21laG93IHBsdWdpbiBpbnRvIE5vZGVKUyBjb21wYXRpYmxlIGxvY2FsU3RvcmFnZSBBUElzP1xyXG5cdFx0XHJcblx0XHR2YXIgcm9vdCwgbm9vcCA9IGZ1bmN0aW9uKCl7fTtcclxuXHRcdGlmKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKXsgcm9vdCA9IHdpbmRvdyB9XHJcblx0XHR2YXIgc3RvcmUgPSByb290LmxvY2FsU3RvcmFnZSB8fCB7c2V0SXRlbTogbm9vcCwgcmVtb3ZlSXRlbTogbm9vcCwgZ2V0SXRlbTogbm9vcH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHV0KGF0KXsgdmFyIGVyciwgaWQsIG9wdCwgcm9vdCA9IGF0Lmd1bi5fLnJvb3Q7XHJcblx0XHRcdChvcHQgPSBhdC5vcHQgfHwge30pLnByZWZpeCA9IG9wdC5wcmVmaXggfHwgJ2d1bi8nO1xyXG5cdFx0XHRHdW4uZ3JhcGguaXMoYXQucHV0LCBmdW5jdGlvbihub2RlLCBzb3VsKXtcclxuXHRcdFx0XHQvL3RyeXtzdG9yZS5zZXRJdGVtKG9wdC5wcmVmaXggKyBzb3VsLCBHdW4udGV4dC5pZnkobm9kZSkpO1xyXG5cdFx0XHRcdHRyeXtzdG9yZS5zZXRJdGVtKG9wdC5wcmVmaXggKyBzb3VsLCBHdW4udGV4dC5pZnkocm9vdC5fLmdyYXBoW3NvdWxdfHxub2RlKSk7XHJcblx0XHRcdFx0fWNhdGNoKGUpeyBlcnIgPSBlIHx8IFwibG9jYWxTdG9yYWdlIGZhaWx1cmVcIiB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdAQEBAQEBAQEBAbG9jYWwgcHV0IScpO1xyXG5cdFx0XHRHdW4ub24uYWNrKGF0LCB7ZXJyOiBlcnIsIG9rOiAwfSk7IC8vIFRPRE86IFJlbGlhYmlsaXR5ISBBcmUgd2Ugc3VyZSB3ZSB3YW50IHRvIGhhdmUgbG9jYWxTdG9yYWdlIGFjaz9cclxuXHRcdH1cclxuXHRcdGZ1bmN0aW9uIGdldChhdCl7XHJcblx0XHRcdHZhciBndW4gPSBhdC5ndW4sIGxleCA9IGF0LmdldCwgc291bCwgZGF0YSwgb3B0LCB1O1xyXG5cdFx0XHQvL3NldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0KG9wdCA9IGF0Lm9wdCB8fCB7fSkucHJlZml4ID0gb3B0LnByZWZpeCB8fCAnZ3VuLyc7XHJcblx0XHRcdGlmKCFsZXggfHwgIShzb3VsID0gbGV4W0d1bi5fLnNvdWxdKSl7IHJldHVybiB9XHJcblx0XHRcdGRhdGEgPSBHdW4ub2JqLmlmeShzdG9yZS5nZXRJdGVtKG9wdC5wcmVmaXggKyBzb3VsKSB8fCBudWxsKTtcclxuXHRcdFx0aWYoIWRhdGEpeyByZXR1cm4gfSAvLyBsb2NhbFN0b3JhZ2UgaXNuJ3QgdHJ1c3R3b3J0aHkgdG8gc2F5IFwibm90IGZvdW5kXCIuXHJcblx0XHRcdGlmKEd1bi5vYmouaGFzKGxleCwgJy4nKSl7dmFyIHRtcCA9IGRhdGFbbGV4WycuJ11dO2RhdGEgPSB7XzogZGF0YS5ffTtpZih1ICE9PSB0bXApe2RhdGFbbGV4WycuJ11dID0gdG1wfX1cclxuXHRcdFx0Ly9jb25zb2xlLmxvZygnQEBAQEBAQEBAQEBAbG9jYWwgZ2V0JywgZGF0YSwgYXQpO1xyXG5cdFx0XHRndW4uQmFjaygtMSkub24oJ2luJywgeydAJzogYXRbJyMnXSwgcHV0OiBHdW4uZ3JhcGgubm9kZShkYXRhKX0pO1xyXG5cdFx0XHQvL30sMTAwKTtcclxuXHRcdH1cclxuXHRcdEd1bi5vbigncHV0JywgcHV0KTtcclxuXHRcdEd1bi5vbignZ2V0JywgZ2V0KTtcclxuXHR9KShyZXF1aXJlLCAnLi9hZGFwdGVycy9sb2NhbFN0b3JhZ2UnKTtcclxuXHRcclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0ZnVuY3Rpb24gcihiYXNlLCBib2R5LCBjYiwgb3B0KXtcclxuXHRcdFx0dmFyIG8gPSBiYXNlLmxlbmd0aD8ge2Jhc2U6IGJhc2V9IDoge307XHJcblx0XHRcdG8uYmFzZSA9IG9wdC5iYXNlIHx8IGJhc2U7XHJcblx0XHRcdG8uYm9keSA9IG9wdC5ib2R5IHx8IGJvZHk7XHJcblx0XHRcdG8uaGVhZGVycyA9IG9wdC5oZWFkZXJzO1xyXG5cdFx0XHRvLnVybCA9IG9wdC51cmw7XHJcblx0XHRcdG8ub3V0ID0gb3B0Lm91dDtcclxuXHRcdFx0Y2IgPSBjYiB8fCBmdW5jdGlvbigpe307XHJcblx0XHRcdGlmKCFvLmJhc2UpeyByZXR1cm4gfVxyXG5cdFx0XHRyLnRyYW5zcG9ydChvLCBjYik7XHJcblx0XHR9XHJcblx0XHRyLmNyZWF0ZVNlcnZlciA9IGZ1bmN0aW9uKGZuKXsgci5jcmVhdGVTZXJ2ZXIucy5wdXNoKGZuKSB9XHJcblx0XHRyLmNyZWF0ZVNlcnZlci5pbmcgPSBmdW5jdGlvbihyZXEsIGNiKXtcclxuXHRcdFx0dmFyIGkgPSByLmNyZWF0ZVNlcnZlci5zLmxlbmd0aDtcclxuXHRcdFx0d2hpbGUoaS0tKXsgKHIuY3JlYXRlU2VydmVyLnNbaV0gfHwgZnVuY3Rpb24oKXt9KShyZXEsIGNiKSB9XHJcblx0XHR9XHJcblx0XHRyLmNyZWF0ZVNlcnZlci5zID0gW107XHJcblx0XHRyLmJhY2sgPSAyOyByLmJhY2tvZmYgPSAyO1xyXG5cdFx0ci50cmFuc3BvcnQgPSBmdW5jdGlvbihvcHQsIGNiKXtcclxuXHRcdFx0Ly9HdW4ubG9nKFwiVFJBTlNQT1JUOlwiLCBvcHQpO1xyXG5cdFx0XHRpZihyLndzKG9wdCwgY2IpKXsgcmV0dXJuIH1cclxuXHRcdFx0ci5qc29ucChvcHQsIGNiKTtcclxuXHRcdH1cclxuXHRcdHIud3MgPSBmdW5jdGlvbihvcHQsIGNiLCByZXEpe1xyXG5cdFx0XHR2YXIgd3MsIFdTID0gd2luZG93LldlYlNvY2tldCB8fCB3aW5kb3cubW96V2ViU29ja2V0IHx8IHdpbmRvdy53ZWJraXRXZWJTb2NrZXQ7XHJcblx0XHRcdGlmKCFXUyl7IHJldHVybiB9XHJcblx0XHRcdGlmKHdzID0gci53cy5wZWVyc1tvcHQuYmFzZV0pe1xyXG5cdFx0XHRcdHJlcSA9IHJlcSB8fCB7fTtcclxuXHRcdFx0XHRpZihvcHQuaGVhZGVycyl7IHJlcS5oZWFkZXJzID0gb3B0LmhlYWRlcnMgfVxyXG5cdFx0XHRcdGlmKG9wdC5ib2R5KXsgcmVxLmJvZHkgPSBvcHQuYm9keSB9XHJcblx0XHRcdFx0aWYob3B0LnVybCl7IHJlcS51cmwgPSBvcHQudXJsIH1cclxuXHRcdFx0XHRyZXEuaGVhZGVycyA9IHJlcS5oZWFkZXJzIHx8IHt9O1xyXG5cdFx0XHRcdGlmKCFvcHQub3V0ICYmICF3cy5jYnNbcmVxLmhlYWRlcnNbJ3dzLXJpZCddXSl7XHJcblx0XHRcdFx0XHR3cy5jYnNbcmVxLmhlYWRlcnNbJ3dzLXJpZCddID0gJ1dTJyArICgrIG5ldyBEYXRlKCkpICsgJy4nICsgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSo2NTUzNSkrMSldID0gZnVuY3Rpb24oZXJyLHJlcyl7XHJcblx0XHRcdFx0XHRcdGlmKCFyZXMgfHwgcmVzLmJvZHkgfHwgcmVzLmVuZCl7IGRlbGV0ZSB3cy5jYnNbcmVxLmhlYWRlcnNbJ3dzLXJpZCddXSB9XHJcblx0XHRcdFx0XHRcdGNiKGVycixyZXMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZighd3MucmVhZHlTdGF0ZSl7IHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHIud3Mob3B0LCBjYiwgcmVxKSB9LDEwMCksIHRydWUgfVxyXG5cdFx0XHRcdHdzLnNlbmRpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYod3MgPT09IGZhbHNlKXsgcmV0dXJuIH1cclxuXHRcdFx0KHdzID0gci53cy5wZWVyc1tvcHQuYmFzZV0gPSBuZXcgV1Mob3B0LmJhc2UucmVwbGFjZSgnaHR0cCcsJ3dzJykpKS5jYnMgPSB7fTtcclxuXHRcdFx0d3Mub25vcGVuID0gZnVuY3Rpb24obyl7IHIuYmFjayA9IDI7IHIud3Mob3B0LCBjYikgfTtcclxuXHRcdFx0d3Mub25jbG9zZSA9IHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKGMpe1xyXG5cdFx0XHRcdGlmKCF3cyB8fCAhYyl7IHJldHVybiB9XHJcblx0XHRcdFx0aWYod3MuY2xvc2UgaW5zdGFuY2VvZiBGdW5jdGlvbil7IHdzLmNsb3NlKCkgfVxyXG5cdFx0XHRcdGlmKCF3cy5zZW5kaW5nKXtcclxuXHRcdFx0XHRcdHdzID0gci53cy5wZWVyc1tvcHQuYmFzZV0gPSBmYWxzZTtcclxuXHRcdFx0XHRcdHJldHVybiByLnRyYW5zcG9ydChvcHQsIGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ci5lYWNoKHdzLmNicywgZnVuY3Rpb24oY2Ipe1xyXG5cdFx0XHRcdFx0Y2Ioe2VycjogXCJXZWJTb2NrZXQgZGlzY29ubmVjdGVkIVwiLCBjb2RlOiAhd3Muc2VuZGluZz8gLTEgOiAod3N8fHt9KS5lcnIgfHwgYy5jb2RlfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0d3MgPSByLndzLnBlZXJzW29wdC5iYXNlXSA9IG51bGw7IC8vIHRoaXMgd2lsbCBtYWtlIHRoZSBuZXh0IHJlcXVlc3QgdHJ5IHRvIHJlY29ubmVjdFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgLy8gVE9ETzogSGF2ZSB0aGUgZHJpdmVyIGhhbmRsZSB0aGlzIVxyXG5cdFx0XHRcdFx0ci53cyhvcHQsIGZ1bmN0aW9uKCl7fSk7IC8vIG9wdCBoZXJlIGlzIGEgcmFjZSBjb25kaXRpb24sIGlzIGl0IG5vdD8gRG9lcyB0aGlzIG1hdHRlcj9cclxuXHRcdFx0XHR9LCByLmJhY2sgKj0gci5iYWNrb2ZmKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0d3Mub25tZXNzYWdlID0gZnVuY3Rpb24obSl7IHZhciByZXM7XHJcblx0XHRcdFx0aWYoIW0gfHwgIW0uZGF0YSl7IHJldHVybiB9XHJcblx0XHRcdFx0dHJ5e3JlcyA9IEpTT04ucGFyc2UobS5kYXRhKTtcclxuXHRcdFx0XHR9Y2F0Y2goZSl7IHJldHVybiB9XHJcblx0XHRcdFx0aWYoIXJlcyl7IHJldHVybiB9XHJcblx0XHRcdFx0cmVzLmhlYWRlcnMgPSByZXMuaGVhZGVycyB8fCB7fTtcclxuXHRcdFx0XHRpZihyZXMuaGVhZGVyc1snd3MtcmlkJ10peyByZXR1cm4gKHdzLmNic1tyZXMuaGVhZGVyc1snd3MtcmlkJ11dfHxmdW5jdGlvbigpe30pKG51bGwsIHJlcykgfVxyXG5cdFx0XHRcdGlmKHJlcy5ib2R5KXsgci5jcmVhdGVTZXJ2ZXIuaW5nKHJlcywgZnVuY3Rpb24ocmVzKXsgcmVzLm91dCA9IHRydWU7IHIob3B0LmJhc2UsIG51bGwsIG51bGwsIHJlcyl9KSB9IC8vIGVtaXQgZXh0cmEgZXZlbnRzLlxyXG5cdFx0XHR9O1xyXG5cdFx0XHR3cy5vbmVycm9yID0gZnVuY3Rpb24oZSl7ICh3c3x8e30pLmVyciA9IGUgfTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRyLndzLnBlZXJzID0ge307XHJcblx0XHRyLndzLmNicyA9IHt9O1xyXG5cdFx0ci5qc29ucCA9IGZ1bmN0aW9uKG9wdCwgY2Ipe1xyXG5cdFx0XHRyLmpzb25wLmlmeShvcHQsIGZ1bmN0aW9uKHVybCl7XHJcblx0XHRcdFx0aWYoIXVybCl7IHJldHVybiB9XHJcblx0XHRcdFx0ci5qc29ucC5zZW5kKHVybCwgZnVuY3Rpb24oZXJyLCByZXBseSl7XHJcblx0XHRcdFx0XHRjYihlcnIsIHJlcGx5KTtcclxuXHRcdFx0XHRcdHIuanNvbnAucG9sbChvcHQsIHJlcGx5KTtcclxuXHRcdFx0XHR9LCBvcHQuanNvbnApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHIuanNvbnAuc2VuZCA9IGZ1bmN0aW9uKHVybCwgY2IsIGlkKXtcclxuXHRcdFx0dmFyIGpzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblx0XHRcdGpzLnNyYyA9IHVybDtcclxuXHRcdFx0anMub25lcnJvciA9IGZ1bmN0aW9uKGMpe1xyXG5cdFx0XHRcdCh3aW5kb3dbanMuaWRdfHxmdW5jdGlvbigpe30pKG51bGwsIHtlcnI6IFwiSlNPTlAgZmFpbGVkIVwifSk7XHJcblx0XHRcdH1cclxuXHRcdFx0d2luZG93W2pzLmlkID0gaWRdID0gZnVuY3Rpb24ocmVzLCBlcnIpe1xyXG5cdFx0XHRcdGNiKGVyciwgcmVzKTtcclxuXHRcdFx0XHRjYi5pZCA9IGpzLmlkO1xyXG5cdFx0XHRcdGpzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoanMpO1xyXG5cdFx0XHRcdHdpbmRvd1tjYi5pZF0gPSBudWxsOyAvLyBUT0RPOiBCVUc6IFRoaXMgbmVlZHMgdG8gaGFuZGxlIGNodW5raW5nIVxyXG5cdFx0XHRcdHRyeXtkZWxldGUgd2luZG93W2NiLmlkXTtcclxuXHRcdFx0XHR9Y2F0Y2goZSl7fVxyXG5cdFx0XHR9XHJcblx0XHRcdGpzLmFzeW5jID0gdHJ1ZTtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChqcyk7XHJcblx0XHRcdHJldHVybiBqcztcclxuXHRcdH1cclxuXHRcdHIuanNvbnAucG9sbCA9IGZ1bmN0aW9uKG9wdCwgcmVzKXtcclxuXHRcdFx0aWYoIW9wdCB8fCAhb3B0LmJhc2UgfHwgIXJlcyB8fCAhcmVzLmhlYWRlcnMgfHwgIXJlcy5oZWFkZXJzLnBvbGwpeyByZXR1cm4gfVxyXG5cdFx0XHQoci5qc29ucC5wb2xsLnMgPSByLmpzb25wLnBvbGwucyB8fCB7fSlbb3B0LmJhc2VdID0gci5qc29ucC5wb2xsLnNbb3B0LmJhc2VdIHx8IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgLy8gVE9ETzogTmVlZCB0byBvcHRpbWl6ZSBmb3IgQ2hyb21lJ3MgNiByZXEgbGltaXQ/XHJcblx0XHRcdFx0Ly9HdW4ubG9nKFwicG9sbGluZyBhZ2FpblwiKTtcclxuXHRcdFx0XHR2YXIgbyA9IHtiYXNlOiBvcHQuYmFzZSwgaGVhZGVyczoge3B1bGw6IDF9fTtcclxuXHRcdFx0XHRyLmVhY2gob3B0LmhlYWRlcnMsIGZ1bmN0aW9uKHYsaSl7IG8uaGVhZGVyc1tpXSA9IHYgfSlcclxuXHRcdFx0XHRyLmpzb25wKG8sIGZ1bmN0aW9uKGVyciwgcmVwbHkpe1xyXG5cdFx0XHRcdFx0ZGVsZXRlIHIuanNvbnAucG9sbC5zW29wdC5iYXNlXTtcclxuXHRcdFx0XHRcdHdoaWxlKHJlcGx5LmJvZHkgJiYgcmVwbHkuYm9keS5sZW5ndGggJiYgcmVwbHkuYm9keS5zaGlmdCl7IC8vIHdlJ3JlIGFzc3VtaW5nIGFuIGFycmF5IHJhdGhlciB0aGFuIGNodW5rIGVuY29kaW5nLiA6KFxyXG5cdFx0XHRcdFx0XHR2YXIgcmVzID0gcmVwbHkuYm9keS5zaGlmdCgpO1xyXG5cdFx0XHRcdFx0XHRpZihyZXMgJiYgcmVzLmJvZHkpeyByLmNyZWF0ZVNlcnZlci5pbmcocmVzLCBmdW5jdGlvbigpeyByKG9wdC5iYXNlLCBudWxsLCBudWxsLCByZXMpIH0pIH0gLy8gZW1pdCBleHRyYSBldmVudHMuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sIHJlcy5oZWFkZXJzLnBvbGwpO1xyXG5cdFx0fVxyXG5cdFx0ci5qc29ucC5pZnkgPSBmdW5jdGlvbihvcHQsIGNiKXtcclxuXHRcdFx0dmFyIHVyaSA9IGVuY29kZVVSSUNvbXBvbmVudCwgcSA9ICc/JztcclxuXHRcdFx0aWYob3B0LnVybCAmJiBvcHQudXJsLnBhdGhuYW1lKXsgcSA9IG9wdC51cmwucGF0aG5hbWUgKyBxOyB9XHJcblx0XHRcdHEgPSBvcHQuYmFzZSArIHE7XHJcblx0XHRcdHIuZWFjaCgob3B0LnVybHx8e30pLnF1ZXJ5LCBmdW5jdGlvbih2LCBpKXsgcSArPSB1cmkoaSkgKyAnPScgKyB1cmkodikgKyAnJicgfSk7XHJcblx0XHRcdGlmKG9wdC5oZWFkZXJzKXsgcSArPSB1cmkoJ2AnKSArICc9JyArIHVyaShKU09OLnN0cmluZ2lmeShvcHQuaGVhZGVycykpICsgJyYnIH1cclxuXHRcdFx0aWYoci5qc29ucC5tYXggPCBxLmxlbmd0aCl7IHJldHVybiBjYigpIH1cclxuXHRcdFx0cSArPSB1cmkoJ2pzb25wJykgKyAnPScgKyB1cmkob3B0Lmpzb25wID0gJ1AnK01hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkqNjU1MzUpKzEpKTtcclxuXHRcdFx0aWYob3B0LmJvZHkpe1xyXG5cdFx0XHRcdHEgKz0gJyYnO1xyXG5cdFx0XHRcdHZhciB3ID0gb3B0LmJvZHksIHdscyA9IGZ1bmN0aW9uKHcsbCxzKXtcclxuXHRcdFx0XHRcdHJldHVybiB1cmkoJyUnKSArICc9JyArIHVyaSh3KyctJysobHx8dykrJy8nKyhzfHx3KSkgICsgJyYnICsgdXJpKCckJykgKyAnPSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHR5cGVvZiB3ICE9ICdzdHJpbmcnKXtcclxuXHRcdFx0XHRcdHcgPSBKU09OLnN0cmluZ2lmeSh3KTtcclxuXHRcdFx0XHRcdHEgKz0gdXJpKCdeJykgKyAnPScgKyB1cmkoJ2pzb24nKSArICcmJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dyA9IHVyaSh3KTtcclxuXHRcdFx0XHR2YXIgaSA9IDAsIGwgPSB3Lmxlbmd0aFxyXG5cdFx0XHRcdCwgcyA9IHIuanNvbnAubWF4IC0gKHEubGVuZ3RoICsgd2xzKGwudG9TdHJpbmcoKSkubGVuZ3RoKTtcclxuXHRcdFx0XHRpZihzIDwgMCl7IHJldHVybiBjYigpIH1cclxuXHRcdFx0XHR3aGlsZSh3KXtcclxuXHRcdFx0XHRcdGNiKHEgKyB3bHMoaSwgKGkgPSBpICsgcyksIGwpICsgdy5zbGljZSgwLCBpKSk7XHJcblx0XHRcdFx0XHR3ID0gdy5zbGljZShpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y2IocSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHIuanNvbnAubWF4ID0gMjAwMDtcclxuXHRcdHIuZWFjaCA9IGZ1bmN0aW9uKG9iaiwgY2IsIGFzKXtcclxuXHRcdFx0aWYoIW9iaiB8fCAhY2IpeyByZXR1cm4gfVxyXG5cdFx0XHRmb3IodmFyIGkgaW4gb2JqKXtcclxuXHRcdFx0XHRpZihvYmouaGFzT3duUHJvcGVydHkoaSkpe1xyXG5cdFx0XHRcdFx0Y2IuY2FsbChhcywgb2JqW2ldLCBpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdG1vZHVsZS5leHBvcnRzID0gcjtcclxuXHR9KShyZXF1aXJlLCAnLi9wb2x5ZmlsbC9yZXF1ZXN0Jyk7XHJcblxyXG5cdDtyZXF1aXJlKGZ1bmN0aW9uKG1vZHVsZSl7XHJcblx0XHRQLnJlcXVlc3QgPSByZXF1aXJlKCcuL3JlcXVlc3QnKTtcclxuXHRcdGZ1bmN0aW9uIFAocCl7XHJcblx0XHRcdGlmKCFQLmlzKHRoaXMpKXsgcmV0dXJuIG5ldyBQKHApIH1cclxuXHRcdFx0dGhpcy5wZWVycyA9IHA7XHJcblx0XHR9XHJcblx0XHRQLmlzID0gZnVuY3Rpb24ocCl7IHJldHVybiAocCBpbnN0YW5jZW9mIFApIH1cclxuXHRcdFAuY2hhaW4gPSBQLnByb3RvdHlwZTtcclxuXHRcdGZ1bmN0aW9uIG1hcChwZWVyLCB1cmwpe1xyXG5cdFx0XHR2YXIgbXNnID0gdGhpcy5tc2c7XHJcblx0XHRcdHZhciBvcHQgPSB0aGlzLm9wdCB8fCB7fTtcclxuXHRcdFx0b3B0Lm91dCA9IHRydWU7XHJcblx0XHRcdFAucmVxdWVzdCh1cmwsIG1zZywgbnVsbCwgb3B0KTtcclxuXHRcdH1cclxuXHRcdFAuY2hhaW4uc2VuZCA9IGZ1bmN0aW9uKG1zZywgb3B0KXtcclxuXHRcdFx0UC5yZXF1ZXN0LmVhY2godGhpcy5wZWVycywgbWFwLCB7bXNnOiBtc2csIG9wdDogb3B0fSk7XHJcblx0XHR9XHJcblx0XHRtb2R1bGUuZXhwb3J0cyA9IFA7XHJcblx0fSkocmVxdWlyZSwgJy4vcG9seWZpbGwvcGVlcicpO1xyXG5cclxuXHQ7cmVxdWlyZShmdW5jdGlvbihtb2R1bGUpe1xyXG5cdFx0aWYodHlwZW9mIEpTT04gPT09ICd1bmRlZmluZWQnKXsgdGhyb3cgbmV3IEVycm9yKFwiSW5jbHVkZSBKU09OIGZpcnN0OiBhamF4LmNkbmpzLmNvbS9hamF4L2xpYnMvanNvbjIvMjAxMTAyMjMvanNvbjIuanNcIikgfSAvLyBmb3Igb2xkIElFIHVzZVxyXG5cdFx0aWYodHlwZW9mIEd1biA9PT0gJ3VuZGVmaW5lZCcpeyByZXR1cm4gfSAvLyBUT0RPOiB3aW5kb3cuV2Vic29ja2V0IGlzIEJyb3dzZXIgb25seS4gQnV0IGl0IHdvdWxkIGJlIG5pY2UgaWYgaXQgY291bGQgc29tZWhvdyBtZXJnZSBpdCB3aXRoIGxpYi9XU1A/XHJcblx0XHRcclxuXHRcdHZhciByb290LCBub29wID0gZnVuY3Rpb24oKXt9O1xyXG5cdFx0aWYodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpeyByb290ID0gd2luZG93IH1cclxuXHJcblx0XHR2YXIgVGFiID0ge307XHJcblx0XHRUYWIub24gPSBHdW4ub247Ly9HdW4ub24uY3JlYXRlKCk7XHJcblx0XHRUYWIucGVlcnMgPSByZXF1aXJlKCcuLi9wb2x5ZmlsbC9wZWVyJyk7XHJcblx0XHRHdW4ub24oJ2dldCcsIGZ1bmN0aW9uKGF0KXtcclxuXHRcdFx0dmFyIGd1biA9IGF0Lmd1biwgb3B0ID0gZ3VuLkJhY2soJ29wdCcpIHx8IHt9LCBwZWVycyA9IG9wdC5wZWVycztcclxuXHRcdFx0aWYoIXBlZXJzIHx8IEd1bi5vYmouZW1wdHkocGVlcnMpKXtcclxuXHRcdFx0XHQvL3NldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRHdW4ubG9nLm9uY2UoJ3BlZXJzJywgXCJXYXJuaW5nISBZb3UgaGF2ZSBubyBwZWVycyB0byBjb25uZWN0IHRvIVwiKTtcclxuXHRcdFx0XHRhdC5ndW4uQmFjaygtMSkub24oJ2luJywgeydAJzogYXRbJyMnXX0pO1xyXG5cdFx0XHRcdC8vfSwxMDApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgbXNnID0ge1xyXG5cdFx0XHRcdCcjJzogYXRbJyMnXSB8fCBHdW4udGV4dC5yYW5kb20oOSksIC8vIG1zZyBJRFxyXG5cdFx0XHRcdCckJzogYXQuZ2V0IC8vIG1zZyBCT0RZXHJcblx0XHRcdH07XHJcblx0XHRcdFRhYi5vbihtc2dbJyMnXSwgZnVuY3Rpb24oZXJyLCBkYXRhKXsgLy8gVE9ETzogT05FPyBQRVJGISBDbGVhciBvdXQgbGlzdGVuZXJzLCBtYXliZSB3aXRoIHNldFRpbWVvdXQ/XHJcblx0XHRcdFx0aWYoZGF0YSl7XHJcblx0XHRcdFx0XHRhdC5ndW4uQmFjaygtMSkub24oJ291dCcsIHsnQCc6IGF0WycjJ10sIGVycjogZXJyLCBwdXQ6IGRhdGF9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YXQuZ3VuLkJhY2soLTEpLm9uKCdpbicsIHsnQCc6IGF0WycjJ10sIGVycjogZXJyLCBwdXQ6IGRhdGF9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRUYWIucGVlcnMocGVlcnMpLnNlbmQobXNnLCB7aGVhZGVyczogeydndW4tc2lkJzogVGFiLnNlcnZlci5zaWR9fSk7XHJcblx0XHR9KTtcclxuXHRcdEd1bi5vbigncHV0JywgZnVuY3Rpb24oYXQpe1xyXG5cdFx0XHRpZihhdFsnQCddKXsgcmV0dXJuIH1cclxuXHRcdFx0dmFyIG9wdCA9IGF0Lmd1bi5CYWNrKCdvcHQnKSB8fCB7fSwgcGVlcnMgPSBvcHQucGVlcnM7XHJcblx0XHRcdGlmKCFwZWVycyB8fCBHdW4ub2JqLmVtcHR5KHBlZXJzKSl7XHJcblx0XHRcdFx0R3VuLmxvZy5vbmNlKCdwZWVycycsIFwiV2FybmluZyEgWW91IGhhdmUgbm8gcGVlcnMgdG8gc2F2ZSB0byFcIik7XHJcblx0XHRcdFx0YXQuZ3VuLkJhY2soLTEpLm9uKCdpbicsIHsnQCc6IGF0WycjJ119KTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoZmFsc2UgPT09IG9wdC53ZWJzb2NrZXQgfHwgKGF0Lm9wdCAmJiBmYWxzZSA9PT0gYXQub3B0LndlYnNvY2tldCkpeyByZXR1cm4gfVxyXG5cdFx0XHR2YXIgbXNnID0ge1xyXG5cdFx0XHRcdCcjJzogYXRbJyMnXSB8fCBHdW4udGV4dC5yYW5kb20oOSksIC8vIG1zZyBJRFxyXG5cdFx0XHRcdCckJzogYXQucHV0IC8vIG1zZyBCT0RZXHJcblx0XHRcdH07XHJcblx0XHRcdFRhYi5vbihtc2dbJyMnXSwgZnVuY3Rpb24oZXJyLCBvayl7IC8vIFRPRE86IE9ORT8gUEVSRiEgQ2xlYXIgb3V0IGxpc3RlbmVycywgbWF5YmUgd2l0aCBzZXRUaW1lb3V0P1xyXG5cdFx0XHRcdGF0Lmd1bi5CYWNrKC0xKS5vbignaW4nLCB7J0AnOiBhdFsnIyddLCBlcnI6IGVyciwgb2s6IG9rfSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRUYWIucGVlcnMocGVlcnMpLnNlbmQobXNnLCB7aGVhZGVyczogeydndW4tc2lkJzogVGFiLnNlcnZlci5zaWR9fSk7XHJcblx0XHR9KTtcclxuXHRcdC8vIGJyb3dzZXIvY2xpZW50IHNpZGUgU2VydmVyIVxyXG5cdFx0R3VuLm9uKCdvcHQnLCBmdW5jdGlvbihhdCl7IC8vIFRPRE86IEJVRyEgRG9lcyBub3QgcmVzcGVjdCBzZXBhcmF0ZSBpbnN0YW5jZXMhISFcclxuXHRcdFx0aWYoVGFiLnNlcnZlcil7IHJldHVybiB9XHJcblx0XHRcdHZhciBndW4gPSBhdC5ndW4sIHNlcnZlciA9IFRhYi5zZXJ2ZXIgPSB7fSwgdG1wO1xyXG5cdFx0XHRzZXJ2ZXIuc2lkID0gR3VuLnRleHQucmFuZG9tKCk7XHJcblx0XHRcdFRhYi5wZWVycy5yZXF1ZXN0LmNyZWF0ZVNlcnZlcihmdW5jdGlvbihyZXEsIHJlcyl7XHJcblx0XHRcdFx0aWYoIXJlcSB8fCAhcmVzIHx8ICFyZXEuYm9keSB8fCAhcmVxLmhlYWRlcnMpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHZhciBtc2cgPSByZXEuYm9keTtcclxuXHRcdFx0XHQvLyBBVVRIIGZvciBub24tcmVwbGllcy5cclxuXHRcdFx0XHRpZihzZXJ2ZXIubXNnKG1zZ1snIyddKSl7IHJldHVybiB9XHJcblx0XHRcdFx0Ly9zZXJ2ZXIub24oJ25ldHdvcmsnLCBHdW4ub2JqLmNvcHkocmVxKSk7IC8vIFVubGVzcyB3ZSBoYXZlIFdlYlJUQywgbm90IG5lZWRlZC5cclxuXHRcdFx0XHRpZihtc2dbJ0AnXSl7IC8vIG5vIG5lZWQgdG8gcHJvY2Vzcy5cclxuXHRcdFx0XHRcdGlmKFRhYi5vbnNbdG1wID0gbXNnWydAJ10gfHwgbXNnWycjJ11dKXtcclxuXHRcdFx0XHRcdFx0VGFiLm9uKHRtcCwgW21zZ1snISddLCBtc2dbJyQnXV0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihtc2dbJyQnXSAmJiBtc2dbJyQnXVsnIyddKXsgcmV0dXJuIHNlcnZlci5nZXQocmVxLCByZXMpIH1cclxuXHRcdFx0XHRlbHNlIHsgcmV0dXJuIHNlcnZlci5wdXQocmVxLCByZXMpIH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHNlcnZlci5nZXQgPSBmdW5jdGlvbihyZXEsIGNiKXtcclxuXHRcdFx0XHR2YXIgYm9keSA9IHJlcS5ib2R5LCBsZXggPSBib2R5WyckJ10sIG9wdDtcclxuXHRcdFx0XHR2YXIgZ3JhcGggPSBndW4uXy5yb290Ll8uZ3JhcGgsIG5vZGU7XHJcblx0XHRcdFx0aWYoIShub2RlID0gZ3JhcGhbbGV4WycjJ11dKSl7IHJldHVybiB9IC8vIERvbid0IHJlcGx5IHRvIGRhdGEgd2UgZG9uJ3QgaGF2ZSBpdCBpbiBtZW1vcnkuIFRPRE86IEFkZCBsb2NhbFN0b3JhZ2U/XHJcblx0XHRcdFx0Y2Ioe2JvZHk6IHtcclxuXHRcdFx0XHRcdCcjJzogc2VydmVyLm1zZygpLFxyXG5cdFx0XHRcdFx0J0AnOiBib2R5WycjJ10sXHJcblx0XHRcdFx0XHQnJCc6IG5vZGVcclxuXHRcdFx0XHR9fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c2VydmVyLnB1dCA9IGZ1bmN0aW9uKHJlcSwgY2Ipe1xyXG5cdFx0XHRcdHZhciBib2R5ID0gcmVxLmJvZHksIGdyYXBoID0gYm9keVsnJCddO1xyXG5cdFx0XHRcdHZhciBfXyA9IGd1bi5fLnJvb3QuXztcclxuXHRcdFx0XHRpZighKGdyYXBoID0gR3VuLm9iai5tYXAoZ3JhcGgsIGZ1bmN0aW9uKG5vZGUsIHNvdWwsIG1hcCl7IC8vIGZpbHRlciBvdXQgd2hhdCB3ZSBkb24ndCBoYXZlIGluIG1lbW9yeS5cclxuXHRcdFx0XHRcdGlmKCFfXy5wYXRoW3NvdWxdKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdG1hcChzb3VsLCBub2RlKTtcclxuXHRcdFx0XHR9KSkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdGd1bi5vbignb3V0Jywge2d1bjogZ3VuLCBvcHQ6IHt3ZWJzb2NrZXQ6IGZhbHNlfSwgcHV0OiBncmFwaCwgJyMnOiBHdW4ub24uYXNrKGZ1bmN0aW9uKGFjaywgZXYpe1xyXG5cdFx0XHRcdFx0aWYoIWFjayl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRldi5vZmYoKTtcclxuXHRcdFx0XHRcdHJldHVybiBjYih7Ym9keToge1xyXG5cdFx0XHRcdFx0XHQnIyc6IHNlcnZlci5tc2coKSxcclxuXHRcdFx0XHRcdFx0J0AnOiBib2R5WycjJ10sXHJcblx0XHRcdFx0XHRcdCckJzogYWNrLFxyXG5cdFx0XHRcdFx0XHQnISc6IGFjay5lcnJcclxuXHRcdFx0XHRcdH19KTtcclxuXHRcdFx0XHR9KX0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNlcnZlci5tc2cgPSBmdW5jdGlvbihpZCl7XHJcblx0XHRcdFx0aWYoIWlkKXtcclxuXHRcdFx0XHRcdHJldHVybiBzZXJ2ZXIubXNnLmRlYm91bmNlW2lkID0gR3VuLnRleHQucmFuZG9tKDkpXSA9IEd1bi50aW1lLmlzKCksIGlkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoc2VydmVyLm1zZy5jbGVhcik7XHJcblx0XHRcdFx0c2VydmVyLm1zZy5jbGVhciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHZhciBub3cgPSBHdW4udGltZS5pcygpO1xyXG5cdFx0XHRcdFx0R3VuLm9iai5tYXAoc2VydmVyLm1zZy5kZWJvdW5jZSwgZnVuY3Rpb24odCxpZCl7XHJcblx0XHRcdFx0XHRcdGlmKChub3cgLSB0KSA8ICgxMDAwICogNjAgKiA1KSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdEd1bi5vYmouZGVsKHNlcnZlci5tc2cuZGVib3VuY2UsIGlkKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0sNTAwKTtcclxuXHRcdFx0XHRpZihzZXJ2ZXIubXNnLmRlYm91bmNlW2lkXSl7IFxyXG5cdFx0XHRcdFx0cmV0dXJuIHNlcnZlci5tc2cuZGVib3VuY2VbaWRdID0gR3VuLnRpbWUuaXMoKSwgaWQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNlcnZlci5tc2cuZGVib3VuY2VbaWRdID0gR3VuLnRpbWUuaXMoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH07XHRcclxuXHRcdFx0c2VydmVyLm1zZy5kZWJvdW5jZSA9IHNlcnZlci5tc2cuZGVib3VuY2UgfHwge307XHJcblx0XHR9KTtcclxuXHJcblx0fSkocmVxdWlyZSwgJy4vYWRhcHRlcnMvd3NwJyk7XHJcblxyXG59KCkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3NlcnZlcicpOyIsIi8vIFRoaXMgd2FzIHdyaXR0ZW4gYnkgdGhlIHdvbmRlcmZ1bCBGb3JyZXN0IFRhaXRcbi8vIG1vZGlmaWVkIGJ5IE1hcmsgdG8gYmUgcGFydCBvZiBjb3JlIGZvciBjb252ZW5pZW5jZVxuLy8gdHdhcyBub3QgZGVzaWduZWQgZm9yIHByb2R1Y3Rpb24gdXNlXG4vLyBvbmx5IHNpbXBsZSBsb2NhbCBkZXZlbG9wbWVudC5cbnZhciBHdW4gPSByZXF1aXJlKCcuLi9ndW4nKSxcblx0ZnMgPSByZXF1aXJlKCdmcycpLFxuXHRmaWxlID0ge307XG5cbi8vIHF1ZXVlIHdyaXRlcywgYWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS90b29sbmVzcy9qc29uZG93bi9ibG9iL21hc3Rlci9qc29uZG93bi5qc1xudmFyIGlzV3JpdGluZyA9IGZhbHNlLCBxdWV1ZWRXcml0ZXMgPSBbXTtcbmZ1bmN0aW9uIHdyaXRlRmlsZShwYXRoLCBkaXNrLCBhdCl7XG5cdGlmKGlzV3JpdGluZykgcmV0dXJuIHF1ZXVlZFdyaXRlcy5wdXNoKGF0KTtcblx0aXNXcml0aW5nID0gdHJ1ZTtcblx0dmFyIGNvbnRlbnRzID0gSlNPTi5zdHJpbmdpZnkoZGlzaywgbnVsbCwgMik7XG5cdGZzLndyaXRlRmlsZShTdHJpbmcocGF0aCksIGNvbnRlbnRzLCBmdW5jdGlvbihlcnIpIHtcblx0XHR2YXIgYmF0Y2ggPSBxdWV1ZWRXcml0ZXMuc3BsaWNlKDApO1xuXHRcdGlzV3JpdGluZyA9IGZhbHNlO1xuXHRcdGF0Lmd1bi5CYWNrKC0xKS5vbignaW4nLCB7J0AnOiBhdFsnIyddLCBlcnI6IGVyciwgb2s6IGVycj8gZmFsc2UgOiAxfSk7XG5cdFx0aWYoIWJhdGNoLmxlbmd0aCl7IHJldHVybiB9XG5cdFx0YmF0Y2guZm9yRWFjaChmdW5jdGlvbihhdCl7XG5cdFx0XHRhdC5ndW4uQmFjaygtMSkub24oJ2luJywgeydAJzogYXRbJyMnXSwgZXJyOiBlcnIsIG9rOiBlcnI/IGZhbHNlIDogMX0pO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuR3VuLm9uKCdwdXQnLCBmdW5jdGlvbihhdCl7XG5cdHZhciBndW4gPSBhdC5ndW4sIGdyYXBoID0gYXQucHV0LCBvcHQgPSBhdC5vcHQgfHwge307XG5cdHZhciBfXyA9IGd1bi5fLnJvb3QuXztcblx0R3VuLm9iai5tYXAoZ3JhcGgsIGZ1bmN0aW9uKG5vZGUsIHNvdWwpe1xuXHRcdGZpbGUuZGlzay5ncmFwaFtzb3VsXSA9IF9fLmdyYXBoW3NvdWxdIHx8IGdyYXBoW3NvdWxdO1xuXHR9KTtcblx0d3JpdGVGaWxlKG9wdC5maWxlIHx8IGZpbGUuZmlsZSwgZmlsZS5kaXNrLCBhdCk7XG59KTtcbkd1bi5vbignZ2V0JywgZnVuY3Rpb24oYXQpe1xuXHR2YXIgZ3VuID0gYXQuZ3VuLCBsZXggPSBhdC5nZXQsIG9wdCA9IGF0Lm9wdDtcblx0aWYoIWxleCl7cmV0dXJufVxuXHRndW4uQmFjaygtMSkub24oJ2luJywgeydAJzogYXRbJyMnXSwgcHV0OiBHdW4uZ3JhcGgubm9kZShmaWxlLmRpc2suZ3JhcGhbbGV4WycjJ11dKX0pO1xuXHQvL2F0LmNiKG51bGwsIGZpbGUuZGlzay5ncmFwaFtsZXhbJyMnXV0pO1xufSk7XG5cbkd1bi5vbignb3B0JywgZnVuY3Rpb24oYXQpe1xuXHR2YXIgZ3VuID0gYXQuZ3VuLCBvcHRzID0gYXQub3B0O1xuXHRpZiAoKG9wdHMuZmlsZSA9PT0gZmFsc2UpIHx8IChvcHRzLnMzICYmIG9wdHMuczMua2V5KSkge1xuXHRcdHJldHVybjsgLy8gZG9uJ3QgdXNlIHRoaXMgcGx1Z2luIGlmIFMzIGlzIGJlaW5nIHVzZWQuXG5cdH1cblx0Y29uc29sZS5sb2coXCJXQVJOSU5HISBUaGlzIGBmaWxlLmpzYCBtb2R1bGUgZm9yIGd1biBpcyBpbnRlbmRlZCBvbmx5IGZvciBsb2NhbCBkZXZlbG9wbWVudCB0ZXN0aW5nIVwiKVxuXHRmaWxlLmZpbGUgPSBvcHRzLmZpbGUgfHwgZmlsZS5maWxlIHx8ICdkYXRhLmpzb24nO1xuXHRmaWxlLnJhdyA9IGZpbGUucmF3IHx8IChmcy5leGlzdHNTeW5jIHx8IHJlcXVpcmUoJ3BhdGgnKS5leGlzdHNTeW5jKShvcHRzLmZpbGUpID8gZnMucmVhZEZpbGVTeW5jKG9wdHMuZmlsZSkudG9TdHJpbmcoKSA6IG51bGw7XG5cdGZpbGUuZGlzayA9IGZpbGUuZGlzayB8fCBHdW4ub2JqLmlmeShmaWxlLnJhdyB8fCB7Z3JhcGg6IHt9fSk7XG5cdGZpbGUuZGlzay5ncmFwaCA9IGZpbGUuZGlzay5ncmFwaCB8fCB7fTtcbn0pO1xuIiwidmFyIEd1biA9IHJlcXVpcmUoJy4uL2d1bicpXHJcbixcdGZvcm1pZGFibGUgPSByZXF1aXJlKCdmb3JtaWRhYmxlJylcclxuLFx0dXJsID0gcmVxdWlyZSgndXJsJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpe1xyXG5cdG5leHQgPSBuZXh0IHx8IGZ1bmN0aW9uKCl7fTsgLy8gaWYgbm90IG5leHQsIGFuZCB3ZSBkb24ndCBoYW5kbGUgaXQsIHdlIHNob3VsZCByZXMuZW5kXHJcblx0aWYoIXJlcSB8fCAhcmVzKXsgcmV0dXJuIG5leHQoKSB9XHJcblx0aWYoIXJlcS51cmwpeyByZXR1cm4gbmV4dCgpIH1cclxuXHRpZighcmVxLm1ldGhvZCl7IHJldHVybiBuZXh0KCkgfVxyXG5cdHZhciBtc2cgPSB7fTtcclxuXHRtc2cudXJsID0gdXJsLnBhcnNlKHJlcS51cmwsIHRydWUpO1xyXG5cdG1zZy5tZXRob2QgPSAocmVxLm1ldGhvZHx8JycpLnRvTG93ZXJDYXNlKCk7XHJcblx0bXNnLmhlYWRlcnMgPSByZXEuaGVhZGVycztcclxuXHR2YXIgdSwgYm9keVxyXG5cdCxcdGZvcm0gPSBuZXcgZm9ybWlkYWJsZS5JbmNvbWluZ0Zvcm0oKVxyXG5cdCxcdHBvc3QgPSBmdW5jdGlvbihlcnIsIGJvZHkpe1xyXG5cdFx0aWYodSAhPT0gYm9keSl7IG1zZy5ib2R5ID0gYm9keSB9XHJcblx0XHRuZXh0KG1zZywgZnVuY3Rpb24ocmVwbHkpe1xyXG5cdFx0XHRpZighcmVzKXsgcmV0dXJuIH1cclxuXHRcdFx0aWYoIXJlcGx5KXsgcmV0dXJuIHJlcy5lbmQoKSB9XHJcblx0XHRcdGlmKEd1bi5vYmouaGFzKHJlcGx5LCAnc3RhdHVzQ29kZScpIHx8IEd1bi5vYmouaGFzKHJlcGx5LCAnc3RhdHVzJykpe1xyXG5cdFx0XHRcdHJlcy5zdGF0dXNDb2RlID0gcmVwbHkuc3RhdHVzQ29kZSB8fCByZXBseS5zdGF0dXM7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYocmVwbHkuaGVhZGVycyl7XHJcblx0XHRcdFx0aWYoIShyZXMuaGVhZGVyc1NlbnQgfHwgcmVzLmhlYWRlclNlbnQgfHwgcmVzLl9oZWFkZXJTZW50IHx8IHJlcy5faGVhZGVyc1NlbnQpKXtcclxuXHRcdFx0XHRcdEd1bi5vYmoubWFwKHJlcGx5LmhlYWRlcnMsIGZ1bmN0aW9uKHZhbCwgZmllbGQpe1xyXG5cdFx0XHRcdFx0XHRpZih2YWwgIT09IDAgJiYgIXZhbCl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdHJlcy5zZXRIZWFkZXIoZmllbGQsIHZhbCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoR3VuLm9iai5oYXMocmVwbHksJ2NodW5rJykgfHwgR3VuLm9iai5oYXMocmVwbHksJ3dyaXRlJykpe1xyXG5cdFx0XHRcdHJlcy53cml0ZShHdW4udGV4dC5pZnkocmVwbHkuY2h1bmsgfHwgcmVwbHkud3JpdGUpIHx8ICcnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihHdW4ub2JqLmhhcyhyZXBseSwnYm9keScpIHx8IEd1bi5vYmouaGFzKHJlcGx5LCdlbmQnKSl7XHJcblx0XHRcdFx0cmVzLmVuZChHdW4udGV4dC5pZnkocmVwbHkuYm9keSB8fCByZXBseS5lbmQpIHx8ICcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdGZvcm0ub24oJ2ZpZWxkJyxmdW5jdGlvbihrLHYpe1xyXG5cdFx0KGJvZHkgPSBib2R5IHx8IHt9KVtrXSA9IHY7XHJcblx0fSkub24oJ2ZpbGUnLGZ1bmN0aW9uKGssdil7XHJcblx0XHRyZXR1cm47IC8vIGZpbGVzIG5vdCBzdXBwb3J0ZWQgaW4gZ3VuIHlldFxyXG5cdH0pLm9uKCdlcnJvcicsZnVuY3Rpb24oZSl7XHJcblx0XHRpZihmb3JtLmRvbmUpeyByZXR1cm4gfVxyXG5cdFx0cG9zdChlKTtcclxuXHR9KS5vbignZW5kJywgZnVuY3Rpb24oKXtcclxuXHRcdGlmKGZvcm0uZG9uZSl7IHJldHVybiB9XHJcblx0XHRwb3N0KG51bGwsIGJvZHkpO1xyXG5cdH0pO1xyXG5cdGZvcm0ucGFyc2UocmVxKTtcclxufSIsInZhciBHdW4gPSByZXF1aXJlKCcuLi9ndW4nKTtcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihyZXEsIGNiKXtcclxuXHRpZighcmVxLnVybCB8fCAhcmVxLnVybC5xdWVyeSB8fCAhcmVxLnVybC5xdWVyeS5qc29ucCl7IHJldHVybiBjYiB9XHJcblx0Y2IuanNvbnAgPSByZXEudXJsLnF1ZXJ5Lmpzb25wO1xyXG5cdGRlbGV0ZSByZXEudXJsLnF1ZXJ5Lmpzb25wO1xyXG5cdEd1bi5vYmoubWFwKEd1bi5vYmouaWZ5KHJlcS51cmwucXVlcnlbJ2AnXSksIGZ1bmN0aW9uKHZhbCwgaSl7XHJcblx0XHRyZXEuaGVhZGVyc1tpXSA9IHZhbDtcclxuXHR9KTtcclxuXHRkZWxldGUgcmVxLnVybC5xdWVyeVsnYCddO1xyXG5cdGlmKHJlcS51cmwucXVlcnkuJCl7XHJcblx0XHRyZXEuYm9keSA9IHJlcS51cmwucXVlcnkuJDtcclxuXHRcdGlmKCFHdW4ub2JqLmhhcyhyZXEudXJsLnF1ZXJ5LCAnXicpIHx8ICdqc29uJyA9PSByZXEudXJsLnF1ZXJ5WydeJ10pe1xyXG5cdFx0XHRyZXEuYm9keSA9IEd1bi5vYmouaWZ5KHJlcS5ib2R5KTsgLy8gVE9ETzogQlVHISBUSElTIElTIFdST05HISBUaGlzIGRvZXNuJ3QgaGFuZGxlIG11bHRpcGFydCBjaHVua2luZywgYW5kIHdpbGwgZmFpbCFcclxuXHRcdH1cclxuXHR9XHJcblx0ZGVsZXRlIHJlcS51cmwucXVlcnkuJDtcclxuXHRkZWxldGUgcmVxLnVybC5xdWVyeVsnXiddO1xyXG5cdGRlbGV0ZSByZXEudXJsLnF1ZXJ5WyclJ107XHJcblx0dmFyIHJlcGx5ID0ge2hlYWRlcnM6e319O1xyXG5cdHJldHVybiBmdW5jdGlvbihyZXMpe1xyXG5cdFx0aWYoIXJlcyl7IHJldHVybiB9XHJcblx0XHRpZihyZXMuaGVhZGVycyl7XHJcblx0XHRcdEd1bi5vYmoubWFwKHJlcy5oZWFkZXJzLCBmdW5jdGlvbih2YWwsIGZpZWxkKXtcclxuXHRcdFx0XHRyZXBseS5oZWFkZXJzW2ZpZWxkXSA9IHZhbDtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRyZXBseS5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcblx0XHRpZihHdW4ub2JqLmhhcyhyZXMsJ2NodW5rJykgJiYgKCFyZXBseS5ib2R5IHx8IEd1bi5saXN0LmlzKHJlcGx5LmNodW5rcykpKXtcclxuXHRcdFx0KHJlcGx5LmNodW5rcyA9IHJlcGx5LmNodW5rcyB8fCBbXSkucHVzaChyZXMuY2h1bmspO1xyXG5cdFx0fVxyXG5cdFx0aWYoR3VuLm9iai5oYXMocmVzLCdib2R5Jykpe1xyXG5cdFx0XHRyZXBseS5ib2R5ID0gcmVzLmJvZHk7IC8vIHNlbGYtcmVmZXJlbmNlIHlvdXJzZWxmIHNvIG9uIHRoZSBjbGllbnQgd2UgY2FuIGdldCB0aGUgaGVhZGVycyBhbmQgYm9keS5cclxuXHRcdFx0cmVwbHkuYm9keSA9ICc7JysgY2IuanNvbnAgKyAnKCcgKyBHdW4udGV4dC5pZnkocmVwbHkpICsgJyk7JzsgLy8gamF2YXNjcmlwdGlmeSBpdCEgY2FuJ3QgYmVsaWV2ZSB0aGUgY2xpZW50IHRydXN0cyB1cy5cclxuXHRcdFx0Y2IocmVwbHkpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCI7KGZ1bmN0aW9uKCl7XHJcblx0Y29uc29sZS5sb2coXCJIZWxsbyB3b25kZXJmdWwgcGVyc29uISA6KSBJJ20gbWFya0BndW5EQi5pbywgbWVzc2FnZSBtZSBmb3IgaGVscCBvciB3aXRoIGhhdGVtYWlsLiBJIHdhbnQgdG8gaGVhciBmcm9tIHlvdSEgPDNcIik7XHJcblx0dmFyIEd1biA9IHJlcXVpcmUoJy4uL2d1bicpO1xyXG5cdGNvbnNvbGUubG9nKFwiVE9ETzogTUFSSyEgVVBEQVRFIFMzIERSSVZFUiBCRUZPUkUgUFVCTElTSElORyFcIilcclxuXHQvL3JlcXVpcmUoJy4vczMnKTtcclxuXHRyZXF1aXJlKCcuL3dzcCcpO1xyXG5cdHJlcXVpcmUoJy4vZmlsZScpO1xyXG5cdG1vZHVsZS5leHBvcnRzID0gR3VuO1xyXG59KCkpO1xyXG4iLCJ2YXIgR3VuID0gcmVxdWlyZSgnLi4vZ3VuJylcclxuLFx0dXJsID0gcmVxdWlyZSgndXJsJyk7XHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od3NzLCBzZXJ2ZXIsIG9wdCl7XHJcblx0d3NzLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24od3Mpe1xyXG5cdFx0dmFyIHJlcSA9IHt9O1xyXG5cdFx0d3MudXBncmFkZVJlcSA9IHdzLnVwZ3JhZGVSZXEgfHwge307XHJcblx0XHRyZXEudXJsID0gdXJsLnBhcnNlKHdzLnVwZ3JhZGVSZXEudXJsfHwnJyk7XHJcblx0XHRyZXEubWV0aG9kID0gKHdzLnVwZ3JhZGVSZXEubWV0aG9kfHwnJykudG9Mb3dlckNhc2UoKTtcclxuXHRcdHJlcS5oZWFkZXJzID0gd3MudXBncmFkZVJlcS5oZWFkZXJzIHx8IHt9O1xyXG5cdFx0Ly9HdW4ubG9nKFwid3NSZXFcIiwgcmVxKTtcclxuXHRcdHdzLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKXtcclxuXHRcdFx0bXNnID0gR3VuLm9iai5pZnkobXNnKTtcclxuXHRcdFx0bXNnLnVybCA9IG1zZy51cmwgfHwge307XHJcblx0XHRcdG1zZy51cmwucGF0aG5hbWUgPSAocmVxLnVybC5wYXRobmFtZXx8JycpICsgKG1zZy51cmwucGF0aG5hbWV8fCcnKTtcclxuXHRcdFx0R3VuLm9iai5tYXAocmVxLnVybCwgZnVuY3Rpb24odmFsLCBpKXtcclxuXHRcdFx0XHRtc2cudXJsW2ldID0gbXNnLnVybFtpXSB8fCB2YWw7IC8vIHJlYXR0YWNoIHVybFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0bXNnLm1ldGhvZCA9IG1zZy5tZXRob2QgfHwgbXNnLmJvZHk/ICdwdXQnIDogJ2dldCc7XHJcblx0XHRcdG1zZy5oZWFkZXJzID0gbXNnLmhlYWRlcnMgfHwge307XHJcblx0XHRcdEd1bi5vYmoubWFwKG9wdC5oZWFkZXJzIHx8IHJlcS5oZWFkZXJzLCBmdW5jdGlvbih2YWwsIGkpe1xyXG5cdFx0XHRcdG1zZy5oZWFkZXJzW2ldID0gbXNnLmhlYWRlcnNbaV07IC8vIHJlYXR0YWNoIGhlYWRlcnNcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNlcnZlci5jYWxsKHdzLCBtc2csIGZ1bmN0aW9uKHJlcGx5KXtcclxuXHRcdFx0XHRpZighd3MgfHwgIXdzLnNlbmQgfHwgIXdzLl9zb2NrZXQgfHwgIXdzLl9zb2NrZXQud3JpdGFibGUpeyByZXR1cm4gfVxyXG5cdFx0XHRcdHJlcGx5ID0gcmVwbHkgfHwge307XHJcblx0XHRcdFx0aWYobXNnICYmIG1zZy5oZWFkZXJzICYmIG1zZy5oZWFkZXJzWyd3cy1yaWQnXSl7XHJcblx0XHRcdFx0XHQocmVwbHkuaGVhZGVycyA9IHJlcGx5LmhlYWRlcnMgfHwge30pWyd3cy1yaWQnXSA9IG1zZy5oZWFkZXJzWyd3cy1yaWQnXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dHJ5e3dzLnNlbmQoR3VuLnRleHQuaWZ5KHJlcGx5KSk7XHJcblx0XHRcdFx0fWNhdGNoKGUpe30gLy8ganV1dXVzdCBpbiBjYXNlLiBcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdHdzLm9mZiA9IGZ1bmN0aW9uKG0pe1xyXG5cdFx0XHQvL0d1bi5sb2coXCJ3cy5vZmZcIiwgbSk7XHJcblx0XHRcdHdzLnNlbmQgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0d3Mub24oJ2Nsb3NlJywgd3Mub2ZmKTtcclxuXHRcdHdzLm9uKCdlcnJvcicsIHdzLm9mZik7XHJcblx0fSk7XHJcbn1cclxuIiwiOyhmdW5jdGlvbih3c3Ape1xyXG5cdC8qXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0XHRUT0RPOiBTRVJWRVIgUFVTSCFcclxuXHRcdFRPRE86IFNFUlZFUiBHRVQhXHJcblx0Ki9cclxuXHR2YXIgR3VuID0gcmVxdWlyZSgnLi4vZ3VuJylcclxuXHQsIGZvcm1pZGFibGUgPSByZXF1aXJlKCdmb3JtaWRhYmxlJylcclxuXHQsIHdzID0gcmVxdWlyZSgnd3MnKS5TZXJ2ZXJcclxuXHQsIGh0dHAgPSByZXF1aXJlKCcuL2h0dHAnKVxyXG5cdCwgdXJsID0gcmVxdWlyZSgndXJsJyk7XHJcblx0R3VuLm9uKCdvcHQnLCBmdW5jdGlvbihhdCl7XHJcblx0XHR2YXIgZ3VuID0gYXQuZ3VuLCBvcHQgPSBhdC5vcHQ7XHJcblx0XHRndW4uX18gPSBhdC5yb290Ll87XHJcblx0XHRndW4uX18ub3B0LndzID0gb3B0LndzID0gZ3VuLl9fLm9wdC53cyB8fCBvcHQud3MgfHwge307XHJcblx0XHRmdW5jdGlvbiBzdGFydChzZXJ2ZXIsIHBvcnQsIGFwcCl7XHJcblx0XHRcdGlmKGFwcCAmJiBhcHAudXNlKXsgYXBwLnVzZShndW4ud3NwLnNlcnZlcikgfVxyXG5cdFx0XHRzZXJ2ZXIgPSBndW4uX18ub3B0LndzLnNlcnZlciA9IGd1bi5fXy5vcHQud3Muc2VydmVyIHx8IG9wdC53cy5zZXJ2ZXIgfHwgc2VydmVyO1xyXG5cdFx0XHRyZXF1aXJlKCcuL3dzJykoZ3VuLndzcC53cyA9IGd1bi53c3Aud3MgfHwgbmV3IHdzKGd1bi5fXy5vcHQud3MpLCBmdW5jdGlvbihyZXEsIHJlcyl7XHJcblx0XHRcdFx0dmFyIHdzID0gdGhpcztcclxuXHRcdFx0XHRyZXEuaGVhZGVyc1snZ3VuLXNpZCddID0gd3Muc2lkID0gd3Muc2lkPyB3cy5zaWQgOiByZXEuaGVhZGVyc1snZ3VuLXNpZCddO1xyXG5cdFx0XHRcdHdzLnN1YiA9IHdzLnN1YiB8fCBndW4ud3NwLm9uKCduZXR3b3JrJywgZnVuY3Rpb24obXNnLCBldil7XHJcblx0XHRcdFx0XHRpZighd3MgfHwgIXdzLnNlbmQgfHwgIXdzLl9zb2NrZXQgfHwgIXdzLl9zb2NrZXQud3JpdGFibGUpeyByZXR1cm4gZXYub2ZmKCkgfVxyXG5cdFx0XHRcdFx0aWYoIW1zZyB8fCAobXNnLmhlYWRlcnMgJiYgbXNnLmhlYWRlcnNbJ2d1bi1zaWQnXSA9PT0gd3Muc2lkKSl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRpZihtc2cgJiYgbXNnLmhlYWRlcnMpeyBkZWxldGUgbXNnLmhlYWRlcnNbJ3dzLXJpZCddIH1cclxuXHRcdFx0XHRcdC8vIFRPRE86IEJVRz8gXiBXaGF0IGlmIG90aGVyIHBlZXJzIHdhbnQgdG8gYWNrPyBEbyB0aGV5IHVzZSB0aGUgd3MtcmlkIG9yIGEgZ3VuIGRlY2xhcmVkIGlkP1xyXG5cdFx0XHRcdFx0dHJ5e3dzLnNlbmQoR3VuLnRleHQuaWZ5KG1zZykpO1xyXG5cdFx0XHRcdFx0fWNhdGNoKGUpe30gLy8ganV1dXVzdCBpbiBjYXNlLiBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRndW4ud3NwLndpcmUocmVxLCByZXMpO1xyXG5cdFx0XHR9LCB7aGVhZGVyczogeyd3cy1yaWQnOiAxLCAnZ3VuLXNpZCc6IDF9fSk7XHJcblx0XHRcdGd1bi5fXy5vcHQud3MucG9ydCA9IGd1bi5fXy5vcHQud3MucG9ydCB8fCBvcHQud3MucG9ydCB8fCBwb3J0IHx8IDgwO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHdzcCA9IGd1bi53c3AgPSBndW4ud3NwIHx8IGZ1bmN0aW9uKHNlcnZlcil7XHJcblx0XHRcdGlmKCFzZXJ2ZXIpeyByZXR1cm4gZ3VuIH1cclxuXHRcdFx0aWYoR3VuLmZucy5pcyhzZXJ2ZXIuYWRkcmVzcykpe1xyXG5cdFx0XHRcdGlmKHNlcnZlci5hZGRyZXNzKCkpe1xyXG5cdFx0XHRcdFx0c3RhcnQoc2VydmVyLCBzZXJ2ZXIuYWRkcmVzcygpLnBvcnQpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoR3VuLmZucy5pcyhzZXJ2ZXIuZ2V0KSAmJiBzZXJ2ZXIuZ2V0KCdwb3J0Jykpe1xyXG5cdFx0XHRcdHN0YXJ0KHNlcnZlciwgc2VydmVyLmdldCgncG9ydCcpKTtcclxuXHRcdFx0XHRyZXR1cm4gZ3VuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBsaXN0ZW4gPSBzZXJ2ZXIubGlzdGVuO1xyXG5cdFx0XHRzZXJ2ZXIubGlzdGVuID0gZnVuY3Rpb24ocG9ydCl7XHJcblx0XHRcdFx0dmFyIHNlcnZlID0gbGlzdGVuLmFwcGx5KHNlcnZlciwgYXJndW1lbnRzKTtcclxuXHRcdFx0XHRzdGFydChzZXJ2ZSwgcG9ydCwgc2VydmVyKTtcclxuXHRcdFx0XHRyZXR1cm4gc2VydmU7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGd1bjtcclxuXHRcdH1cclxuXHRcdGd1bi53c3Aub24gPSBndW4ud3NwLm9uIHx8IEd1bi5vbjtcclxuXHRcdGd1bi53c3AucmVnZXggPSBndW4ud3NwLnJlZ2V4IHx8IG9wdC5yb3V0ZSB8fCBvcHQucGF0aCB8fCAvXlxcL2d1bi9pO1xyXG5cdFx0Z3VuLndzcC5wb2xsID0gZ3VuLndzcC5wb2xsIHx8IG9wdC5wb2xsIHx8IDE7XHJcblx0XHRndW4ud3NwLnB1bGwgPSBndW4ud3NwLnB1bGwgfHwgb3B0LnB1bGwgfHwgZ3VuLndzcC5wb2xsICogMTAwMDtcclxuXHRcdGd1bi53c3Auc2VydmVyID0gZ3VuLndzcC5zZXJ2ZXIgfHwgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpeyAvLyBodHRwXHJcblx0XHRcdG5leHQgPSBuZXh0IHx8IGZ1bmN0aW9uKCl7fTtcclxuXHRcdFx0aWYoIXJlcSB8fCAhcmVzKXsgcmV0dXJuIG5leHQoKSwgZmFsc2UgfVxyXG5cdFx0XHRpZighcmVxLnVwZ3JhZGUpeyByZXR1cm4gbmV4dCgpLCBmYWxzZSB9XHJcblx0XHRcdGlmKCFyZXEudXJsKXsgcmV0dXJuIG5leHQoKSwgZmFsc2UgfVxyXG5cdFx0XHRpZighcmVxLm1ldGhvZCl7IHJldHVybiBuZXh0KCksIGZhbHNlIH1cclxuXHRcdFx0dmFyIG1zZyA9IHt9O1xyXG5cdFx0XHRtc2cudXJsID0gdXJsLnBhcnNlKHJlcS51cmwsIHRydWUpO1xyXG5cdFx0XHRpZighZ3VuLndzcC5yZWdleC50ZXN0KG1zZy51cmwucGF0aG5hbWUpKXsgcmV0dXJuIG5leHQoKSwgZmFsc2UgfSAvLyBUT0RPOiBCVUchIElmIHRoZSBvcHRpb24gaXNuJ3QgYSByZWdleCB0aGVuIHRoaXMgd2lsbCBmYWlsIVxyXG5cdFx0XHRpZihtc2cudXJsLnBhdGhuYW1lLnJlcGxhY2UoZ3VuLndzcC5yZWdleCwnJykuc2xpY2UoMCwzKS50b0xvd2VyQ2FzZSgpID09PSAnLmpzJyl7XHJcblx0XHRcdFx0cmVzLndyaXRlSGVhZCgyMDAsIHsnQ29udGVudC1UeXBlJzogJ3RleHQvamF2YXNjcmlwdCd9KTtcclxuXHRcdFx0XHRyZXMuZW5kKGd1bi53c3AuanMgPSBndW4ud3NwLmpzIHx8IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArICcvLi4vZ3VuLmpzJykpOyAvLyBndW4gc2VydmVyIGlzIGNhY2hpbmcgdGhlIGd1biBsaWJyYXJ5IGZvciB0aGUgY2xpZW50XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGh0dHAocmVxLCByZXMsIGZ1bmN0aW9uKHJlcSwgcmVzKXtcclxuXHRcdFx0XHRpZighcmVxKXsgcmV0dXJuIG5leHQoKSB9XHJcblx0XHRcdFx0dmFyIHN0cmVhbSwgY2IgPSByZXMgPSByZXF1aXJlKCcuL2pzb25wJykocmVxLCByZXMpO1xyXG5cdFx0XHRcdGlmKHJlcS5oZWFkZXJzICYmIChzdHJlYW0gPSByZXEuaGVhZGVyc1snZ3VuLXNpZCddKSl7XHJcblx0XHRcdFx0XHRzdHJlYW0gPSAoZ3VuLndzcC5wZWVycyA9IGd1bi53c3AucGVlcnMgfHwge30pW3N0cmVhbV0gPSBndW4ud3NwLnBlZXJzW3N0cmVhbV0gfHwge3NpZDogc3RyZWFtfTtcclxuXHRcdFx0XHRcdHN0cmVhbS5kcmFpbiA9IHN0cmVhbS5kcmFpbiB8fCBmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0XHRpZighcmVzIHx8ICFzdHJlYW0gfHwgIXN0cmVhbS5xdWV1ZSB8fCAhc3RyZWFtLnF1ZXVlLmxlbmd0aCl7IHJldHVybiB9XHJcblx0XHRcdFx0XHRcdHJlcyh7aGVhZGVyczogeydndW4tc2lkJzogc3RyZWFtLnNpZH0sIGJvZHk6IHN0cmVhbS5xdWV1ZSB9KTtcclxuXHRcdFx0XHRcdFx0c3RyZWFtLm9mZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgc3RyZWFtID0gbnVsbCB9LCBndW4ud3NwLnB1bGwpO1xyXG5cdFx0XHRcdFx0XHRzdHJlYW0ucmVwbHkgPSBzdHJlYW0ucXVldWUgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHN0cmVhbS5zdWIgPSBzdHJlYW0uc3ViIHx8IGd1bi53c3Aub24oJ25ldHdvcmsnLCBmdW5jdGlvbihyZXEsIGV2KXtcclxuXHRcdFx0XHRcdFx0aWYoIXN0cmVhbSl7IHJldHVybiBldi5vZmYoKSB9IC8vIHNlbGYgY2xlYW5zIHVwIGFmdGVyIGl0c2VsZiFcclxuXHRcdFx0XHRcdFx0aWYoIXJlcSB8fCAocmVxLmhlYWRlcnMgJiYgcmVxLmhlYWRlcnNbJ2d1bi1zaWQnXSA9PT0gc3RyZWFtLnNpZCkpeyByZXR1cm4gfVxyXG5cdFx0XHRcdFx0XHQoc3RyZWFtLnF1ZXVlID0gc3RyZWFtLnF1ZXVlIHx8IFtdKS5wdXNoKHJlcSk7XHJcblx0XHRcdFx0XHRcdHN0cmVhbS5kcmFpbihzdHJlYW0ucmVwbHkpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRjYiA9IGZ1bmN0aW9uKHIpeyAoci5oZWFkZXJzfHx7fSkucG9sbCA9IGd1bi53c3AucG9sbDsgcmVzKHIpIH1cclxuXHRcdFx0XHRcdGNsZWFyVGltZW91dChzdHJlYW0ub2ZmKTtcclxuXHRcdFx0XHRcdGlmKHJlcS5oZWFkZXJzLnB1bGwpe1xyXG5cdFx0XHRcdFx0XHRpZihzdHJlYW0uZHJhaW4oY2IpKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIHN0cmVhbS5yZXBseSA9IGNiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRndW4ud3NwLndpcmUocmVxLCBjYik7XHJcblx0XHRcdH0pLCB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYoKGd1bi5fXy5vcHQubWF4U29ja2V0cyA9IG9wdC5tYXhTb2NrZXRzIHx8IGd1bi5fXy5vcHQubWF4U29ja2V0cykgIT09IGZhbHNlKXtcclxuXHRcdFx0cmVxdWlyZSgnaHR0cHMnKS5nbG9iYWxBZ2VudC5tYXhTb2NrZXRzID0gcmVxdWlyZSgnaHR0cCcpLmdsb2JhbEFnZW50Lm1heFNvY2tldHMgPSBndW4uX18ub3B0Lm1heFNvY2tldHMgfHwgSW5maW5pdHk7XHJcblx0XHR9XHJcblx0XHRndW4ud3NwLm1zZyA9IGd1bi53c3AubXNnIHx8IGZ1bmN0aW9uKGlkKXtcclxuXHRcdFx0aWYoIWlkKXtcclxuXHRcdFx0XHRyZXR1cm4gZ3VuLndzcC5tc2cuZGVib3VuY2VbaWQgPSBHdW4udGV4dC5yYW5kb20oOSldID0gR3VuLnRpbWUuaXMoKSwgaWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xlYXJUaW1lb3V0KGd1bi53c3AubXNnLmNsZWFyKTtcclxuXHRcdFx0Z3VuLndzcC5tc2cuY2xlYXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0dmFyIG5vdyA9IEd1bi50aW1lLmlzKCk7XHJcblx0XHRcdFx0R3VuLm9iai5tYXAoZ3VuLndzcC5tc2cuZGVib3VuY2UsIGZ1bmN0aW9uKHQsaWQpe1xyXG5cdFx0XHRcdFx0aWYoKG5vdyAtIHQpIDwgKDEwMDAgKiA2MCAqIDUpKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRcdEd1bi5vYmouZGVsKGd1bi53c3AubXNnLmRlYm91bmNlLCBpZCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sNTAwKTtcclxuXHRcdFx0aWYoaWQgPSBndW4ud3NwLm1zZy5kZWJvdW5jZVtpZF0peyBcclxuXHRcdFx0XHRyZXR1cm4gZ3VuLndzcC5tc2cuZGVib3VuY2VbaWRdID0gR3VuLnRpbWUuaXMoKSwgaWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0Z3VuLndzcC5tc2cuZGVib3VuY2VbaWRdID0gR3VuLnRpbWUuaXMoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fTtcclxuXHRcdGd1bi53c3AubXNnLmRlYm91bmNlID0gZ3VuLndzcC5tc2cuZGVib3VuY2UgfHwge307XHJcblx0XHRndW4ud3NwLndpcmUgPSBndW4ud3NwLndpcmUgfHwgKGZ1bmN0aW9uKCl7XHJcblx0XHRcdC8vIGFsbCBzdHJlYW1zLCB0ZWNobmljYWxseSBQQVRDSCBidXQgaW1wbGVtZW50ZWQgYXMgUFVUIG9yIFBPU1QsIGFyZSBmb3J3YXJkZWQgdG8gb3RoZXIgdHJ1c3RlZCBwZWVyc1xyXG5cdFx0XHQvLyBleGNlcHQgZm9yIHRoZSBvbmVzIHRoYXQgYXJlIGxpc3RlZCBpbiB0aGUgbWVzc2FnZSBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIHNlbmRpbmcgdG8uXHJcblx0XHRcdC8vIGFsbCBzdGF0ZXMsIGltcGxlbWVudGVkIHdpdGggR0VULCBhcmUgcmVwbGllZCB0byB0aGUgc291cmNlIHRoYXQgYXNrZWQgZm9yIGl0LlxyXG5cdFx0XHRmdW5jdGlvbiB0cmFuKHJlcSwgcmVzKXtcclxuXHRcdFx0XHRpZighcmVxIHx8ICFyZXMgfHwgIXJlcS5ib2R5IHx8ICFyZXEuaGVhZGVycyl7IHJldHVybiB9XHJcblx0XHRcdFx0aWYocmVxLnVybCl7IHJlcS51cmwgPSB1cmwuZm9ybWF0KHJlcS51cmwpIH1cclxuXHRcdFx0XHR2YXIgbXNnID0gcmVxLmJvZHk7XHJcblx0XHRcdFx0Ly8gQVVUSCBmb3Igbm9uLXJlcGxpZXMuXHJcblx0XHRcdFx0aWYoZ3VuLndzcC5tc2cobXNnWycjJ10pKXsgcmV0dXJuIH1cclxuXHRcdFx0XHRndW4ud3NwLm9uKCduZXR3b3JrJywgR3VuLm9iai5jb3B5KHJlcSkpO1xyXG5cdFx0XHRcdGlmKG1zZ1snQCddKXsgcmV0dXJuIH0gLy8gbm8gbmVlZCB0byBwcm9jZXNzLlxyXG5cdFx0XHRcdGlmKG1zZ1snJCddICYmIG1zZ1snJCddWycjJ10peyByZXR1cm4gdHJhbi5nZXQocmVxLCByZXMpIH1cclxuXHRcdFx0XHQvL2lmKEd1bi5pcy5sZXgobXNnWyckJ10pKXsgcmV0dXJuIHRyYW4uZ2V0KHJlcSwgcmVzKSB9XHJcblx0XHRcdFx0ZWxzZSB7IHJldHVybiB0cmFuLnB1dChyZXEsIHJlcykgfVxyXG5cdFx0XHRcdGNiKHtib2R5OiB7aGVsbG86ICd3b3JsZCd9fSk7XHJcblx0XHRcdFx0Ly8gVE9ETzogQlVHISBzZXJ2ZXIgcHV0IHNob3VsZCBwdXNoLlxyXG5cdFx0XHR9XHJcblx0XHRcdHRyYW4uZ2V0ID0gZnVuY3Rpb24ocmVxLCBjYil7XHJcblx0XHRcdFx0dmFyIGJvZHkgPSByZXEuYm9keSwgbGV4ID0gYm9keVsnJCddLCByZXBseSA9IHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6IHRyYW4uanNvbn19LCBvcHQ7XHJcblx0XHRcdFx0Z3VuLm9uKCdvdXQnLCB7Z3VuOiBndW4sIGdldDogbGV4LCByZXE6IDEsICcjJzogR3VuLm9uLmFzayhmdW5jdGlvbihhdCwgZXYpe1xyXG5cdFx0XHRcdFx0ZXYub2ZmKCk7XHJcblx0XHRcdFx0XHR2YXIgZ3JhcGggPSBhdC5wdXQ7XHJcblx0XHRcdFx0XHRyZXR1cm4gY2Ioe2hlYWRlcnM6IHJlcGx5LmhlYWRlcnMsIGJvZHk6IHtcclxuXHRcdFx0XHRcdFx0JyMnOiBndW4ud3NwLm1zZygpLFxyXG5cdFx0XHRcdFx0XHQnQCc6IGJvZHlbJyMnXSxcclxuXHRcdFx0XHRcdFx0JyQnOiBncmFwaCxcclxuXHRcdFx0XHRcdFx0JyEnOiBhdC5lcnJcclxuXHRcdFx0XHRcdH19KTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdGlmKEd1bi5vYmouZW1wdHkobm9kZSkpe1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gY2Ioe2hlYWRlcnM6IHJlcGx5LmhlYWRlcnMsIGJvZHk6IG5vZGV9KTtcclxuXHRcdFx0XHRcdH0gLy8gd2UncmUgb3V0IG9mIHN0dWZmIVxyXG5cdFx0XHRcdFx0LypcclxuXHRcdFx0XHRcdChmdW5jdGlvbihjaHVua3MpeyAvLyBGRUFUVVJFISBTdHJlYW0gY2h1bmtzIGlmIHRoZSBub2RlcyBhcmUgbGFyZ2UhXHJcblx0XHRcdFx0XHRcdHZhciBtYXggPSAxMCwgY291bnQgPSAwLCBzb3VsID0gR3VuLmlzLm5vZGUuc291bChub2RlKTtcclxuXHRcdFx0XHRcdFx0aWYoT2JqZWN0LmtleXMobm9kZSkubGVuZ3RoID4gbWF4KXtcclxuXHRcdFx0XHRcdFx0XHR2YXIgbiA9IEd1bi5pcy5ub2RlLnNvdWwuaWZ5KHt9LCBzb3VsKTtcclxuXHRcdFx0XHRcdFx0XHRHdW4ub2JqLm1hcChub2RlLCBmdW5jdGlvbih2YWwsIGZpZWxkKXtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKCEoKytjb3VudCAlIG1heCkpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjYih7aGVhZGVyczogcmVwbHkuaGVhZGVycywgY2h1bms6IG59KTsgLy8gc2VuZCBub2RlIGNodW5rc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRuID0gR3VuLmlzLm5vZGUuc291bC5pZnkoe30sIHNvdWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0R3VuLmlzLm5vZGUuc3RhdGUuaWZ5KFtuLCBub2RlXSwgZmllbGQsIHZhbCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0aWYoY291bnQgJSBtYXgpeyAvLyBmaW5pc2ggb2ZmIHRoZSBsYXN0IGNodW5rXHJcblx0XHRcdFx0XHRcdFx0XHRjYih7aGVhZGVyczogcmVwbHkuaGVhZGVycywgY2h1bms6IG59KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Y2Ioe2hlYWRlcnM6IHJlcGx5LmhlYWRlcnMsIGNodW5rOiBub2RlfSk7IC8vIHNlbmQgZnVsbCBub2RlXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0oW10pKTtcclxuXHRcdFx0XHRcdCovXHJcblx0XHRcdFx0XHRjYih7aGVhZGVyczogcmVwbHkuaGVhZGVycywgY2h1bms6IG5vZGUgfSk7IC8vIFVzZSB0aGlzIGlmIHlvdSBkb24ndCB3YW50IHN0cmVhbWluZyBjaHVua3MgZmVhdHVyZS5cclxuXHRcdFx0XHR9KX0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRyYW4ucHV0ID0gZnVuY3Rpb24ocmVxLCBjYil7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInRyYW4ucHV0XCIsIHJlcSk7XHJcblx0XHRcdFx0Ly8gTk9URTogSXQgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHlvdSBkbyB5b3VyIG93biBQVVQvUE9TVHMgdGhyb3VnaCB5b3VyIG93biBBUEkgdGhhdCB0aGVuIHNhdmVzIHRvIGd1biBtYW51YWxseS5cclxuXHRcdFx0XHQvLyBUaGlzIHdpbGwgZ2l2ZSB5b3UgbXVjaCBtb3JlIGZpbmUtZ3JhaW4gY29udHJvbCBvdmVyIHNlY3VyaXR5LCB0cmFuc2FjdGlvbnMsIGFuZCB3aGF0IG5vdC5cclxuXHRcdFx0XHR2YXIgYm9keSA9IHJlcS5ib2R5LCBncmFwaCA9IGJvZHlbJyQnXSwgcmVwbHkgPSB7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiB0cmFuLmpzb259fSwgb3B0O1xyXG5cdFx0XHRcdGd1bi5vbignb3V0Jywge2d1bjogZ3VuLCBwdXQ6IGdyYXBoLCAnIyc6IEd1bi5vbi5hc2soZnVuY3Rpb24oYWNrLCBldil7XHJcblx0XHRcdFx0Ly9HdW4ub24oJ3B1dCcsIHtndW46IGd1biwgcHV0OiBncmFwaCwgJyMnOiBHdW4ub24uYXNrKGZ1bmN0aW9uKGFjaywgZXYpe1xyXG5cdFx0XHRcdFx0ZXYub2ZmKCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gY2Ioe2hlYWRlcnM6IHJlcGx5LmhlYWRlcnMsIGJvZHk6IHtcclxuXHRcdFx0XHRcdFx0JyMnOiBndW4ud3NwLm1zZygpLFxyXG5cdFx0XHRcdFx0XHQnQCc6IGJvZHlbJyMnXSxcclxuXHRcdFx0XHRcdFx0JyQnOiBhY2ssXHJcblx0XHRcdFx0XHRcdCchJzogYWNrLmVyclxyXG5cdFx0XHRcdFx0fX0pO1xyXG5cdFx0XHRcdH0pfSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdGlmKEd1bi5pcy5ncmFwaChyZXEuYm9keSkpe1xyXG5cdFx0XHRcdFx0aWYocmVxLmVyciA9IEd1bi51bmlvbihndW4sIHJlcS5ib2R5LCBmdW5jdGlvbihlcnIsIGN0eCl7IC8vIFRPRE86IEJVRz8gUHJvYmFibHkgc2hvdWxkIGdpdmUgbWUgY3R4LmdyYXBoXHJcblx0XHRcdFx0XHRcdGlmKGVycil7IHJldHVybiBjYih7aGVhZGVyczogcmVwbHkuaGVhZGVycywgYm9keToge2VycjogZXJyIHx8IFwiVW5pb24gZmFpbGVkLlwifX0pIH1cclxuXHRcdFx0XHRcdFx0dmFyIGN0eCA9IGN0eCB8fCB7fTsgY3R4LmdyYXBoID0ge307XHJcblx0XHRcdFx0XHRcdEd1bi5pcy5ncmFwaChyZXEuYm9keSwgZnVuY3Rpb24obm9kZSwgc291bCl7XHJcblx0XHRcdFx0XHRcdFx0Y3R4LmdyYXBoW3NvdWxdID0gZ3VuLl9fLmdyYXBoW3NvdWxdO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0KGd1bi5fXy5vcHQud2lyZS5wdXQgfHwgZnVuY3Rpb24oZyxjYil7Y2IoXCJObyBzYXZlLlwiKX0pKGN0eC5ncmFwaCwgZnVuY3Rpb24oZXJyLCBvayl7XHJcblx0XHRcdFx0XHRcdFx0aWYoZXJyKXsgcmV0dXJuIGNiKHtoZWFkZXJzOiByZXBseS5oZWFkZXJzLCBib2R5OiB7ZXJyOiBlcnIgfHwgXCJGYWlsZWQuXCJ9fSkgfSAvLyBUT0RPOiBlcnIgc2hvdWxkIGFscmVhZHkgYmUgYW4gZXJyb3Igb2JqZWN0P1xyXG5cdFx0XHRcdFx0XHRcdGNiKHtoZWFkZXJzOiByZXBseS5oZWFkZXJzLCBib2R5OiB7b2s6IG9rIHx8IFwiUGVyc2lzdGVkLlwifX0pO1xyXG5cdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCJ0cmFuLnB1dCA8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIG9rKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KS5lcnIpeyBjYih7aGVhZGVyczogcmVwbHkuaGVhZGVycywgYm9keToge2VycjogcmVxLmVyciB8fCBcIlVuaW9uIGZhaWxlZC5cIn19KSB9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNiKHtoZWFkZXJzOiByZXBseS5oZWFkZXJzLCBib2R5OiB7ZXJyOiBcIk5vdCBhIHZhbGlkIGdyYXBoIVwifX0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRndW4ud3NwLm9uKCduZXR3b3JrJywgZnVuY3Rpb24ocmVxKXtcclxuXHRcdFx0XHQvLyBUT0RPOiBNQVJLISBZb3Ugc2hvdWxkIG1vdmUgdGhlIG5ldHdvcmtpbmcgZXZlbnRzIHRvIGhlcmUsIG5vdCBpbiBXU1Mgb25seS5cclxuXHRcdFx0fSk7XHJcblx0XHRcdHRyYW4uanNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxuXHRcdFx0cmV0dXJuIHRyYW47XHJcblx0XHR9KCkpO1xyXG5cdFx0aWYob3B0LnNlcnZlcil7XHJcblx0XHRcdHdzcChvcHQuc2VydmVyKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSh7fSkpO1xyXG4iLCIvKiFcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuZnVuY3Rpb24gT3B0aW9ucyhkZWZhdWx0cykge1xuICB2YXIgaW50ZXJuYWxWYWx1ZXMgPSB7fTtcbiAgdmFyIHZhbHVlcyA9IHRoaXMudmFsdWUgPSB7fTtcbiAgT2JqZWN0LmtleXMoZGVmYXVsdHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaW50ZXJuYWxWYWx1ZXNba2V5XSA9IGRlZmF1bHRzW2tleV07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbHVlcywga2V5LCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaW50ZXJuYWxWYWx1ZXNba2V5XTsgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgT2JqZWN0LmtleXMoZGVmYXVsdHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpbnRlcm5hbFZhbHVlc1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgdGhpcy5tZXJnZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHJlcXVpcmVkKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyZXF1aXJlZCkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHZhciBtaXNzaW5nID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJlcXVpcmVkLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0gcmVxdWlyZWRbaV07XG4gICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkge1xuICAgICAgICAgIG1pc3NpbmcucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29wdGlvbnMgJyArXG4gICAgICAgICAgICBtaXNzaW5nLnNsaWNlKDAsIG1pc3NpbmcubGVuZ3RoIC0gMSkuam9pbignLCAnKSArICcgYW5kICcgK1xuICAgICAgICAgICAgbWlzc2luZ1ttaXNzaW5nLmxlbmd0aCAtIDFdICsgJyBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignb3B0aW9uICcgKyBtaXNzaW5nWzBdICsgJyBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIGlmIChrZXkgaW4gaW50ZXJuYWxWYWx1ZXMpIHtcbiAgICAgICAgaW50ZXJuYWxWYWx1ZXNba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgdGhpcy5jb3B5ID0gZnVuY3Rpb24oa2V5cykge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICBPYmplY3Qua2V5cyhkZWZhdWx0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIGlmIChrZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZXNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuICB0aGlzLnJlYWQgPSBmdW5jdGlvbihmaWxlbmFtZSwgY2IpIHtcbiAgICBpZiAodHlwZW9mIGNiID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGZzLnJlYWRGaWxlKGZpbGVuYW1lLCBmdW5jdGlvbihlcnJvciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYihlcnJvcik7XG4gICAgICAgIHZhciBjb25mID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgc2VsZi5tZXJnZShjb25mKTtcbiAgICAgICAgY2IoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBjb25mID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUpKTtcbiAgICAgIHRoaXMubWVyZ2UoY29uZik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICB0aGlzLmlzRGVmaW5lZCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWVzW2tleV0gIT0gJ3VuZGVmaW5lZCc7XG4gIH07XG4gIHRoaXMuaXNEZWZpbmVkQW5kTm9uTnVsbCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWVzW2tleV0gIT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWVzW2tleV0gIT09IG51bGw7XG4gIH07XG4gIE9iamVjdC5mcmVlemUodmFsdWVzKTtcbiAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPcHRpb25zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBBbiBhdXRvIGluY3JlbWVudGluZyBpZCB3aGljaCB3ZSBjYW4gdXNlIHRvIGNyZWF0ZSBcInVuaXF1ZVwiIFVsdHJvbiBpbnN0YW5jZXNcbiAqIHNvIHdlIGNhbiB0cmFjayB0aGUgZXZlbnQgZW1pdHRlcnMgdGhhdCBhcmUgYWRkZWQgdGhyb3VnaCB0aGUgVWx0cm9uXG4gKiBpbnRlcmZhY2UuXG4gKlxuICogQHR5cGUge051bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBpZCA9IDA7XG5cbi8qKlxuICogVWx0cm9uIGlzIGhpZ2gtaW50ZWxsaWdlbmNlIHJvYm90LiBJdCBnYXRoZXJzIGludGVsbGlnZW5jZSBzbyBpdCBjYW4gc3RhcnQgaW1wcm92aW5nXG4gKiB1cG9uIGhpcyBydWRpbWVudGFyeSBkZXNpZ24uIEl0IHdpbGwgbGVhcm4gZnJvbSB5b3VyIEV2ZW50RW1pdHRpbmcgcGF0dGVybnNcbiAqIGFuZCBleHRlcm1pbmF0ZSB0aGVtLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVlIEV2ZW50RW1pdHRlciBpbnN0YW5jZSB3ZSBuZWVkIHRvIHdyYXAuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBVbHRyb24oZWUpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVsdHJvbikpIHJldHVybiBuZXcgVWx0cm9uKGVlKTtcblxuICB0aGlzLmlkID0gaWQrKztcbiAgdGhpcy5lZSA9IGVlO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVyIGEgbmV3IEV2ZW50TGlzdGVuZXIgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgTmFtZSBvZiB0aGUgZXZlbnQuXG4gKiBAcGFyYW0ge0Z1bmN0b259IGZuIENhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7VWx0cm9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuVWx0cm9uLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICBmbi5fX3VsdHJvbiA9IHRoaXMuaWQ7XG4gIHRoaXMuZWUub24oZXZlbnQsIGZuLCBjb250ZXh0KTtcblxuICByZXR1cm4gdGhpcztcbn07XG4vKipcbiAqIEFkZCBhbiBFdmVudExpc3RlbmVyIHRoYXQncyBvbmx5IGNhbGxlZCBvbmNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBOYW1lIG9mIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIENhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7VWx0cm9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuVWx0cm9uLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgZm4uX191bHRyb24gPSB0aGlzLmlkO1xuICB0aGlzLmVlLm9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgd2UgYXNzaWduZWQgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcmV0dXJucyB7VWx0cm9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuVWx0cm9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzXG4gICAgLCBldmVudDtcblxuICAvL1xuICAvLyBXaGVuIG5vIGV2ZW50IG5hbWVzIGFyZSBwcm92aWRlZCB3ZSBhc3N1bWUgdGhhdCB3ZSBuZWVkIHRvIGNsZWFyIGFsbCB0aGVcbiAgLy8gZXZlbnRzIHRoYXQgd2VyZSBhc3NpZ25lZCB0aHJvdWdoIHVzLlxuICAvL1xuICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgJ3N0cmluZycgPT09IHR5cGVvZiBhcmdzWzBdKSB7XG4gICAgYXJncyA9IGFyZ3NbMF0uc3BsaXQoL1ssIF0rLyk7XG4gIH0gZWxzZSBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgYXJncyA9IFtdO1xuXG4gICAgZm9yIChldmVudCBpbiB0aGlzLmVlLl9ldmVudHMpIHtcbiAgICAgIGlmIChoYXMuY2FsbCh0aGlzLmVlLl9ldmVudHMsIGV2ZW50KSkgYXJncy5wdXNoKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5lZS5saXN0ZW5lcnMoYXJnc1tpXSk7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpc3RlbmVycy5sZW5ndGg7IGorKykge1xuICAgICAgZXZlbnQgPSBsaXN0ZW5lcnNbal07XG5cbiAgICAgIC8vXG4gICAgICAvLyBPbmNlIGxpc3RlbmVycyBoYXZlIGEgYGxpc3RlbmVyYCBwcm9wZXJ0eSB0aGF0IHN0b3JlcyB0aGUgcmVhbCBsaXN0ZW5lclxuICAgICAgLy8gaW4gdGhlIEV2ZW50RW1pdHRlciB0aGF0IHNoaXBzIHdpdGggTm9kZS5qcy5cbiAgICAgIC8vXG4gICAgICBpZiAoZXZlbnQubGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50Lmxpc3RlbmVyLl9fdWx0cm9uICE9PSB0aGlzLmlkKSBjb250aW51ZTtcbiAgICAgICAgZGVsZXRlIGV2ZW50Lmxpc3RlbmVyLl9fdWx0cm9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGV2ZW50Ll9fdWx0cm9uICE9PSB0aGlzLmlkKSBjb250aW51ZTtcbiAgICAgICAgZGVsZXRlIGV2ZW50Ll9fdWx0cm9uO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmVlLnJlbW92ZUxpc3RlbmVyKGFyZ3NbaV0sIGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRGVzdHJveSB0aGUgVWx0cm9uIGluc3RhbmNlLCByZW1vdmUgYWxsIGxpc3RlbmVycyBhbmQgcmVsZWFzZSBhbGwgcmVmZXJlbmNlcy5cbiAqXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblVsdHJvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gIGlmICghdGhpcy5lZSkgcmV0dXJuIGZhbHNlO1xuXG4gIHRoaXMucmVtb3ZlKCk7XG4gIHRoaXMuZWUgPSBudWxsO1xuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbm1vZHVsZS5leHBvcnRzID0gVWx0cm9uO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiFcbiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudFxuICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgV1MgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL1dlYlNvY2tldCcpO1xuXG5XUy5TZXJ2ZXIgPSByZXF1aXJlKCcuL2xpYi9XZWJTb2NrZXRTZXJ2ZXInKTtcbldTLlNlbmRlciA9IHJlcXVpcmUoJy4vbGliL1NlbmRlcicpO1xuV1MuUmVjZWl2ZXIgPSByZXF1aXJlKCcuL2xpYi9SZWNlaXZlcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBXZWJTb2NrZXQgc2VydmVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFNlcnZlciBvcHRpb25zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPcHRpb25hbCBjb25uZWN0aW9uIGxpc3RlbmVyLlxuICogQHJldHVybnMge1dTLlNlcnZlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cbldTLmNyZWF0ZVNlcnZlciA9IGZ1bmN0aW9uIGNyZWF0ZVNlcnZlcihvcHRpb25zLCBmbikge1xuICB2YXIgc2VydmVyID0gbmV3IFdTLlNlcnZlcihvcHRpb25zKTtcblxuICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2VydmVyLm9uKCdjb25uZWN0aW9uJywgZm4pO1xuICB9XG5cbiAgcmV0dXJuIHNlcnZlcjtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhZGRyZXNzIFRoZSBVUkwvYWRkcmVzcyB3ZSBuZWVkIHRvIGNvbm5lY3QgdG8uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPcGVuIGxpc3RlbmVyLlxuICogQHJldHVybnMge1dTfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuV1MuY29ubmVjdCA9IFdTLmNyZWF0ZUNvbm5lY3Rpb24gPSBmdW5jdGlvbiBjb25uZWN0KGFkZHJlc3MsIGZuKSB7XG4gIHZhciBjbGllbnQgPSBuZXcgV1MoYWRkcmVzcyk7XG5cbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNsaWVudC5vbignb3BlbicsIGZuKTtcbiAgfVxuXG4gIHJldHVybiBjbGllbnQ7XG59O1xuIiwiLyohXG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbmZ1bmN0aW9uIEJ1ZmZlclBvb2woaW5pdGlhbFNpemUsIGdyb3dTdHJhdGVneSwgc2hyaW5rU3RyYXRlZ3kpIHtcbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXJQb29sID09PSBmYWxzZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzc2VzIGNhbid0IGJlIGZ1bmN0aW9uLWNhbGxlZFwiKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgaW5pdGlhbFNpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzaHJpbmtTdHJhdGVneSA9IGdyb3dTdHJhdGVneTtcbiAgICBncm93U3RyYXRlZ3kgPSBpbml0aWFsU2l6ZTtcbiAgICBpbml0aWFsU2l6ZSA9IDA7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIGluaXRpYWxTaXplID09PSAndW5kZWZpbmVkJykge1xuICAgIGluaXRpYWxTaXplID0gMDtcbiAgfVxuICB0aGlzLl9ncm93U3RyYXRlZ3kgPSAoZ3Jvd1N0cmF0ZWd5IHx8IGZ1bmN0aW9uKGRiLCBzaXplKSB7XG4gICAgcmV0dXJuIGRiLnVzZWQgKyBzaXplO1xuICB9KS5iaW5kKG51bGwsIHRoaXMpO1xuICB0aGlzLl9zaHJpbmtTdHJhdGVneSA9IChzaHJpbmtTdHJhdGVneSB8fCBmdW5jdGlvbihkYikge1xuICAgIHJldHVybiBpbml0aWFsU2l6ZTtcbiAgfSkuYmluZChudWxsLCB0aGlzKTtcbiAgdGhpcy5fYnVmZmVyID0gaW5pdGlhbFNpemUgPyBuZXcgQnVmZmVyKGluaXRpYWxTaXplKSA6IG51bGw7XG4gIHRoaXMuX29mZnNldCA9IDA7XG4gIHRoaXMuX3VzZWQgPSAwO1xuICB0aGlzLl9jaGFuZ2VGYWN0b3IgPSAwO1xuICB0aGlzLl9fZGVmaW5lR2V0dGVyX18oJ3NpemUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLl9idWZmZXIgPT0gbnVsbCA/IDAgOiB0aGlzLl9idWZmZXIubGVuZ3RoO1xuICB9KTtcbiAgdGhpcy5fX2RlZmluZUdldHRlcl9fKCd1c2VkJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gdGhpcy5fdXNlZDtcbiAgfSk7XG59XG5cbkJ1ZmZlclBvb2wucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICBpZiAodGhpcy5fYnVmZmVyID09IG51bGwgfHwgdGhpcy5fb2Zmc2V0ICsgbGVuZ3RoID4gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgIHZhciBuZXdCdWYgPSBuZXcgQnVmZmVyKHRoaXMuX2dyb3dTdHJhdGVneShsZW5ndGgpKTtcbiAgICB0aGlzLl9idWZmZXIgPSBuZXdCdWY7XG4gICAgdGhpcy5fb2Zmc2V0ID0gMDtcbiAgfVxuICB0aGlzLl91c2VkICs9IGxlbmd0aDtcbiAgdmFyIGJ1ZiA9IHRoaXMuX2J1ZmZlci5zbGljZSh0aGlzLl9vZmZzZXQsIHRoaXMuX29mZnNldCArIGxlbmd0aCk7XG4gIHRoaXMuX29mZnNldCArPSBsZW5ndGg7XG4gIHJldHVybiBidWY7XG59XG5cbkJ1ZmZlclBvb2wucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oZm9yY2VOZXdCdWZmZXIpIHtcbiAgdmFyIGxlbiA9IHRoaXMuX3Nocmlua1N0cmF0ZWd5KCk7XG4gIGlmIChsZW4gPCB0aGlzLnNpemUpIHRoaXMuX2NoYW5nZUZhY3RvciAtPSAxO1xuICBpZiAoZm9yY2VOZXdCdWZmZXIgfHwgdGhpcy5fY2hhbmdlRmFjdG9yIDwgLTIpIHtcbiAgICB0aGlzLl9jaGFuZ2VGYWN0b3IgPSAwO1xuICAgIHRoaXMuX2J1ZmZlciA9IGxlbiA/IG5ldyBCdWZmZXIobGVuKSA6IG51bGw7XG4gIH1cbiAgdGhpcy5fb2Zmc2V0ID0gMDtcbiAgdGhpcy5fdXNlZCA9IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQnVmZmVyUG9vbDtcbiIsIi8qIVxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbm1vZHVsZS5leHBvcnRzLkJ1ZmZlclV0aWwgPSB7XG4gIG1lcmdlOiBmdW5jdGlvbihtZXJnZWRCdWZmZXIsIGJ1ZmZlcnMpIHtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICB2YXIgYnVmID0gYnVmZmVyc1tpXTtcbiAgICAgIGJ1Zi5jb3B5KG1lcmdlZEJ1ZmZlciwgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSBidWYubGVuZ3RoO1xuICAgIH1cbiAgfSxcbiAgbWFzazogZnVuY3Rpb24oc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSB7XG4gICAgdmFyIG1hc2tOdW0gPSBtYXNrLnJlYWRVSW50MzJMRSgwLCB0cnVlKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBsZW5ndGggLSAzOyBpICs9IDQpIHtcbiAgICAgIHZhciBudW0gPSBtYXNrTnVtIF4gc291cmNlLnJlYWRVSW50MzJMRShpLCB0cnVlKTtcbiAgICAgIGlmIChudW0gPCAwKSBudW0gPSA0Mjk0OTY3Mjk2ICsgbnVtO1xuICAgICAgb3V0cHV0LndyaXRlVUludDMyTEUobnVtLCBvZmZzZXQgKyBpLCB0cnVlKTtcbiAgICB9XG4gICAgc3dpdGNoIChsZW5ndGggJSA0KSB7XG4gICAgICBjYXNlIDM6IG91dHB1dFtvZmZzZXQgKyBpICsgMl0gPSBzb3VyY2VbaSArIDJdIF4gbWFza1syXTtcbiAgICAgIGNhc2UgMjogb3V0cHV0W29mZnNldCArIGkgKyAxXSA9IHNvdXJjZVtpICsgMV0gXiBtYXNrWzFdO1xuICAgICAgY2FzZSAxOiBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrWzBdO1xuICAgICAgY2FzZSAwOjtcbiAgICB9XG4gIH0sXG4gIHVubWFzazogZnVuY3Rpb24oZGF0YSwgbWFzaykge1xuICAgIHZhciBtYXNrTnVtID0gbWFzay5yZWFkVUludDMyTEUoMCwgdHJ1ZSk7XG4gICAgdmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKDsgaSA8IGxlbmd0aCAtIDM7IGkgKz0gNCkge1xuICAgICAgdmFyIG51bSA9IG1hc2tOdW0gXiBkYXRhLnJlYWRVSW50MzJMRShpLCB0cnVlKTtcbiAgICAgIGlmIChudW0gPCAwKSBudW0gPSA0Mjk0OTY3Mjk2ICsgbnVtO1xuICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKG51bSwgaSwgdHJ1ZSk7XG4gICAgfVxuICAgIHN3aXRjaCAobGVuZ3RoICUgNCkge1xuICAgICAgY2FzZSAzOiBkYXRhW2kgKyAyXSA9IGRhdGFbaSArIDJdIF4gbWFza1syXTtcbiAgICAgIGNhc2UgMjogZGF0YVtpICsgMV0gPSBkYXRhW2kgKyAxXSBeIG1hc2tbMV07XG4gICAgICBjYXNlIDE6IGRhdGFbaV0gPSBkYXRhW2ldIF4gbWFza1swXTtcbiAgICAgIGNhc2UgMDo7XG4gICAgfVxuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qIVxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnRyeSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnYnVmZmVydXRpbCcpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vQnVmZmVyVXRpbC5mYWxsYmFjaycpO1xufVxuIiwiLyohXG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzVmFsaWRFcnJvckNvZGU6IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICByZXR1cm4gKGNvZGUgPj0gMTAwMCAmJiBjb2RlIDw9IDEwMTEgJiYgY29kZSAhPSAxMDA0ICYmIGNvZGUgIT0gMTAwNSAmJiBjb2RlICE9IDEwMDYpIHx8XG4gICAgICAgICAoY29kZSA+PSAzMDAwICYmIGNvZGUgPD0gNDk5OSk7XG4gIH0sXG4gIDEwMDA6ICdub3JtYWwnLFxuICAxMDAxOiAnZ29pbmcgYXdheScsXG4gIDEwMDI6ICdwcm90b2NvbCBlcnJvcicsXG4gIDEwMDM6ICd1bnN1cHBvcnRlZCBkYXRhJyxcbiAgMTAwNDogJ3Jlc2VydmVkJyxcbiAgMTAwNTogJ3Jlc2VydmVkIGZvciBleHRlbnNpb25zJyxcbiAgMTAwNjogJ3Jlc2VydmVkIGZvciBleHRlbnNpb25zJyxcbiAgMTAwNzogJ2luY29uc2lzdGVudCBvciBpbnZhbGlkIGRhdGEnLFxuICAxMDA4OiAncG9saWN5IHZpb2xhdGlvbicsXG4gIDEwMDk6ICdtZXNzYWdlIHRvbyBiaWcnLFxuICAxMDEwOiAnZXh0ZW5zaW9uIGhhbmRzaGFrZSBtaXNzaW5nJyxcbiAgMTAxMTogJ2FuIHVuZXhwZWN0ZWQgY29uZGl0aW9uIHByZXZlbnRlZCB0aGUgcmVxdWVzdCBmcm9tIGJlaW5nIGZ1bGZpbGxlZCcsXG59OyIsIlxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxuZXhwb3J0cy5wYXJzZSA9IHBhcnNlO1xuZXhwb3J0cy5mb3JtYXQgPSBmb3JtYXQ7XG5cbi8qKlxuICogUGFyc2UgZXh0ZW5zaW9ucyBoZWFkZXIgdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuICB2YWx1ZSA9IHZhbHVlIHx8ICcnO1xuXG4gIHZhciBleHRlbnNpb25zID0ge307XG5cbiAgdmFsdWUuc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgcGFyYW1zID0gdi5zcGxpdCgnOycpO1xuICAgIHZhciB0b2tlbiA9IHBhcmFtcy5zaGlmdCgpLnRyaW0oKTtcbiAgICB2YXIgcGFyYW1zTGlzdCA9IGV4dGVuc2lvbnNbdG9rZW5dID0gZXh0ZW5zaW9uc1t0b2tlbl0gfHwgW107XG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXG4gICAgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgIHZhciBwYXJ0cyA9IHBhcmFtLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgICAgdmFyIGtleSA9IHBhcnRzWzBdO1xuICAgICAgdmFyIHZhbHVlID0gcGFydHNbMV07XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1bnF1b3RlIHZhbHVlXG4gICAgICAgIGlmICh2YWx1ZVswXSA9PT0gJ1wiJykge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnXCInKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCB2YWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgKHBhcnNlZFBhcmFtc1trZXldID0gcGFyc2VkUGFyYW1zW2tleV0gfHwgW10pLnB1c2godmFsdWUpO1xuICAgIH0pO1xuXG4gICAgcGFyYW1zTGlzdC5wdXNoKHBhcnNlZFBhcmFtcyk7XG4gIH0pO1xuXG4gIHJldHVybiBleHRlbnNpb25zO1xufVxuXG4vKipcbiAqIEZvcm1hdCBleHRlbnNpb25zIGhlYWRlciB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUpLm1hcChmdW5jdGlvbih0b2tlbikge1xuICAgIHZhciBwYXJhbXNMaXN0ID0gdmFsdWVbdG9rZW5dO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHBhcmFtc0xpc3QpKSB7XG4gICAgICBwYXJhbXNMaXN0ID0gW3BhcmFtc0xpc3RdO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zTGlzdC5tYXAoZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICByZXR1cm4gW3Rva2VuXS5jb25jYXQoT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcCA9IHBhcmFtc1trXTtcbiAgICAgICAgaWYgKCF1dGlsLmlzQXJyYXkocCkpIHAgPSBbcF07XG4gICAgICAgIHJldHVybiBwLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIHYgPT09IHRydWUgPyBrIDogayArICc9JyArIHY7XG4gICAgICAgIH0pLmpvaW4oJzsgJyk7XG4gICAgICB9KSkuam9pbignOyAnKTtcbiAgICB9KS5qb2luKCcsICcpO1xuICB9KS5qb2luKCcsICcpO1xufVxuIiwiXG52YXIgemxpYiA9IHJlcXVpcmUoJ3psaWInKTtcblxudmFyIEFWQUlMQUJMRV9XSU5ET1dfQklUUyA9IFs4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1XTtcbnZhciBERUZBVUxUX1dJTkRPV19CSVRTID0gMTU7XG52YXIgREVGQVVMVF9NRU1fTEVWRUwgPSA4O1xuXG5QZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lID0gJ3Blcm1lc3NhZ2UtZGVmbGF0ZSc7XG5cbi8qKlxuICogUGVyLW1lc3NhZ2UgQ29tcHJlc3Npb24gRXh0ZW5zaW9ucyBpbXBsZW1lbnRhdGlvblxuICovXG5cbmZ1bmN0aW9uIFBlck1lc3NhZ2VEZWZsYXRlKG9wdGlvbnMsIGlzU2VydmVyKSB7XG4gIGlmICh0aGlzIGluc3RhbmNlb2YgUGVyTWVzc2FnZURlZmxhdGUgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzZXMgY2FuJ3QgYmUgZnVuY3Rpb24tY2FsbGVkXCIpO1xuICB9XG5cbiAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMuX2lzU2VydmVyID0gISFpc1NlcnZlcjtcbiAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gIHRoaXMuX2RlZmxhdGUgPSBudWxsO1xuICB0aGlzLnBhcmFtcyA9IG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlIGV4dGVuc2lvbiBwYXJhbWV0ZXJzIG9mZmVyXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5QZXJNZXNzYWdlRGVmbGF0ZS5wcm90b3R5cGUub2ZmZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IHt9O1xuICBpZiAodGhpcy5fb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcikge1xuICAgIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7XG4gIH1cbiAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIpIHtcbiAgICBwYXJhbXMuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICB9XG4gIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMpIHtcbiAgICBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cyA9IHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cztcbiAgfVxuICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzKSB7XG4gICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHM7XG4gIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09IG51bGwpIHtcbiAgICBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbi8qKlxuICogQWNjZXB0IGV4dGVuc2lvbiBvZmZlclxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUGVyTWVzc2FnZURlZmxhdGUucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uKHBhcmFtc0xpc3QpIHtcbiAgcGFyYW1zTGlzdCA9IHRoaXMubm9ybWFsaXplUGFyYW1zKHBhcmFtc0xpc3QpO1xuXG4gIHZhciBwYXJhbXM7XG4gIGlmICh0aGlzLl9pc1NlcnZlcikge1xuICAgIHBhcmFtcyA9IHRoaXMuYWNjZXB0QXNTZXJ2ZXIocGFyYW1zTGlzdCk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zID0gdGhpcy5hY2NlcHRBc0NsaWVudChwYXJhbXNMaXN0KTtcbiAgfVxuXG4gIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICByZXR1cm4gcGFyYW1zO1xufTtcblxuLyoqXG4gKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIHVzZWQgYnkgdGhlIGV4dGVuc2lvblxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUGVyTWVzc2FnZURlZmxhdGUucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuX2luZmxhdGUpIHtcbiAgICBpZiAodGhpcy5faW5mbGF0ZS53cml0ZUluUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMuX2luZmxhdGUucGVuZGluZ0Nsb3NlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuX2luZmxhdGUuY2xvc2UpIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgIHRoaXMuX2luZmxhdGUgPSBudWxsO1xuICAgIH1cbiAgfVxuICBpZiAodGhpcy5fZGVmbGF0ZSkge1xuICAgIGlmICh0aGlzLl9kZWZsYXRlLndyaXRlSW5Qcm9ncmVzcykge1xuICAgICAgdGhpcy5fZGVmbGF0ZS5wZW5kaW5nQ2xvc2UgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fZGVmbGF0ZS5jbG9zZSkgdGhpcy5fZGVmbGF0ZS5jbG9zZSgpO1xuICAgICAgdGhpcy5fZGVmbGF0ZSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEFjY2VwdCBleHRlbnNpb24gb2ZmZXIgZnJvbSBjbGllbnRcbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5QZXJNZXNzYWdlRGVmbGF0ZS5wcm90b3R5cGUuYWNjZXB0QXNTZXJ2ZXIgPSBmdW5jdGlvbihwYXJhbXNMaXN0KSB7XG4gIHZhciBhY2NlcHRlZCA9IHt9O1xuICB2YXIgcmVzdWx0ID0gcGFyYW1zTGlzdC5zb21lKGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIGFjY2VwdGVkID0ge307XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2VydmVyTm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3Zlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID09PSBmYWxzZSAmJiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgdHlwZW9mIHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMgPiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiYgIXBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2VydmVyTm9Db250ZXh0VGFrZW92ZXIgfHwgcGFyYW1zLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyKSB7XG4gICAgICBhY2NlcHRlZC5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyKSB7XG4gICAgICBhY2NlcHRlZC5jbGllbnRfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyICE9PSBmYWxzZSAmJiBwYXJhbXMuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIpIHtcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICBhY2NlcHRlZC5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID09PSAnbnVtYmVyJykge1xuICAgICAgYWNjZXB0ZWQuc2VydmVyX21heF93aW5kb3dfYml0cyA9IHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHM7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgIT09IGZhbHNlICYmIHR5cGVvZiBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cztcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sIHRoaXMpO1xuXG4gIGlmICghcmVzdWx0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEb2VzblxcJ3Qgc3VwcG9ydCB0aGUgb2ZmZXJlZCBjb25maWd1cmF0aW9uJyk7XG4gIH1cblxuICByZXR1cm4gYWNjZXB0ZWQ7XG59O1xuXG4vKipcbiAqIEFjY2VwdCBleHRlbnNpb24gcmVzcG9uc2UgZnJvbSBzZXJ2ZXJcbiAqXG4gKiBAYXBpIHByaXZheWVcbiAqL1xuXG5QZXJNZXNzYWdlRGVmbGF0ZS5wcm90b3R5cGUuYWNjZXB0QXNDbGllbnQgPSBmdW5jdGlvbihwYXJhbXNMaXN0KSB7XG4gIHZhciBwYXJhbXMgPSBwYXJhbXNMaXN0WzBdO1xuICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3ZlciAhPSBudWxsKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmIHBhcmFtcy5jbGllbnRfbm9fY29udGV4dF90YWtlb3Zlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZhbHVlIGZvciBcImNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyXCInKTtcbiAgICB9XG4gIH1cbiAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyAhPSBudWxsKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gZmFsc2UgJiYgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBmb3IgXCJjbGllbnRfbWF4X3dpbmRvd19iaXRzXCInKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInICYmXG4gICAgICAgICghcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgfHwgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgZm9yIFwiY2xpZW50X21heF93aW5kb3dfYml0c1wiJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJhbXM7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBleHRlbnNpb25zIHBhcmFtZXRlcnNcbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5QZXJNZXNzYWdlRGVmbGF0ZS5wcm90b3R5cGUubm9ybWFsaXplUGFyYW1zID0gZnVuY3Rpb24ocGFyYW1zTGlzdCkge1xuICByZXR1cm4gcGFyYW1zTGlzdC5tYXAoZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2tleV07XG4gICAgICBpZiAodmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGxlIGV4dGVuc2lvbiBwYXJhbWV0ZXJzIGZvciAnICsga2V5KTtcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSB2YWx1ZVswXTtcblxuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJzpcbiAgICAgIGNhc2UgJ2NsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyJzpcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGV4dGVuc2lvbiBwYXJhbWV0ZXIgdmFsdWUgZm9yICcgKyBrZXkgKyAnICgnICsgdmFsdWUgKyAnKScpO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtc1trZXldID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzZXJ2ZXJfbWF4X3dpbmRvd19iaXRzJzpcbiAgICAgIGNhc2UgJ2NsaWVudF9tYXhfd2luZG93X2JpdHMnOlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHZhbHVlID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICBpZiAoIX5BVkFJTEFCTEVfV0lORE9XX0JJVFMuaW5kZXhPZih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBleHRlbnNpb24gcGFyYW1ldGVyIHZhbHVlIGZvciAnICsga2V5ICsgJyAoJyArIHZhbHVlICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pc1NlcnZlciAmJiB2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBleHRlbnNpb24gcGFyYW1ldGVyIHZhbHVlIGZvciAnICsga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGRlZmluZWQgZXh0ZW5zaW9uIHBhcmFtZXRlciAoJyArIGtleSArICcpJyk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfSwgdGhpcyk7XG59O1xuXG4vKipcbiAqIERlY29tcHJlc3MgbWVzc2FnZVxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUGVyTWVzc2FnZURlZmxhdGUucHJvdG90eXBlLmRlY29tcHJlc3MgPSBmdW5jdGlvbiAoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICB2YXIgZW5kcG9pbnQgPSB0aGlzLl9pc1NlcnZlciA/ICdjbGllbnQnIDogJ3NlcnZlcic7XG5cbiAgaWYgKCF0aGlzLl9pbmZsYXRlKSB7XG4gICAgdmFyIG1heFdpbmRvd0JpdHMgPSB0aGlzLnBhcmFtc1tlbmRwb2ludCArICdfbWF4X3dpbmRvd19iaXRzJ107XG4gICAgdGhpcy5faW5mbGF0ZSA9IHpsaWIuY3JlYXRlSW5mbGF0ZVJhdyh7XG4gICAgICB3aW5kb3dCaXRzOiAnbnVtYmVyJyA9PT0gdHlwZW9mIG1heFdpbmRvd0JpdHMgPyBtYXhXaW5kb3dCaXRzIDogREVGQVVMVF9XSU5ET1dfQklUU1xuICAgIH0pO1xuICB9XG4gIHRoaXMuX2luZmxhdGUud3JpdGVJblByb2dyZXNzID0gdHJ1ZTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBidWZmZXJzID0gW107XG5cbiAgdGhpcy5faW5mbGF0ZS5vbignZXJyb3InLCBvbkVycm9yKS5vbignZGF0YScsIG9uRGF0YSk7XG4gIHRoaXMuX2luZmxhdGUud3JpdGUoZGF0YSk7XG4gIGlmIChmaW4pIHtcbiAgICB0aGlzLl9pbmZsYXRlLndyaXRlKG5ldyBCdWZmZXIoWzB4MDAsIDB4MDAsIDB4ZmYsIDB4ZmZdKSk7XG4gIH1cbiAgdGhpcy5faW5mbGF0ZS5mbHVzaChmdW5jdGlvbigpIHtcbiAgICBjbGVhbnVwKCk7XG4gICAgY2FsbGJhY2sobnVsbCwgQnVmZmVyLmNvbmNhdChidWZmZXJzKSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgY2xlYW51cCgpO1xuICAgIGNhbGxiYWNrKGVycik7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRhdGEoZGF0YSkge1xuICAgIGJ1ZmZlcnMucHVzaChkYXRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgaWYgKCFzZWxmLl9pbmZsYXRlKSByZXR1cm47XG4gICAgc2VsZi5faW5mbGF0ZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcbiAgICBzZWxmLl9pbmZsYXRlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25EYXRhKTtcbiAgICBzZWxmLl9pbmZsYXRlLndyaXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIGlmICgoZmluICYmIHNlbGYucGFyYW1zW2VuZHBvaW50ICsgJ19ub19jb250ZXh0X3Rha2VvdmVyJ10pIHx8IHNlbGYuX2luZmxhdGUucGVuZGluZ0Nsb3NlKSB7XG4gICAgICBpZiAoc2VsZi5faW5mbGF0ZS5jbG9zZSkgc2VsZi5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgc2VsZi5faW5mbGF0ZSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENvbXByZXNzIG1lc3NhZ2VcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblBlck1lc3NhZ2VEZWZsYXRlLnByb3RvdHlwZS5jb21wcmVzcyA9IGZ1bmN0aW9uIChkYXRhLCBmaW4sIGNhbGxiYWNrKSB7XG4gIHZhciBlbmRwb2ludCA9IHRoaXMuX2lzU2VydmVyID8gJ3NlcnZlcicgOiAnY2xpZW50JztcblxuICBpZiAoIXRoaXMuX2RlZmxhdGUpIHtcbiAgICB2YXIgbWF4V2luZG93Qml0cyA9IHRoaXMucGFyYW1zW2VuZHBvaW50ICsgJ19tYXhfd2luZG93X2JpdHMnXTtcbiAgICB0aGlzLl9kZWZsYXRlID0gemxpYi5jcmVhdGVEZWZsYXRlUmF3KHtcbiAgICAgIGZsdXNoOiB6bGliLlpfU1lOQ19GTFVTSCxcbiAgICAgIHdpbmRvd0JpdHM6ICdudW1iZXInID09PSB0eXBlb2YgbWF4V2luZG93Qml0cyA/IG1heFdpbmRvd0JpdHMgOiBERUZBVUxUX1dJTkRPV19CSVRTLFxuICAgICAgbWVtTGV2ZWw6IHRoaXMuX29wdGlvbnMubWVtTGV2ZWwgfHwgREVGQVVMVF9NRU1fTEVWRUxcbiAgICB9KTtcbiAgfVxuICB0aGlzLl9kZWZsYXRlLndyaXRlSW5Qcm9ncmVzcyA9IHRydWU7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYnVmZmVycyA9IFtdO1xuXG4gIHRoaXMuX2RlZmxhdGUub24oJ2Vycm9yJywgb25FcnJvcikub24oJ2RhdGEnLCBvbkRhdGEpO1xuICB0aGlzLl9kZWZsYXRlLndyaXRlKGRhdGEpO1xuICB0aGlzLl9kZWZsYXRlLmZsdXNoKGZ1bmN0aW9uKCkge1xuICAgIGNsZWFudXAoKTtcbiAgICB2YXIgZGF0YSA9IEJ1ZmZlci5jb25jYXQoYnVmZmVycyk7XG4gICAgaWYgKGZpbikge1xuICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoMCwgZGF0YS5sZW5ndGggLSA0KTtcbiAgICB9XG4gICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgY2xlYW51cCgpO1xuICAgIGNhbGxiYWNrKGVycik7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRhdGEoZGF0YSkge1xuICAgIGJ1ZmZlcnMucHVzaChkYXRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgaWYgKCFzZWxmLl9kZWZsYXRlKSByZXR1cm47XG4gICAgc2VsZi5fZGVmbGF0ZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcbiAgICBzZWxmLl9kZWZsYXRlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25EYXRhKTtcbiAgICBzZWxmLl9kZWZsYXRlLndyaXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIGlmICgoZmluICYmIHNlbGYucGFyYW1zW2VuZHBvaW50ICsgJ19ub19jb250ZXh0X3Rha2VvdmVyJ10pIHx8IHNlbGYuX2RlZmxhdGUucGVuZGluZ0Nsb3NlKSB7XG4gICAgICBpZiAoc2VsZi5fZGVmbGF0ZS5jbG9zZSkgc2VsZi5fZGVmbGF0ZS5jbG9zZSgpO1xuICAgICAgc2VsZi5fZGVmbGF0ZSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlO1xuIiwiLyohXG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8qKlxuICogU3RhdGUgY29uc3RhbnRzXG4gKi9cblxudmFyIEVNUFRZID0gMFxuICAsIEJPRFkgPSAxO1xudmFyIEJJTkFSWUxFTkdUSCA9IDJcbiAgLCBCSU5BUllCT0RZID0gMztcblxuLyoqXG4gKiBIaXhpZSBSZWNlaXZlciBpbXBsZW1lbnRhdGlvblxuICovXG5cbmZ1bmN0aW9uIFJlY2VpdmVyICgpIHtcbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBSZWNlaXZlciA9PT0gZmFsc2UpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3NlcyBjYW4ndCBiZSBmdW5jdGlvbi1jYWxsZWRcIik7XG4gIH1cblxuICB0aGlzLnN0YXRlID0gRU1QVFk7XG4gIHRoaXMuYnVmZmVycyA9IFtdO1xuICB0aGlzLm1lc3NhZ2VFbmQgPSAtMTtcbiAgdGhpcy5zcGFuTGVuZ3RoID0gMDtcbiAgdGhpcy5kZWFkID0gZmFsc2U7XG5cbiAgdGhpcy5vbmVycm9yID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuICB0aGlzLm9uYmluYXJ5ID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbigpIHt9O1xuICB0aGlzLm9ucG9uZyA9IGZ1bmN0aW9uKCkge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjZWl2ZXI7XG5cbi8qKlxuICogQWRkIG5ldyBkYXRhIHRvIHRoZSBwYXJzZXIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZWNlaXZlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oZGF0YSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGZ1bmN0aW9uIGRvQWRkKCkge1xuICAgIGlmIChzZWxmLnN0YXRlID09PSBFTVBUWSkge1xuICAgICAgaWYgKGRhdGEubGVuZ3RoID09IDIgJiYgZGF0YVswXSA9PSAweEZGICYmIGRhdGFbMV0gPT0gMHgwMCkge1xuICAgICAgICBzZWxmLnJlc2V0KCk7XG4gICAgICAgIHNlbGYub25jbG9zZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZGF0YVswXSA9PT0gMHg4MCkge1xuICAgICAgICBzZWxmLm1lc3NhZ2VFbmQgPSAwO1xuICAgICAgICBzZWxmLnN0YXRlID0gQklOQVJZTEVOR1RIO1xuICAgICAgICBkYXRhID0gZGF0YS5zbGljZSgxKTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmIChkYXRhWzBdICE9PSAweDAwKSB7XG4gICAgICAgIHNlbGYuZXJyb3IoJ3BheWxvYWQgbXVzdCBzdGFydCB3aXRoIDB4MDAgYnl0ZScsIHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkYXRhID0gZGF0YS5zbGljZSgxKTtcbiAgICAgIHNlbGYuc3RhdGUgPSBCT0RZO1xuXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzZWxmLnN0YXRlID09PSBCSU5BUllMRU5HVEgpIHtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHdoaWxlICgoaSA8IGRhdGEubGVuZ3RoKSAmJiAoZGF0YVtpXSAmIDB4ODApKSB7XG4gICAgICAgIHNlbGYubWVzc2FnZUVuZCA9IDEyOCAqIHNlbGYubWVzc2FnZUVuZCArIChkYXRhW2ldICYgMHg3Zik7XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIGlmIChpIDwgZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgc2VsZi5tZXNzYWdlRW5kID0gMTI4ICogc2VsZi5tZXNzYWdlRW5kICsgKGRhdGFbaV0gJiAweDdmKTtcbiAgICAgICAgc2VsZi5zdGF0ZSA9IEJJTkFSWUJPRFk7XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIGlmIChpID4gMClcbiAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoaSk7XG4gICAgfVxuICAgIGlmIChzZWxmLnN0YXRlID09PSBCSU5BUllCT0RZKSB7XG4gICAgICB2YXIgZGF0YWxlZnQgPSBzZWxmLm1lc3NhZ2VFbmQgLSBzZWxmLnNwYW5MZW5ndGg7XG4gICAgICBpZiAoZGF0YS5sZW5ndGggPj0gZGF0YWxlZnQpIHtcbiAgICAgICAgLy8gY29uc3VtZSB0aGUgd2hvbGUgYnVmZmVyIHRvIGZpbmlzaCB0aGUgZnJhbWVcbiAgICAgICAgc2VsZi5idWZmZXJzLnB1c2goZGF0YSk7XG4gICAgICAgIHNlbGYuc3Bhbkxlbmd0aCArPSBkYXRhbGVmdDtcbiAgICAgICAgc2VsZi5tZXNzYWdlRW5kID0gZGF0YWxlZnQ7XG4gICAgICAgIHJldHVybiBzZWxmLnBhcnNlKCk7XG4gICAgICB9XG4gICAgICAvLyBmcmFtZSdzIG5vdCBkb25lIGV2ZW4gaWYgd2UgY29uc3VtZSBpdCBhbGxcbiAgICAgIHNlbGYuYnVmZmVycy5wdXNoKGRhdGEpO1xuICAgICAgc2VsZi5zcGFuTGVuZ3RoICs9IGRhdGEubGVuZ3RoO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLmJ1ZmZlcnMucHVzaChkYXRhKTtcbiAgICBpZiAoKHNlbGYubWVzc2FnZUVuZCA9IGJ1ZmZlckluZGV4KGRhdGEsIDB4RkYpKSAhPSAtMSkge1xuICAgICAgc2VsZi5zcGFuTGVuZ3RoICs9IHNlbGYubWVzc2FnZUVuZDtcbiAgICAgIHJldHVybiBzZWxmLnBhcnNlKCk7XG4gICAgfVxuICAgIGVsc2Ugc2VsZi5zcGFuTGVuZ3RoICs9IGRhdGEubGVuZ3RoO1xuICB9XG4gIHdoaWxlKGRhdGEpIGRhdGEgPSBkb0FkZCgpO1xufTtcblxuLyoqXG4gKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIHVzZWQgYnkgdGhlIHJlY2VpdmVyLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kZWFkID0gdHJ1ZTtcbiAgdGhpcy5zdGF0ZSA9IEVNUFRZO1xuICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbn07XG5cbi8qKlxuICogUHJvY2VzcyBidWZmZXJlZCBkYXRhLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBvdXRwdXQgPSBuZXcgQnVmZmVyKHRoaXMuc3Bhbkxlbmd0aCk7XG4gIHZhciBvdXRwdXRJbmRleCA9IDA7XG4gIGZvciAodmFyIGJpID0gMCwgYmwgPSB0aGlzLmJ1ZmZlcnMubGVuZ3RoOyBiaSA8IGJsIC0gMTsgKytiaSkge1xuICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcnNbYmldO1xuICAgIGJ1ZmZlci5jb3B5KG91dHB1dCwgb3V0cHV0SW5kZXgpO1xuICAgIG91dHB1dEluZGV4ICs9IGJ1ZmZlci5sZW5ndGg7XG4gIH1cbiAgdmFyIGxhc3RCdWZmZXIgPSB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJzLmxlbmd0aCAtIDFdO1xuICBpZiAodGhpcy5tZXNzYWdlRW5kID4gMCkgbGFzdEJ1ZmZlci5jb3B5KG91dHB1dCwgb3V0cHV0SW5kZXgsIDAsIHRoaXMubWVzc2FnZUVuZCk7XG4gIGlmICh0aGlzLnN0YXRlICE9PSBCT0RZKSAtLXRoaXMubWVzc2FnZUVuZDtcbiAgdmFyIHRhaWwgPSBudWxsO1xuICBpZiAodGhpcy5tZXNzYWdlRW5kIDwgbGFzdEJ1ZmZlci5sZW5ndGggLSAxKSB7XG4gICAgdGFpbCA9IGxhc3RCdWZmZXIuc2xpY2UodGhpcy5tZXNzYWdlRW5kICsgMSk7XG4gIH1cbiAgdGhpcy5yZXNldCgpO1xuICB0aGlzLm9udGV4dChvdXRwdXQudG9TdHJpbmcoJ3V0ZjgnKSk7XG4gIHJldHVybiB0YWlsO1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIGFuIGVycm9yXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKHJlYXNvbiwgdGVybWluYXRlKSB7XG4gIHRoaXMucmVzZXQoKTtcbiAgdGhpcy5vbmVycm9yKHJlYXNvbiwgdGVybWluYXRlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlc2V0IHBhcnNlciBzdGF0ZVxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlY2VpdmVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgaWYgKHRoaXMuZGVhZCkgcmV0dXJuO1xuICB0aGlzLnN0YXRlID0gRU1QVFk7XG4gIHRoaXMuYnVmZmVycyA9IFtdO1xuICB0aGlzLm1lc3NhZ2VFbmQgPSAtMTtcbiAgdGhpcy5zcGFuTGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogSW50ZXJuYWwgYXBpXG4gKi9cblxuZnVuY3Rpb24gYnVmZmVySW5kZXgoYnVmZmVyLCBieXRlKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVyLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChidWZmZXJbaV0gPT09IGJ5dGUpIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cbiIsIi8qIVxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciB1dGlsID0gcmVxdWlyZSgndXRpbCcpXG4gICwgVmFsaWRhdGlvbiA9IHJlcXVpcmUoJy4vVmFsaWRhdGlvbicpLlZhbGlkYXRpb25cbiAgLCBFcnJvckNvZGVzID0gcmVxdWlyZSgnLi9FcnJvckNvZGVzJylcbiAgLCBCdWZmZXJQb29sID0gcmVxdWlyZSgnLi9CdWZmZXJQb29sJylcbiAgLCBidWZmZXJVdGlsID0gcmVxdWlyZSgnLi9CdWZmZXJVdGlsJykuQnVmZmVyVXRpbFxuICAsIFBlck1lc3NhZ2VEZWZsYXRlID0gcmVxdWlyZSgnLi9QZXJNZXNzYWdlRGVmbGF0ZScpO1xuXG4vKipcbiAqIEh5QmkgUmVjZWl2ZXIgaW1wbGVtZW50YXRpb25cbiAqL1xuXG5mdW5jdGlvbiBSZWNlaXZlciAoZXh0ZW5zaW9ucykge1xuICBpZiAodGhpcyBpbnN0YW5jZW9mIFJlY2VpdmVyID09PSBmYWxzZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzc2VzIGNhbid0IGJlIGZ1bmN0aW9uLWNhbGxlZFwiKTtcbiAgfVxuXG4gIC8vIG1lbW9yeSBwb29sIGZvciBmcmFnbWVudGVkIG1lc3NhZ2VzXG4gIHZhciBmcmFnbWVudGVkUG9vbFByZXZVc2VkID0gLTE7XG4gIHRoaXMuZnJhZ21lbnRlZEJ1ZmZlclBvb2wgPSBuZXcgQnVmZmVyUG9vbCgxMDI0LCBmdW5jdGlvbihkYiwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuIGRiLnVzZWQgKyBsZW5ndGg7XG4gIH0sIGZ1bmN0aW9uKGRiKSB7XG4gICAgcmV0dXJuIGZyYWdtZW50ZWRQb29sUHJldlVzZWQgPSBmcmFnbWVudGVkUG9vbFByZXZVc2VkID49IDAgP1xuICAgICAgTWF0aC5jZWlsKChmcmFnbWVudGVkUG9vbFByZXZVc2VkICsgZGIudXNlZCkgLyAyKSA6XG4gICAgICBkYi51c2VkO1xuICB9KTtcblxuICAvLyBtZW1vcnkgcG9vbCBmb3IgdW5mcmFnbWVudGVkIG1lc3NhZ2VzXG4gIHZhciB1bmZyYWdtZW50ZWRQb29sUHJldlVzZWQgPSAtMTtcbiAgdGhpcy51bmZyYWdtZW50ZWRCdWZmZXJQb29sID0gbmV3IEJ1ZmZlclBvb2woMTAyNCwgZnVuY3Rpb24oZGIsIGxlbmd0aCkge1xuICAgIHJldHVybiBkYi51c2VkICsgbGVuZ3RoO1xuICB9LCBmdW5jdGlvbihkYikge1xuICAgIHJldHVybiB1bmZyYWdtZW50ZWRQb29sUHJldlVzZWQgPSB1bmZyYWdtZW50ZWRQb29sUHJldlVzZWQgPj0gMCA/XG4gICAgICBNYXRoLmNlaWwoKHVuZnJhZ21lbnRlZFBvb2xQcmV2VXNlZCArIGRiLnVzZWQpIC8gMikgOlxuICAgICAgZGIudXNlZDtcbiAgfSk7XG5cbiAgdGhpcy5leHRlbnNpb25zID0gZXh0ZW5zaW9ucyB8fCB7fTtcbiAgdGhpcy5zdGF0ZSA9IHtcbiAgICBhY3RpdmVGcmFnbWVudGVkT3BlcmF0aW9uOiBudWxsLFxuICAgIGxhc3RGcmFnbWVudDogZmFsc2UsXG4gICAgbWFza2VkOiBmYWxzZSxcbiAgICBvcGNvZGU6IDAsXG4gICAgZnJhZ21lbnRlZE9wZXJhdGlvbjogZmFsc2VcbiAgfTtcbiAgdGhpcy5vdmVyZmxvdyA9IFtdO1xuICB0aGlzLmhlYWRlckJ1ZmZlciA9IG5ldyBCdWZmZXIoMTApO1xuICB0aGlzLmV4cGVjdE9mZnNldCA9IDA7XG4gIHRoaXMuZXhwZWN0QnVmZmVyID0gbnVsbDtcbiAgdGhpcy5leHBlY3RIYW5kbGVyID0gbnVsbDtcbiAgdGhpcy5jdXJyZW50TWVzc2FnZSA9IFtdO1xuICB0aGlzLm1lc3NhZ2VIYW5kbGVycyA9IFtdO1xuICB0aGlzLmV4cGVjdEhlYWRlcigyLCB0aGlzLnByb2Nlc3NQYWNrZXQpO1xuICB0aGlzLmRlYWQgPSBmYWxzZTtcbiAgdGhpcy5wcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgdGhpcy5vbmVycm9yID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbnRleHQgPSBmdW5jdGlvbigpIHt9O1xuICB0aGlzLm9uYmluYXJ5ID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24oKSB7fTtcbiAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbigpIHt9O1xuICB0aGlzLm9ucG9uZyA9IGZ1bmN0aW9uKCkge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjZWl2ZXI7XG5cbi8qKlxuICogQWRkIG5ldyBkYXRhIHRvIHRoZSBwYXJzZXIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZWNlaXZlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oZGF0YSkge1xuICB2YXIgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICBpZiAoZGF0YUxlbmd0aCA9PSAwKSByZXR1cm47XG4gIGlmICh0aGlzLmV4cGVjdEJ1ZmZlciA9PSBudWxsKSB7XG4gICAgdGhpcy5vdmVyZmxvdy5wdXNoKGRhdGEpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdG9SZWFkID0gTWF0aC5taW4oZGF0YUxlbmd0aCwgdGhpcy5leHBlY3RCdWZmZXIubGVuZ3RoIC0gdGhpcy5leHBlY3RPZmZzZXQpO1xuICBmYXN0Q29weSh0b1JlYWQsIGRhdGEsIHRoaXMuZXhwZWN0QnVmZmVyLCB0aGlzLmV4cGVjdE9mZnNldCk7XG4gIHRoaXMuZXhwZWN0T2Zmc2V0ICs9IHRvUmVhZDtcbiAgaWYgKHRvUmVhZCA8IGRhdGFMZW5ndGgpIHtcbiAgICB0aGlzLm92ZXJmbG93LnB1c2goZGF0YS5zbGljZSh0b1JlYWQpKTtcbiAgfVxuICB3aGlsZSAodGhpcy5leHBlY3RCdWZmZXIgJiYgdGhpcy5leHBlY3RPZmZzZXQgPT0gdGhpcy5leHBlY3RCdWZmZXIubGVuZ3RoKSB7XG4gICAgdmFyIGJ1ZmZlckZvckhhbmRsZXIgPSB0aGlzLmV4cGVjdEJ1ZmZlcjtcbiAgICB0aGlzLmV4cGVjdEJ1ZmZlciA9IG51bGw7XG4gICAgdGhpcy5leHBlY3RPZmZzZXQgPSAwO1xuICAgIHRoaXMuZXhwZWN0SGFuZGxlci5jYWxsKHRoaXMsIGJ1ZmZlckZvckhhbmRsZXIpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbGVhc2VzIGFsbCByZXNvdXJjZXMgdXNlZCBieSB0aGUgcmVjZWl2ZXIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZWNlaXZlci5wcm90b3R5cGUuY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRlYWQgPSB0cnVlO1xuICB0aGlzLm92ZXJmbG93ID0gbnVsbDtcbiAgdGhpcy5oZWFkZXJCdWZmZXIgPSBudWxsO1xuICB0aGlzLmV4cGVjdEJ1ZmZlciA9IG51bGw7XG4gIHRoaXMuZXhwZWN0SGFuZGxlciA9IG51bGw7XG4gIHRoaXMudW5mcmFnbWVudGVkQnVmZmVyUG9vbCA9IG51bGw7XG4gIHRoaXMuZnJhZ21lbnRlZEJ1ZmZlclBvb2wgPSBudWxsO1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgdGhpcy5jdXJyZW50TWVzc2FnZSA9IG51bGw7XG4gIHRoaXMub25lcnJvciA9IG51bGw7XG4gIHRoaXMub250ZXh0ID0gbnVsbDtcbiAgdGhpcy5vbmJpbmFyeSA9IG51bGw7XG4gIHRoaXMub25jbG9zZSA9IG51bGw7XG4gIHRoaXMub25waW5nID0gbnVsbDtcbiAgdGhpcy5vbnBvbmcgPSBudWxsO1xufTtcblxuLyoqXG4gKiBXYWl0cyBmb3IgYSBjZXJ0YWluIGFtb3VudCBvZiBoZWFkZXIgYnl0ZXMgdG8gYmUgYXZhaWxhYmxlLCB0aGVuIGZpcmVzIGEgY2FsbGJhY2suXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmV4cGVjdEhlYWRlciA9IGZ1bmN0aW9uKGxlbmd0aCwgaGFuZGxlcikge1xuICBpZiAobGVuZ3RoID09IDApIHtcbiAgICBoYW5kbGVyKG51bGwpO1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLmV4cGVjdEJ1ZmZlciA9IHRoaXMuaGVhZGVyQnVmZmVyLnNsaWNlKHRoaXMuZXhwZWN0T2Zmc2V0LCB0aGlzLmV4cGVjdE9mZnNldCArIGxlbmd0aCk7XG4gIHRoaXMuZXhwZWN0SGFuZGxlciA9IGhhbmRsZXI7XG4gIHZhciB0b1JlYWQgPSBsZW5ndGg7XG4gIHdoaWxlICh0b1JlYWQgPiAwICYmIHRoaXMub3ZlcmZsb3cubGVuZ3RoID4gMCkge1xuICAgIHZhciBmcm9tT3ZlcmZsb3cgPSB0aGlzLm92ZXJmbG93LnBvcCgpO1xuICAgIGlmICh0b1JlYWQgPCBmcm9tT3ZlcmZsb3cubGVuZ3RoKSB0aGlzLm92ZXJmbG93LnB1c2goZnJvbU92ZXJmbG93LnNsaWNlKHRvUmVhZCkpO1xuICAgIHZhciByZWFkID0gTWF0aC5taW4oZnJvbU92ZXJmbG93Lmxlbmd0aCwgdG9SZWFkKTtcbiAgICBmYXN0Q29weShyZWFkLCBmcm9tT3ZlcmZsb3csIHRoaXMuZXhwZWN0QnVmZmVyLCB0aGlzLmV4cGVjdE9mZnNldCk7XG4gICAgdGhpcy5leHBlY3RPZmZzZXQgKz0gcmVhZDtcbiAgICB0b1JlYWQgLT0gcmVhZDtcbiAgfVxufTtcblxuLyoqXG4gKiBXYWl0cyBmb3IgYSBjZXJ0YWluIGFtb3VudCBvZiBkYXRhIGJ5dGVzIHRvIGJlIGF2YWlsYWJsZSwgdGhlbiBmaXJlcyBhIGNhbGxiYWNrLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlY2VpdmVyLnByb3RvdHlwZS5leHBlY3REYXRhID0gZnVuY3Rpb24obGVuZ3RoLCBoYW5kbGVyKSB7XG4gIGlmIChsZW5ndGggPT0gMCkge1xuICAgIGhhbmRsZXIobnVsbCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuZXhwZWN0QnVmZmVyID0gdGhpcy5hbGxvY2F0ZUZyb21Qb29sKGxlbmd0aCwgdGhpcy5zdGF0ZS5mcmFnbWVudGVkT3BlcmF0aW9uKTtcbiAgdGhpcy5leHBlY3RIYW5kbGVyID0gaGFuZGxlcjtcbiAgdmFyIHRvUmVhZCA9IGxlbmd0aDtcbiAgd2hpbGUgKHRvUmVhZCA+IDAgJiYgdGhpcy5vdmVyZmxvdy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGZyb21PdmVyZmxvdyA9IHRoaXMub3ZlcmZsb3cucG9wKCk7XG4gICAgaWYgKHRvUmVhZCA8IGZyb21PdmVyZmxvdy5sZW5ndGgpIHRoaXMub3ZlcmZsb3cucHVzaChmcm9tT3ZlcmZsb3cuc2xpY2UodG9SZWFkKSk7XG4gICAgdmFyIHJlYWQgPSBNYXRoLm1pbihmcm9tT3ZlcmZsb3cubGVuZ3RoLCB0b1JlYWQpO1xuICAgIGZhc3RDb3B5KHJlYWQsIGZyb21PdmVyZmxvdywgdGhpcy5leHBlY3RCdWZmZXIsIHRoaXMuZXhwZWN0T2Zmc2V0KTtcbiAgICB0aGlzLmV4cGVjdE9mZnNldCArPSByZWFkO1xuICAgIHRvUmVhZCAtPSByZWFkO1xuICB9XG59O1xuXG4vKipcbiAqIEFsbG9jYXRlcyBtZW1vcnkgZnJvbSB0aGUgYnVmZmVyIHBvb2wuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmFsbG9jYXRlRnJvbVBvb2wgPSBmdW5jdGlvbihsZW5ndGgsIGlzRnJhZ21lbnRlZCkge1xuICByZXR1cm4gKGlzRnJhZ21lbnRlZCA/IHRoaXMuZnJhZ21lbnRlZEJ1ZmZlclBvb2wgOiB0aGlzLnVuZnJhZ21lbnRlZEJ1ZmZlclBvb2wpLmdldChsZW5ndGgpO1xufTtcblxuLyoqXG4gKiBTdGFydCBwcm9jZXNzaW5nIGEgbmV3IHBhY2tldC5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZWNlaXZlci5wcm90b3R5cGUucHJvY2Vzc1BhY2tldCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIGlmICh0aGlzLmV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICBpZiAoKGRhdGFbMF0gJiAweDMwKSAhPSAwKSB7XG4gICAgICB0aGlzLmVycm9yKCdyZXNlcnZlZCBmaWVsZHMgKDIsIDMpIG11c3QgYmUgZW1wdHknLCAxMDAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKChkYXRhWzBdICYgMHg3MCkgIT0gMCkge1xuICAgICAgdGhpcy5lcnJvcigncmVzZXJ2ZWQgZmllbGRzIG11c3QgYmUgZW1wdHknLCAxMDAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgdGhpcy5zdGF0ZS5sYXN0RnJhZ21lbnQgPSAoZGF0YVswXSAmIDB4ODApID09IDB4ODA7XG4gIHRoaXMuc3RhdGUubWFza2VkID0gKGRhdGFbMV0gJiAweDgwKSA9PSAweDgwO1xuICB2YXIgY29tcHJlc3NlZCA9IChkYXRhWzBdICYgMHg0MCkgPT0gMHg0MDtcbiAgdmFyIG9wY29kZSA9IGRhdGFbMF0gJiAweGY7XG4gIGlmIChvcGNvZGUgPT09IDApIHtcbiAgICBpZiAoY29tcHJlc3NlZCkge1xuICAgICAgdGhpcy5lcnJvcignY29udGludWF0aW9uIGZyYW1lIGNhbm5vdCBoYXZlIHRoZSBQZXItbWVzc2FnZSBDb21wcmVzc2VkIGJpdHMnLCAxMDAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY29udGludWF0aW9uIGZyYW1lXG4gICAgdGhpcy5zdGF0ZS5mcmFnbWVudGVkT3BlcmF0aW9uID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXRlLm9wY29kZSA9IHRoaXMuc3RhdGUuYWN0aXZlRnJhZ21lbnRlZE9wZXJhdGlvbjtcbiAgICBpZiAoISh0aGlzLnN0YXRlLm9wY29kZSA9PSAxIHx8IHRoaXMuc3RhdGUub3Bjb2RlID09IDIpKSB7XG4gICAgICB0aGlzLmVycm9yKCdjb250aW51YXRpb24gZnJhbWUgY2Fubm90IGZvbGxvdyBjdXJyZW50IG9wY29kZScsIDEwMDIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAob3Bjb2RlIDwgMyAmJiB0aGlzLnN0YXRlLmFjdGl2ZUZyYWdtZW50ZWRPcGVyYXRpb24gIT0gbnVsbCkge1xuICAgICAgdGhpcy5lcnJvcignZGF0YSBmcmFtZXMgYWZ0ZXIgdGhlIGluaXRpYWwgZGF0YSBmcmFtZSBtdXN0IGhhdmUgb3Bjb2RlIDAnLCAxMDAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9wY29kZSA+PSA4ICYmIGNvbXByZXNzZWQpIHtcbiAgICAgIHRoaXMuZXJyb3IoJ2NvbnRyb2wgZnJhbWVzIGNhbm5vdCBoYXZlIHRoZSBQZXItbWVzc2FnZSBDb21wcmVzc2VkIGJpdHMnLCAxMDAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5jb21wcmVzc2VkID0gY29tcHJlc3NlZDtcbiAgICB0aGlzLnN0YXRlLm9wY29kZSA9IG9wY29kZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0RnJhZ21lbnQgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnN0YXRlLmZyYWdtZW50ZWRPcGVyYXRpb24gPSB0cnVlO1xuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVGcmFnbWVudGVkT3BlcmF0aW9uID0gb3Bjb2RlO1xuICAgIH1cbiAgICBlbHNlIHRoaXMuc3RhdGUuZnJhZ21lbnRlZE9wZXJhdGlvbiA9IGZhbHNlO1xuICB9XG4gIHZhciBoYW5kbGVyID0gb3Bjb2Rlc1t0aGlzLnN0YXRlLm9wY29kZV07XG4gIGlmICh0eXBlb2YgaGFuZGxlciA9PSAndW5kZWZpbmVkJykgdGhpcy5lcnJvcignbm8gaGFuZGxlciBmb3Igb3Bjb2RlICcgKyB0aGlzLnN0YXRlLm9wY29kZSwgMTAwMik7XG4gIGVsc2Uge1xuICAgIGhhbmRsZXIuc3RhcnQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFbmRwcm9jZXNzaW5nIGEgcGFja2V0LlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlY2VpdmVyLnByb3RvdHlwZS5lbmRQYWNrZXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnN0YXRlLmZyYWdtZW50ZWRPcGVyYXRpb24pIHRoaXMudW5mcmFnbWVudGVkQnVmZmVyUG9vbC5yZXNldCh0cnVlKTtcbiAgZWxzZSBpZiAodGhpcy5zdGF0ZS5sYXN0RnJhZ21lbnQpIHRoaXMuZnJhZ21lbnRlZEJ1ZmZlclBvb2wucmVzZXQodHJ1ZSk7XG4gIHRoaXMuZXhwZWN0T2Zmc2V0ID0gMDtcbiAgdGhpcy5leHBlY3RCdWZmZXIgPSBudWxsO1xuICB0aGlzLmV4cGVjdEhhbmRsZXIgPSBudWxsO1xuICBpZiAodGhpcy5zdGF0ZS5sYXN0RnJhZ21lbnQgJiYgdGhpcy5zdGF0ZS5vcGNvZGUgPT09IHRoaXMuc3RhdGUuYWN0aXZlRnJhZ21lbnRlZE9wZXJhdGlvbikge1xuICAgIC8vIGVuZCBjdXJyZW50IGZyYWdtZW50ZWQgb3BlcmF0aW9uXG4gICAgdGhpcy5zdGF0ZS5hY3RpdmVGcmFnbWVudGVkT3BlcmF0aW9uID0gbnVsbDtcbiAgfVxuICB0aGlzLnN0YXRlLmxhc3RGcmFnbWVudCA9IGZhbHNlO1xuICB0aGlzLnN0YXRlLm9wY29kZSA9IHRoaXMuc3RhdGUuYWN0aXZlRnJhZ21lbnRlZE9wZXJhdGlvbiAhPSBudWxsID8gdGhpcy5zdGF0ZS5hY3RpdmVGcmFnbWVudGVkT3BlcmF0aW9uIDogMDtcbiAgdGhpcy5zdGF0ZS5tYXNrZWQgPSBmYWxzZTtcbiAgdGhpcy5leHBlY3RIZWFkZXIoMiwgdGhpcy5wcm9jZXNzUGFja2V0KTtcbn07XG5cbi8qKlxuICogUmVzZXQgdGhlIHBhcnNlciBzdGF0ZS5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZWNlaXZlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuZGVhZCkgcmV0dXJuO1xuICB0aGlzLnN0YXRlID0ge1xuICAgIGFjdGl2ZUZyYWdtZW50ZWRPcGVyYXRpb246IG51bGwsXG4gICAgbGFzdEZyYWdtZW50OiBmYWxzZSxcbiAgICBtYXNrZWQ6IGZhbHNlLFxuICAgIG9wY29kZTogMCxcbiAgICBmcmFnbWVudGVkT3BlcmF0aW9uOiBmYWxzZVxuICB9O1xuICB0aGlzLmZyYWdtZW50ZWRCdWZmZXJQb29sLnJlc2V0KHRydWUpO1xuICB0aGlzLnVuZnJhZ21lbnRlZEJ1ZmZlclBvb2wucmVzZXQodHJ1ZSk7XG4gIHRoaXMuZXhwZWN0T2Zmc2V0ID0gMDtcbiAgdGhpcy5leHBlY3RCdWZmZXIgPSBudWxsO1xuICB0aGlzLmV4cGVjdEhhbmRsZXIgPSBudWxsO1xuICB0aGlzLm92ZXJmbG93ID0gW107XG4gIHRoaXMuY3VycmVudE1lc3NhZ2UgPSBbXTtcbiAgdGhpcy5tZXNzYWdlSGFuZGxlcnMgPSBbXTtcbn07XG5cbi8qKlxuICogVW5tYXNrIHJlY2VpdmVkIGRhdGEuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLnVubWFzayA9IGZ1bmN0aW9uIChtYXNrLCBidWYsIGJpbmFyeSkge1xuICBpZiAobWFzayAhPSBudWxsICYmIGJ1ZiAhPSBudWxsKSBidWZmZXJVdGlsLnVubWFzayhidWYsIG1hc2spO1xuICBpZiAoYmluYXJ5KSByZXR1cm4gYnVmO1xuICByZXR1cm4gYnVmICE9IG51bGwgPyBidWYudG9TdHJpbmcoJ3V0ZjgnKSA6ICcnO1xufTtcblxuLyoqXG4gKiBDb25jYXRlbmF0ZXMgYSBsaXN0IG9mIGJ1ZmZlcnMuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmNvbmNhdEJ1ZmZlcnMgPSBmdW5jdGlvbihidWZmZXJzKSB7XG4gIHZhciBsZW5ndGggPSAwO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgKytpKSBsZW5ndGggKz0gYnVmZmVyc1tpXS5sZW5ndGg7XG4gIHZhciBtZXJnZWRCdWZmZXIgPSBuZXcgQnVmZmVyKGxlbmd0aCk7XG4gIGJ1ZmZlclV0aWwubWVyZ2UobWVyZ2VkQnVmZmVyLCBidWZmZXJzKTtcbiAgcmV0dXJuIG1lcmdlZEJ1ZmZlcjtcbn07XG5cbi8qKlxuICogSGFuZGxlcyBhbiBlcnJvclxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlY2VpdmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChyZWFzb24sIHByb3RvY29sRXJyb3JDb2RlKSB7XG4gIHRoaXMucmVzZXQoKTtcbiAgdGhpcy5vbmVycm9yKHJlYXNvbiwgcHJvdG9jb2xFcnJvckNvZGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRXhlY3V0ZSBtZXNzYWdlIGhhbmRsZXIgYnVmZmVyc1xuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlY2VpdmVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5wcm9jZXNzaW5nIHx8IHRoaXMuZGVhZCkgcmV0dXJuO1xuXG4gIHZhciBoYW5kbGVyID0gdGhpcy5tZXNzYWdlSGFuZGxlcnMuc2hpZnQoKTtcbiAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG5cbiAgdGhpcy5wcm9jZXNzaW5nID0gdHJ1ZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIGhhbmRsZXIoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgc2VsZi5mbHVzaCgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogQXBwbHkgZXh0ZW5zaW9ucyB0byBtZXNzYWdlXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVjZWl2ZXIucHJvdG90eXBlLmFwcGx5RXh0ZW5zaW9ucyA9IGZ1bmN0aW9uKG1lc3NhZ2VCdWZmZXIsIGZpbiwgY29tcHJlc3NlZCwgY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAoY29tcHJlc3NlZCkge1xuICAgIHRoaXMuZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXS5kZWNvbXByZXNzKG1lc3NhZ2VCdWZmZXIsIGZpbiwgZnVuY3Rpb24oZXJyLCBidWZmZXIpIHtcbiAgICAgIGlmIChzZWxmLmRlYWQpIHJldHVybjtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCdpbnZhbGlkIGNvbXByZXNzZWQgZGF0YScpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2sobnVsbCwgYnVmZmVyKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFjayhudWxsLCBtZXNzYWdlQnVmZmVyKTtcbiAgfVxufTtcblxuLyoqXG4gKiBCdWZmZXIgdXRpbGl0aWVzXG4gKi9cblxuZnVuY3Rpb24gcmVhZFVJbnQxNkJFKHN0YXJ0KSB7XG4gIHJldHVybiAodGhpc1tzdGFydF08PDgpICtcbiAgICAgICAgIHRoaXNbc3RhcnQrMV07XG59XG5cbmZ1bmN0aW9uIHJlYWRVSW50MzJCRShzdGFydCkge1xuICByZXR1cm4gKHRoaXNbc3RhcnRdPDwyNCkgK1xuICAgICAgICAgKHRoaXNbc3RhcnQrMV08PDE2KSArXG4gICAgICAgICAodGhpc1tzdGFydCsyXTw8OCkgK1xuICAgICAgICAgdGhpc1tzdGFydCszXTtcbn1cblxuZnVuY3Rpb24gZmFzdENvcHkobGVuZ3RoLCBzcmNCdWZmZXIsIGRzdEJ1ZmZlciwgZHN0T2Zmc2V0KSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgZGVmYXVsdDogc3JjQnVmZmVyLmNvcHkoZHN0QnVmZmVyLCBkc3RPZmZzZXQsIDAsIGxlbmd0aCk7IGJyZWFrO1xuICAgIGNhc2UgMTY6IGRzdEJ1ZmZlcltkc3RPZmZzZXQrMTVdID0gc3JjQnVmZmVyWzE1XTtcbiAgICBjYXNlIDE1OiBkc3RCdWZmZXJbZHN0T2Zmc2V0KzE0XSA9IHNyY0J1ZmZlclsxNF07XG4gICAgY2FzZSAxNDogZHN0QnVmZmVyW2RzdE9mZnNldCsxM10gPSBzcmNCdWZmZXJbMTNdO1xuICAgIGNhc2UgMTM6IGRzdEJ1ZmZlcltkc3RPZmZzZXQrMTJdID0gc3JjQnVmZmVyWzEyXTtcbiAgICBjYXNlIDEyOiBkc3RCdWZmZXJbZHN0T2Zmc2V0KzExXSA9IHNyY0J1ZmZlclsxMV07XG4gICAgY2FzZSAxMTogZHN0QnVmZmVyW2RzdE9mZnNldCsxMF0gPSBzcmNCdWZmZXJbMTBdO1xuICAgIGNhc2UgMTA6IGRzdEJ1ZmZlcltkc3RPZmZzZXQrOV0gPSBzcmNCdWZmZXJbOV07XG4gICAgY2FzZSA5OiBkc3RCdWZmZXJbZHN0T2Zmc2V0KzhdID0gc3JjQnVmZmVyWzhdO1xuICAgIGNhc2UgODogZHN0QnVmZmVyW2RzdE9mZnNldCs3XSA9IHNyY0J1ZmZlcls3XTtcbiAgICBjYXNlIDc6IGRzdEJ1ZmZlcltkc3RPZmZzZXQrNl0gPSBzcmNCdWZmZXJbNl07XG4gICAgY2FzZSA2OiBkc3RCdWZmZXJbZHN0T2Zmc2V0KzVdID0gc3JjQnVmZmVyWzVdO1xuICAgIGNhc2UgNTogZHN0QnVmZmVyW2RzdE9mZnNldCs0XSA9IHNyY0J1ZmZlcls0XTtcbiAgICBjYXNlIDQ6IGRzdEJ1ZmZlcltkc3RPZmZzZXQrM10gPSBzcmNCdWZmZXJbM107XG4gICAgY2FzZSAzOiBkc3RCdWZmZXJbZHN0T2Zmc2V0KzJdID0gc3JjQnVmZmVyWzJdO1xuICAgIGNhc2UgMjogZHN0QnVmZmVyW2RzdE9mZnNldCsxXSA9IHNyY0J1ZmZlclsxXTtcbiAgICBjYXNlIDE6IGRzdEJ1ZmZlcltkc3RPZmZzZXRdID0gc3JjQnVmZmVyWzBdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb25lKG9iaikge1xuICB2YXIgY2xvbmVkID0ge307XG4gIGZvciAodmFyIGsgaW4gb2JqKSB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgY2xvbmVkW2tdID0gb2JqW2tdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2xvbmVkO1xufVxuXG4vKipcbiAqIE9wY29kZSBoYW5kbGVyc1xuICovXG5cbnZhciBvcGNvZGVzID0ge1xuICAvLyB0ZXh0XG4gICcxJzoge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAvLyBkZWNvZGUgbGVuZ3RoXG4gICAgICB2YXIgZmlyc3RMZW5ndGggPSBkYXRhWzFdICYgMHg3ZjtcbiAgICAgIGlmIChmaXJzdExlbmd0aCA8IDEyNikge1xuICAgICAgICBvcGNvZGVzWycxJ10uZ2V0RGF0YS5jYWxsKHNlbGYsIGZpcnN0TGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGZpcnN0TGVuZ3RoID09IDEyNikge1xuICAgICAgICBzZWxmLmV4cGVjdEhlYWRlcigyLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgb3Bjb2Rlc1snMSddLmdldERhdGEuY2FsbChzZWxmLCByZWFkVUludDE2QkUuY2FsbChkYXRhLCAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZmlyc3RMZW5ndGggPT0gMTI3KSB7XG4gICAgICAgIHNlbGYuZXhwZWN0SGVhZGVyKDgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAocmVhZFVJbnQzMkJFLmNhbGwoZGF0YSwgMCkgIT0gMCkge1xuICAgICAgICAgICAgc2VsZi5lcnJvcigncGFja2V0cyB3aXRoIGxlbmd0aCBzcGFubmluZyBtb3JlIHRoYW4gMzIgYml0IGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkJywgMTAwOCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wY29kZXNbJzEnXS5nZXREYXRhLmNhbGwoc2VsZiwgcmVhZFVJbnQzMkJFLmNhbGwoZGF0YSwgNCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldERhdGE6IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKHNlbGYuc3RhdGUubWFza2VkKSB7XG4gICAgICAgIHNlbGYuZXhwZWN0SGVhZGVyKDQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgbWFzayA9IGRhdGE7XG4gICAgICAgICAgc2VsZi5leHBlY3REYXRhKGxlbmd0aCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgb3Bjb2Rlc1snMSddLmZpbmlzaC5jYWxsKHNlbGYsIG1hc2ssIGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZWxmLmV4cGVjdERhdGEobGVuZ3RoLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgb3Bjb2Rlc1snMSddLmZpbmlzaC5jYWxsKHNlbGYsIG51bGwsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbmlzaDogZnVuY3Rpb24obWFzaywgZGF0YSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhY2tldCA9IHRoaXMudW5tYXNrKG1hc2ssIGRhdGEsIHRydWUpIHx8IG5ldyBCdWZmZXIoMCk7XG4gICAgICB2YXIgc3RhdGUgPSBjbG9uZSh0aGlzLnN0YXRlKTtcbiAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzLnB1c2goZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgc2VsZi5hcHBseUV4dGVuc2lvbnMocGFja2V0LCBzdGF0ZS5sYXN0RnJhZ21lbnQsIHN0YXRlLmNvbXByZXNzZWQsIGZ1bmN0aW9uKGVyciwgYnVmZmVyKSB7XG4gICAgICAgICAgaWYgKGVycikgcmV0dXJuIHNlbGYuZXJyb3IoZXJyLm1lc3NhZ2UsIDEwMDcpO1xuICAgICAgICAgIGlmIChidWZmZXIgIT0gbnVsbCkgc2VsZi5jdXJyZW50TWVzc2FnZS5wdXNoKGJ1ZmZlcik7XG5cbiAgICAgICAgICBpZiAoc3RhdGUubGFzdEZyYWdtZW50KSB7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZUJ1ZmZlciA9IHNlbGYuY29uY2F0QnVmZmVycyhzZWxmLmN1cnJlbnRNZXNzYWdlKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1lc3NhZ2UgPSBbXTtcbiAgICAgICAgICAgIGlmICghVmFsaWRhdGlvbi5pc1ZhbGlkVVRGOChtZXNzYWdlQnVmZmVyKSkge1xuICAgICAgICAgICAgICBzZWxmLmVycm9yKCdpbnZhbGlkIHV0Zjggc2VxdWVuY2UnLCAxMDA3KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5vbnRleHQobWVzc2FnZUJ1ZmZlci50b1N0cmluZygndXRmOCcpLCB7bWFza2VkOiBzdGF0ZS5tYXNrZWQsIGJ1ZmZlcjogbWVzc2FnZUJ1ZmZlcn0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgdGhpcy5lbmRQYWNrZXQoKTtcbiAgICB9XG4gIH0sXG4gIC8vIGJpbmFyeVxuICAnMic6IHtcbiAgICBzdGFydDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgLy8gZGVjb2RlIGxlbmd0aFxuICAgICAgdmFyIGZpcnN0TGVuZ3RoID0gZGF0YVsxXSAmIDB4N2Y7XG4gICAgICBpZiAoZmlyc3RMZW5ndGggPCAxMjYpIHtcbiAgICAgICAgb3Bjb2Rlc1snMiddLmdldERhdGEuY2FsbChzZWxmLCBmaXJzdExlbmd0aCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChmaXJzdExlbmd0aCA9PSAxMjYpIHtcbiAgICAgICAgc2VsZi5leHBlY3RIZWFkZXIoMiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIG9wY29kZXNbJzInXS5nZXREYXRhLmNhbGwoc2VsZiwgcmVhZFVJbnQxNkJFLmNhbGwoZGF0YSwgMCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGZpcnN0TGVuZ3RoID09IDEyNykge1xuICAgICAgICBzZWxmLmV4cGVjdEhlYWRlcig4LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKHJlYWRVSW50MzJCRS5jYWxsKGRhdGEsIDApICE9IDApIHtcbiAgICAgICAgICAgIHNlbGYuZXJyb3IoJ3BhY2tldHMgd2l0aCBsZW5ndGggc3Bhbm5pbmcgbW9yZSB0aGFuIDMyIGJpdCBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCcsIDEwMDgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvcGNvZGVzWycyJ10uZ2V0RGF0YS5jYWxsKHNlbGYsIHJlYWRVSW50MzJCRS5jYWxsKGRhdGEsIDQsIHRydWUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXREYXRhOiBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmIChzZWxmLnN0YXRlLm1hc2tlZCkge1xuICAgICAgICBzZWxmLmV4cGVjdEhlYWRlcig0LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIG1hc2sgPSBkYXRhO1xuICAgICAgICAgIHNlbGYuZXhwZWN0RGF0YShsZW5ndGgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIG9wY29kZXNbJzInXS5maW5pc2guY2FsbChzZWxmLCBtYXNrLCBkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5leHBlY3REYXRhKGxlbmd0aCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIG9wY29kZXNbJzInXS5maW5pc2guY2FsbChzZWxmLCBudWxsLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uKG1hc2ssIGRhdGEpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYWNrZXQgPSB0aGlzLnVubWFzayhtYXNrLCBkYXRhLCB0cnVlKSB8fCBuZXcgQnVmZmVyKDApO1xuICAgICAgdmFyIHN0YXRlID0gY2xvbmUodGhpcy5zdGF0ZSk7XG4gICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5wdXNoKGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHNlbGYuYXBwbHlFeHRlbnNpb25zKHBhY2tldCwgc3RhdGUubGFzdEZyYWdtZW50LCBzdGF0ZS5jb21wcmVzc2VkLCBmdW5jdGlvbihlcnIsIGJ1ZmZlcikge1xuICAgICAgICAgIGlmIChlcnIpIHJldHVybiBzZWxmLmVycm9yKGVyci5tZXNzYWdlLCAxMDA3KTtcbiAgICAgICAgICBpZiAoYnVmZmVyICE9IG51bGwpIHNlbGYuY3VycmVudE1lc3NhZ2UucHVzaChidWZmZXIpO1xuICAgICAgICAgIGlmIChzdGF0ZS5sYXN0RnJhZ21lbnQpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlQnVmZmVyID0gc2VsZi5jb25jYXRCdWZmZXJzKHNlbGYuY3VycmVudE1lc3NhZ2UpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TWVzc2FnZSA9IFtdO1xuICAgICAgICAgICAgc2VsZi5vbmJpbmFyeShtZXNzYWdlQnVmZmVyLCB7bWFza2VkOiBzdGF0ZS5tYXNrZWQsIGJ1ZmZlcjogbWVzc2FnZUJ1ZmZlcn0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgdGhpcy5lbmRQYWNrZXQoKTtcbiAgICB9XG4gIH0sXG4gIC8vIGNsb3NlXG4gICc4Jzoge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBpZiAoc2VsZi5zdGF0ZS5sYXN0RnJhZ21lbnQgPT0gZmFsc2UpIHtcbiAgICAgICAgc2VsZi5lcnJvcignZnJhZ21lbnRlZCBjbG9zZSBpcyBub3Qgc3VwcG9ydGVkJywgMTAwMik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gZGVjb2RlIGxlbmd0aFxuICAgICAgdmFyIGZpcnN0TGVuZ3RoID0gZGF0YVsxXSAmIDB4N2Y7XG4gICAgICBpZiAoZmlyc3RMZW5ndGggPCAxMjYpIHtcbiAgICAgICAgb3Bjb2Rlc1snOCddLmdldERhdGEuY2FsbChzZWxmLCBmaXJzdExlbmd0aCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5lcnJvcignY29udHJvbCBmcmFtZXMgY2Fubm90IGhhdmUgbW9yZSB0aGFuIDEyNSBieXRlcyBvZiBkYXRhJywgMTAwMik7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXREYXRhOiBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmIChzZWxmLnN0YXRlLm1hc2tlZCkge1xuICAgICAgICBzZWxmLmV4cGVjdEhlYWRlcig0LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIG1hc2sgPSBkYXRhO1xuICAgICAgICAgIHNlbGYuZXhwZWN0RGF0YShsZW5ndGgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIG9wY29kZXNbJzgnXS5maW5pc2guY2FsbChzZWxmLCBtYXNrLCBkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5leHBlY3REYXRhKGxlbmd0aCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIG9wY29kZXNbJzgnXS5maW5pc2guY2FsbChzZWxmLCBudWxsLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uKG1hc2ssIGRhdGEpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGRhdGEgPSBzZWxmLnVubWFzayhtYXNrLCBkYXRhLCB0cnVlKTtcblxuICAgICAgdmFyIHN0YXRlID0gY2xvbmUodGhpcy5zdGF0ZSk7XG4gICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5wdXNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgc2VsZi5lcnJvcignY2xvc2UgcGFja2V0cyB3aXRoIGRhdGEgbXVzdCBiZSBhdCBsZWFzdCB0d28gYnl0ZXMgbG9uZycsIDEwMDIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29kZSA9IGRhdGEgJiYgZGF0YS5sZW5ndGggPiAxID8gcmVhZFVJbnQxNkJFLmNhbGwoZGF0YSwgMCkgOiAxMDAwO1xuICAgICAgICBpZiAoIUVycm9yQ29kZXMuaXNWYWxpZEVycm9yQ29kZShjb2RlKSkge1xuICAgICAgICAgIHNlbGYuZXJyb3IoJ2ludmFsaWQgZXJyb3IgY29kZScsIDEwMDIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWVzc2FnZSA9ICcnO1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICB2YXIgbWVzc2FnZUJ1ZmZlciA9IGRhdGEuc2xpY2UoMik7XG4gICAgICAgICAgaWYgKCFWYWxpZGF0aW9uLmlzVmFsaWRVVEY4KG1lc3NhZ2VCdWZmZXIpKSB7XG4gICAgICAgICAgICBzZWxmLmVycm9yKCdpbnZhbGlkIHV0Zjggc2VxdWVuY2UnLCAxMDA3KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VCdWZmZXIudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm9uY2xvc2UoY29kZSwgbWVzc2FnZSwge21hc2tlZDogc3RhdGUubWFza2VkfSk7XG4gICAgICAgIHNlbGYucmVzZXQoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH0sXG4gIH0sXG4gIC8vIHBpbmdcbiAgJzknOiB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmIChzZWxmLnN0YXRlLmxhc3RGcmFnbWVudCA9PSBmYWxzZSkge1xuICAgICAgICBzZWxmLmVycm9yKCdmcmFnbWVudGVkIHBpbmcgaXMgbm90IHN1cHBvcnRlZCcsIDEwMDIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGRlY29kZSBsZW5ndGhcbiAgICAgIHZhciBmaXJzdExlbmd0aCA9IGRhdGFbMV0gJiAweDdmO1xuICAgICAgaWYgKGZpcnN0TGVuZ3RoIDwgMTI2KSB7XG4gICAgICAgIG9wY29kZXNbJzknXS5nZXREYXRhLmNhbGwoc2VsZiwgZmlyc3RMZW5ndGgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYuZXJyb3IoJ2NvbnRyb2wgZnJhbWVzIGNhbm5vdCBoYXZlIG1vcmUgdGhhbiAxMjUgYnl0ZXMgb2YgZGF0YScsIDEwMDIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RGF0YTogZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBpZiAoc2VsZi5zdGF0ZS5tYXNrZWQpIHtcbiAgICAgICAgc2VsZi5leHBlY3RIZWFkZXIoNCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciBtYXNrID0gZGF0YTtcbiAgICAgICAgICBzZWxmLmV4cGVjdERhdGEobGVuZ3RoLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBvcGNvZGVzWyc5J10uZmluaXNoLmNhbGwoc2VsZiwgbWFzaywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYuZXhwZWN0RGF0YShsZW5ndGgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBvcGNvZGVzWyc5J10uZmluaXNoLmNhbGwoc2VsZiwgbnVsbCwgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgZmluaXNoOiBmdW5jdGlvbihtYXNrLCBkYXRhKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBkYXRhID0gdGhpcy51bm1hc2sobWFzaywgZGF0YSwgdHJ1ZSk7XG4gICAgICB2YXIgc3RhdGUgPSBjbG9uZSh0aGlzLnN0YXRlKTtcbiAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzLnB1c2goZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgc2VsZi5vbnBpbmcoZGF0YSwge21hc2tlZDogc3RhdGUubWFza2VkLCBiaW5hcnk6IHRydWV9KTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgdGhpcy5lbmRQYWNrZXQoKTtcbiAgICB9XG4gIH0sXG4gIC8vIHBvbmdcbiAgJzEwJzoge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBpZiAoc2VsZi5zdGF0ZS5sYXN0RnJhZ21lbnQgPT0gZmFsc2UpIHtcbiAgICAgICAgc2VsZi5lcnJvcignZnJhZ21lbnRlZCBwb25nIGlzIG5vdCBzdXBwb3J0ZWQnLCAxMDAyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWNvZGUgbGVuZ3RoXG4gICAgICB2YXIgZmlyc3RMZW5ndGggPSBkYXRhWzFdICYgMHg3ZjtcbiAgICAgIGlmIChmaXJzdExlbmd0aCA8IDEyNikge1xuICAgICAgICBvcGNvZGVzWycxMCddLmdldERhdGEuY2FsbChzZWxmLCBmaXJzdExlbmd0aCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5lcnJvcignY29udHJvbCBmcmFtZXMgY2Fubm90IGhhdmUgbW9yZSB0aGFuIDEyNSBieXRlcyBvZiBkYXRhJywgMTAwMik7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXREYXRhOiBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmICh0aGlzLnN0YXRlLm1hc2tlZCkge1xuICAgICAgICB0aGlzLmV4cGVjdEhlYWRlcig0LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIG1hc2sgPSBkYXRhO1xuICAgICAgICAgIHNlbGYuZXhwZWN0RGF0YShsZW5ndGgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIG9wY29kZXNbJzEwJ10uZmluaXNoLmNhbGwoc2VsZiwgbWFzaywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZXhwZWN0RGF0YShsZW5ndGgsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBvcGNvZGVzWycxMCddLmZpbmlzaC5jYWxsKHNlbGYsIG51bGwsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbmlzaDogZnVuY3Rpb24obWFzaywgZGF0YSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgZGF0YSA9IHNlbGYudW5tYXNrKG1hc2ssIGRhdGEsIHRydWUpO1xuICAgICAgdmFyIHN0YXRlID0gY2xvbmUodGhpcy5zdGF0ZSk7XG4gICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5wdXNoKGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHNlbGYub25wb25nKGRhdGEsIHttYXNrZWQ6IHN0YXRlLm1hc2tlZCwgYmluYXJ5OiB0cnVlfSk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgIHRoaXMuZW5kUGFja2V0KCk7XG4gICAgfVxuICB9XG59XG4iLCIvKiFcbiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudFxuICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJylcbiAgLCB1dGlsID0gcmVxdWlyZSgndXRpbCcpXG4gICwgRXZlbnRFbWl0dGVyID0gZXZlbnRzLkV2ZW50RW1pdHRlcjtcblxuLyoqXG4gKiBIaXhpZSBTZW5kZXIgaW1wbGVtZW50YXRpb25cbiAqL1xuXG5mdW5jdGlvbiBTZW5kZXIoc29ja2V0KSB7XG4gIGlmICh0aGlzIGluc3RhbmNlb2YgU2VuZGVyID09PSBmYWxzZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzc2VzIGNhbid0IGJlIGZ1bmN0aW9uLWNhbGxlZFwiKTtcbiAgfVxuXG4gIGV2ZW50cy5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB0aGlzLnNvY2tldCA9IHNvY2tldDtcbiAgdGhpcy5jb250aW51YXRpb25GcmFtZSA9IGZhbHNlO1xuICB0aGlzLmlzQ2xvc2VkID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VuZGVyO1xuXG4vKipcbiAqIEluaGVyaXRzIGZyb20gRXZlbnRFbWl0dGVyLlxuICovXG5cbnV0aWwuaW5oZXJpdHMoU2VuZGVyLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBGcmFtZXMgYW5kIHdyaXRlcyBkYXRhLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2VuZGVyLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucywgY2IpIHtcbiAgaWYgKHRoaXMuaXNDbG9zZWQpIHJldHVybjtcblxuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJ1xuICAgICwgbGVuZ3RoID0gaXNTdHJpbmcgPyBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKSA6IGRhdGEubGVuZ3RoXG4gICAgLCBsZW5ndGhieXRlcyA9IChsZW5ndGggPiAxMjcpID8gMiA6IDEgLy8gYXNzdW1lIGxlc3MgdGhhbiAyKioxNCBieXRlc1xuICAgICwgd3JpdGVTdGFydE1hcmtlciA9IHRoaXMuY29udGludWF0aW9uRnJhbWUgPT0gZmFsc2VcbiAgICAsIHdyaXRlRW5kTWFya2VyID0gIW9wdGlvbnMgfHwgISh0eXBlb2Ygb3B0aW9ucy5maW4gIT0gJ3VuZGVmaW5lZCcgJiYgIW9wdGlvbnMuZmluKVxuICAgICwgYnVmZmVyID0gbmV3IEJ1ZmZlcigod3JpdGVTdGFydE1hcmtlciA/ICgob3B0aW9ucyAmJiBvcHRpb25zLmJpbmFyeSkgPyAoMSArIGxlbmd0aGJ5dGVzKSA6IDEpIDogMCkgKyBsZW5ndGggKyAoKHdyaXRlRW5kTWFya2VyICYmICEob3B0aW9ucyAmJiBvcHRpb25zLmJpbmFyeSkpID8gMSA6IDApKVxuICAgICwgb2Zmc2V0ID0gd3JpdGVTdGFydE1hcmtlciA/IDEgOiAwO1xuXG4gIGlmICh3cml0ZVN0YXJ0TWFya2VyKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5iaW5hcnkpIHtcbiAgICAgIGJ1ZmZlci53cml0ZSgnXFx4ODAnLCAnYmluYXJ5Jyk7XG4gICAgICAvLyBhc3N1bWUgbGVuZ3RoIGxlc3MgdGhhbiAyKioxNCBieXRlc1xuICAgICAgaWYgKGxlbmd0aGJ5dGVzID4gMSlcbiAgICAgICAgYnVmZmVyLndyaXRlKFN0cmluZy5mcm9tQ2hhckNvZGUoMTI4K2xlbmd0aC8xMjgpLCBvZmZzZXQrKywgJ2JpbmFyeScpO1xuICAgICAgYnVmZmVyLndyaXRlKFN0cmluZy5mcm9tQ2hhckNvZGUobGVuZ3RoJjB4N2YpLCBvZmZzZXQrKywgJ2JpbmFyeScpO1xuICAgIH0gZWxzZVxuICAgICAgYnVmZmVyLndyaXRlKCdcXHgwMCcsICdiaW5hcnknKTtcbiAgfVxuXG4gIGlmIChpc1N0cmluZykgYnVmZmVyLndyaXRlKGRhdGEsIG9mZnNldCwgJ3V0ZjgnKTtcbiAgZWxzZSBkYXRhLmNvcHkoYnVmZmVyLCBvZmZzZXQsIDApO1xuXG4gIGlmICh3cml0ZUVuZE1hcmtlcikge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYmluYXJ5KSB7XG4gICAgICAvLyBzZW5kaW5nIGJpbmFyeSwgbm90IHdyaXRpbmcgZW5kIG1hcmtlclxuICAgIH0gZWxzZVxuICAgICAgYnVmZmVyLndyaXRlKCdcXHhmZicsIG9mZnNldCArIGxlbmd0aCwgJ2JpbmFyeScpO1xuICAgIHRoaXMuY29udGludWF0aW9uRnJhbWUgPSBmYWxzZTtcbiAgfVxuICBlbHNlIHRoaXMuY29udGludWF0aW9uRnJhbWUgPSB0cnVlO1xuXG4gIHRyeSB7XG4gICAgdGhpcy5zb2NrZXQud3JpdGUoYnVmZmVyLCAnYmluYXJ5JywgY2IpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhpcy5lcnJvcihlLnRvU3RyaW5nKCkpO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgY2xvc2UgaW5zdHJ1Y3Rpb24gdG8gdGhlIHJlbW90ZSBwYXJ0eS5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblNlbmRlci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbihjb2RlLCBkYXRhLCBtYXNrLCBjYikge1xuICBpZiAodGhpcy5pc0Nsb3NlZCkgcmV0dXJuO1xuICB0aGlzLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBpZiAodGhpcy5jb250aW51YXRpb25GcmFtZSkgdGhpcy5zb2NrZXQud3JpdGUobmV3IEJ1ZmZlcihbMHhmZl0sICdiaW5hcnknKSk7XG4gICAgdGhpcy5zb2NrZXQud3JpdGUobmV3IEJ1ZmZlcihbMHhmZiwgMHgwMF0pLCAnYmluYXJ5JywgY2IpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhpcy5lcnJvcihlLnRvU3RyaW5nKCkpO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgcGluZyBtZXNzYWdlIHRvIHRoZSByZW1vdGUgcGFydHkuIE5vdCBhdmFpbGFibGUgZm9yIGhpeGllLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2VuZGVyLnByb3RvdHlwZS5waW5nID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge307XG5cbi8qKlxuICogU2VuZHMgYSBwb25nIG1lc3NhZ2UgdG8gdGhlIHJlbW90ZSBwYXJ0eS4gTm90IGF2YWlsYWJsZSBmb3IgaGl4aWUuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5TZW5kZXIucHJvdG90eXBlLnBvbmcgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7fTtcblxuLyoqXG4gKiBIYW5kbGVzIGFuIGVycm9yXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuU2VuZGVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIHJlYXNvbik7XG4gIHJldHVybiB0aGlzO1xufTtcbiIsIi8qIVxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKVxuICAsIHV0aWwgPSByZXF1aXJlKCd1dGlsJylcbiAgLCBFdmVudEVtaXR0ZXIgPSBldmVudHMuRXZlbnRFbWl0dGVyXG4gICwgRXJyb3JDb2RlcyA9IHJlcXVpcmUoJy4vRXJyb3JDb2RlcycpXG4gICwgYnVmZmVyVXRpbCA9IHJlcXVpcmUoJy4vQnVmZmVyVXRpbCcpLkJ1ZmZlclV0aWxcbiAgLCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vUGVyTWVzc2FnZURlZmxhdGUnKTtcblxuLyoqXG4gKiBIeUJpIFNlbmRlciBpbXBsZW1lbnRhdGlvblxuICovXG5cbmZ1bmN0aW9uIFNlbmRlcihzb2NrZXQsIGV4dGVuc2lvbnMpIHtcbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZW5kZXIgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzZXMgY2FuJ3QgYmUgZnVuY3Rpb24tY2FsbGVkXCIpO1xuICB9XG5cbiAgZXZlbnRzLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHRoaXMuX3NvY2tldCA9IHNvY2tldDtcbiAgdGhpcy5leHRlbnNpb25zID0gZXh0ZW5zaW9ucyB8fCB7fTtcbiAgdGhpcy5maXJzdEZyYWdtZW50ID0gdHJ1ZTtcbiAgdGhpcy5jb21wcmVzcyA9IGZhbHNlO1xuICB0aGlzLm1lc3NhZ2VIYW5kbGVycyA9IFtdO1xuICB0aGlzLnByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBJbmhlcml0cyBmcm9tIEV2ZW50RW1pdHRlci5cbiAqL1xuXG51dGlsLmluaGVyaXRzKFNlbmRlciwgZXZlbnRzLkV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogU2VuZHMgYSBjbG9zZSBpbnN0cnVjdGlvbiB0byB0aGUgcmVtb3RlIHBhcnR5LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuU2VuZGVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIGRhdGEsIG1hc2ssIGNiKSB7XG4gIGlmICh0eXBlb2YgY29kZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGNvZGUgIT09ICdudW1iZXInIHx8XG4gICAgICAhRXJyb3JDb2Rlcy5pc1ZhbGlkRXJyb3JDb2RlKGNvZGUpKSB0aHJvdyBuZXcgRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSB2YWxpZCBlcnJvciBjb2RlIG51bWJlcicpO1xuICB9XG4gIGNvZGUgPSBjb2RlIHx8IDEwMDA7XG4gIHZhciBkYXRhQnVmZmVyID0gbmV3IEJ1ZmZlcigyICsgKGRhdGEgPyBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKSA6IDApKTtcbiAgd3JpdGVVSW50MTZCRS5jYWxsKGRhdGFCdWZmZXIsIGNvZGUsIDApO1xuICBpZiAoZGF0YUJ1ZmZlci5sZW5ndGggPiAyKSBkYXRhQnVmZmVyLndyaXRlKGRhdGEsIDIpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHNlbGYuZnJhbWVBbmRTZW5kKDB4OCwgZGF0YUJ1ZmZlciwgdHJ1ZSwgbWFzayk7XG4gICAgY2FsbGJhY2soKTtcbiAgICBpZiAodHlwZW9mIGNiID09ICdmdW5jdGlvbicpIGNiKCk7XG4gIH0pO1xuICB0aGlzLmZsdXNoKCk7XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgcGluZyBtZXNzYWdlIHRvIHRoZSByZW1vdGUgcGFydHkuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5TZW5kZXIucHJvdG90eXBlLnBpbmcgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XG4gIHZhciBtYXNrID0gb3B0aW9ucyAmJiBvcHRpb25zLm1hc2s7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHNlbGYuZnJhbWVBbmRTZW5kKDB4OSwgZGF0YSB8fCAnJywgdHJ1ZSwgbWFzayk7XG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG4gIHRoaXMuZmx1c2goKTtcbn07XG5cbi8qKlxuICogU2VuZHMgYSBwb25nIG1lc3NhZ2UgdG8gdGhlIHJlbW90ZSBwYXJ0eS5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblNlbmRlci5wcm90b3R5cGUucG9uZyA9IGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMpIHtcbiAgdmFyIG1hc2sgPSBvcHRpb25zICYmIG9wdGlvbnMubWFzaztcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5wdXNoKGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgc2VsZi5mcmFtZUFuZFNlbmQoMHhhLCBkYXRhIHx8ICcnLCB0cnVlLCBtYXNrKTtcbiAgICBjYWxsYmFjaygpO1xuICB9KTtcbiAgdGhpcy5mbHVzaCgpO1xufTtcblxuLyoqXG4gKiBTZW5kcyB0ZXh0IG9yIGJpbmFyeSBkYXRhIHRvIHRoZSByZW1vdGUgcGFydHkuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5TZW5kZXIucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zLCBjYikge1xuICB2YXIgZmluYWxGcmFnbWVudCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5maW4gPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICB2YXIgbWFzayA9IG9wdGlvbnMgJiYgb3B0aW9ucy5tYXNrO1xuICB2YXIgY29tcHJlc3MgPSBvcHRpb25zICYmIG9wdGlvbnMuY29tcHJlc3M7XG4gIHZhciBvcGNvZGUgPSBvcHRpb25zICYmIG9wdGlvbnMuYmluYXJ5ID8gMiA6IDE7XG4gIGlmICh0aGlzLmZpcnN0RnJhZ21lbnQgPT09IGZhbHNlKSB7XG4gICAgb3Bjb2RlID0gMDtcbiAgICBjb21wcmVzcyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZmlyc3RGcmFnbWVudCA9IGZhbHNlO1xuICAgIHRoaXMuY29tcHJlc3MgPSBjb21wcmVzcztcbiAgfVxuICBpZiAoZmluYWxGcmFnbWVudCkgdGhpcy5maXJzdEZyYWdtZW50ID0gdHJ1ZVxuXG4gIHZhciBjb21wcmVzc0ZyYWdtZW50ID0gdGhpcy5jb21wcmVzcztcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMubWVzc2FnZUhhbmRsZXJzLnB1c2goZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBzZWxmLmFwcGx5RXh0ZW5zaW9ucyhkYXRhLCBmaW5hbEZyYWdtZW50LCBjb21wcmVzc0ZyYWdtZW50LCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PSAnZnVuY3Rpb24nKSBjYihlcnIpO1xuICAgICAgICBlbHNlIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWxmLmZyYW1lQW5kU2VuZChvcGNvZGUsIGRhdGEsIGZpbmFsRnJhZ21lbnQsIG1hc2ssIGNvbXByZXNzLCBjYik7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0pO1xuICB9KTtcbiAgdGhpcy5mbHVzaCgpO1xufTtcblxuLyoqXG4gKiBGcmFtZXMgYW5kIHNlbmRzIGEgcGllY2Ugb2YgZGF0YSBhY2NvcmRpbmcgdG8gdGhlIEh5QmkgV2ViU29ja2V0IHByb3RvY29sLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblNlbmRlci5wcm90b3R5cGUuZnJhbWVBbmRTZW5kID0gZnVuY3Rpb24ob3Bjb2RlLCBkYXRhLCBmaW5hbEZyYWdtZW50LCBtYXNrRGF0YSwgY29tcHJlc3NlZCwgY2IpIHtcbiAgdmFyIGNhbk1vZGlmeURhdGEgPSBmYWxzZTtcblxuICBpZiAoIWRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKG5ldyBCdWZmZXIoW29wY29kZSB8IChmaW5hbEZyYWdtZW50ID8gMHg4MCA6IDApLCAwIHwgKG1hc2tEYXRhID8gMHg4MCA6IDApXS5jb25jYXQobWFza0RhdGEgPyBbMCwgMCwgMCwgMF0gOiBbXSkpLCAnYmluYXJ5JywgY2IpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgaWYgKHR5cGVvZiBjYiA9PSAnZnVuY3Rpb24nKSBjYihlKTtcbiAgICAgIGVsc2UgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgIGNhbk1vZGlmeURhdGEgPSB0cnVlO1xuICAgIGlmIChkYXRhICYmICh0eXBlb2YgZGF0YS5ieXRlTGVuZ3RoICE9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgZGF0YS5idWZmZXIgIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgZGF0YSA9IGdldEFycmF5QnVmZmVyKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL1xuICAgICAgLy8gSWYgcGVvcGxlIHdhbnQgdG8gc2VuZCBhIG51bWJlciwgdGhpcyB3b3VsZCBhbGxvY2F0ZSB0aGUgbnVtYmVyIGluXG4gICAgICAvLyBieXRlcyBhcyBtZW1vcnkgc2l6ZSBpbnN0ZWFkIG9mIHN0b3JpbmcgdGhlIG51bWJlciBhcyBidWZmZXIgdmFsdWUuIFNvXG4gICAgICAvLyB3ZSBuZWVkIHRvIHRyYW5zZm9ybSBpdCB0byBzdHJpbmcgaW4gb3JkZXIgdG8gcHJldmVudCBwb3NzaWJsZVxuICAgICAgLy8gdnVsbmVyYWJpbGl0aWVzIC8gbWVtb3J5IGF0dGFja3MuXG4gICAgICAvL1xuICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykgZGF0YSA9IGRhdGEudG9TdHJpbmcoKTtcblxuICAgICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aFxuICAgICwgZGF0YU9mZnNldCA9IG1hc2tEYXRhID8gNiA6IDJcbiAgICAsIHNlY29uZEJ5dGUgPSBkYXRhTGVuZ3RoO1xuXG4gIGlmIChkYXRhTGVuZ3RoID49IDY1NTM2KSB7XG4gICAgZGF0YU9mZnNldCArPSA4O1xuICAgIHNlY29uZEJ5dGUgPSAxMjc7XG4gIH1cbiAgZWxzZSBpZiAoZGF0YUxlbmd0aCA+IDEyNSkge1xuICAgIGRhdGFPZmZzZXQgKz0gMjtcbiAgICBzZWNvbmRCeXRlID0gMTI2O1xuICB9XG5cbiAgdmFyIG1lcmdlQnVmZmVycyA9IGRhdGFMZW5ndGggPCAzMjc2OCB8fCAobWFza0RhdGEgJiYgIWNhbk1vZGlmeURhdGEpO1xuICB2YXIgdG90YWxMZW5ndGggPSBtZXJnZUJ1ZmZlcnMgPyBkYXRhTGVuZ3RoICsgZGF0YU9mZnNldCA6IGRhdGFPZmZzZXQ7XG4gIHZhciBvdXRwdXRCdWZmZXIgPSBuZXcgQnVmZmVyKHRvdGFsTGVuZ3RoKTtcbiAgb3V0cHV0QnVmZmVyWzBdID0gZmluYWxGcmFnbWVudCA/IG9wY29kZSB8IDB4ODAgOiBvcGNvZGU7XG4gIGlmIChjb21wcmVzc2VkKSBvdXRwdXRCdWZmZXJbMF0gfD0gMHg0MDtcblxuICBzd2l0Y2ggKHNlY29uZEJ5dGUpIHtcbiAgICBjYXNlIDEyNjpcbiAgICAgIHdyaXRlVUludDE2QkUuY2FsbChvdXRwdXRCdWZmZXIsIGRhdGFMZW5ndGgsIDIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjc6XG4gICAgICB3cml0ZVVJbnQzMkJFLmNhbGwob3V0cHV0QnVmZmVyLCAwLCAyKTtcbiAgICAgIHdyaXRlVUludDMyQkUuY2FsbChvdXRwdXRCdWZmZXIsIGRhdGFMZW5ndGgsIDYpO1xuICB9XG5cbiAgaWYgKG1hc2tEYXRhKSB7XG4gICAgb3V0cHV0QnVmZmVyWzFdID0gc2Vjb25kQnl0ZSB8IDB4ODA7XG4gICAgdmFyIG1hc2sgPSB0aGlzLl9yYW5kb21NYXNrIHx8ICh0aGlzLl9yYW5kb21NYXNrID0gZ2V0UmFuZG9tTWFzaygpKTtcbiAgICBvdXRwdXRCdWZmZXJbZGF0YU9mZnNldCAtIDRdID0gbWFza1swXTtcbiAgICBvdXRwdXRCdWZmZXJbZGF0YU9mZnNldCAtIDNdID0gbWFza1sxXTtcbiAgICBvdXRwdXRCdWZmZXJbZGF0YU9mZnNldCAtIDJdID0gbWFza1syXTtcbiAgICBvdXRwdXRCdWZmZXJbZGF0YU9mZnNldCAtIDFdID0gbWFza1szXTtcbiAgICBpZiAobWVyZ2VCdWZmZXJzKSB7XG4gICAgICBidWZmZXJVdGlsLm1hc2soZGF0YSwgbWFzaywgb3V0cHV0QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhTGVuZ3RoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX3NvY2tldC53cml0ZShvdXRwdXRCdWZmZXIsICdiaW5hcnknLCBjYik7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGNiID09ICdmdW5jdGlvbicpIGNiKGUpO1xuICAgICAgICBlbHNlIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBidWZmZXJVdGlsLm1hc2soZGF0YSwgbWFzaywgZGF0YSwgMCwgZGF0YUxlbmd0aCk7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9zb2NrZXQud3JpdGUob3V0cHV0QnVmZmVyLCAnYmluYXJ5Jyk7XG4gICAgICAgIHRoaXMuX3NvY2tldC53cml0ZShkYXRhLCAnYmluYXJ5JywgY2IpO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PSAnZnVuY3Rpb24nKSBjYihlKTtcbiAgICAgICAgZWxzZSB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIG91dHB1dEJ1ZmZlclsxXSA9IHNlY29uZEJ5dGU7XG4gICAgaWYgKG1lcmdlQnVmZmVycykge1xuICAgICAgZGF0YS5jb3B5KG91dHB1dEJ1ZmZlciwgZGF0YU9mZnNldCk7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9zb2NrZXQud3JpdGUob3V0cHV0QnVmZmVyLCAnYmluYXJ5JywgY2IpO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PSAnZnVuY3Rpb24nKSBjYihlKTtcbiAgICAgICAgZWxzZSB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5fc29ja2V0LndyaXRlKG91dHB1dEJ1ZmZlciwgJ2JpbmFyeScpO1xuICAgICAgICB0aGlzLl9zb2NrZXQud3JpdGUoZGF0YSwgJ2JpbmFyeScsIGNiKTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2IgPT0gJ2Z1bmN0aW9uJykgY2IoZSk7XG4gICAgICAgIGVsc2UgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlIG1lc3NhZ2UgaGFuZGxlciBidWZmZXJzXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuU2VuZGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5wcm9jZXNzaW5nKSByZXR1cm47XG5cbiAgdmFyIGhhbmRsZXIgPSB0aGlzLm1lc3NhZ2VIYW5kbGVycy5zaGlmdCgpO1xuICBpZiAoIWhhbmRsZXIpIHJldHVybjtcblxuICB0aGlzLnByb2Nlc3NpbmcgPSB0cnVlO1xuXG4gIHZhciBzZWxmID0gdGhpcztcblxuICBoYW5kbGVyKGZ1bmN0aW9uKCkge1xuICAgIHNlbGYucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIHNlbGYuZmx1c2goKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEFwcGx5IGV4dGVuc2lvbnMgdG8gbWVzc2FnZVxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblNlbmRlci5wcm90b3R5cGUuYXBwbHlFeHRlbnNpb25zID0gZnVuY3Rpb24oZGF0YSwgZmluLCBjb21wcmVzcywgY2FsbGJhY2spIHtcbiAgaWYgKGNvbXByZXNzICYmIGRhdGEpIHtcbiAgICBpZiAoKGRhdGEuYnVmZmVyIHx8IGRhdGEpIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIGRhdGEgPSBnZXRBcnJheUJ1ZmZlcihkYXRhKTtcbiAgICB9XG4gICAgdGhpcy5leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLmNvbXByZXNzKGRhdGEsIGZpbiwgY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbmRlcjtcblxuZnVuY3Rpb24gd3JpdGVVSW50MTZCRSh2YWx1ZSwgb2Zmc2V0KSB7XG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYwMCk+Pjg7XG4gIHRoaXNbb2Zmc2V0KzFdID0gdmFsdWUgJiAweGZmO1xufVxuXG5mdW5jdGlvbiB3cml0ZVVJbnQzMkJFKHZhbHVlLCBvZmZzZXQpIHtcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZjAwMDAwMCk+PjI0O1xuICB0aGlzW29mZnNldCsxXSA9ICh2YWx1ZSAmIDB4ZmYwMDAwKT4+MTY7XG4gIHRoaXNbb2Zmc2V0KzJdID0gKHZhbHVlICYgMHhmZjAwKT4+ODtcbiAgdGhpc1tvZmZzZXQrM10gPSB2YWx1ZSAmIDB4ZmY7XG59XG5cbmZ1bmN0aW9uIGdldEFycmF5QnVmZmVyKGRhdGEpIHtcbiAgLy8gZGF0YSBpcyBlaXRoZXIgYW4gQXJyYXlCdWZmZXIgb3IgQXJyYXlCdWZmZXJWaWV3LlxuICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlciB8fCBkYXRhKVxuICAgICwgbCA9IGRhdGEuYnl0ZUxlbmd0aCB8fCBkYXRhLmxlbmd0aFxuICAgICwgbyA9IGRhdGEuYnl0ZU9mZnNldCB8fCAwXG4gICAgLCBidWZmZXIgPSBuZXcgQnVmZmVyKGwpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSkge1xuICAgIGJ1ZmZlcltpXSA9IGFycmF5W28raV07XG4gIH1cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tTWFzaygpIHtcbiAgcmV0dXJuIG5ldyBCdWZmZXIoW1xuICAgIH5+KE1hdGgucmFuZG9tKCkgKiAyNTUpLFxuICAgIH5+KE1hdGgucmFuZG9tKCkgKiAyNTUpLFxuICAgIH5+KE1hdGgucmFuZG9tKCkgKiAyNTUpLFxuICAgIH5+KE1hdGgucmFuZG9tKCkgKiAyNTUpXG4gIF0pO1xufVxuIiwiLyohXG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cbiBcbm1vZHVsZS5leHBvcnRzLlZhbGlkYXRpb24gPSB7XG4gIGlzVmFsaWRVVEY4OiBmdW5jdGlvbihidWZmZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiFcbiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudFxuICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG50cnkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3V0Zi04LXZhbGlkYXRlJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9WYWxpZGF0aW9uLmZhbGxiYWNrJyk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qIVxuICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50XG4gKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT5cbiAqIE1JVCBMaWNlbnNlZFxuICovXG5cbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKVxuICAsIHV0aWwgPSByZXF1aXJlKCd1dGlsJylcbiAgLCBodHRwID0gcmVxdWlyZSgnaHR0cCcpXG4gICwgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpXG4gICwgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbiAgLCBzdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKVxuICAsIFVsdHJvbiA9IHJlcXVpcmUoJ3VsdHJvbicpXG4gICwgT3B0aW9ucyA9IHJlcXVpcmUoJ29wdGlvbnMnKVxuICAsIFNlbmRlciA9IHJlcXVpcmUoJy4vU2VuZGVyJylcbiAgLCBSZWNlaXZlciA9IHJlcXVpcmUoJy4vUmVjZWl2ZXInKVxuICAsIFNlbmRlckhpeGllID0gcmVxdWlyZSgnLi9TZW5kZXIuaGl4aWUnKVxuICAsIFJlY2VpdmVySGl4aWUgPSByZXF1aXJlKCcuL1JlY2VpdmVyLmhpeGllJylcbiAgLCBFeHRlbnNpb25zID0gcmVxdWlyZSgnLi9FeHRlbnNpb25zJylcbiAgLCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vUGVyTWVzc2FnZURlZmxhdGUnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxuLyoqXG4gKiBDb25zdGFudHNcbiAqL1xuXG4vLyBEZWZhdWx0IHByb3RvY29sIHZlcnNpb25cblxudmFyIHByb3RvY29sVmVyc2lvbiA9IDEzO1xuXG4vLyBDbG9zZSB0aW1lb3V0XG5cbnZhciBjbG9zZVRpbWVvdXQgPSAzMCAqIDEwMDA7IC8vIEFsbG93IDMwIHNlY29uZHMgdG8gdGVybWluYXRlIHRoZSBjb25uZWN0aW9uIGNsZWFubHlcblxuLyoqXG4gKiBXZWJTb2NrZXQgaW1wbGVtZW50YXRpb25cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBhZGRyZXNzIENvbm5lY3Rpb24gYWRkcmVzcy5cbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBwcm90b2NvbHMgV2ViU29ja2V0IHByb3RvY29scy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEFkZGl0aW9uYWwgY29ubmVjdGlvbiBvcHRpb25zLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gV2ViU29ja2V0KGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucykge1xuICBpZiAodGhpcyBpbnN0YW5jZW9mIFdlYlNvY2tldCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gbmV3IFdlYlNvY2tldChhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgaWYgKHByb3RvY29scyAmJiAhQXJyYXkuaXNBcnJheShwcm90b2NvbHMpICYmICdvYmplY3QnID09PSB0eXBlb2YgcHJvdG9jb2xzKSB7XG4gICAgLy8gYWNjZXB0IHRoZSBcIm9wdGlvbnNcIiBPYmplY3QgYXMgdGhlIDJuZCBhcmd1bWVudFxuICAgIG9wdGlvbnMgPSBwcm90b2NvbHM7XG4gICAgcHJvdG9jb2xzID0gbnVsbDtcbiAgfVxuXG4gIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHByb3RvY29scykge1xuICAgIHByb3RvY29scyA9IFsgcHJvdG9jb2xzIF07XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkocHJvdG9jb2xzKSkge1xuICAgIHByb3RvY29scyA9IFtdO1xuICB9XG5cbiAgdGhpcy5fc29ja2V0ID0gbnVsbDtcbiAgdGhpcy5fdWx0cm9uID0gbnVsbDtcbiAgdGhpcy5fY2xvc2VSZWNlaXZlZCA9IGZhbHNlO1xuICB0aGlzLmJ5dGVzUmVjZWl2ZWQgPSAwO1xuICB0aGlzLnJlYWR5U3RhdGUgPSBudWxsO1xuICB0aGlzLnN1cHBvcnRzID0ge307XG4gIHRoaXMuZXh0ZW5zaW9ucyA9IHt9O1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGFkZHJlc3MpKSB7XG4gICAgaW5pdEFzU2VydmVyQ2xpZW50LmFwcGx5KHRoaXMsIGFkZHJlc3MuY29uY2F0KG9wdGlvbnMpKTtcbiAgfSBlbHNlIHtcbiAgICBpbml0QXNDbGllbnQuYXBwbHkodGhpcywgW2FkZHJlc3MsIHByb3RvY29scywgb3B0aW9uc10pO1xuICB9XG59XG5cbi8qKlxuICogSW5oZXJpdHMgZnJvbSBFdmVudEVtaXR0ZXIuXG4gKi9cbnV0aWwuaW5oZXJpdHMoV2ViU29ja2V0LCBFdmVudEVtaXR0ZXIpO1xuXG4vKipcbiAqIFJlYWR5IFN0YXRlc1xuICovXG5bXCJDT05ORUNUSU5HXCIsIFwiT1BFTlwiLCBcIkNMT1NJTkdcIiwgXCJDTE9TRURcIl0uZm9yRWFjaChmdW5jdGlvbiBlYWNoKHN0YXRlLCBpbmRleCkge1xuICAgIFdlYlNvY2tldC5wcm90b3R5cGVbc3RhdGVdID0gV2ViU29ja2V0W3N0YXRlXSA9IGluZGV4O1xufSk7XG5cbi8qKlxuICogR3JhY2VmdWxseSBjbG9zZXMgdGhlIGNvbm5lY3Rpb24sIGFmdGVyIHNlbmRpbmcgYSBkZXNjcmlwdGlvbiBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiBjbG9zZShjb2RlLCBkYXRhKSB7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRUQpIHJldHVybjtcblxuICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TRUQ7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NJTkcpIHtcbiAgICBpZiAodGhpcy5fY2xvc2VSZWNlaXZlZCAmJiB0aGlzLl9pc1NlcnZlcikge1xuICAgICAgdGhpcy50ZXJtaW5hdGUoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0cnkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuICAgIHRoaXMuX2Nsb3NlQ29kZSA9IGNvZGU7XG4gICAgdGhpcy5fY2xvc2VNZXNzYWdlID0gZGF0YTtcbiAgICB2YXIgbWFzayA9ICF0aGlzLl9pc1NlcnZlcjtcbiAgICB0aGlzLl9zZW5kZXIuY2xvc2UoY29kZSwgZGF0YSwgbWFzaywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoZXJyKSBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKTtcblxuICAgICAgaWYgKHNlbGYuX2Nsb3NlUmVjZWl2ZWQgJiYgc2VsZi5faXNTZXJ2ZXIpIHtcbiAgICAgICAgc2VsZi50ZXJtaW5hdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIGNsZWFuZWQgdXAgZXZlbiB3aGVuIG5vIHJlc3BvbnNlIG9mIGNsb3NpbmcgaGFuZHNoYWtlLlxuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fY2xvc2VUaW1lcik7XG4gICAgICAgIHNlbGYuX2Nsb3NlVGltZXIgPSBzZXRUaW1lb3V0KGNsZWFudXBXZWJzb2NrZXRSZXNvdXJjZXMuYmluZChzZWxmLCB0cnVlKSwgY2xvc2VUaW1lb3V0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQYXVzZSB0aGUgY2xpZW50IHN0cmVhbVxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiBwYXVzZXIoKSB7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB0aHJvdyBuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKTtcblxuICByZXR1cm4gdGhpcy5fc29ja2V0LnBhdXNlKCk7XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgcGluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICogQHBhcmFtIHtPYmplY3R9IE1lbWJlcnMgLSBtYXNrOiBib29sZWFuLCBiaW5hcnk6IGJvb2xlYW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9udEZhaWxXaGVuQ2xvc2VkIGluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBpZiB0aGUgY29ubmVjdGlvbiBpc250IG9wZW5cbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUucGluZyA9IGZ1bmN0aW9uIHBpbmcoZGF0YSwgb3B0aW9ucywgZG9udEZhaWxXaGVuQ2xvc2VkKSB7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgaWYgKGRvbnRGYWlsV2hlbkNsb3NlZCA9PT0gdHJ1ZSkgcmV0dXJuO1xuICAgIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCcpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLm1hc2sgPT09ICd1bmRlZmluZWQnKSBvcHRpb25zLm1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG5cbiAgdGhpcy5fc2VuZGVyLnBpbmcoZGF0YSwgb3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgcG9uZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICogQHBhcmFtIHtPYmplY3R9IE1lbWJlcnMgLSBtYXNrOiBib29sZWFuLCBiaW5hcnk6IGJvb2xlYW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9udEZhaWxXaGVuQ2xvc2VkIGluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBpZiB0aGUgY29ubmVjdGlvbiBpc250IG9wZW5cbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUucG9uZyA9IGZ1bmN0aW9uKGRhdGEsIG9wdGlvbnMsIGRvbnRGYWlsV2hlbkNsb3NlZCkge1xuICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgIGlmIChkb250RmFpbFdoZW5DbG9zZWQgPT09IHRydWUpIHJldHVybjtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXNrID09PSAndW5kZWZpbmVkJykgb3B0aW9ucy5tYXNrID0gIXRoaXMuX2lzU2VydmVyO1xuXG4gIHRoaXMuX3NlbmRlci5wb25nKGRhdGEsIG9wdGlvbnMpO1xufTtcblxuLyoqXG4gKiBSZXN1bWUgdGhlIGNsaWVudCBzdHJlYW1cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5XZWJTb2NrZXQucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uIHJlc3VtZSgpIHtcbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCcpO1xuXG4gIHJldHVybiB0aGlzLl9zb2NrZXQucmVzdW1lKCk7XG59O1xuXG4vKipcbiAqIFNlbmRzIGEgcGllY2Ugb2YgZGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICogQHBhcmFtIHtPYmplY3R9IE1lbWJlcnMgLSBtYXNrOiBib29sZWFuLCBiaW5hcnk6IGJvb2xlYW4sIGNvbXByZXNzOiBib29sZWFuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBPcHRpb25hbCBjYWxsYmFjayB3aGljaCBpcyBleGVjdXRlZCBhZnRlciB0aGUgc2VuZCBjb21wbGV0ZXNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuV2ViU29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gc2VuZChkYXRhLCBvcHRpb25zLCBjYikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYihuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKSk7XG4gICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWRhdGEpIGRhdGEgPSAnJztcbiAgaWYgKHRoaXMuX3F1ZXVlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX3F1ZXVlLnB1c2goZnVuY3Rpb24oKSB7IHNlbGYuc2VuZChkYXRhLCBvcHRpb25zLCBjYik7IH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmZpbiA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmJpbmFyeSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvcHRpb25zLmJpbmFyeSA9IChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgZGF0YSBpbnN0YW5jZW9mIEJ1ZmZlciB8fFxuICAgICAgZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHxcbiAgICAgIGRhdGEgaW5zdGFuY2VvZiBVaW50MTZBcnJheSB8fFxuICAgICAgZGF0YSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5IHx8XG4gICAgICBkYXRhIGluc3RhbmNlb2YgSW50OEFycmF5IHx8XG4gICAgICBkYXRhIGluc3RhbmNlb2YgSW50MTZBcnJheSB8fFxuICAgICAgZGF0YSBpbnN0YW5jZW9mIEludDMyQXJyYXkgfHxcbiAgICAgIGRhdGEgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHxcbiAgICAgIGRhdGEgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLm1hc2sgPT09ICd1bmRlZmluZWQnKSBvcHRpb25zLm1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jb21wcmVzcyA9PT0gJ3VuZGVmaW5lZCcpIG9wdGlvbnMuY29tcHJlc3MgPSB0cnVlO1xuICBpZiAoIXRoaXMuZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgIG9wdGlvbnMuY29tcHJlc3MgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciByZWFkYWJsZSA9IHR5cGVvZiBzdHJlYW0uUmVhZGFibGUgPT09ICdmdW5jdGlvbidcbiAgICA/IHN0cmVhbS5SZWFkYWJsZVxuICAgIDogc3RyZWFtLlN0cmVhbTtcblxuICBpZiAoZGF0YSBpbnN0YW5jZW9mIHJlYWRhYmxlKSB7XG4gICAgc3RhcnRRdWV1ZSh0aGlzKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBzZW5kU3RyZWFtKHRoaXMsIGRhdGEsIG9wdGlvbnMsIGZ1bmN0aW9uIHNlbmQoZXJyb3IpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gdG9jaygpIHtcbiAgICAgICAgZXhlY3V0ZVF1ZXVlU2VuZHMoc2VsZik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgY2IoZXJyb3IpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX3NlbmRlci5zZW5kKGRhdGEsIG9wdGlvbnMsIGNiKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTdHJlYW1zIGRhdGEgdGhyb3VnaCBjYWxscyB0byBhIHVzZXIgc3VwcGxpZWQgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gTWVtYmVycyAtIG1hc2s6IGJvb2xlYW4sIGJpbmFyeTogYm9vbGVhbiwgY29tcHJlc3M6IGJvb2xlYW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259ICdmdW5jdGlvbiAoZXJyb3IsIHNlbmQpJyB3aGljaCBpcyBleGVjdXRlZCBvbiBzdWNjZXNzaXZlIHRpY2tzIG9mIHdoaWNoIHNlbmQgaXMgJ2Z1bmN0aW9uIChkYXRhLCBmaW5hbCknLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuV2ViU29ja2V0LnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbiBzdHJlYW0ob3B0aW9ucywgY2IpIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpcztcblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgcHJvdmlkZWQnKTtcblxuICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIGNiKG5ldyBFcnJvcignbm90IG9wZW5lZCcpKTtcbiAgICBlbHNlIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLl9xdWV1ZSkge1xuICAgIHRoaXMuX3F1ZXVlLnB1c2goZnVuY3Rpb24gKCkgeyBzZWxmLnN0cmVhbShvcHRpb25zLCBjYik7IH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXNrID09PSAndW5kZWZpbmVkJykgb3B0aW9ucy5tYXNrID0gIXRoaXMuX2lzU2VydmVyO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuY29tcHJlc3MgPT09ICd1bmRlZmluZWQnKSBvcHRpb25zLmNvbXByZXNzID0gdHJ1ZTtcbiAgaWYgKCF0aGlzLmV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICBvcHRpb25zLmNvbXByZXNzID0gZmFsc2U7XG4gIH1cblxuICBzdGFydFF1ZXVlKHRoaXMpO1xuXG4gIGZ1bmN0aW9uIHNlbmQoZGF0YSwgZmluYWwpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHNlbGYucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCcpO1xuICAgICAgb3B0aW9ucy5maW4gPSBmaW5hbCA9PT0gdHJ1ZTtcbiAgICAgIHNlbGYuX3NlbmRlci5zZW5kKGRhdGEsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFmaW5hbCkgcHJvY2Vzcy5uZXh0VGljayhjYi5iaW5kKG51bGwsIG51bGwsIHNlbmQpKTtcbiAgICAgIGVsc2UgZXhlY3V0ZVF1ZXVlU2VuZHMoc2VsZik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgY2IoZSk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHNlbGYuX3F1ZXVlO1xuICAgICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzcy5uZXh0VGljayhjYi5iaW5kKG51bGwsIG51bGwsIHNlbmQpKTtcbn07XG5cbi8qKlxuICogSW1tZWRpYXRlbHkgc2h1dHMgZG93biB0aGUgY29ubmVjdGlvblxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gdGVybWluYXRlKCkge1xuICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47XG5cbiAgaWYgKHRoaXMuX3NvY2tldCkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gICAgLy8gRW5kIHRoZSBjb25uZWN0aW9uXG4gICAgdHJ5IHsgdGhpcy5fc29ja2V0LmVuZCgpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFNvY2tldCBlcnJvciBkdXJpbmcgZW5kKCkgY2FsbCwgc28ganVzdCBkZXN0cm95IGl0IHJpZ2h0IG5vd1xuICAgICAgY2xlYW51cFdlYnNvY2tldFJlc291cmNlcy5jYWxsKHRoaXMsIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFkZCBhIHRpbWVvdXQgdG8gZW5zdXJlIHRoYXQgdGhlIGNvbm5lY3Rpb24gaXMgY29tcGxldGVseVxuICAgIC8vIGNsZWFuZWQgdXAgd2l0aGluIDMwIHNlY29uZHMsIGV2ZW4gaWYgdGhlIGNsZWFuIGNsb3NlIHByb2NlZHVyZVxuICAgIC8vIGZhaWxzIGZvciB3aGF0ZXZlciByZWFzb25cbiAgICAvLyBGaXJzdCBjbGVhbnVwIGFueSBwcmUtZXhpc3RpbmcgdGltZW91dCBmcm9tIGFuIGVhcmxpZXIgXCJ0ZXJtaW5hdGVcIiBjYWxsLFxuICAgIC8vIGlmIG9uZSBleGlzdHMuICBPdGhlcndpc2UgdGVybWluYXRlIGNhbGxzIGluIHF1aWNrIHN1Y2Nlc3Npb24gd2lsbCBsZWFrIHRpbWVvdXRzXG4gICAgLy8gYW5kIGhvbGQgdGhlIHByb2dyYW0gb3BlbiBmb3IgYGNsb3NlVGltb3V0YCB0aW1lLlxuICAgIGlmICh0aGlzLl9jbG9zZVRpbWVyKSB7IGNsZWFyVGltZW91dCh0aGlzLl9jbG9zZVRpbWVyKTsgfVxuICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBzZXRUaW1lb3V0KGNsZWFudXBXZWJzb2NrZXRSZXNvdXJjZXMuYmluZCh0aGlzLCB0cnVlKSwgY2xvc2VUaW1lb3V0KTtcbiAgfSBlbHNlIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7XG4gICAgY2xlYW51cFdlYnNvY2tldFJlc291cmNlcy5jYWxsKHRoaXMsIHRydWUpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4cG9zZSBidWZmZXJlZEFtb3VudFxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnYnVmZmVyZWRBbW91bnQnLCB7XG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHZhciBhbW91bnQgPSAwO1xuICAgIGlmICh0aGlzLl9zb2NrZXQpIHtcbiAgICAgIGFtb3VudCA9IHRoaXMuX3NvY2tldC5idWZmZXJTaXplIHx8IDA7XG4gICAgfVxuICAgIHJldHVybiBhbW91bnQ7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEVtdWxhdGVzIHRoZSBXM0MgQnJvd3NlciBiYXNlZCBXZWJTb2NrZXQgaW50ZXJmYWNlIHVzaW5nIGZ1bmN0aW9uIG1lbWJlcnMuXG4gKlxuICogQHNlZSBodHRwOi8vZGV2LnczLm9yZy9odG1sNS93ZWJzb2NrZXRzLyN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuICogQGFwaSBwdWJsaWNcbiAqL1xuWydvcGVuJywgJ2Vycm9yJywgJ2Nsb3NlJywgJ21lc3NhZ2UnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgJ29uJyArIG1ldGhvZCwge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbGlzdGVuZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtNaXhlZH0gdGhlIHNldCBmdW5jdGlvbiBvciB1bmRlZmluZWRcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIGxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnMobWV0aG9kKVswXTtcbiAgICAgIHJldHVybiBsaXN0ZW5lciA/IChsaXN0ZW5lci5fbGlzdGVuZXIgPyBsaXN0ZW5lci5fbGlzdGVuZXIgOiBsaXN0ZW5lcikgOiB1bmRlZmluZWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciB0aGUgbGlzdGVuZXJcbiAgICAgKiBAcmV0dXJucyB7TWl4ZWR9IHRoZSBzZXQgZnVuY3Rpb24gb3IgdW5kZWZpbmVkXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChsaXN0ZW5lcikge1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMobWV0aG9kKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihtZXRob2QsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8qKlxuICogRW11bGF0ZXMgdGhlIFczQyBCcm93c2VyIGJhc2VkIFdlYlNvY2tldCBpbnRlcmZhY2UgdXNpbmcgYWRkRXZlbnRMaXN0ZW5lci5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXJcbiAqIEBzZWUgaHR0cDovL2Rldi53My5vcmcvaHRtbDUvd2Vic29ja2V0cy8jdGhlLXdlYnNvY2tldC1pbnRlcmZhY2VcbiAqIEBhcGkgcHVibGljXG4gKi9cbldlYlNvY2tldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG1ldGhvZCwgbGlzdGVuZXIpIHtcbiAgdmFyIHRhcmdldCA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gb25NZXNzYWdlIChkYXRhLCBmbGFncykge1xuICAgIGxpc3RlbmVyLmNhbGwodGFyZ2V0LCBuZXcgTWVzc2FnZUV2ZW50KGRhdGEsICEhZmxhZ3MuYmluYXJ5LCB0YXJnZXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2xvc2UgKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRhcmdldCwgbmV3IENsb3NlRXZlbnQoY29kZSwgbWVzc2FnZSwgdGFyZ2V0KSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkVycm9yIChldmVudCkge1xuICAgIGV2ZW50LnR5cGUgPSAnZXJyb3InO1xuICAgIGV2ZW50LnRhcmdldCA9IHRhcmdldDtcbiAgICBsaXN0ZW5lci5jYWxsKHRhcmdldCwgZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25PcGVuICgpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRhcmdldCwgbmV3IE9wZW5FdmVudCh0YXJnZXQpKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAobWV0aG9kID09PSAnbWVzc2FnZScpIHtcbiAgICAgIC8vIHN0b3JlIGEgcmVmZXJlbmNlIHNvIHdlIGNhbiByZXR1cm4gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGZyb20gdGhlXG4gICAgICAvLyBhZGRFdmVudExpc3RlbmVyIGhvb2tcbiAgICAgIG9uTWVzc2FnZS5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgIHRoaXMub24obWV0aG9kLCBvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnY2xvc2UnKSB7XG4gICAgICAvLyBzdG9yZSBhIHJlZmVyZW5jZSBzbyB3ZSBjYW4gcmV0dXJuIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBmcm9tIHRoZVxuICAgICAgLy8gYWRkRXZlbnRMaXN0ZW5lciBob29rXG4gICAgICBvbkNsb3NlLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgdGhpcy5vbihtZXRob2QsIG9uQ2xvc2UpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnZXJyb3InKSB7XG4gICAgICAvLyBzdG9yZSBhIHJlZmVyZW5jZSBzbyB3ZSBjYW4gcmV0dXJuIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBmcm9tIHRoZVxuICAgICAgLy8gYWRkRXZlbnRMaXN0ZW5lciBob29rXG4gICAgICBvbkVycm9yLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgdGhpcy5vbihtZXRob2QsIG9uRXJyb3IpO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnb3BlbicpIHtcbiAgICAgIC8vIHN0b3JlIGEgcmVmZXJlbmNlIHNvIHdlIGNhbiByZXR1cm4gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGZyb20gdGhlXG4gICAgICAvLyBhZGRFdmVudExpc3RlbmVyIGhvb2tcbiAgICAgIG9uT3Blbi5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgIHRoaXMub24obWV0aG9kLCBvbk9wZW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uKG1ldGhvZCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7XG5tb2R1bGUuZXhwb3J0cy5idWlsZEhvc3RIZWFkZXIgPSBidWlsZEhvc3RIZWFkZXJcblxuLyoqXG4gKiBXM0MgTWVzc2FnZUV2ZW50XG4gKlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9jb21tcy5odG1sXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBNZXNzYWdlRXZlbnQoZGF0YUFyZywgaXNCaW5hcnksIHRhcmdldCkge1xuICB0aGlzLnR5cGUgPSAnbWVzc2FnZSc7XG4gIHRoaXMuZGF0YSA9IGRhdGFBcmc7XG4gIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICB0aGlzLmJpbmFyeSA9IGlzQmluYXJ5OyAvLyBub24tc3RhbmRhcmQuXG59XG5cbi8qKlxuICogVzNDIENsb3NlRXZlbnRcbiAqXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2NvbW1zLmh0bWxcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIENsb3NlRXZlbnQoY29kZSwgcmVhc29uLCB0YXJnZXQpIHtcbiAgdGhpcy50eXBlID0gJ2Nsb3NlJztcbiAgdGhpcy53YXNDbGVhbiA9ICh0eXBlb2YgY29kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29kZSA9PT0gMTAwMCk7XG4gIHRoaXMuY29kZSA9IGNvZGU7XG4gIHRoaXMucmVhc29uID0gcmVhc29uO1xuICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbn1cblxuLyoqXG4gKiBXM0MgT3BlbkV2ZW50XG4gKlxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9jb21tcy5odG1sXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBPcGVuRXZlbnQodGFyZ2V0KSB7XG4gIHRoaXMudHlwZSA9ICdvcGVuJztcbiAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG59XG5cbi8vIEFwcGVuZCBwb3J0IG51bWJlciB0byBIb3N0IGhlYWRlciwgb25seSBpZiBzcGVjaWZpZWQgaW4gdGhlIHVybFxuLy8gYW5kIG5vbi1kZWZhdWx0XG5mdW5jdGlvbiBidWlsZEhvc3RIZWFkZXIoaXNTZWN1cmUsIGhvc3RuYW1lLCBwb3J0KSB7XG4gIHZhciBoZWFkZXJIb3N0ID0gaG9zdG5hbWU7XG4gIGlmIChob3N0bmFtZSkge1xuICAgIGlmICgoaXNTZWN1cmUgJiYgKHBvcnQgIT0gNDQzKSkgfHwgKCFpc1NlY3VyZSAmJiAocG9ydCAhPSA4MCkpKXtcbiAgICAgIGhlYWRlckhvc3QgPSBoZWFkZXJIb3N0ICsgJzonICsgcG9ydDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhlYWRlckhvc3Q7XG59XG5cbi8qKlxuICogRW50aXJlbHkgcHJpdmF0ZSBhcGlzLFxuICogd2hpY2ggbWF5IG9yIG1heSBub3QgYmUgYm91bmQgdG8gYSBzZXBjaWZpYyBXZWJTb2NrZXQgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGluaXRBc1NlcnZlckNsaWVudChyZXEsIHNvY2tldCwgdXBncmFkZUhlYWQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG5ldyBPcHRpb25zKHtcbiAgICBwcm90b2NvbFZlcnNpb246IHByb3RvY29sVmVyc2lvbixcbiAgICBwcm90b2NvbDogbnVsbCxcbiAgICBleHRlbnNpb25zOiB7fVxuICB9KS5tZXJnZShvcHRpb25zKTtcblxuICAvLyBleHBvc2Ugc3RhdGUgcHJvcGVydGllc1xuICB0aGlzLnByb3RvY29sID0gb3B0aW9ucy52YWx1ZS5wcm90b2NvbDtcbiAgdGhpcy5wcm90b2NvbFZlcnNpb24gPSBvcHRpb25zLnZhbHVlLnByb3RvY29sVmVyc2lvbjtcbiAgdGhpcy5leHRlbnNpb25zID0gb3B0aW9ucy52YWx1ZS5leHRlbnNpb25zO1xuICB0aGlzLnN1cHBvcnRzLmJpbmFyeSA9ICh0aGlzLnByb3RvY29sVmVyc2lvbiAhPT0gJ2hpeGllLTc2Jyk7XG4gIHRoaXMudXBncmFkZVJlcSA9IHJlcTtcbiAgdGhpcy5yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNPTk5FQ1RJTkc7XG4gIHRoaXMuX2lzU2VydmVyID0gdHJ1ZTtcblxuICAvLyBlc3RhYmxpc2ggY29ubmVjdGlvblxuICBpZiAob3B0aW9ucy52YWx1ZS5wcm90b2NvbFZlcnNpb24gPT09ICdoaXhpZS03NicpIHtcbiAgICBlc3RhYmxpc2hDb25uZWN0aW9uLmNhbGwodGhpcywgUmVjZWl2ZXJIaXhpZSwgU2VuZGVySGl4aWUsIHNvY2tldCwgdXBncmFkZUhlYWQpO1xuICB9IGVsc2Uge1xuICAgIGVzdGFibGlzaENvbm5lY3Rpb24uY2FsbCh0aGlzLCBSZWNlaXZlciwgU2VuZGVyLCBzb2NrZXQsIHVwZ3JhZGVIZWFkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0QXNDbGllbnQoYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBuZXcgT3B0aW9ucyh7XG4gICAgb3JpZ2luOiBudWxsLFxuICAgIHByb3RvY29sVmVyc2lvbjogcHJvdG9jb2xWZXJzaW9uLFxuICAgIGhvc3Q6IG51bGwsXG4gICAgaGVhZGVyczogbnVsbCxcbiAgICBwcm90b2NvbDogcHJvdG9jb2xzLmpvaW4oJywnKSxcbiAgICBhZ2VudDogbnVsbCxcblxuICAgIC8vIHNzbC1yZWxhdGVkIG9wdGlvbnNcbiAgICBwZng6IG51bGwsXG4gICAga2V5OiBudWxsLFxuICAgIHBhc3NwaHJhc2U6IG51bGwsXG4gICAgY2VydDogbnVsbCxcbiAgICBjYTogbnVsbCxcbiAgICBjaXBoZXJzOiBudWxsLFxuICAgIHJlamVjdFVuYXV0aG9yaXplZDogbnVsbCxcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZTogdHJ1ZSxcbiAgICBsb2NhbEFkZHJlc3M6IG51bGxcbiAgfSkubWVyZ2Uob3B0aW9ucyk7XG5cbiAgaWYgKG9wdGlvbnMudmFsdWUucHJvdG9jb2xWZXJzaW9uICE9PSA4ICYmIG9wdGlvbnMudmFsdWUucHJvdG9jb2xWZXJzaW9uICE9PSAxMykge1xuICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgcHJvdG9jb2wgdmVyc2lvbicpO1xuICB9XG5cbiAgLy8gdmVyaWZ5IFVSTCBhbmQgZXN0YWJsaXNoIGh0dHAgY2xhc3NcbiAgdmFyIHNlcnZlclVybCA9IHVybC5wYXJzZShhZGRyZXNzKTtcbiAgdmFyIGlzVW5peFNvY2tldCA9IHNlcnZlclVybC5wcm90b2NvbCA9PT0gJ3dzK3VuaXg6JztcbiAgaWYgKCFzZXJ2ZXJVcmwuaG9zdCAmJiAhaXNVbml4U29ja2V0KSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgdXJsJyk7XG4gIHZhciBpc1NlY3VyZSA9IHNlcnZlclVybC5wcm90b2NvbCA9PT0gJ3dzczonIHx8IHNlcnZlclVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG4gIHZhciBodHRwT2JqID0gaXNTZWN1cmUgPyBodHRwcyA6IGh0dHA7XG4gIHZhciBwb3J0ID0gc2VydmVyVXJsLnBvcnQgfHwgKGlzU2VjdXJlID8gNDQzIDogODApO1xuICB2YXIgYXV0aCA9IHNlcnZlclVybC5hdXRoO1xuXG4gIC8vIHByZXBhcmUgZXh0ZW5zaW9uc1xuICB2YXIgZXh0ZW5zaW9uc09mZmVyID0ge307XG4gIHZhciBwZXJNZXNzYWdlRGVmbGF0ZTtcbiAgaWYgKG9wdGlvbnMudmFsdWUucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZSA9IG5ldyBQZXJNZXNzYWdlRGVmbGF0ZSh0eXBlb2Ygb3B0aW9ucy52YWx1ZS5wZXJNZXNzYWdlRGVmbGF0ZSAhPT0gdHJ1ZSA/IG9wdGlvbnMudmFsdWUucGVyTWVzc2FnZURlZmxhdGUgOiB7fSwgZmFsc2UpO1xuICAgIGV4dGVuc2lvbnNPZmZlcltQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlLm9mZmVyKCk7XG4gIH1cblxuICAvLyBleHBvc2Ugc3RhdGUgcHJvcGVydGllc1xuICB0aGlzLl9pc1NlcnZlciA9IGZhbHNlO1xuICB0aGlzLnVybCA9IGFkZHJlc3M7XG4gIHRoaXMucHJvdG9jb2xWZXJzaW9uID0gb3B0aW9ucy52YWx1ZS5wcm90b2NvbFZlcnNpb247XG4gIHRoaXMuc3VwcG9ydHMuYmluYXJ5ID0gKHRoaXMucHJvdG9jb2xWZXJzaW9uICE9PSAnaGl4aWUtNzYnKTtcblxuICAvLyBiZWdpbiBoYW5kc2hha2VcbiAgdmFyIGtleSA9IG5ldyBCdWZmZXIob3B0aW9ucy52YWx1ZS5wcm90b2NvbFZlcnNpb24gKyAnLScgKyBEYXRlLm5vdygpKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIHZhciBzaGFzdW0gPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpO1xuICBzaGFzdW0udXBkYXRlKGtleSArICcyNThFQUZBNS1FOTE0LTQ3REEtOTVDQS1DNUFCMERDODVCMTEnKTtcbiAgdmFyIGV4cGVjdGVkU2VydmVyS2V5ID0gc2hhc3VtLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgdmFyIGFnZW50ID0gb3B0aW9ucy52YWx1ZS5hZ2VudDtcblxuICB2YXIgaGVhZGVySG9zdCA9IGJ1aWxkSG9zdEhlYWRlcihpc1NlY3VyZSwgc2VydmVyVXJsLmhvc3RuYW1lLCBwb3J0KVxuXG4gIHZhciByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICBwb3J0OiBwb3J0LFxuICAgIGhvc3Q6IHNlcnZlclVybC5ob3N0bmFtZSxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29ubmVjdGlvbic6ICdVcGdyYWRlJyxcbiAgICAgICdVcGdyYWRlJzogJ3dlYnNvY2tldCcsXG4gICAgICAnSG9zdCc6IGhlYWRlckhvc3QsXG4gICAgICAnU2VjLVdlYlNvY2tldC1WZXJzaW9uJzogb3B0aW9ucy52YWx1ZS5wcm90b2NvbFZlcnNpb24sXG4gICAgICAnU2VjLVdlYlNvY2tldC1LZXknOiBrZXlcbiAgICB9XG4gIH07XG5cbiAgLy8gSWYgd2UgaGF2ZSBiYXNpYyBhdXRoLlxuICBpZiAoYXV0aCkge1xuICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgbmV3IEJ1ZmZlcihhdXRoKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBpZiAob3B0aW9ucy52YWx1ZS5wcm90b2NvbCkge1xuICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtUHJvdG9jb2wnXSA9IG9wdGlvbnMudmFsdWUucHJvdG9jb2w7XG4gIH1cblxuICBpZiAob3B0aW9ucy52YWx1ZS5ob3N0KSB7XG4gICAgcmVxdWVzdE9wdGlvbnMuaGVhZGVycy5Ib3N0ID0gb3B0aW9ucy52YWx1ZS5ob3N0O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudmFsdWUuaGVhZGVycykge1xuICAgIGZvciAodmFyIGhlYWRlciBpbiBvcHRpb25zLnZhbHVlLmhlYWRlcnMpIHtcbiAgICAgICBpZiAob3B0aW9ucy52YWx1ZS5oZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlcikpIHtcbiAgICAgICAgcmVxdWVzdE9wdGlvbnMuaGVhZGVyc1toZWFkZXJdID0gb3B0aW9ucy52YWx1ZS5oZWFkZXJzW2hlYWRlcl07XG4gICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChPYmplY3Qua2V5cyhleHRlbnNpb25zT2ZmZXIpLmxlbmd0aCkge1xuICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyddID0gRXh0ZW5zaW9ucy5mb3JtYXQoZXh0ZW5zaW9uc09mZmVyKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3BmeCcpXG4gICB8fCBvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ2tleScpXG4gICB8fCBvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3Bhc3NwaHJhc2UnKVxuICAgfHwgb3B0aW9ucy5pc0RlZmluZWRBbmROb25OdWxsKCdjZXJ0JylcbiAgIHx8IG9wdGlvbnMuaXNEZWZpbmVkQW5kTm9uTnVsbCgnY2EnKVxuICAgfHwgb3B0aW9ucy5pc0RlZmluZWRBbmROb25OdWxsKCdjaXBoZXJzJylcbiAgIHx8IG9wdGlvbnMuaXNEZWZpbmVkQW5kTm9uTnVsbCgncmVqZWN0VW5hdXRob3JpemVkJykpIHtcblxuICAgIGlmIChvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3BmeCcpKSByZXF1ZXN0T3B0aW9ucy5wZnggPSBvcHRpb25zLnZhbHVlLnBmeDtcbiAgICBpZiAob3B0aW9ucy5pc0RlZmluZWRBbmROb25OdWxsKCdrZXknKSkgcmVxdWVzdE9wdGlvbnMua2V5ID0gb3B0aW9ucy52YWx1ZS5rZXk7XG4gICAgaWYgKG9wdGlvbnMuaXNEZWZpbmVkQW5kTm9uTnVsbCgncGFzc3BocmFzZScpKSByZXF1ZXN0T3B0aW9ucy5wYXNzcGhyYXNlID0gb3B0aW9ucy52YWx1ZS5wYXNzcGhyYXNlO1xuICAgIGlmIChvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ2NlcnQnKSkgcmVxdWVzdE9wdGlvbnMuY2VydCA9IG9wdGlvbnMudmFsdWUuY2VydDtcbiAgICBpZiAob3B0aW9ucy5pc0RlZmluZWRBbmROb25OdWxsKCdjYScpKSByZXF1ZXN0T3B0aW9ucy5jYSA9IG9wdGlvbnMudmFsdWUuY2E7XG4gICAgaWYgKG9wdGlvbnMuaXNEZWZpbmVkQW5kTm9uTnVsbCgnY2lwaGVycycpKSByZXF1ZXN0T3B0aW9ucy5jaXBoZXJzID0gb3B0aW9ucy52YWx1ZS5jaXBoZXJzO1xuICAgIGlmIChvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3JlamVjdFVuYXV0aG9yaXplZCcpKSByZXF1ZXN0T3B0aW9ucy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRpb25zLnZhbHVlLnJlamVjdFVuYXV0aG9yaXplZDtcblxuICAgIGlmICghYWdlbnQpIHtcbiAgICAgICAgLy8gZ2xvYmFsIGFnZW50IGlnbm9yZXMgY2xpZW50IHNpZGUgY2VydGlmaWNhdGVzXG4gICAgICAgIGFnZW50ID0gbmV3IGh0dHBPYmouQWdlbnQocmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RPcHRpb25zLnBhdGggPSBzZXJ2ZXJVcmwucGF0aCB8fCAnLyc7XG5cbiAgaWYgKGFnZW50KSB7XG4gICAgcmVxdWVzdE9wdGlvbnMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuXG4gIGlmIChpc1VuaXhTb2NrZXQpIHtcbiAgICByZXF1ZXN0T3B0aW9ucy5zb2NrZXRQYXRoID0gc2VydmVyVXJsLnBhdGhuYW1lO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudmFsdWUubG9jYWxBZGRyZXNzKSB7XG4gICAgcmVxdWVzdE9wdGlvbnMubG9jYWxBZGRyZXNzID0gb3B0aW9ucy52YWx1ZS5sb2NhbEFkZHJlc3M7XG4gIH1cblxuICBpZiAob3B0aW9ucy52YWx1ZS5vcmlnaW4pIHtcbiAgICBpZiAob3B0aW9ucy52YWx1ZS5wcm90b2NvbFZlcnNpb24gPCAxMykgcmVxdWVzdE9wdGlvbnMuaGVhZGVyc1snU2VjLVdlYlNvY2tldC1PcmlnaW4nXSA9IG9wdGlvbnMudmFsdWUub3JpZ2luO1xuICAgIGVsc2UgcmVxdWVzdE9wdGlvbnMuaGVhZGVycy5PcmlnaW4gPSBvcHRpb25zLnZhbHVlLm9yaWdpbjtcbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHJlcSA9IGh0dHBPYmoucmVxdWVzdChyZXF1ZXN0T3B0aW9ucyk7XG5cbiAgcmVxLm9uKCdlcnJvcicsIGZ1bmN0aW9uIG9uZXJyb3IoZXJyb3IpIHtcbiAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgIGNsZWFudXBXZWJzb2NrZXRSZXNvdXJjZXMuY2FsbChzZWxmLCBlcnJvcik7XG4gIH0pO1xuXG4gIHJlcS5vbmNlKCdyZXNwb25zZScsIGZ1bmN0aW9uIHJlc3BvbnNlKHJlcykge1xuICAgIHZhciBlcnJvcjtcblxuICAgIGlmICghc2VsZi5lbWl0KCd1bmV4cGVjdGVkLXJlc3BvbnNlJywgcmVxLCByZXMpKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcigndW5leHBlY3RlZCBzZXJ2ZXIgcmVzcG9uc2UgKCcgKyByZXMuc3RhdHVzQ29kZSArICcpJyk7XG4gICAgICByZXEuYWJvcnQoKTtcbiAgICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgfVxuXG4gICAgY2xlYW51cFdlYnNvY2tldFJlc291cmNlcy5jYWxsKHNlbGYsIGVycm9yKTtcbiAgfSk7XG5cbiAgcmVxLm9uY2UoJ3VwZ3JhZGUnLCBmdW5jdGlvbiB1cGdyYWRlKHJlcywgc29ja2V0LCB1cGdyYWRlSGVhZCkge1xuICAgIGlmIChzZWxmLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRUQpIHtcbiAgICAgIC8vIGNsaWVudCBjbG9zZWQgYmVmb3JlIHNlcnZlciBhY2NlcHRlZCBjb25uZWN0aW9uXG4gICAgICBzZWxmLmVtaXQoJ2Nsb3NlJyk7XG4gICAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgc29ja2V0LmVuZCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzZXJ2ZXJLZXkgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1hY2NlcHQnXTtcbiAgICBpZiAodHlwZW9mIHNlcnZlcktleSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VydmVyS2V5ICE9PSBleHBlY3RlZFNlcnZlcktleSkge1xuICAgICAgc2VsZi5lbWl0KCdlcnJvcicsICdpbnZhbGlkIHNlcnZlciBrZXknKTtcbiAgICAgIHNlbGYucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICBzb2NrZXQuZW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNlcnZlclByb3QgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuICAgIHZhciBwcm90TGlzdCA9IChvcHRpb25zLnZhbHVlLnByb3RvY29sIHx8IFwiXCIpLnNwbGl0KC8sICovKTtcbiAgICB2YXIgcHJvdEVycm9yID0gbnVsbDtcblxuICAgIGlmICghb3B0aW9ucy52YWx1ZS5wcm90b2NvbCAmJiBzZXJ2ZXJQcm90KSB7XG4gICAgICBwcm90RXJyb3IgPSAnc2VydmVyIHNlbnQgYSBzdWJwcm90b2NvbCBldmVuIHRob3VnaCBub25lIHJlcXVlc3RlZCc7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnZhbHVlLnByb3RvY29sICYmICFzZXJ2ZXJQcm90KSB7XG4gICAgICBwcm90RXJyb3IgPSAnc2VydmVyIHNlbnQgbm8gc3VicHJvdG9jb2wgZXZlbiB0aG91Z2ggcmVxdWVzdGVkJztcbiAgICB9IGVsc2UgaWYgKHNlcnZlclByb3QgJiYgcHJvdExpc3QuaW5kZXhPZihzZXJ2ZXJQcm90KSA9PT0gLTEpIHtcbiAgICAgIHByb3RFcnJvciA9ICdzZXJ2ZXIgcmVzcG9uZGVkIHdpdGggYW4gaW52YWxpZCBwcm90b2NvbCc7XG4gICAgfVxuXG4gICAgaWYgKHByb3RFcnJvcikge1xuICAgICAgc2VsZi5lbWl0KCdlcnJvcicsIHByb3RFcnJvcik7XG4gICAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgc29ja2V0LmVuZCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoc2VydmVyUHJvdCkge1xuICAgICAgc2VsZi5wcm90b2NvbCA9IHNlcnZlclByb3Q7XG4gICAgfVxuXG4gICAgdmFyIHNlcnZlckV4dGVuc2lvbnMgPSBFeHRlbnNpb25zLnBhcnNlKHJlcy5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXSk7XG4gICAgaWYgKHBlck1lc3NhZ2VEZWZsYXRlICYmIHNlcnZlckV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlLmFjY2VwdChzZXJ2ZXJFeHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgJ2ludmFsaWQgZXh0ZW5zaW9uIHBhcmFtZXRlcicpO1xuICAgICAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICBzb2NrZXQuZW5kKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlbGYuZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICAgIH1cblxuICAgIGVzdGFibGlzaENvbm5lY3Rpb24uY2FsbChzZWxmLCBSZWNlaXZlciwgU2VuZGVyLCBzb2NrZXQsIHVwZ3JhZGVIZWFkKTtcblxuICAgIC8vIHBlcmZvcm0gY2xlYW51cCBvbiBodHRwIHJlc291cmNlc1xuICAgIHJlcS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICByZXEgPSBudWxsO1xuICAgIGFnZW50ID0gbnVsbDtcbiAgfSk7XG5cbiAgcmVxLmVuZCgpO1xuICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ09OTkVDVElORztcbn1cblxuZnVuY3Rpb24gZXN0YWJsaXNoQ29ubmVjdGlvbihSZWNlaXZlckNsYXNzLCBTZW5kZXJDbGFzcywgc29ja2V0LCB1cGdyYWRlSGVhZCkge1xuICB2YXIgdWx0cm9uID0gdGhpcy5fdWx0cm9uID0gbmV3IFVsdHJvbihzb2NrZXQpXG4gICAgLCBjYWxsZWQgPSBmYWxzZVxuICAgICwgc2VsZiA9IHRoaXM7XG5cbiAgc29ja2V0LnNldFRpbWVvdXQoMCk7XG4gIHNvY2tldC5zZXROb0RlbGF5KHRydWUpO1xuXG4gIHRoaXMuX3JlY2VpdmVyID0gbmV3IFJlY2VpdmVyQ2xhc3ModGhpcy5leHRlbnNpb25zKTtcbiAgdGhpcy5fc29ja2V0ID0gc29ja2V0O1xuXG4gIC8vIHNvY2tldCBjbGVhbnVwIGhhbmRsZXJzXG4gIHVsdHJvbi5vbignZW5kJywgY2xlYW51cFdlYnNvY2tldFJlc291cmNlcy5iaW5kKHRoaXMpKTtcbiAgdWx0cm9uLm9uKCdjbG9zZScsIGNsZWFudXBXZWJzb2NrZXRSZXNvdXJjZXMuYmluZCh0aGlzKSk7XG4gIHVsdHJvbi5vbignZXJyb3InLCBjbGVhbnVwV2Vic29ja2V0UmVzb3VyY2VzLmJpbmQodGhpcykpO1xuXG4gIC8vIGVuc3VyZSB0aGF0IHRoZSB1cGdyYWRlSGVhZCBpcyBhZGRlZCB0byB0aGUgcmVjZWl2ZXJcbiAgZnVuY3Rpb24gZmlyc3RIYW5kbGVyKGRhdGEpIHtcbiAgICBpZiAoY2FsbGVkIHx8IHNlbGYucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuXG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBmaXJzdEhhbmRsZXIpO1xuICAgIHVsdHJvbi5vbignZGF0YScsIHJlYWxIYW5kbGVyKTtcblxuICAgIGlmICh1cGdyYWRlSGVhZCAmJiB1cGdyYWRlSGVhZC5sZW5ndGggPiAwKSB7XG4gICAgICByZWFsSGFuZGxlcih1cGdyYWRlSGVhZCk7XG4gICAgICB1cGdyYWRlSGVhZCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEpIHJlYWxIYW5kbGVyKGRhdGEpO1xuICB9XG5cbiAgLy8gc3Vic2VxdWVudCBwYWNrZXRzIGFyZSBwdXNoZWQgc3RyYWlnaHQgdG8gdGhlIHJlY2VpdmVyXG4gIGZ1bmN0aW9uIHJlYWxIYW5kbGVyKGRhdGEpIHtcbiAgICBzZWxmLmJ5dGVzUmVjZWl2ZWQgKz0gZGF0YS5sZW5ndGg7XG4gICAgc2VsZi5fcmVjZWl2ZXIuYWRkKGRhdGEpO1xuICB9XG5cbiAgdWx0cm9uLm9uKCdkYXRhJywgZmlyc3RIYW5kbGVyKTtcblxuICAvLyBpZiBkYXRhIHdhcyBwYXNzZWQgYWxvbmcgd2l0aCB0aGUgaHR0cCB1cGdyYWRlLFxuICAvLyB0aGlzIHdpbGwgc2NoZWR1bGUgYSBwdXNoIG9mIHRoYXQgb24gdG8gdGhlIHJlY2VpdmVyLlxuICAvLyB0aGlzIGhhcyB0byBiZSBkb25lIG9uIG5leHQgdGljaywgc2luY2UgdGhlIGNhbGxlclxuICAvLyBoYXNuJ3QgaGFkIGEgY2hhbmNlIHRvIHNldCBldmVudCBoYW5kbGVycyBvbiB0aGlzIGNsaWVudFxuICAvLyBvYmplY3QgeWV0LlxuICBwcm9jZXNzLm5leHRUaWNrKGZpcnN0SGFuZGxlcik7XG5cbiAgLy8gcmVjZWl2ZXIgZXZlbnQgaGFuZGxlcnNcbiAgc2VsZi5fcmVjZWl2ZXIub250ZXh0ID0gZnVuY3Rpb24gb250ZXh0KGRhdGEsIGZsYWdzKSB7XG4gICAgZmxhZ3MgPSBmbGFncyB8fCB7fTtcblxuICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIGRhdGEsIGZsYWdzKTtcbiAgfTtcblxuICBzZWxmLl9yZWNlaXZlci5vbmJpbmFyeSA9IGZ1bmN0aW9uIG9uYmluYXJ5KGRhdGEsIGZsYWdzKSB7XG4gICAgZmxhZ3MgPSBmbGFncyB8fCB7fTtcblxuICAgIGZsYWdzLmJpbmFyeSA9IHRydWU7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZGF0YSwgZmxhZ3MpO1xuICB9O1xuXG4gIHNlbGYuX3JlY2VpdmVyLm9ucGluZyA9IGZ1bmN0aW9uIG9ucGluZyhkYXRhLCBmbGFncykge1xuICAgIGZsYWdzID0gZmxhZ3MgfHwge307XG5cbiAgICBzZWxmLnBvbmcoZGF0YSwge1xuICAgICAgbWFzazogIXNlbGYuX2lzU2VydmVyLFxuICAgICAgYmluYXJ5OiBmbGFncy5iaW5hcnkgPT09IHRydWVcbiAgICB9LCB0cnVlKTtcblxuICAgIHNlbGYuZW1pdCgncGluZycsIGRhdGEsIGZsYWdzKTtcbiAgfTtcblxuICBzZWxmLl9yZWNlaXZlci5vbnBvbmcgPSBmdW5jdGlvbiBvbnBvbmcoZGF0YSwgZmxhZ3MpIHtcbiAgICBzZWxmLmVtaXQoJ3BvbmcnLCBkYXRhLCBmbGFncyB8fCB7fSk7XG4gIH07XG5cbiAgc2VsZi5fcmVjZWl2ZXIub25jbG9zZSA9IGZ1bmN0aW9uIG9uY2xvc2UoY29kZSwgZGF0YSwgZmxhZ3MpIHtcbiAgICBmbGFncyA9IGZsYWdzIHx8IHt9O1xuXG4gICAgc2VsZi5fY2xvc2VSZWNlaXZlZCA9IHRydWU7XG4gICAgc2VsZi5jbG9zZShjb2RlLCBkYXRhKTtcbiAgfTtcblxuICBzZWxmLl9yZWNlaXZlci5vbmVycm9yID0gZnVuY3Rpb24gb25lcnJvcihyZWFzb24sIGVycm9yQ29kZSkge1xuICAgIC8vIGNsb3NlIHRoZSBjb25uZWN0aW9uIHdoZW4gdGhlIHJlY2VpdmVyIHJlcG9ydHMgYSBIeUJpIGVycm9yIGNvZGVcbiAgICBzZWxmLmNsb3NlKHR5cGVvZiBlcnJvckNvZGUgIT09ICd1bmRlZmluZWQnID8gZXJyb3JDb2RlIDogMTAwMiwgJycpO1xuICAgIHNlbGYuZW1pdCgnZXJyb3InLCByZWFzb24sIGVycm9yQ29kZSk7XG4gIH07XG5cbiAgLy8gZmluYWxpemUgdGhlIGNsaWVudFxuICB0aGlzLl9zZW5kZXIgPSBuZXcgU2VuZGVyQ2xhc3Moc29ja2V0LCB0aGlzLmV4dGVuc2lvbnMpO1xuICB0aGlzLl9zZW5kZXIub24oJ2Vycm9yJywgZnVuY3Rpb24gb25lcnJvcihlcnJvcikge1xuICAgIHNlbGYuY2xvc2UoMTAwMiwgJycpO1xuICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gIH0pO1xuXG4gIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5PUEVOO1xuICB0aGlzLmVtaXQoJ29wZW4nKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRRdWV1ZShpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5fcXVldWUgPSBpbnN0YW5jZS5fcXVldWUgfHwgW107XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVRdWV1ZVNlbmRzKGluc3RhbmNlKSB7XG4gIHZhciBxdWV1ZSA9IGluc3RhbmNlLl9xdWV1ZTtcbiAgaWYgKHR5cGVvZiBxdWV1ZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICBkZWxldGUgaW5zdGFuY2UuX3F1ZXVlO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIHF1ZXVlW2ldKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VuZFN0cmVhbShpbnN0YW5jZSwgc3RyZWFtLCBvcHRpb25zLCBjYikge1xuICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiBpbmNvbWluZyhkYXRhKSB7XG4gICAgaWYgKGluc3RhbmNlLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYihuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKSk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGVsZXRlIGluc3RhbmNlLl9xdWV1ZTtcbiAgICAgICAgaW5zdGFuY2UuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3B0aW9ucy5maW4gPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5fc2VuZGVyLnNlbmQoZGF0YSwgb3B0aW9ucyk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24gZW5kKCkge1xuICAgIGlmIChpbnN0YW5jZS5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgY2IobmV3IEVycm9yKCdub3Qgb3BlbmVkJykpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGRlbGV0ZSBpbnN0YW5jZS5fcXVldWU7XG4gICAgICAgIGluc3RhbmNlLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdub3Qgb3BlbmVkJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9wdGlvbnMuZmluID0gdHJ1ZTtcbiAgICBpbnN0YW5jZS5fc2VuZGVyLnNlbmQobnVsbCwgb3B0aW9ucyk7XG5cbiAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYihudWxsKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFudXBXZWJzb2NrZXRSZXNvdXJjZXMoZXJyb3IpIHtcbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuXG4gIHZhciBlbWl0Q2xvc2UgPSB0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0VEO1xuXG4gIGNsZWFyVGltZW91dCh0aGlzLl9jbG9zZVRpbWVyKTtcbiAgdGhpcy5fY2xvc2VUaW1lciA9IG51bGw7XG5cbiAgaWYgKGVtaXRDbG9zZSkge1xuICAgIC8vIElmIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYWJub3JtYWxseSAod2l0aCBhbiBlcnJvciksIG9yIGlmXG4gICAgLy8gdGhlIGNsb3NlIGNvbnRyb2wgZnJhbWUgd2FzIG5vdCByZWNlaXZlZCB0aGVuIHRoZSBjbG9zZSBjb2RlXG4gICAgLy8gbXVzdCBkZWZhdWx0IHRvIDEwMDYuXG4gICAgaWYgKGVycm9yIHx8ICF0aGlzLl9jbG9zZVJlY2VpdmVkKSB7XG4gICAgICB0aGlzLl9jbG9zZUNvZGUgPSAxMDA2O1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlIHx8IDEwMDAsIHRoaXMuX2Nsb3NlTWVzc2FnZSB8fCAnJyk7XG4gIH1cblxuICBpZiAodGhpcy5fc29ja2V0KSB7XG4gICAgaWYgKHRoaXMuX3VsdHJvbikgdGhpcy5fdWx0cm9uLmRlc3Ryb3koKTtcbiAgICB0aGlzLl9zb2NrZXQub24oJ2Vycm9yJywgZnVuY3Rpb24gb25lcnJvcigpIHtcbiAgICAgIHRyeSB7IHRoaXMuZGVzdHJveSgpOyB9XG4gICAgICBjYXRjaCAoZSkge31cbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIWVycm9yKSB0aGlzLl9zb2NrZXQuZW5kKCk7XG4gICAgICBlbHNlIHRoaXMuX3NvY2tldC5kZXN0cm95KCk7XG4gICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgdGVybWluYXRpb24gZXJyb3JzICovIH1cblxuICAgIHRoaXMuX3NvY2tldCA9IG51bGw7XG4gICAgdGhpcy5fdWx0cm9uID0gbnVsbDtcbiAgfVxuXG4gIGlmICh0aGlzLl9zZW5kZXIpIHtcbiAgICB0aGlzLl9zZW5kZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc2VuZGVyID0gbnVsbDtcbiAgfVxuXG4gIGlmICh0aGlzLl9yZWNlaXZlcikge1xuICAgIHRoaXMuX3JlY2VpdmVyLmNsZWFudXAoKTtcbiAgICB0aGlzLl9yZWNlaXZlciA9IG51bGw7XG4gIH1cblxuICBpZiAodGhpcy5leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgdGhpcy5leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLmNsZWFudXAoKTtcbiAgfVxuXG4gIHRoaXMuZXh0ZW5zaW9ucyA9IG51bGw7XG5cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5vbignZXJyb3InLCBmdW5jdGlvbiBvbmVycm9yKCkge30pOyAvLyBjYXRjaCBhbGwgZXJyb3JzIGFmdGVyIHRoaXNcbiAgZGVsZXRlIHRoaXMuX3F1ZXVlO1xufVxuIiwiLyohXG4gKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnRcbiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPlxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJylcbiAgLCBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKVxuICAsIGh0dHAgPSByZXF1aXJlKCdodHRwJylcbiAgLCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKVxuICAsIE9wdGlvbnMgPSByZXF1aXJlKCdvcHRpb25zJylcbiAgLCBXZWJTb2NrZXQgPSByZXF1aXJlKCcuL1dlYlNvY2tldCcpXG4gICwgRXh0ZW5zaW9ucyA9IHJlcXVpcmUoJy4vRXh0ZW5zaW9ucycpXG4gICwgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL1Blck1lc3NhZ2VEZWZsYXRlJylcbiAgLCB0bHMgPSByZXF1aXJlKCd0bHMnKVxuICAsIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xuXG4vKipcbiAqIFdlYlNvY2tldCBTZXJ2ZXIgaW1wbGVtZW50YXRpb25cbiAqL1xuXG5mdW5jdGlvbiBXZWJTb2NrZXRTZXJ2ZXIob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHRoaXMgaW5zdGFuY2VvZiBXZWJTb2NrZXRTZXJ2ZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIG5ldyBXZWJTb2NrZXRTZXJ2ZXIob3B0aW9ucywgY2FsbGJhY2spO1xuICB9XG5cbiAgZXZlbnRzLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIG9wdGlvbnMgPSBuZXcgT3B0aW9ucyh7XG4gICAgaG9zdDogJzAuMC4wLjAnLFxuICAgIHBvcnQ6IG51bGwsXG4gICAgc2VydmVyOiBudWxsLFxuICAgIHZlcmlmeUNsaWVudDogbnVsbCxcbiAgICBoYW5kbGVQcm90b2NvbHM6IG51bGwsXG4gICAgcGF0aDogbnVsbCxcbiAgICBub1NlcnZlcjogZmFsc2UsXG4gICAgZGlzYWJsZUhpeGllOiBmYWxzZSxcbiAgICBjbGllbnRUcmFja2luZzogdHJ1ZSxcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZTogdHJ1ZVxuICB9KS5tZXJnZShvcHRpb25zKTtcblxuICBpZiAoIW9wdGlvbnMuaXNEZWZpbmVkQW5kTm9uTnVsbCgncG9ydCcpICYmICFvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3NlcnZlcicpICYmICFvcHRpb25zLnZhbHVlLm5vU2VydmVyKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYHBvcnRgIG9yIGEgYHNlcnZlcmAgbXVzdCBiZSBwcm92aWRlZCcpO1xuICB9XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIGlmIChvcHRpb25zLmlzRGVmaW5lZEFuZE5vbk51bGwoJ3BvcnQnKSkge1xuICAgIHRoaXMuX3NlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgdmFyIGJvZHkgPSBodHRwLlNUQVRVU19DT0RFU1s0MjZdO1xuICAgICAgcmVzLndyaXRlSGVhZCg0MjYsIHtcbiAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogYm9keS5sZW5ndGgsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbidcbiAgICAgIH0pO1xuICAgICAgcmVzLmVuZChib2R5KTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXJ2ZXIuYWxsb3dIYWxmT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuX3NlcnZlci5saXN0ZW4ob3B0aW9ucy52YWx1ZS5wb3J0LCBvcHRpb25zLnZhbHVlLmhvc3QsIGNhbGxiYWNrKTtcbiAgICB0aGlzLl9jbG9zZVNlcnZlciA9IGZ1bmN0aW9uKCkgeyBpZiAoc2VsZi5fc2VydmVyKSBzZWxmLl9zZXJ2ZXIuY2xvc2UoKTsgfTtcbiAgfVxuICBlbHNlIGlmIChvcHRpb25zLnZhbHVlLnNlcnZlcikge1xuICAgIHRoaXMuX3NlcnZlciA9IG9wdGlvbnMudmFsdWUuc2VydmVyO1xuICAgIGlmIChvcHRpb25zLnZhbHVlLnBhdGgpIHtcbiAgICAgIC8vIHRha2Ugbm90ZSBvZiB0aGUgcGF0aCwgdG8gYXZvaWQgY29sbGlzaW9ucyB3aGVuIG11bHRpcGxlIHdlYnNvY2tldCBzZXJ2ZXJzIGFyZVxuICAgICAgLy8gbGlzdGVuaW5nIG9uIHRoZSBzYW1lIGh0dHAgc2VydmVyXG4gICAgICBpZiAodGhpcy5fc2VydmVyLl93ZWJTb2NrZXRQYXRocyAmJiBvcHRpb25zLnZhbHVlLnNlcnZlci5fd2ViU29ja2V0UGF0aHNbb3B0aW9ucy52YWx1ZS5wYXRoXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3R3byBpbnN0YW5jZXMgb2YgV2ViU29ja2V0U2VydmVyIGNhbm5vdCBsaXN0ZW4gb24gdGhlIHNhbWUgaHR0cCBzZXJ2ZXIgcGF0aCcpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9zZXJ2ZXIuX3dlYlNvY2tldFBhdGhzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aGlzLl9zZXJ2ZXIuX3dlYlNvY2tldFBhdGhzID0ge307XG4gICAgICB9XG4gICAgICB0aGlzLl9zZXJ2ZXIuX3dlYlNvY2tldFBhdGhzW29wdGlvbnMudmFsdWUucGF0aF0gPSAxO1xuICAgIH1cbiAgfVxuICBpZiAodGhpcy5fc2VydmVyKSB0aGlzLl9zZXJ2ZXIub25jZSgnbGlzdGVuaW5nJywgZnVuY3Rpb24oKSB7IHNlbGYuZW1pdCgnbGlzdGVuaW5nJyk7IH0pO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5fc2VydmVyICE9ICd1bmRlZmluZWQnKSB7XG4gICAgdGhpcy5fc2VydmVyLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyb3IpXG4gICAgfSk7XG4gICAgdGhpcy5fc2VydmVyLm9uKCd1cGdyYWRlJywgZnVuY3Rpb24ocmVxLCBzb2NrZXQsIHVwZ3JhZGVIZWFkKSB7XG4gICAgICAvL2NvcHkgdXBncmFkZUhlYWQgdG8gYXZvaWQgcmV0ZW50aW9uIG9mIGxhcmdlIHNsYWIgYnVmZmVycyB1c2VkIGluIG5vZGUgY29yZVxuICAgICAgdmFyIGhlYWQgPSBuZXcgQnVmZmVyKHVwZ3JhZGVIZWFkLmxlbmd0aCk7XG4gICAgICB1cGdyYWRlSGVhZC5jb3B5KGhlYWQpO1xuXG4gICAgICBzZWxmLmhhbmRsZVVwZ3JhZGUocmVxLCBzb2NrZXQsIGhlYWQsIGZ1bmN0aW9uKGNsaWVudCkge1xuICAgICAgICBzZWxmLmVtaXQoJ2Nvbm5lY3Rpb24nK3JlcS51cmwsIGNsaWVudCk7XG4gICAgICAgIHNlbGYuZW1pdCgnY29ubmVjdGlvbicsIGNsaWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMudmFsdWU7XG4gIHRoaXMucGF0aCA9IG9wdGlvbnMudmFsdWUucGF0aDtcbiAgdGhpcy5jbGllbnRzID0gW107XG59XG5cbi8qKlxuICogSW5oZXJpdHMgZnJvbSBFdmVudEVtaXR0ZXIuXG4gKi9cblxudXRpbC5pbmhlcml0cyhXZWJTb2NrZXRTZXJ2ZXIsIGV2ZW50cy5FdmVudEVtaXR0ZXIpO1xuXG4vKipcbiAqIEltbWVkaWF0ZWx5IHNodXRzIGRvd24gdGhlIGNvbm5lY3Rpb24uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5XZWJTb2NrZXRTZXJ2ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgLy8gdGVybWluYXRlIGFsbCBhc3NvY2lhdGVkIGNsaWVudHNcbiAgdmFyIGVycm9yID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuY2xpZW50cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgIHRoaXMuY2xpZW50c1tpXS50ZXJtaW5hdGUoKTtcbiAgICB9XG4gIH1cbiAgY2F0Y2ggKGUpIHtcbiAgICBlcnJvciA9IGU7XG4gIH1cblxuICAvLyByZW1vdmUgcGF0aCBkZXNjcmlwdG9yLCBpZiBhbnlcbiAgaWYgKHRoaXMucGF0aCAmJiB0aGlzLl9zZXJ2ZXIuX3dlYlNvY2tldFBhdGhzKSB7XG4gICAgZGVsZXRlIHRoaXMuX3NlcnZlci5fd2ViU29ja2V0UGF0aHNbdGhpcy5wYXRoXTtcbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5fc2VydmVyLl93ZWJTb2NrZXRQYXRocykubGVuZ3RoID09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zZXJ2ZXIuX3dlYlNvY2tldFBhdGhzO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNsb3NlIHRoZSBodHRwIHNlcnZlciBpZiBpdCB3YXMgaW50ZXJuYWxseSBjcmVhdGVkXG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9jbG9zZVNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuX2Nsb3NlU2VydmVyKCk7XG4gICAgfVxuICB9XG4gIGZpbmFsbHkge1xuICAgIGRlbGV0ZSB0aGlzLl9zZXJ2ZXI7XG4gIH1cbiAgaWYoY2FsbGJhY2spXG4gICAgY2FsbGJhY2soZXJyb3IpO1xuICBlbHNlIGlmKGVycm9yKVxuICAgIHRocm93IGVycm9yO1xufVxuXG4vKipcbiAqIEhhbmRsZSBhIEhUVFAgVXBncmFkZSByZXF1ZXN0LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuV2ViU29ja2V0U2VydmVyLnByb3RvdHlwZS5oYW5kbGVVcGdyYWRlID0gZnVuY3Rpb24ocmVxLCBzb2NrZXQsIHVwZ3JhZGVIZWFkLCBjYikge1xuICAvLyBjaGVjayBmb3Igd3JvbmcgcGF0aFxuICBpZiAodGhpcy5vcHRpb25zLnBhdGgpIHtcbiAgICB2YXIgdSA9IHVybC5wYXJzZShyZXEudXJsKTtcbiAgICBpZiAodSAmJiB1LnBhdGhuYW1lICE9PSB0aGlzLm9wdGlvbnMucGF0aCkgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZXEuaGVhZGVycy51cGdyYWRlID09PSAndW5kZWZpbmVkJyB8fCByZXEuaGVhZGVycy51cGdyYWRlLnRvTG93ZXJDYXNlKCkgIT09ICd3ZWJzb2NrZXQnKSB7XG4gICAgYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAwLCAnQmFkIFJlcXVlc3QnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQta2V5MSddKSBoYW5kbGVIaXhpZVVwZ3JhZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgZWxzZSBoYW5kbGVIeWJpVXBncmFkZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldFNlcnZlcjtcblxuLyoqXG4gKiBFbnRpcmVseSBwcml2YXRlIGFwaXMsXG4gKiB3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSBib3VuZCB0byBhIHNlcGNpZmljIFdlYlNvY2tldCBpbnN0YW5jZS5cbiAqL1xuXG5mdW5jdGlvbiBoYW5kbGVIeWJpVXBncmFkZShyZXEsIHNvY2tldCwgdXBncmFkZUhlYWQsIGNiKSB7XG4gIC8vIGhhbmRsZSBwcmVtYXR1cmUgc29ja2V0IGVycm9yc1xuICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHsgc29ja2V0LmRlc3Ryb3koKTsgfSBjYXRjaCAoZSkge31cbiAgfVxuICBzb2NrZXQub24oJ2Vycm9yJywgZXJyb3JIYW5kbGVyKTtcblxuICAvLyB2ZXJpZnkga2V5IHByZXNlbmNlXG4gIGlmICghcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQta2V5J10pIHtcbiAgICBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCA0MDAsICdCYWQgUmVxdWVzdCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHZlcmlmeSB2ZXJzaW9uXG4gIHZhciB2ZXJzaW9uID0gcGFyc2VJbnQocmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtdmVyc2lvbiddKTtcbiAgaWYgKFs4LCAxM10uaW5kZXhPZih2ZXJzaW9uKSA9PT0gLTEpIHtcbiAgICBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCA0MDAsICdCYWQgUmVxdWVzdCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHZlcmlmeSBwcm90b2NvbFxuICB2YXIgcHJvdG9jb2xzID0gcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtcHJvdG9jb2wnXTtcblxuICAvLyB2ZXJpZnkgY2xpZW50XG4gIHZhciBvcmlnaW4gPSB2ZXJzaW9uIDwgMTMgP1xuICAgIHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LW9yaWdpbiddIDpcbiAgICByZXEuaGVhZGVyc1snb3JpZ2luJ107XG5cbiAgLy8gaGFuZGxlIGV4dGVuc2lvbnMgb2ZmZXJcbiAgdmFyIGV4dGVuc2lvbnNPZmZlciA9IEV4dGVuc2lvbnMucGFyc2UocmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtZXh0ZW5zaW9ucyddKTtcblxuICAvLyBoYW5kbGVyIHRvIGNhbGwgd2hlbiB0aGUgY29ubmVjdGlvbiBzZXF1ZW5jZSBjb21wbGV0ZXNcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgY29tcGxldGVIeWJpVXBncmFkZTIgPSBmdW5jdGlvbihwcm90b2NvbCkge1xuXG4gICAgLy8gY2FsYyBrZXlcbiAgICB2YXIga2V5ID0gcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQta2V5J107XG4gICAgdmFyIHNoYXN1bSA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGExJyk7XG4gICAgc2hhc3VtLnVwZGF0ZShrZXkgKyBcIjI1OEVBRkE1LUU5MTQtNDdEQS05NUNBLUM1QUIwREM4NUIxMVwiKTtcbiAgICBrZXkgPSBzaGFzdW0uZGlnZXN0KCdiYXNlNjQnKTtcblxuICAgIHZhciBoZWFkZXJzID0gW1xuICAgICAgICAnSFRUUC8xLjEgMTAxIFN3aXRjaGluZyBQcm90b2NvbHMnXG4gICAgICAsICdVcGdyYWRlOiB3ZWJzb2NrZXQnXG4gICAgICAsICdDb25uZWN0aW9uOiBVcGdyYWRlJ1xuICAgICAgLCAnU2VjLVdlYlNvY2tldC1BY2NlcHQ6ICcgKyBrZXlcbiAgICBdO1xuXG4gICAgaWYgKHR5cGVvZiBwcm90b2NvbCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgaGVhZGVycy5wdXNoKCdTZWMtV2ViU29ja2V0LVByb3RvY29sOiAnICsgcHJvdG9jb2wpO1xuICAgIH1cblxuICAgIHZhciBleHRlbnNpb25zID0ge307XG4gICAgdHJ5IHtcbiAgICAgIGV4dGVuc2lvbnMgPSBhY2NlcHRFeHRlbnNpb25zLmNhbGwoc2VsZiwgZXh0ZW5zaW9uc09mZmVyKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIDQwMCwgJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpLmxlbmd0aCkge1xuICAgICAgdmFyIHNlcnZlckV4dGVuc2lvbnMgPSB7fTtcbiAgICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpLmZvckVhY2goZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgc2VydmVyRXh0ZW5zaW9uc1t0b2tlbl0gPSBbZXh0ZW5zaW9uc1t0b2tlbl0ucGFyYW1zXVxuICAgICAgfSk7XG4gICAgICBoZWFkZXJzLnB1c2goJ1NlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uczogJyArIEV4dGVuc2lvbnMuZm9ybWF0KHNlcnZlckV4dGVuc2lvbnMpKTtcbiAgICB9XG5cbiAgICAvLyBhbGxvd3MgZXh0ZXJuYWwgbW9kaWZpY2F0aW9uL2luc3BlY3Rpb24gb2YgaGFuZHNoYWtlIGhlYWRlcnNcbiAgICBzZWxmLmVtaXQoJ2hlYWRlcnMnLCBoZWFkZXJzKTtcblxuICAgIHNvY2tldC5zZXRUaW1lb3V0KDApO1xuICAgIHNvY2tldC5zZXROb0RlbGF5KHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBzb2NrZXQud3JpdGUoaGVhZGVycy5jb25jYXQoJycsICcnKS5qb2luKCdcXHJcXG4nKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAvLyBpZiB0aGUgdXBncmFkZSB3cml0ZSBmYWlscywgc2h1dCB0aGUgY29ubmVjdGlvbiBkb3duIGhhcmRcbiAgICAgIHRyeSB7IHNvY2tldC5kZXN0cm95KCk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsaWVudCA9IG5ldyBXZWJTb2NrZXQoW3JlcSwgc29ja2V0LCB1cGdyYWRlSGVhZF0sIHtcbiAgICAgIHByb3RvY29sVmVyc2lvbjogdmVyc2lvbixcbiAgICAgIHByb3RvY29sOiBwcm90b2NvbCxcbiAgICAgIGV4dGVuc2lvbnM6IGV4dGVuc2lvbnNcbiAgICB9KTtcblxuICAgIGlmIChzZWxmLm9wdGlvbnMuY2xpZW50VHJhY2tpbmcpIHtcbiAgICAgIHNlbGYuY2xpZW50cy5wdXNoKGNsaWVudCk7XG4gICAgICBjbGllbnQub24oJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHNlbGYuY2xpZW50cy5pbmRleE9mKGNsaWVudCk7XG4gICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgIHNlbGYuY2xpZW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzaWduYWwgdXBncmFkZSBjb21wbGV0ZVxuICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgIGNiKGNsaWVudCk7XG4gIH1cblxuICAvLyBvcHRpb25hbGx5IGNhbGwgZXh0ZXJuYWwgcHJvdG9jb2wgc2VsZWN0aW9uIGhhbmRsZXIgYmVmb3JlXG4gIC8vIGNhbGxpbmcgY29tcGxldGVIeWJpVXBncmFkZTJcbiAgdmFyIGNvbXBsZXRlSHliaVVwZ3JhZGUxID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY2hvb3NlIGZyb20gdGhlIHN1Yi1wcm90b2NvbHNcbiAgICBpZiAodHlwZW9mIHNlbGYub3B0aW9ucy5oYW5kbGVQcm90b2NvbHMgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgcHJvdExpc3QgPSAocHJvdG9jb2xzIHx8IFwiXCIpLnNwbGl0KC8sICovKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciByZXMgPSBzZWxmLm9wdGlvbnMuaGFuZGxlUHJvdG9jb2xzKHByb3RMaXN0LCBmdW5jdGlvbihyZXN1bHQsIHByb3RvY29sKSB7XG4gICAgICAgICAgY2FsbGJhY2tDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICghcmVzdWx0KSBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCA0MDEsICdVbmF1dGhvcml6ZWQnKTtcbiAgICAgICAgICBlbHNlIGNvbXBsZXRlSHliaVVwZ3JhZGUyKHByb3RvY29sKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghY2FsbGJhY2tDYWxsZWQpIHtcbiAgICAgICAgICAgIC8vIHRoZSBoYW5kbGVQcm90b2NvbHMgaGFuZGxlciBuZXZlciBjYWxsZWQgb3VyIGNhbGxiYWNrXG4gICAgICAgICAgICBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCA1MDEsICdDb3VsZCBub3QgcHJvY2VzcyBwcm90b2NvbHMnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm90b2NvbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb21wbGV0ZUh5YmlVcGdyYWRlMihwcm90b2NvbHMuc3BsaXQoLywgKi8pWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBsZXRlSHliaVVwZ3JhZGUyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBvcHRpb25hbGx5IGNhbGwgZXh0ZXJuYWwgY2xpZW50IHZlcmlmaWNhdGlvbiBoYW5kbGVyXG4gIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIGluZm8gPSB7XG4gICAgICBvcmlnaW46IG9yaWdpbixcbiAgICAgIHNlY3VyZTogdHlwZW9mIHJlcS5jb25uZWN0aW9uLmF1dGhvcml6ZWQgIT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiByZXEuY29ubmVjdGlvbi5lbmNyeXB0ZWQgIT09ICd1bmRlZmluZWQnLFxuICAgICAgcmVxOiByZXFcbiAgICB9O1xuICAgIGlmICh0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50Lmxlbmd0aCA9PSAyKSB7XG4gICAgICB0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50KGluZm8sIGZ1bmN0aW9uKHJlc3VsdCwgY29kZSwgbmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT09ICd1bmRlZmluZWQnKSBjb2RlID0gNDAxO1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICd1bmRlZmluZWQnKSBuYW1lID0gaHR0cC5TVEFUVVNfQ09ERVNbY29kZV07XG5cbiAgICAgICAgaWYgKCFyZXN1bHQpIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIGNvZGUsIG5hbWUpO1xuICAgICAgICBlbHNlIGNvbXBsZXRlSHliaVVwZ3JhZGUxKCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQoaW5mbykpIHtcbiAgICAgIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIDQwMSwgJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBsZXRlSHliaVVwZ3JhZGUxKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUhpeGllVXBncmFkZShyZXEsIHNvY2tldCwgdXBncmFkZUhlYWQsIGNiKSB7XG4gIC8vIGhhbmRsZSBwcmVtYXR1cmUgc29ja2V0IGVycm9yc1xuICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHsgc29ja2V0LmRlc3Ryb3koKTsgfSBjYXRjaCAoZSkge31cbiAgfVxuICBzb2NrZXQub24oJ2Vycm9yJywgZXJyb3JIYW5kbGVyKTtcblxuICAvLyBiYWlsIGlmIG9wdGlvbnMgcHJldmVudCBoaXhpZVxuICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVIaXhpZSkge1xuICAgIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIDQwMSwgJ0hpeGllIHN1cHBvcnQgZGlzYWJsZWQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyB2ZXJpZnkga2V5IHByZXNlbmNlXG4gIGlmICghcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQta2V5MiddKSB7XG4gICAgYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAwLCAnQmFkIFJlcXVlc3QnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgb3JpZ2luID0gcmVxLmhlYWRlcnNbJ29yaWdpbiddXG4gICAgLCBzZWxmID0gdGhpcztcblxuICAvLyBzZXR1cCBoYW5kc2hha2UgY29tcGxldGlvbiB0byBydW4gYWZ0ZXIgY2xpZW50IGhhcyBiZWVuIHZlcmlmaWVkXG4gIHZhciBvbkNsaWVudFZlcmlmaWVkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdzaG9zdDtcbiAgICBpZiAoIXJlcS5oZWFkZXJzWyd4LWZvcndhcmRlZC1ob3N0J10pXG4gICAgICAgIHdzaG9zdCA9IHJlcS5oZWFkZXJzLmhvc3Q7XG4gICAgZWxzZVxuICAgICAgICB3c2hvc3QgPSByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtaG9zdCddO1xuICAgIHZhciBsb2NhdGlvbiA9ICgocmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLXByb3RvJ10gPT09ICdodHRwcycgfHwgc29ja2V0LmVuY3J5cHRlZCkgPyAnd3NzJyA6ICd3cycpICsgJzovLycgKyB3c2hvc3QgKyByZXEudXJsXG4gICAgICAsIHByb3RvY29sID0gcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtcHJvdG9jb2wnXTtcblxuICAgIC8vIGhhbmRzaGFrZSBjb21wbGV0aW9uIGNvZGUgdG8gcnVuIG9uY2Ugbm9uY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZFxuICAgIHZhciBjb21wbGV0ZUhhbmRzaGFrZSA9IGZ1bmN0aW9uKG5vbmNlLCByZXN0KSB7XG4gICAgICAvLyBjYWxjdWxhdGUga2V5XG4gICAgICB2YXIgazEgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1rZXkxJ11cbiAgICAgICAgLCBrMiA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleTInXVxuICAgICAgICAsIG1kNSA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKTtcblxuICAgICAgW2sxLCBrMl0uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICB2YXIgbiA9IHBhcnNlSW50KGsucmVwbGFjZSgvW15cXGRdL2csICcnKSlcbiAgICAgICAgICAsIHNwYWNlcyA9IGsucmVwbGFjZSgvW14gXS9nLCAnJykubGVuZ3RoO1xuICAgICAgICBpZiAoc3BhY2VzID09PSAwIHx8IG4gJSBzcGFjZXMgIT09IDApe1xuICAgICAgICAgIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIDQwMCwgJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG4gLz0gc3BhY2VzO1xuICAgICAgICBtZDUudXBkYXRlKFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICAgbiA+PiAyNCAmIDB4RkYsXG4gICAgICAgICAgbiA+PiAxNiAmIDB4RkYsXG4gICAgICAgICAgbiA+PiA4ICAmIDB4RkYsXG4gICAgICAgICAgbiAgICAgICAmIDB4RkYpKTtcbiAgICAgIH0pO1xuICAgICAgbWQ1LnVwZGF0ZShub25jZS50b1N0cmluZygnYmluYXJ5JykpO1xuXG4gICAgICB2YXIgaGVhZGVycyA9IFtcbiAgICAgICAgICAnSFRUUC8xLjEgMTAxIFN3aXRjaGluZyBQcm90b2NvbHMnXG4gICAgICAgICwgJ1VwZ3JhZGU6IFdlYlNvY2tldCdcbiAgICAgICAgLCAnQ29ubmVjdGlvbjogVXBncmFkZSdcbiAgICAgICAgLCAnU2VjLVdlYlNvY2tldC1Mb2NhdGlvbjogJyArIGxvY2F0aW9uXG4gICAgICBdO1xuICAgICAgaWYgKHR5cGVvZiBwcm90b2NvbCAhPSAndW5kZWZpbmVkJykgaGVhZGVycy5wdXNoKCdTZWMtV2ViU29ja2V0LVByb3RvY29sOiAnICsgcHJvdG9jb2wpO1xuICAgICAgaWYgKHR5cGVvZiBvcmlnaW4gIT0gJ3VuZGVmaW5lZCcpIGhlYWRlcnMucHVzaCgnU2VjLVdlYlNvY2tldC1PcmlnaW46ICcgKyBvcmlnaW4pO1xuXG4gICAgICBzb2NrZXQuc2V0VGltZW91dCgwKTtcbiAgICAgIHNvY2tldC5zZXROb0RlbGF5KHRydWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gbWVyZ2UgaGVhZGVyIGFuZCBoYXNoIGJ1ZmZlclxuICAgICAgICB2YXIgaGVhZGVyQnVmZmVyID0gbmV3IEJ1ZmZlcihoZWFkZXJzLmNvbmNhdCgnJywgJycpLmpvaW4oJ1xcclxcbicpKTtcbiAgICAgICAgdmFyIGhhc2hCdWZmZXIgPSBuZXcgQnVmZmVyKG1kNS5kaWdlc3QoJ2JpbmFyeScpLCAnYmluYXJ5Jyk7XG4gICAgICAgIHZhciBoYW5kc2hha2VCdWZmZXIgPSBuZXcgQnVmZmVyKGhlYWRlckJ1ZmZlci5sZW5ndGggKyBoYXNoQnVmZmVyLmxlbmd0aCk7XG4gICAgICAgIGhlYWRlckJ1ZmZlci5jb3B5KGhhbmRzaGFrZUJ1ZmZlciwgMCk7XG4gICAgICAgIGhhc2hCdWZmZXIuY29weShoYW5kc2hha2VCdWZmZXIsIGhlYWRlckJ1ZmZlci5sZW5ndGgpO1xuXG4gICAgICAgIC8vIGRvIGEgc2luZ2xlIHdyaXRlLCB3aGljaCAtIHVwb24gc3VjY2VzcyAtIGNhdXNlcyBhIG5ldyBjbGllbnQgd2Vic29ja2V0IHRvIGJlIHNldHVwXG4gICAgICAgIHNvY2tldC53cml0ZShoYW5kc2hha2VCdWZmZXIsICdiaW5hcnknLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSByZXR1cm47IC8vIGRvIG5vdCBjcmVhdGUgY2xpZW50IGlmIGFuIGVycm9yIGhhcHBlbnNcbiAgICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFdlYlNvY2tldChbcmVxLCBzb2NrZXQsIHJlc3RdLCB7XG4gICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICdoaXhpZS03NicsXG4gICAgICAgICAgICBwcm90b2NvbDogcHJvdG9jb2xcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmNsaWVudFRyYWNraW5nKSB7XG4gICAgICAgICAgICBzZWxmLmNsaWVudHMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgY2xpZW50Lm9uKCdjbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgaW5kZXggPSBzZWxmLmNsaWVudHMuaW5kZXhPZihjbGllbnQpO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNsaWVudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc2lnbmFsIHVwZ3JhZGUgY29tcGxldGVcbiAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgZXJyb3JIYW5kbGVyKTtcbiAgICAgICAgICBjYihjbGllbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRyeSB7IHNvY2tldC5kZXN0cm95KCk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXRyaWV2ZSBub25jZVxuICAgIHZhciBub25jZUxlbmd0aCA9IDg7XG4gICAgaWYgKHVwZ3JhZGVIZWFkICYmIHVwZ3JhZGVIZWFkLmxlbmd0aCA+PSBub25jZUxlbmd0aCkge1xuICAgICAgdmFyIG5vbmNlID0gdXBncmFkZUhlYWQuc2xpY2UoMCwgbm9uY2VMZW5ndGgpO1xuICAgICAgdmFyIHJlc3QgPSB1cGdyYWRlSGVhZC5sZW5ndGggPiBub25jZUxlbmd0aCA/IHVwZ3JhZGVIZWFkLnNsaWNlKG5vbmNlTGVuZ3RoKSA6IG51bGw7XG4gICAgICBjb21wbGV0ZUhhbmRzaGFrZS5jYWxsKHNlbGYsIG5vbmNlLCByZXN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBub25jZSBub3QgcHJlc2VudCBpbiB1cGdyYWRlSGVhZCwgc28gd2UgbXVzdCB3YWl0IGZvciBlbm91Z2ggZGF0YVxuICAgICAgLy8gZGF0YSB0byBhcnJpdmUgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICAgIHZhciBub25jZSA9IG5ldyBCdWZmZXIobm9uY2VMZW5ndGgpO1xuICAgICAgdXBncmFkZUhlYWQuY29weShub25jZSwgMCk7XG4gICAgICB2YXIgcmVjZWl2ZWQgPSB1cGdyYWRlSGVhZC5sZW5ndGg7XG4gICAgICB2YXIgcmVzdCA9IG51bGw7XG4gICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciB0b1JlYWQgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCwgbm9uY2VMZW5ndGggLSByZWNlaXZlZCk7XG4gICAgICAgIGlmICh0b1JlYWQgPT09IDApIHJldHVybjtcbiAgICAgICAgZGF0YS5jb3B5KG5vbmNlLCByZWNlaXZlZCwgMCwgdG9SZWFkKTtcbiAgICAgICAgcmVjZWl2ZWQgKz0gdG9SZWFkO1xuICAgICAgICBpZiAocmVjZWl2ZWQgPT0gbm9uY2VMZW5ndGgpIHtcbiAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBoYW5kbGVyKTtcbiAgICAgICAgICBpZiAodG9SZWFkIDwgZGF0YS5sZW5ndGgpIHJlc3QgPSBkYXRhLnNsaWNlKHRvUmVhZCk7XG4gICAgICAgICAgY29tcGxldGVIYW5kc2hha2UuY2FsbChzZWxmLCBub25jZSwgcmVzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNvY2tldC5vbignZGF0YScsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHZlcmlmeSBjbGllbnRcbiAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50ID09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgaW5mbyA9IHtcbiAgICAgIG9yaWdpbjogb3JpZ2luLFxuICAgICAgc2VjdXJlOiB0eXBlb2YgcmVxLmNvbm5lY3Rpb24uYXV0aG9yaXplZCAhPT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHJlcS5jb25uZWN0aW9uLmVuY3J5cHRlZCAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgICByZXE6IHJlcVxuICAgIH07XG4gICAgaWYgKHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQubGVuZ3RoID09IDIpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQoaW5mbywgZnVuY3Rpb24ocmVzdWx0LCBjb2RlLCBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29kZSA9PT0gJ3VuZGVmaW5lZCcpIGNvZGUgPSA0MDE7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3VuZGVmaW5lZCcpIG5hbWUgPSBodHRwLlNUQVRVU19DT0RFU1tjb2RlXTtcblxuICAgICAgICBpZiAoIXJlc3VsdCkgYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgY29kZSwgbmFtZSk7XG4gICAgICAgIGVsc2Ugb25DbGllbnRWZXJpZmllZC5hcHBseShzZWxmKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIGlmICghdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpbmZvKSkge1xuICAgICAgYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAxLCAnVW5hdXRob3JpemVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gbm8gY2xpZW50IHZlcmlmaWNhdGlvbiByZXF1aXJlZFxuICBvbkNsaWVudFZlcmlmaWVkKCk7XG59XG5cbmZ1bmN0aW9uIGFjY2VwdEV4dGVuc2lvbnMob2ZmZXIpIHtcbiAgdmFyIGV4dGVuc2lvbnMgPSB7fTtcbiAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGU7XG4gIGlmIChvcHRpb25zICYmIG9mZmVyW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgdmFyIHBlck1lc3NhZ2VEZWZsYXRlID0gbmV3IFBlck1lc3NhZ2VEZWZsYXRlKG9wdGlvbnMgIT09IHRydWUgPyBvcHRpb25zIDoge30sIHRydWUpO1xuICAgIHBlck1lc3NhZ2VEZWZsYXRlLmFjY2VwdChvZmZlcltQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICB9XG4gIHJldHVybiBleHRlbnNpb25zO1xufVxuXG5mdW5jdGlvbiBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCBjb2RlLCBuYW1lKSB7XG4gIHRyeSB7XG4gICAgdmFyIHJlc3BvbnNlID0gW1xuICAgICAgJ0hUVFAvMS4xICcgKyBjb2RlICsgJyAnICsgbmFtZSxcbiAgICAgICdDb250ZW50LXR5cGU6IHRleHQvaHRtbCdcbiAgICBdO1xuICAgIHNvY2tldC53cml0ZShyZXNwb25zZS5jb25jYXQoJycsICcnKS5qb2luKCdcXHJcXG4nKSk7XG4gIH1cbiAgY2F0Y2ggKGUpIHsgLyogaWdub3JlIGVycm9ycyAtIHdlJ3ZlIGFib3J0ZWQgdGhpcyBjb25uZWN0aW9uICovIH1cbiAgZmluYWxseSB7XG4gICAgLy8gZW5zdXJlIHRoYXQgYW4gZWFybHkgYWJvcnRlZCBjb25uZWN0aW9uIGlzIHNodXQgZG93biBjb21wbGV0ZWx5XG4gICAgdHJ5IHsgc29ja2V0LmRlc3Ryb3koKTsgfSBjYXRjaCAoZSkge31cbiAgfVxufVxuIiwiLyoqXHJcbiAqIEBhdXRob3IgcWlhbyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvXHJcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cclxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cclxuICogQGF1dGhvciBXZXN0TGFuZ2xleSAvIGh0dHA6Ly9naXRodWIuY29tL1dlc3RMYW5nbGV5XHJcbiAqIEBjb250cmlidXRvciBkM3gwciAvIGh0dHA6Ly9naXRodWIuY29tL2QzeDByICAtIGFkZCBlbmFibGUvZGlzYWJsZSB0byBhbGxvdyBkaXNjb25uZWN0aW5nIHRoZXNlIGV2ZW50c1xyXG4gKi9cclxuXHJcblRIUkVFLk9yYml0Q29udHJvbHMgPSBmdW5jdGlvbiAoIG9iamVjdCwgY2x1c3Rlckxvb2tBdCwgZG9tRWxlbWVudCApIHtcclxuXHQvLyBtb2RlIDEsIGlzIGxpbWl0ZWRcclxuXHR0aGlzLm1vZGUgPSAyO1xyXG5cdHRoaXMub2JqZWN0ID0gb2JqZWN0O1xyXG5cdHRoaXMuY2x1c3RlciA9IGNsdXN0ZXJMb29rQXQ7XHJcblx0dGhpcy5kb21FbGVtZW50ID0gKCBkb21FbGVtZW50ICE9PSB1bmRlZmluZWQgKSA/IGRvbUVsZW1lbnQgOiBkb2N1bWVudDtcclxuXHJcblx0Ly8gQVBJXHJcblxyXG5cdHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdHRoaXMuY2VudGVyID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHJcblx0dGhpcy51c2VyWm9vbSA9IHRydWU7XHJcblx0dGhpcy51c2VyWm9vbVNwZWVkID0gMC4xMDtcclxuXHJcblx0dGhpcy51c2VyUm90YXRlID0gdHJ1ZTtcclxuXHR0aGlzLnVzZXJSb3RhdGVTcGVlZCA9IDEuMDtcclxuXHJcblx0dGhpcy51c2VyUGFuID0gdHJ1ZTtcclxuXHR0aGlzLnVzZXJQYW5TcGVlZCA9IDIuMDtcclxuXHJcblx0dGhpcy5hdXRvUm90YXRlID0gZmFsc2U7XHJcblx0dGhpcy5hdXRvUm90YXRlU3BlZWQgPSAyLjA7IC8vIDMwIHNlY29uZHMgcGVyIHJvdW5kIHdoZW4gZnBzIGlzIDYwXHJcblxyXG5cdHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnNcclxuXHR0aGlzLm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJOyAvLyByYWRpYW5zXHJcblxyXG5cdHRoaXMubWluRGlzdGFuY2UgPSAwO1xyXG5cdHRoaXMubWF4RGlzdGFuY2UgPSBJbmZpbml0eTtcclxuXHJcblx0Ly8gNjUgLypBKi8sIDgzIC8qUyovLCA2OCAvKkQqL1xyXG5cdHRoaXMua2V5cyA9IHsgTEVGVDogMzcsIFVQOiAzOCwgUklHSFQ6IDM5LCBCT1RUT006IDQwLCBST1RBVEU6IDY1LCBaT09NOiA4MywgUEFOOiA2OCB9O1xyXG5cclxuXHQvLyBpbnRlcm5hbHNcclxuXHJcblx0dmFyIHNjb3BlID0gdGhpcztcclxuXHJcblx0dmFyIEVQUyA9IDAuMDAwMDAxO1xyXG5cdHZhciBQSVhFTFNfUEVSX1JPVU5EID0gMTgwMDtcclxuXHJcblx0dmFyIHJvdGF0ZVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuXHR2YXIgcm90YXRlRW5kID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuXHR2YXIgcm90YXRlRGVsdGEgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG5cclxuXHR2YXIgem9vbVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuXHR2YXIgem9vbUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcblx0dmFyIHpvb21EZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcblxyXG5cdHZhciBwaGlEZWx0YSA9IDA7XHJcblx0dmFyIHRoZXRhRGVsdGEgPSAwO1xyXG5cdHZhciBzY2FsZSA9IDE7XHJcblxyXG5cdHZhciBsYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuXHR2YXIgU1RBVEUgPSB7IE5PTkU6IC0xLCBST1RBVEU6IDAsIFpPT006IDEsIFBBTjogMiB9O1xyXG5cdHZhciBzdGF0ZSA9IFNUQVRFLk5PTkU7XHJcblxyXG5cdC8vIGV2ZW50c1xyXG5cclxuXHR2YXIgY2hhbmdlRXZlbnQgPSB7IHR5cGU6ICdjaGFuZ2UnIH07XHJcblxyXG5cclxuXHR0aGlzLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbiAoIGFuZ2xlICkge1xyXG5cclxuXHRcdGlmICggYW5nbGUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGFuZ2xlID0gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0dGhldGFEZWx0YSAtPSBhbmdsZTtcclxuXHJcblx0fTtcclxuXHJcblx0dGhpcy5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uICggYW5nbGUgKSB7XHJcblxyXG5cdFx0aWYgKCBhbmdsZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0YW5nbGUgPSBnZXRBdXRvUm90YXRpb25BbmdsZSgpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aGV0YURlbHRhICs9IGFuZ2xlO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnJvdGF0ZVVwID0gZnVuY3Rpb24gKCBhbmdsZSApIHtcclxuXHJcblx0XHRpZiAoIGFuZ2xlID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRhbmdsZSA9IGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHBoaURlbHRhIC09IGFuZ2xlO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnJvdGF0ZURvd24gPSBmdW5jdGlvbiAoIGFuZ2xlICkge1xyXG5cclxuXHRcdGlmICggYW5nbGUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGFuZ2xlID0gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cGhpRGVsdGEgKz0gYW5nbGU7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMuem9vbUluID0gZnVuY3Rpb24gKCB6b29tU2NhbGUgKSB7XHJcblxyXG5cdFx0aWYgKCB6b29tU2NhbGUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdHpvb21TY2FsZSA9IGdldFpvb21TY2FsZSgpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRzY2FsZSAvPSB6b29tU2NhbGU7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMuem9vbU91dCA9IGZ1bmN0aW9uICggem9vbVNjYWxlICkge1xyXG5cclxuXHRcdGlmICggem9vbVNjYWxlID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHR6b29tU2NhbGUgPSBnZXRab29tU2NhbGUoKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0c2NhbGUgKj0gem9vbVNjYWxlO1xyXG5cclxuXHR9O1xyXG5cclxuXHR0aGlzLnBhbiA9IGZ1bmN0aW9uICggZGlzdGFuY2UgKSB7XHJcblxyXG5cdFx0ZGlzdGFuY2UudHJhbnNmb3JtRGlyZWN0aW9uKCB0aGlzLm9iamVjdC5tYXRyaXggKTtcclxuXHRcdGRpc3RhbmNlLm11bHRpcGx5U2NhbGFyKCBzY29wZS51c2VyUGFuU3BlZWQgKTtcclxuXHJcblx0XHR0aGlzLm9iamVjdC5wb3NpdGlvbi5hZGQoIGRpc3RhbmNlICk7XHJcblx0XHR0aGlzLmNlbnRlci5hZGQoIGRpc3RhbmNlICk7XHJcblxyXG5cdH07XHJcblxyXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciBwb3NpdGlvbiA9IHRoaXMub2JqZWN0LnBvc2l0aW9uO1xyXG5cdFx0dmFyIG9mZnNldCA9IHBvc2l0aW9uLmNsb25lKCkuc3ViKCB0aGlzLmNlbnRlciApO1xyXG5cclxuXHRcdC8vIGFuZ2xlIGZyb20gei1heGlzIGFyb3VuZCB5LWF4aXNcclxuXHJcblx0XHR2YXIgdGhldGEgPSBNYXRoLmF0YW4yKCBvZmZzZXQueCwgb2Zmc2V0LnogKTtcclxuXHJcblx0XHQvLyBhbmdsZSBmcm9tIHktYXhpc1xyXG5cclxuXHRcdHZhciBwaGkgPSBNYXRoLmF0YW4yKCBNYXRoLnNxcnQoIG9mZnNldC54ICogb2Zmc2V0LnggKyBvZmZzZXQueiAqIG9mZnNldC56ICksIG9mZnNldC55ICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmF1dG9Sb3RhdGUgKSB7XHJcblxyXG5cdFx0XHR0aGlzLnJvdGF0ZUxlZnQoIGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYoIHRoaXMubW9kZSA9PSAyICkge1xyXG5cdFx0XHRpZiggcGhpRGVsdGEgfHwgdGhldGFEZWx0YSApIHtcclxuXHRcdFx0XHR0aGlzLm9iamVjdC5tYXRyaXgucm90YXRlUmVsYXRpdmUoIC1waGlEZWx0YSwgdGhldGFEZWx0YSwgMCApO1xyXG5cdFx0XHRcdHRoaXMub2JqZWN0Lm1hdHJpeC5yb3RhdGVSZWxhdGl2ZSggMCwgMCwgLXRoaXMub2JqZWN0Lm1hdHJpeC5yb2xsIClcclxuXHRcdFx0XHR2YXIgdG1wID0gdGhpcy5jZW50ZXIuY2xvbmUoKS5hZGRTY2FsZWRWZWN0b3IoIHRoaXMub2JqZWN0Lm1hdHJpeC5iYWNrd2FyZCwgb2Zmc2V0Lmxlbmd0aCgpICooc2NhbGUpICk7XHJcblx0XHRcdFx0dGhpcy5vYmplY3QubWF0cml4Lm9yaWdpbi5jb3B5KCB0bXAgKTtcclxuXHRcdFx0XHR0aGlzLm9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhldGEgKz0gdGhldGFEZWx0YTtcclxuXHRcdFx0cGhpICs9IHBoaURlbHRhO1xyXG5cclxuXHRcdFx0Ly8gcmVzdHJpY3QgcGhpIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcclxuXHRcdFx0cGhpID0gTWF0aC5tYXgoIHRoaXMubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oIHRoaXMubWF4UG9sYXJBbmdsZSwgcGhpICkgKTtcclxuXHJcblx0XHRcdC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWUgRVBTIGFuZCBQSS1FUFNcclxuXHRcdFx0cGhpID0gTWF0aC5tYXgoIEVQUywgTWF0aC5taW4oIE1hdGguUEkgLSBFUFMsIHBoaSApICk7XHJcblxyXG5cdFx0XHR2YXIgcmFkaXVzID0gb2Zmc2V0Lmxlbmd0aCgpICogc2NhbGU7XHJcblxyXG5cdFx0XHQvLyByZXN0cmljdCByYWRpdXMgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xyXG5cdFx0XHRyYWRpdXMgPSBNYXRoLm1heCggdGhpcy5taW5EaXN0YW5jZSwgTWF0aC5taW4oIHRoaXMubWF4RGlzdGFuY2UsIHJhZGl1cyApICk7XHJcblxyXG5cdFx0XHRvZmZzZXQueCA9IHJhZGl1cyAqIE1hdGguc2luKCBwaGkgKSAqIE1hdGguc2luKCB0aGV0YSApO1xyXG5cdFx0XHRvZmZzZXQueSA9IHJhZGl1cyAqIE1hdGguY29zKCBwaGkgKTtcclxuXHRcdFx0b2Zmc2V0LnogPSByYWRpdXMgKiBNYXRoLnNpbiggcGhpICkgKiBNYXRoLmNvcyggdGhldGEgKTtcclxuXHJcblx0XHRcdHBvc2l0aW9uLmNvcHkoIHRoaXMuY2VudGVyICkuYWRkKCBvZmZzZXQgKTtcclxuXHJcblx0ICAgICAgICAvL2NvbnNvbGUubG9nKCBcInVwZGF0ZSBsb29rQXQ/XCIsIHRoZXRhRGVsdGEsIHBoaURlbHRhKVxyXG5cclxuXHRcdFx0dGhpcy5vYmplY3QubG9va0F0KCB0aGlzLmNlbnRlciApO1xyXG5cclxuXHQgICAgICAgIHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0dGhldGFEZWx0YSA9IDA7XHJcblx0XHRwaGlEZWx0YSA9IDA7XHJcblx0XHRzY2FsZSA9IDE7XHJcblxyXG5cdFx0aWYgKCBsYXN0UG9zaXRpb24uZGlzdGFuY2VUbyggdGhpcy5vYmplY3QucG9zaXRpb24gKSA+IDAgKSB7XHJcblxyXG5cdFx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoIGNoYW5nZUV2ZW50ICk7XHJcblxyXG5cdFx0XHRsYXN0UG9zaXRpb24uY29weSggdGhpcy5vYmplY3QucG9zaXRpb24gKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH07XHJcblxyXG5cclxuXHRmdW5jdGlvbiBnZXRBdXRvUm90YXRpb25BbmdsZSgpIHtcclxuXHJcblx0XHRyZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcclxuXHJcblx0XHRyZXR1cm4gTWF0aC5wb3coIDAuOTUsIHNjb3BlLnVzZXJab29tU3BlZWQgKTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlRG93biggZXZlbnQgKSB7XHJcblxyXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHRcdGlmICggc2NvcGUudXNlclJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRpZiAoIHN0YXRlID09PSBTVEFURS5OT05FIClcclxuXHRcdHtcclxuXHRcdFx0aWYgKCBldmVudC5idXR0b24gPT09IDAgKVxyXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuUk9UQVRFO1xyXG5cdFx0XHRpZiAoIGV2ZW50LmJ1dHRvbiA9PT0gMSApXHJcblx0XHRcdFx0c3RhdGUgPSBTVEFURS5aT09NO1xyXG5cdFx0XHRpZiAoIGV2ZW50LmJ1dHRvbiA9PT0gMiApXHJcblx0XHRcdFx0c3RhdGUgPSBTVEFURS5QQU47XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGlmICggc3RhdGUgPT09IFNUQVRFLlJPVEFURSApIHtcclxuXHJcblx0XHRcdC8vc3RhdGUgPSBTVEFURS5ST1RBVEU7XHJcblxyXG5cdFx0XHRyb3RhdGVTdGFydC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gU1RBVEUuWk9PTSApIHtcclxuXHJcblx0XHRcdC8vc3RhdGUgPSBTVEFURS5aT09NO1xyXG5cclxuXHRcdFx0em9vbVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cclxuXHRcdH0gZWxzZSBpZiAoIHN0YXRlID09PSBTVEFURS5QQU4gKSB7XHJcblxyXG5cdFx0XHQvL3N0YXRlID0gU1RBVEUuUEFOO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlICk7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UgKTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlTW92ZSggZXZlbnQgKSB7XHJcblxyXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHJcblxyXG5cdFx0aWYgKCBzdGF0ZSA9PT0gU1RBVEUuUk9UQVRFICkge1xyXG5cclxuXHRcdFx0cm90YXRlRW5kLnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xyXG5cdFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICk7XHJcblxyXG5cdFx0XHRzY29wZS5yb3RhdGVMZWZ0KCAyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBQSVhFTFNfUEVSX1JPVU5EICogc2NvcGUudXNlclJvdGF0ZVNwZWVkICk7XHJcblx0XHRcdHNjb3BlLnJvdGF0ZVVwKCAyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnkgLyBQSVhFTFNfUEVSX1JPVU5EICogc2NvcGUudXNlclJvdGF0ZVNwZWVkICk7XHJcblxyXG5cdFx0XHRyb3RhdGVTdGFydC5jb3B5KCByb3RhdGVFbmQgKTtcclxuXHJcblx0XHR9IGVsc2UgaWYgKCBzdGF0ZSA9PT0gU1RBVEUuWk9PTSApIHtcclxuXHJcblx0XHRcdHpvb21FbmQuc2V0KCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZICk7XHJcblx0XHRcdHpvb21EZWx0YS5zdWJWZWN0b3JzKCB6b29tRW5kLCB6b29tU3RhcnQgKTtcclxuXHJcblx0XHRcdGlmICggem9vbURlbHRhLnkgPiAwICkge1xyXG5cclxuXHRcdFx0XHRzY29wZS56b29tSW4oKTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdHNjb3BlLnpvb21PdXQoKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHpvb21TdGFydC5jb3B5KCB6b29tRW5kICk7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggc3RhdGUgPT09IFNUQVRFLlBBTiApIHtcclxuXHJcblx0XHRcdHZhciBtb3ZlbWVudFggPSBldmVudC5tb3ZlbWVudFggfHwgZXZlbnQubW96TW92ZW1lbnRYIHx8IGV2ZW50LndlYmtpdE1vdmVtZW50WCB8fCAwO1xyXG5cdFx0XHR2YXIgbW92ZW1lbnRZID0gZXZlbnQubW92ZW1lbnRZIHx8IGV2ZW50Lm1vek1vdmVtZW50WSB8fCBldmVudC53ZWJraXRNb3ZlbWVudFkgfHwgMDtcclxuXHJcblx0XHRcdHNjb3BlLnBhbiggbmV3IFRIUkVFLlZlY3RvcjMoIC0gbW92ZW1lbnRYLCBtb3ZlbWVudFksIDAgKSApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlVXAoIGV2ZW50ICkge1xyXG5cclxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblx0XHRpZiAoIHNjb3BlLnVzZXJSb3RhdGUgPT09IGZhbHNlICkgcmV0dXJuO1xyXG5cclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xyXG5cclxuXHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbk1vdXNlV2hlZWwoIGV2ZW50ICkge1xyXG5cclxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblx0XHRpZiAoIHNjb3BlLnVzZXJab29tID09PSBmYWxzZSApIHJldHVybjtcclxuXHJcblx0XHR2YXIgZGVsdGEgPSAwO1xyXG5cclxuXHRcdGlmICggZXZlbnQud2hlZWxEZWx0YSApIHsgLy8gV2ViS2l0IC8gT3BlcmEgLyBFeHBsb3JlciA5XHJcblxyXG5cdFx0XHRkZWx0YSA9IGV2ZW50LndoZWVsRGVsdGE7XHJcblxyXG5cdFx0fSBlbHNlIGlmICggZXZlbnQuZGV0YWlsICkgeyAvLyBGaXJlZm94XHJcblxyXG5cdFx0XHRkZWx0YSA9IC0gZXZlbnQuZGV0YWlsO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGRlbHRhID4gMCApIHtcclxuXHJcblx0XHRcdHNjb3BlLnpvb21PdXQoKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0c2NvcGUuem9vbUluKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9uS2V5RG93biggZXZlbnQgKSB7XHJcblxyXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuXHRcdGlmICggc2NvcGUudXNlclBhbiA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHJcblx0XHRcdC8qY2FzZSBzY29wZS5rZXlzLlVQOlxyXG5cdFx0XHRcdHNjb3BlLnBhbiggbmV3IFRIUkVFLlZlY3RvcjMoIDAsIDEsIDAgKSApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuQk9UVE9NOlxyXG5cdFx0XHRcdHNjb3BlLnBhbiggbmV3IFRIUkVFLlZlY3RvcjMoIDAsIC0gMSwgMCApICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5MRUZUOlxyXG5cdFx0XHRcdHNjb3BlLnBhbiggbmV3IFRIUkVFLlZlY3RvcjMoIC0gMSwgMCwgMCApICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5SSUdIVDpcclxuXHRcdFx0XHRzY29wZS5wYW4oIG5ldyBUSFJFRS5WZWN0b3IzKCAxLCAwLCAwICkgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Ki9cclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlJPVEFURTpcclxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlJPVEFURTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlpPT006XHJcblx0XHRcdFx0c3RhdGUgPSBTVEFURS5aT09NO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuUEFOOlxyXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuUEFOO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvbktleVVwKCBldmVudCApIHtcclxuXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlJPVEFURTpcclxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlpPT006XHJcblx0XHRcdGNhc2Ugc2NvcGUua2V5cy5QQU46XHJcblx0XHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdHZhciBvbmdvaW5nVG91Y2hlcyA9IFtdO1xyXG5cclxuXHRmdW5jdGlvbiBjb3B5VG91Y2godG91Y2gpIHtcclxuXHQgIHJldHVybiB7IGlkZW50aWZpZXI6IHRvdWNoLmlkZW50aWZpZXIsIHBhZ2VYOiB0b3VjaC5wYWdlWCwgcGFnZVk6IHRvdWNoLnBhZ2VZIH07XHJcblx0fVxyXG5cdGZ1bmN0aW9uIG9uZ29pbmdUb3VjaEluZGV4QnlJZChpZFRvRmluZCkge1xyXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbmdvaW5nVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICB2YXIgaWQgPSBvbmdvaW5nVG91Y2hlc1tpXS5pZGVudGlmaWVyO1xyXG5cclxuXHQgICAgaWYgKGlkID09IGlkVG9GaW5kKSB7XHJcblx0ICAgICAgcmV0dXJuIGk7XHJcblx0ICAgIH1cclxuXHQgIH1cclxuXHQgIHJldHVybiAtMTsgICAgLy8gbm90IGZvdW5kXHJcblx0fVxyXG5cdGZ1bmN0aW9uIG9uVG91Y2hEb3duKGV2ZW50KSB7XHJcblx0ICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgdmFyIHRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcclxuXHQgIGZvciggdmFyIGkgPSAwOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKyApIHtcclxuXHJcblx0XHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblx0XHRcdGlmICggc2NvcGUudXNlclJvdGF0ZSA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0aWYgKCBzdGF0ZSA9PT0gU1RBVEUuTk9ORSApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAoIGV2ZW50LmJ1dHRvbiA9PT0gMCApXHJcblx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlJPVEFURTtcclxuXHRcdFx0XHRpZiAoIGV2ZW50LmJ1dHRvbiA9PT0gMSApXHJcblx0XHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlpPT007XHJcblx0XHRcdFx0aWYgKCBldmVudC5idXR0b24gPT09IDIgKVxyXG5cdFx0XHRcdFx0c3RhdGUgPSBTVEFURS5QQU47XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRpZiAoIHN0YXRlID09PSBTVEFURS5ST1RBVEUgKSB7XHJcblx0XHRcdFx0cm90YXRlU3RhcnQuc2V0KCB0b3VjaGVzWzBdLnBhZ2VYLCB0b3VjaGVzWzBdLnBhZ2VZICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHN0YXRlID09PSBTVEFURS5aT09NICkge1xyXG5cdFx0XHRcdC8vc3RhdGUgPSBTVEFURS5aT09NO1xyXG5cdFx0XHRcdHpvb21TdGFydC5zZXQoIHRvdWNoZXNbMF0ucGFnZVgsIHRvdWNoZXNbMF0ucGFnZVkgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggc3RhdGUgPT09IFNUQVRFLlBBTiApIHtcclxuXHRcdFx0XHQvL3N0YXRlID0gU1RBVEUuUEFOO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHQgICAgY29uc29sZS5sb2coIGB0b3VjaCAke2l9PSR7dG91Y2hlc1tpXX1gKTtcclxuXHQgICAgb25nb2luZ1RvdWNoZXMucHVzaCggY29weVRvdWNoKCB0b3VjaGVzW2ldICkgKTtcclxuXHJcblx0ICB9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvblRvdWNoVXAoZXZlbnQpIHtcclxuXHQgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR2YXIgdG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xyXG5cdCAgZm9yKCB2YXIgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrICkge1xyXG5cdCAgICB2YXIgaWR4ID0gb25nb2luZ1RvdWNoSW5kZXhCeUlkKHRvdWNoZXNbaV0uaWRlbnRpZmllcik7XHJcblx0ICAgIGlmKCBpZHggPj0gMCApIHtcclxuXHRcdFx0XHRvbmdvaW5nVG91Y2hlcy5zcGxpY2UoaWR4LCAxKTsgIC8vIHJlbW92ZSBpdDsgd2UncmUgZG9uZVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkge1xyXG5cdCAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHQgIHZhciB0b3VjaGVzID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7XHJcblx0ICBmb3IoIHZhciBpID0gMDsgaSA8IHRvdWNoZXMubGVuZ3RoOyBpKysgKSB7XHJcblx0ICAgIHZhciBpZHggPSBvbmdvaW5nVG91Y2hJbmRleEJ5SWQodG91Y2hlc1tpXS5pZGVudGlmaWVyKTtcclxuXHRcdFx0Y29uc29sZS5sb2coIGBnb3QgdG91Y2ggJHtpZHh9YCApO1xyXG5cdCAgICBpZiggaWR4ID49IDAgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGlmICggc3RhdGUgPT09IFNUQVRFLlJPVEFURSApIHtcclxuXHJcblx0XHRcdFx0XHRyb3RhdGVFbmQuc2V0KCB0b3VjaGVzW2ldLnBhZ2VYLCB0b3VjaGVzW2ldLnBhZ2VZICk7XHJcblx0XHRcdFx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICk7XHJcblxyXG5cdFx0XHRcdFx0c2NvcGUucm90YXRlTGVmdCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gUElYRUxTX1BFUl9ST1VORCAqIHNjb3BlLnVzZXJSb3RhdGVTcGVlZCApO1xyXG5cdFx0XHRcdFx0c2NvcGUucm90YXRlVXAoIDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIFBJWEVMU19QRVJfUk9VTkQgKiBzY29wZS51c2VyUm90YXRlU3BlZWQgKTtcclxuXHJcblx0XHRcdFx0XHRyb3RhdGVTdGFydC5jb3B5KCByb3RhdGVFbmQgKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIGlmICggc3RhdGUgPT09IFNUQVRFLlpPT00gKSB7XHJcblxyXG5cdFx0XHRcdFx0em9vbUVuZC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcclxuXHRcdFx0XHRcdHpvb21EZWx0YS5zdWJWZWN0b3JzKCB6b29tRW5kLCB6b29tU3RhcnQgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIHpvb21EZWx0YS55ID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRcdHNjb3BlLnpvb21JbigpO1xyXG5cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0XHRzY29wZS56b29tT3V0KCk7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHpvb21TdGFydC5jb3B5KCB6b29tRW5kICk7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXRlID09PSBTVEFURS5QQU4gKSB7XHJcblxyXG5cdFx0XHRcdFx0dmFyIG1vdmVtZW50WCA9IGV2ZW50Lm1vdmVtZW50WCB8fCBldmVudC5tb3pNb3ZlbWVudFggfHwgZXZlbnQud2Via2l0TW92ZW1lbnRYIHx8IDA7XHJcblx0XHRcdFx0XHR2YXIgbW92ZW1lbnRZID0gZXZlbnQubW92ZW1lbnRZIHx8IGV2ZW50Lm1vek1vdmVtZW50WSB8fCBldmVudC53ZWJraXRNb3ZlbWVudFkgfHwgMDtcclxuXHJcblx0XHRcdFx0XHRzY29wZS5wYW4oIG5ldyBUSFJFRS5WZWN0b3IzKCAtIG1vdmVtZW50WCwgbW92ZW1lbnRZLCAwICkgKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0XHRcdG9uZ29pbmdUb3VjaGVzW2lkeF0ucGFnZVggPSB0b3VjaGVzW2ldLnBhZ2VYO1xyXG5cdFx0XHRcdG9uZ29pbmdUb3VjaGVzW2lkeF0ucGFnZVkgPSB0b3VjaGVzW2ldLnBhZ2VZO1xyXG5cdCAgICAgIC8vb25nb2luZ1RvdWNoZXMuc3BsaWNlKCBpZHgsIDEsIGNvcHlUb3VjaCggdG91Y2hlc1tpXSApICk7XHJcblx0ICAgIH1cclxuXHQgIH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG9uVG91Y2hDYW5jZWwoZXZlbnQpIHtcclxuXHQgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHQgIGNvbnNvbGUubG9nKFwidG91Y2hjYW5jZWwuXCIpO1xyXG5cdFx0ICB2YXIgdG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xyXG5cclxuXHRcdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGlkeCA9IG9uZ29pbmdUb3VjaEluZGV4QnlJZCh0b3VjaGVzW2ldLmlkZW50aWZpZXIpO1xyXG5cdFx0ICAgIGlmKCBpZHggPj0gMCApIHtcclxuXHRcdCAgICBcdG9uZ29pbmdUb3VjaGVzLnNwbGljZShpLCAxKTsgIC8vIHJlbW92ZSBpdDsgd2UncmUgZG9uZVxyXG5cdFx0XHRcdH1cclxuXHRcdCAgfVxyXG5cdFx0fVxyXG5cclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGlnbm9yZShldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY29udGV4dG1lbnUnLCBpZ25vcmUsIGZhbHNlICk7XHJcblx0XHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCBvblRvdWNoRG93biwgZmFsc2UgKTtcclxuXHQgICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2hlbmQnLCBvblRvdWNoVXAsIGZhbHNlICk7XHJcblx0ICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3RvdWNoY2FuY2VsJywgb25Ub3VjaENhbmNlbCwgZmFsc2UgKTtcclxuXHQgICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIGZhbHNlICk7XHJcbiAgICBcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBmYWxzZSApO1xyXG4gICAgXHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXdoZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xyXG4gICAgXHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdET01Nb3VzZVNjcm9sbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UgKTsgLy8gZmlyZWZveFxyXG4gICAgXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbktleURvd24sIGZhbHNlICk7XHJcbiAgICBcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAna2V5dXAnLCBvbktleVVwLCBmYWxzZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZW5hYmxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBcdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NvbnRleHRtZW51JywgaWdub3JlLCBmYWxzZSApO1xyXG5cdFx0XHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0Jywgb25Ub3VjaERvd24sIGZhbHNlICk7XHJcblx0ICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoZW5kJywgb25Ub3VjaFVwLCBmYWxzZSApO1xyXG5cdCAgICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaGNhbmNlbCcsIG9uVG91Y2hDYW5jZWwsIGZhbHNlICk7XHJcblx0ICAgIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSApO1xyXG4gICAgXHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UgKTtcclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UgKTtcclxuICAgIFx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NTW91c2VTY3JvbGwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7IC8vIGZpcmVmb3hcclxuICAgIFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xyXG4gICAgXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgb25LZXlVcCwgZmFsc2UgKTtcclxuXHRcdFx0Vm94ZWxhcml1bS5jYW1lcmEubWF0cml4QXV0b1VwZGF0ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbmFibGUoKTtcclxuXHJcbn07XHJcblxyXG5USFJFRS5PcmJpdENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUgKTtcclxuIiwiXHJcblxyXG52YXIgYml0X21hc2tzID0gW107XHJcbmZvciggdmFyIG1hc2sgPSAwLCBuID0gMDsgbiA8PSAzMjsgbisrIClcclxue1xyXG4gICAgYml0X21hc2tzW25dID0gbWFzaztcclxuICAgIG1hc2sgPSAoIG1hc2sgPDwgMSApIHwgMTtcclxufVxyXG5cclxuXHJcblZveGVsYXJpdW0uQml0U3RyZWFtID0gZnVuY3Rpb24oIGJhc2VfYnVmZmVyIClcclxue1xyXG4gICAgdmFyIHN0cmVhbSA9XHJcblx0e1xyXG5cdFx0c3RvcmFnZSA6IGJhc2VfYnVmZmVyIHx8IG5ldyBBcnJheUJ1ZmZlcig1MTIgLyphdmFpbGFibGUqLyksXHJcblx0XHRhdmFpbGFibGUgOiAoIGJhc2VfYnVmZmVyICYmIGJhc2VfYnVmZmVyLmJ5dGVMZW5ndGggKSB8fCA1MTIsXHJcbiAgICAgICAgdXNlZCA6IDAsXHJcblx0XHR1c2VkX2JpdHMgOiAwLFxyXG5cclxuXHRcdGdldEJ5dGVzIDogZnVuY3Rpb24oICApIHtcclxuXHRcdFx0cmV0dXJuIHsgZGF0YSA6IHN0cmVhbS5zdG9yYWdlLCBieXRlc191c2VkIDogc3RyZWFtLnVzZWQgKyAxIH07XHJcblx0XHR9LFxyXG5cclxuXHRcdGV4cGFuZCA6IGZ1bmN0aW9uKClcclxuXHRcdHtcclxuXHRcdFx0dmFyIG5ld19zaXplID0gc3RyZWFtLmF2YWlsYWJsZSAqIDI7XHJcblx0XHRcdHZhciBuZXdfc3RvcmFnZSA9IG5ldyBBcnJheUJ1ZmZlcihuZXdfc2l6ZSk7XHJcbiAgICAgICAgICAgIGZvciggdmFyIG4gPSAwOyBuIDwgc3RyZWFtLmF2YWlsYWJsZTsgbisrIClcclxuICAgICAgICAgICAgICAgIG5ld19zdG9yYWdlW25dID0gc3RyZWFtLnN0b3JhZ2Vbbl07XHJcblx0XHRcdHN0cmVhbS5zdG9yYWdlID0gbmV3X3N0b3JhZ2U7XHJcblx0XHRcdHN0cmVhbS5hdmFpbGFibGUgPSBuZXdfc2l6ZTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHNlZWsgOiBmdW5jdGlvbiggcG9zaXRpb24gKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiggKHBvc2l0aW9uID4+IDMpID49IHN0cmVhbS5hdmFpbGFibGUgKVxyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJhdHRlbXB0IHRvIHNlZWsgYmV5b25kIGVuZCBvZiBkYXRhXCIgKTtcclxuXHJcblx0XHRcdHN0cmVhbS51c2VkID0gcG9zaXRpb24gPj4gMztcclxuXHRcdFx0c3RyZWFtLnVzZWRfYml0cyA9IHBvc2l0aW9uICYgMHg3O1xyXG5cdFx0fSxcclxuXHJcblx0XHR3cml0ZSA6IGZ1bmN0aW9uKCB2YWx1ZSwgYml0cyApXHJcblx0XHR7XHJcblx0XHRcdGlmKCBiaXRzID4gNjQgKVxyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJBdHRlbXB0IHRvIHdyaXRlIG1vcmUgYml0cyB0aGFuIGRhdGEgcGFzc2VkXCIgKTtcclxuXHRcdFx0dmFyIHRtcDtcclxuXHRcdFx0aWYoIHN0cmVhbS51c2VkID09IHN0cmVhbS5hdmFpbGFibGUgKSBFeHBhbmQoKTtcclxuXHRcdFx0dG1wID0gc3RyZWFtLnN0b3JhZ2Vbc3RyZWFtLnVzZWRdIHx8IDA7XHJcblx0XHRcdHRtcCB8PSAodmFsdWUgPDwgc3RyZWFtLnVzZWRfYml0cykmMHhGRjtcclxuXHRcdFx0c3RyZWFtLnN0b3JhZ2Vbc3RyZWFtLnVzZWRdID0gdG1wO1xyXG5cdFx0XHR2YXIgYml0X2NvdW50ZXIgPSA4IC0gc3RyZWFtLnVzZWRfYml0cztcclxuXHRcdFx0c3RyZWFtLnVzZWRfYml0cyArPSBiaXRzO1xyXG5cdFx0XHR3aGlsZSggc3RyZWFtLnVzZWRfYml0cyA+PSA4IClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHN0cmVhbS51c2VkX2JpdHMgLT0gODtcclxuXHRcdFx0XHRzdHJlYW0udXNlZCsrO1xyXG5cdFx0XHRcdGlmKCBzdHJlYW0udXNlZCA9PSBzdHJlYW0uYXZhaWxhYmxlICkgc3RyZWFtLmV4cGFuZCgpO1xyXG5cdFx0XHRcdGlmKCBzdHJlYW0udXNlZF9iaXRzID4gMCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dG1wID0gMDtcclxuXHRcdFx0XHRcdHN0cmVhbS5zdG9yYWdlW3N0cmVhbS51c2VkXSA9ICggdmFsdWUgPj4gKCBiaXRfY291bnRlciApICkgJiAweEZGO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblxyXG5cdFx0cmVhZCA6IGZ1bmN0aW9uKCBiaXRzIClcclxuXHRcdHtcclxuXHRcdFx0aWYoIGJpdHMgPiA2NCApXHJcblx0XHRcdFx0dGhyb3cgbmV3IGVycm9yKCBcIkF0dGVtcHQgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiBkYXRhIHBhc3NlZFwiICk7XHJcblx0XHRcdHZhciB0bXA7XHJcblx0XHRcdC8vaWYoIHN0cmVhbS51c2VkID09IHN0cmVhbS5hdmFpbGFibGUgKVxyXG5cdFx0XHQvL1x0dGhyb3cgbmV3IEVycm9yKCBcIk5vIG1vcmUgZGF0YVwiICk7XHJcblx0XHRcdHRtcCA9IHN0cmVhbS5zdG9yYWdlW3N0cmVhbS51c2VkXTtcclxuXHRcdFx0dmFyIHJlc3VsdCA9ICggdG1wID4+IHN0cmVhbS51c2VkX2JpdHMgKTtcclxuXHRcdFx0dmFyIGJpdF9jb3VudGVyID0gOCAtIHN0cmVhbS51c2VkX2JpdHM7XHJcblx0XHRcdHN0cmVhbS51c2VkX2JpdHMgKz0gYml0cztcclxuXHRcdFx0d2hpbGUoIHN0cmVhbS51c2VkX2JpdHMgPj0gOCApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzdHJlYW0udXNlZF9iaXRzIC09IDg7XHJcblx0XHRcdFx0c3RyZWFtLnVzZWQrKztcclxuXHRcdFx0XHRpZiggc3RyZWFtLnVzZWRfYml0cyA+IDAgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRtcCA9IHN0cmVhbS5zdG9yYWdlW3N0cmVhbS51c2VkXTtcclxuXHRcdFx0XHRcdHJlc3VsdCB8PSAoIHRtcCA8PCAoIGJpdF9jb3VudGVyICkgKSAmIDB4RkY7XHJcblx0XHRcdFx0XHRzdHJlYW0uYml0X2NvdW50ZXIgKz0gODtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmVzdWx0ICY9IGJpdF9tYXNrc1tiaXRzXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHRcdH1cclxuXHR9XHJcbiAgICByZXR1cm4gc3RyZWFtO1xyXG59XHJcblxyXG5cclxuXHJcblZveGVsYXJpdW0uQml0U3RyZWFtLkdldE1pbkJpdHNOZWVkZWRGb3JWYWx1ZSA9IGZ1bmN0aW9uKCB2YWx1ZSApXHJcbntcclxuICAgIHZhciBuO1xyXG4gICBmb3IoIG4gPSAxOyBuIDw9IDMyOyBuKysgKSB7XHJcbiAgICAgICBpZiggKCAoIHZhbHVlICYgYml0X21hc2tzW25dICkgXiB2YWx1ZSApID09IDAgKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgfVxyXG4gICByZXR1cm4gbjtcclxufVxyXG4iLCJcclxucmVxdWlyZSggXCIuL2NvbnN0YW50cy5qc1wiKTtcclxucmVxdWlyZSggXCIuL3JlYWN0b3IuanNcIiApO1xyXG5cclxuVm94ZWxhcml1bS5DbHVzdGVyID0gZnVuY3Rpb24oIHgsIHksIHosIHByb3BzICkge1xyXG4gICAgdmFyIGNsdXN0ZXIgPSB7XHJcbiAgICAgICAgbWVzaGVyIDogbnVsbCxcclxuICAgICAgICBXb3JraW5nRnVsbFNlY3RvciA6IG51bGwsXHJcbiAgICAgICAgV29ya2luZ0VtcHR5U2VjdG9yOiBudWxsLFxyXG5cclxuICAgICAgICBTZWN0b3JMaXN0IDogW10sXHJcblxyXG4gICAgICAgIHNlY3RvclNpemVYIDogeCB8fCAzMixcclxuICAgICAgICBzZWN0b3JTaXplWSA6IHkgfHwgMzIsXHJcbiAgICAgICAgc2VjdG9yU2l6ZVogOiB6IHx8IDMyLFxyXG4gICAgICAgIHNlY3RvclNpemUgOiAwLCAvLyBmaWxsZWQgaW4gbGF0ZXJcclxuXHJcbiAgICAgICAgdm94ZWxVbml0U2l6ZSA6IHByb3BzICYmIHByb3BzLnVuaXRTaXplIHx8IDIwLFxyXG5cclxuICAgICAgICBzZWN0b3JIYXNoU2l6ZV94IDogOCxcclxuICAgICAgICBzZWN0b3JIYXNoU2l6ZV95IDogOCxcclxuICAgICAgICBzZWN0b3JIYXNoU2l6ZV96IDogOCxcclxuICAgICAgICBUYWJsZVNpemUgOiAwLC8vU2VjdG9ySGFzaFNpemVfeCAqIFNlY3Rvckhhc2hTaXplX3kgKiBTZWN0b3JIYXNoU2l6ZV96LFxyXG4gICAgICAgIFNlY3RvclRhYmxlIDogbmV3IEFycmF5KCA4KjgqOCApLFxyXG5cclxuICAgICAgICBwaXZvdCA6IG5ldyBUSFJFRS5WZWN0b3IzKCksXHJcbiAgICAgICAgbG9jYXRpb24gOiBuZXcgVEhSRUUuTWF0cml4NCgpLFxyXG4gICAgICAgIFVuaXZlcnNlTnVtIDogMCxcclxuICAgICAgICBsb29rdXBUYWJsZXMgOiBudWxsXHJcbiAgICAgICAgLGNyZWF0ZVNlY3RvciA6IGZ1bmN0aW9uKCB4LCB5LCB6ICkge1xyXG4gICAgICAgICAgICB2YXIgc2VjdG9yID0gVm94ZWxhcml1bS5TZWN0b3IoIHRoaXMsIHgsIHksIHogKTtcclxuICAgICAgICAgICAgdGhpcy5TZWN0b3JMaXN0LnB1c2goIHNlY3RvciApO1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhc2hPZnM7XHJcbiAgICAgICAgICAgIHNlY3Rvci5uZXh0ID0gdGhpcy5TZWN0b3JUYWJsZVsgaGFzaE9mcyA9ICggeCAlIHRoaXMuc2VjdG9ySGFzaFNpemVfeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKCB5ICUgdGhpcy5zZWN0b3JIYXNoU2l6ZV95ICkgKiAoIHRoaXMuc2VjdG9ySGFzaFNpemVfeCApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoIHogJSB0aGlzLnNlY3Rvckhhc2hTaXplX3ogKSAqICh0aGlzLnNlY3Rvckhhc2hTaXplX3kqdGhpcy5zZWN0b3JIYXNoU2l6ZV94KSApIF07XHJcbiAgICAgICAgICAgIGlmKCBzZWN0b3IubmV4dCApXHJcbiAgICAgICAgICAgICAgICBzZWN0b3IubmV4dC5wcmVkID0gc2VjdG9yO1xyXG4gICAgICAgICAgICB0aGlzLlNlY3RvclRhYmxlW2hhc2hPZnNdID0gc2VjdG9yO1xyXG5cclxuXHRcdFx0dmFyIG47XHJcblx0XHRcdGZvciggbiA9IDA7IG4gPCA2OyBuKysgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIG5lYXJfc2VjID0gdGhpcy5nZXRTZWN0b3IoIHggKyBWb3hlbGFyaXVtLk5vcm1hbEJhc2VQb3NpdGlvbltuXS54XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgLCB5ICsgVm94ZWxhcml1bS5Ob3JtYWxCYXNlUG9zaXRpb25bbl0ueVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICwgeiArIFZveGVsYXJpdW0uTm9ybWFsQmFzZVBvc2l0aW9uW25dLnpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHRydWUgKTtcclxuXHRcdFx0XHRpZiggbmVhcl9zZWMgIT0gbnVsbCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0c2VjdG9yLm5lYXJfc2VjdG9yc1tuXSA9IG5lYXJfc2VjO1xyXG5cdFx0XHRcdFx0bmVhcl9zZWMubmVhcl9zZWN0b3JzW24gXiAxXSA9IHNlY3RvcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlY3RvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICxnZXRWb3hlbFJlZiA6IGZ1bmN0aW9uKCBpczNkU3BhY2VDb29yZHMsIHgsIHksIHogKSB7XHJcbiAgICAgICAgICAgIGlmKCBpczNkU3BhY2VDb29yZHMgKSB7XHJcbiAgICAgICAgICAgICAgeCA9IE1hdGguZmxvb3IoIHggLyB0aGlzLnZveGVsVW5pdFNpemUgKTtcclxuICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vciggeSAvIHRoaXMudm94ZWxVbml0U2l6ZSApO1xyXG4gICAgICAgICAgICAgIHogPSBNYXRoLmZsb29yKCB6IC8gdGhpcy52b3hlbFVuaXRTaXplICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHN4ID0gTWF0aC5mbG9vciggeCAvIHRoaXMuc2VjdG9yU2l6ZVggKTtcclxuICAgICAgICAgICAgdmFyIHN5ID0gTWF0aC5mbG9vciggeSAvIHRoaXMuc2VjdG9yU2l6ZVkgKTtcclxuICAgICAgICAgICAgdmFyIHN6ID0gTWF0aC5mbG9vciggeiAvIHRoaXMuc2VjdG9yU2l6ZVogKTtcclxuICAgICAgICAgICAgLy9pZiggIWlzM2RTcGFjZUNvb3Jkcykge1xyXG4gICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIGBHZXQgJHtzeH0gJHtzeX0gJHtzen1gKVxyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgdmFyIHNlY3RvciA9IGNsdXN0ZXIuZ2V0U2VjdG9yKCBzeCwgc3ksIHN6LCB0cnVlICk7XHJcbiAgICAgICAgICAgIGlmKCBzZWN0b3IgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VjdG9yLmdldFZveGVsUmVmKCB4ICUgdGhpcy5zZWN0b3JTaXplWCwgeSAlIHRoaXMuc2VjdG9yU2l6ZVksIHogJSB0aGlzLnNlY3RvclNpemVaKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHBhc3Mgd29ybGQgY29vcmRpbmF0ZXMsIHNpbmNlIHRoZXJlJ3Mgbm8gc2VjdG9yIHRvIGdpdmUgYSBiYXNlIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVm94ZWxhcml1bS5Wb3hlbFJlZiggY2x1c3RlciwgbnVsbCwgeCwgeSwgeiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAsIHNldEN1YmUgOiBmdW5jdGlvbiggeCwgeSwgeiwgY3ViZSApe1xyXG4gICAgICAgICAgICB2YXIgc3ggPSB4IC8gdGhpcy5zZWN0b3JTaXplWDtcclxuICAgICAgICAgICAgdmFyIHN5ID0geSAvIHRoaXMuc2VjdG9yU2l6ZVk7XHJcbiAgICAgICAgICAgIHZhciBzeiA9IHogLyB0aGlzLnNlY3RvclNpemVaO1xyXG4gICAgICAgICAgICB2YXIgc3VieCA9ICggc3ggJSAxICkgKiB0aGlzLnNlY3RvclNpemVYO1xyXG4gICAgICAgICAgICB2YXIgc3VieSA9ICggc3kgJSAxICkgKiB0aGlzLnNlY3RvclNpemVZO1xyXG4gICAgICAgICAgICB2YXIgc3VieiA9ICggc3ogJSAxICkgKiB0aGlzLnNlY3RvclNpemVaO1xyXG4gICAgICAgICAgICB2YXIgd3ggPSBNYXRoLmZsb29yKCBzeCApO1xyXG4gICAgICAgICAgICB2YXIgd3kgPSBNYXRoLmZsb29yKCBzeSApO1xyXG4gICAgICAgICAgICB2YXIgd3ogPSBNYXRoLmZsb29yKCBzeiApO1xyXG4gICAgICAgICAgICB2YXIgc2VjdG9yID0gdGhpcy5nZXRTZWN0b3IoIHd4LCB3eSwgd3ogKTtcclxuXHJcbiAgICAgICAgICAgIHNlY3Rvci5zZXRDdWJlKCBzdWJ4LCBzdWJ5LCBzdWJ6LCBjdWJlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwgZ2V0U2VjdG9yIDogZnVuY3Rpb24oIHgsIHksIHosIGRvX25vdF9jcmVhdGUgKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXNlO1xyXG4gICAgICAgICAgICBiYXNlID0gdGhpcy5TZWN0b3JUYWJsZVsgeCAlIHRoaXMuc2VjdG9ySGFzaFNpemVfeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKCB5ICUgdGhpcy5zZWN0b3JIYXNoU2l6ZV95ICkgKiAoIHRoaXMuc2VjdG9ySGFzaFNpemVfeCApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoIHogJSB0aGlzLnNlY3Rvckhhc2hTaXplX3ogKSAqICggdGhpcy5zZWN0b3JIYXNoU2l6ZV95KnRoaXMuc2VjdG9ySGFzaFNpemVfeCkgXTtcclxuICAgICAgICAgICAgd2hpbGUoIGJhc2VcclxuICAgICAgICAgICAgICAgICYmICggKCBiYXNlLnBvcy54ICE9PSB4IClcclxuICAgICAgICAgICAgICAgICAgICB8fCAoIGJhc2UucG9zLnkgIT09IHkgKVxyXG4gICAgICAgICAgICAgICAgICAgIHx8ICggYmFzZS5wb3MueiAhPT0geiApICkgKVxyXG4gICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UubmV4dDtcclxuICAgICAgICAgICAgaWYoICFkb19ub3RfY3JlYXRlIClcclxuICAgICAgICAgICAgICAgIGlmKCAhYmFzZSApXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuY3JlYXRlU2VjdG9yKCB4LCB5LCB6IClcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwgZ2V0R2VvbWV0cnlCdWZmZXIgOiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgY2x1c3Rlci5UYWJsZVNpemUgPSBjbHVzdGVyLnNlY3Rvckhhc2hTaXplX3ggKiBjbHVzdGVyLnNlY3Rvckhhc2hTaXplX3kgKiBjbHVzdGVyLnNlY3Rvckhhc2hTaXplX3o7XHJcbiAgICBjbHVzdGVyLnNlY3RvclNpemUgPSBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVo7XHJcbiAgICBjbHVzdGVyLmxvb2t1cFRhYmxlcyA9IEluaXRTdGF0aWNzKCBjbHVzdGVyLnNlY3RvclNpemVYLCBjbHVzdGVyLnNlY3RvclNpemVZLCBjbHVzdGVyLnNlY3RvclNpemVaIClcclxuXHJcbiAgICBjbHVzdGVyLlNlY3RvclRhYmxlID0gbmV3IEFycmF5KCBjbHVzdGVyLlRhYmxlU2l6ZSApO1xyXG4gICAgLy8gbWF5YmUgcmVhY3RvciBpcyB1bml2ZXJzYWw/XHJcbiAgICBjbHVzdGVyLnJlYWN0b3IgPSBWb3hlbGFyaXVtLlJlYWN0b3IoIGNsdXN0ZXIgKTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyggY2x1c3RlclxyXG4gICAgICAgICwgeyAnc2VjdG9yU2l6ZVgnIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAnc2VjdG9yU2l6ZVknIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAnc2VjdG9yU2l6ZVonIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAnc2VjdG9yU2l6ZScgOiB7d3JpdGVhYmxlOmZhbHNlfVxyXG4gICAgICAgICAgICAsICdzZWN0b3JIYXNoU2l6ZV94JyA6IHt3cml0ZWFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgICwgJ3NlY3Rvckhhc2hTaXplX3knIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAnc2VjdG9ySGFzaFNpemVfeicgOiB7d3JpdGVhYmxlOmZhbHNlfVxyXG4gICAgICAgICAgICAsICdUYWJsZVNpemUnIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAndm94ZWxVbml0U2l6ZScgOiB7d3JpdGVhYmxlOmZhbHNlfVxyXG4gICAgICAgICAgICAsICdsb29rdXBUYWJsZXMnIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAnU2VjdG9yVGFibGUnIDoge3dyaXRlYWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgLCAncmVhY3RvcicgOiB7d3JpdGVhYmxlOmZhbHNlfVxyXG4gICAgICAgIH0gKVxyXG5cclxuXHJcbiAgICBjbHVzdGVyLldvcmtpbmdGdWxsU2VjdG9yID0gVm94ZWxhcml1bS5TZWN0b3IoIGNsdXN0ZXIgKTtcclxuICAgIGNsdXN0ZXIuV29ya2luZ0Z1bGxTZWN0b3IuUG9zX3kgPSAtMTtcclxuICAgIGNsdXN0ZXIuV29ya2luZ0Z1bGxTZWN0b3IuTWFrZVNlY3RvciggVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbMV0gKTtcclxuICAgIGNsdXN0ZXIuV29ya2luZ0VtcHR5U2VjdG9yPSBWb3hlbGFyaXVtLlNlY3RvciggY2x1c3RlciApO1xyXG4gICAgY2x1c3Rlci5Xb3JraW5nRW1wdHlTZWN0b3IuUG9zX3kgPSAwO1xyXG4gICAgY2x1c3Rlci5Xb3JraW5nRW1wdHlTZWN0b3IuTWFrZVNlY3RvciggVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbMF0gKTtcclxuXHJcblxyXG4gICAgcmV0dXJuIGNsdXN0ZXI7XHJcbn1cclxuXHJcbnZhciBTZWN0b3JUYWJsZXMgPSBbXTsgLy8gY2FjaGUgb2YgbG9va3VwIHRhYmxlc1xyXG5mdW5jdGlvbiBJbml0U3RhdGljcyggeCx5LHopXHJcblx0XHR7XHJcblx0XHRcdHZhciB0YWJsZXMgPSBTZWN0b3JUYWJsZXMuZmluZCggKHRhYik9PnsgcmV0dXJuKCB0YWIueD09eCAmJiB0YWIueT09eSAmJiB0YWIueiA9PSB6ICkgfSk7XHJcblx0XHRcdGlmKCAhdGFibGVzIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRhYmxlcyA9IHtcclxuXHRcdFx0XHRcdHg6IHgsXHJcblx0XHRcdFx0XHR5OiB5LFxyXG5cdFx0XHRcdFx0ejogeixcclxuXHRcdFx0XHRcdHRhYmxlWCA6IG5ldyBBcnJheSggeCsyICksXHJcblx0XHRcdFx0XHR0YWJsZVkgOiBuZXcgQXJyYXkoIHkrMiApLFxyXG5cdFx0XHRcdFx0dGFibGVaIDogbmV3IEFycmF5KCB6KzIgKSxcclxuXHRcdFx0XHRcdG9mVGFibGVYIDogbmV3IEFycmF5KCB4KzIgKSxcclxuXHRcdFx0XHRcdG9mVGFibGVZIDogbmV3IEFycmF5KCB5KzIgKSxcclxuXHRcdFx0XHRcdG9mVGFibGVaIDogbmV3IEFycmF5KCB6KzIgKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL3RhYmxlcy50YWJsZVguZm9yRWFjaCggKGVsZW0pPT57ZWxlbT0wfSlcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCBcInRhYmxlWCBpbml0IGlzIFwiLCB0YWJsZXMudGFibGVYKVxyXG5cdFx0XHRcdHRhYmxlcy50YWJsZVhbMF0gPSAxO1xyXG5cdFx0XHRcdHRhYmxlcy50YWJsZVhbeCArIDFdID0gMjtcclxuXHRcdFx0XHR0YWJsZXMudGFibGVaWzBdID0gMztcclxuXHRcdFx0XHR0YWJsZXMudGFibGVaW3kgKyAxXSA9IDY7XHJcblx0XHRcdFx0dGFibGVzLnRhYmxlWVswXSA9IDk7XHJcblx0XHRcdFx0dGFibGVzLnRhYmxlWVt6ICsgMV0gPSAxODtcclxuICAgICAgICAgICAgICAgIG4gPSAwO1xyXG4gICAgICAgICAgICAgICAgdGFibGVzLm9mVGFibGVYW25dID0gKCAoICggbiA9PSAwICkgPyAoIHggLSAxICkgOiAoIG4gPT0gKCB4ICsgMSApICkgPyAwIDogKCBuIC0gMSApICkgKiB5ICk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZXMub2ZUYWJsZVlbbl0gPSAoICggKCBuID09IDAgKSA/ICggeSAtIDEgKSA6ICggbiA9PSAoIHkgKyAxICkgKSA/IDAgOiAoIG4gLSAxICkgKSApO1xyXG4gICAgICAgICAgICAgICAgdGFibGVzLm9mVGFibGVaW25dID0gKCAoICggbiA9PSAwICkgPyAoIHogLSAxICkgOiAoIG4gPT0gKCB6ICsgMSApICkgPyAwIDogKCBuIC0gMSApICkgKiB5ICogeiApO1xyXG4gICAgICAgICAgICAgICAgbiA9IHgrMTtcclxuICAgICAgICAgICAgICAgIHRhYmxlcy5vZlRhYmxlWFtuXSA9ICggKCAoIG4gPT0gMCApID8gKCB4IC0gMSApIDogKCBuID09ICggeCArIDEgKSApID8gMCA6ICggbiAtIDEgKSApICogeSApO1xyXG4gICAgICAgICAgICAgICAgdGFibGVzLm9mVGFibGVZW25dID0gKCAoICggbiA9PSAwICkgPyAoIHkgLSAxICkgOiAoIG4gPT0gKCB5ICsgMSApICkgPyAwIDogKCBuIC0gMSApICkgKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlcy5vZlRhYmxlWltuXSA9ICggKCAoIG4gPT0gMCApID8gKCB6IC0gMSApIDogKCBuID09ICggeiArIDEgKSApID8gMCA6ICggbiAtIDEgKSApICogeSAqIHogKTtcclxuICAgICAgICBmb3IoICBuID0gMTsgbiA8IHggKyAxOyBuKysgKSB7XHJcblx0XHRcdFx0XHR0YWJsZXMub2ZUYWJsZVhbbl0gPSAoICggKCBuID09IDAgKSA/ICggeCAtIDEgKSA6ICggbiA9PSAoIHggKyAxICkgKSA/IDAgOiAoIG4gLSAxICkgKSAqIHkgKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZXMudGFibGVYW25dID0gMDtcclxuICAgICAgICB9XHJcblx0XHRcdFx0Zm9yKCB2YXIgbiA9IDE7IG4gPCB5ICsgMTsgbisrICl7XHJcblx0XHRcdFx0XHR0YWJsZXMub2ZUYWJsZVlbbl0gPSAoICggKCBuID09IDAgKSA/ICggeSAtIDEgKSA6ICggbiA9PSAoIHkgKyAxICkgKSA/IDAgOiAoIG4gLSAxICkgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlcy50YWJsZVlbbl0gPSAwO1xyXG4gICAgICAgIH1cclxuXHRcdFx0XHRmb3IoICBuID0gMTsgbiA8IHogKyAxOyBuKysgKSB7XHJcblx0XHRcdFx0XHR0YWJsZXMub2ZUYWJsZVpbbl0gPSAoICggKCBuID09IDAgKSA/ICggeiAtIDEgKSA6ICggbiA9PSAoIHogKyAxICkgKSA/IDAgOiAoIG4gLSAxICkgKSAqIHkgKiB6ICk7XHJcbiAgICAgICAgICB0YWJsZXMudGFibGVaW25dID0gMDtcclxuICAgICAgICB9XHJcblx0XHRcdFx0U2VjdG9yVGFibGVzLnB1c2goIHRhYmxlcyApO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCB0YWJsZXNcclxuICAgICAgICAgICAgICAgICwgeyBcInhcIiA6IHsgd3JpdGFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAsICBcInlcIiA6IHsgd3JpdGFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAsICBcInpcIiA6IHsgd3JpdGFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAsICBcInRhYmxlWFwiIDogeyB3cml0YWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgICAgICwgIFwidGFibGVZXCIgOiB7IHdyaXRhYmxlOmZhbHNlfVxyXG4gICAgICAgICAgICAgICAgLCAgXCJ0YWJsZVpcIiA6IHsgd3JpdGFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAsICBcIm9mVGFibGVYXCIgOiB7IHdyaXRhYmxlOmZhbHNlfVxyXG4gICAgICAgICAgICAgICAgLCAgXCJvZlRhYmxlWVwiIDogeyB3cml0YWJsZTpmYWxzZX1cclxuICAgICAgICAgICAgICAgICwgIFwib2ZUYWJsZVpcIiA6IHsgd3JpdGFibGU6ZmFsc2V9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBPYmplY3QuZnJlZXplKCB0YWJsZXMudGFibGVYICk7XHJcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUoIHRhYmxlcy50YWJsZVkgKTtcclxuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSggdGFibGVzLnRhYmxlWiApO1xyXG4gICAgICAgICAgICBPYmplY3QuZnJlZXplKCB0YWJsZXMub2ZUYWJsZVggKTtcclxuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSggdGFibGVzLm9mVGFibGVZICk7XHJcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUoIHRhYmxlcy5vZlRhYmxlWiApO1xyXG5cdFx0XHRyZXR1cm4gdGFibGVzO1xyXG5cdFx0fVxyXG4iLCJcclxuVm94ZWxhcml1bS5EID0gZnVuY3Rpb24oIHZhbG5hbWUsIHZhbHVlICkge1xyXG4gICAgaWYoIHR5cGVvZiB2YWxuYW1lID09IFwib2JqZWN0XCIgKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXModmFsbmFtZSkuZm9yRWFjaCggKGtleSk9PntcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZveGVsYXJpdW0sIGtleSwgeyB2YWx1ZTp2YWxuYW1lW2tleV0sIHdyaXRhYmxlOiBmYWxzZSB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2VcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVm94ZWxhcml1bSwgdmFsbmFtZSwgeyB3cml0YWJsZTogZmFsc2UgfSlcclxufVxyXG5Wb3hlbGFyaXVtLkVudW0gPSBmdW5jdGlvbiggdmFsbmFtZSwgdmFsdWUgKSB7XHJcbiAgICBpZiggdHlwZW9mIHZhbG5hbWUgPT0gXCJvYmplY3RcIiApIHtcclxuICAgICAgICBPYmplY3Qua2V5cyh2YWxuYW1lKS5mb3JFYWNoKCAoa2V5KT0+e1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVm94ZWxhcml1bSwga2V5LCB7IHZhbHVlOnZhbG5hbWVba2V5XSwgd3JpdGFibGU6IGZhbHNlIH0pXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbG5hbWVba2V5XSkuZm9yRWFjaCggKGV2YWx1ZSk9PntcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWb3hlbGFyaXVtW2tleV0sIGV2YWx1ZSwgeyB2YWx1ZTp2YWxuYW1lW2tleV1bZXZhbHVlXSwgd3JpdGFibGU6IGZhbHNlIH0pXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2VcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVm94ZWxhcml1bSwgdmFsbmFtZSwgeyB3cml0YWJsZTogZmFsc2UgfSlcclxufVxyXG5cclxuXHJcblZveGVsYXJpdW0uRCgge1xyXG4gICAgICAgIFpWT1hFTF9EUkFXSU5GT19WT0lEIDogMCxcclxuLy9wdWJsaWMgY29uc3QgaW50IFpWT1hFTF9EUkFXSU5GT19OT1RWT0lEID0gMTtcclxuICAgIFpWT1hFTF9EUkFXSU5GT19EUkFXRlVMTFZPWEVMT1BBQ0lUWSA6IDEsXHJcbiAgWlZPWEVMX0RSQVdJTkZPX0RSQVdUUkFOU1BBUkVOVFJFTkRFUklORyA6IDIsXHJcbiAgWlZPWEVMX0RSQVdJTkZPX1NQRUNJQUxSRU5ERVJJTkcgOiA4LFxyXG4gIFpWT1hFTF9EUkFXSU5GT19TSEFERVIgOiAxNixcclxuICBaVk9YRUxfRFJBV0lORk9fREVDQUwgOiAzMiwgIC8vIGltYWdlIGlzIHVzZWQgb3ZlciBzaGFkZXIgb3V0cHV0XHJcbn0pXHJcblZveGVsYXJpdW0uRCgge1xyXG4gICAgWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTIDogKCAvKlpWT1hFTF9EUkFXSU5GT19OT1RWT0lEIHwqLyBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19EUkFXRlVMTFZPWEVMT1BBQ0lUWSB8IFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0RSQVdUUkFOU1BBUkVOVFJFTkRFUklORyApXHJcbn0pO1xyXG5cclxuXHJcblZveGVsYXJpdW0uRW51bSgge1xyXG4gICAgRkFDRURSQVdfT3BlcmF0aW9ucyA6IHtcclxuXHRcdFx0TEVGVCA6IDB4MDAwMDFcclxuXHRcdCwgUklHSFQgOiAweDAwMDAyXHJcblx0XHQsIEFIRUFEIDogMHgwMDAwNFxyXG5cdFx0LCBCRUhJTkQgOiAweDAwMDA4XHJcblx0XHQsIEFCT1ZFIDogMHgwMDAxMFxyXG5cdFx0LCBCRUxPVyA6IDB4MDAwMjBcclxuXHRcdCwgTEVGVF9IQVNfQUJPVkUgOiAweDAwMDAwNDAwXHJcblx0XHQsIExFRlRfSEFTX0JFTE9XIDogMHgwMDAwMDgwMFxyXG5cdFx0LCBMRUZUX0hBU19BSEVBRCA6IDB4MDAwMDEwMDBcclxuXHRcdCwgTEVGVF9IQVNfQkVISU5EIDogMHgwMDAwMjAwMFxyXG5cdFx0LCBSSUdIVF9IQVNfQUJPVkUgOiAweDAwMDA0MDAwXHJcblx0XHQsIFJJR0hUX0hBU19CRUxPVyA6IDB4MDAwMDgwMDBcclxuXHRcdCwgUklHSFRfSEFTX0FIRUFEIDogMHgwMDAxMDAwMFxyXG5cdFx0LCBSSUdIVF9IQVNfQkVISU5EIDogMHgwMDAyMDAwMFxyXG5cdFx0LCBBQk9WRV9IQVNfTEVGVCA6IDB4MDAwMDA0MDAvL0xFRlRfSEFTX0FCT1ZFXHJcblx0XHQsIEFCT1ZFX0hBU19SSUdIVCA6IDB4MDAwMDQwMDAvL1JJR0hUX0hBU19BQk9WRVxyXG5cdFx0LCBBQk9WRV9IQVNfQUhFQUQgOiAweDAwMDQwMDAwXHJcblx0XHQsIEFCT1ZFX0hBU19CRUhJTkQgOiAweDAwMDgwMDAwXHJcblx0XHQsIEJFTE9XX0hBU19MRUZUIDogMHgwMDAwMDgwMC8vTEVGVF9IQVNfQkVMT1dcclxuXHRcdCwgQkVMT1dfSEFTX1JJR0hUIDogMHgwMDAwODAwMC8vUklHSFRfSEFTX0JFTE9XXHJcblx0XHQsIEJFTE9XX0hBU19BSEVBRCA6IDB4MDAxMDAwMDBcclxuXHRcdCwgQkVMT1dfSEFTX0JFSElORCA6IDB4MDAyMDAwMDBcclxuXHRcdCwgQUhFQURfSEFTX0xFRlQgOiAweDAwMDAxMDAwLy9MRUZUX0hBU19BSEVBRFxyXG5cdFx0LCBBSEVBRF9IQVNfUklHSFQgOiAweDAwMTAwMDAwLy9SSUdIVF9IQVNfQUhFQURcclxuXHRcdCwgQUhFQURfSEFTX0FCT1ZFIDogMHgwMDA0MDAwMC8vQUJPVkVfSEFTX0FIRUFEXHJcblx0XHQsIEFIRUFEX0hBU19CRUxPVyA6IDB4MDAxMDAwMDAvL0JFTE9XX0hBU19BSEVBRFxyXG5cdFx0LCBCRUhJTkRfSEFTX0xFRlQgOiAweDAwMDAyMDAwLy9MRUZUX0hBU19CRUhJTkRcclxuXHRcdCwgQkVISU5EX0hBU19SSUdIVCA6IDB4MDAwMjAwMDAvL1JJR0hUX0hBU19CRUhJTkRcclxuXHRcdCwgQkVISU5EX0hBU19BQk9WRSA6IDB4MDAwODAwMDAvL0FCT1ZFX0hBU19CRUhJTkRcclxuXHRcdCwgQkVISU5EX0hBU19CRUxPVyA6IDB4MDAyMDAwMDAvL0JFTE9XX0hBU19CRUhJTkRcclxuXHRcdCwgQUxMIDogKCAxfDJ8NHw4fDE2fDMyIC8qIExFRlQgfCBSSUdIVCB8IEFIRUFEIHwgQkVISU5EIHwgQUJPVkUgfCBCRUxPVyAqLyApXHJcblx0XHQsIE5PTkUgOiAweDAwMDAwXHJcblx0XHQsIEZMQU5LIDogKCAxfDJ8NHw4IC8qIExFRlQgfCBSSUdIVCB8IEFIRUFEIHwgQkVISU5EICovIClcclxuXHRcdCwgVUQgOiAoIDE2fDMyIC8qQUJPVkUgfCBCRUxPVyovIClcclxuXHRcdCwgQUxMX0JJVFMgOiAweDNGRkZGRlxyXG4gICAgfX0pO1xyXG5cclxuXHJcblZveGVsYXJpdW0uRW51bSggeyBSZWxhdGl2ZVZveGVsT3JkcyA6IHtcclxuXHRJTkNFTlRFUiA6MFxyXG4gICAsIExFRlQgICAgIDoxXHJcbiAgICwgUklHSFQgOjJcclxuICAgLCBJTkZST05UIDozXHJcbiAgICwgQUhFQUQgOiAzIC8vUmVsYXRpdmVWb3hlbE9yZHMuSU5GUk9OVFxyXG4gICAsIEJFSElORCAgOjRcclxuICAgLCBBQk9WRSAgIDo1XHJcbiAgICwgQkVMT1cgICA6NlxyXG5cclxuICAgLCBMRUZUX0FCT1ZFIDo3XHJcbiAgICwgQUJPVkVfTEVGVCA6IDcvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVcclxuICAgLCBSSUdIVF9BQk9WRSA6OFxyXG4gICAsIEFCT1ZFX1JJR0hUIDogOC8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVcclxuXHJcbiAgICwgSU5GUk9OVF9BQk9WRSA6OVxyXG4gICAsIEFIRUFEX0FCT1ZFIDogOS8vIFJlbGF0aXZlVm94ZWxPcmRzLklORlJPTlRfQUJPVkVcclxuICAgLCBBQk9WRV9BSEVBRCA6IDkvL1JlbGF0aXZlVm94ZWxPcmRzLklORlJPTlRfQUJPVkVcclxuXHJcbiAgICwgQkVISU5EX0FCT1ZFICA6MTBcclxuICAgLCBBQk9WRV9CRUhJTkQgOiAxMC8vUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0FCT1ZFXHJcblxyXG4gICAsIExFRlRfQUhFQUQgICA6MTFcclxuICAgLCBBSEVBRF9MRUZUIDogMTEvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURcclxuXHJcbiAgICwgUklHSFRfQUhFQUQgICA6MTJcclxuICAgLCBBSEVBRF9SSUdIVCA6IDEyLy9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BSEVBRFxyXG5cclxuICAgLCBMRUZUX0JFTE9XIDoxM1xyXG4gICAsIEJFTE9XX0xFRlQgOiAxMy8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV1xyXG4gICAsIFJJR0hUX0JFTE9XIDoxNFxyXG4gICAsIEJFTE9XX1JJR0hUIDogMTQvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXHJcbiAgICwgSU5GUk9OVF9CRUxPVyA6MTVcclxuICAgLCBBSEVBRF9CRUxPVyA6IDE1Ly9SZWxhdGl2ZVZveGVsT3Jkcy5JTkZST05UX0JFTE9XXHJcbiAgICwgQkVMT1dfQUhFQUQgOiAxNS8vUmVsYXRpdmVWb3hlbE9yZHMuSU5GUk9OVF9CRUxPV1xyXG4gICAsIEJFSElORF9CRUxPVyAgOjE2XHJcbiAgICwgQkVMT1dfQkVISU5EIDogMTYvL1JlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9CRUxPV1xyXG5cclxuICAgLCBMRUZUX0JFSElORCAgIDoxN1xyXG4gICAsIEJFSElORF9MRUZUIDogMTcvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVISU5EXHJcbiAgICwgQkVISU5EX1JJR0hUICAgOjE4XHJcbiAgICwgUklHSFRfQkVISU5EIDogMTgvL1JlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVFxyXG5cclxuXHJcbiAgICwgTEVGVF9BSEVBRF9BQk9WRSAgIDogMTlcclxuICAgLCBSSUdIVF9BSEVBRF9BQk9WRSAgOiAyMFxyXG4gICAsIExFRlRfQUhFQURfQkVMT1cgICA6IDIxXHJcbiAgICwgUklHSFRfQUhFQURfQkVMT1cgIDogMjJcclxuICAgLCBMRUZUX0JFSElORF9BQk9WRSAgOiAyM1xyXG4gICAsIFJJR0hUX0JFSElORF9BQk9WRSA6IDI0XHJcbiAgICwgTEVGVF9CRUhJTkRfQkVMT1cgIDogMjVcclxuICAgLCBSSUdIVF9CRUhJTkRfQkVMT1cgOiAyNlxyXG5cclxuICAgLCBMRUZUX0FCT1ZFX0FIRUFEIDogMTkvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQUJPVkUgICAvLzogMTlcclxuICAgLCBSSUdIVF9BQk9WRV9BSEVBRCA6IDIwLy9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BSEVBRF9BQk9WRSAgLy8gOiAyMFxyXG4gICAsIExFRlRfQkVMT1dfQUhFQUQgOiAyMS8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BSEVBRF9CRUxPVyAgICAgLy86IDIxXHJcbiAgICwgUklHSFRfQkVMT1dfQUhFQUQgOiAyMi8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQkVMT1cgICAvLzogMjJcclxuICAgLCBMRUZUX0FCT1ZFX0JFSElORCA6IDIzLy9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9BQk9WRSAgLy86IDIzXHJcbiAgICwgUklHSFRfQUJPVkVfQkVISU5EIDogMjQvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9BQk9WRS8vIDogMjRcclxuICAgLCBMRUZUX0JFTE9XX0JFSElORCA6IDI1Ly9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9CRUxPVyAgLy86IDI1XHJcbiAgICwgUklHSFRfQkVMT1dfQkVISU5EIDogMjYvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9CRUxPVy8vIDogMjZcclxuXHJcbiAgICwgQUJPVkVfQUhFQURfTEVGVCA6IDE5Ly9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEX0FCT1ZFICAgLy86IDE5XHJcbiAgICwgQUJPVkVfQUhFQURfUklHSFQgOiAyMC8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQUJPVkUgIC8vIDogMjBcclxuICAgLCBCRUxPV19BSEVBRF9MRUZUIDogMjEvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQkVMT1cgICAgLy8gOiAyMVxyXG4gICAsIEJFTE9XX0FIRUFEX1JJR0hUIDogMjIvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FIRUFEX0JFTE9XICAvLyA6IDIyXHJcbiAgICwgQUJPVkVfQkVISU5EX0xFRlQgOiAyMy8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQUJPVkUgIC8vOiAyM1xyXG4gICAsIEFCT1ZFX0JFSElORF9SSUdIVCA6IDI0Ly9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkRfQUJPVkUgLy86IDI0XHJcbiAgICwgQkVMT1dfQkVISU5EX0xFRlQgOiAyNS8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQkVMT1cgIC8vOiAyNVxyXG4gICAsIEJFTE9XX0JFSElORF9SSUdIVCA6IDI2Ly9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkRfQkVMT1cvLyA6IDI2XHJcblxyXG4gICAsIEFIRUFEX0FCT1ZFX0xFRlQgOiAxOS8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BSEVBRF9BQk9WRSAgIC8vOiAxOVxyXG4gICAsIEFIRUFEX0FCT1ZFX1JJR0hUIDogMjAvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FIRUFEX0FCT1ZFIC8vICA6IDIwXHJcbiAgICwgQUhFQURfQkVMT1dfTEVGVCA6IDIxLy9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEX0JFTE9XICAgLy8gIDogMjFcclxuICAgLCBCRUhJTkRfQUJPVkVfTEVGVCA6IDIyLy9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9BQk9WRSAvLyA6IDIzXHJcbiAgICwgQUhFQURfQkVMT1dfUklHSFQgOiAyMy8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQkVMT1cgLy8gIDogMjJcclxuICAgLCBCRUhJTkRfQUJPVkVfUklHSFQgOiAyNC8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVISU5EX0FCT1ZFIC8vOiAyNFxyXG4gICAsIEJFSElORF9CRUxPV19MRUZUIDogMjUvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVISU5EX0JFTE9XICAvLzogMjVcclxuICAgLCBCRUhJTkRfQkVMT1dfUklHSFQgOiAyNi8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVISU5EX0JFTE9XIC8vOiAyNlxyXG5cclxuICAgLCBBQk9WRV9MRUZUX0FIRUFEIDogMTkvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQUJPVkUgIC8vIDogMTlcclxuICAgLCBBQk9WRV9SSUdIVF9BSEVBRCA6IDIwLy9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BSEVBRF9BQk9WRSAvLyAgOiAyMFxyXG4gICAsIEJFTE9XX0xFRlRfQUhFQUQgOiAyMS8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BSEVBRF9CRUxPVyAgICAvLyA6IDIxXHJcbiAgICwgQkVMT1dfUklHSFRfQUhFQUQgOiAyMi8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQkVMT1cgIC8vIDogMjJcclxuICAgLCBBQk9WRV9MRUZUX0JFSElORCA6IDIzLy9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9BQk9WRSAgLy86IDIzXHJcbiAgICwgQUJPVkVfUklHSFRfQkVISU5EIDogMjQvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9BQk9WRSAvLzogMjRcclxuICAgLCBCRUxPV19MRUZUX0JFSElORCA6IDI1Ly9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9CRUxPVyAgLy86IDI1XHJcbiAgICwgQkVMT1dfUklHSFRfQkVISU5EIDogMjYvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9CRUxPVyAvLzogMjZcclxuXHJcbiAgICwgQUhFQURfTEVGVF9BQk9WRSA6IDE5Ly9SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEX0FCT1ZFICAvLyA6IDE5XHJcbiAgICwgQUhFQURfUklHSFRfQUJPVkUgOiAyMC8vUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQUJPVkUgLy8gIDogMjBcclxuICAgLCBBSEVBRF9MRUZUX0JFTE9XIDogMjEvL1JlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQkVMT1cgICAvLyAgOiAyMVxyXG4gICAsIEFIRUFEX1JJR0hUX0JFTE9XIDogMjIvL1JlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FIRUFEX0JFTE9XIC8vICA6IDIyXHJcbiAgICwgQkVISU5EX0xFRlRfQUJPVkUgOiAyMy8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQUJPVkUgLy8gOiAyM1xyXG4gICAsIEJFSElORF9SSUdIVF9BQk9WRSA6IDI0Ly9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkRfQUJPVkUgLy86IDI0XHJcbiAgICwgQkVISU5EX0xFRlRfQkVMT1cgOiAyNS8vUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQkVMT1cgIC8vOiAyNVxyXG4gICAsIEJFSElORF9SSUdIVF9CRUxPVyA6IDI2Ly9SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkRfQkVMT1cgLy86IDI2XHJcbn19KVxyXG5cclxuXHJcbmNvbnN0IEludEZhY2VTdGF0ZVRhYmxlID0gW1xyXG4gICAgICAgICAgWyAvLyBTdGF0ZSAwOiBDbGVhciA9IG5vIEZ1bGxPcGFxdWUgPSBubyBUcmFuc3BSZW5kID0gbm9cclxuICAgICAgICAgICAgMCAsIC8vIENsZWFyID0gMSBGdWxsT3BhcXVlID0gMCBUcmFuc3BSZW5kID0gMFxyXG4gICAgICAgICAgICAwICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDAgVHJhbnNwUmVuZCA9IDFcclxuICAgICAgICAgICAgMCAsIC8vIENsZWFyID0gMCBGdWxsT3BhcXVlID0gMSBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgXSAsXHJcbiAgICAgICAgICBbIC8vIFN0YXRlIDI6IENsZWFyID0gbm8gRnVsbE9wYXF1ZSA9IHllcyBUcmFuc3BSZW5kID0gbm9cclxuICAgICAgICAgICAgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAxIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDEgVHJhbnNwUmVuZCA9IDBcclxuICAgICAgICAgICAgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAxXHJcbiAgICAgICAgICAgIDAgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDEgVHJhbnNwUmVuZCA9IDFcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgIFsgLy8gU3RhdGUgNCA6IENsZWFyID0gbm8gRnVsbE9wYXF1ZSA9IG5vIFRyYW5zcFJlbmQgPSB5ZXNcclxuICAgICAgICAgICAgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAxIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDAgVHJhbnNwUmVuZCA9IDFcclxuICAgICAgICAgICAgMCAsIC8vIENsZWFyID0gMCBGdWxsT3BhcXVlID0gMSBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIG51bGwvKm5ldyBWb3hlbFNlY3Rvci5GQUNFRFJBV19PcGVyYXRpb25zW117IC8vIFN0YXRlIDU6IENsZWFyID0geWVzIEZ1bGxPcGFxdWUgPSB5ZXMgVHJhbnNwUmVuZCA9IHllc1xyXG4gICAgICAgICAgICBWb3hlbFNlY3Rvci5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAxIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIFZveGVsU2VjdG9yLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMX0JJVFMgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDEgVHJhbnNwUmVuZCA9IDBcclxuICAgICAgICAgICAgVm94ZWxTZWN0b3IuRkFDRURSQVdfT3BlcmF0aW9ucy5BTExfQklUUyAsIC8vIENsZWFyID0gMCBGdWxsT3BhcXVlID0gMCBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgICBWb3hlbFNlY3Rvci5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAxXHJcbiAgICAgICAgICB9Ki8sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBWb3hlbGFyaXVtLkludEZhY2VTdGF0ZVRhYmxlID0gSW50RmFjZVN0YXRlVGFibGU7XHJcblxyXG5jb25zdCBFeHRGYWNlU3RhdGVUYWJsZSA9IFtcclxuICAgICAgICAgIFsgLy8gU3RhdGUgMDogQ2xlYXIgPSBubyBGdWxsT3BhcXVlID0gbm8gVHJhbnNwUmVuZCA9IG5vXHJcbiAgICAgICAgICAgIDAgLCAvLyBDbGVhciA9IDEgRnVsbE9wYXF1ZSA9IDAgVHJhbnNwUmVuZCA9IDBcclxuICAgICAgICAgICAgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTExfQklUUyAsIC8vIENsZWFyID0gMCBGdWxsT3BhcXVlID0gMCBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgICBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMX0JJVFMgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDEgVHJhbnNwUmVuZCA9IDFcclxuICAgICAgICBdLFxyXG4gICAgICAgICAgWyAvLyBTdGF0ZSAyOiBDbGVhciA9IG5vIEZ1bGxPcGFxdWUgPSB5ZXMgVHJhbnNwUmVuZCA9IG5vXHJcbiAgICAgICAgICAgIDAgICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAxXHJcbiAgICAgICAgICAgIDAgICwgLy8gQ2xlYXIgPSAxIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAxXHJcbiAgICAgICAgXSxcclxuICAgICAgICAgIFsgLy8gU3RhdGUgNCA6IENsZWFyID0gbm8gRnVsbE9wYXF1ZSA9IG5vIFRyYW5zcFJlbmQgPSB5ZXNcclxuICAgICAgICAgICAgMCAsIC8vIENsZWFyID0gMVxyXG4gICAgICAgICAgICBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMX0JJVFMgICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIDAgICwgLy8gRnVsbE9wYXF1ZSA9IDAgVHJhbnNwUmVuZCA9IDFcclxuICAgICAgICAgICAgMCAgLCAvLyBGdWxsT3BhcXVlID0gMSBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgbnVsbC8qIG5ldyBWb3hlbFNlY3Rvci5GQUNFRFJBV19PcGVyYXRpb25zWzhdeyAvLyBTdGF0ZSA3OiBDbGVhciA9IHllcyBGdWxsT3BhcXVlID0geWVzIFRyYW5zcFJlbmQgPSB5ZXNcclxuICAgICAgICAgICAgMCAgICwgLy8gQ2xlYXIgPSAxIEZ1bGxPcGFxdWUgPSAwIFRyYW5zcFJlbmQgPSAwXHJcbiAgICAgICAgICAgIFZveGVsU2VjdG9yLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMX0JJVFMgLCAvLyBDbGVhciA9IDAgRnVsbE9wYXF1ZSA9IDEgVHJhbnNwUmVuZCA9IDBcclxuICAgICAgICAgICAgVm94ZWxTZWN0b3IuRkFDRURSQVdfT3BlcmF0aW9ucy5BTExfQklUUyAsIC8vIENsZWFyID0gMCBGdWxsT3BhcXVlID0gMCBUcmFuc3BSZW5kID0gMVxyXG4gICAgICAgICAgICBWb3hlbFNlY3Rvci5GQUNFRFJBV19PcGVyYXRpb25zLkFMTF9CSVRTICwgLy8gQ2xlYXIgPSAwIEZ1bGxPcGFxdWUgPSAxIFRyYW5zcFJlbmQgPSAxXHJcbiAgICAgICAgICB9Ki9cclxuICAgICAgXTtcclxuICAgICAgVm94ZWxhcml1bS5FeHRGYWNlU3RhdGVUYWJsZSA9IEV4dEZhY2VTdGF0ZVRhYmxlO1xyXG5cclxuZnVuY3Rpb24gWkJsb2NQb3NOKCB4LCB5LCB6ICkge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnogPSB6O1xyXG59XHJcblxyXG4gICAgY29uc3QgTm9ybWFsQmFzZVBvc2l0aW9uID0gVm94ZWxhcml1bS5Ob3JtYWxCYXNlUG9zaXRpb24gPSBbXHJcbiAgICAgICAgICBuZXcgWkJsb2NQb3NOICggLTEsIDAsIDAgKVxyXG4gICAgICAgICAgLCBuZXcgWkJsb2NQb3NOICggMSwgMCwgMCApXHJcbiAgICAgICAgICAsIG5ldyBaQmxvY1Bvc04oIDAsIDAsIDEgKVxyXG4gICAgICAgICAgLCBuZXcgWkJsb2NQb3NOKCAwLCAwLCAtMSApXHJcbiAgICAgICAgICAsIG5ldyBaQmxvY1Bvc04oIDAsIDEsIDAgKVxyXG4gICAgICAgICAgLCBuZXcgWkJsb2NQb3NOKCAwLCAtMSwgMCApIF07XHJcblxyXG4iLCJ2YXIgZm9udCA9IHtcclxuaGVpZ2h0OjgsIGJhc2VsaW5lOjAsIGNoYXJzOjY1NTM2LCBmbGFnczo2NCwgbmFtZTpcIlRJOTkuanNcIiwgY2hhcmFjdGVyczpbbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4sbnVsbFxyXG4se3N6OjAsdzo3LG9mczowLGFzYzowLGRzYzowfVxyXG4se3N6OjEsdzo3LG9mczoyLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzEsMSwxLDEsMSwwLDFdKSB9XHJcbix7c3o6Myx3Ojcsb2ZzOjEsYXNjOjcsZHNjOjUsZGF0YTpuZXcgVWludDhBcnJheShbNSw1LDVdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTAsMTAsMzEsMTAsMzEsMTAsMTBdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTQsMjEsNSwxNCwyMCwyMSwxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFszLDE5LDgsNCwyLDI1LDI0XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzIsNSw1LDIsMjEsOSwyMl0pIH1cclxuLHtzejoyLHc6NyxvZnM6Mixhc2M6Nyxkc2M6NSxkYXRhOm5ldyBVaW50OEFycmF5KFsyLDIsMV0pIH1cclxuLHtzejozLHc6NyxvZnM6MSxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFs0LDIsMSwxLDEsMiw0XSkgfVxyXG4se3N6OjMsdzo3LG9mczoxLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzEsMiw0LDQsNCwyLDFdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjYsZHNjOjIsZGF0YTpuZXcgVWludDhBcnJheShbMTAsNCwzMSw0LDEwXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo2LGRzYzoyLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzQsNCwzMSw0LDRdKSB9XHJcbix7c3o6Mix3Ojcsb2ZzOjEsYXNjOjMsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMywyLDFdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjQsZHNjOjQsZGF0YTpuZXcgVWludDhBcnJheShbMzFdKSB9XHJcbix7c3o6Mix3Ojcsb2ZzOjEsYXNjOjIsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMywzXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo2LGRzYzoyLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE2LDgsNCwyLDFdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTQsMTcsMTcsMTcsMTcsMTcsMTRdKSB9XHJcbix7c3o6Myx3Ojcsb2ZzOjEsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMiwzLDIsMiwyLDIsN10pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxNiw4LDQsMiwzMV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxNiwxMiwxNiwxNywxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFs4LDEyLDEwLDksMzEsOCw4XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMxLDEsMTUsMTYsMTYsMTcsMTRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTIsMiwxLDE1LDE3LDE3LDE0XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMxLDE2LDgsNCwyLDIsMl0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxNywxNCwxNywxNywxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxNywzMCwxNiw4LDZdKSB9XHJcbix7c3o6Mix3Ojcsb2ZzOjEsYXNjOjYsZHNjOjIsZGF0YTpuZXcgVWludDhBcnJheShbMywzLDAsMywzXSkgfVxyXG4se3N6OjIsdzo3LG9mczoxLGFzYzo2LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMsMywwLDMsMiwxXSkgfVxyXG4se3N6OjQsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzgsNCwyLDEsMiw0LDhdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjMsZGF0YTpuZXcgVWludDhBcnJheShbMzEsMCwzMV0pIH1cclxuLHtzejo0LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxLDIsNCw4LDQsMiwxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE0LDE3LDE2LDgsNCwwLDRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTQsMTcsMjksMjEsMjksMSwxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxNywzMSwxNywxNywxN10pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNSwxOCwxOCwxNCwxOCwxOCwxNV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxLDEsMSwxNywxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNSwxOCwxOCwxOCwxOCwxOCwxNV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFszMSwxLDEsMTUsMSwxLDMxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMxLDEsMSwxNSwxLDEsMV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNCwxNywxLDI5LDE3LDE3LDE0XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDE3LDE3LDMxLDE3LDE3LDE3XSkgfVxyXG4se3N6OjMsdzo3LG9mczoxLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzcsMiwyLDIsMiwyLDddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTYsMTYsMTYsMTYsMTYsMTcsMTRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsOSw1LDMsNSw5LDE3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzEsMSwxLDEsMSwxLDMxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDI3LDIxLDIxLDE3LDE3LDE3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDE5LDE5LDIxLDI1LDI1LDE3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMxLDE3LDE3LDE3LDE3LDE3LDMxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE1LDE3LDE3LDE1LDEsMSwxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE0LDE3LDE3LDE3LDIxLDksMjJdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTUsMTcsMTcsMTUsNSw5LDE3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE0LDE3LDEsMTQsMTYsMTcsMTRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzEsNCw0LDQsNCw0LDRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsMTcsMTcsMTcsMTcsMTcsMTRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsMTcsMTcsMTAsMTAsNCw0XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDE3LDE3LDIxLDIxLDIxLDEwXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDE3LDEwLDQsMTAsMTcsMTddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsMTcsMTAsNCw0LDQsNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFszMSwxNiw4LDQsMiwxLDMxXSkgfVxyXG4se3N6OjMsdzo3LG9mczoxLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzcsMSwxLDEsMSwxLDddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjYsZHNjOjIsZGF0YTpuZXcgVWludDhBcnJheShbMSwyLDQsOCwxNl0pIH1cclxuLHtzejozLHc6NyxvZnM6MSxhc2M6Nyxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFs3LDQsNCw0LDQsNCw3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo2LGRzYzo0LGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzQsMTAsMTddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjEsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzFdKSB9XHJcbix7c3o6Myx3Ojcsb2ZzOjEsYXNjOjYsZHNjOjQsZGF0YTpuZXcgVWludDhBcnJheShbMSwyLDRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTQsMTcsMzEsMTcsMTddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTUsMTgsMTQsMTgsMTVdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzAsMSwxLDEsMzBdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTUsMTgsMTgsMTgsMTVdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzEsMSwxNSwxLDMxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMxLDEsMTUsMSwxXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMwLDEsMjksMTcsMTRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsMTcsMzEsMTcsMTddKSB9XHJcbix7c3o6Myx3Ojcsb2ZzOjEsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbNywyLDIsMiw3XSkgfVxyXG4se3N6OjQsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzgsOCw4LDksNl0pIH1cclxuLHtzejo0LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFs5LDUsMyw1LDldKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMSwxLDEsMSwzMV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNywyNywyMSwxNywxN10pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNywxOSwyMSwyNSwxN10pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFszMSwxNywxNywxNywzMV0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNSwxNywxNSwxLDFdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTQsMTcsMjEsOSwyMl0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNSwxNywxNSw5LDE3XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzMwLDEsMTQsMTYsMTVdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzEsNCw0LDQsNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNywxNywxNywxNywxNF0pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6NSxkc2M6MSxkYXRhOm5ldyBVaW50OEFycmF5KFsxNywxNywxMCwxMCw0XSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDE3LDIxLDIxLDEwXSkgfVxyXG4se3N6OjUsdzo3LG9mczowLGFzYzo1LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzE3LDEwLDQsMTAsMTddKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTcsMTAsNCw0LDRdKSB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjUsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMzEsOCw0LDIsMzFdKSB9XHJcbix7c3o6NCx3Ojcsb2ZzOjAsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMTIsMiwyLDEsMiwyLDEyXSkgfVxyXG4se3N6OjEsdzo3LG9mczoyLGFzYzo3LGRzYzoxLGRhdGE6bmV3IFVpbnQ4QXJyYXkoWzEsMSwxLDAsMSwxLDFdKSB9XHJcbix7c3o6NCx3Ojcsb2ZzOjEsYXNjOjcsZHNjOjEsZGF0YTpuZXcgVWludDhBcnJheShbMyw0LDQsOCw0LDQsM10pIH1cclxuLHtzejo1LHc6NyxvZnM6MCxhc2M6Nixkc2M6NCxkYXRhOm5ldyBVaW50OEFycmF5KFsyLDIxLDhdKSB9XHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbixudWxsXHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6MCx3Ojcsb2ZzOjAsYXNjOjAsZHNjOjB9XHJcbix7c3o6NSx3Ojcsb2ZzOjAsYXNjOjQsZHNjOjQsZGF0YTpuZXcgVWludDhBcnJheShbMzFdKSB9XHJcbl0gfTtcclxuXHJcblZveGVsYXJpdW0uRm9udHMuVEk5OSA9IGZvbnQ7XHJcbiIsIlxyXG5pZiggTnVtYmVyKFRIUkVFLlJFVklTSU9OKSA+PSA3NiApIHtcclxuXHR2YXIgY291bnRfaXNfZ2V0dGVyID0gZmFsc2U7XHJcbiAgT2JqZWN0LmZyZWV6ZSggY291bnRfaXNfZ2V0dGVyICk7XHJcbn1cclxuZWxzZSB7XHJcblx0dmFyIGNvdW50X2lzX2dldHRlciA9IHRydWU7XHJcbiAgT2JqZWN0LmZyZWV6ZSggY291bnRfaXNfZ2V0dGVyICk7XHJcbn1cclxuXHJcbmNvbnN0IGF0dHJpYnMgPSBbIHsgbmFtZTpcInBvc2l0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXM6NCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOjMsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplOmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZnR5cGU6RmxvYXQzMkFycmF5IH0sXHJcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTpcInV2XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXM6NCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOjIsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplOmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZnR5cGU6RmxvYXQzMkFycmF5IH0sXHJcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTpcImNvbG9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXM6NCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOjQsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplOmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZnR5cGU6RmxvYXQzMkFycmF5IH0sXHJcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTpcIm5vcm1hbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOjQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTozLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZTpmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBidWZ0eXBlOkZsb2F0MzJBcnJheSB9LFxyXG5cclxuLy8sIFwiaW5fRmFjZUNvbG9yXCIsIFwiaW5fTW9kdWxvdXNcIlxyXG4vLywgXCJpbl9Qb3dcIlxyXG4vLywgXCJpbl9mbGF0X2NvbG9yXCIsIFwiaW5fdXNlX3RleHR1cmVcIiwgXCJpbl9kZWNhbF90ZXh0dXJlXCJcclxuXTtcclxuXHJcblxyXG5Wb3hlbGFyaXVtLkdlb21ldHJ5QmFzaWNCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYnVmZmVyID0ge307XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XHJcblxyXG4gICAgIGJ1ZmZlci5nZW9tZXRyeS51bmlmb3JtcyA9IHtcclxuICAgICAgICAgICAgIGVkZ2Vfb25seSA6IGZhbHNlLFxyXG4gICAgIFx0fTtcclxuXHJcbiAgICAvLyBjcmVhdGUgYSBzaW1wbGUgc3F1YXJlIHNoYXBlLiBXZSBkdXBsaWNhdGUgdGhlIHRvcCBsZWZ0IGFuZCBib3R0b20gcmlnaHRcclxuICAgIC8vIHZlcnRpY2VzIGJlY2F1c2UgZWFjaCB2ZXJ0ZXggbmVlZHMgdG8gYXBwZWFyIG9uY2UgcGVyIHRyaWFuZ2xlLlxyXG4gICAgYnVmZmVyLnBvc2l0aW9uID0gbmV3IEZsb2F0MzJBcnJheSggW10gKTtcclxuICAgIGJ1ZmZlci51diA9IG5ldyBGbG9hdDMyQXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuY29sb3IgPSBuZXcgRmxvYXQzMkFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLm5vcm1hbCA9IG5ldyBGbG9hdDMyQXJyYXkoIFtdICk7XHJcbiAgICAvKlxyXG4gICAgYnVmZmVyLmluX0ZhY2VDb2xvciA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX1BvdyA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX3VzZV90ZXh0dXJlID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fZmxhdF9jb2xvciA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX2RlY2FsX3RleHR1cmUgPSBuZXcgVWludDhBcnJheSggW10gKTtcclxuICAgIGJ1ZmZlci5pbl9Nb2R1bG91cyA9IG5ldyBJbnQ4QXJyYXkoIFtdICk7XHJcbiAgICAqL1xyXG4gICAgYnVmZmVyLmF2YWlsYWJsZSA9IDA7XHJcbiAgICBidWZmZXIudXNlZCA9IDA7XHJcblxyXG4gICAgYnVmZmVyLmNsZWFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy51c2VkID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBhdHRyaWJzLmZvckVhY2goIChhdHQpPT57XHJcbiAgICAgIGJ1ZmZlci5nZW9tZXRyeS5hZGRBdHRyaWJ1dGUoIGF0dC5uYW1lLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXJbYXR0Lm5hbWVdLCBhdHQuc2l6ZSwgYXR0Lm5vcm1hbGl6ZSApKVxyXG4gICAgfSlcclxuXHJcblxyXG4gICAgIGJ1ZmZlci5leHBhbmQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgdmFyIG5ld2J1ZjtcclxuICAgICAgICAgdGhpcy5hdmFpbGFibGUgPSAoIHRoaXMuYXZhaWxhYmxlICsgMSApICogMjtcclxuXHJcbiAgICAgICAgICBhdHRyaWJzLmZvckVhY2goIChhdHRyaWIpPT57XHJcbiAgICAgICAgICAgIG5ld2J1ZiA9ICAgbmV3IGF0dHJpYi5idWZ0eXBlKCBuZXcgQXJyYXlCdWZmZXIoIHRoaXMuYXZhaWxhYmxlICogKCBhdHRyaWIuYnl0ZXMgKiBhdHRyaWIuc2l6ZSApICkgKTtcclxuICAgICAgICAgICAgbmV3YnVmLnNldCggYnVmZmVyW2F0dHJpYi5uYW1lXSApO1xyXG4gICAgICAgICAgICBidWZmZXJbYXR0cmliLm5hbWVdID0gbmV3YnVmO1xyXG4gICAgICAgICAgfSlcclxuICAgICB9O1xyXG5cclxuICAgICBidWZmZXIubWFya0RpcnR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuZHJhd1JhbmdlLmNvdW50ID0gdGhpcy51c2VkO1xyXG4gICAgICAgICBhdHRyaWJzLmZvckVhY2goIChhdHRyaWIpPT57XHJcbiAgICAgICAgICAgICB2YXIgYXR0cmlidSA9IHRoaXMuZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKGF0dHJpYi5uYW1lKTtcclxuICAgICAgICAgICAgIGF0dHJpYnUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHQgaWYoIFZveGVsYXJpdW0uU2V0dGluZ3MuQWx0U3BhY2UgKSB7XHJcblxyXG4gICAgICAgICAgICAgXHRhdHRyaWJ1LmFycmF5ID0gYnVmZmVyW2F0dHJpYi5uYW1lXS5zdWJhcnJheSggMCwgdGhpcy51c2VkICogYXR0cmliLnNpemUgKTtcclxuXHRcdFx0XHRcdFx0fWVsc2VcclxuXHRcdFx0XHRcdFx0IFx0YXR0cmlidS5hcnJheSA9IGJ1ZmZlclthdHRyaWIubmFtZV07XHJcblx0XHRcdFx0XHRcdCBpZiggIWNvdW50X2lzX2dldHRlciApXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1LmNvdW50ID0gdGhpcy51c2VkO1xyXG4gICAgICAgICB9KVxyXG4gICAgICAgICAvL2NvbnNvbGUubG9nKCBcImRpcnR5XCIsIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcyApO1xyXG4gICAgIH1cclxuXHJcbiAgICAgYnVmZmVyLmFkZFBvaW50ID0gZnVuY3Rpb24oIHYsIHQsIHRCYXNlLCBjLCBmYywgbiwgcCwgdXQsIGZsYXQsIGR0LCBtb2QgKSB7XHJcbiAgICAgICAgIGlmKCB0aGlzLnVzZWQgPj0gdGhpcy5hdmFpbGFibGUgKVxyXG4gICAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICBjb25zdCB1MiA9IHRoaXMudXNlZCAqIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHUzID0gdGhpcy51c2VkICogMztcclxuICAgICAgICAgICAgY29uc3QgdTQgPSB0aGlzLnVzZWQgKiA0O1xyXG4gICAgICAgIGlmKCB0ICkge1xyXG4gICAgICAgICAgICB0aGlzLnV2W3UyKzBdID0gdFt0QmFzZSswXTtcclxuICAgICAgICAgICAgdGhpcy51dlt1MisxXSA9IHRbdEJhc2UrMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnV2W3UyKzBdID0gMDtcclxuICAgICAgICAgICAgdGhpcy51dlt1MisxXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG9zaXRpb25bdTMgKyAwIF0gPSB2Lng7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblt1MyArIDEgXSA9IHYueTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uW3UzICsgMiBdID0gdi56O1xyXG5cclxuICAgICAgICAgIHRoaXMuY29sb3JbdTQgKyAwIF0gPSAxO1xyXG4gICAgICAgICAgdGhpcy5jb2xvclt1NCArIDEgXSA9IDE7XHJcbiAgICAgICAgICB0aGlzLmNvbG9yW3U0ICsgMiBdID0gMTtcclxuICAgICAgICAgIHRoaXMuY29sb3JbdTQgKyAzIF0gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLm5vcm1hbFt1MyArIDBdID0gbj9uLng6MDtcclxuICAgICAgICB0aGlzLm5vcm1hbFt1MyArIDFdID0gbj9uLnk6MDtcclxuICAgICAgICB0aGlzLm5vcm1hbFt1MyArIDJdID0gbj9uLno6MTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICBpZiggZmMgKSB7XHJcbiAgICAgICAgdGhpcy5pbl9GYWNlQ29sb3JbdTQgKyAwIF0gPSBmYy54KjI1NTtcclxuICAgICAgICB0aGlzLmluX0ZhY2VDb2xvclt1NCArIDEgXSA9IGZjLnkqMjU1O1xyXG4gICAgICAgIHRoaXMuaW5fRmFjZUNvbG9yW3U0ICsgMiBdID0gZmMueioyNTU7XHJcbiAgICAgICAgdGhpcy5pbl9GYWNlQ29sb3JbdTQgKyAzIF0gPSBmYy53KjI1NTsgfVxyXG5cclxuICAgICAgICB0aGlzLmluX1Bvd1sgdGhpcy51c2VkIF0gPSBwO1xyXG4gICAgICAgIHRoaXMuaW5fdXNlX3RleHR1cmVbIHRoaXMudXNlZCBdID0gdXQ7XHJcbiAgICAgICAgdGhpcy5pbl9mbGF0X2NvbG9yW3RoaXMudXNlZF0gPSBmbGF0O1xyXG4gICAgICAgIHRoaXMuaW5fZGVjYWxfdGV4dHVyZVt0aGlzLnVzZWRdID0gZHQ7XHJcbiAgICAgICAgdGhpcy5pbl9Nb2R1bG91c1t0aGlzLnVzZWQgKiAyICsgMF0gPSBtb2RbMF07XHJcbiAgICAgICAgdGhpcy5pbl9Nb2R1bG91c1t0aGlzLnVzZWQgKiAyICsgMV0gPSBtb2RbMV07XHJcbiovXHJcbiAgICAgICAgdGhpcy51c2VkKys7XHJcbiAgICB9O1xyXG5cclxuICAgICAvL2J1ZmZlci5cclxuXHJcbiAgICAgYnVmZmVyLkFkZFF1YWQgPSBmdW5jdGlvbiggbm9ybSwgUDEsUDIsUDMsUDQsZmFjZUNvbG9yLGNvbG9yLHBvdyApIHtcclxuXHJcbiAgICAgICAgIGNvbnN0IG1pbiA9IDA7XHJcbiAgICAgICAgIGNvbnN0IG1heCA9IDE7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFAxLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtYXhdICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFAyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtYXhdICk7XHJcbiAgICAgfVxyXG4gICAgIGJ1ZmZlci5BZGRRdWFkVGV4dHVyZSA9IGZ1bmN0aW9uKCBub3JtLCBQMSxQMixQMyxQNCx0ZXh0dXJlQ29vcmRzICkge1xyXG4gICAgICAgICBjb25zdCBtaW4gPSAwO1xyXG4gICAgICAgICBjb25zdCBtYXggPSAxO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMSwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgMCwgd2hpdGUsIHVuZGVmaW5lZCwgbm9ybSwgdW5kZWZpbmVkLCAyNTUsIGZhbHNlLCBmYWxzZSwgW21pbixtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFAyLCB0ZXh0dXJlQ29vcmRzLnV2X2FycmF5LCAyLCB3aGl0ZSwgdW5kZWZpbmVkLCBub3JtLCB1bmRlZmluZWQsIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDMsIHRleHR1cmVDb29yZHMudXZfYXJyYXksIDQsIHdoaXRlLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgMiwgd2hpdGUsIHVuZGVmaW5lZCwgbm9ybSwgdW5kZWZpbmVkLCAyNTUsIGZhbHNlLCBmYWxzZSwgW21heCxtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFA0LCB0ZXh0dXJlQ29vcmRzLnV2X2FycmF5LCA2LCB3aGl0ZSwgdW5kZWZpbmVkLCBub3JtLCB1bmRlZmluZWQsIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1heF0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDMsIHRleHR1cmVDb29yZHMudXZfYXJyYXksIDQsIHdoaXRlLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCA9IGZ1bmN0aW9uKCBxdWFkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3cgKSB7XHJcbiAgICAgICAgIHZhciBtaW4gPSAwO1xyXG4gICAgICAgICB2YXIgbWF4ID0gMTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFswXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbMV0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFsxXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21heCxtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbM10sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICB9XHJcbiAgICAgY29uc3Qgd2hpdGUgPSBuZXcgVEhSRUUuVmVjdG9yNCggMC41LCAwLjUsIDAuNSwgMSApO1xyXG4gICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4ID0gZnVuY3Rpb24oIHF1YWQsIHV2cywgbm9ybSwgcG93ICkge1xyXG4gICAgICAgICB2YXIgbWluID0gMDtcclxuICAgICAgICAgdmFyIG1heCA9IDEuMDtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFswXSwgdXZzLCAwLCB3aGl0ZSwgd2hpdGUsIG5vcm0sIHBvdywgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzFdLCB1dnMsIDIsIHdoaXRlLCB3aGl0ZSwgbm9ybSwgcG93LCAyNTUsIGZhbHNlLCBmYWxzZSwgW21heCxtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbMl0sIHV2cywgNCwgd2hpdGUsIHdoaXRlLCBub3JtLCBwb3csIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFsxXSwgdXZzLCAyLCB3aGl0ZSwgd2hpdGUsIG5vcm0sIHBvdywgMjU1LCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzNdLCB1dnMsIDYsIHdoaXRlLCB3aGl0ZSwgbm9ybSwgcG93LCAyNTUsIGZhbHNlLCBmYWxzZSwgW21heCxtYXhdICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbMl0sIHV2cywgNCwgd2hpdGUsIHdoaXRlLCBub3JtLCBwb3csIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICB9XHJcblxyXG4gICAgIGJ1ZmZlci5tYWtlVm94Q3ViZSA9IGZ1bmN0aW9uKCBzaXplLCB2b3hlbFR5cGUgKSB7XHJcbiAgICAgICAgdmFyIHYxID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpO1xyXG4gICAgICAgIHZhciB2MiA9IG5ldyBUSFJFRS5WZWN0b3IzKC0xLDEsMSk7XHJcbiAgICAgICAgdmFyIHYzID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwtMSwxKTtcclxuICAgICAgICB2YXIgdjQgPSBuZXcgVEhSRUUuVmVjdG9yMygtMSwtMSwxKTtcclxuICAgICAgICB2YXIgdjUgPSBuZXcgVEhSRUUuVmVjdG9yMygxLDEsLTEpO1xyXG4gICAgICAgIHZhciB2NiA9IG5ldyBUSFJFRS5WZWN0b3IzKC0xLDEsLTEpO1xyXG4gICAgICAgIHZhciB2NyA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsLTEsLTEpO1xyXG4gICAgICAgIHZhciB2OCA9IG5ldyBUSFJFRS5WZWN0b3IzKC0xLC0xLC0xKTtcclxuICAgICAgICB2YXIgcXVhZDtcclxuICAgICAgICBpZiggdm94ZWxUeXBlICYmIHZveGVsVHlwZS5pbWFnZSApIHtcclxuICAgICAgICAgICAgdmFyIGluX3V2cyA9IHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2cztcclxuICAgICAgICAgICAgdmFyIHV2cyA9IHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2X2FycmF5O1xyXG4gICAgICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZFRleCggcXVhZD1bdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICwgdXZzXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNGb3J3YXJkXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICAvL3F1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZFRleCggcXVhZCA9IFt2Ni5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjguY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUudGV4dHVyZUNvb3Jkcy51dnNcclxuICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM0JhY2t3YXJkXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICAvL3F1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4KCBxdWFkID0gW3Y1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2MS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYyLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUudGV4dHVyZUNvb3Jkcy51dnNcclxuICAgICAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNVcFxyXG4gICAgICAgICAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICAgICAgICAgICAgLy8gIHF1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4KCBxdWFkID0gW3YzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUudGV4dHVyZUNvb3Jkcy51dnNcclxuICAgICAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNEb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWRUZXgoIHF1YWQgPSBbdjUuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2MS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY3LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICAgICAsIHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2c1xyXG4gICAgICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM1JpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWRUZXgoIHF1YWQgPSBbdjIuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ni5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY0LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjguY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICAgICAsIHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2c1xyXG4gICAgICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM0xlZnRcclxuICAgICAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICAgICAgLy9xdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG5cclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIHF1YWQ9W3YxLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjIuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2My5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY0LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkVkZ2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMC4yLCAwLjAsIDEsIDEuMCApXHJcbiAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkZhY2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzRm9yd2FyZFxyXG4gICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgIC8vcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCggcXVhZCA9IFt2Ni5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjguY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAuMiwgMSwgMCwgMS4wIClcclxuICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRmFjZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwLjUgKVxyXG4gICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNCYWNrd2FyZFxyXG4gICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgIC8vcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCggcXVhZCA9IFt2NS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRWRnZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAxLCAwLjAsIDAsIDEuMCApXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5GYWNlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNVcFxyXG4gICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgLy8gICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBxdWFkID0gW3YzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDEsIDEsIDEuMCApXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5GYWNlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNEb3duXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgIC8vICAgIHF1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIHF1YWQgPSBbdjUuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2MS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY3LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkVkZ2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMSwgMC4wLCAxLCAxLjAgKVxyXG4gICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRmFjZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwLjUgKVxyXG4gICAgICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzUmlnaHRcclxuICAgICAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICAgICAgLy8gICAgcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCggcXVhZCA9IFt2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2OC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRWRnZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAxLCAxLCAwLCAxLjAgKVxyXG4gICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRmFjZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwLjUgKVxyXG4gICAgICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzTGVmdFxyXG4gICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgLy8gICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcmtEaXJ0eSggICk7XHJcbiAgICAgfVxyXG5cclxuICAgICAvL3ZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHhmZjAwMDAgfSApO1xyXG4gICAgIC8vdmFyIG1lc2ggPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XHJcbiAgICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7XHJcbiAgICBidWZmZXIuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbn1cclxuIiwiXHJcbmNvbnN0IGF0dHJpYnMgPSBbXCJwb3NpdGlvblwiLFwidXZcIlxyXG4sXCJpbl9Db2xvclwiLCBcImluX0ZhY2VDb2xvclwiLCBcImluX01vZHVsb3VzXCJcclxuLFwibm9ybWFsXCIsIFwiaW5fUG93XCIsIFwiaW5fZmxhdF9jb2xvclwiLCBcImluX3VzZV90ZXh0dXJlXCIsIFwiaW5fZGVjYWxfdGV4dHVyZVwiXHJcbl07XHJcbmNvbnN0IGF0dHJpYl9ieXRlcyA9ICAgICBbNCw0LDEsMSwxLDQsNCwxLDEsMV1cclxuY29uc3QgYXR0cmliX3NpemVzID0gICAgIFszLDIsNCw0LDIsMywxLDEsMSwxXVxyXG5jb25zdCBhdHRyaWJfbm9ybWFsaXplID0gW2ZhbHNlLGZhbHNlLHRydWUsdHJ1ZSwwLDAsMCwwLDEsMF1cclxuY29uc3QgYXR0cmliX2J1ZnR5cGUgPSBbRmxvYXQzMkFycmF5LEZsb2F0MzJBcnJheVxyXG4gICAgLFVpbnQ4QXJyYXksVWludDhBcnJheSxVaW50OEFycmF5XHJcbiAgICAsRmxvYXQzMkFycmF5LEZsb2F0MzJBcnJheSxVaW50OEFycmF5LFVpbnQ4QXJyYXksIFVpbnQ4QXJyYXldXHJcblxyXG5Wb3hlbGFyaXVtLkdlb21ldHJ5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJ1ZmZlciA9IHt9O1xyXG4gICAgIGJ1ZmZlci5nZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xyXG5cclxuICAgICBidWZmZXIuZ2VvbWV0cnkudW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICBlZGdlX29ubHkgOiBmYWxzZSxcclxuICAgICBcdH07XHJcblxyXG4gICAgLy8gY3JlYXRlIGEgc2ltcGxlIHNxdWFyZSBzaGFwZS4gV2UgZHVwbGljYXRlIHRoZSB0b3AgbGVmdCBhbmQgYm90dG9tIHJpZ2h0XHJcbiAgICAvLyB2ZXJ0aWNlcyBiZWNhdXNlIGVhY2ggdmVydGV4IG5lZWRzIHRvIGFwcGVhciBvbmNlIHBlciB0cmlhbmdsZS5cclxuICAgIGJ1ZmZlci5wb3NpdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIudXYgPSBuZXcgRmxvYXQzMkFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX0NvbG9yID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fRmFjZUNvbG9yID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIubm9ybWFsID0gbmV3IEZsb2F0MzJBcnJheSggW10gKTtcclxuICAgIGJ1ZmZlci5pbl9Qb3cgPSBuZXcgRmxvYXQzMkFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX3VzZV90ZXh0dXJlID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fZmxhdF9jb2xvciA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX2RlY2FsX3RleHR1cmUgPSBuZXcgVWludDhBcnJheSggW10gKTtcclxuICAgIGJ1ZmZlci5pbl9Nb2R1bG91cyA9IG5ldyBJbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuYXZhaWxhYmxlID0gMDtcclxuICAgIGJ1ZmZlci51c2VkID0gMDtcclxuXHJcbiAgICBidWZmZXIuY2xlYXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLnVzZWQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGF0dHJpYnMuZm9yRWFjaCggKGF0dCxpbmRleCk9PntcclxuICAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggYXR0LCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXJbYXR0XSwgYXR0cmliX3NpemVzW2luZGV4XSwgYXR0cmliX25vcm1hbGl6ZVtpbmRleF0gKSlcclxuICAgIH0pXHJcblxyXG5cclxuICAgICBidWZmZXIuZXhwYW5kID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHZhciBuZXdidWY7XHJcbiAgICAgICAgIHRoaXMuYXZhaWxhYmxlID0gKCB0aGlzLmF2YWlsYWJsZSArIDEgKSAqIDI7XHJcblxyXG4gICAgICAgICAgYXR0cmlicy5mb3JFYWNoKCAoYXR0LGluZGV4KT0+e1xyXG4gICAgICAgICAgICBuZXdidWYgPSAgIG5ldyBhdHRyaWJfYnVmdHlwZVtpbmRleF0oIG5ldyBBcnJheUJ1ZmZlciggdGhpcy5hdmFpbGFibGUgKiAoIGF0dHJpYl9ieXRlc1tpbmRleF0gKiBhdHRyaWJfc2l6ZXNbaW5kZXhdICkgKSApO1xyXG4gICAgICAgICAgICBuZXdidWYuc2V0KCBidWZmZXJbYXR0XSApO1xyXG4gICAgICAgICAgICBidWZmZXJbYXR0XSA9IG5ld2J1ZjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgfTtcclxuXHJcbiAgICAgYnVmZmVyLm1hcmtEaXJ0eSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgIGF0dHJpYnMuZm9yRWFjaCggKGF0dCk9PntcclxuICAgICAgICAgICAgIHZhciBhdHRyaWIgPSB0aGlzLmdlb21ldHJ5LmdldEF0dHJpYnV0ZShhdHQpO1xyXG4gICAgICAgICAgICAgYXR0cmliLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgIGF0dHJpYi5hcnJheSA9IGJ1ZmZlclthdHRdO1xyXG4gICAgICAgICAgICAgYXR0cmliLmNvdW50ID0gYnVmZmVyLnVzZWQ7XHJcbiAgICAgICAgIH0pXHJcbiAgICAgICAgIC8vY29uc29sZS5sb2coIFwiZGlydHlcIiwgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzICk7XHJcbiAgICAgfVxyXG5cclxuICAgICBidWZmZXIuYWRkUG9pbnQgPSBmdW5jdGlvbiggdiwgdCwgdEJhc2UsIGMsIGZjLCBuLCBwLCB1dCwgZmxhdCwgZHQsIG1vZCApIHtcclxuICAgICAgICAgaWYoIHRoaXMudXNlZCA+PSB0aGlzLmF2YWlsYWJsZSApXHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHUyID0gdGhpcy51c2VkICogMjtcclxuICAgICAgICAgICAgY29uc3QgdTMgPSB0aGlzLnVzZWQgKiAzO1xyXG4gICAgICAgICAgICBjb25zdCB1NCA9IHRoaXMudXNlZCAqIDQ7XHJcbiAgICAgICAgaWYoIHQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXZbdTIrMF0gPSB0W3RCYXNlKzBdO1xyXG4gICAgICAgICAgICB0aGlzLnV2W3UyKzFdID0gdFt0QmFzZSsxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXZbdTIrMF0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnV2W3UyKzFdID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblt1MyArIDAgXSA9IHYueDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uW3UzICsgMSBdID0gdi55O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25bdTMgKyAyIF0gPSB2Lno7XHJcbiAgICAgICAgaWYoIGMgKSB7XHJcbiAgICAgICAgdGhpcy5pbl9Db2xvclt1NCArIDAgXSA9IGMueCoyNTU7XHJcbiAgICAgICAgdGhpcy5pbl9Db2xvclt1NCArIDEgXSA9IGMueSoyNTU7XHJcbiAgICAgICAgdGhpcy5pbl9Db2xvclt1NCArIDIgXSA9IGMueioyNTU7XHJcbiAgICAgICAgdGhpcy5pbl9Db2xvclt1NCArIDMgXSA9IGMudyoyNTU7IH1cclxuXHJcbiAgICAgICAgaWYoIGZjICkge1xyXG4gICAgICAgIHRoaXMuaW5fRmFjZUNvbG9yW3U0ICsgMCBdID0gZmMueCoyNTU7XHJcbiAgICAgICAgdGhpcy5pbl9GYWNlQ29sb3JbdTQgKyAxIF0gPSBmYy55KjI1NTtcclxuICAgICAgICB0aGlzLmluX0ZhY2VDb2xvclt1NCArIDIgXSA9IGZjLnoqMjU1O1xyXG4gICAgICAgIHRoaXMuaW5fRmFjZUNvbG9yW3U0ICsgMyBdID0gZmMudyoyNTU7IH1cclxuXHJcbiAgICAgICAgdGhpcy5ub3JtYWxbdTMgKyAwXSA9IG4/bi54OjA7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxbdTMgKyAxXSA9IG4/bi55OjA7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxbdTMgKyAyXSA9IG4/bi56OjE7XHJcblxyXG4gICAgICAgIHRoaXMuaW5fUG93WyB0aGlzLnVzZWQgXSA9IHA7XHJcbiAgICAgICAgdGhpcy5pbl91c2VfdGV4dHVyZVsgdGhpcy51c2VkIF0gPSB1dDtcclxuICAgICAgICB0aGlzLmluX2ZsYXRfY29sb3JbdGhpcy51c2VkXSA9IGZsYXQ7XHJcbiAgICAgICAgdGhpcy5pbl9kZWNhbF90ZXh0dXJlW3RoaXMudXNlZF0gPSBkdDtcclxuICAgICAgICB0aGlzLmluX01vZHVsb3VzW3RoaXMudXNlZCAqIDIgKyAwXSA9IG1vZFswXTtcclxuICAgICAgICB0aGlzLmluX01vZHVsb3VzW3RoaXMudXNlZCAqIDIgKyAxXSA9IG1vZFsxXTtcclxuXHJcbiAgICAgICAgdGhpcy51c2VkKys7XHJcbiAgICB9O1xyXG5cclxuICAgICAvL2J1ZmZlci5cclxuXHJcbiAgICAgYnVmZmVyLkFkZFF1YWQgPSBmdW5jdGlvbiggbm9ybSwgUDEsUDIsUDMsUDQsZmFjZUNvbG9yLGNvbG9yLHBvdyApIHtcclxuXHJcbiAgICAgICAgIGNvbnN0IG1pbiA9IDA7XHJcbiAgICAgICAgIGNvbnN0IG1heCA9IDE7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFAxLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtYXhdICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIFAyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtYXhdICk7XHJcbiAgICAgfVxyXG4gICAgIGJ1ZmZlci5BZGRRdWFkVGV4dHVyZSA9IGZ1bmN0aW9uKCBub3JtLCBQMSxQMixQMyxQNCx0ZXh0dXJlQ29vcmRzICkge1xyXG4gICAgICAgICBjb25zdCBtaW4gPSAwO1xyXG4gICAgICAgICBjb25zdCBtYXggPSAxO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMSwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgMCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgMiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgNCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgMiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQNCwgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgNiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgdGV4dHVyZUNvb3Jkcy51dl9hcnJheSwgNCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5vcm0sIHVuZGVmaW5lZCwgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCA9IGZ1bmN0aW9uKCBxdWFkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3cgKSB7XHJcbiAgICAgICAgIHZhciBtaW4gPSAwO1xyXG4gICAgICAgICB2YXIgbWF4ID0gMTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFswXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21pbixtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbMV0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFsxXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbG9yLCBmYWNlQ29sb3IsIG5vcm0sIHBvdywgZmFsc2UsIGZhbHNlLCBmYWxzZSwgW21heCxtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbM10sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb2xvciwgZmFjZUNvbG9yLCBub3JtLCBwb3csIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29sb3IsIGZhY2VDb2xvciwgbm9ybSwgcG93LCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBbbWluLG1heF0gKTtcclxuICAgICB9XHJcbiAgICAgY29uc3Qgd2hpdGUgPSBuZXcgVEhSRUUuVmVjdG9yNCggMC41LCAwLCAwLCAxICk7XHJcbiAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWRUZXggPSBmdW5jdGlvbiggcXVhZCwgdXZzLCBub3JtLCBwb3cgKSB7XHJcbiAgICAgICAgIHZhciBtaW4gPSAwO1xyXG4gICAgICAgICB2YXIgbWF4ID0gMS4wO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzBdLCB1dnMsIDAsIHdoaXRlLCB3aGl0ZSwgbm9ybSwgcG93LCAyNTUsIGZhbHNlLCBmYWxzZSwgW21pbixtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbMV0sIHV2cywgMiwgd2hpdGUsIHdoaXRlLCBub3JtLCBwb3csIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1pbl0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFsyXSwgdXZzLCA0LCB3aGl0ZSwgd2hpdGUsIG5vcm0sIHBvdywgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzFdLCB1dnMsIDIsIHdoaXRlLCB3aGl0ZSwgbm9ybSwgcG93LCAyNTUsIGZhbHNlLCBmYWxzZSwgW21heCxtaW5dICk7XHJcbiAgICAgICAgIHRoaXMuYWRkUG9pbnQoIHF1YWRbM10sIHV2cywgNiwgd2hpdGUsIHdoaXRlLCBub3JtLCBwb3csIDI1NSwgZmFsc2UsIGZhbHNlLCBbbWF4LG1heF0gKTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggcXVhZFsyXSwgdXZzLCA0LCB3aGl0ZSwgd2hpdGUsIG5vcm0sIHBvdywgMjU1LCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuXHJcbiAgICAgYnVmZmVyLm1ha2VWb3hDdWJlID0gZnVuY3Rpb24oIHNpemUsIHZveGVsVHlwZSApIHtcclxuICAgICAgICB2YXIgdjEgPSBuZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7XHJcbiAgICAgICAgdmFyIHYyID0gbmV3IFRIUkVFLlZlY3RvcjMoLTEsMSwxKTtcclxuICAgICAgICB2YXIgdjMgPSBuZXcgVEhSRUUuVmVjdG9yMygxLC0xLDEpO1xyXG4gICAgICAgIHZhciB2NCA9IG5ldyBUSFJFRS5WZWN0b3IzKC0xLC0xLDEpO1xyXG4gICAgICAgIHZhciB2NSA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsMSwtMSk7XHJcbiAgICAgICAgdmFyIHY2ID0gbmV3IFRIUkVFLlZlY3RvcjMoLTEsMSwtMSk7XHJcbiAgICAgICAgdmFyIHY3ID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwtMSwtMSk7XHJcbiAgICAgICAgdmFyIHY4ID0gbmV3IFRIUkVFLlZlY3RvcjMoLTEsLTEsLTEpO1xyXG4gICAgICAgIHZhciBxdWFkO1xyXG4gICAgICAgIGlmKCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLmltYWdlXHJcblx0XHRcdFx0ICAgJiYgKCggdm94ZWxUeXBlLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19TSEFERVIgKSA9PSAwIClcclxuICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgdmFyIGluX3V2cyA9IHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2cztcclxuICAgICAgICAgICAgdmFyIHV2cyA9IHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2X2FycmF5O1xyXG4gICAgICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZFRleCggcXVhZD1bdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICwgdXZzXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNGb3J3YXJkXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG5cclxuICAgICAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWRUZXgoIHF1YWQgPSBbdjYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2NS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjcuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICwgdm94ZWxUeXBlLnRleHR1cmVDb29yZHMudXZzXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNCYWNrd2FyZFxyXG4gICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICAgICAgcXVhZFswXS5kZWxldGUoKTsgcXVhZFsxXS5kZWxldGUoKTsgcXVhZFsyXS5kZWxldGUoKTsgcXVhZFszXS5kZWxldGUoKTtcclxuICAgICAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWRUZXgoIHF1YWQgPSBbdjUuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ni5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYxLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjIuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICAgICAsIHZveGVsVHlwZS50ZXh0dXJlQ29vcmRzLnV2c1xyXG4gICAgICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM1VwXHJcbiAgICAgICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICAgICAgICAgIHF1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4KCBxdWFkID0gW3YzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUudGV4dHVyZUNvb3Jkcy51dnNcclxuICAgICAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNEb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICAgICAgICAgIHF1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4KCBxdWFkID0gW3Y1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAgICAgLCB2b3hlbFR5cGUudGV4dHVyZUNvb3Jkcy51dnNcclxuICAgICAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNSaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZFRleCggcXVhZCA9IFt2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2OC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgICAgICwgdm94ZWxUeXBlLnRleHR1cmVDb29yZHMudXZzXHJcbiAgICAgICAgICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzTGVmdFxyXG4gICAgICAgICAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG5cclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIHF1YWQ9W3YxLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjIuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2My5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY0LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkVkZ2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMC4yLCAwLjAsIDEsIDEuMCApXHJcbiAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkZhY2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzRm9yd2FyZFxyXG4gICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgIHF1YWRbMF0uZGVsZXRlKCk7IHF1YWRbMV0uZGVsZXRlKCk7IHF1YWRbMl0uZGVsZXRlKCk7IHF1YWRbM10uZGVsZXRlKCk7XHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIHF1YWQgPSBbdjYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2NS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjcuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgLCB2b3hlbFR5cGUgJiYgdm94ZWxUeXBlLnByb3BlcnRpZXMuRWRnZUNvbG9yIHx8IG5ldyBUSFJFRS5WZWN0b3I0KCAwLjIsIDEsIDAsIDEuMCApXHJcbiAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkZhY2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgLCBUSFJFRS5WZWN0b3IzQmFja3dhcmRcclxuICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBxdWFkID0gW3Y1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2MS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYyLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDEsIDAuMCwgMCwgMS4wIClcclxuICAgICAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkZhY2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM1VwXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBxdWFkID0gW3YzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDEsIDEsIDEuMCApXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5GYWNlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNEb3duXHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBxdWFkID0gW3Y1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDEsIDAuMCwgMSwgMS4wIClcclxuICAgICAgICAgICAgICAgICwgdm94ZWxUeXBlICYmIHZveGVsVHlwZS5wcm9wZXJ0aWVzLkZhY2VDb2xvciB8fCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM1JpZ2h0XHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBxdWFkID0gW3YyLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjYuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2NC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY4LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5FZGdlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDEsIDEsIDAsIDEuMCApXHJcbiAgICAgICAgICAgICAgICAsIHZveGVsVHlwZSAmJiB2b3hlbFR5cGUucHJvcGVydGllcy5GYWNlQ29sb3IgfHwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNMZWZ0XHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgICAgICAgICBxdWFkWzBdLmRlbGV0ZSgpOyBxdWFkWzFdLmRlbGV0ZSgpOyBxdWFkWzJdLmRlbGV0ZSgpOyBxdWFkWzNdLmRlbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcmtEaXJ0eSggICk7XHJcbiAgICAgfVxyXG5cclxuICAgICAvL3ZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHhmZjAwMDAgfSApO1xyXG4gICAgIC8vdmFyIG1lc2ggPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XHJcbiAgICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7XHJcbiAgICBidWZmZXIuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbn1cclxuIiwiXHJcblxyXG5Wb3hlbGFyaXVtLkdlb21ldHJ5QnVmZmVyTW9ubyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBidWZmZXIgPSB7fTtcclxuICAgICBidWZmZXIuZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICBidWZmZXIuZ2VvbWV0cnkudW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICBpbl9Db2xvciA6IG5ldyBUSFJFRS5WZWN0b3I0KDEsMCwwLDEpLFxyXG4gICAgICAgICAgICAgaW5fRmFjZUNvbG9yIDogbmV3IFRIUkVFLlZlY3RvcjQoMCwxLDAsMSksXHJcbiAgICAgICAgICAgICBpbl9Qb3cgOiAyMC4wICxcclxuICAgICAgICAgICAgIGVkZ2Vfb25seSA6IHRydWUsXHJcbiAgICAgXHR9O1xyXG4gICAgLy8gY3JlYXRlIGEgc2ltcGxlIHNxdWFyZSBzaGFwZS4gV2UgZHVwbGljYXRlIHRoZSB0b3AgbGVmdCBhbmQgYm90dG9tIHJpZ2h0XHJcbiAgICAvLyB2ZXJ0aWNlcyBiZWNhdXNlIGVhY2ggdmVydGV4IG5lZWRzIHRvIGFwcGVhciBvbmNlIHBlciB0cmlhbmdsZS5cclxuICAgIGJ1ZmZlci5wb3NpdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fVGV4dHVyZSA9IG5ldyBGbG9hdDMyQXJyYXkoIFtdICk7XHJcbiAgICAvL2J1ZmZlci5pbl9Db2xvciA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgLy9idWZmZXIuaW5fRmFjZUNvbG9yID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fTm9ybWFsID0gbmV3IEZsb2F0MzJBcnJheSggW10gKTtcclxuICAgIC8vYnVmZmVyLmluX1BvdyA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX3VzZV90ZXh0dXJlID0gbmV3IFVpbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuaW5fZmxhdF9jb2xvciA9IG5ldyBVaW50OEFycmF5KCBbXSApO1xyXG4gICAgYnVmZmVyLmluX2RlY2FsX3RleHR1cmUgPSBuZXcgVWludDhBcnJheSggW10gKTtcclxuICAgIGJ1ZmZlci5pbl9Nb2R1bG91cyA9IG5ldyBJbnQ4QXJyYXkoIFtdICk7XHJcbiAgICBidWZmZXIuYXZhaWxhYmxlID0gMDtcclxuICAgIGJ1ZmZlci51c2VkID0gMDtcclxuXHJcbiAgICBidWZmZXIuY2xlYXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLnVzZWQgPSAwO1xyXG4gICAgfVxyXG4vKlxyXG4gICAgYXR0cmlidXRlIHZlYzQgdlBvc2l0aW9uO1xyXG4gICAgYXR0cmlidXRlIHZlYzIgaW5fVGV4dHVyZTtcclxuICAgIGF0dHJpYnV0ZSAgdmVjNCBpbl9Db2xvcjtcclxuICAgIGF0dHJpYnV0ZSAgdmVjNCBpbl9GYWNlQ29sb3I7XHJcbiAgICBhdHRyaWJ1dGUgdmVjMyBpbl9Ob3JtYWw7XHJcbiAgICBhdHRyaWJ1dGUgIGZsb2F0IGluX1BvdztcclxuXHJcbiAgICBhdHRyaWJ1dGUgIGZsb2F0IGluX3VzZV90ZXh0dXJlO1xyXG4gICAgYXR0cmlidXRlICBmbG9hdCBpbl9mbGF0X2NvbG9yO1xyXG4gICAgYXR0cmlidXRlICBmbG9hdCBpbl9kZWNhbF90ZXh0dXJlO1xyXG5cclxuICAgIGF0dHJpYnV0ZSAgdmVjMiBpbl9Nb2R1bG91cztcclxuKi9cclxuLy9idWZmZXIuZ2VvbWV0cnlcclxuICAgIGJ1ZmZlci5nZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlci5wb3NpdGlvbiwgMyApICk7XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX1RleHR1cmUnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXIuaW5fVGV4dHVyZSwgMiApICk7XHJcbiAgICAgLy9idWZmZXIuZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnaW5fQ29sb3InLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXIuaW5fQ29sb3IsIDQsdHJ1ZSApICk7XHJcbiAgICAgLy9idWZmZXIuZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnaW5fRmFjZUNvbG9yJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVyLmluX0ZhY2VDb2xvciwgNCwgdHJ1ZSApICk7XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX05vcm1hbCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlci5pbl9Ob3JtYWwsIDMgKSApO1xyXG4gICAgIC8vYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX1BvdycsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlci5pbl9Qb3csIDEgKSApO1xyXG4gICAgIGJ1ZmZlci5nZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdpbl91c2VfdGV4dHVyZScsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlci5pbl91c2VfdGV4dHVyZSwgMSApICk7XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX2ZsYXRfY29sb3InLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXIuaW5fZmxhdF9jb2xvciwgMSApICk7XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX2RlY2FsX3RleHR1cmUnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBidWZmZXIuaW5fZGVjYWxfdGV4dHVyZSwgMSApICk7XHJcbiAgICAgYnVmZmVyLmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2luX01vZHVsb3VzJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVyLmluX01vZHVsb3VzLCAyLCBmYWxzZSApICk7XHJcblxyXG5cclxuXHJcbiAgICAgYnVmZmVyLmV4cGFuZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB2YXIgbmV3YnVmO1xyXG4gICAgICAgICB0aGlzLmF2YWlsYWJsZSA9ICggdGhpcy5hdmFpbGFibGUgKyAxICkgKiAyO1xyXG5cclxuICAgICAgICAgbmV3YnVmID0gICBuZXcgRmxvYXQzMkFycmF5KCBuZXcgQXJyYXlCdWZmZXIoIHRoaXMuYXZhaWxhYmxlICogKCA0ICogMyApICkgKTtcclxuICAgICAgICAgbmV3YnVmLnNldCggYnVmZmVyLnBvc2l0aW9uICk7XHJcbiAgICAgICAgIGJ1ZmZlci5wb3NpdGlvbiA9IG5ld2J1ZjtcclxuXHJcbiAgICAgICAgIG5ld2J1ZiA9ICAgbmV3IEZsb2F0MzJBcnJheSggbmV3IEFycmF5QnVmZmVyKCB0aGlzLmF2YWlsYWJsZSAqICggNCAqIDIgKSApICk7XHJcbiAgICAgICAgIG5ld2J1Zi5zZXQoIGJ1ZmZlci5pbl9UZXh0dXJlICk7XHJcbiAgICAgICAgIGJ1ZmZlci5pbl9UZXh0dXJlID0gbmV3YnVmO1xyXG5cclxuICAgICAgICAgbmV3YnVmID0gICBuZXcgRmxvYXQzMkFycmF5KCBuZXcgQXJyYXlCdWZmZXIoIHRoaXMuYXZhaWxhYmxlICogKCA0ICogMyApICkgKTtcclxuICAgICAgICAgbmV3YnVmLnNldCggYnVmZmVyLmluX05vcm1hbCApO1xyXG4gICAgICAgICBidWZmZXIuaW5fTm9ybWFsID0gbmV3YnVmO1xyXG5cclxuICAgICAgICAgbmV3YnVmID0gICBuZXcgVWludDhBcnJheSggbmV3IEFycmF5QnVmZmVyKCB0aGlzLmF2YWlsYWJsZSAqICggMSAqIDEgKSApICk7XHJcbiAgICAgICAgIG5ld2J1Zi5zZXQoIGJ1ZmZlci5pbl91c2VfdGV4dHVyZSApO1xyXG4gICAgICAgICBidWZmZXIuaW5fdXNlX3RleHR1cmUgPSBuZXdidWY7XHJcblxyXG4gICAgICAgICBuZXdidWYgPSAgIG5ldyBVaW50OEFycmF5KCBuZXcgQXJyYXlCdWZmZXIoIHRoaXMuYXZhaWxhYmxlICogKCAxICogMSApICkgKTtcclxuICAgICAgICAgbmV3YnVmLnNldCggYnVmZmVyLmluX2ZsYXRfY29sb3IgKTtcclxuICAgICAgICAgYnVmZmVyLmluX2ZsYXRfY29sb3IgPSBuZXdidWY7XHJcblxyXG4gICAgICAgICBuZXdidWYgPSAgIG5ldyBVaW50OEFycmF5KCBuZXcgQXJyYXlCdWZmZXIoIHRoaXMuYXZhaWxhYmxlICogKCAxICogMSApICkgKTtcclxuICAgICAgICAgbmV3YnVmLnNldCggYnVmZmVyLmluX2RlY2FsX3RleHR1cmUgKTtcclxuICAgICAgICAgYnVmZmVyLmluX2RlY2FsX3RleHR1cmUgPSBuZXdidWY7XHJcblxyXG4gICAgICAgICBuZXdidWYgPSAgIG5ldyBJbnQ4QXJyYXkoIG5ldyBBcnJheUJ1ZmZlciggdGhpcy5hdmFpbGFibGUgKiAoIDQgKiAyICkgKSApO1xyXG4gICAgICAgICBuZXdidWYuc2V0KCBidWZmZXIuaW5fTW9kdWxvdXMgKTtcclxuICAgICAgICAgYnVmZmVyLmluX01vZHVsb3VzID0gbmV3YnVmO1xyXG5cclxuICAgICB9O1xyXG5cclxuICAgICBidWZmZXIubWFya0RpcnR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICBbXCJwb3NpdGlvblwiLFwiaW5fVGV4dHVyZVwiXHJcbiAgICAgICAgICxcImluX01vZHVsb3VzXCJcclxuICAgICAgICAgLFwiaW5fTm9ybWFsXCIsIFwiaW5fZmxhdF9jb2xvclwiLCBcImluX3VzZV90ZXh0dXJlXCIsIFwiaW5fZGVjYWxfdGV4dHVyZVwiXHJcbiAgICAgXS5mb3JFYWNoKCAoYXR0KT0+e1xyXG4gICAgICAgICAgICAgdmFyIGF0dHJpYiA9IHRoaXMuZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKGF0dCk7XHJcbiAgICAgICAgICAgICBhdHRyaWIubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgYXR0cmliLmFycmF5ID0gYnVmZmVyW2F0dF07XHJcbiAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuaW5fVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5pbl9Ob3JtYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuaW5fdXNlX3RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMuaW5fZmxhdF9jb2xvci5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgIHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5pbl9kZWNhbF90ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLmluX01vZHVsb3VzLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICB9XHJcblxyXG4gICAgIGJ1ZmZlci5hZGRQb2ludCA9IGZ1bmN0aW9uKCB2LCBuLCB1dCwgZmxhdCwgZHQsIG1vZCApIHtcclxuICAgICAgICAgaWYoIHRoaXMudXNlZCA+PSB0aGlzLmF2YWlsYWJsZSApXHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHUzID0gdGhpcy51c2VkICogMztcclxuICAgICAgICAgICAgY29uc3QgdTQgPSB0aGlzLnVzZWQgKiA0O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25bdTMgKyAwIF0gPSB2Lng7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblt1MyArIDEgXSA9IHYueTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uW3UzICsgMiBdID0gdi56O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5pbl9Ob3JtYWxbdTMgKyAwXSA9IG4/bi54OjA7XHJcbiAgICAgICAgdGhpcy5pbl9Ob3JtYWxbdTMgKyAxXSA9IG4/bi55OjA7XHJcbiAgICAgICAgdGhpcy5pbl9Ob3JtYWxbdTMgKyAyXSA9IG4/bi56OjE7XHJcblxyXG4gICAgICAgIHRoaXMuaW5fdXNlX3RleHR1cmVbIHRoaXMudXNlZCBdID0gdXQ7XHJcbiAgICAgICAgdGhpcy5pbl9mbGF0X2NvbG9yW3RoaXMudXNlZF0gPSBmbGF0O1xyXG4gICAgICAgIHRoaXMuaW5fZGVjYWxfdGV4dHVyZVt0aGlzLnVzZWRdID0gZHQ7XHJcbiAgICAgICAgdGhpcy5pbl9Nb2R1bG91c1t0aGlzLnVzZWQgKiAyICsgMF0gPSBtb2RbMF07XHJcbiAgICAgICAgdGhpcy5pbl9Nb2R1bG91c1t0aGlzLnVzZWQgKiAyICsgMV0gPSBtb2RbMV07XHJcblxyXG4gICAgICAgIHRoaXMudXNlZCsrO1xyXG4gICAgfTtcclxuXHJcbiAgICAgLy9idWZmZXIuXHJcblxyXG4gICAgIGJ1ZmZlci5BZGRRdWFkID0gZnVuY3Rpb24oIG5vcm0sIFAxLFAyLFAzLFA0ICkge1xyXG5cclxuICAgICAgICAgY29uc3QgbWluID0gMDtcclxuICAgICAgICAgY29uc3QgbWF4ID0gMTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDEsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQNCwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuICAgICBidWZmZXIuQWRkUXVhZFRleHR1cmUgPSBmdW5jdGlvbiggbm9ybSwgUDEsUDIsUDMsUDQsdGV4dHVyZUNvb3JkcyApIHtcclxuICAgICAgICAgY29uc3QgbWluID0gMDtcclxuICAgICAgICAgY29uc3QgbWF4ID0gMTtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDEsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQNCwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuICAgICBjb25zdCB3aGl0ZSA9IG5ldyBUSFJFRS5WZWN0b3I0KCAwLjUsIDAuNSwgMCwgMSApO1xyXG4gICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkVGV4ID0gZnVuY3Rpb24oIHF1YWQsIHV2cywgbm9ybSwgcG93ICkge1xyXG4gICAgICAgICB2YXIgbWluID0gMDtcclxuICAgICAgICAgdmFyIG1heCA9IDEuMDtcclxuICAgICAgICAgdGhpcy5hZGRQb2ludCggUDEsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMiwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQNCwgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBQMywgIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCA9IGZ1bmN0aW9uKCBxdWFkLCBub3JtICkge1xyXG4gICAgICAgICB2YXIgbWluID0gLTI7XHJcbiAgICAgICAgIHZhciBtYXggPSAyO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzBdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzFdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzFdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWluXSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzNdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttYXgsbWF4XSApO1xyXG4gICAgICAgICB0aGlzLmFkZFBvaW50KCBxdWFkWzJdLCB1bmRlZmluZWQsIG5vcm0sIGZhbHNlLCBmYWxzZSwgZmFsc2UsIFttaW4sbWF4XSApO1xyXG4gICAgIH1cclxuXHJcbiAgICAgYnVmZmVyLm1ha2VWb3hDdWJlID0gZnVuY3Rpb24oc2l6ZSkge1xyXG4gICAgICAgIHZhciB2MSA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsMSwxKTtcclxuICAgICAgICB2YXIgdjIgPSBuZXcgVEhSRUUuVmVjdG9yMygtMSwxLDEpO1xyXG4gICAgICAgIHZhciB2MyA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsLTEsMSk7XHJcbiAgICAgICAgdmFyIHY0ID0gbmV3IFRIUkVFLlZlY3RvcjMoLTEsLTEsMSk7XHJcbiAgICAgICAgdmFyIHY1ID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwxLC0xKTtcclxuICAgICAgICB2YXIgdjYgPSBuZXcgVEhSRUUuVmVjdG9yMygtMSwxLC0xKTtcclxuICAgICAgICB2YXIgdjcgPSBuZXcgVEhSRUUuVmVjdG9yMygxLC0xLC0xKTtcclxuICAgICAgICB2YXIgdjggPSBuZXcgVEhSRUUuVmVjdG9yMygtMSwtMSwtMSk7XHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIFt2MS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYyLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2NC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3I0KCAwLjIsIDAuMCwgMSwgMS4wICksIG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwLjUgKVxyXG4gICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNGb3J3YXJkXHJcbiAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCggW3Y2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjUuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2OC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY3LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjQoIDAuMiwgMSwgMCwgMS4wICksIG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwLjUgKVxyXG4gICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNCYWNrd2FyZFxyXG4gICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIFt2NS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yNCggMSwgMC4wLCAwLCAxLjAgKSwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNVcFxyXG4gICAgICAgICAgICAgICAgLCAyMDAgKVxyXG4gICAgICAgIGJ1ZmZlci5hZGRTaW1wbGVRdWFkKCBbdjMuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2NC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY3LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjguY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKV1cclxuICAgICAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDEsIDEsIDEuMCApLCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM0Rvd25cclxuICAgICAgICAgICAgICAgICwgMjAwIClcclxuICAgICAgICBidWZmZXIuYWRkU2ltcGxlUXVhZCggW3Y1LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjEuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2Ny5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHYzLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSldXHJcbiAgICAgICAgICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3I0KCAxLCAwLjAsIDEsIDEuMCApLCBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMC41IClcclxuICAgICAgICAgICAgICAgICwgVEhSRUUuVmVjdG9yM1JpZ2h0XHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgYnVmZmVyLmFkZFNpbXBsZVF1YWQoIFt2Mi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpLHY2LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoc2l6ZSksdjQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihzaXplKSx2OC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKHNpemUpXVxyXG4gICAgICAgICAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yNCggMSwgMSwgMCwgMS4wIClcclxuICAgICAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAuNSApXHJcbiAgICAgICAgICAgICAgICAsIFRIUkVFLlZlY3RvcjNMZWZ0XHJcbiAgICAgICAgICAgICAgICAsIDIwMCApXHJcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoICApO1xyXG4gICAgIH1cclxuXHJcbiAgICAgLy92YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHsgY29sb3I6IDB4ZmYwMDAwIH0gKTtcclxuICAgICAvL3ZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xyXG4gICAgIHJldHVybiBidWZmZXI7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKCkge1xyXG4gICAgYnVmZmVyLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG59XHJcbiIsIlxyXG5cclxuVm94ZWxhcml1bS5HZW9tZXRyeVNoYWRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xyXG5cclxuXHR1bmlmb3Jtczoge1xyXG4gICAgICAgIGVkZ2Vfb25seSA6IHsgdHlwZTogXCJmXCIsIHZhbHVlIDogMCB9LFxyXG4gICAgICAgIG1hcCA6IHsgdHlwZSA6IFwidFwiLCB2YWx1ZSA6IG51bGwgfVxyXG5cdH0sXHJcbiAgICB0cmFuc3BhcmVudCA6IHRydWUsXHJcbiAgICAgYmxlbmRpbmc6IFRIUkVFLk5vcm1hbEJsZW5kaW5nLFxyXG5cdHZlcnRleFNoYWRlcjogYFxyXG4gICAgI2RlZmluZSBVU0VfTUFQXHJcblxyXG4gICAgI2luY2x1ZGUgPGNvbW1vbj5cclxuICAgICNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cclxuICAgICNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XHJcbiAgICAjaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxyXG4gICAgI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxyXG4gICAgI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxyXG4gICAgI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxyXG4gICAgI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxyXG4gICAgI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cclxuXHJcbiAgICBhdHRyaWJ1dGUgIHZlYzQgaW5fQ29sb3I7XHJcbiAgICBhdHRyaWJ1dGUgIHZlYzQgaW5fRmFjZUNvbG9yO1xyXG4gICAgYXR0cmlidXRlICBmbG9hdCBpbl9Qb3c7XHJcblxyXG4gICAgYXR0cmlidXRlICBmbG9hdCBpbl91c2VfdGV4dHVyZTtcclxuICAgIGF0dHJpYnV0ZSAgZmxvYXQgaW5fZmxhdF9jb2xvcjtcclxuICAgIGF0dHJpYnV0ZSAgZmxvYXQgaW5fZGVjYWxfdGV4dHVyZTtcclxuXHJcbiAgICBhdHRyaWJ1dGUgIHZlYzIgaW5fTW9kdWxvdXM7XHJcbiAgICB2YXJ5aW5nIHZlYzQgZXhfQ29sb3I7XHJcbiAgICB2YXJ5aW5nIHZlYzIgZXhfdGV4Q29vcmQ7XHJcbiAgICB2YXJ5aW5nIGZsb2F0IGV4X0RvdDtcclxuICAgIHZhcnlpbmcgIGZsb2F0IGV4X1BvdztcclxuICAgIHZhcnlpbmcgIGZsb2F0IGV4X1BvdzI7XHJcbiAgICB2YXJ5aW5nIGZsb2F0IHZEZXB0aDtcclxuICAgIHZhcnlpbmcgZmxvYXQgZXhfdXNlX3RleHR1cmU7XHJcbiAgICB2YXJ5aW5nIGZsb2F0IGV4X2ZsYXRfY29sb3I7XHJcbiAgICB2YXJ5aW5nIGZsb2F0IGV4X2RlY2FsX3RleHR1cmU7XHJcbiAgICB2YXJ5aW5nIHZlYzQgZXhfRmFjZUNvbG9yO1xyXG4gICAgI2RlZmluZSBFUFNJTE9OIDFlLTZcclxuXHJcbiAgICB2YXJ5aW5nICB2ZWMyIGV4X01vZHVsb3VzO1xyXG5cclxuICAgIHZhcnlpbmcgdmVjNCBmZV9ub3JtYWwsIGxpZ2h0X2RpciwgZXllX3ZlYywgbG9va2F0O1xyXG4gICAgLy9jb25zdCBmbG9hdCBQSSA9ICAzLjE0MTU5MjY1O1xyXG5cclxuICAgIHZvaWQgbWFpbigpIHtcclxuXHJcbiAgICBcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XHJcbiAgICBcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxyXG4gICAgXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxyXG4gICAgXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxyXG5cclxuICAgIFx0I2lmZGVmIFVTRV9FTlZNQVBcclxuXHJcbiAgICBcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XHJcbiAgICBcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XHJcbiAgICBcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cclxuICAgIFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxyXG5cclxuICAgIFx0I2VuZGlmXHJcblxyXG4gICAgXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxyXG4gICAgXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxyXG4gICAgXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxyXG5cclxuICAgICAgICAjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XHJcbi8qXHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICBcdHZlYzQgYW1iaWVudCwgZGlmZnVzZSwgc3BlY3VsYXI7XHJcbiAgICAgICAgXHRmbG9hdCBOZG90TCwgUmRvdFY7XHJcblxyXG4gICAgICAgIFx0Ly9mZV9ub3JtYWwgPSB2ZWM0KGdsX05vcm1hbE1hdHJpeCAqIGdsX05vcm1hbCwgMC4wKTtcclxuXHJcbiAgICAgICAgXHR2ZWM0IHZWZXJ0ZXggPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XHJcblxyXG4gICAgICAgIFx0Ly9saWdodF9kaXIgPSBnbF9MaWdodFNvdXJjZVswXS5wb3NpdGlvbiAtIHZWZXJ0ZXg7XHJcblxyXG4gICAgICAgIFx0ZXllX3ZlYyA9IC12VmVydGV4O1xyXG5cclxuICAgICAgICBcdHZlYzQgdGVtcF9wb3MgPSBwcm9qZWN0aW9uTWF0cml4ICogdlZlcnRleDtcclxuXHJcbiAgICAgICAgXHRmbG9hdCBkaXN0ID0gbGVuZ3RoKGV5ZV92ZWMpO1xyXG4gICAgICAgIFx0bG9va2F0ID0gZXllX3ZlYyAtIHRlbXBfcG9zO1xyXG4gICAgICAgIFx0dmVjNCBkaXIgPSB0ZW1wX3BvcyAtIGV5ZV92ZWM7XHJcbiAgICAgICAgXHR2ZWM0IGNlbnRlciA9IG5vcm1hbGl6ZSgtZXllX3ZlYyk7XHJcbiAgICAgICAgXHR2ZWM0IHByb2ogPSBkb3QodGVtcF9wb3MsIG5vcm1hbGl6ZSgtbG9va2F0KSkgKiBub3JtYWxpemUoLWxvb2thdCk7XHJcblxyXG4gICAgICAgIFx0dmVjNCBjID0gdGVtcF9wb3MgLSBwcm9qO1xyXG5cclxuICAgICAgICBcdGZsb2F0IG1hZ25pdHVkZSA9IDEuMC1hY29zKGRvdChub3JtYWxpemUoLWV5ZV92ZWMpLCBub3JtYWxpemUodGVtcF9wb3MpKSk7XHJcblxyXG4gICAgICAgIFx0YyA9IGxlbmd0aChjKSAqIG1hZ25pdHVkZSAqIG5vcm1hbGl6ZShjKTtcclxuXHJcbiAgICAgICAgXHR2ZWM0IGRpcjIgPSBub3JtYWxpemUoYy1sb29rYXQpO1xyXG5cclxuICAgICAgICBcdGRpcjIgPSAoZGlyMiAqIGRpc3QpO1xyXG5cclxuICAgICAgICBcdGdsX1Bvc2l0aW9uLnh5eiA9IGRpcjIueHl6O1xyXG4gICAgICAgIFx0Z2xfUG9zaXRpb24udyA9IHRlbXBfcG9zLnc7XHJcblxyXG4gICAgICAgIH1cclxuKi9cclxuICAgIFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cclxuXHJcbiAgICBcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XHJcbiAgICBcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxyXG4gICAgXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cclxuXHJcblxyXG57XHJcbiAgICAgICAgZXhfdGV4Q29vcmQgPSB1djtcclxuICAgICAgICBleF9Db2xvciA9IGluX0NvbG9yO1xyXG4gICAgICAgIGV4X0ZhY2VDb2xvciA9IGluX0ZhY2VDb2xvcjtcclxuXHJcbiAgICAgICAgLy9ub3JtYWwgPSBub3JtYWxNYXRyaXggKiBub3JtYWw7XHJcblxyXG4gICAgICAgIC8vZG90dG1wID0gZG90KCBub3JtYWwsIHZlYzMoIDAuMCwgMS4wLCAwLjAgKSApO1xyXG4gICAgICAgIC8vZG90dG1wcmlnaHQgPSBkb3QoIG5vcm1hbCwgdmVjMyggMS4wLCAwLjAsIDAuMCApICk7XHJcblxyXG4gICAgICAgIGV4X1BvdyA9IGluX1BvdzsvLyAqICgvKnNxcnQvKDEuMC1kb3R0bXByaWdodCpkb3R0bXByaWdodCkpO1xyXG4gICAgICAgIGV4X1BvdzIgPSBpbl9Qb3c7Ly8gKiAoLypzcXJ0LygxLjAtZG90dG1wKmRvdHRtcCkpO1xyXG5cclxuICAgICAgICBleF91c2VfdGV4dHVyZSA9IGluX3VzZV90ZXh0dXJlO1xyXG4gICAgICAgIGV4X2ZsYXRfY29sb3IgPSBpbl9mbGF0X2NvbG9yO1xyXG4gICAgICAgIGV4X01vZHVsb3VzID0gaW5fTW9kdWxvdXM7XHJcbn1cclxuXHJcbiAgICB9XHJcbiAgICBgLFxyXG5mcmFnbWVudFNoYWRlcjpgXHJcbiAgICB1bmlmb3JtIHZlYzMgZGlmZnVzZTtcclxuICAgIHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcclxuXHJcbiAgICAjaWZuZGVmIEZMQVRfU0hBREVEXHJcblxyXG4gICAgXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcclxuXHJcbiAgICAjZW5kaWZcclxuICAgICNkZWZpbmUgVVNFX01BUFxyXG5cclxuICAgICNpbmNsdWRlIDxjb21tb24+XHJcbiAgICAjaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cclxuICAgICNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxyXG4gICAgI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxyXG4gICAgI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxyXG4gICAgI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XHJcbiAgICAjaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cclxuICAgICNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cclxuICAgICNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cclxuICAgICNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxyXG4gICAgI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XHJcbiAgICAjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XHJcblxyXG4gICAgdmFyeWluZyB2ZWMyIGV4X3RleENvb3JkO1xyXG4gICAgdmFyeWluZyB2ZWM0IGV4X0NvbG9yO1xyXG5cclxuICAgIHZhcnlpbmcgZmxvYXQgZXhfUG93O1xyXG4gICAgdmFyeWluZyBmbG9hdCBleF9Qb3cyO1xyXG4gICAgdmFyeWluZyBmbG9hdCBleF91c2VfdGV4dHVyZTtcclxuICAgIHZhcnlpbmcgZmxvYXQgZXhfZmxhdF9jb2xvcjtcclxuICAgIHZhcnlpbmcgdmVjMiBleF9Nb2R1bG91cztcclxuICAgIHZhcnlpbmcgdmVjNCBleF9GYWNlQ29sb3I7XHJcbiAgICAvL3VuaWZvcm0gc2FtcGxlcjJEIHRleDtcclxuICAgIHVuaWZvcm0gZmxvYXQgZWRnZV9vbmx5O1xyXG5cclxuICAgIHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcclxuICAgIHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcclxuXHJcbiAgICB2b2lkIG1haW4oKSB7XHJcblxyXG4gICAgXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxyXG5cclxuICAgIFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XHJcblxyXG4gICAgXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XHJcbiAgICBcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XHJcbiAgICBcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cclxuICAgIFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxyXG4gICAgXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxyXG4gICAgXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy9pZigyLjAgPiAxLjApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIGV4X3VzZV90ZXh0dXJlID4gMC41IClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiggZWRnZV9vbmx5ID4gMC41IClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZnVzZUNvbG9yID0gdmVjNCgxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZnVzZUNvbG9yID0gdmVjNCggdGV4dHVyZTJEKCBtYXAsIGV4X3RleENvb3JkICkucmdiLCAxLjAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vICBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBleF90ZXhDb29yZCwgdGV4dHVyZTJEKCBtYXAsIGV4X3RleENvb3JkICkuciwgMS4wICk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kaWZmdXNlQ29sb3IgPXZlYzQoZXhfdGV4Q29vcmQueCxleF90ZXhDb29yZC55LDAsMSk7Ly8gZXhfQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKCBleF9mbGF0X2NvbG9yID4gMC41IClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWZmdXNlQ29sb3IgPXZlYzQoMSwwLDEsMSk7Ly8gZXhfQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgYSA9IG1vZChleF9Nb2R1bG91cy54ICswLjUsIDEuMCApLTAuNTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBiID0gbW9kKGV4X01vZHVsb3VzLnkgKzAuNSwgMS4wICktMC41O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBnO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyB3aGl0ZTtcclxuICAgICAgICAgICAgICAgICAgICBhID0gNC4wKigwLjI1LWEqYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiA9IDQuMCooMC4yNS1iKmIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGEgPSBwb3coIGFicyhhKSwgZXhfUG93ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiA9IHBvdyggYWJzKGIpLCBleF9Qb3cyICk7XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vZyA9IHBvdyggKCBtYXgoYSxiKSksaW5fUG93KTtcclxuICAgICAgICAgICAgICAgICAgICAvL2ggPSBwb3coICggYSpiKSxpbl9Qb3cvNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZyA9IG1pbigxLjAsYithKTtcclxuICAgICAgICAgICAgICAgICAgICBoID0gbWF4KChiK2EpLTEuMCwwLjApLzMuMDtcclxuICAgICAgICAgICAgICAgICAgICB3aGl0ZSA9IHZlYzMoMS4wLDEuMCwxLjApICogbWF4KGV4X0NvbG9yLnIsbWF4KGV4X0NvbG9yLmcsZXhfQ29sb3IuYikpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vXHRkaWZmdXNlQ29sb3IgPSB2ZWM0KCBoICogd2hpdGUgKyAoZyAqIGV4X0NvbG9yLnJnYiksIGV4X0NvbG9yLmEgKSA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIGRpZmZ1c2VDb2xvciA9IHZlYzQoIGcgKiBleF9Db2xvci5yZ2IsIGV4X0NvbG9yLmEgKSA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGVkZ2Vfb25seSA+IDAuNSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBoKiAoIHdoaXRlIC0gZXhfRmFjZUNvbG9yLnJnYiApKyAoZyogZXhfQ29sb3IucmdiKSwgKGcgKiBleF9Db2xvci5hKSApIDtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBleF9GYWNlQ29sb3IuYSooMS4wLWcpKmV4X0ZhY2VDb2xvci5yZ2IgKyBoKiAoIHdoaXRlIC0gZXhfRmFjZUNvbG9yLnJnYiApICsgKGcqIGV4X0NvbG9yLnJnYiksICgxLjAtZykqZXhfRmFjZUNvbG9yLmEgKyAoZyAqIGV4X0NvbG9yLmEpICkgO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZGlmZnVzZUNvbG9yID0gdmVjNCggKDEuMC1nKSpleF9GYWNlQ29sb3IucmdiICsgaCogKCB3aGl0ZSAtIGV4X0ZhY2VDb2xvci5yZ2IgKSsgKGcqIGV4X0NvbG9yLnJnYiksICgxLjAtZykqZXhfRmFjZUNvbG9yLmEgKyAoZyAqIGV4X0NvbG9yLmEpICkgO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZGlmZnVzZUNvbG9yID0gdmVjNChnLGgsMSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2RpZmZ1c2VDb2xvciA9IGV4X0NvbG9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodDtcclxuICAgIFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZlYzMoIDAuMCApO1xyXG4gICAgXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciA9IHZlYzMoIDAuMCApO1xyXG4gICAgXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgPSBkaWZmdXNlQ29sb3IucmdiO1xyXG4gICAgXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XHJcblxyXG4gICAgXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XHJcblxyXG4gICAgXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2U7XHJcblxyXG4gICAgXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxyXG5cclxuICAgIFx0Z2xfRnJhZ0NvbG9yID0gZGlmZnVzZUNvbG9yOy8vdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcclxuXHJcbiAgICBcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxyXG4gICAgXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XHJcbiAgICBcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XHJcbiAgICBcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XHJcblxyXG4gICAgfVxyXG4gICAgYFxyXG59ICk7XHJcblxyXG4vKlxyXG4jaWYgIU1PUkVfUk9VTkRFRFxyXG4gICAgICAgICAgICAgIGcgPSBzcXJ0KChhKmErYipiKS8yKTtcclxuICAgICAgICAgICAgICBoID0gcG93KGcsMjAwLjApICogMC41OyAgLy8gdXAgdG8gNjAwIGV2ZW4gd29ya3MuLi5cclxuICAgICAgICAgICAgICBnID0gcG93KCAoIG1heChhLGIpKSw0MDApO1xyXG4gICAgICAgICAgICAgIGggPSAoZytoKTtcclxuICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCBoICogaW5fQ29sb3IucmdiLCBpbl9Db2xvci5hICkgO1xyXG4jZWxzZVxyXG4qL1xyXG5cclxufVxyXG4iLCJcclxuXHJcblZveGVsYXJpdW0uR2VvbWV0cnlTaGFkZXJNb25vID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKCB7XHJcblxyXG5cdHVuaWZvcm1zOiB7XHJcbiAgICAgICAgaW5fQ29sb3IgOiB7IHZhbHVlIDogbmV3IFRIUkVFLlZlY3RvcjMoKSB9LFxyXG4gICAgICAgIGluX0ZhY2VDb2xvciA6IHsgdmFsdWUgOiBuZXcgVEhSRUUuVmVjdG9yMygpIH0sXHJcbiAgICAgICAgaW5fUG93IDogeyB2YWx1ZSA6IDAuMCB9LFxyXG4gICAgICAgIGVkZ2Vfb25seSA6IHsgdmFsdWUgOiAwIH0sXHJcblx0fSxcclxuICAgIHRyYW5zcGFyZW50IDogdHJ1ZSxcclxuICAgICBibGVuZGluZzogVEhSRUUuTm9ybWFsQmxlbmRpbmcsXHJcblx0dmVydGV4U2hhZGVyOiBgXHJcbiAgICAgICAgICAgICAgICAvL2F0dHJpYnV0ZSB2ZWM0IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgdW5pZm9ybSBtYXQzIHJvdGF0aW9uO1xyXG4gICAgXHRcdFx0YXR0cmlidXRlIHZlYzIgaW5fVGV4dHVyZTtcclxuICAgIFx0XHRcdHVuaWZvcm0gIHZlYzQgaW5fQ29sb3I7XHJcbiAgICBcdFx0XHR1bmlmb3JtICB2ZWM0IGluX0ZhY2VDb2xvcjtcclxuICAgIFx0XHRcdGF0dHJpYnV0ZSB2ZWMzIGluX05vcm1hbDtcclxuICAgIFx0XHRcdHVuaWZvcm0gIGZsb2F0IGluX1BvdztcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSAgZmxvYXQgaW5fdXNlX3RleHR1cmU7XHJcbiAgICBcdFx0XHRhdHRyaWJ1dGUgIGZsb2F0IGluX2ZsYXRfY29sb3I7XHJcbiAgICBcdFx0XHRhdHRyaWJ1dGUgIGZsb2F0IGluX2RlY2FsX3RleHR1cmU7XHJcblxyXG4gICAgICAgIFx0XHRhdHRyaWJ1dGUgIHZlYzIgaW5fTW9kdWxvdXM7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzQgZXhfQ29sb3I7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzIgZXhfdGV4Q29vcmQ7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIGZsb2F0IGV4X0RvdDtcclxuICAgIFx0XHRcdHZhcnlpbmcgIGZsb2F0IGV4X1BvdztcclxuICAgICAgICAgICAgICAgIHZhcnlpbmcgIGZsb2F0IGV4X1BvdzI7XHJcbiAgICBcdFx0XHRmbG9hdCBleF91c2VfdGV4dHVyZTtcclxuICAgIFx0XHRcdGZsb2F0IGV4X2ZsYXRfY29sb3I7XHJcbiAgICBcdFx0XHRmbG9hdCBleF9kZWNhbF90ZXh0dXJlO1xyXG4gICAgXHRcdFx0dmFyeWluZyB2ZWM0IGV4X0ZhY2VDb2xvcjtcclxuXHJcbiAgICBcdFx0XHR2YXJ5aW5nICB2ZWMyIGV4X01vZHVsb3VzO1xyXG4gICAgXHRcdFx0dm9pZCBtYWluKHZvaWQpIHtcclxuICAgIFx0XHRcdFx0dmVjMyBub3JtYWw7XHJcbiAgICBcdFx0XHRcdGZsb2F0IGRvdHRtcDtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBkb3R0bXByaWdodDtcclxuICAgIFx0XHRcdCAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XHJcblxyXG4gICAgXHRcdFx0XHRleF90ZXhDb29yZCA9IGluX1RleHR1cmUvMzI3NjguMDtcclxuICAgIFx0XHRcdFx0ZXhfQ29sb3IgPSBpbl9Db2xvcjtcclxuICAgIFx0XHRcdFx0ZXhfRmFjZUNvbG9yID0gaW5fRmFjZUNvbG9yO1xyXG5cclxuICAgIFx0XHRcdFx0bm9ybWFsID0gbm9ybWFsTWF0cml4ICogaW5fTm9ybWFsO1xyXG5cclxuICAgIFx0XHRcdFx0ZG90dG1wID0gZG90KCBub3JtYWwsIHZlYzMoIDAuMCwgMS4wLCAwLjAgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvdHRtcHJpZ2h0ID0gZG90KCBub3JtYWwsIHZlYzMoIDEuMCwgMC4wLCAwLjAgKSApO1xyXG5cclxuICAgIFx0XHRcdFx0ZXhfUG93ID0gaW5fUG93Oy8vICogKC8qc3FydCovKDEuMC1kb3R0bXByaWdodCpkb3R0bXByaWdodCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4X1BvdzIgPSBpbl9Qb3c7Ly8gKiAoLypzcXJ0Ki8oMS4wLWRvdHRtcCpkb3R0bXApKTtcclxuXHJcbiAgICBcdFx0XHRcdGV4X3VzZV90ZXh0dXJlID0gaW5fdXNlX3RleHR1cmU7XHJcbiAgICBcdFx0XHRcdGV4X2ZsYXRfY29sb3IgPSBpbl9mbGF0X2NvbG9yO1xyXG4gICAgXHRcdFx0XHRleF9Nb2R1bG91cyA9IGluX01vZHVsb3VzO1xyXG4gICAgXHRcdFx0fVxyXG4gICAgYCwvLy5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKSxcclxuXHRmcmFnbWVudFNoYWRlcjpgXHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzIgZXhfdGV4Q29vcmQ7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzQgZXhfQ29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyeWluZyBmbG9hdCBleF9Qb3c7XHJcbiAgICAgICAgICAgICAgICB2YXJ5aW5nIGZsb2F0IGV4X1BvdzI7XHJcbiAgICBcdFx0XHRmbG9hdCBleF91c2VfdGV4dHVyZTtcclxuICAgIFx0XHRcdGZsb2F0IGV4X2ZsYXRfY29sb3I7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzIgZXhfTW9kdWxvdXM7XHJcbiAgICBcdFx0XHR2YXJ5aW5nIHZlYzQgZXhfRmFjZUNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdW5pZm9ybSAgZmxvYXQgZWRnZV9vbmx5O1xyXG4gICAgXHRcdFx0dW5pZm9ybSBzYW1wbGVyMkQgdGV4O1xyXG4gICAgXHRcdFx0dm9pZCBtYWluKHZvaWQpIHtcclxuICAgIFx0XHRcdCAgaWYoIGV4X3VzZV90ZXh0dXJlID4gMC41IClcclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdGdsX0ZyYWdDb2xvciA9IGV4X0NvbG9yICogdGV4dHVyZTJEKCB0ZXgsIGV4X3RleENvb3JkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9dmVjNCgxLDAsMCwxKTsvLyBleF9Db2xvcjtcclxuICAgIFx0XHRcdFx0fVxyXG4gICAgXHRcdFx0XHRlbHNlIGlmKCBleF9mbGF0X2NvbG9yID4gMC41IClcclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdGdsX0ZyYWdDb2xvciA9dmVjNCgxLDAsMSwxKTsvLyBleF9Db2xvcjtcclxuICAgIFx0XHRcdFx0fVxyXG4gICAgXHRcdFx0XHRlbHNlXHJcbiAgICBcdFx0XHRcdHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgYSA9IG1vZChleF9Nb2R1bG91cy54ICswLjUsIDEuMCApLTAuNTtcclxuICAgICAgICBcdFx0XHRcdGZsb2F0IGIgPSBtb2QoZXhfTW9kdWxvdXMueSArMC41LCAxLjAgKS0wLjU7XHJcblxyXG4gICAgICAgIFx0XHRcdFx0ZmxvYXQgZztcclxuICAgICAgICBcdFx0XHRcdGZsb2F0IGg7XHJcbiAgICAgICAgXHRcdFx0XHR2ZWMzIHdoaXRlO1xyXG4gICAgICAgIFx0XHRcdFx0YSA9IDQuMCooMC4yNS1hKmEpO1xyXG4gICAgICAgIFx0XHRcdFx0YiA9IDQuMCooMC4yNS1iKmIpO1xyXG4gICAgICAgIFx0XHRcdFx0YSA9IHBvdyggYSwgZXhfUG93ICk7XHJcbiAgICAgICAgXHRcdFx0XHRiID0gcG93KCBiLCBleF9Qb3cyICk7XHJcblxyXG4gICAgICAgIFx0XHRcdCAvL2cgPSBwb3coICggbWF4KGEsYikpLGluX1Bvdyk7XHJcbiAgICAgICAgXHRcdFx0XHQvL2ggPSBwb3coICggYSpiKSxpbl9Qb3cvNCk7XHJcbiAgICAgICAgXHRcdFx0XHRnID0gbWluKDEuMCxiK2EpO1xyXG4gICAgICAgIFx0XHRcdFx0aCA9IG1heCgoYithKS0xLjAsMC4wKS8zLjA7XHJcbiAgICAgICAgXHRcdFx0XHR3aGl0ZSA9IHZlYzMoMS4wLDEuMCwxLjApICogbWF4KGV4X0NvbG9yLnIsbWF4KGV4X0NvbG9yLmcsZXhfQ29sb3IuYikpO1xyXG4gICAgICAgIFx0XHRcdC8vXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBoICogd2hpdGUgKyAoZyAqIGV4X0NvbG9yLnJnYiksIGV4X0NvbG9yLmEgKSA7XHJcbiAgICAgICAgXHRcdFx0Ly8gIGdsX0ZyYWdDb2xvciA9IHZlYzQoIGcgKiBleF9Db2xvci5yZ2IsIGV4X0NvbG9yLmEgKSA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGVkZ2Vfb25seSA+IDAuNSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoIGgqICggd2hpdGUgLSBleF9GYWNlQ29sb3IucmdiICkrIChnKiBleF9Db2xvci5yZ2IpLCAoZyAqIGV4X0NvbG9yLmEpICkgO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICBcdFx0XHQgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCggZXhfRmFjZUNvbG9yLmEqKDEuMC1nKSpleF9GYWNlQ29sb3IucmdiICsgaCogKCB3aGl0ZSAtIGV4X0ZhY2VDb2xvci5yZ2IgKSsgKGcqIGV4X0NvbG9yLnJnYiksICgxLjAtZykqZXhfRmFjZUNvbG9yLmEgKyAoZyAqIGV4X0NvbG9yLmEpICkgO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoIGV4X0ZhY2VDb2xvci5hKigxLjAtZykqZXhfRmFjZUNvbG9yLnJnYiArICAoZyogZXhfQ29sb3IucmdiKSwgKDEuMC1nKSpleF9GYWNlQ29sb3IuYSArIChnICogZXhfQ29sb3IuYSkgKSA7XHJcbiAgICBcdFx0XHR9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYCwvLy5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKVxyXG5cclxufSApO1xyXG5cclxuLypcclxuI2lmICFNT1JFX1JPVU5ERURcclxuICAgICAgICAgICAgICBnID0gc3FydCgoYSphK2IqYikvMik7XHJcbiAgICAgICAgICAgICAgaCA9IHBvdyhnLDIwMC4wKSAqIDAuNTsgIC8vIHVwIHRvIDYwMCBldmVuIHdvcmtzLi4uXHJcbiAgICAgICAgICAgICAgZyA9IHBvdyggKCBtYXgoYSxiKSksNDAwKTtcclxuICAgICAgICAgICAgICBoID0gKGcraCk7XHJcbiAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCggaCAqIGluX0NvbG9yLnJnYiwgaW5fQ29sb3IuYSApIDtcclxuI2Vsc2VcclxuKi9cclxuXHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciB2b3hlbHMgPSByZXF1aXJlKCBcIi4vdm94ZWxzLmpzXCIpXHJcblxyXG5cclxuVm94ZWxhcml1bS5CYXNpY01lc2hlciA9IGZ1bmN0aW9uKCAgKSB7XHJcbiAgICB2YXIgbWVzaGVyID0ge1xyXG5cdFx0Q3VsbGVyIDogZnVuY3Rpb24oIGNsdXN0ZXIgKSB7XHJcbiAgICAgICAgICAgIHZhciBjdWxsZXIgPSB7XHJcbiAgICAgICAgICAgICAgY2x1c3RlciA6IGNsdXN0ZXIsXHJcbiAgICBcdFx0XHRjdWxsU2VjdG9yIDogZnVuY3Rpb24oIHNlY3RvciwgaW50ZXJuYWxfZmFjZXMsIGludGVyZXN0aW5nX2ZhY2VzICkge1xyXG4gICAgXHRcdFx0XHRpZiggaW50ZXJuYWxfZmFjZXMgKVxyXG4gICAgXHRcdFx0XHRcdFJlbmRlcl9CYXNpYy5TZWN0b3JVcGRhdGVGYWNlQ3VsbGluZyggc2VjdG9yLCBmYWxzZSApO1xyXG4gICAgXHRcdFx0XHRlbHNlXHJcbiAgICBcdFx0XHRcdFx0UmVuZGVyX0Jhc2ljLlNlY3RvclVwZGF0ZUZhY2VDdWxsaW5nX1BhcnRpYWwoIHNlY3RvciwgaW50ZXJlc3RpbmdfZmFjZXMsIGZhbHNlICk7XHJcbiAgICBcdFx0XHR9LFxyXG5cclxuICAgIFx0XHRcdGN1bGxTaW5nbGVWb3hlbCA6IGZ1bmN0aW9uICggX1NlY3Rvciwgb2Zmc2V0ICkge1xyXG5cclxuICAgIFx0XHRcdFx0dmFyIE9mZnNldCA9IG5ldyBBcnJheSgxOSk7Ly91aW50WzE5XTtcclxuICAgIFx0XHRcdFx0dmFyIFZveGVsU3RhdGUgPSBuZXcgQXJyYXkoMTkpO1xyXG4gICAgXHRcdFx0XHR2YXIgVm94ZWw7XHJcbiAgICBcdFx0XHRcdHZhciBzZWN0b3IgPSBuZXcgQXJyYXkoMTkpO1xyXG5cclxuICAgIFx0XHRcdFx0dmFyIEV4dEZhY2VTdGF0ZTtcclxuICAgIFx0XHRcdFx0dmFyIEludEZhY2VTdGF0ZTtcclxuXHJcbiAgICBcdFx0XHRcdGlmKCAhKCBzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkNFTlRFUl0gPSBfU2VjdG9yICkgKSByZXR1cm47XHJcbiAgICBcdFx0XHRcdE9mZnNldFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLklOQ0VOVEVSXSA9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2x1c3RlciA9IF9TZWN0b3IuY2x1c3RlcjtcclxuICAgIFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF0gPSBvZmZzZXQgLSAoIDEgKiBjbHVzdGVyLnNlY3RvclNpemVZICk7XHJcbiAgICBcdFx0XHRcdE9mZnNldFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IG9mZnNldCArICggMSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKTtcclxuICAgIFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdID0gb2Zmc2V0ICsgKCAxICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKTtcclxuICAgIFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSA9IG9mZnNldCAtICggMSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZICk7XHJcbiAgICBcdFx0XHRcdE9mZnNldFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IG9mZnNldCArICggMSApO1xyXG4gICAgXHRcdFx0XHRPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSBvZmZzZXQgLSAoIDEgKTtcclxuXHJcbiAgICBcdFx0XHRcdGlmKCAwID09ICggKCBvZmZzZXQgLyBjbHVzdGVyLnNlY3RvclNpemVZICkgJSBjbHVzdGVyLnNlY3RvclNpemVYICkgKVxyXG4gICAgXHRcdFx0XHR7XHJcbiAgICBcdFx0XHRcdFx0aWYoICEoIHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdID0gX1NlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV0gKSApXHJcbiAgICBcdFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXSA9IFZveGVsV29ybGQuV29ya2luZ0Z1bGxTZWN0b3I7XHJcbiAgICBcdFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF0gKz0gKCBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWSApO1xyXG4gICAgXHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdGVsc2VcclxuICAgIFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXSA9IF9TZWN0b3I7XHJcblxyXG4gICAgXHRcdFx0XHRpZiggKGNsdXN0ZXIuc2VjdG9yU2l6ZVgtMSkgPT0gKCAoIG9mZnNldCAvIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSAlIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKSApXHJcbiAgICBcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRpZiggbnVsbCA9PSAoIHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IF9TZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXSApIClcclxuICAgIFx0XHRcdFx0XHRcdHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IFZveGVsV29ybGQuV29ya2luZ0Z1bGxTZWN0b3I7XHJcbiAgICBcdFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdIC09ICggY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKTtcclxuICAgIFx0XHRcdFx0fVxyXG4gICAgXHRcdFx0XHRlbHNlXHJcbiAgICBcdFx0XHRcdFx0c2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdID0gX1NlY3RvcjtcclxuXHJcbiAgICBcdFx0XHRcdGlmKCAoY2x1c3Rlci5zZWN0b3JTaXplWi0xKSA9PSAoICggb2Zmc2V0IC8gY2x1c3Rlci5zZWN0b3JTaXplWSApICUgY2x1c3Rlci5zZWN0b3JTaXplWCApIClcclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdGlmKCBudWxsID09ICggc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdID0gX1NlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkZST05UIC0gMV0gKSApXHJcbiAgICBcdFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSBWb3hlbFdvcmxkLldvcmtpbmdGdWxsU2VjdG9yO1xyXG4gICAgXHRcdFx0XHRcdE9mZnNldFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSAtPSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZICogY2x1c3Rlci5zZWN0b3JTaXplWiApO1xyXG4gICAgXHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdGVsc2VcclxuICAgIFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSBfU2VjdG9yO1xyXG5cclxuICAgIFx0XHRcdFx0aWYoIDAgPT0gKCAoIG9mZnNldCAvICggY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKSApICUgY2x1c3Rlci5zZWN0cm9TaXplWiApIClcclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdGlmKCBudWxsID09ICggc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSA9IF9TZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EIC0gMV0gKSApXHJcbiAgICBcdFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdID0gVm94ZWxXb3JsZC5Xb3JraW5nRnVsbFNlY3RvcjtcclxuICAgIFx0XHRcdFx0XHRPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdICs9ICggY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVaICk7XHJcbiAgICBcdFx0XHRcdH1cclxuICAgIFx0XHRcdFx0ZWxzZVxyXG4gICAgXHRcdFx0XHRcdHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0gPSBfU2VjdG9yO1xyXG5cclxuICAgIFx0XHRcdFx0aWYoIChjbHVzdGVyLnNlY3RvclNpemVZLTEpID09ICggb2Zmc2V0ICUgY2x1c3Rlci5zZWN0b3JTaXplWSApIClcclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdGlmKCBudWxsID09ICggc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdID0gX1NlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdICkgKVxyXG4gICAgXHRcdFx0XHRcdFx0c2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdID0gVm94ZWxXb3JsZC5Xb3JraW5nRnVsbFNlY3RvcjtcclxuICAgIFx0XHRcdFx0XHRPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gLT0gKCBjbHVzdGVyLnNlY3RvclNpemVZICk7XHJcbiAgICBcdFx0XHRcdH1cclxuICAgIFx0XHRcdFx0ZWxzZVxyXG4gICAgXHRcdFx0XHRcdHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IF9TZWN0b3I7XHJcblxyXG4gICAgXHRcdFx0XHRpZiggMCA9PSAoIG9mZnNldCAlIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSApXHJcbiAgICBcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRpZiggbnVsbCA9PSAoIHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSA9IF9TZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxXSApIClcclxuICAgIFx0XHRcdFx0XHRcdHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSA9IFZveGVsV29ybGQuV29ya2luZ0Z1bGxTZWN0b3I7XHJcbiAgICBcdFx0XHRcdFx0T2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddICs9ICggY2x1c3Rlci5zZWN0b3JTaXplWSApO1xyXG4gICAgXHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdGVsc2VcclxuICAgIFx0XHRcdFx0XHRzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSBfU2VjdG9yO1xyXG5cclxuICAgIFx0XHRcdFx0Ly8gQ29tcHV0aW5nIGFic29sdXRlIG1lbW9yeSBwb2ludGVyIG9mIGJsb2Nrc1xyXG4gICAgXHRcdFx0XHRmb3IoIHZhciBpID0gMDsgaSA8IDc7IGkrKyApXHJcbiAgICBcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRzZWN0b3JbaV0uZGF0YS5zbGVlcFN0YXRlLmNsZWFyKCBPZmZzZXRbaV0gKTtcclxuICAgIFx0XHRcdFx0XHRzZWN0b3JbaV0uRmxhZ19Jc0FjdGl2ZVZveGVscyA9IHRydWU7XHJcblxyXG4gICAgXHRcdFx0XHRcdC8vVm94ZWxfQWRkcmVzc1tpXSA9IHNlY3RvcltpXS5EYXRhLkRhdGFbT2Zmc2V0W2ldXTtcclxuICAgIFx0XHRcdFx0XHRWb3hlbFR5cGUgPSAoIHNlY3RvcltpXS5kYXRhLmRhdGFbT2Zmc2V0W2ldXSApO1xyXG4gICAgXHRcdFx0XHRcdGlmKCAoIFZveGVsVHlwZS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fRFJBV0ZVTExWT1hFTE9QQUNJVFkgKSAhPSAwIClcclxuICAgIFx0XHRcdFx0XHRcdHNlY3RvcltpXS5GbGFnX1JlbmRlcl9EaXJ0eSA9IHRydWU7XHJcbiAgICBcdFx0XHRcdFx0aWYoICggVm94ZWxUeXBlLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19EUkFXVFJBTlNQQVJFTlRSRU5ERVJJTkcgKSAhPSAwIClcclxuICAgIFx0XHRcdFx0XHRcdHNlY3RvcltpXS5GbGFnX1JlbmRlcl9EaXJ0eV9UcmFuc3BhcmVudCA9IHRydWU7XHJcbiAgICBcdFx0XHRcdFx0Vm94ZWxTdGF0ZVtpXSA9ICggVm94ZWxUeXBlLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19DVUxMSU5HQklUUyApO1xyXG4gICAgXHRcdFx0XHR9XHJcblxyXG4gICAgXHRcdFx0XHRWb3hlbFR5cGUgPSBfU2VjdG9yLmRhdGEuZGF0YVtPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkNFTlRFUl1dO1xyXG5cclxuICAgIFx0XHRcdFx0Ly8gR2V0dGluZyBjYXNlIHN1YnRhYmxlcy5cclxuXHJcbiAgICBcdFx0XHRcdEV4dEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uRXh0RmFjZVN0YXRlVGFibGVbVm94ZWxUeXBlLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19DVUxMSU5HQklUU107XHJcbiAgICBcdFx0XHRcdEludEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uSW50RmFjZVN0YXRlVGFibGVbVm94ZWxUeXBlLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19DVUxMSU5HQklUU107XHJcblxyXG4gICAgXHRcdFx0XHQvLyBDb21wdXRpbmcgZmFjZSBjdWxsaW5nIGZvciBjZW50ZXIgbWFpbiBzdG9yZWQgdm94ZWwuXHJcblxyXG4gICAgXHRcdFx0XHRGYWNlQ3VsbGluZ1tPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkNFTlRFUl1dXHJcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ9ICgoIEludEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF1dICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgKVxyXG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICB8ICggSW50RmFjZVN0YXRlW1ZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF1dICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUIClcclxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgfCAoIEludEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5GUk9OVF1dICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEIClcclxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgfCAoIEludEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXV0gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EIClcclxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgfCAoIEludEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdXSAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApXHJcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgIHwgKCBJbnRGYWNlU3RhdGVbVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXV0gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKSlcclxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgO1xyXG5cclxuICAgIFx0XHRcdFx0Ly8gQ29tcHV0aW5nIGZhY2UgY3VsbGluZyBmb3IgbmVhcmJvcmluZyB2b3hlbHMgZmFjZXMgdG91Y2hpbmcgY2VudGVyIHZveGVsLlxyXG4gICAgXHRcdFx0XHR7XHJcbiAgICBcdFx0XHRcdFx0dmFyIEN1bGxlcjtcclxuICAgIFx0XHRcdFx0XHR2YXIgQ3VsbGluZztcclxuICAgIFx0XHRcdFx0XHRpZiggKCBDdWxsZXIgPSBzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXS5DdWxsZXIgKSAhPSBudWxsIClcclxuICAgIFx0XHRcdFx0XHR7XHJcbiAgICBcdFx0XHRcdFx0XHRDdWxsaW5nID0gQ3VsbGVyLkZhY2VDdWxsaW5nO1xyXG5cclxuICAgIFx0XHRcdFx0XHRcdHZhciBvZnMgPSBPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcclxuICAgIFx0XHRcdFx0XHRcdHZhciB2YWwgPSAoICggQ3VsbGluZ1tvZnNdICYgKCB+Vm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUICkgKVxyXG4gICAgXHRcdFx0XHRcdFx0XHR8ICggRXh0RmFjZVN0YXRlW1ZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXV0gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgKSApO1xyXG4gICAgXHRcdFx0XHRcdFx0Q3VsbGluZ1tvZnNdID0gdmFsO1xyXG5cclxuICAgIFx0XHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdFx0aWYoICggQ3VsbGVyID0gc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdLkN1bGxlciApICE9IG51bGwgKVxyXG4gICAgXHRcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRcdEN1bGxpbmcgPSBDdWxsZXIuRmFjZUN1bGxpbmc7XHJcbiAgICBcdFx0XHRcdFx0XHR2YXIgb2ZzID0gT2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xyXG4gICAgXHRcdFx0XHRcdFx0dmFyIHZhbCA9ICggKCBDdWxsaW5nW29mc10gJiAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTEVGVCApIClcclxuICAgIFx0XHRcdFx0XHRcdFx0fCAoIEV4dEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdXSAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUICkgKTtcclxuICAgIFx0XHRcdFx0XHRcdEN1bGxpbmdbb2ZzXSA9IHZhbDtcclxuICAgIFx0XHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdFx0aWYoICggQ3VsbGVyID0gc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLkN1bGxlciApICE9IG51bGwgKVxyXG4gICAgXHRcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRcdEN1bGxpbmcgPSBDdWxsZXIuRmFjZUN1bGxpbmc7XHJcbiAgICBcdFx0XHRcdFx0XHR2YXIgb2ZzID0gT2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xyXG4gICAgXHRcdFx0XHRcdFx0dmFyIHZhbCA9ICggKCBDdWxsaW5nW29mc10gJiAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICkgKVxyXG4gICAgXHRcdFx0XHRcdFx0XHR8ICggRXh0RmFjZVN0YXRlW1ZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF1dICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCApICk7XHJcbiAgICBcdFx0XHRcdFx0XHRDdWxsaW5nW29mc10gPSB2YWw7XHJcbiAgICBcdFx0XHRcdFx0fVxyXG4gICAgXHRcdFx0XHRcdGlmKCAoIEN1bGxlciA9IHNlY3RvcltWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0uQ3VsbGVyICkgIT0gbnVsbCApXHJcbiAgICBcdFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdFx0Q3VsbGluZyA9IEN1bGxlci5GYWNlQ3VsbGluZztcclxuICAgIFx0XHRcdFx0XHRcdHZhciBvZnMgPSBPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xyXG4gICAgXHRcdFx0XHRcdFx0dmFyIHZhbCA9ICggKCBDdWxsaW5nW29mc10gJiAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgKSApXHJcbiAgICBcdFx0XHRcdFx0XHRcdHwgKCBFeHRGYWNlU3RhdGVbVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF1dICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEICkgKTtcclxuICAgIFx0XHRcdFx0XHRcdEN1bGxpbmdbb2ZzXSA9IHZhbDtcclxuICAgIFx0XHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdFx0aWYoICggQ3VsbGVyID0gc2VjdG9yW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLkN1bGxlciApICE9IG51bGwgKVxyXG4gICAgXHRcdFx0XHRcdHtcclxuICAgIFx0XHRcdFx0XHRcdEN1bGxpbmcgPSBDdWxsZXIuRmFjZUN1bGxpbmc7XHJcbiAgICBcdFx0XHRcdFx0XHR2YXIgb2ZzID0gT2Zmc2V0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xyXG4gICAgXHRcdFx0XHRcdFx0dmFyIHZhbCA9ICggKCBDdWxsaW5nW29mc10gJiAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKSApXHJcbiAgICBcdFx0XHRcdFx0XHRcdHwgKCBFeHRGYWNlU3RhdGVbVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXV0gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKSApO1xyXG4gICAgXHRcdFx0XHRcdFx0Q3VsbGluZ1tvZnNdID0gdmFsO1xyXG4gICAgXHRcdFx0XHRcdH1cclxuICAgIFx0XHRcdFx0XHRpZiggKCBDdWxsZXIgPSBzZWN0b3JbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10uQ3VsbGVyICkgIT0gbnVsbCApXHJcbiAgICBcdFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdFx0Q3VsbGluZyA9IEN1bGxlci5GYWNlQ3VsbGluZztcclxuICAgIFx0XHRcdFx0XHRcdHZhciBvZnMgPSBPZmZzZXRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XHJcbiAgICBcdFx0XHRcdFx0XHR2YXIgdmFsID0gKCAoIEN1bGxpbmdbb2ZzXSAmICggflZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApIClcclxuICAgIFx0XHRcdFx0XHRcdFx0fCAoIEV4dEZhY2VTdGF0ZVtWb3hlbFN0YXRlW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddXSAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApICk7XHJcbiAgICBcdFx0XHRcdFx0XHRDdWxsaW5nW29mc10gPSB2YWw7XHJcbiAgICBcdFx0XHRcdFx0fVxyXG4gICAgXHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdC8vIHByaW50ZihcIlN0YXRlW0NlbnRlcl06JXggW0xlZnRdJXggW1JpZ2h0XSV4IFtJTkZST05UXSV4IFtCRUhJTkRdJXggW0FCT1ZFXSV4IFtCRUxPV10leFxcblwiLFZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkNFTlRFUl0sVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdLFZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF0sVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLklORlJPTlRdLFZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLFZveGVsU3RhdGVbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0sVm94ZWxTdGF0ZVtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSk7XHJcbiAgICBcdFx0XHR9LFxyXG5cclxuICAgIFx0XHRcdGN1bGxTaW5nbGVWb3hlbDIgOiBmdW5jdGlvbiggeCwgeSwgeiApIHtcclxuICAgIFx0XHRcdFx0dmFyIHNlY3RvciA9IGNsdXN0ZXIuZ2V0U2VjdG9yKCB4IC8gY2x1c3Rlci5zZWN0b3JTaXplWCwgeSAvIGNsdXN0ZXIuc2VjdG9yU2l6ZVksIHogLyBjbHVzdGVyLnNlY3RvclNpemVaICk7XHJcbiAgICBcdFx0XHRcdHZhciBvZmZzZXQgPSAoICggKCB4ICUgY2x1c3Rlci5zZWN0b3JTaXplWCApICogY2x1c3Rlci5zZWN0b3JTaXplWSApXHJcbiAgICBcdFx0XHRcdFx0XHRcdFx0KyAoIHkgJSBjbHVzdGVyLnNlY3RvclNpemVZIClcclxuICAgIFx0XHRcdFx0XHRcdFx0XHQrICggKCB6ICUgY2x1c3Rlci5zZWN0b3JTaXplWiApIDw8ICggY2x1c3Rlci5zZWN0b3JTaXplWSArIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKSApICk7XHJcbiAgICBcdFx0XHRcdEN1bGxTaW5nbGVWb3hlbCggc2VjdG9yLCBvZmZzZXQgKTtcclxuICAgIFx0XHRcdH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3VsbGVyLkZhY2VDdWxsaW5nID0gbmV3IEFycmF5KGNsdXN0ZXIuc2VjdG9yU2l6ZSk7XHJcbiAgICAgICAgICAgIHZhciBuO1xyXG4gICAgICAgICAgICBmb3IoIG4gPSAwOyBuIDwgY2x1c3Rlci5zZWN0b3JTaXplOyBuKysgKVxyXG4gICAgICAgICAgICAgICAgY3VsbGVyLkZhY2VDdWxsaW5nW25dID0gMHhGRjtcclxuICAgICAgICAgICAgcmV0dXJuIGN1bGxlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLCBzZWN0b3JUYWJsZSA6IG5ldyBBcnJheSgyNylcclxuXHRcdCwgU2VjdG9yRGF0YVRhYmxlIDogbmV3IEFycmF5KDI3KVxyXG5cdFx0LCBCbG9jTWF0cml4IDogW25ldyBBcnJheSg5KSxuZXcgQXJyYXkoOSksbmV3IEFycmF5KDkpXVxyXG5cclxuICAgICwgaW5pdEN1bGxpbmcgOiBmdW5jdGlvbiggc2VjdG9yICkge1xyXG4gICAgICB2YXIgdG1wID0gc2VjdG9yLmRhdGEuRmFjZUN1bGxpbmcgPSBuZXcgQXJyYXkoIHNlY3Rvci5jbHVzdGVyLnNlY3RvclNpemUgKTtcclxuICAgICAgZm9yKCB2YXIgbiA9IDA7IG4gPCB0bXAubGVuZ3RoOyBuKysgKVxyXG4gICAgICAgIHRtcFtuXSA9IDB4RkY7XHJcbiAgICB9XHJcblx0XHQsU2VjdG9yVXBkYXRlRmFjZUN1bGxpbmcgOiBmdW5jdGlvbiAoIHNlY3RvciwgaXNvbGF0ZWQgKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgTWlzc2luZ1NlY3RvcjtcclxuICAgICAgdmFyIGNsdXN0ZXIgPSBzZWN0b3IuY2x1c3RlcjtcclxuXHRcdFx0dmFyIHRtcHA7XHJcblx0XHRcdHZhciBpO1xyXG4gICAgICB2YXIgc2VjdG9yVGFibGUgPSB0aGlzLnNlY3RvclRhYmxlO1xyXG4gICAgICB2YXIgU2VjdG9yRGF0YVRhYmxlID0gdGhpcy5TZWN0b3JEYXRhVGFibGU7XHJcbiAgICAgIHZhciBCbG9jTWF0cml4ID0gdGhpcy5CbG9jTWF0cml4O1xyXG5cclxuXHRcdFx0aWYoIGlzb2xhdGVkICkgTWlzc2luZ1NlY3RvciA9IGNsdXN0ZXIuV29ya2luZ0VtcHR5U2VjdG9yO1xyXG5cdFx0XHRlbHNlIE1pc3NpbmdTZWN0b3IgPSBjbHVzdGVyLldvcmtpbmdGdWxsU2VjdG9yO1xyXG5cclxuXHRcdFx0Ly8gKFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVyB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCk7XHJcblx0XHRcdGZvciggaSA9IDA7IGkgPCAyNzsgaSsrICkgc2VjdG9yVGFibGVbaV0gPSBNaXNzaW5nU2VjdG9yO1xyXG5cdFx0XHRzZWN0b3JUYWJsZVswXSA9IHNlY3RvcjsgaWYoIHNlY3RvclRhYmxlWzBdID09IG51bGwgKSB7IHJldHVybjsgfVxyXG5cdFx0XHRzZWN0b3JUYWJsZVsxXSA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07IGlmKCBzZWN0b3JUYWJsZVsxXSA9PSBudWxsICkgeyBzZWN0b3JUYWJsZVsxXSA9IE1pc3NpbmdTZWN0b3I7IHNlY3RvclRhYmxlWzBdLlBhcnRpYWxDdWxsaW5nIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUOyB9XHJcblx0XHRcdHNlY3RvclRhYmxlWzJdID0gc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07IGlmKCBzZWN0b3JUYWJsZVsyXSA9PSBudWxsICkgeyBzZWN0b3JUYWJsZVsyXSA9IE1pc3NpbmdTZWN0b3I7IHNlY3RvclRhYmxlWzBdLlBhcnRpYWxDdWxsaW5nIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5SSUdIVDsgfVxyXG5cdFx0XHRzZWN0b3JUYWJsZVszXSA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTsgaWYoIHNlY3RvclRhYmxlWzNdID09IG51bGwgKSB7IHNlY3RvclRhYmxlWzNdID0gTWlzc2luZ1NlY3Rvcjsgc2VjdG9yVGFibGVbMF0uUGFydGlhbEN1bGxpbmcgfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORDsgfVxyXG5cdFx0XHRzZWN0b3JUYWJsZVs2XSA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCAtIDFdOyBpZiggc2VjdG9yVGFibGVbNl0gPT0gbnVsbCApIHsgc2VjdG9yVGFibGVbNl0gPSBNaXNzaW5nU2VjdG9yOyBzZWN0b3JUYWJsZVswXS5QYXJ0aWFsQ3VsbGluZyB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQ7IH1cclxuXHRcdFx0c2VjdG9yVGFibGVbOV0gPSBzZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxXTsgaWYoIHNlY3RvclRhYmxlWzldID09IG51bGwgKSB7IHNlY3RvclRhYmxlWzldID0gTWlzc2luZ1NlY3Rvcjsgc2VjdG9yVGFibGVbMF0uUGFydGlhbEN1bGxpbmcgfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XOyB9XHJcblx0XHRcdHNlY3RvclRhYmxlWzE4XSA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdOyBpZiggc2VjdG9yVGFibGVbMThdID09IG51bGwgKSB7IHNlY3RvclRhYmxlWzE4XSA9IE1pc3NpbmdTZWN0b3I7IHNlY3RvclRhYmxlWzBdLlBhcnRpYWxDdWxsaW5nIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRTsgfVxyXG5cdFx0XHRmb3IoIGkgPSAwOyBpIDwgMjc7IGkrKyApIFNlY3RvckRhdGFUYWJsZVtpXSA9IHNlY3RvclRhYmxlW2ldLmRhdGEuZGF0YTtcclxuXHJcblxyXG5cdFx0XHR2YXIgeGMsIHljLCB6YztcclxuXHRcdFx0dmFyIHhwLCB5cCwgenA7XHJcblx0XHRcdHZhciB4cHAsIHlwcCwgenBwO1xyXG5cdFx0XHR2YXIgaW5mbztcclxuXHJcbiAgICAgIGNvbnN0IHRhYmxlcyA9IHNlY3Rvci5jbHVzdGVyLmxvb2t1cFRhYmxlcztcclxuXHRcdFx0Ly9zZWN0b3JUYWJsZVswXS5GbGFnX1ZvaWRfUmVndWxhciA9IHRydWU7XHJcblx0XHRcdC8vc2VjdG9yVGFibGVbMF0uRmxhZ19Wb2lkX1RyYW5zcGFyZW50ID0gdHJ1ZTtcclxuXHJcblx0XHRcdGZvciggeGMgPSAwOyB4YyA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHhjKysgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0eHAgPSB4YyArIDE7IHhwcCA9IHhjICsgMjtcclxuXHRcdFx0XHRmb3IoIHpjID0gMDsgemMgPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6YysrIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR6cCA9IHpjICsgMTsgenBwID0gemMgKyAyO1xyXG5cclxuXHRcdFx0XHRcdC8vIFByZWZldGNoaW5nIHRoZSBibG9jIG1hdHJpeCAob25seSAyIHJvd3MpXHJcblx0XHRcdFx0XHQvLyAgICBCbG9jTWF0cml4WzFdWzBdID0gU2VjdG9yRGF0YVRhYmxlWyhWb3hlbFNlY3Rvci50YWJsZXMudGFibGVYW3hjIF0rdGFibGVzLnRhYmxlWVswXSt0YWJsZXMudGFibGVaW3pjIF0pXVt0YWJsZXMub2ZUYWJsZVhbeGNdK3RhYmxlcy5vZlRhYmxlWVswXSt0YWJsZXMub2ZUYWJsZVpbemNdXTtcclxuXHRcdFx0XHRcdEJsb2NNYXRyaXhbMV1bMV0gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hwXSArIHRhYmxlcy50YWJsZVlbMF0gKyB0YWJsZXMudGFibGVaW3pjXSApXVt0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZWzBdICsgdGFibGVzLm9mVGFibGVaW3pjXV07XHJcblx0XHRcdFx0XHQvLyAgICBCbG9jTWF0cml4WzFdWzJdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hwcF0rdGFibGVzLnRhYmxlWVswXSt0YWJsZXMudGFibGVaW3pjIF0pXVt0YWJsZXMub2ZUYWJsZVhbeHBwXSt0YWJsZXMub2ZUYWJsZVlbMF0rdGFibGVzLm9mVGFibGVaW3pjIF1dXHJcblx0XHRcdFx0XHRCbG9jTWF0cml4WzFdWzNdID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4Y10gKyB0YWJsZXMudGFibGVZWzBdICsgdGFibGVzLnRhYmxlWlt6cF0gKV1bdGFibGVzLm9mVGFibGVYW3hjXSArIHRhYmxlcy5vZlRhYmxlWVswXSArIHRhYmxlcy5vZlRhYmxlWlt6cF1dO1xyXG5cdFx0XHRcdFx0QmxvY01hdHJpeFsxXVs0XSA9IFNlY3RvckRhdGFUYWJsZVsoIHRhYmxlcy50YWJsZVhbeHBdICsgdGFibGVzLnRhYmxlWVswXSArIHRhYmxlcy50YWJsZVpbenBdICldW3RhYmxlcy5vZlRhYmxlWFt4cF0gKyB0YWJsZXMub2ZUYWJsZVlbMF0gKyB0YWJsZXMub2ZUYWJsZVpbenBdXTtcclxuXHRcdFx0XHRcdEJsb2NNYXRyaXhbMV1bNV0gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hwcF0gKyB0YWJsZXMudGFibGVZWzBdICsgdGFibGVzLnRhYmxlWlt6cF0gKV1bdGFibGVzLm9mVGFibGVYW3hwcF0gKyB0YWJsZXMub2ZUYWJsZVlbMF0gKyB0YWJsZXMub2ZUYWJsZVpbenBdXTtcclxuXHRcdFx0XHRcdC8vICAgIEJsb2NNYXRyaXhbMV1bNl0gPSBTZWN0b3JEYXRhVGFibGVbKHRhYmxlcy50YWJsZVhbeGMgXSt0YWJsZXMudGFibGVZWzBdK3RhYmxlcy50YWJsZVpbenBwXSldW3RhYmxlcy5vZlRhYmxlWFt4YyBdK3RhYmxlcy5vZlRhYmxlWVswXSt0YWJsZXMub2ZUYWJsZVpbenBwXV1cclxuXHRcdFx0XHRcdEJsb2NNYXRyaXhbMV1bN10gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hwXSArIHRhYmxlcy50YWJsZVlbMF0gKyB0YWJsZXMudGFibGVaW3pwcF0gKV1bdGFibGVzLm9mVGFibGVYW3hwXSArIHRhYmxlcy5vZlRhYmxlWVswXSArIHRhYmxlcy5vZlRhYmxlWlt6cHBdXTtcclxuXHRcdFx0XHRcdC8vICAgIEJsb2NNYXRyaXhbMV1bOF0gPSBTZWN0b3JEYXRhVGFibGVbKHRhYmxlcy50YWJsZVhbeHBwXSt0YWJsZXMudGFibGVZWzBdK3RhYmxlcy50YWJsZVpbenBwXSldW3RhYmxlcy5vZlRhYmxlWFt4cHBdK3RhYmxlcy5vZlRhYmxlWVswXSt0YWJsZXMub2ZUYWJsZVpbenBwXV1cclxuXHJcblx0XHRcdFx0XHQvLyAgICBCbG9jTWF0cml4WzJdWzBdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hjIF0rdGFibGVzLnRhYmxlWVsxXSt0YWJsZXMudGFibGVaW3pjIF0pXVt0YWJsZXMub2ZUYWJsZVhbeGMgXSt0YWJsZXMub2ZUYWJsZVlbMV0rdGFibGVzLm9mVGFibGVaW3pjIF1dXHJcblx0XHRcdFx0XHRCbG9jTWF0cml4WzJdWzFdID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4cF0gKyB0YWJsZXMudGFibGVZWzFdICsgdGFibGVzLnRhYmxlWlt6Y10gKV1bdGFibGVzLm9mVGFibGVYW3hwXSArIHRhYmxlcy5vZlRhYmxlWVsxXSArIHRhYmxlcy5vZlRhYmxlWlt6Y11dO1xyXG5cdFx0XHRcdFx0Ly8gICAgQmxvY01hdHJpeFsyXVsyXSA9IFNlY3RvckRhdGFUYWJsZVsodGFibGVzLnRhYmxlWFt4cHBdK3RhYmxlcy50YWJsZVlbMV0rdGFibGVzLnRhYmxlWlt6YyBdKV1bdGFibGVzLm9mVGFibGVYW3hwcF0rdGFibGVzLm9mVGFibGVZWzFdK3RhYmxlcy5vZlRhYmxlWlt6YyBdXVxyXG5cdFx0XHRcdFx0QmxvY01hdHJpeFsyXVszXSA9IFNlY3RvckRhdGFUYWJsZVsoIHRhYmxlcy50YWJsZVhbeGNdICsgdGFibGVzLnRhYmxlWVsxXSArIHRhYmxlcy50YWJsZVpbenBdICldW3RhYmxlcy5vZlRhYmxlWFt4Y10gKyB0YWJsZXMub2ZUYWJsZVlbMV0gKyB0YWJsZXMub2ZUYWJsZVpbenBdXTtcclxuXHRcdFx0XHRcdEJsb2NNYXRyaXhbMl1bNF0gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hwXSArIHRhYmxlcy50YWJsZVlbMV0gKyB0YWJsZXMudGFibGVaW3pwXSApXVt0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZWzFdICsgdGFibGVzLm9mVGFibGVaW3pwXV07XHJcblx0XHRcdFx0XHRCbG9jTWF0cml4WzJdWzVdID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4cHBdICsgdGFibGVzLnRhYmxlWVsxXSArIHRhYmxlcy50YWJsZVpbenBdICldW3RhYmxlcy5vZlRhYmxlWFt4cHBdICsgdGFibGVzLm9mVGFibGVZWzFdICsgdGFibGVzLm9mVGFibGVaW3pwXV07XHJcblx0XHRcdFx0XHQvLyAgICBCbG9jTWF0cml4WzJdWzZdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hjIF0rdGFibGVzLnRhYmxlWVsxXSt0YWJsZXMudGFibGVaW3pwcF0pXVt0YWJsZXMub2ZUYWJsZVhbeGMgXSt0YWJsZXMub2ZUYWJsZVlbMV0rdGFibGVzLm9mVGFibGVaW3pwcF1dXHJcblx0XHRcdFx0XHRCbG9jTWF0cml4WzJdWzddID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4cF0gKyB0YWJsZXMudGFibGVZWzFdICsgdGFibGVzLnRhYmxlWlt6cHBdICldW3RhYmxlcy5vZlRhYmxlWFt4cF0gKyB0YWJsZXMub2ZUYWJsZVlbMV0gKyB0YWJsZXMub2ZUYWJsZVpbenBwXV07XHJcblx0XHRcdFx0XHQvLyAgICBCbG9jTWF0cml4WzJdWzhdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hwcF0rdGFibGVzLnRhYmxlWVsxXSt0YWJsZXMudGFibGVaW3pwcF0pXVt0YWJsZXMub2ZUYWJsZVhbeHBwXSt0YWJsZXMub2ZUYWJsZVlbMV0rdGFibGVzLm9mVGFibGVaW3pwcF1dXHJcblxyXG5cdFx0XHRcdFx0Zm9yKCB5YyA9IDA7IHljIDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeWMrKyApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHlwID0geWMgKyAxOyB5cHAgPSB5YyArIDI7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBTY3JvbGxpbmcgYmxvYyBtYXRyaXggYnkgZXhjaGFuZ2luZ3lwcCByZWZlcmVuY2VzLlxyXG5cdFx0XHRcdFx0XHR0bXBwID0gQmxvY01hdHJpeFswXTtcclxuXHRcdFx0XHRcdFx0QmxvY01hdHJpeFswXSA9IEJsb2NNYXRyaXhbMV07XHJcblx0XHRcdFx0XHRcdEJsb2NNYXRyaXhbMV0gPSBCbG9jTWF0cml4WzJdO1xyXG5cdFx0XHRcdFx0XHRCbG9jTWF0cml4WzJdID0gdG1wcDtcclxuXHJcblx0XHRcdFx0XHRcdC8vIEZldGNoaW5nIGEgbmV3IGJsb2Mgb2YgZGF0YSBzbGljZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlcmVPZnM7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyAgICAgIEJsb2NNYXRyaXhbMl1bMF0gPSBTZWN0b3JEYXRhVGFibGVbKHRhYmxlcy50YWJsZVhbeGMgXSt0YWJsZXMudGFibGVZW3lwcF0rdGFibGVzLnRhYmxlWlt6YyBdKV0uRGF0YTsgICAgW3RhYmxlcy5vZlRhYmxlWFt4YyBdK3RhYmxlcy5vZlRhYmxlWVt5cHBdK3RhYmxlcy5vZlRhYmxlWlt6YyBdXVxyXG5cdFx0XHRcdFx0XHRCbG9jTWF0cml4WzJdWzFdID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4cF0gKyB0YWJsZXMudGFibGVZW3lwcF0gKyB0YWJsZXMudGFibGVaW3pjXSApXVt0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZW3lwcF0gKyB0YWJsZXMub2ZUYWJsZVpbemNdXTtcclxuXHRcdFx0XHRcdFx0Ly8gICAgICBCbG9jTWF0cml4WzJdWzJdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hwcF0rdGFibGVzLnRhYmxlWVt5cHBdK3RhYmxlcy50YWJsZVpbemMgXSldLkRhdGE7XHQgICBbdGFibGVzLm9mVGFibGVYW3hwcF0rdGFibGVzLm9mVGFibGVZW3lwcF0rdGFibGVzLm9mVGFibGVaW3pjIF1dXHJcblx0XHRcdFx0XHRcdEJsb2NNYXRyaXhbMl1bM10gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hjXSArIHRhYmxlcy50YWJsZVlbeXBwXSArIHRhYmxlcy50YWJsZVpbenBdICldW3RhYmxlcy5vZlRhYmxlWFt4Y10gKyB0YWJsZXMub2ZUYWJsZVlbeXBwXSArIHRhYmxlcy5vZlRhYmxlWlt6cF1dO1xyXG5cdFx0XHRcdFx0XHRCbG9jTWF0cml4WzJdWzRdID0gU2VjdG9yRGF0YVRhYmxlWyggdGFibGVzLnRhYmxlWFt4cF0gKyB0YWJsZXMudGFibGVZW3lwcF0gKyB0YWJsZXMudGFibGVaW3pwXSApXVt0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZW3lwcF0gKyB0YWJsZXMub2ZUYWJsZVpbenBdXTtcclxuXHRcdFx0XHRcdFx0QmxvY01hdHJpeFsyXVs1XSA9IFNlY3RvckRhdGFUYWJsZVsoIHRhYmxlcy50YWJsZVhbeHBwXSArIHRhYmxlcy50YWJsZVlbeXBwXSArIHRhYmxlcy50YWJsZVpbenBdICldW3RhYmxlcy5vZlRhYmxlWFt4cHBdICsgdGFibGVzLm9mVGFibGVZW3lwcF0gKyB0YWJsZXMub2ZUYWJsZVpbenBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFCbG9jTWF0cml4WzJdWzVdICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCJ2b3hlbCBpbiBzZWN0b3IgaGFzIGJlY29tZSB1bmRlZmluZWQuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RlYnVnZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdFx0Ly8gICAgICBCbG9jTWF0cml4WzJdWzZdID0gU2VjdG9yRGF0YVRhYmxlWyh0YWJsZXMudGFibGVYW3hjIF0rdGFibGVzLnRhYmxlWVt5cHBdK3RhYmxlcy50YWJsZVpbenBwXSldLkRhdGE7XHQgICBbdGFibGVzLm9mVGFibGVYW3hjIF0rdGFibGVzLm9mVGFibGVZW3lwcF0rdGFibGVzLm9mVGFibGVaW3pwcF1dXHJcblx0XHRcdFx0XHRcdEJsb2NNYXRyaXhbMl1bN10gPSBTZWN0b3JEYXRhVGFibGVbKCB0YWJsZXMudGFibGVYW3hwXSArIHRhYmxlcy50YWJsZVlbeXBwXSArIHRhYmxlcy50YWJsZVpbenBwXSApXVt0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZW3lwcF0gKyB0YWJsZXMub2ZUYWJsZVpbenBwXV07XHJcblx0XHRcdFx0XHRcdC8vICAgICAgQmxvY01hdHJpeFsyXVs4XSA9IFNlY3RvckRhdGFUYWJsZVsodGFibGVzLnRhYmxlWFt4cHBdK3RhYmxlcy50YWJsZVlbeXBwXSt0YWJsZXMudGFibGVaW3pwcF0pXS5EYXRhO1x0ICAgW3RhYmxlcy5vZlRhYmxlWFt4cHBdK3RhYmxlcy5vZlRhYmxlWVt5cHBdK3RhYmxlcy5vZlRhYmxlWlt6cHBdXVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gQ29tcHV0ZSBmYWNlIGN1bGxpbmcgaW5mb1xyXG5cdFx0XHRcdFx0XHRpbmZvID0gMDtcclxuXHRcdFx0XHRcdFx0aWYoIEJsb2NNYXRyaXhbMV1bNF0gKVxyXG5cdFx0XHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgTWFpblZveGVsRHJhd0luZm8gPSBCbG9jTWF0cml4WzFdWzRdLnByb3BlcnRpZXMuRHJhd0luZm87XHJcblx0XHRcdFx0XHRcdFx0bGV0IFN1YlRhYmxlID0gVm94ZWxhcml1bS5JbnRGYWNlU3RhdGVUYWJsZVtNYWluVm94ZWxEcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aW5mbyB8PSAoICggU3ViVGFibGVbQmxvY01hdHJpeFsxXVsxXS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdICkgJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICk7XHJcblx0XHRcdFx0XHRcdFx0aW5mbyB8PSAoICggU3ViVGFibGVbQmxvY01hdHJpeFsxXVs3XS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdICkgJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgKTtcclxuXHRcdFx0XHRcdFx0XHRpbmZvIHw9ICggKCBTdWJUYWJsZVtCbG9jTWF0cml4WzFdWzNdLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19DVUxMSU5HQklUU10gKSAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUICk7XHJcblx0XHRcdFx0XHRcdFx0aW5mbyB8PSAoICggU3ViVGFibGVbQmxvY01hdHJpeFsxXVs1XS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdICkgJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgKTtcclxuXHRcdFx0XHRcdFx0XHRpbmZvIHw9ICggKCBTdWJUYWJsZVtCbG9jTWF0cml4WzBdWzRdLnByb3BlcnRpZXMuRHJhd0luZm8gJiBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19DVUxMSU5HQklUU10gKSAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVyApO1xyXG5cdFx0XHRcdFx0XHRcdGluZm8gfD0gKCAoIFN1YlRhYmxlW0Jsb2NNYXRyaXhbMl1bNF0ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXSApICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFdyaXRlIGZhY2UgY3VsbGluZyBpbmZvIHRvIGZhY2UgY3VsbGluZyB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0b3IuZGF0YS5GYWNlQ3VsbGluZ1t0YWJsZXMub2ZUYWJsZVhbeHBdICsgdGFibGVzLm9mVGFibGVZW3lwXSArIHRhYmxlcy5vZlRhYmxlWlt6cF1dID0gaW5mbztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblxyXG5cclxuXHRcdCxTZWN0b3JVcGRhdGVGYWNlQ3VsbGluZ19QYXJ0aWFsIDogZnVuY3Rpb24gKCBjbHVzdGVyLCBzZWN0b3JcclxuXHRcdFx0XHRcdCwgRmFjZXNUb0RyYXcsIElzb2xhdGVkIClcclxuXHRcdHtcclxuXHRcdFx0dmFyIE1pc3NpbmdTZWN0b3I7XHJcblx0XHRcdHZhciBTZWN0b3JfSW4sIFNlY3Rvcl9PdXQ7XHJcblx0XHRcdHZhciBpO1xyXG5cdFx0XHR2YXIgQ3VsZWRGYWNlcztcclxuXHRcdFx0dmFyIE9mZl9JcCwgT2ZmX0luLCBPZmZfT3AsIE9mZl9PdXQsIE9mZl9BdXg7XHJcblx0XHRcdHZhciBWb3hlbERhdGFfSW4sIFZveGVsRGF0YV9PdXQ7XHJcblx0XHRcdHZhciBWb3hlbEZDX0luO1xyXG5cdFx0XHR2YXIgeCwgeSwgejtcclxuXHRcdFx0dmFyIEZhY2VTdGF0ZTtcclxuXHRcdFx0Ly9leHRlcm4gdXNob3J0IEludEZhY2VTdGF0ZVRhYmxlW11bOF07XHJcblxyXG5cdFx0XHR4ID0gc2VjdG9yLnBvcy54O1xyXG5cdFx0XHR5ID0gc2VjdG9yLnBvcy55O1xyXG5cdFx0XHR6ID0gc2VjdG9yLnBvcy56O1xyXG5cclxuXHRcdFx0aWYoIElzb2xhdGVkICkgTWlzc2luZ1NlY3RvciA9IGNsdXN0ZXIuV29ya2luZ0VtcHR5U2VjdG9yO1xyXG5cdFx0XHRlbHNlIE1pc3NpbmdTZWN0b3IgPSBjbHVzdGVyLldvcmtpbmdGdWxsU2VjdG9yO1xyXG5cclxuXHRcdFx0U2VjdG9yX0luID0gc2VjdG9yOyBpZiggU2VjdG9yX0luID09IG51bGwgKSByZXR1cm4gKCAwICk7XHJcblx0XHRcdFNlY3Rvcl9PdXQgPSBudWxsOyAgLy8gYWdhaW4gYSByZWR1bmRhbnQgYXNzaWdubWVudFxyXG5cdFx0XHRDdWxlZEZhY2VzID0gMDtcclxuXHJcblx0XHRcdC8vIFRvcCBTaWRlXHJcbiAgICAgIFZveGVsRkNfSW4gPSBTZWN0b3JfSW4uZGF0YS5GYWNlQ3VsbGluZztcclxuICAgICAgVm94ZWxEYXRhX0luID0gU2VjdG9yX0luLmRhdGE7XHJcblxyXG5cdFx0XHRpZiggKCBGYWNlc1RvRHJhdyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApICE9IDAgKVxyXG5cdFx0XHRcdGlmKCAoICggU2VjdG9yX091dCA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdKVxyXG4gICAgICAgICAgIHx8ICggU2VjdG9yX091dCA9IE1pc3NpbmdTZWN0b3IgKSApICApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Vm94ZWxEYXRhX091dCA9IFNlY3Rvcl9PdXQuZGF0YTtcclxuXHJcblx0XHRcdFx0XHRmb3IoIE9mZl9JcCA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLSAxLCBPZmZfT3AgPSAwO1xyXG5cdFx0XHRcdFx0XHRPZmZfSXAgPCAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICk7XHJcblx0XHRcdFx0XHRcdE9mZl9JcCArPSBjbHVzdGVyLnNlY3RvclNpemVZLFxyXG5cdFx0XHRcdFx0XHRPZmZfT3AgKz0gY2x1c3Rlci5zZWN0b3JTaXplWSApIC8vIHggKDAuLjE1KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRmb3IoIE9mZl9BdXggPSAwO1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9BdXggPCAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZICogY2x1c3Rlci5zZWN0b3JTaXplWiApO1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9BdXggKz0gKCBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWSApICkgLy8geiAoMC4uMTUpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRPZmZfSW4gPSBPZmZfSXAgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9PdXQgPSBPZmZfT3AgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uSW50RmFjZVN0YXRlVGFibGVbVm94ZWxEYXRhX0luLmRhdGFbT2ZmX0luXS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdW1ZveGVsRGF0YV9PdXQuZGF0YVtPZmZfT3V0XS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCBGYWNlU3RhdGUgIT0gMCApIFZveGVsRkNfSW5bT2ZmX0luXSB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkU7XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBWb3hlbEZDX0luW09mZl9Jbl0gJj0gKCAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkUgKSAmIDB4RkYgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Q3VsZWRGYWNlcyB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQvLyBCb3R0b20gU2lkZVxyXG5cclxuXHRcdFx0aWYoICggRmFjZXNUb0RyYXcgJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKSAhPSAwIClcclxuXHRcdFx0XHRpZiggKCAoIFNlY3Rvcl9PdXQgPSBzZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxXSkgfHwgKCBTZWN0b3JfT3V0ID0gTWlzc2luZ1NlY3RvcikpICE9IG51bGwgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFZveGVsRGF0YV9PdXQgPSBTZWN0b3JfT3V0LmRhdGE7XHJcblxyXG5cdFx0XHRcdFx0Zm9yKCBPZmZfSXAgPSAwLCBPZmZfT3AgPSBjbHVzdGVyLnNlY3RvclNpemVZIC0gMTtcclxuXHRcdFx0XHRcdFx0IE9mZl9JcCA8ICggY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVogKTtcclxuXHRcdFx0XHRcdFx0IE9mZl9JcCArPSBjbHVzdGVyLnNlY3RvclNpemVZLFxyXG5cdFx0XHRcdFx0XHQgT2ZmX09wICs9IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSAvLyB4ICgwLi4xNSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Zm9yKCBPZmZfQXV4ID0gMDtcclxuXHRcdFx0XHRcdFx0XHQgT2ZmX0F1eCA8ICggY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVaICk7XHJcblx0XHRcdFx0XHRcdFx0IE9mZl9BdXggKz0gKCBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWSApICkgLy8geiAoMC4uMTUpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRPZmZfSW4gPSBPZmZfSXAgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9PdXQgPSBPZmZfT3AgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdFZveGVsX0luID0gVm94ZWxEYXRhX0luLmRhdGFbT2ZmX0luXTtcclxuXHRcdFx0XHRcdFx0XHRWb3hlbF9PdXQgPSBWb3hlbERhdGFfT3V0LmRhdGFbT2ZmX091dF07XHJcblx0XHRcdFx0XHRcdFx0Ly9aVm94ZWxUeXBlICogVnRJbiA9ICBWb3hlbFR5cGVUYWJsZVsgVm94ZWxfSW4gXTtcclxuXHRcdFx0XHRcdFx0XHQvL1pWb3hlbFR5cGUgKiBWdE91dCA9IFZveGVsVHlwZVRhYmxlWyBWb3hlbF9PdXQgXTtcclxuXHJcblxyXG5cdFx0XHRcdFx0XHRcdEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uSW50RmFjZVN0YXRlVGFibGVbVm94ZWxfSW4ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXVtWb3hlbF9PdXQucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly9GYWNlU3RhdGUgPSBJbnRGYWNlU3RhdGVUYWJsZVsgVm94ZWxUeXBlVGFibGVbIFZveGVsRGF0YV9Jbi5EYXRhW09mZl9Jbl0gXS5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTIF1bIFZveGVsVHlwZVRhYmxlWyBWb3hlbERhdGFfT3V0LkRhdGFbT2ZmX091dF0gXS5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTIF07XHJcblx0XHRcdFx0XHRcdFx0aWYoIEZhY2VTdGF0ZSAhPSAwICkgVm94ZWxGQ19JbltPZmZfSW5dIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVztcclxuXHRcdFx0XHRcdFx0XHRlbHNlIFZveGVsRkNfSW5bT2ZmX0luXSAmPSAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgJiAweEZGICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdEN1bGVkRmFjZXMgfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIExlZnQgU2lkZVxyXG5cclxuXHRcdFx0XHRcdGlmKCAoIEZhY2VzVG9EcmF3ICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgKSAhPSAwIClcclxuXHRcdFx0XHRpZiggKCAoIFNlY3Rvcl9PdXQgPSBzZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdKSB8fCAoIFNlY3Rvcl9PdXQgPSBNaXNzaW5nU2VjdG9yKSkgIT0gbnVsbCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Vm94ZWxEYXRhX091dCA9IFNlY3Rvcl9PdXQuZGF0YTtcclxuXHRcdFx0XHRcdC8vIFZveGVsRGF0YV9Jbls2M109MTtcclxuXHRcdFx0XHRcdC8vIFZveGVsRGF0YV9Jbls2MyArIGNsdXN0ZXIuc2VjdG9yU2l6ZVkqMTUgXT0xNDsgLy8geFxyXG5cdFx0XHRcdFx0Ly8gVm94ZWxEYXRhX0luWzYzICsgY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiAxNV0gPSAxMzsgLy8gelxyXG5cclxuXHRcdFx0XHRcdGZvciggT2ZmX0lwID0gMCwgT2ZmX09wID0gKGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggLSAxICkpO1xyXG5cdFx0XHRcdFx0XHRPZmZfSXAgPCAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWiApO1xyXG5cdFx0XHRcdFx0XHRPZmZfSXAgKz0gKCBjbHVzdGVyLnNlY3RvclNpemVZICogY2x1c3Rlci5zZWN0b3JTaXplWCApLFxyXG5cdFx0XHRcdFx0XHRPZmZfT3AgKz0gKCBjbHVzdGVyLnNlY3RvclNpemVZICogY2x1c3Rlci5zZWN0b3JTaXplWCApICkgLy8geiAoMC4uMTUpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGZvciggT2ZmX0F1eCA9IDA7IE9mZl9BdXggPCBjbHVzdGVyLnNlY3RvclNpemVZOyBPZmZfQXV4KysgKSAvLyB5ICgwLi42MylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9JbiA9IE9mZl9JcCArIE9mZl9BdXg7XHJcblx0XHRcdFx0XHRcdFx0T2ZmX091dCA9IE9mZl9PcCArIE9mZl9BdXg7XHJcblx0XHRcdFx0XHRcdFx0Ly9Wb3hlbERhdGFfSW5bT2ZmX0luXT0xOyBWb3hlbERhdGFfT3V0W09mZl9PdXRdPTE0O1xyXG5cdFx0XHRcdFx0XHRcdEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uSW50RmFjZVN0YXRlVGFibGVbVm94ZWxEYXRhX0luLmRhdGFbT2ZmX0luXS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdW1ZveGVsRGF0YV9PdXQuZGF0YVtPZmZfT3V0XS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCBGYWNlU3RhdGUgIT0gMCApIFZveGVsRkNfSW5bT2ZmX0luXSB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTEVGVDtcclxuXHRcdFx0XHRcdFx0XHRlbHNlIFZveGVsRkNfSW5bT2ZmX0luXSAmPSAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTEVGVCAmIDB4RkYgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Q3VsZWRGYWNlcyB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTEVGVDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSaWdodCBTaWRlXHJcblxyXG5cdFx0XHRpZiggKCBGYWNlc1RvRHJhdyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5SSUdIVCApICE9IDAgKVxyXG5cdFx0XHRcdGlmKCAoICggU2VjdG9yX091dCA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdKSB8fCAoIFNlY3Rvcl9PdXQgPSBNaXNzaW5nU2VjdG9yKSkgIT0gbnVsbCApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Vm94ZWxEYXRhX091dCA9IFNlY3Rvcl9PdXQuZGF0YTtcclxuXHJcblx0XHRcdFx0XHRmb3IoIE9mZl9JcCA9ICggY2x1c3Rlci5zZWN0b3JTaXplWSAqICggY2x1c3Rlci5zZWN0b3JTaXplWCAtIDEgKSksIE9mZl9PcCA9IDA7XHJcblx0XHRcdFx0XHRcdE9mZl9PcCA8ICggY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVaICk7XHJcblx0XHRcdFx0XHRcdE9mZl9JcCArPSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICksIE9mZl9PcCArPSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICkgKSAvLyB6ICgwLi4xNSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Zm9yKCBPZmZfQXV4ID0gMDsgT2ZmX0F1eCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IE9mZl9BdXgrKyApIC8vIHkgKDAuLjYzKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0T2ZmX0luID0gT2ZmX0lwICsgT2ZmX0F1eDtcclxuXHRcdFx0XHRcdFx0XHRPZmZfT3V0ID0gT2ZmX09wICsgT2ZmX0F1eDtcclxuXHRcdFx0XHRcdFx0XHRGYWNlU3RhdGUgPSBWb3hlbGFyaXVtLkludEZhY2VTdGF0ZVRhYmxlW1ZveGVsRGF0YV9Jbi5kYXRhW09mZl9Jbl0ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXVtWb3hlbERhdGFfT3V0LmRhdGFbT2ZmX091dF0ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXTtcclxuXHRcdFx0XHRcdFx0XHRpZiggRmFjZVN0YXRlICE9IDAgKSBWb3hlbEZDX0luW09mZl9Jbl0gfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUOyBlbHNlIFZveGVsRkNfSW5bT2ZmX0luXSAmPSAoIH5Wb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgJiAweEZGICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdEN1bGVkRmFjZXMgfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEZyb250IFNpZGVcclxuXHJcblx0XHRcdGlmKCAoIEZhY2VzVG9EcmF3ICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEICkgIT0gMCApXHJcblx0XHRcdFx0aWYoICggKCBTZWN0b3JfT3V0ID0gc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV0pIHx8ICggU2VjdG9yX091dCA9IE1pc3NpbmdTZWN0b3IpKSAhPSBudWxsIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRWb3hlbERhdGFfT3V0ID0gU2VjdG9yX091dC5kYXRhO1xyXG5cclxuXHRcdFx0XHRcdGZvciggT2ZmX0lwID0gKCBjbHVzdGVyLnNlY3RvclNpemVZICogY2x1c3Rlci5zZWN0b3JTaXplWCAqICggY2x1c3Rlci5zZWN0b3JTaXplWiAtIDEgKSApLCBPZmZfT3AgPSAwO1xyXG5cdFx0XHRcdFx0XHRPZmZfT3AgPCAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICk7XHJcblx0XHRcdFx0XHRcdE9mZl9JcCArPSBjbHVzdGVyLnNlY3RvclNpemVZLCBPZmZfT3AgKz0gY2x1c3Rlci5zZWN0b3JTaXplWSApIC8vIHggKDAuLjE1KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRmb3IoIE9mZl9BdXggPSAwOyBPZmZfQXV4IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgT2ZmX0F1eCsrICkgLy8geSAoMC4uNjMpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRPZmZfSW4gPSBPZmZfSXAgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdE9mZl9PdXQgPSBPZmZfT3AgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdEZhY2VTdGF0ZSA9IFZveGVsYXJpdW0uSW50RmFjZVN0YXRlVGFibGVbVm94ZWxEYXRhX0luLmRhdGFbT2ZmX0luXS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdW1ZveGVsRGF0YV9PdXQuZGF0YVtPZmZfT3V0XS5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fQ1VMTElOR0JJVFNdO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCBGYWNlU3RhdGUgIT0gMCApIFZveGVsRkNfSW5bT2ZmX0luXSB8PSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQ7XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBWb3hlbEZDX0luW09mZl9Jbl0gJj0gKCB+Vm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEICYgMHhGRiApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRDdWxlZEZhY2VzIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BSEVBRDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBCYWNrIFNpZGVcclxuXHJcblx0XHRcdGlmKCAoIEZhY2VzVG9EcmF3ICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCApICE9IDAgKVxyXG5cdFx0XHRcdGlmKCAoICggU2VjdG9yX091dCA9IHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXSApIHx8ICggU2VjdG9yX091dCA9IE1pc3NpbmdTZWN0b3IgKSApICE9IG51bGwgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Vm94ZWxEYXRhX091dCA9IFNlY3Rvcl9PdXQuZGF0YTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9yKCBPZmZfSXAgPSAwLCBPZmZfT3AgPSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICogKCBjbHVzdGVyLnNlY3RvclNpemVaIC0gMSApICk7XHJcblx0XHRcdFx0XHRcdFx0XHRPZmZfSXAgPCAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiBjbHVzdGVyLnNlY3RvclNpemVYICk7XHJcblx0XHRcdFx0XHRcdFx0XHRPZmZfSXAgKz0gY2x1c3Rlci5zZWN0b3JTaXplWSwgT2ZmX09wICs9IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSAvLyB4ICgwLi4xNSlcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIE9mZl9BdXggPSAwOyBPZmZfQXV4IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgT2ZmX0F1eCsrICkgLy8geSAoMC4uNjMpXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdE9mZl9JbiA9IE9mZl9JcCArIE9mZl9BdXg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdE9mZl9PdXQgPSBPZmZfT3AgKyBPZmZfQXV4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRGYWNlU3RhdGUgPSBWb3hlbGFyaXVtLkludEZhY2VTdGF0ZVRhYmxlW1ZveGVsRGF0YV9Jbi5kYXRhW09mZl9Jbl0ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXVtWb3hlbERhdGFfT3V0LmRhdGFbT2ZmX091dF0ucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0NVTExJTkdCSVRTXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIEZhY2VTdGF0ZSAhPSAwICkgVm94ZWxGQ19JbltPZmZfSW5dIHw9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUhJTkQ7IGVsc2UgVm94ZWxGQ19JbltPZmZfSW5dICY9ICggflZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUhJTkQgJiAweEZGICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdEN1bGVkRmFjZXMgfD0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9zZWN0b3IuUGFydGlhbEN1bGxpbmcgXj0gQ3VsZWRGYWNlcyAmICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICk7XHJcblx0XHRcdC8vc2VjdG9yLlBhcnRpYWxDdWxsaW5nICY9ICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICk7XHJcblx0XHRcdGlmKCBDdWxlZEZhY2VzICE9IDAgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Ly9Mb2cubG9nKCBcInNlY3RvciB7MH0gezF9IHsyfSBpcyBkaXJ0eVwiLCBzZWN0b3IucG9zLngsIHNlY3Rvci5wb3MueSwgc2VjdG9yLnBvcy56ICk7XHJcblx0XHRcdFx0U2VjdG9yX091dC5GbGFnX1JlbmRlcl9EaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgU2VjdG9yX0luLkZsYWdfUmVuZGVyX0RpcnR5ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICggQ3VsZWRGYWNlcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCwgVXBkYXRlQ3VsbGluZyA6IGZ1bmN0aW9uICggTG9jYXRpb24sIEltcG9ydGFuY2VGYWN0b3IgKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiggTG9jYXRpb24uc2VjdG9yID09IG51bGwgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdExvY2F0aW9uLnNlY3Rvci5jbHVzdGVyLmN1bGxlci5DdWxsU2luZ2xlVm94ZWwoIExvY2F0aW9uLnNlY3RvciwgTG9jYXRpb24uT2Zmc2V0ICk7XHJcblxyXG5cdFx0XHRMb2NhdGlvbi5zZWN0b3IuRmxhZ19Jc01vZGlmaWVkIHw9IEltcG9ydGFuY2VGYWN0b3I7XHJcblx0XHR9XHJcblxyXG5cdFx0LCBTZXRWb3hlbF9XaXRoQ3VsbGluZ1VwZGF0ZSA6IGZ1bmN0aW9uICggVm94ZWxUeXBlXHJcblx0XHRcdFx0XHRcdFx0LCBJbXBvcnRhbmNlRmFjdG9yXHJcblx0XHRcdFx0XHRcdFx0LCBDcmVhdGVFeHRlbnNpb25cclxuXHRcdFx0XHRcdFx0XHQsIExvY2F0aW9uIClcclxuXHRcdHtcclxuXHRcdFx0aWYoICFMb2NhdGlvbi5zZWN0b3IgKVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdC8vIERlbGV0ZSBPbGQgdm94ZWwgZXh0ZW5kZWQgaW5mb3JtYXRpb25zIGlmIGFueVxyXG5cdFx0XHR2YXIgVm94ZWwgPSBMb2NhdGlvbi5zZWN0b3IuZGF0YS5kYXRhW0xvY2F0aW9uLk9mZnNldF07XHJcblx0XHRcdHZhciBPdGhlckluZm9zID0gTG9jYXRpb24uc2VjdG9yLmRhdGEub3RoZXJJbmZvc1tMb2NhdGlvbi5PZmZzZXRdO1xyXG5cclxuXHRcdFx0aWYoIE90aGVySW5mb3MgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIFZveGVsVHlwZS5wcm9wZXJ0aWVzLklzX0hhc0FsbG9jYXRlZE1lbW9yeUV4dGVuc2lvbiApIFZveGVsLmRlbGV0ZVZveGVsRXh0ZW5zaW9uKCBvdGhlckluZm9zICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN0b3JpbmcgRXh0ZW5zaW9uXHJcblx0XHRcdGlmKCBWb3hlbFR5cGUuY3JlYXRlVm94ZWxFeHRlbnNpb24gKVxyXG5cdFx0XHRcdExvY2F0aW9uLnNlY3Rvci5EYXRhLk90aGVySW5mb3NbTG9jYXRpb24uT2Zmc2V0XSA9IFZveGVsVHlwZS5jcmVhdGVWb3hlbEV4dGVuc2lvbigpO1xyXG5cclxuXHRcdFx0Ly8gU3RvcmluZyBWb3hlbFxyXG5cclxuXHRcdFx0TG9jYXRpb24uc2VjdG9yLmRhdGEuZGF0YVtMb2NhdGlvbi5PZmZzZXRdID0gVm94ZWxUeXBlO1xyXG5cclxuXHRcdFx0aWYoIFZveGVsVHlwZS5wcm9wZXJ0aWVzLklzX0FjdGl2ZSApXHJcblx0XHRcdFx0TG9jYXRpb24uc2VjdG9yLkZsYWdfSXNBY3RpdmVWb3hlbHMgPSB0cnVlO1xyXG5cclxuXHRcdFx0VXBkYXRlQ3VsbGluZyggTG9jYXRpb24sIEltcG9ydGFuY2VGYWN0b3IgKTtcclxuXHRcdFx0cmV0dXJuICggdHJ1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCwgTWFrZVNlY3RvclJlbmRlcmluZ0RhdGEgOiBmdW5jdGlvbiAoIHNlY3RvciApXHJcblx0XHR7XHJcblx0XHRcdHZhciBmYWNlID0gbmV3IFRIUkVFLlZlY3RvcjQoIDI1NSwgMCwgMCwgMjU1ICksIGVkZ2UgPSBuZXcgVEhSRUUuVmVjdG9yNCggMCwgMCwgMCwgMjU1ICk7XHJcblx0XHRcdHZhciBwb3dlciA9IDQwMDtcclxuXHRcdFx0dmFyIHgsIHksIHo7XHJcblx0XHRcdHZhciBvZnM7XHJcblx0XHRcdHZhciBpbmZvO1xyXG5cdFx0XHR2YXIgY3ViZTtcclxuXHRcdFx0LyogYnVpbGQgc2VjdG9yIGdlb21ldHJ5ICovXHJcbiAgICAgIHZhciBjbHVzdGVyID0gc2VjdG9yLmNsdXN0ZXI7XHJcblx0XHRcdHZhciBPZmZzZXQ7XHJcblx0XHRcdHZhciBjdWJ4LCBjdWJ5LCBjdWJ6O1xyXG5cdFx0XHR2YXIgU2VjdG9yX0Rpc3BsYXlfeCwgU2VjdG9yX0Rpc3BsYXlfeSwgU2VjdG9yX0Rpc3BsYXlfejtcclxuXHRcdFx0dmFyIERyYXc7XHJcbiAgICAgICAgICAgIHZhciBQMCxQMSxQMixQMyxQNCxQNSxQNixQNztcclxuXHJcbiAgICAgICAgICAgIGlmKCAhc2VjdG9yLnNvbGlkX2dlb21ldHJ5ICkge1xyXG4gICAgICAgICAgICAgICAgc2VjdG9yLnNvbGlkX2dlb21ldHJ5ID0gY2x1c3Rlci5nZXRHZW9tZXRyeUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgc2VjdG9yLkZsYWdfUmVuZGVyX0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiggIXNlY3Rvci5kYXRhLkZhY2VDdWxsaW5nIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VjdG9yLmN1bGxlciA9IGNsdXN0ZXIubWVzaGVyLmN1bGxlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEN1bGxpbmcoIHNlY3RvciApO1xyXG4gICAgICAgICAgICAgIH1cclxuXHRcdFx0Ly8gRGlzcGxheSBsaXN0IGNyZWF0aW9uIG9yIHJldXNlLlxyXG5cdFx0XHRpZiggc2VjdG9yLkZsYWdfUmVuZGVyX0RpcnR5IClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBnZW9tZXRyeSA9IHNlY3Rvci5zb2xpZF9nZW9tZXRyeTtcclxuXHRcdFx0XHR2YXIgdm94ZWxTaXplID0gY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG5cdFx0XHRcdHZhciBGYWNlQ3VsbGluZyA9IHNlY3Rvci5kYXRhLkZhY2VDdWxsaW5nO1xyXG5cdFx0XHRcdC8vTG9nLmxvZyggXCJJcyBEaXJ0eSBCdWlsZGluZyBzZWN0b3IgezB9IHsxfSB7Mn1cIiwgc2VjdG9yLnBvcy54LCBzZWN0b3IucG9zLnksIHNlY3Rvci5wb3MueiApO1xyXG5cdFx0XHRcdFNlY3Rvcl9EaXNwbGF5X3ggPSAoIHNlY3Rvci5wb3MueCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiB2b3hlbFNpemUgKTtcclxuXHRcdFx0XHRTZWN0b3JfRGlzcGxheV95ID0gKCBzZWN0b3IucG9zLnkgKiBjbHVzdGVyLnNlY3RvclNpemVZICogdm94ZWxTaXplICk7XHJcblx0XHRcdFx0U2VjdG9yX0Rpc3BsYXlfeiA9ICggc2VjdG9yLnBvcy56ICogY2x1c3Rlci5zZWN0b3JTaXplWiAqIHZveGVsU2l6ZSApO1xyXG5cclxuXHRcdFx0XHRzZWN0b3IuRmxhZ19Wb2lkX1JlZ3VsYXIgPSB0cnVlO1xyXG5cdFx0XHRcdHNlY3Rvci5GbGFnX1ZvaWRfVHJhbnNwYXJlbnQgPSB0cnVlO1xyXG5cdFx0XHRcdHNlY3Rvci5GbGFnX1ZvaWRfQ3VzdG9tID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vc2VjdG9yLnBoeXNpY3MuRW1wdHkgPSB0cnVlO1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGdlb21ldHJ5LmNsZWFyKCk7XHJcblx0XHRcdFx0XHQvKlxyXG5cdFx0XHRcdFx0TG9nLmxvZyggXCJzZWN0b3IgaXMgezZ9IHs3fSB7OH0gbmVhciBsezB9IHJ7MX0gYWJ7Mn0gYmx7M30gYmh7NH0gYWh7NX1cIlxyXG5cdFx0XHRcdFx0XHQsICggc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQtMV0gIT0gbnVsbCApID8gXCJZZXNcIiA6IFwibm9cIlxyXG5cdFx0XHRcdFx0XHQsICggc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV0gIT0gbnVsbCApID8gXCJZZXNcIiA6IFwibm9cIlxyXG5cdFx0XHRcdFx0XHQsICggc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV0gIT0gbnVsbCApID8gXCJZZXNcIiA6IFwibm9cIlxyXG5cdFx0XHRcdFx0XHQsICggc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV0gIT0gbnVsbCApID8gXCJZZXNcIiA6IFwibm9cIlxyXG5cdFx0XHRcdFx0XHQsICggc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORCAtIDFdICE9IG51bGwgKSA/IFwiWWVzXCIgOiBcIm5vXCJcclxuXHRcdFx0XHRcdFx0LCAoIHNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCAtIDFdICE9IG51bGwgKSA/IFwiWWVzXCIgOiBcIm5vXCJcclxuXHRcdFx0XHRcdFx0LCBzZWN0b3IucG9zLngsIHNlY3Rvci5wb3MueSwgc2VjdG9yLnBvcy56XHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHQqL1xyXG4gICAgICAgICAgc2VjdG9yLmRhdGEuZGF0YS5mb3JFYWNoKCAodm94ZWwsT2Zmc2V0KT0+XHJcblx0XHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBnZW9tZXRyeS5hdmFpbGFibGUgPiAyNTYwMDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhdm94ZWwgKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRpbmZvID0gRmFjZUN1bGxpbmdbT2Zmc2V0XTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiggdm94ZWwgJiYgaW5mbyAhPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTk9ORSApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCB2b3hlbC5wcm9wZXJ0aWVzLkRyYXdJbmZvID09PSBWb3hlbGFyaXVtLlpWT1hFTF9EUkFXSU5GT19WT0lEIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyYXcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiggdm94ZWwucHJvcGVydGllcy5EcmF3X1RyYW5zcGFyZW50UmVuZGVyaW5nIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7IERyYXcgPSBmYWxzZTsgc2VjdG9yLkZsYWdfVm9pZF9UcmFuc3BhcmVudCA9IGZhbHNlOyB9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7IERyYXcgPSB0cnVlOyBzZWN0b3IuRmxhZ19Wb2lkX1JlZ3VsYXIgPSBmYWxzZTsgfVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHREcmF3ID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoIERyYXcgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgYm94ID0gdm94ZWwuVGV4dHVyZUNvb3JkcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGZhY2VfaXNfc2hhZGVkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoICFWb3hlbGFyaXVtLlNldHRpbmdzLnVzZV9iYXNpY19tYXRlcmlhbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgKCB2b3hlbC5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fU0hBREVSICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmYWNlID0gdm94ZWwucHJvcGVydGllcy5GYWNlQ29sb3I7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWRnZSA9IHZveGVsLnByb3BlcnRpZXMuRWRnZUNvbG9yO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBvd2VyID0gdm94ZWwucHJvcGVydGllcy5FZGdlUG93ZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZmFjZV9pc19zaGFkZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2UgXHJcbiAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3ViZSA9IHZveGVsO1xyXG5cdCAgICAgICAgICAgICAgICAgIGZhY2VfaXNfc2hhZGVkID0gZmFsc2U7IC8vIHVzZXMgdGV4dHVyZSBpbnN0ZWFkIG9mIGFsZ29yaXRobVxyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIGluZm8gIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiU2V0IHNlY3RvciB7MH0gezF9IHsyfSBvZmZzZXQgezN9ICAgezQ6eH1cIiwgc2VjdG9yLnBvcy54LCBzZWN0b3IucG9zLnksIHNlY3Rvci5wb3MueiwgT2Zmc2V0LCBpbmZvICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9zZWN0b3IucGh5c2ljcy5TZXRWb3hlbCggT2Zmc2V0ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9zZWN0b3IucGh5c2ljcy5DbGVhclZveGVsKCBPZmZzZXQgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL2NvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgY3VieCA9IFNlY3Rvcl9EaXNwbGF5X3ggKyB2b3hlbFNpemUgKiAoIE1hdGguZmxvb3IoIE9mZnNldCAvIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSAlIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y3VieSA9IFNlY3Rvcl9EaXNwbGF5X3kgKyB2b3hlbFNpemUgKiAoICggT2Zmc2V0ICkgJSBjbHVzdGVyLnNlY3RvclNpemVZICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGN1YnogPSBTZWN0b3JfRGlzcGxheV96ICsgdm94ZWxTaXplICogKCBNYXRoLmZsb29yKCBPZmZzZXQgLyAoY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSApICUgY2x1c3Rlci5zZWN0b3JTaXplWiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL2N1YnggPSAoIHggKiB2b3hlbFNpemUgKyBTZWN0b3JfRGlzcGxheV94ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vY3VieSA9ICggeSAqIHZveGVsU2l6ZSArIFNlY3Rvcl9EaXNwbGF5X3kgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly9jdWJ6ID0gKCB6ICogdm94ZWxTaXplICsgU2VjdG9yX0Rpc3BsYXlfeiApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIDAgIT0gKCB2b3hlbC5wcm9wZXJ0aWVzLkRyYXdJbmZvICYgVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fU1BFQ0lBTFJFTkRFUklORyApKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7IC8qVm94ZWxUeXBlVGFibGVbY3ViZV0uU3BlY2lhbFJlbmRlciggY3VieCwgY3VieSwgY3VieiApOyAqL1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcIk5lZWQgdG8gYWRkIGN1c3RvbSBwYXNzIGZvciBzcGVjaWFsIHJlbmRlclwiICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuOy8vY29udGludWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdFAwID0gbmV3IFRIUkVFLlZlY3RvcjMoIGN1YngsIGN1YnksIGN1YnogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0UDEgPSBuZXcgVEhSRUUuVmVjdG9yMyggY3VieCArIHZveGVsU2l6ZSwgY3VieSwgY3VieiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRQMiA9IG5ldyBUSFJFRS5WZWN0b3IzKCBjdWJ4ICsgdm94ZWxTaXplLGN1YnksIGN1YnogKyB2b3hlbFNpemUgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0UDMgPSBuZXcgVEhSRUUuVmVjdG9yMyggY3VieCwgY3VieSwgY3VieiArIHZveGVsU2l6ZSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRQNCA9IG5ldyBUSFJFRS5WZWN0b3IzKCBjdWJ4LCBjdWJ5ICsgdm94ZWxTaXplLCBjdWJ6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFA1ID0gbmV3IFRIUkVFLlZlY3RvcjMoIGN1YnggKyB2b3hlbFNpemUsIGN1YnkgKyB2b3hlbFNpemUsIGN1YnogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0UDYgPSBuZXcgVEhSRUUuVmVjdG9yMyggY3VieCArIHZveGVsU2l6ZSwgY3VieSArIHZveGVsU2l6ZSwgY3VieiArIHZveGVsU2l6ZSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRQNyA9IG5ldyBUSFJFRS5WZWN0b3IzKCBjdWJ4LCBjdWJ5ICsgdm94ZWxTaXplLCBjdWJ6ICsgdm94ZWxTaXplICk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL0xlZnRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoICggaW5mbyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQNCAsIFAwLCBQMywgUDcgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggZmFjZV9pc19zaGFkZWQgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZCggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdLCBQMywgUDcsIFAwLCBQNCwgZmFjZSwgZWRnZSwgcG93ZXIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdLCBQMywgUDcsIFAwLCBQNCwgdm94ZWwudGV4dHVyZUNvb3JkcyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSaWdodFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggKCBpbmZvICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQNSwgUDYsIFAyLCBQMSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBmYWNlX2lzX3NoYWRlZCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdLCBQMSwgUDUsIFAyLCBQNiwgZmFjZSwgZWRnZSwgcG93ZXIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSwgUDEsIFA1LCBQMiwgUDYsIHZveGVsLnRleHR1cmVDb29yZHMgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL0Zyb250XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKCAoIGluZm8gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQMCwgUDQsIFA1LCBQMSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBmYWNlX2lzX3NoYWRlZCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSwgUDAsIFA0LCBQMSwgUDUsIGZhY2UsIGVkZ2UsIHBvd2VyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZFRleHR1cmUoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLCBQMCwgUDQsIFAxLCBQNSwgdm94ZWwudGV4dHVyZUNvb3JkcyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL0JhY2tcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoICggaW5mbyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BSEVBRCApICE9IDAgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9Mb2cubG9nKCBcIkFkZCB7MH0gezF9IHsyfSB7M31cIiwgUDIsIFA2LCBQMywgUDcgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggZmFjZV9pc19zaGFkZWQgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZCggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSwgUDIsIFA2LCBQMywgUDcsIGZhY2UsIGVkZ2UsIHBvd2VyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZFRleHR1cmUoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0sIFAyLCBQNiwgUDMsIFA3LCB2b3hlbC50ZXh0dXJlQ29vcmRzICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRvcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggKCBpbmZvICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQNCwgUDcsIFA1LCBQNiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBmYWNlX2lzX3NoYWRlZCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLCBQNCwgUDcsIFA1LCBQNiwgZmFjZSwgZWRnZSwgcG93ZXIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSwgUDQsIFA3LCBQNSwgUDYsIHZveGVsLnRleHR1cmVDb29yZHMgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQm90dG9tXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKCAoIGluZm8gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKSAhPSAwIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vTG9nLmxvZyggXCJBZGQgezB9IHsxfSB7Mn0gezN9XCIsIFAwLCBQMSwgUDMsIFAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGZhY2VfaXNfc2hhZGVkIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWQoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10sIFAzLCBQMCwgUDIsIFAxLCBmYWNlLCBlZGdlLCBwb3dlciApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWRUZXh0dXJlKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddLCBQMywgUDAsIFAyLCBQMSwgdm94ZWwudGV4dHVyZUNvb3JkcyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHQvL2Vsc2VcclxuXHRcdFx0XHRcdFx0XHRcdC8vXHRzZWN0b3IucGh5c2ljcy5DbGVhclZveGVsKCBPZmZzZXQgKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICBnZW9tZXRyeS5tYXJrRGlydHkoKTtcclxuXHRcdFx0XHRzZWN0b3IuRmxhZ19SZW5kZXJfRGlydHkgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuICAgICAgICAsIGZpeGVkX2xpc3RzIDogZmFsc2VcclxuXHJcblx0XHQsIE1ha2VTZWN0b3JSZW5kZXJpbmdEYXRhX1NvcnRlZCA6IGZ1bmN0aW9uICggc2VjdG9yLCB2aWV3ZWRfYXNcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCwgY2VudGVyWCwgY2VudGVyWSwgY2VudGVyWiApXHJcblx0XHR7XHJcblx0XHRcdGlmKCBzZWN0b3IuRmxhZ19Wb2lkX1RyYW5zcGFyZW50IClcclxuXHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRpZiggIWZpeGVkX2xpc3RzIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZvciggdmFyIG4gPSAxOTsgbiA8IDI3OyBuKysgKVxyXG5cdFx0XHRcdFx0Zm9yKCB2YXIgbSA9IDA7IG0gPCAzOyBtKysgKVxyXG5cdFx0XHRcdFx0XHRPcmRlcmVkRmFjZXNbbl1bbV0gPSAwO1xyXG5cdFx0XHRcdGZpeGVkX2xpc3RzID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgdmFyIGZhY2UgPSBuZXcgVEhSRUUuVmVjdG9yNCggMjU2LCAwLCAwLCAyNTYgKSwgZWRnZSA9IG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAyNTYgKTtcclxuXHRcdFx0dmFyIHBvd2VyID0gNDAwO1xyXG5cdFx0XHR2YXIgeCwgeSwgejtcclxuXHRcdFx0dmFyIGluZm87XHJcblx0XHRcdHZhciBzb3J0ZWRfZHJhd19pbmZvID0gc29ydGVkX2RyYXdfaW5mb3Nbdmlld2VkX2FzXTtcclxuXHRcdFx0dmFyIGN1YmUsIHByZXZjdWJlO1xyXG5cdFx0XHQvKiBidWlsZCBzZWN0b3IgZ2VvbWV0cnkgKi9cclxuXHJcblx0XHRcdHZhciBPZmZzZXQ7XHJcblx0XHRcdHZhciBjdWJ4LCBjdWJ5LCBjdWJ6O1xyXG5cdFx0XHR2YXIgU2VjdG9yX0Rpc3BsYXlfeCwgU2VjdG9yX0Rpc3BsYXlfeSwgU2VjdG9yX0Rpc3BsYXlfejtcclxuXHRcdFx0dmFyIERyYXc7XHJcblxyXG5cdFx0XHR2YXIgUDAsIFAxLCBQMiwgUDMsIFA0LCBQNSwgUDYsIFA3O1xyXG5cclxuXHRcdFx0Ly9Mb2cubG9nKCBcIkJ1aWxkaW5nIHNlY3RvciB7MH0gezF9IHsyfVwiLCBzZWN0b3IucG9zLngsIHNlY3Rvci5wb3MueSwgc2VjdG9yLnBvcy56ICk7XHJcblx0XHRcdC8vIERpc3BsYXkgbGlzdCBjcmVhdGlvbiBvciByZXVzZS5cclxuXHRcdFx0dmFyIGdlb21ldHJ5ID0gc2VjdG9yLnRyYW5zcGFyZW50X2dlb21ldHJ5O1xyXG5cdFx0XHR2YXIgdm94ZWxTaXplID0gc2VjdG9yLmNsdXN0ZXIudm94ZWxVbml0U2l6ZTtcclxuXHRcdFx0dmFyIEZhY2VDdWxsaW5nID0gc2VjdG9yLmRhdGEuRmFjZUN1bGxpbmc7XHJcblx0XHRcdFNlY3Rvcl9EaXNwbGF5X3ggPSAoIHNlY3Rvci5wb3MueCAqIHNlY3Rvci5TaXplX3ggKiB2b3hlbFNpemUgKTtcclxuXHRcdFx0U2VjdG9yX0Rpc3BsYXlfeSA9ICggc2VjdG9yLnBvcy55ICogc2VjdG9yLlNpemVfeSAqIHZveGVsU2l6ZSApO1xyXG5cdFx0XHRTZWN0b3JfRGlzcGxheV96ID0gKCBzZWN0b3IucG9zLnogKiBzZWN0b3IuU2l6ZV96ICogdm94ZWxTaXplICk7XHJcblxyXG5cdFx0XHR2YXIgU2VjdG9ySW5kZXhlcyA9IFNvcnRlZFNlY3RvckluZGV4ZXNbdmlld2VkX2FzXTtcclxuXHRcdFx0LypcclxuXHRcdFx0aWYoIGdlb21ldHJ5LnRyYW5zcGFyZW50X3JlbmRlcl9zb3J0aW5nICE9IHZpZXdlZF9hcyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnZW9tZXRyeS50cmFuc3BhcmVudF9yZW5kZXJfc29ydGluZyA9IHZpZXdlZF9hcztcclxuXHRcdFx0XHRzZWN0b3IuRmxhZ19SZW5kZXJfRGlydHlfVHJhbnNwYXJlbnQgPSB0cnVlO1xyXG5cdFx0XHRcdGdlb21ldHJ5LnNvcnRlZFggPSAtMTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiggdmlld2VkX2FzID09IFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5DRU5URVIgKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIGNlbnRlcl9zb3J0ZWRfeCAhPSBjZW50ZXJYXHJcblx0XHRcdFx0XHR8fCBjZW50ZXJfc29ydGVkX3kgIT0gY2VudGVyWVxyXG5cdFx0XHRcdFx0fHwgY2VudGVyX3NvcnRlZF96ICE9IGNlbnRlclogKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHNlY3Rvci5GbGFnX1JlbmRlcl9EaXJ0eV9UcmFuc3BhcmVudCA9IHRydWU7XHJcblx0XHRcdFx0XHRCdWlsZFNvcnRMaXN0SW5TZWN0b3IoIGNlbnRlclgsIGNlbnRlclksIGNlbnRlclogKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Ki9cclxuXHRcdFx0aWYoIHNlY3Rvci5GbGFnX1JlbmRlcl9EaXJ0eV9UcmFuc3BhcmVudCApXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvL0xvZy5sb2coIFwiUmVnbmVyYXRlIEFscGhhIEdlb21ldHJ5IHswfSB7MX0gezJ9XCIsIHNlY3Rvci5wb3MueCwgc2VjdG9yLnBvcy55LCBzZWN0b3IucG9zLnogKTtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgZmFjZV9pc19zaGFkZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dmFyIHZpZXdfb3JkZXJfbGlzdCA9IG51bGw7XHJcblx0XHRcdFx0XHRnZW9tZXRyeS5DbGVhcigpO1xyXG5cclxuXHRcdFx0XHRcdHByZXZjdWJlID0gMDtcclxuXHRcdFx0XHRcdGZvciggdmFyIE9mZnNldEluZGV4ID0gMDsgT2Zmc2V0SW5kZXggPCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DS0NPVU5UOyBPZmZzZXRJbmRleCsrIClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdE9mZnNldCA9IFNlY3RvckluZGV4ZXNbT2Zmc2V0SW5kZXhdO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGN1YmUgPSBzZWN0b3IuZGF0YS5kYXRhW09mZnNldF07XHJcblx0XHRcdFx0XHRcdFx0XHRpbmZvID0gRmFjZUN1bGxpbmdbT2Zmc2V0XTsvLyAmIChWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMX0JJVFMpOy8vIHNvcnRlZF9kcmF3X2luZm87XHJcblx0XHRcdFx0XHRcdFx0XHQvL2luZm8gPSAoVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zKUZhY2VDdWxsaW5nW09mZnNldF0gJiBzb3J0ZWRfZHJhd19pbmZvO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJlICYmICggaW5mbyApIT0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLk5PTkUgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHREcmF3ID0gY3ViZS5wcm9wZXJ0aWVzLkRyYXdfVHJhbnNwYXJlbnRSZW5kZXJpbmc7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdERyYXcgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiggRHJhdyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBib3g7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKCBwcmV2Y3ViZSAhPT0gY3ViZSApXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRib3ggPSB2b3hlbC50ZXh0dXJlQ29vcmRzO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCAoIGN1YmUucHJvcGVydGllcy5EcmF3SW5mbyAmIFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX1NIQURFUiApICE9IDAgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZhY2UgPSBjdWJlLnByb3BlcnRpZXMuRmFjZUNvbG9yO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWRnZSA9IGN1YmUucHJvcGVydGllcy5FZGdlQ29sb3I7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3dlciA9IGN1YmUucHJvcGVydGllcy5FZGdlUG93ZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmYWNlX2lzX3NoYWRlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZhY2VfaXNfc2hhZGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0cHJldmN1YmUgPSBjdWJlO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y3VieCA9ICggT2Zmc2V0IC8gY2x1c3Rlci5zZWN0b3JTaXplWSApICUgY2x1c3Rlci5zZWN0b3JTaXplWDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y3VieSA9ICggT2Zmc2V0ICkgJSBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjdWJ6ID0gKCBPZmZzZXQgLyAoY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSApICUgY2x1c3Rlci5zZWN0b3JTaXplWjtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdFAwLlggPSBjdWJ4OyBQMC5ZID0gY3VieTsgUDAuWiA9IGN1Yno7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFAxLlggPSBjdWJ4ICsgdm94ZWxTaXplOyBQMS5ZID0gY3VieTsgUDEuWiA9IGN1Yno7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFAyLlggPSBjdWJ4ICsgdm94ZWxTaXplOyBQMi5ZID0gY3VieTsgUDIuWiA9IGN1YnogKyB2b3hlbFNpemU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFAzLlggPSBjdWJ4OyBQMy5ZID0gY3VieTsgUDMuWiA9IGN1YnogKyB2b3hlbFNpemU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFA0LlggPSBjdWJ4OyBQNC5ZID0gY3VieSArIHZveGVsU2l6ZTsgUDQuWiA9IGN1Yno7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFA1LlggPSBjdWJ4ICsgdm94ZWxTaXplOyBQNS5ZID0gY3VieSArIHZveGVsU2l6ZTsgUDUuWiA9IGN1Yno7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFA2LlggPSBjdWJ4ICsgdm94ZWxTaXplOyBQNi5ZID0gY3VieSArIHZveGVsU2l6ZTsgUDYuWiA9IGN1YnogKyB2b3hlbFNpemU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFA3LlggPSBjdWJ4OyBQNy5ZID0gY3VieSArIHZveGVsU2l6ZTsgUDcuWiA9IGN1YnogKyB2b3hlbFNpemU7XHJcblxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIHZpZXdlZF9hcyA8IDEgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnggPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ5IDwgY2VudGVyWSApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ6IDwgY2VudGVyWiApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ6IDwgY2VudGVyWiApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnkgPCBjZW50ZXJZIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ6IDwgY2VudGVyWiApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ6IDwgY2VudGVyWiApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmKCB2aWV3ZWRfYXMgPCA3IClcclxuXHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN3aXRjaCggdmlld2VkX2FzIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieSA8IGNlbnRlclkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieiA8IGNlbnRlclogKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieiA8IGNlbnRlclogKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnkgPCBjZW50ZXJZIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJaIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieiA8IGNlbnRlclogKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieSA8IGNlbnRlclkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ5IDwgY2VudGVyWSApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ6IDwgY2VudGVyWCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnggPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJaIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnggPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJaIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYoIHZpZXdlZF9hcyA8IDE5IClcclxuXHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN3aXRjaCggdmlld2VkX2FzIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQUQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieSA8IGNlbnRlclkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEX0JFTE9XXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BSEVBRF9BQk9WRV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQUQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieSA8IGNlbnRlclkgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BSEVBRF9CRUxPV107XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FIRUFEX0FCT1ZFXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ5IDwgY2VudGVyWSApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVISU5EX0JFTE9XXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQUJPVkVdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBjdWJ5IDwgY2VudGVyWSApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9CRUxPV107XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9BQk9WRV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQUQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEX0FCT1ZFXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQUJPVkVdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnggPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BSEVBRF9CRUxPV107XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FIRUFEX0JFTE9XXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieCA8IGNlbnRlclggKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9BQk9WRV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFSElORF9BQk9WRV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnggPCBjZW50ZXJYIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkRfQkVMT1ddO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkRfQkVMT1ddO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkU6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieiA8IGNlbnRlclogKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9BQk9WRV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQUJPVkVdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1c6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggY3VieiA8IGNlbnRlclogKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFSElORF9CRUxPV107XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZpZXdfb3JkZXJfbGlzdCA9IE9yZGVyZWRGYWNlc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURfQkVMT1ddO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJaIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVISU5EX0FCT1ZFXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQUJPVkVdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGN1YnogPCBjZW50ZXJaIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVISU5EX0JFTE9XXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmlld19vcmRlcl9saXN0ID0gT3JkZXJlZEZhY2VzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQURfQkVMT1ddO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2aWV3X29yZGVyX2xpc3QgPSBPcmRlcmVkRmFjZXNbdmlld2VkX2FzXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgZiA9IDA7IGYgPCA2OyBmKysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3dpdGNoKCB2aWV3X29yZGVyX2xpc3RbZl0gKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vTGVmdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggaW5mbyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vTG9nLmxvZyggXCJBZGQgezB9IHsxfSB7Mn0gezN9XCIsIFA0ICwgUDAsIFAzLCBQNyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggZmFjZV9pc19zaGFkZWQgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWQoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXSwgUDMsIFA3LCBQMCwgUDQsIGZhY2UsIGVkZ2UsIHBvd2VyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdLCBQMywgUDcsIFAwLCBQNCwgdm94ZWwudGV4dHVyZUNvb3JkcyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUOlxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJpZ2h0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCBpbmZvICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vTG9nLmxvZyggXCJBZGQgezB9IHsxfSB7Mn0gezN9XCIsIFA1LCBQNiwgUDIsIFAxICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBmYWNlX2lzX3NoYWRlZCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZCggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSwgUDEsIFA1LCBQMiwgUDYsIGZhY2UsIGVkZ2UsIHBvd2VyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSwgUDEsIFA1LCBQMiwgUDYsIHZveGVsLnRleHR1cmVDb29yZHMgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvL0Zyb250XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCBpbmZvICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCApICE9IDAgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQMCwgUDQsIFA1LCBQMSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggZmFjZV9pc19zaGFkZWQgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWQoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLCBQMCwgUDQsIFAxLCBQNSwgZmFjZSwgZWRnZSwgcG93ZXIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWRUZXh0dXJlKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSwgUDAsIFA0LCBQMSwgUDUsIHZveGVsLnRleHR1cmVDb29yZHMgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vQmFja1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggaW5mbyAmIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BSEVBRCApICE9IDAgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiQWRkIHswfSB7MX0gezJ9IHszfVwiLCBQMiwgUDYsIFAzLCBQNyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggZmFjZV9pc19zaGFkZWQgKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWQoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0sIFAyLCBQNiwgUDMsIFA3LCBmYWNlLCBlZGdlLCBwb3dlciApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZFRleHR1cmUoIG5vcm1hbHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0sIFAyLCBQNiwgUDMsIFA3LCB2b3hlbC50ZXh0dXJlQ29vcmRzICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkU6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUb3BcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCAoIGluZm8gJiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkUgKSAhPSAwIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9Mb2cubG9nKCBcIkFkZCB7MH0gezF9IHsyfSB7M31cIiwgUDQsIFA3LCBQNSwgUDYgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIGZhY2VfaXNfc2hhZGVkIClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLCBQNCwgUDcsIFA1LCBQNiwgZmFjZSwgZWRnZSwgcG93ZXIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5LkFkZFF1YWRUZXh0dXJlKCBub3JtYWxzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLCBQNCwgUDcsIFA1LCBQNiwgdm94ZWwudGV4dHVyZUNvb3JkcyApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQm90dG9tXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCBpbmZvICYgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XICkgIT0gMCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vTG9nLmxvZyggXCJBZGQgezB9IHsxfSB7Mn0gezN9XCIsIFAwLCBQMSwgUDMsIFAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCBmYWNlX2lzX3NoYWRlZCApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnkuQWRkUXVhZCggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSwgUDMsIFAwLCBQMiwgUDEsIGZhY2UsIGVkZ2UsIHBvd2VyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRnZW9tZXRyeS5BZGRRdWFkVGV4dHVyZSggbm9ybWFsc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSwgUDMsIFAwLCBQMiwgUDEsIHZveGVsLnRleHR1cmVDb29yZHMgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIGdlb21ldHJ5Lm1hcmtEaXJ0eSgpO1xyXG5cclxuXHRcdFx0XHRzZWN0b3IuRmxhZ19SZW5kZXJfRGlydHlfVHJhbnNwYXJlbnQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0LCBzb3J0ZWRfZHJhd19pbmZvcyA6IG5ldyBBcnJheSggMjcpXHJcbiAgICAgICAgLCBTb3J0ZWRTZWN0b3JJbmRleGVzIDogbmV3IEFycmF5KDI3KSAvL3VzaG9ydFsyN11bXTtcclxuXHRcdCwgY2VudGVyX3NvcnRlZF94IDogLTFcclxuICAgICAgICAsIGNlbnRlcl9zb3J0ZWRfeSA6IDBcclxuICAgICAgICAsIGNlbnRlcl9zb3J0ZWRfeiA6IDBcclxuXHJcblx0XHQvLy8gPHN1bW1hcnk+XHJcblx0XHQvLy8gQnVpbGQgdGhlIElOQ0VOVEVSIG9yZGVyIGxpc3QuXHJcblx0XHQvLy8gPC9zdW1tYXJ5PlxyXG5cdFx0Ly8vIDxwYXJhbSBuYW1lPVwieFwiPnZveGVsIHBvc2l0aW9uIG9mIHZpZXdwb2ludDwvcGFyYW0+XHJcblx0XHQvLy8gPHBhcmFtIG5hbWU9XCJ5XCI+dm94ZWwgcG9zaXRpb24gb2Ygdmlld3BvaW50PC9wYXJhbT5cclxuXHRcdC8vLyA8cGFyYW0gbmFtZT1cInpcIj52b3hlbCBwb3NpdGlvbiBvZiB2aWV3cG9pbnQ8L3BhcmFtPlxyXG5cdFx0LCBCdWlsZFNvcnRMaXN0SW5TZWN0b3IgOiBmdW5jdGlvbiAoIGNsdXN0ZXIsIGV5ZV94LCBleWVfeSwgZXllX3ogKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgeCwgeSwgejtcclxuXHRcdFx0dmFyIHRtcHgsIHRtcHksIHRtcHo7XHJcblx0XHRcdHZhciBkO1xyXG5cdFx0XHR2YXIgdmFsO1xyXG5cdFx0XHRpZiggY2VudGVyX3NvcnRlZF94ICE9IGV5ZV94IHx8IGNlbnRlcl9zb3J0ZWRfeSAhPSBleWVfeSB8fCBjZW50ZXJfc29ydGVkX3ogIT0gZXllX3ogKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIG47XHJcblx0XHRcdFx0Y2VudGVyX3NvcnRlZF94ID0gZXllX3g7XHJcblx0XHRcdFx0Y2VudGVyX3NvcnRlZF95ID0gZXllX3k7XHJcblx0XHRcdFx0Y2VudGVyX3NvcnRlZF96ID0gZXllX3o7XHJcblx0XHRcdFx0Ly8geCwgeSwgeiBwb1xyXG5cdFx0XHRcdHNvcnRlci5DbGVhcigpO1xyXG5cdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHggKiBjbHVzdGVyLnNlY3RvclNpemVZICsgeSArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWSApO1xyXG5cdFx0XHRcdFx0XHRcdHRtcHggPSB4IC0gZXllX3g7XHJcblx0XHRcdFx0XHRcdFx0dG1weSA9IHkgLSBleWVfeTtcclxuXHRcdFx0XHRcdFx0XHR0bXB6ID0geiAtIGV5ZV96O1xyXG5cdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIEluZGV4ZXM7XHJcblx0XHRcdFx0SW5kZXhlcyA9IFNvcnRlZFNlY3RvckluZGV4ZXNbMF07XHJcblx0XHRcdFx0biA9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NLQ09VTlQ7XHJcbiAgICAgICAgICAgICAgICBzb3J0ZXIuZm9yRWFjaCggKGluZGV4KT0+e1xyXG5cdFx0XHRcdFx0Ly8gcmV0cmlldmVkIGNsb3Nlc3QgdG8gZnVydGhlc3Qgc28uLi4gcmV2ZXJzZSBzdG9yaW5nIGl0LlxyXG5cdFx0XHRcdFx0SW5kZXhlc1stLW5dID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdCwgQnVpbGRTb3J0TGlzdCA6IGZ1bmN0aW9uICggIClcclxuXHRcdHtcclxuXHRcdFx0dmFyIHgsIHksIHo7XHJcblx0XHRcdHZhciB0bXB4LCB0bXB5LCB0bXB6O1xyXG5cdFx0XHR2YXIgZDtcclxuXHRcdFx0dmFyIHZhbDtcclxuXHRcdFx0dmFyIGJpbmFyeU91dHB1dCA9IG5ldyB1c2hvcnRbVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ0tDT1VOVF07XHJcblx0XHRcdHZhciBiaW5hcnlPdXRwdXRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgc29ydGVyID0gVm94ZWxhcml1bS5zb3J0ZXJzW2NsdXN0ZXIuc2VjdG9yU2l6ZV07XHJcbiAgICAgICAgICAgIGlmKCAhc29ydGVyIClcclxuICAgICAgICAgICAgICAgIHNvcnRlciA9IFZveGVsYXJpdW0uc29ydGVyc1tjbHVzdGVyLnNlY3RvclNpemVdID0gVm94ZWxhcml1bS5Tb3J0aW5nVHJlZSggY2x1c3Rlci5zZWN0b3JTaXplICk7XHJcblx0XHRcdC8vc3RhcnRfc3RlcHMgKz0gMjc7XHJcblx0XHRcdHNvcnRlci5BdXRvQmFsYW5jZSA9IHRydWU7XHJcblxyXG5cdFx0XHR2YXIgaTtcclxuXHRcdFx0Zm9yKCBpID0gVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5JTkNFTlRFUjtcclxuXHRcdFx0XHRcdFx0aSA8PSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF9CRUxPVzsgaSsrIClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBJbmRleGVzO1xyXG5cdFx0XHRcdHZhciBuLCBtO1xyXG5cdFx0XHRcdHZhciB4dmFsLCB6dmFsO1xyXG5cdFx0XHRcdEluZGV4ZXMgPSBTb3J0ZWRTZWN0b3JJbmRleGVzW2ldID0gbmV3IHVzaG9ydFtWb3hlbFNlY3Rvci5aVk9YRUxCTE9DS0NPVU5UXTtcclxuXHRcdFx0XHRuID0gMDtcclxuXHRcdFx0XHRtID0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ0tDT1VOVCAtIDE7XHJcblx0XHRcdFx0c29ydGVyLkNsZWFyKCk7XHJcblx0XHRcdFx0c3dpdGNoKCBpIClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5DRU5URVI6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTDtcclxuXHRcdFx0XHRcdFx0Ly8gbm8gaW5mb3JtYXRpb247IHRoaXMgb25lIGhhcyB0byBiZSBkb25lIGN1c3RvbS5cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQ7XHJcblx0XHRcdFx0XHRcdC8vZm9yKCBuID0gMDsgbiA8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NLQ09VTlQ7IG4rKyApXHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKHp2YWwgKyB5KTsgLy8odXNob3J0KSggYmluYXJ5T3V0cHV0W25dICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8veCA9ICggdmFsID4+IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgJiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19YO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvL3kgPSAoIHZhbCAgKSAmIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1k7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8veiA9ICggdmFsID4+ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgJiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0gY2x1c3Rlci5zZWN0b3JTaXplWCAtIHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5IC0gKCBjbHVzdGVyLnNlY3RvclNpemVZIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0geiAtICggY2x1c3Rlci5zZWN0b3JTaXplWiAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly9Mb2cubG9nKFwiQWRkIHswfSB7MX0gezJ9ICB7M31cIiwgeCwgeSwgeiwgZCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5IC0gKCBjbHVzdGVyLnNlY3RvclNpemVZIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0geiAtICggY2x1c3Rlci5zZWN0b3JTaXplWiAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkU7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0geCAtICggY2x1c3Rlci5zZWN0b3JTaXplWCAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IHk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSB6IC0gKCBjbHVzdGVyLnNlY3RvclNpemVaIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1c6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVztcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4IC0gKCBjbHVzdGVyLnNlY3RvclNpemVYIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0gY2x1c3Rlci5zZWN0b3JTaXplWSAtIHk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSB6IC0gKCBjbHVzdGVyLnNlY3RvclNpemVaIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BSEVBRDtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4IC0gKCBjbHVzdGVyLnNlY3RvclNpemVYIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0geSAtICggY2x1c3Rlci5zZWN0b3JTaXplWSAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IHo7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUhJTkQ7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0geCAtICggY2x1c3Rlci5zZWN0b3JTaXplWCAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IHkgLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSBjbHVzdGVyLnNlY3RvclNpemVaIC0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlR8Vm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSBjbHVzdGVyLnNlY3RvclNpemVYIC0geDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IHkgLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUhFQUQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0geDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IHkgLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0gY2x1c3Rlci5zZWN0b3JTaXplWCAtIHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5IC0gKCBjbHVzdGVyLnNlY3RvclNpemVZIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gY2x1c3Rlci5zZWN0b3JTaXplWiAtIHo7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLlJJR0hUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5IC0gKCBjbHVzdGVyLnNlY3RvclNpemVZIC8gMiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gY2x1c3Rlci5zZWN0b3JTaXplWiAtIHo7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfTEVGVDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gKCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuTEVGVCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVggLSB4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IHogLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVogLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9SSUdIVDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gKCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkUgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IHogLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVogLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHggLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gY2x1c3Rlci5zZWN0b3JTaXplWiAtIHo7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gKCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkUgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB4ICogY2x1c3Rlci5zZWN0b3JTaXplWSArIHkgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHggLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9MRUZUX0FIRUFEOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0gY2x1c3Rlci5zZWN0b3JTaXplWCAtIHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX1JJR0hUX0FIRUFEOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5SSUdIVCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BSEVBRCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BQk9WRSApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0xFRlRfQkVISU5EOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCB8Vm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFCT1ZFICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggeCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKyB5ICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSBjbHVzdGVyLnNlY3RvclNpemVYIC0geDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IHk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSBjbHVzdGVyLnNlY3RvclNpemVaIC0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX1JJR0hUX0JFSElORDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gKCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EIHxWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUJPVkUgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVogLSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0xFRlQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSBjbHVzdGVyLnNlY3RvclNpemVYIC0geDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0geiAtICggY2x1c3Rlci5zZWN0b3JTaXplWiAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX1JJR0hUOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5SSUdIVCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVyApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSBjbHVzdGVyLnNlY3RvclNpemVZIC0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IHogLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVogLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFSElORCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVyApO1xyXG5cdFx0XHRcdFx0XHRmb3IoIHggPSAwOyB4IDwgY2x1c3Rlci5zZWN0b3JTaXplWDsgeCsrIClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHh2YWwgPSB4ICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRmb3IoIHogPSAwOyB6IDwgY2x1c3Rlci5zZWN0b3JTaXplWjsgeisrIClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHR6dmFsID0geHZhbCArIHogKiBjbHVzdGVyLnNlY3RvclNpemVYICogY2x1c3Rlci5zZWN0b3JTaXplWTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciggeSA9IDA7IHkgPCBjbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWwgPSAodXNob3J0KSggenZhbCArIHkgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weCA9IHggLSAoIGNsdXN0ZXIuc2VjdG9yU2l6ZVggLyAyICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSBjbHVzdGVyLnNlY3RvclNpemVZIC0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVogLSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQUQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0geCAtICggY2x1c3Rlci5zZWN0b3JTaXplWCAvIDIgKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weSA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgLSB5O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB6ID0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19MRUZUX0FIRUFEOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5MRUZUIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkJFTE9XIHwgVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFIRUFEICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0gY2x1c3Rlci5zZWN0b3JTaXplWCAtIHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSBjbHVzdGVyLnNlY3RvclNpemVZIC0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IHo7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGQgPSAoIHRtcHggKiB0bXB4ICkgKyAoIHRtcHkgKiB0bXB5ICkgKyAoIHRtcHogKiB0bXB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNvcnRlci5BZGQoIGQsIHZhbCApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19SSUdIVF9BSEVBRDpcclxuXHRcdFx0XHRcdFx0c29ydGVkX2RyYXdfaW5mb3NbaV0gPSBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUxMIF4gKCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuUklHSFQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQUhFQUQgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0gY2x1c3Rlci5zZWN0b3JTaXplWSAtIHk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfTEVGVF9CRUhJTkQ6XHJcblx0XHRcdFx0XHRcdHNvcnRlZF9kcmF3X2luZm9zW2ldID0gVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkFMTCBeICggVm94ZWxhcml1bS5GQUNFRFJBV19PcGVyYXRpb25zLkxFRlQgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVMT1cgfCBWb3hlbGFyaXVtLkZBQ0VEUkFXX09wZXJhdGlvbnMuQkVISU5EICk7XHJcblx0XHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCBjbHVzdGVyLnNlY3RvclNpemVYOyB4KysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0eHZhbCA9IHggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdGZvciggeiA9IDA7IHogPCBjbHVzdGVyLnNlY3RvclNpemVaOyB6KysgKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHp2YWwgPSB4dmFsICsgeiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKiBjbHVzdGVyLnNlY3RvclNpemVZO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB5ID0gMDsgeSA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHkrKyApXHJcblx0XHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhbCA9ICh1c2hvcnQpKCB6dmFsICsgeSApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB4ID0gY2x1c3Rlci5zZWN0b3JTaXplWCAtIHg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHkgPSBjbHVzdGVyLnNlY3RvclNpemVZIC0geTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG1weiA9IGNsdXN0ZXIuc2VjdG9yU2l6ZVogLSB6O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRkID0gKCB0bXB4ICogdG1weCApICsgKCB0bXB5ICogdG1weSApICsgKCB0bXB6ICogdG1weiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzb3J0ZXIuQWRkKCBkLCB2YWwgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfUklHSFRfQkVISU5EOlxyXG5cdFx0XHRcdFx0XHRzb3J0ZWRfZHJhd19pbmZvc1tpXSA9IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwgXiAoIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5SSUdIVCB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUxPVyB8IFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5CRUhJTkQgKTtcclxuXHRcdFx0XHRcdFx0Zm9yKCB4ID0gMDsgeCA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHgrKyApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR4dmFsID0geCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB6ID0gMDsgeiA8IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHorKyApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0enZhbCA9IHh2YWwgKyB6ICogY2x1c3Rlci5zZWN0b3JTaXplWCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgY2x1c3Rlci5zZWN0b3JTaXplWTsgeSsrIClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsID0gKHVzaG9ydCkoIHp2YWwgKyB5ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHggPSB4O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0bXB5ID0gY2x1c3Rlci5zZWN0b3JTaXplWSAtIHk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRtcHogPSBjbHVzdGVyLnNlY3RvclNpemVaIC0gejtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZCA9ICggdG1weCAqIHRtcHggKSArICggdG1weSAqIHRtcHkgKSArICggdG1weiAqIHRtcHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c29ydGVyLkFkZCggZCwgdmFsICk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0biA9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NLQ09VTlQ7XHJcblx0XHRcdFx0c29yY2VyLmZvckVhY2goICgpPT5cclxuICAgIFx0XHRcdFx0e1xyXG4gICAgXHRcdFx0XHRcdC8vIHJldHJpZXZlZCBjbG9zZXN0IHRvIGZ1cnRoZXN0IHNvLi4uIHJldmVyc2Ugc3RvcmluZyBpdC5cclxuICAgIFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiaW5kZXggaXMgezB9IHsxfSB7Mn1cIlxyXG4gICAgXHRcdFx0XHRcdC8vXHQsICggaW5kZXggPj4gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSAmIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1hcclxuICAgIFx0XHRcdFx0XHQvL1x0LCBpbmRleCAmIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1lcclxuICAgIFx0XHRcdFx0XHQvL1x0LCAoIGluZGV4ID4+ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgJiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aICk7XHJcbiAgICBcdFx0XHRcdFx0SW5kZXhlc1stLW5dID0gaW5kZXg7XHJcbiAgICBcdFx0XHRcdH0gKTtcclxuXHRcdFx0XHRzdGFydF9wZXJjZW50ID0gKCArK3N0YXJ0X3N0ZXAgKiAxMDAgKSAvIHN0YXJ0X3N0ZXBzO1xyXG5cclxuXHJcblx0XHRcdFx0Ly8gc3Ryb25nIHRlc3QgdG8gbWFrZSBzdXJlIGV2ZXJ5IG9mZnNldCBpcyByZXByZXNlbnRlZCBvbmNlLlxyXG5cdFx0XHRcdC8vIHBhcmFub2lkIGRlYnVnZ2luZy5cclxuXHRcdFx0XHQvKlxyXG5cdFx0XHRcdGlmKCBpICE9IFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5DRU5URVIgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGludCBvZnMsIGNoZWNrO1xyXG5cdFx0XHRcdFx0Zm9yKCBvZnMgPSAwOyBvZnMgPCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DS0NPVU5UOyBvZnMrKyApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGZvciggY2hlY2sgPSAwOyBjaGVjayA8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NLQ09VTlQ7IGNoZWNrKysgKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aWYoIEluZGV4ZXNbY2hlY2tdID09IG9mcyApXHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiggY2hlY2sgPT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ0tDT1VOVCApXHJcblx0XHRcdFx0XHRcdFx0RGVidWdnZXIuQnJlYWsoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ki9cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtZXNoZXI7XHJcbn1cclxuXHJcbmNvbnN0IG5vcm1hbHMgPSBbIFRIUkVFLlZlY3RvcjNaZXJvXHJcbiAgICAgICAgLCBUSFJFRS5WZWN0b3IzTGVmdFxyXG4gICAgICAgICwgVEhSRUUuVmVjdG9yM1JpZ2h0XHJcbiAgICAgICAgLCBUSFJFRS5WZWN0b3IzQWhlYWRcclxuICAgICAgICAsIFRIUkVFLlZlY3RvcjNCZWhpbmRcclxuICAgICAgICAsIFRIUkVFLlZlY3RvcjNBYm92ZVxyXG4gICAgICAgICwgVEhSRUUuVmVjdG9yM0JlbG93IF07XHJcblxyXG5cclxuVm94ZWxhcml1bS5PcmRlcmVkRmFjZXMgPSBbXHJcbiAgICAvLyBDRU5URVJcclxuICAgICAgICAgIG51bGxcclxuICAgIC8vIExFRlQgMVxyXG4gICAgICAgICwgbnVsbFxyXG4gICAgLy8gUklHSFQgMlxyXG4gICAgICAgICwgbnVsbFxyXG4gICAgLy8gQUhFQUQgM1xyXG4gICAgICAgICwgbnVsbFxyXG4gICAgLy8gQkVISU5EIDRcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIEFCT1ZFIDVcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIEJFTE9XIDZcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIExFRlRfQUJPVkUgIDdcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIFJJR0hUX0FCT1ZFIDhcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIEFIRUFEX0FCT1ZFIDlcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIEJFSElORF9BQk9WRSAgMTBcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIExFRlRfQUhFQUQgMTFcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vIFJJR0hUX0FIRUFEIDEyXHJcbiAgICAgICAgLCBudWxsXHJcbiAgICAvLyBMRUZUX0JFTE9XIDEzXHJcbiAgICAgICAgLCBudWxsXHJcbiAgICAvL1JJR0hUX0JFTE9XIC8vMTRcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vSU5GUk9OVF9CRUxPVyAvLzE1XHJcbiAgICAgICAgLCBudWxsXHJcbiAgICAvL0JFSElORF9CRUxPVyAgLy8xNlxyXG4gICAgICAgICwgbnVsbFxyXG4gICAgLy9MRUZUX0JFSElORCAgIC8vMTdcclxuICAgICAgICAsIG51bGxcclxuICAgIC8vQkVISU5EX1JJR0hUICAgLy8xOFxyXG4gICAgICAgICwgbnVsbFxyXG4gICAgLy8gTEVGVF9BSEVBRF9BQk9WRSAgIC8vIDE5XHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCxWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFLFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1csVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgXVxyXG4gICAgLy8gUklHSFRfQUhFQURfQUJPVkUgIC8vIDIwXHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1csIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5ELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgXVxyXG4gICAgLy8gTEVGVF9BSEVBRF9CRUxPVyAgIC8vIDIxXHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVywgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgXVxyXG4gICAgLy8gUklHSFRfQUhFQURfQkVMT1cgIC8vIDIyXHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1csIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5ELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgXVxyXG4gICAgLy8gTEVGVF9CRUhJTkRfQUJPVkUgIC8vIDIzXHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1csIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgXVxyXG4gICAgLy8gUklHSFRfQkVISU5EX0FCT1ZFIC8vIDI0XHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5ELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgXVxyXG4gICAgLy8gTEVGVF9CRUhJTkRfQkVMT1cgIC8vIDI1XHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCwgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1csIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgXVxyXG4gICAgLy8gUklHSFRfQkVISU5EX0JFTE9XIC8vIDI2XHJcbiAgICAgICAgLCBbIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5ELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFELCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgXVxyXG4gICAgXTtcclxuXHJcblZveGVsYXJpdW0ubWVzaGVyID0geyBzb3J0ZXJzIDogW10gfVxyXG4iLCJcclxucmVxdWlyZSggXCIuL3BhY2tlZGJvb2xhcnJheS5qc1wiIClcclxuVm94ZWxhcml1bS5Nb2RpZmljYXRpb25UcmFja2VyID0gZnVuY3Rpb24oc2l6ZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsYXN0Q3ljbGUgOiAtMSxcclxuICAgICAgICBjeWNsZSA6IDAsXHJcbiAgICAgICAgbW9kaWZpZWQgOiBWb3hlbGFyaXVtLlBhY2tlZEJvb2xBcnJheSggc2l6ZSApLFxyXG4gICAgICAgIGNsZWFyIDogZnVuY3Rpb24oKXsgdGhpcy5sYXN0Q3ljbGUgPSB0aGlzLmN5Y2xlOyBtb2RpZmllZC5jbGVhcigpOyB9LFxyXG4gICAgICAgIHNldEN5Y2xlIDogZnVuY3Rpb24oY3ljbGUpIHsgdGhpcy5jeWNsZSA9IGN5Y2xlIH0sXHJcbiAgICAgICAgZ2V0IDogZnVuY3Rpb24oIG9mZnNldCApIHsgaWYoIHRoaXMubGFzdEN5Y2xlICE9IHRoaXMuY3ljbGUgKSByZXR1cm4gZmFsc2U7IHJldHVybiB0aGlzLm1vZGlmaWVkLmdldChvZmZzZXQpOyB9LFxyXG4gICAgICAgIHNldCA6IGZ1bmN0aW9uKCBvZmZzZXQgKSB7IGlmKCB0aGlzLmxhc3RDeWNsZSAhPSB0aGlzLmN5Y2xlICkgdGhpcy5jbGVhcigpOyAgdGhpcy5tb2RpZmllZC5zZXQob2Zmc2V0KTsgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG5cclxuLy9GYXN0Qml0X0FycmF5XzMya1xyXG5cclxuXHJcblZveGVsYXJpdW0uUGFja2VkQm9vbEFycmF5ID0gZnVuY3Rpb24gKCBzaXplICl7XHJcbiAgICBpZiggIXNpemUgKVxyXG4gICAgICAgIHNpemUgPSAzMiozMiozMjtcclxuICAgIHZhciBwYmEgPSB7XHJcbiAgICAgICAgX2JpdHMgOiBuZXcgQXJyYXlCdWZmZXIoIE1hdGguZmxvb3IoICggc2l6ZSArIDMxICkgLzMyICkgKiA0ICksXHJcbiAgICAgICAgYml0cyA6IG51bGwsXHJcbiAgICAgICAgZ2V0IDogZnVuY3Rpb24oIGJpdCApIHsgcmV0dXJuICggdGhpcy5iaXRzW2JpdD4+NV0gJiAxIDw8ICggYml0ICYgMHgxZiApICkgIT09IDA7IH0sXHJcbiAgICAgICAgc2V0IDogZnVuY3Rpb24oIGJpdCApIHsgdGhpcy5iaXRzW2JpdD4+NV0gfD0gMSA8PCAoIGJpdCAmIDB4MWYgKTsgfSxcclxuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCBiaXQgKSB7IHRoaXMuYml0c1tiaXQ+PjVdICY9IH4oMSA8PCAoIGJpdCAmIDB4MWYgKSkgfSxcclxuICAgICAgICBjbGVhckFsbCA6IGZ1bmN0aW9uKCkgeyBmb3IoIHZhciBuID0gMDsgbiA8IGJpdHMubGVuZ3RoOyBuKyspIGJpdHNbbl0gPSAwOyB9XHJcbiAgICB9O1xyXG4gICAgcGJhLmJpdHMgPSBuZXcgVWludDMyQXJyYXkoIHBiYS5fYml0cyApO1xyXG4gICAgcmV0dXJuIHBiYTtcclxuXHJcbn1cclxuIiwiXHJcblZveGVsYXJpdW0uUmVhY3RvciA9IGZ1bmN0aW9uKCB3b3JsZCApIHtcclxuICAgIHZhciByZWFjdG9yID0ge1xyXG4gICAgIFN0ZXBPbmUgOiB0cnVlLFxyXG4gICAgIEN5Y2xlTnVtIDogMCxcclxuICAgICB3b3JsZDogd29ybGQsXHJcblxyXG4gICAgcHJvY2Vzc1NlY3RvcnMgOiBmdW5jdGlvbiAoIHdvcmxkLCBMYXN0TG9vcFRpbWUgKVxyXG4gICAge1xyXG4gICAgICAgIHZhciB4LCB5LCB6O1xyXG5cclxuICAgICAgICB2YXIgTG93QWN0aXZpdHlUcmlnZ2VyO1xyXG5cclxuICAgICAgICAvL0xvZy5sb2coIFwiQmVnaW4gUmVhY3Rpb24gUHJvY2Vzc2luZ1wiICk7XHJcbiAgICAgICAgdmFyIFNlY3RvcnNfcHJvY2Vzc2VkID0gMDtcclxuICAgICAgICB2YXIgVm94ZWxzX1Byb2Nlc3NlZCA9IDA7XHJcblxyXG4gICAgICAgIHJlYWN0b3IuY3ljbGUrKztcclxuXHJcbiAgICAgICAgaWYoICFyZWFjdG9yLnN0ZXBPbmUgKSByZXR1cm47XHJcblxyXG4gICAgICAgIHdvcmxkLnNlY3RvcnMuZm9yRWFjaCggKFNlY3Rvcik9PntcclxuXHJcbiAgICAgICAgICAgIFNlY3RvcnNfcHJvY2Vzc2VkKys7XHJcblxyXG4gICAgICAgICAgICBMb3dBY3Rpdml0eVRyaWdnZXIgPSBTZWN0b3IuRmxhZ19Jc0FjdGl2ZUxvd1JlZnJlc2hcclxuICAgICAgICAgICAgICAgICYmICggKCAoIEN5Y2xlTnVtICkgJiBTZWN0b3IuTG93UmVmcmVzaF9NYXNrICkgPT0gMCApO1xyXG4gICAgICAgICAgICBTZWN0b3IuTW9kaWZUcmFja2VyLlNldEFjdHVhbEN5Y2xlTnVtKCBDeWNsZU51bSApO1xyXG4gICAgICAgICAgICBpZiggU2VjdG9yLkZsYWdfSXNBY3RpdmVWb3hlbHMgfCBMb3dBY3Rpdml0eVRyaWdnZXIgKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IoIHggPSAwOyB4IDw9IDY7IHgrKyApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIFNlY3Rvci5uZWFyX3NlY3RvcnNbeF0gIT0gbnVsbCApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNlY3Rvci5uZWFyX3NlY3RvcnNbeF0uTW9kaWZUcmFja2VyLlNldEFjdHVhbEN5Y2xlTnVtKCBDeWNsZU51bSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBFeHRlbnNpb24gPSBTZWN0b3IuZGF0YS5vdGhlckluZm9zO1xyXG4gICAgICAgICAgICAgICAgdmFyIFZveGVsUCA9IFNlY3Rvci5kYXRhLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHpvZnMsIHhvZnM7XHJcbiAgICAgICAgICAgICAgICB2YXIgSXNBY3RpdmVWb3hlbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIE1haW5PZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIFJTeCA9IFNlY3Rvci5Qb3NfeCAqIFNlY3Rvci5zaXplX3g7XHJcbiAgICAgICAgICAgICAgICB2YXIgUlN5ID0gU2VjdG9yLlBvc195ICogU2VjdG9yLnNpemVfeTtcclxuICAgICAgICAgICAgICAgIHZhciBSU3ogPSBTZWN0b3IuUG9zX3ogKiBTZWN0b3Iuc2l6ZV96O1xyXG4gICAgICAgICAgICAgICAgdmFyIHZyZWYgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGQgOiB3b3JsZCxcclxuICAgICAgICAgICAgICAgICAgICBzZWN0b3IgOiBTZWN0b3IsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xlZXAgPSBTZWN0b3IuZGF0YS5zbGVlcFN0YXRlO1xyXG4gICAgICAgICAgICAgICAgU2VjdG9yLmRhdGEuZGF0YS5mb3JFYWNoKCAodm94ZWwsIE1haW5PZnNldCk9PntcclxuICAgICAgICAgICAgICAgICAgICBpZiggc2xlZXAuZ2V0KCBNYWluT2Zmc2V0ICkgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZyZWYuVm94ZWxFeHRlbnNpb24gPSBFeHRlbnNpb25bTWFpbk9mZnNldF07XHJcbiAgICAgICAgICAgICAgICAgICAgdnJlZi5UeXBlID0gVm94ZWxQW01haW5PZmZzZXRdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIHZyZWYuVHlwZS5wcm9wZXJ0aWVzLklzX0FjdGl2ZSApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFTZWN0b3IuTW9kaWZUcmFja2VyLkdldCggTWFpbk9mZnNldCApICkgLy8gSWYgdm94ZWwgaXMgYWxyZWFkeSBwcm9jZXNzZWQsIGRvbid0IHByb2Nlc3MgaXQgb25jZSBtb3JlIGluIHRoZSBzYW1lIGN5Y2xlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWb3hlbHNfUHJvY2Vzc2VkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmVmLnd4ID0gUlN4ICsgKCB2cmVmLnggPSB4ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmVmLnd5ID0gUlN5ICsgKCB2cmVmLnkgPSB5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmVmLnd6ID0gUlN6ICsgKCB2cmVmLnogPSB6ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmVmLm9mZnNldCA9IE1haW5PZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWN0b3IuTW9kaWZUcmFja2VyLlNldChTZWNvbmRhcnlPZmZzZXRbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHZyZWYuVHlwZS5SZWFjdCggdnJlZiwgTGFzdExvb3BUaW1lICkgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJc0FjdGl2ZVZveGVscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmVmLlNlY3Rvci5kYXRhLnNsZWVwU3RhdGUuc2V0KCB2cmVmLm9mZnNldCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKCBlcnIgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIlZveGVsIFJlYWN0aW9uIEV4Y2VwdGlvbiA6IFwiLCBlcnIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwLnNldCggTWFpbk9mZnNldCApO1xyXG4gICAgICAgICAgICAgICAgICAgIFNlY3Rvci5GbGFnX0lzQWN0aXZlVm94ZWxzID0gSXNBY3RpdmVWb3hlbHM7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL1N0ZXBPbmUgPSBmYWxzZTtcclxuICAgICAgICAvL0xvZy5sb2coIFwiRmluaXNoIFJlYWN0aW9uIFByb2Nlc3NpbmcgezB9IHsxfSBcIiwgU2VjdG9yc19wcm9jZXNzZWQsIFZveGVsc19Qcm9jZXNzZWQgKTtcclxuICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVhY3RvcjtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcblxucmVxdWlyZSggXCIuL3BhY2tlZGJvb2xhcnJheS5qc1wiKVxucmVxdWlyZSggXCIuL21vZHRyYWNrZXIuanNcIilcblxuXG5cclxuVm94ZWxhcml1bS5TZWN0b3IgPSBmdW5jdGlvbiggY2x1c3RlciwgeCwgeSwgeiApIHtcblxuXHR2YXIgbmV3U2VjdG9yID0ge1xuICAgICAgICBuZXh0IDogbnVsbCxcblx0XHRwcmVkIDogbnVsbCxcblxuXHRcdEdsb2JhbExpc3RfTmV4dCA6IG51bGwsXG5cdFx0R2xvYmFsTGlzdF9QcmVkIDogbnVsbCxcblxuXHRcdG5lYXJfc2VjdG9ycyA6IG5ldyBBcnJheSgyNyksIC8vIGNhbiBpbmRleCB3aXRoIHJlbGF0aXZlT3Jkcy0xIChzZWxmIGlzIG5vdCBpbiB0aGlzIGFycmF5KVxuXG5cdFx0aGFuZGxlX3ggOiAwLCBoYW5kbGVfeTowLCBoYW5kbGVfeiA6IDAsIC8vIHVzZWQgaW4gR2VuZXNpcyB0ZW1wbGF0ZXM7ICdvcmlnaW4nIG9mIHRoaXMgc2VjdG9yXG5cdFx0cG9zIDogbmV3IFRIUkVFLlZlY3RvcjMoIHgsIHksIHogKSxcblxuXHRcdC8vIFZlcnNpb24gY29udHJvbCA6IEFkZGVkIGZvciBoYW5kbGluZyBiZXR0ZXIgd29ybGQgZXZvbHV0aW9uLlxuXHRcdFpvbmVUeXBlIDogMCwgICAgIC8vIFRoZSB0eXBlIG9mIHRoZSB6b25lLlxuXHRcdFpvbmVWZXJzaW9uIDogMCwgIC8vIFRoZSB2ZXJzaW9uIG9mIHRoZSBnZW5lcmF0b3IgdXNlZCBmb3IgdGhpcyB6b25lLlxuXHRcdEdlbmVyYXRvclZlcnNpb24gOiAwLCAvLyBNYWluIGdlbmVyYXRvciB2ZXJzaW9uLiBVcGRhdGVkIGF0IHdvcmxkIGNoYW5nZS5cblx0XHRSaW5nTnVtIDogMCxcblxuXHRcdGNsdXN0ZXIgOiBjbHVzdGVyLFxuXG5cdFx0ZGF0YSA6IHsgZGF0YSA6IG5ldyBBcnJheSggY2x1c3Rlci5zZWN0b3JTaXplIClcblx0XHRcdFx0LCBzbGVlcFN0YXRlIDogVm94ZWxhcml1bS5QYWNrZWRCb29sQXJyYXkoIGNsdXN0ZXIuc2VjdG9yU2l6ZSApXG4gICAgICAgICAgICBcdCwgb3RoZXJJbmZvcyA6IFtdXHJcblx0XHRcdFx0XHRcdFx0LCBGYWNlQ3VsbGluZyA6IG51bGxcclxuICAgICAgICAgICAgXHR9LFxuXHRcdE1vZGlmVHJhY2tlciA6IFZveGVsYXJpdW0uTW9kaWZpY2F0aW9uVHJhY2tlciggY2x1c3Rlci5zZWN0b3JTaXplICksXG5cbiAgICAgICAgbWVzaGVyIDogbnVsbCxcblxuXHRcdFRIUkVFX3NvbGlkIDogbnVsbCxcbiAgICAgICAgc29saWRfZ2VvbWV0cnkgOiBudWxsLFxuXHRcdHRyYW5zcGFyZW50X2dlb21ldHJ5OiBudWxsLFxuXHRcdGN1c3RvbV9nZW9tZXRyeTogbnVsbCxcblx0XHRjYWNoZWRTdHJpbmcgOiBudWxsLFxuXG5cdFx0ZW5hYmxlR2VvbWV0cnkgOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc29saWRfZ2VvbWV0cnkgPSBWb3hlbGFyaXVtLkdlb21ldHJ5QnVmZmVyKCk7XG5cdFx0XHR0aGlzLnRyYW5zcGFyZW50X2dlb21ldHJ5ID0gVm94ZWxhcml1bS5HZW9tZXRyeUJ1ZmZlcigpO1xuXHRcdFx0Ly90aGlzLmN1c3RvbV9nZW9tZXRyeSA9IFZveGVsYXJpdW0uR2VvbWV0cnlCdWZmZXIoKTtcblx0XHR9LFxuXG5cdFx0Z2V0T2Zmc2V0IDogZnVuY3Rpb24oIHgsIHksIHogKSB7XG5cdFx0XHRyZXR1cm4gY2x1c3Rlci5sb29rdXBUYWJsZXMub2ZUYWJsZVhbeCsxXSArIGNsdXN0ZXIubG9va3VwVGFibGVzLm9mVGFibGVZW3krMV0gKyBjbHVzdGVyLmxvb2t1cFRhYmxlcy5vZlRhYmxlWlt6KzFdO1xuXG5cdFx0XHR2YXIgb2Zmc2V0O1xuXHRcdFx0b2Zmc2V0ID0gKCB5ICUgdGhpcy5jbHVzdGVyLnNlY3RvclNpemVZIClcblx0XHRcdFx0KyAoICggeCAlIHRoaXMuY2x1c3Rlci5zZWN0b3JTaXplWCApICogdGhpcy5jbHVzdGVyLnNlY3RvclNpemVZIClcblx0XHRcdFx0KyAoICggeiAlIHRoaXMuY2x1c3Rlci5zZWN0b3JTaXplWiApICogKCB0aGlzLmNsdXN0ZXIuc2VjdG9yU2l6ZVkgKiB0aGlzLmNsdXN0ZXIuc2VjdG9yU2l6ZVggKSApO1xuXHRcdFx0cmV0dXJuIG9mZnNldDtcblx0XHR9LFxuXG5cdFx0c2V0Q3ViZSA6IGZ1bmN0aW9uKCB4LCB5LCB6LCBDdWJlVmFsdWUgKSB7XHJcblx0XHRcdHZhciBvZmZzZXQgPSB0aGlzLmdldE9mZnNldCggeCwgeSwgeiApO1xyXG5cdFx0XHR0aGlzLmRhdGEuZGF0YVtvZmZzZXRdID0gQ3ViZVZhbHVlO1xyXG5cclxuXHRcdFx0aWYoIEN1YmVWYWx1ZSAmJiBDdWJlVmFsdWUuZXh0ZW5zaW9uIClcclxuXHRcdFx0XHR0aGlzLmRhdGEub3RoZXJJbmZvc1tvZmZzZXRdID0gQ3ViZVZhbHVlLmV4dGVuc2lvbigpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0dGhpcy5kYXRhLm90aGVySW5mb3Nbb2Zmc2V0XSA9IG51bGw7XHJcblx0XHRcdHRoaXMuRmxhZ19SZW5kZXJfRGlydHkgPSB0cnVlO1xyXG5cdFx0fSxcblxyXG5cdFx0Z2V0Q3ViZSA6IGZ1bmN0aW9uKCB4LCB5LCB6ICkge1xyXG5cdFx0XHR2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KCB4LCB5LCB6ICk7XHJcblx0XHRcdHJldHVybiAoIG5ld1NlY3Rvci5kYXRhLmRhdGFbT2Zmc2V0XSApO1xyXG5cdFx0fSxcblxyXG5cdFx0TWFrZVNlY3RvciA6IGZ1bmN0aW9uKCB0eXBlICkge1xyXG5cdFx0XHR2YXIgeCwgeSwgejtcclxuXHRcdFx0dmFyIENudDtcclxuXHRcdFx0aWYoIHR5cGUgKSBDbnQgPSB0eXBlO1xyXG5cdFx0XHRlbHNlIGlmKCB0aGlzLlBvc195IDwgMCApIHsgQ250ID0gVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbMF07IHRoaXMuRmxhZ19Wb2lkX1JlZ3VsYXIgPSBmYWxzZTsgdGhpcy5GbGFnX1ZvaWRfVHJhbnNwYXJlbnQgPSB0cnVlOyB9XHJcblx0XHRcdGVsc2UgeyBDbnQgPSBudWxsOyB0aGlzLkZsYWdfVm9pZF9SZWd1bGFyID0gdHJ1ZTsgdGhpcy5GbGFnX1ZvaWRfVHJhbnNwYXJlbnQgPSB0cnVlOyB9XHJcblx0XHRcdGZvciggeiA9IDA7IHogPCB0aGlzLmNsdXN0ZXIuc2VjdG9yU2l6ZVg7IHorKyApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmb3IoIHkgPSAwOyB5IDwgdGhpcy5jbHVzdGVyLnNlY3RvclNpemVZOyB5KysgKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvciggeCA9IDA7IHggPCB0aGlzLmNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHgrKyApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdG5ld1NlY3Rvci5zZXRDdWJlKCB4LCB5LCB6LCBDbnQgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0Vm94ZWxSZWYgOiBmdW5jdGlvbih4LHkseikge1xyXG5cdFx0XHRpZiggeCA8IDAgKSB4ICs9IHRoaXMuY2x1c3Rlci5zZWN0b3JTaXplWDtcclxuXHRcdFx0aWYoIHkgPCAwICkgeSArPSB0aGlzLmNsdXN0ZXIuc2VjdG9yU2l6ZVk7XHJcblx0XHRcdGlmKCB6IDwgMCApIHogKz0gdGhpcy5jbHVzdGVyLnNlY3RvclNpemVaO1xyXG5cdFx0XHQgcmV0dXJuIG1ha2VWb3hlbFJlZiggdGhpcy5jbHVzdGVyLCB0aGlzLCB4LCB5LCB6ICk7IH0sXHJcblxyXG5cdFx0c3RyaW5naWZ5IDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB2ID0gdnx8IFZveGVsQ29tcHJlc3NvcigpO1xyXG5cdFx0XHR2YXIgZGF0YSA9IHYuQ29tcHJlc3NWb3hlbERhdGEoIHRoaXMuZGF0YS5kYXRhICk7XHJcblx0XHRcdHZhciBuID0gMDtcclxuXHRcdFx0dmFyIHN0cmluZyA9IFwiXCI7XHJcblx0XHRcdC8vdmFyIHN2ID0gbmV3IFN0cmluZ1ZpZXcoIGRhdGEuZGF0YSApO1xyXG5cdFx0XHQvL3ZhciB0ZXN0U3RyaW5nID0gc3YudG9TdHJpbmcoKTtcclxuXHRcdFx0Ly92YXIgdGVzdFN0cmluZzIgPSAnXFx1MDAwOFxcdTAwMDBcXHUwMDAwXFx1MDAwMVxcdTAwMDJcXHUwMDMzXFx1MDBlZidcclxuXHRcdFx0Zm9yKCBuID0gMDsgbiA8IGRhdGEuYnl0ZXNfdXNlZDsgbisrICkge1xyXG5cdFx0XHRcdHZhciB2YWwgPSBkYXRhLmRhdGFbbl07XHJcblx0XHRcdFx0aWYoICF2YWwgKVxyXG5cdFx0XHRcdFx0c3RyaW5nICs9IFwiXFxcXDBcIjtcclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHZhciBvdXQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCggdmFsICk7XHJcblx0XHRcdFx0XHRpZiggb3V0ID09PSBcIlxcXFxcIiApXHJcblx0XHRcdFx0XHRcdHN0cmluZyArPSBcIlxcXFwvXCI7XHJcblx0XHRcdFx0XHRlbHNlIGlmKCBvdXQgPT09IFwiL1wiIClcclxuXHRcdFx0XHRcdFx0c3RyaW5nICs9IFwiXFxcXHxcIjtcclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0c3RyaW5nICs9IG91dDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBhcnJheSA9IG5ldyBBcnJheUJ1ZmZlcihzdHJpbmcubGVuZ3RoKTtcclxuXHRcdFx0dmFyIGVzY2FwZSA9IGZhbHNlO1xyXG5cdFx0XHR2YXIgb3V0ID0gMDtcclxuXHRcdFx0Zm9yKCBuID0gMDsgbiA8IHN0cmluZy5sZW5ndGg7IG4rKyApXHJcblx0XHRcdFx0eyB2YXIgdmFsID0gc3RyaW5nLmNvZGVQb2ludEF0KCBuICk7XHJcblx0XHRcdFx0XHRpZiggZXNjYXBlICkge1xyXG5cdFx0XHRcdFx0XHRpZiggdmFsID09PSA0OCApXHJcblx0XHRcdFx0XHRcdFx0dmFsID0gMDtcclxuXHRcdFx0XHRcdFx0ZXNjYXBlID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9ZWxzZSB7XHJcblx0XHRcdFx0XHRcdGlmKCB2YWwgPT0gOTIgKSB7XHJcblx0XHRcdFx0XHRcdFx0ZXNjYXBlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YXJyYXlbb3V0KytdID0gdmFsO1xyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyggdmFsIClcclxuXHRcdFx0XHQgfTtcclxuXHRcdFx0XHQgLy9jb25zb2xlLmxvZyggXCJCdWZmZXIgd2FzXCIsIGRhdGEuZGF0YSApO1xyXG5cdFx0XHRcdCAvL2NvbnNvbGUubG9nKCBcIndoaWNoIGJlY2FtZVwiLCBzdHJpbmcgKTtcclxuXHJcblx0XHRcdFx0IHtcclxuXHRcdFx0XHRcdCB2YXIgdGVzdF9vdXQgPSBbXTtcclxuXHRcdFx0XHRcdCBjb25zb2xlLmxvZyggXCJkZWNvZGluZyBzdHJpbmcganVzdCBlbmNvZGVkIHRvIHNlZSBpZiBpdCdzIHZhbGlkO2lmIGZhaWxlZCwgZGVidWdnZXI7IHdpbGwgdHJpZ2dlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gSlNPTi5zdHJpbmdpZnkoc3RyaW5nKTtcblx0XHRcdFx0XHQgdmFyIHhmZXIgPSBKU09OLnBhcnNlKCBhICk7XHJcblx0XHRcdFx0XHQgaWYoIHhmZXIgIT09IHN0cmluZyApXHJcblx0XHRcdFx0XHQgXHRkZWJ1Z2dlcjtcclxuXHRcdFx0XHRcdCBkZWNvZGVTdHJpbmcoIHN0cmluZywgdGVzdF9vdXQgKTtcclxuXHRcdFx0XHRcdCBpZiggdGVzdF9vdXQubGVuZ3RoID09PSBkYXRhLmRhdGEubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHQgZm9yKCB2YXIgbiA9IDA7IG4gPCB0ZXN0X291dC5sZW5ndGg7IG4rKyApIHtcclxuXHRcdFx0XHRcdFx0XHQgaWYoIHRlc3Rfb3V0W25dICE9PSBkYXRhLmRhdGFbbl0gKVxyXG5cdFx0XHRcdFx0XHRcdCBcdGRlYnVnZ2VyO1xyXG5cclxuXHRcdFx0XHRcdFx0IH1cclxuXHRcdFx0XHRcdCB9XHJcblx0XHRcdFx0IH1cclxuXHRcdFx0IHRoaXMuY2FjaGVkU3RyaW5nID0gc3RyaW5nO1xyXG5cdFx0XHRyZXR1cm4gc3RyaW5nO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkZWNvZGUgOiBmdW5jdGlvbiggc3RyaW5nICkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyggXCJkZWNvZGVcIiwgc3RyaW5nICk7XHJcblx0XHRcdGlmKCBzdHJpbmcgPT09IHRoaXMuY2FjaGVkU3RyaW5nIClcclxuXHRcdFx0XHRyZXR1cm47IC8vIGFscmVhZHkgaGF2ZSB0aGlzIGFzIHRoZSB0aGluZy5cclxuXHRcdFx0dGhpcy5jYWNoZWRTdHJpbmcgPSBzdHJpbmc7XHJcblx0XHRcdGRlY29kZVN0cmluZyggc3RyaW5nLCB0aGlzLmRhdGEuZGF0YSApXHJcblx0XHRcdHRoaXMuRmxhZ19SZW5kZXJfRGlydHkgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmNsdXN0ZXIubWVzaGVyLlNlY3RvclVwZGF0ZUZhY2VDdWxsaW5nKCB0aGlzLCB0cnVlIClcclxuXHRcdFx0Ly9iYXNpY01lc2hlci5TZWN0b3JVcGRhdGVGYWNlQ3VsbGluZ19QYXJ0aWFsKCBjbHVzdGVyLCBzZWN0b3IsIFZveGVsYXJpdW0uRkFDRURSQVdfT3BlcmF0aW9ucy5BTEwsIHRydWUgKVxyXG5cdFx0XHR0aGlzLmNsdXN0ZXIubWVzaGVyLk1ha2VTZWN0b3JSZW5kZXJpbmdEYXRhKCB0aGlzICk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cclxuXHJcbiAgICB9XG5cbmZ1bmN0aW9uIGRlY29kZVN0cmluZyggc3RyaW5nLCBpbnRvICl7XG5cdHZhciBieXRlcyA9IDA7XG5cdFx0XHRmb3IoIHZhciBuID0gMDsgbiA8IHN0cmluZy5sZW5ndGg7IG4rKyApe1xuXHRcdFx0XHRpZiggc3RyaW5nW25dID09PSAnXFxcXCcgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH0gZWxzZSBieXRlcysrO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVzKTtcblx0XHRcdGJ5dGVzID0gMDtcblx0XHRcdGZvciggdmFyIG4gPSAwOyBuIDwgc3RyaW5nLmxlbmd0aDsgbisrICl7XG5cdFx0XHRcdGlmKCBzdHJpbmdbbl0gPT09ICdcXFxcJyApIHtcblx0XHRcdFx0XHRpZiggc3RyaW5nW24rMV0gPT09ICcwJyApXG5cdFx0XHRcdFx0XHRidWZmZXJbYnl0ZXMrK10gPSAwO1xuXHRcdFx0XHRcdGVsc2UgaWYoIHN0cmluZ1tuKzFdID09PSAnLycgKVxuXHRcdFx0XHRcdFx0YnVmZmVyW2J5dGVzKytdID0gJ1xcXFwnO1xuXHRcdFx0XHRcdGVsc2UgaWYoIHN0cmluZ1tuKzFdID09PSAnfCcgKVxuXHRcdFx0XHRcdFx0YnVmZmVyW2J5dGVzKytdID0gJy8nO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGVuY29kaW5nXCIgKTtcblx0XHRcdFx0XHRuKys7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGJ1ZmZlcltieXRlcysrXSA9IHN0cmluZy5jb2RlUG9pbnRBdCggbiApO1xuXHRcdFx0fVxuXG5cblx0XHRcdHZhciB2ID0gdnx8IFZveGVsQ29tcHJlc3NvcigpO1xuXHRcdFx0dmFyIGRhdGEgPSB2LkRlY29tcHJlc3NWb3hlbERhdGEoIGJ1ZmZlciwgaW50byApO1xuXG5cdFx0fVxuXG5cbiAgICByZXR1cm4gbmV3U2VjdG9yO1xufVxuXG5cbmZ1bmN0aW9uIFZveGVsQ29tcHJlc3NvcigpIHtcblx0XHQvKlxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Vm94ZWxEYXRhQ29tcHJlc3NvciB2ZGMgPSBuZXcgVm94ZWxEYXRhQ29tcHJlc3NvcigpO1xuXHRcdFx0XHRcdFx0dXNob3J0W10gZGVjb21wcmVzcyA9IG5ldyB1c2hvcnRbMzIgKiAzMiAqIDMyXTtcblx0XHRcdFx0XHRcdGJ5dGVbXSBkYXRhO1xuXHRcdFx0XHRcdFx0aW50IGJ5dGVzO1xuXHRcdFx0XHRcdFx0dmRjLkNvbXByZXNzVm94ZWxEYXRhKCBTZWN0b3IuRGF0YS5EYXRhLCBvdXQgZGF0YSwgb3V0IGJ5dGVzICk7XG5cdFx0XHRcdFx0XHRMb2cubG9nKCBcImNvbXByZXNzZWQgc2VjdG9yIGlzIHswfVwiLCBieXRlcywgMCApO1xuXHRcdFx0XHRcdFx0dmRjLkRlY29tcHJlc3NWb3hlbERhdGEoIGRhdGEsIGRlY29tcHJlc3MgKTtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aW50IG47XG5cdFx0XHRcdFx0XHRcdGZvciggbiA9IDA7IG4gPCAzMiAqIDMyICogMzI7IG4rKyApXG5cdFx0XHRcdFx0XHRcdFx0aWYoIGRlY29tcHJlc3Nbbl0gIT0gU2VjdG9yLkRhdGEuRGF0YVtuXSApXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50IGEgPSAzO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHQqL1xuXG5cdFx0XHQvLy8gPHN1bW1hcnk+XG5cdFx0XHQvLy8gSGFuZGxlcyBjb21wcmVzc2luZyBhbmQgZGVjb21wcmVzc2luZyB1c2hvcnQgYXJyYXkgdGhhdCBpcyB0aGUgc2VjdG9yIGNvbnRlbnRcblx0XHRcdC8vLyA8L3N1bW1hcnk+XG5cdHZhciB2YyA9IHtcblxuXHRcdFx0V3JpdGVDdWJlcyA6IGZ1bmN0aW9uKCBzdHJlYW0sIGJpdHMsIGNvdW50LCBpbmRleCApXG5cdFx0XHR7XG5cdFx0XHRcdC8vIDEgY291bnQgMiBiaXRzID0gMyAgIHZzIDlcblx0XHRcdFx0Ly8gMSBjb3VudCAzIGJpdHMgPSA0ICAgdnMgMTBcblx0XHRcdFx0Ly8gMSBjb3VudCAgNCBiaXRzICA9IDUgICAgIHZzIDExXG5cdFx0XHRcdC8vIDEgY291bnQgIDUgYml0cyAgPSA2ICAgICB2cyAxMlxuXHRcdFx0XHQvLyAxIGNvdW50ICA2IGJpdHMgID0gNyAgICAgdnMgMTNcblx0XHRcdFx0Ly8gMSBjb3VudCAgNyBiaXRzICA9IDggICAgIHZzIDE0XG5cblx0XHRcdFx0Ly8gMiBjb3VudCAyIGJpdHMgPSA2ICAgdnMgOVxuXHRcdFx0XHQvLyAyIGNvdW50IDMgYml0cyA9IDggICB2cyAxMFxuXHRcdFx0XHQvLyAyIGNvdW50ICA0IGJpdHMgID0gMTAgICAgdnMgMTFcblx0XHRcdFx0Ly8gMiBjb3VudCAgNSBiaXRzICA9IDEyICAgIHZzIDEyXG5cdFx0XHRcdC8vIDIgY291bnQgIDYgYml0cyAgPSAxNCAgICB2cyAxM1xuXHRcdFx0XHQvLyAyIGNvdW50ICA3IGJpdHMgID0gMTYgICAgdnMgMTRcblxuXHRcdFx0XHQvLyAzIGNvdW50IDIgYml0cyA9IDkgICB2cyA5XG5cdFx0XHRcdC8vIDMgY291bnQgMyBiaXRzID0gMTIgIHZzIDEwXG5cdFx0XHRcdC8vIDMgY291bnQgIDQgYml0cyAgPSAxNSAgICB2cyAxMVxuXHRcdFx0XHQvLyAzIGNvdW50ICA1IGJpdHMgID0gMTggICAgdnMgMTJcblx0XHRcdFx0Ly8gMyBjb3VudCAgNiBiaXRzICA9IDIxICAgIHZzIDEzXG5cdFx0XHRcdC8vIDMgY291bnQgIDcgYml0cyAgPSAyNCAgICB2cyAxNFxuXG5cblx0XHRcdFx0aWYoICggKGJpdHMgKzEpICogY291bnQgKSA8PSAoIDcgKyBiaXRzICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Zm9yKCB2YXIgbiA9IDA7IG4gPCBjb3VudDsgbisrIClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzdHJlYW0ud3JpdGUoIDAsIDEgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS53cml0ZSggaW5kZXgsIGJpdHMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3RyZWFtLndyaXRlKCAxLCAxICk7XG5cdFx0XHRcdFx0Ly9Mb2cubG9nKCBcIldyaXRlIGNvdW50IHswfVwiLCBjb3VudCApO1xuXHRcdFx0XHRcdC8qXG5cdFx0XHRcdFx0aWYoICggY291bnQgJiAweDgwMDAgKSAhPSAwIClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzdHJlYW0uV3JpdGUoICggKCBjb3VudCA+PiAxNSApICYgMHgxRiApIHwgMHgyMCwgNyApO1xuXHRcdFx0XHRcdFx0c3RyZWFtLldyaXRlKCAoICggY291bnQgPj4gMTAgKSAmIDB4MUYgKSB8IDB4MjAsIDcgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS5Xcml0ZSggKCAoIGNvdW50ID4+IDUgKSAmIDB4MUYgKSB8IDB4MjAsIDcgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS5Xcml0ZSggKCAoIGNvdW50ICApICYgMHgxRiApLCA3ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgKi9cblx0XHRcdFx0XHRjb3VudCAtPSAyOyAvLyBhbHdheXMgYXQgbGVhc3QgMSwgYW5kIHRoZW4gdGhpcyB2YWx1ZSBhbHdheXMgc3RhcnRzIGF0IGF0bGVhc3QgMjsgYW5kIHZlcnkgc21hbGwgZGVsdGEgc2V0cyBjYW4gYmUgMywgYnV0IHR5cGljYWxseSAyLlxuXHRcdFx0XHRcdGlmKCAoIGNvdW50ICYgMHhGQzAwICkgIT0gMCApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c3RyZWFtLndyaXRlKCAoICggY291bnQgPj4gMTAgKSAmIDB4MUYgKSB8IDB4MjAsIDYgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS53cml0ZSggKCAoIGNvdW50ID4+IDUgKSAmIDB4MUYgKSB8IDB4MjAsIDYgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS53cml0ZSggKCAoIGNvdW50ICkgJiAweDFGICksIDYgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiggKCBjb3VudCAmIDB4RkZFMCApICE9IDAgKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHN0cmVhbS53cml0ZSggKCAoIGNvdW50ID4+IDUgKSAmIDB4MUYgKSB8IDB4MjAsIDYgKTtcblx0XHRcdFx0XHRcdHN0cmVhbS53cml0ZSggKCAoIGNvdW50ICkgJiAweDFGICkgLCA2ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzdHJlYW0ud3JpdGUoICggKCBjb3VudCApICYgMHgxRiApLCA2ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vc3RyZWFtLldyaXRlKCBjb3VudCwgMTYgKTtcblx0XHRcdFx0XHRzdHJlYW0ud3JpdGUoIGluZGV4LCBiaXRzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0Q29tcHJlc3NWb3hlbERhdGEgOiBmdW5jdGlvbiggZGF0YSApXG5cdFx0XHR7XG5cdFx0XHRcdHZhciBzdHJlYW0gPSBWb3hlbGFyaXVtLkJpdFN0cmVhbSgpO1xuXHRcdFx0XHR2YXIgbGVuID0gZGF0YS5sZW5ndGg7XG5cdFx0XHRcdHZhciBuO1xuXHRcdFx0XHR2YXIgdHlwZXMgPSBbXTtcblxuXHRcdFx0XHRmb3IoIG4gPSAwOyBuIDwgbGVuOyBuKysgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHZveCA9IFZveGVsYXJpdW0uVm94ZWxzLmdldEluZGV4KCBkYXRhW25dIClcblx0XHRcdFx0XHRpZiggdHlwZXMuZmluZEluZGV4KCAodikgPT4gdj09PXZveCApIDwgMCApXG5cdFx0XHRcdFx0XHR0eXBlcy5wdXNoKCB2b3ggKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBiaXRzID0gVm94ZWxhcml1bS5CaXRTdHJlYW0uR2V0TWluQml0c05lZWRlZEZvclZhbHVlKCB0eXBlcy5sZW5ndGggLSAxICk7IC8vIDQgaXMgMCwxLDIsMzsgbmVlZHMgb25seSAyIGJpdHMuLi5cblx0XHRcdFx0Ly9iaXRzID0gKGJpdHMgKyA3ICkgJiAweGY4O1xuXHRcdFx0XHRzdHJlYW0uc2VlayggMTYgKTsgLy8gc2VlayBiaXQgY291bnRcblx0XHRcdFx0c3RyZWFtLndyaXRlKCBiaXRzLCA4ICk7XG5cdFx0XHRcdHN0cmVhbS53cml0ZSggdHlwZXMubGVuZ3RoLTEsIGJpdHMgKTtcblx0XHRcdFx0dHlwZXMuZm9yRWFjaCggKHR5cGUpPT57XG5cdFx0XHRcdFx0c3RyZWFtLndyaXRlKCB0eXBlLCAxNiApOyB9ICk7XG5cdFx0XHRcdHZhciBwcmlvcl9jdWJlID0gMHhGRkZGLCBjdWJlO1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdFx0XHR2YXIgY291bnQgPSAwO1xuXHQgICAgICAgICAgICBmb3IoIG4gPSAwOyBuIDwgbGVuOyBuKysgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGN1YmUgPSBWb3hlbGFyaXVtLlZveGVscy5nZXRJbmRleCggZGF0YVtuXSApXG5cdFx0XHRcdFx0aWYoIHByaW9yX2N1YmUgIT0gY3ViZSApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYoIGNvdW50ID4gMCApXG5cdFx0XHRcdFx0XHRcdHZjLldyaXRlQ3ViZXMoIHN0cmVhbSwgYml0cywgY291bnQsIGluZGV4ICk7XG5cdFx0XHRcdFx0XHRpbmRleCA9IHR5cGVzLmZpbmRJbmRleCggKHYpPT4odj09PSBjdWJlICkgKTtcblx0XHRcdFx0XHRcdHByaW9yX2N1YmUgPSBjdWJlO1xuXHRcdFx0XHRcdFx0Y291bnQgPSAxO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZjLldyaXRlQ3ViZXMoIHN0cmVhbSwgYml0cywgY291bnQsIGluZGV4ICk7XG5cblx0XHRcdFx0dmFyIHJlc3VsdCA9IHN0cmVhbS5nZXRCeXRlcygpO1xuXHRcdFx0XHRyZXN1bHQuZGF0YVswXSA9ICgoIHJlc3VsdC5ieXRlc191c2VkICkgJiAweEZGKTtcblx0XHRcdFx0cmVzdWx0LmRhdGFbMV0gPSAoICggcmVzdWx0LmJ5dGVzX3VzZWQgKSA+PiA4KTtcblx0XHRcdFx0Ly8gYWxyZWFkeSBjb21wcmVzc2VkIGFzIGNhbiBiZS5cblx0XHRcdFx0aWYoIHJlc3VsdC5ieXRlc191c2VkIDwgMjAgKVxuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cblx0XHRcdFx0LyogY2FuIGd6aXAgdGhlIHN0cmVhbSBhdCB0aGlzIHBvaW50IHRvbyBhbmQgc2F2ZSAxMC0yMCUgbW9yZSAqL1xuXHRcdFx0XHQvKlxuXHRcdFx0XHRNZW1vcnlTdHJlYW0gZmluYWxfc3RyZWFtID0gbmV3IE1lbW9yeVN0cmVhbSgpO1xuXHRcdFx0XHRmaW5hbF9zdHJlYW0uU2VlayggMiwgU2Vla09yaWdpbi5CZWdpbiApO1xuXHRcdFx0XHQvL0RlZmxhdGVTdHJlYW0gZ3pfc3RyZWFtID0gbmV3IERlZmxhdGVTdHJlYW0oIGZpbmFsX3N0cmVhbSwgQ29tcHJlc3Npb25Nb2RlLkNvbXByZXNzICk7XG5cdFx0XHRcdC8vR1ppcFN0cmVhbSBnel9zdHJlYW0gPSBuZXcgR1ppcFN0cmVhbSggZmluYWxfc3RyZWFtLCBDb21wcmVzc2lvbk1vZGUuQ29tcHJlc3MgKTtcblx0XHRcdFx0R1ppcFN0cmVhbSBnel9zdHJlYW0gPSBuZXcgR1ppcFN0cmVhbSggZmluYWxfc3RyZWFtLCBDb21wcmVzc2lvbkxldmVsLkZhc3Rlc3QgKTtcblx0XHRcdFx0Ly9mb3IoIG4gPSAyOyBuIDwgYnl0ZXNfdXNlZDsgbisrIClcblx0XHRcdFx0Ly9cdGd6X3N0cmVhbS5Xcml0ZUJ5dGUoIHJlc3VsdFtuXSApO1xuXHRcdFx0XHRnel9zdHJlYW0uV3JpdGUoIHJlc3VsdCwgMiwgYnl0ZXNfdXNlZCAtIDIgKTtcblx0XHRcdFx0Z3pfc3RyZWFtLkNsb3NlKCk7XG5cdFx0XHRcdHJlc3VsdCA9IGZpbmFsX3N0cmVhbS5Ub0FycmF5KCk7Ly8uR2V0QnVmZmVyKCk7XG5cdFx0XHRcdExvZy5sb2coIFwiQ29tcHJlc3NlZCBhbm90aGVyIHswfSVcIiwgKGZsb2F0KSggMTAwLjBmICogKGZsb2F0KSggYnl0ZXNfdXNlZCAtIHJlc3VsdC5MZW5ndGggKSAvICggYnl0ZXNfdXNlZCAtIDIgKSApICk7XG5cdFx0XHRcdC8vIHN0b3JlIG9sZCBsZW5ndGggc28gd2Uga25vdyBob3cgbXVjaCB0byByZXF1ZXN0IGRlY29tcHJlc3NpbmcuXG5cdFx0XHRcdHJlc3VsdFswXSA9IChieXRlKSggKCBieXRlc191c2VkICkgJiAweEZGICk7XG5cdFx0XHRcdHJlc3VsdFsxXSA9IChieXRlKSggKCBieXRlc191c2VkICkgPj4gOCApO1xuXHRcdFx0XHRieXRlc191c2VkID0gcmVzdWx0Lkxlbmd0aDsvLyAoaW50KWZpbmFsX3N0cmVhbS5MZW5ndGg7XG5cdFx0XHRcdGd6X3N0cmVhbS5EaXNwb3NlKCk7XG5cdFx0XHRcdCovXG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9LFxuXG5cdFx0XHREZWNvbXByZXNzVm94ZWxEYXRhIDogZnVuY3Rpb24oICBkYXRhLCByZXN1bHQgKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgc3RyZWFtO1xuXHRcdFx0XHR2YXIgRGF0YUJ5dGVzO1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3RyZWFtID0gVm94ZWxhcml1bS5CaXRTdHJlYW0oIGRhdGEgKTtcblx0XHRcdFx0XHRzdHJlYW0uc2VlayggMTYgKTsgLy8gc2VlayBieSBiaXQgcG9zaXRpb25cblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdHlwZXMgPSBbXTtcblxuXHRcdFx0XHR2YXIgYml0cztcblx0XHRcdFx0dmFyIFR5cGVDb3VudDtcblx0XHRcdFx0Yml0cyA9IHN0cmVhbS5yZWFkKCA4KTtcblx0XHRcdFx0VHlwZUNvdW50ID0gc3RyZWFtLnJlYWQoIGJpdHMgKTtcblx0XHRcdFx0VHlwZUNvdW50Kys7IC8vIGFsd2F5cyBhdCBsZWFzdCBvbmUuXG5cdFx0XHRcdHZhciBuO1xuXHRcdFx0XHRmb3IoIG4gPSAwOyBuIDwgVHlwZUNvdW50OyBuKysgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHZhbDtcblx0XHRcdFx0XHR2YWwgPSBzdHJlYW0ucmVhZCggMTYgKTtcblx0XHRcdFx0XHR2YXIgYXNzZXJ0VmFsO1xuXHRcdFx0XHRcdGFzc2VydFZhbCA9IFZveGVsYXJpdW0uVm94ZWxzLnR5cGVzW3ZhbF07XG5cdFx0XHRcdFx0aWYoIGFzc2VydFZhbCApXG5cdFx0XHRcdFx0XHR0eXBlcy5wdXNoKCBhc3NlcnRWYWwgKTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR0eXBlcy5wdXNoKCBWb3hlbGFyaXVtLlZveGVscy5Wb2lkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgb3V0cG9zID0gMDtcblx0XHRcdFx0ZG9cblx0XHRcdFx0e1xuXHRcdFx0XHRcdHZhciB2b3g7XG5cdFx0XHRcdFx0dmFyIHZhbDtcblx0XHRcdFx0XHR2YXIgY291bnQ7XG5cdFx0XHRcdFx0dmFsID0gc3RyZWFtLnJlYWQoIDEgKTtcblx0XHRcdFx0XHRpZiggdmFsID09IDAgKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHZhbCA9IHN0cmVhbS5yZWFkKCBiaXRzICk7XG5cdFx0XHRcdFx0XHR2b3ggPSB0eXBlc1t2YWxdO1xuXHRcdFx0XHRcdFx0aWYoICF2b3ggKSBkZWJ1Z2dlcjtcblx0XHRcdFx0XHRcdHJlc3VsdFtvdXRwb3MrK10gPSB2b3g7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgY291bnRfdG1wO1xuXHRcdFx0XHRcdFx0Y291bnRfdG1wID0gc3RyZWFtLnJlYWQoIDYgICk7XG5cdFx0XHRcdFx0XHRjb3VudCA9IGNvdW50X3RtcCAmIDB4MUY7XG5cdFx0XHRcdFx0XHRpZiggKCBjb3VudF90bXAgJiAweDIwICkgIT0gMCApXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGNvdW50IDw8PSA1O1xuXHRcdFx0XHRcdFx0XHRjb3VudF90bXAgPSBzdHJlYW0ucmVhZCggNiApO1xuXHRcdFx0XHRcdFx0XHRjb3VudCB8PSBjb3VudF90bXAgJiAweDFGO1xuXHRcdFx0XHRcdFx0XHRpZiggKCBjb3VudF90bXAgJiAweDIwICkgIT0gMCApXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjb3VudCA8PD0gNTtcblx0XHRcdFx0XHRcdFx0XHRjb3VudF90bXAgPSBzdHJlYW0ucmVhZCggNiApO1xuXHRcdFx0XHRcdFx0XHRcdGNvdW50IHw9IGNvdW50X3RtcCAmIDB4MUY7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvdW50ICs9IDI7XG5cdFx0XHRcdFx0XHQvL3N0cmVhbS5SZWFkKCAxNiwgb3V0IGNvdW50ICk7XG5cdFx0XHRcdFx0XHQvL0xvZy5sb2coIFwiUmVhZCBjb3VudCB7MH1cIiwgY291bnQgKTtcblx0XHRcdFx0XHRcdHZhbCA9IHN0cmVhbS5yZWFkKCBiaXRzICk7XG5cdFx0XHRcdFx0XHR2b3ggPSB0eXBlc1t2YWxdO1xuXHRcdFx0XHRcdFx0aWYoICF2b3ggKSB7XG5cdFx0XHRcdFx0XHRcdHZveCA9IHR5cGVzWzBdO1xuXHRcdFx0XHRcdFx0XHRkZWJ1Z2dlcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coIFwiU2V0IHZveCB0byBcIiwgdm94IClcblx0XHRcdFx0XHRcdGZvciggbiA9IDA7IG4gPCBjb3VudDsgbisrIClcblx0XHRcdFx0XHRcdFx0cmVzdWx0W291dHBvcysrXSA9IHZveDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUoIG91dHBvcyA8IHJlc3VsdC5sZW5ndGggKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXHRyZXR1cm4gdmM7XG59XG5cbmZ1bmN0aW9uIE5lYXJWb3hlbFJlZigpIHtcblx0dmFyIHJlc3VsdCA9IHtcblx0IHNlY3Rvcjp0aGlzLFxuXHQgdm94ZWxUeXBlOm51bGwsXG5cdCBvZmZzZXQ6MCxcblx0IHZveGVsRXh0ZW5zaW9uOm51bGxcbiBcdH1cblx0cmVzdWx0LnZveGVsVHlwZSA9IHRoaXMuZGF0YS5kYXRhW3Jlc3VsdC5vZmZzZXRdO1xuXHRyZXN1bHQudm94ZWxFeHRlbnNpb24gPSB0aGlzLmRhdGEub3RoZXJJbmZvc1tyZXN1bHQub2Zmc2V0XTtcblx0IHJldHVybiByZXN1bHQ7XG59XG5cclxuZnVuY3Rpb24gVm94ZWxSZWYoIHgsIHksIHogKSB7XHJcbn1cclxuXHJcbnZhciByZWZQb29sID0gW107XHJcblxyXG5Wb3hlbGFyaXVtLlZveGVsUmVmID0gbWFrZVZveGVsUmVmXHJcblxyXG5cclxuZnVuY3Rpb24gbWFrZVZveGVsUmVmKCBjbHVzdGVyLCBzZWN0b3IsIHgsIHksIHogKVxyXG57XG5cdHZhciByZXN1bHQ7XG5cdHJlc3VsdCA9IHJlZlBvb2wucG9wKCk7XG5cdGlmKCAhcmVzdWx0ICkge1xuXHRcdHJlc3VsdCA9IHsgc2VjdG9yIDogc2VjdG9yXG5cdFx0XHRcdCwgb2Zmc2V0IDogMFxuXHRcdFx0XHQsIHggOiB4LCB5IDogeSwgeiA6IHpcblx0XHRcdCBcdCwgd3ggOiBzZWN0b3I/KHNlY3Rvci5wb3MueCAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKyB4KTp4XHJcblx0XHRcdFx0LCB3eSA6IHNlY3Rvcj8oc2VjdG9yLnBvcy55ICogY2x1c3Rlci5zZWN0b3JTaXplWSArIHkpOnlcclxuXHRcdFx0XHQsIHd6IDogc2VjdG9yPyhzZWN0b3IucG9zLnogKiBjbHVzdGVyLnNlY3RvclNpemVaICsgeik6elxyXG5cdFx0XHRcdCwgdm94ZWxUeXBlIDogbnVsbFxuXHRcdFx0XHQsIGNsdXN0ZXIgOiBjbHVzdGVyXHJcblx0XHRcdFx0LCB2b3hlbEV4dGVuc2lvbiA6IG51bGxcblx0XHRcdFx0LCBmb3JFYWNoIDogZm9yRWFjaFxuXHRcdFx0XHQsIGRlbGV0ZSA6IGZ1bmN0aW9uKCkgeyByZWZQb29sLnB1c2goIHRoaXMgKTsgfVxuXHRcdFx0XHQsIGNsb25lIDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNlY3Rvci5nZXRWb3hlbFJlZiggdGhpcy54LCB0aGlzLnksIHRoaXMueiApIH1cclxuXHRcdFx0XHQsIGdldE5lYXJWb3hlbCA6IEdldFZveGVsUmVmXG5cdFx0XHRcdCB9XG5cdFx0T2JqZWN0LnNlYWwoIHJlc3VsdCApO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHJlc3VsdC5zZWN0b3IgPSBzZWN0b3I7XG5cdFx0cmVzdWx0Lm9mZnNldCA9IDA7XG5cdFx0cmVzdWx0LnggPSB4O1xuXHRcdHJlc3VsdC55ID0geTtcblx0XHRyZXN1bHQueiA9IHo7XG5cdFx0cmVzdWx0Lnd4ID0gc2VjdG9yPyhzZWN0b3IucG9zLnggKiBjbHVzdGVyLnNlY3RvclNpemVYICsgeCk6eFxuXHRcdHJlc3VsdC53eSA9IHNlY3Rvcj8oc2VjdG9yLnBvcy55ICogY2x1c3Rlci5zZWN0b3JTaXplWSArIHkpOnlcblx0XHRyZXN1bHQud3ogPSBzZWN0b3I/KHNlY3Rvci5wb3MueiAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVogKyB6KTp6XG5cdFx0cmVzdWx0LnZveGVsVHlwZSA9IG51bGw7XG5cdFx0cmVzdWx0LmNsdXN0ZXIgPSBjbHVzdGVyO1xuXHRcdHJlc3VsdC52b3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdH1cbiAgICBpZiggc2VjdG9yICkge1xuXHRcdC8vIHd4IGNvb3JkcyB3aWxsIHN0aWxsIGJlIGFjY3VyYXRlIGV2ZW4gaWYgdGhlIHN1Yi1yYW5nZSBhbmQgb3JpZ2luIHNlY3RvciBtb3ZlIG5vdy5cblx0XHRpZiggcmVzdWx0LnggPCAwICkgeyByZXN1bHQueCArPSBjbHVzdGVyLnNlY3RvclNpemVYOyByZXN1bHQuc2VjdG9yID0gKCByZXN1bHQuc2VjdG9yICYmIHJlc3VsdC5zZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdIHx8IHJlc3VsdC5zZWN0b3IgKSB9XG5cdFx0aWYoIHJlc3VsdC55IDwgMCApIHsgcmVzdWx0LnkgKz0gY2x1c3Rlci5zZWN0b3JTaXplWTsgcmVzdWx0LnNlY3RvciA9ICggcmVzdWx0LnNlY3RvciAmJiByZXN1bHQuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSB8fCByZXN1bHQuc2VjdG9yICkgfVxuXHRcdGlmKCByZXN1bHQueiA8IDAgKSB7IHJlc3VsdC56ICs9IGNsdXN0ZXIuc2VjdG9yU2l6ZVo7IHJlc3VsdC5zZWN0b3IgPSAoIHJlc3VsdC5zZWN0b3IgJiYgcmVzdWx0LnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gfHwgcmVzdWx0LnNlY3RvciApIH1cblx0XHRpZiggcmVzdWx0LnggPj0gY2x1c3Rlci5zZWN0b3JTaXplWCApIHsgcmVzdWx0LnggLT0gY2x1c3Rlci5zZWN0b3JTaXplWDsgcmVzdWx0LnNlY3RvciA9ICggcmVzdWx0LnNlY3RvciAmJiByZXN1bHQuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdIHx8IHJlc3VsdC5zZWN0b3IgKSB9XG5cdFx0aWYoIHJlc3VsdC55ID49IGNsdXN0ZXIuc2VjdG9yU2l6ZVkgKSB7IHJlc3VsdC55ICs9IGNsdXN0ZXIuc2VjdG9yU2l6ZVk7IHJlc3VsdC5zZWN0b3IgPSAoIHJlc3VsdC5zZWN0b3IgJiYgcmVzdWx0LnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gfHwgcmVzdWx0LnNlY3RvciApIH1cblx0XHRpZiggcmVzdWx0LnogPj0gY2x1c3Rlci5zZWN0b3JTaXplWiApIHsgcmVzdWx0LnogKz0gY2x1c3Rlci5zZWN0b3JTaXplWjsgcmVzdWx0LnNlY3RvciA9ICggcmVzdWx0LnNlY3RvciAmJiByZXN1bHQuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0gfHwgcmVzdWx0LnNlY3RvciApIH1cblxuXHRcdHJlc3VsdC5vZmZzZXQgPSAoIHJlc3VsdC54ICogY2x1c3Rlci5zZWN0b3JTaXplWSApICArIHJlc3VsdC55ICsgKCByZXN1bHQueiAqICggY2x1c3Rlci5zZWN0b3JTaXplWSAqIGNsdXN0ZXIuc2VjdG9yU2l6ZVggKSApO1xuXHRcdCAgcmVzdWx0LnZveGVsVHlwZSA9IHNlY3Rvci5kYXRhLmRhdGFbcmVzdWx0Lm9mZnNldF1cclxuXHRcdCAgaWYoICFyZXN1bHQudm94ZWxUeXBlIClcclxuXHRcdCAgXHRyZXR1cm4gbnVsbDtcclxuXHRcdCAgcmVzdWx0LnZveGVsRXh0ZW5zaW9uID0gc2VjdG9yLmRhdGEub3RoZXJJbmZvc1tyZXN1bHQub2Zmc2V0XTtcclxuICAgIH1cclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XG5cblx0ZnVuY3Rpb24gZm9yRWFjaCggdm94ZWxSZWYyLCBub3RfemVybywgY2FsbGJhY2sgKVxuXHR7XG5cdFx0dmFyIHZveGVsUmVmMSA9IHRoaXM7XG5cdFx0Ly9pZiggdm94ZWxSZWYxLnNlY3RvciA9PSBudWxsIHx8IHZveGVsUmVmMi5zZWN0b3IgPT0gbnVsbCApXHJcblx0XHQvL1x0cmV0dXJuIG5vdF96ZXJvID8gMSA6IDA7XHJcblx0XHRpZiggdm94ZWxSZWYxLmNsdXN0ZXIgIT09IHZveGVsUmVmMi5jbHVzdGVyIClcclxuXHRcdFx0cmV0dXJuIG5vdF96ZXJvID8gMSA6IDA7XG5cdFx0dmFyIGNsdXN0ZXIgPSB2b3hlbFJlZjEuY2x1c3RlcjtcclxuXG5cdFx0dmFyIHYxeCA9IHZveGVsUmVmMS53eDtcblx0XHR2YXIgdjF5ID0gdm94ZWxSZWYxLnd5O1xuXHRcdHZhciB2MXogPSB2b3hlbFJlZjEud3o7XG5cdFx0dmFyIHYyeCA9IHZveGVsUmVmMi53eDtcblx0XHR2YXIgdjJ5ID0gdm94ZWxSZWYyLnd5O1xuXHRcdHZhciB2MnogPSB2b3hlbFJlZjIud3o7XG5cdFx0dmFyIGRlbF94ID0gdjJ4IC0gdjF4O1xyXG5cdFx0dmFyIGRlbF95ID0gdjJ5IC0gdjF5O1xyXG5cdFx0dmFyIGRlbF96ID0gdjJ6IC0gdjF6O1xyXG5cdFx0dmFyIGFic194ID0gZGVsX3ggPCAwID8gLWRlbF94IDogZGVsX3g7XG5cdFx0dmFyIGFic195ID0gZGVsX3kgPCAwID8gLWRlbF95IDogZGVsX3k7XG5cdFx0dmFyIGFic196ID0gZGVsX3ogPCAwID8gLWRlbF96IDogZGVsX3o7XG5cdFx0Ly8gY2Fubm90IHVzZSBpdGVyYXRlIGlmIGVpdGhlciBlbmQgaXMgdW5kZWZpbmVkLlxuXHRcdGlmKCBkZWxfeCAhPSAwIClcblx0XHR7XG5cdFx0XHRpZiggZGVsX3kgIT0gMCApXG5cdFx0XHR7XG5cdFx0XHRcdGlmKCBkZWxfeiAhPSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKCBhYnNfeCA+IGFic195IHx8ICggYWJzX3ogPiBhYnNfeSApIClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZiggYWJzX3ogPiBhYnNfeCApXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdC8vIHogaXMgbG9uZ2VzdCBwYXRoXG5cdFx0XHRcdFx0XHRcdHZhciBlcnJ5ID0gLWFic196IC8gMjtcblx0XHRcdFx0XHRcdFx0dmFyIGVycnggPSAtYWJzX3ogLyAyO1xuXHRcdFx0XHRcdFx0XHR2YXIgaW5jeSA9IGRlbF95IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdFx0dmFyIGluY3ggPSBkZWxfeCA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHRcdHZhciBpbmN6ID0gZGVsX3ogPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHggPSB2MXg7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHkgPSB2MXk7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgeiA9IHYxeiArIGluY3o7IHogIT0gdjJ6OyB6ICs9IGluY3ogKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycnggKz0gYWJzX3g7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggZXJyeCA+IDAgKVxuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlcnJ4IC09IGFic196O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4ICs9IGluY3g7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJ5ICs9IGFic195O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIGVycnkgPiAwIClcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXJyeSAtPSBhYnNfejtcblx0XHRcdFx0XHRcdFx0XHRcdFx0eSArPSBpbmN5O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgdiA9IGNsdXN0ZXIuZ2V0Vm94ZWxSZWYoIGZhbHNlLCB4LCB5LCB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgdmFsID0gY2FsbGJhY2soIHYgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggdmFsICE9PSB2ICkgdi5kZWxldGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCAhbm90X3plcm8gJiYgdmFsICkgfHwgKCBub3RfemVybyAmJiAhdmFsICkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHQvLyB4IGlzIGxvbmdlc3QuXG5cdFx0XHRcdFx0XHRcdHZhciBlcnJ5ID0gLWFic194IC8gMjtcblx0XHRcdFx0XHRcdFx0dmFyIGVycnogPSAtYWJzX3ggLyAyO1xuXHRcdFx0XHRcdFx0XHR2YXIgaW5jeSA9IGRlbF95IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdFx0dmFyIGluY3ggPSBkZWxfeCA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHRcdHZhciBpbmN6ID0gZGVsX3ogPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHkgPSB2MXk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHogPSB2MXo7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgeCA9IHYxeCArIGluY3g7IHggIT0gdjJ4OyB4ICs9IGluY3ggKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycnogKz0gYWJzX3o7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggZXJyeiA+IDAgKVxuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlcnJ6IC09IGFic194O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR6ICs9IGluY3o7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJ5ICs9IGFic195O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIGVycnkgPiAwIClcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXJyeSAtPSBhYnNfeDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0eSArPSBpbmN5O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgdiA9IGNsdXN0ZXIuZ2V0Vm94ZWxSZWYoIGZhbHNlLCB4LCB5LCB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIHZhbCAhPT0gdiApIHYuZGVsZXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHkgaXMgbG9uZ2VzdC5cblx0XHRcdFx0XHRcdHZhciBlcnJ4ID0gLWFic195IC8gMjtcblx0XHRcdFx0XHRcdHZhciBlcnJ6ID0gLWFic195IC8gMjtcblx0XHRcdFx0XHRcdHZhciBpbmN5ID0gZGVsX3kgPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0dmFyIGluY3ggPSBkZWxfeCA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR2YXIgaW5jeiA9IGRlbF96IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIHggPSB2MXg7XG5cdFx0XHRcdFx0XHRcdHZhciB6ID0gdjF6O1xuXHRcdFx0XHRcdFx0XHRmb3IoIHZhciB5ID0gdjF5ICsgaW5jeTsgeSAhPSB2Mnk7IHkgKz0gaW5jeSApXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRlcnJ4ICs9IGFic194O1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBlcnJ4ID4gMCApXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyeCAtPSBhYnNfeTtcblx0XHRcdFx0XHRcdFx0XHRcdHggKz0gaW5jeDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZXJyeiArPSBhYnNfejtcblx0XHRcdFx0XHRcdFx0XHRpZiggZXJyeiA+IDAgKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycnogLT0gYWJzX3k7XG5cdFx0XHRcdFx0XHRcdFx0XHR6ICs9IGluY3o7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCB2ID0gY2x1c3Rlci5nZXRWb3hlbFJlZiggZmFsc2UsIHgsIHksIHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB2YWwgPSBjYWxsYmFjayggdiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggdmFsICE9PSB2ICkgdi5kZWxldGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyB6IGlzIGNvbnN0YW50XG5cdFx0XHRcdFx0aWYoIGFic194ID4gYWJzX3kgKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHggaXMgbG9uZ2VzdFxuXHRcdFx0XHRcdFx0dmFyIGVycnkgPSAtYWJzX3ggLyAyO1xuXHRcdFx0XHRcdFx0dmFyIGluY3kgPSBkZWxfeSA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR2YXIgaW5jeCA9IGRlbF94IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIHkgPSB2MXk7XG5cdFx0XHRcdFx0XHRcdHZhciB6ID0gdjF6O1xuXHRcdFx0XHRcdFx0XHRmb3IoIHZhciB4ID0gdjF4ICsgaW5jeDsgeCAhPSB2Mng7IHggKz0gaW5jeCApXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRlcnJ5ICs9IGFic195O1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBlcnJ5ID4gMCApXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyeSAtPSBhYnNfeDtcblx0XHRcdFx0XHRcdFx0XHRcdHkgKz0gaW5jeTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgeCwgeSwgeiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggdiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCB2YWwgIT09IHYgKSB2LmRlbGV0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCAhbm90X3plcm8gJiYgdmFsICkgfHwgKCBub3RfemVybyAmJiAhdmFsICkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQvLyB5IGlzIGxvbmdlc3QuXG5cdFx0XHRcdFx0XHR2YXIgZXJyeCA9IC1hYnNfeSAvIDI7XG5cdFx0XHRcdFx0XHR2YXIgaW5jeSA9IGRlbF95IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdHZhciBpbmN4ID0gZGVsX3ggPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR2YXIgeCA9IHYxeDtcblx0XHRcdFx0XHRcdFx0dmFyIHogPSB2MXo7XG5cdFx0XHRcdFx0XHRcdGZvciggdmFyIHkgPSB2MXkgKyBpbmN5OyB5ICE9IHYyeTsgeSArPSBpbmN5IClcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGVycnggKz0gYWJzX3g7XG5cdFx0XHRcdFx0XHRcdFx0aWYoIGVycnggPiAwIClcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJ4IC09IGFic195O1xuXHRcdFx0XHRcdFx0XHRcdFx0eCArPSBpbmN4O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgdiA9IGNsdXN0ZXIuZ2V0Vm94ZWxSZWYoIGZhbHNlLCB4LCB5LCB6ICk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKCB2ICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgdmFsID0gY2FsbGJhY2soIHYgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoIHZhbCAhPT0gdiApIHYuZGVsZXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCAoICFub3RfemVybyAmJiB2YWwgKSB8fCAoIG5vdF96ZXJvICYmICF2YWwgKSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0aWYoIGRlbF96ICE9IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoIGFic194ID4gYWJzX3ogKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIHggaXMgbG9uZ2VzdC5cblx0XHRcdFx0XHRcdHZhciBlcnJ6ID0gLWFic194IC8gMjtcblx0XHRcdFx0XHRcdHZhciBpbmN4ID0gZGVsX3ggPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0dmFyIGluY3ogPSBkZWxfeiA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHZhciB5ID0gdjF5O1xuXHRcdFx0XHRcdFx0XHR2YXIgeiA9IHYxejtcblx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgeCA9IHYxeCArIGluY3g7IHggIT0gdjJ4OyB4ICs9IGluY3ggKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyeiArPSBhYnNfejtcblx0XHRcdFx0XHRcdFx0XHRpZiggZXJyeiA+IDAgKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycnogLT0gYWJzX3g7XG5cdFx0XHRcdFx0XHRcdFx0XHR6ICs9IGluY3o7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCB2ID0gY2x1c3Rlci5nZXRWb3hlbFJlZiggZmFsc2UsIHgsIHksIHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB2YWwgPSBjYWxsYmFjayggdiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggdmFsICE9PSB2ICkgdi5kZWxldGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8geiBpcyBsb25nZXN0IHBhdGhcblx0XHRcdFx0XHRcdHZhciBlcnJ4ID0gLWFic196IC8gMjtcblx0XHRcdFx0XHRcdHZhciBpbmN4ID0gZGVsX3ggPCAwID8gLTEgOiAxO1xuXHRcdFx0XHRcdFx0dmFyIGluY3ogPSBkZWxfeiA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHZhciB4ID0gdjF4O1xuXHRcdFx0XHRcdFx0XHR2YXIgeSA9IHYxeTtcblx0XHRcdFx0XHRcdFx0Zm9yKCB2YXIgeiA9IHYxeiArIGluY3o7IHogIT0gdjJ6OyB6ICs9IGluY3ogKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyeCArPSBhYnNfeDtcblx0XHRcdFx0XHRcdFx0XHRpZiggZXJyeCA+IDAgKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycnggLT0gYWJzX3o7XG5cdFx0XHRcdFx0XHRcdFx0XHR4ICs9IGluY3g7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCB2ID0gY2x1c3Rlci5nZXRWb3hlbFJlZiggZmFsc2UsIHgsIHksIHogKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB2YWwgPSBjYWxsYmFjayggdiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggdmFsICE9PSB2ICkgdi5kZWxldGUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyB4IGlzIG9ubHkgY2hhbmdpbmcuXG5cdFx0XHRcdFx0dmFyIGluY3ggPSBkZWxfeCA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0Zm9yKCB2YXIgeCA9IHYxeCArIGluY3g7IHggIT0gdjJ4OyB4ICs9IGluY3ggKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGxldCB2ID0gY2x1c3Rlci5nZXRWb3hlbFJlZiggZmFsc2UsIHgsIHksIHogKTtcclxuXHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdGxldCB2YWwgPSBjYWxsYmFjayggdiApO1xuXHRcdFx0XHRcdFx0XHRpZiggdmFsICE9PSB2ICkgdi5kZWxldGUoKTtcblx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0aWYoIGRlbF95ICE9IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiggZGVsX3ogIT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiggYWJzX3kgPiBhYnNfeiApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Ly8geSBpcyBsb25nZXN0LlxuXHRcdFx0XHRcdFx0dmFyIGVycnogPSAtYWJzX3kgLyAyO1xuXHRcdFx0XHRcdFx0dmFyIGluY3kgPSBkZWxfeSA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR2YXIgaW5jeiA9IGRlbF96IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIHggPSB2MXg7XG5cdFx0XHRcdFx0XHRcdHZhciB6ID0gdjF6O1xuXHRcdFx0XHRcdFx0XHRmb3IoIHZhciB5ID0gdjF5ICsgaW5jeTsgeSAhPSB2Mnk7IHkgKz0gaW5jeSApXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRlcnJ6ICs9IGFic196O1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBlcnJ6ID4gMCApXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyeiAtPSBhYnNfeTtcblx0XHRcdFx0XHRcdFx0XHRcdHogKz0gaW5jejtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgeCwgeSwgeiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggdiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCB2YWwgIT09IHYgKSB2LmRlbGV0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCAhbm90X3plcm8gJiYgdmFsICkgfHwgKCBub3RfemVybyAmJiAhdmFsICkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQvLyB6IGlzIGxvbmdlc3QgcGF0aFxuXHRcdFx0XHRcdFx0dmFyIGVycnkgPSAtYWJzX3ogLyAyO1xuXHRcdFx0XHRcdFx0dmFyIGluY3kgPSBkZWxfeSA8IDAgPyAtMSA6IDE7XG5cdFx0XHRcdFx0XHR2YXIgaW5jeiA9IGRlbF96IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dmFyIHggPSB2MXg7XG5cdFx0XHRcdFx0XHRcdHZhciB5ID0gdjF5O1xuXHRcdFx0XHRcdFx0XHRmb3IoIHZhciB6ID0gdjF6ICsgaW5jejsgeiAhPSB2Mno7IHogKz0gaW5jeiApXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRlcnJ5ICs9IGFic195O1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBlcnJ5ID4gMCApXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyeSAtPSBhYnNfejtcblx0XHRcdFx0XHRcdFx0XHRcdHkgKz0gaW5jeTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgeCwgeSwgeiApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiggdiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKCB2YWwgIT09IHYgKSB2LmRlbGV0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiggKCAhbm90X3plcm8gJiYgdmFsICkgfHwgKCBub3RfemVybyAmJiAhdmFsICkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIG5vIGRlbF94LCBubyBkZWxfelxuXHRcdFx0XHRcdC8vIHkgaXMgb25seSBjaGFuZ2luZy5cblx0XHRcdFx0XHR2YXIgaW5jeSA9IGRlbF95IDwgMCA/IC0xIDogMTtcblx0XHRcdFx0XHRmb3IoIHZhciB5ID0gdjF5ICsgaW5jeTsgeSAhPSB2Mnk7IHkgKz0gaW5jeSApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bGV0IHYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgeCwgeSwgeiApO1xyXG5cdFx0XHRcdFx0XHRpZiggdiApIHtcblx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdGlmKCB2YWwgIT09IHYgKSB2LmRlbGV0ZSgpO1xuXHRcdFx0XHRcdFx0XHRpZiggKCAhbm90X3plcm8gJiYgdmFsICkgfHwgKCBub3RfemVybyAmJiAhdmFsICkgKVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG5vIGRlbF94LCBubyBkZWxfeS4uLlxuXHRcdFx0XHRpZiggZGVsX3ogIT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiggZGVsX3ogPiAwIClcblx0XHRcdFx0XHRcdGZvciggdmFyIHogPSB2MXogKyAxOyB6IDwgdjJ6OyB6KysgKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRsZXQgdiA9IGNsdXN0ZXIuZ2V0Vm94ZWxSZWYoIGZhbHNlLCB4LCB5LCB6ICk7XHJcblx0XHRcdFx0XHRcdFx0aWYoIHYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHZhbCA9IGNhbGxiYWNrKCB2ICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYoIHZhbCAhPT0gdiApIHYuZGVsZXRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYoICggIW5vdF96ZXJvICYmIHZhbCApIHx8ICggbm90X3plcm8gJiYgIXZhbCApIClcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRmb3IoIHZhciB6ID0gdjJ6ICsgMTsgeiA8IHYxejsgeisrIClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bGV0IHYgPSBjbHVzdGVyLmdldFZveGVsUmVmKCBmYWxzZSwgeCwgeSwgeiApO1xyXG5cdFx0XHRcdFx0XHRcdGlmKCB2ICkge1xuXHRcdFx0XHRcdFx0XHRcdGxldCB2YWwgPSBjYWxsYmFjayggdiApO1xuXHRcdFx0XHRcdFx0XHRcdGlmKCB2YWwgIT09IHYgKSB2LmRlbGV0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKCAoICFub3RfemVybyAmJiB2YWwgKSB8fCAoIG5vdF96ZXJvICYmICF2YWwgKSApXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyBubyBkZWx0YSBkaWZmLCBub3RoaW5nIHRvIGRvLlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBub3RfemVybyA/IDEgOiAwO1xuXHR9XG5cblx0ZnVuY3Rpb24gR2V0Vm94ZWxSZWZzKCBuZWFyT25seSApXG5cdHtcblx0XHR2YXIgcmVzdWx0ID0ge1xuXHRcdFx0UmVzdWx0U2VjdG9ycyA6IG5ldyBBcnJheShuZWFyT25seSA/IDcgOiAxOSksXG5cdFx0XHRSZXN1bHRPZmZzZXRzIDogbmV3IEFycmF5KG5lYXJPbmx5ID8gNyA6IDE5KVxuXHRcdH1cblx0XHRHZXRWb3hlbFJlZnMoIFJlc3VsdFNlY3RvcnMsIFJlc3VsdE9mZnNldHMsIG5lYXJPbmx5ICk7XG5cdH1cblxuXHRmdW5jdGlvbiBHZXRWb3hlbFJlZiggZGlyZWN0aW9uIClcblx0e1xuXHRcdHRoYXQgPSB0aGlzLmNsb25lKCk7XG5cdFx0c3dpdGNoKCBkaXJlY3Rpb24gKVxuXHRcdHtcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcIkNyZWF0aW5nIHZveGVsIHJlZiBcIiArIGRpcmVjdGlvbiArIFwiIGlzIG5vdCBpbXBsZW1lbnRlZCBcIiApO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQ6XG5cdFx0XHR0aGF0Lnd4LS07XG5cdFx0XHRpZiggdGhhdC54ID4gMCApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQueC0tO1xuXHRcdFx0XHR0aGF0Lk9mZnNldCAtPSB0aGF0LnNlY3Rvci5TaXplX3k7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGF0LnggPSAoYnl0ZSkoIHRoYXQuc2VjdG9yLlNpemVfeCAtIDEgKTtcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCArPSB0aGF0LnNlY3Rvci5TaXplX3kgKiAoIHRoYXQuc2VjdG9yLlNpemVfeCAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUOlxuXHRcdFx0dGhhdC53eCsrO1xuXHRcdFx0aWYoIHRoYXQueCA8ICh0aGF0LnNlY3Rvci5TaXplX3gtMSApIClcblx0XHRcdHtcblx0XHRcdFx0dGhhdC54Kys7XG5cdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IHRoYXQuc2VjdG9yLlNpemVfeTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbZGlyZWN0aW9uIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQueCA9IDA7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gdGhhdC5zZWN0b3IuU2l6ZV95ICogKCB0aGF0LnNlY3Rvci5TaXplX3ggLSAyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQ6XG5cdFx0XHR0aGF0Lnd6LS07XG5cdFx0XHRpZiggdGhhdC56ID4gMCApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuei0tO1xuXHRcdFx0XHR0aGF0Lk9mZnNldCAtPSB0aGF0LnNlY3Rvci5TaXplX3kqdGhhdC5zZWN0b3IuU2l6ZV94O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC56ID0gKGJ5dGUpKCB0aGF0LnNlY3Rvci5TaXplX3ogLSAxICk7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gKCB0aGF0LnNlY3Rvci5TaXplX3ggKiB0aGF0LnNlY3Rvci5TaXplX3kgKiAoIHRoYXQuc2VjdG9yLlNpemVfeiAtIDIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQ6XG5cdFx0XHR0aGF0Lnd6Kys7XG5cdFx0XHRpZiggdGhhdC56IDwgKCB0aGF0LnNlY3Rvci5TaXplX3ogLSAxICkgKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnorKztcblx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gdGhhdC5zZWN0b3IuU2l6ZV95KnRoYXQuc2VjdG9yLlNpemVfeDtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbZGlyZWN0aW9uIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQueiA9IDA7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gKCB0aGF0LnNlY3Rvci5TaXplX3ggKiB0aGF0LnNlY3Rvci5TaXplX3kgKiAoIHRoYXQuc2VjdG9yLlNpemVfeiAtIDIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1c6XG5cdFx0XHR0aGF0Lnd5LS07XG5cdFx0XHRpZiggdGhhdC55ID4gMCApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQueS0tO1xuXHRcdFx0XHR0aGF0Lk9mZnNldC0tO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC55ID0gKGJ5dGUpKCB0aGF0LnNlY3Rvci5TaXplX3kgLSAxICk7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gKCB0aGF0LnNlY3Rvci5TaXplX3kgLSAyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRTpcblx0XHRcdHRoYXQud3krKztcblx0XHRcdGlmKCB0aGF0LnkgPCAoIHRoYXQuc2VjdG9yLlNpemVfeSAtIDEgKSApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQueSsrO1xuXHRcdFx0XHR0aGF0Lk9mZnNldCsrO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC55ID0gMDtcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSAoIHRoYXQuc2VjdG9yLlNpemVfeSAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSB0aGF0LnNlY3Rvci5kYXRhLmRhdGFbdGhhdC5vZmZzZXRdO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLmRhdGEub3RoZXJJbmZvc1t0aGF0Lm9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiB0aGF0O1xuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhclZveGVsUmVmKCBkaXJlY3Rpb24gKVxuXHR7XG5cdFx0dmFyIHRoYXQgPSBHZXROZWFyVm94ZWxSZWYoIClcblx0XHR2YXIgY2x1c3RlciA9IHRoaXMuc2VjdG9yLmNsdXN0ZXI7XG5cdFx0dGhhdC5zZWN0b3IgPSB0aGlzLnNlY3Rvcjtcblx0XHR0aGF0Lk9mZnNldCA9IHRoaXMuT2Zmc2V0O1xuXHRcdHN3aXRjaCggZGlyZWN0aW9uIClcblx0XHR7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbiggXCJDcmVhdGluZyB2b3hlbCByZWYgXCIgKyBkaXJlY3Rpb24gKyBcIiBpcyBub3QgaW1wbGVtZW50ZWQgXCIgKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUOlxuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApICE9IDAgKVxuXHRcdFx0XHR0aGF0Lk9mZnNldCAtPSB0aGF0LnNlY3Rvci5TaXplX3k7XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCAtIDIgKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVDpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19YIDw8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSAhPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19YIDw8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZIClcblx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWTtcblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbZGlyZWN0aW9uIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YIC0gMiApO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORDpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAwIClcblx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDIgKSApO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEOlxuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ogPDwgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWCArIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSApICE9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ01BU0tfWiA8PCAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9YICsgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApIClcblx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDIgKSApO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XOlxuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1kgKSApICE9IDAgKVxuXHRcdFx0XHR0aGF0Lk9mZnNldC0tO1xuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0ICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDIgKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRTpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZICkgKSAhPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZIClcblx0XHRcdFx0dGhhdC5PZmZzZXQrKztcblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbZGlyZWN0aW9uIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgLSAyICk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IHNlbGYuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBHZXROZWFyTGVmdFZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19YIDw8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSAhPSAwIClcblx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gdGhhdC5zZWN0b3IuU2l6ZV95O1xuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggLSAyICk7XG5cdFx0XHR9XG5cdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IHNlbGYuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhclJpZ2h0Vm94ZWxSZWYoIHRoYXQsIHNlbGYgKVxuXHR7XG5cdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvcjtcblx0XHR0aGF0Lk9mZnNldCA9IHNlbGYuT2Zmc2V0O1xuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApICE9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKVxuXHRcdFx0XHR0aGF0Lk9mZnNldCArPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YIC0gMiApO1xuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLlZveGVsVHlwZU1hbmFnZXIuVm94ZWxUYWJsZVt0aGF0LnNlY3Rvci5EYXRhLkRhdGFbdGhhdC5PZmZzZXRdXTtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSB0aGF0LnNlY3Rvci5EYXRhLk90aGVySW5mb3NbdGhhdC5PZmZzZXRdO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gbnVsbDtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIEdldE5lYXJBaGVhZFZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ogPDwgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWCArIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSApXG5cdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMiApICk7XG5cdFx0XHR9XG5cdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IHNlbGYuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhckJlaGluZFZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAwIClcblx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMiApICk7XG5cdFx0XHR9XG5cdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IHNlbGYuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhckFib3ZlVm94ZWxSZWYoIHRoYXQsICBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZICkgKSAhPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZIClcblx0XHRcdFx0dGhhdC5PZmZzZXQrKztcblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMiApO1xuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLlZveGVsVHlwZU1hbmFnZXIuVm94ZWxUYWJsZVt0aGF0LnNlY3Rvci5EYXRhLkRhdGFbdGhhdC5PZmZzZXRdXTtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSB0aGF0LnNlY3Rvci5EYXRhLk90aGVySW5mb3NbdGhhdC5PZmZzZXRdO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gbnVsbDtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIEdldE5lYXJCZWxvd1ZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZICkgKSAhPSAwIClcblx0XHRcdFx0dGhhdC5PZmZzZXQtLTtcblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVyAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMiApO1xuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLlZveGVsVHlwZU1hbmFnZXIuVm94ZWxUYWJsZVt0aGF0LnNlY3Rvci5EYXRhLkRhdGFbdGhhdC5PZmZzZXRdXTtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSB0aGF0LnNlY3Rvci5EYXRhLk90aGVySW5mb3NbdGhhdC5PZmZzZXRdO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gbnVsbDtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cblxuXHRmdW5jdGlvbiBHZXROZWFyVm94ZWxSZWYoIHRoYXQsICBzZWxmLCBkaXJlY3Rpb24gKVxuXHR7XG5cdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvcjtcblx0XHR0aGF0Lk9mZnNldCA9IHNlbGYuT2Zmc2V0O1xuXHRcdHN3aXRjaCggZGlyZWN0aW9uIClcblx0XHR7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbiggXCJDcmVhdGluZyB2b3hlbCByZWYgXCIgKyBkaXJlY3Rpb24gKyBcIiBpcyBub3QgaW1wbGVtZW50ZWQgXCIgKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUOlxuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApICE9IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0Lk9mZnNldCAtPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUOlxuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApICE9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ggPDwgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0Lk9mZnNldCArPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORDpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAwIClcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMiApICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRDpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ogPDwgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWCArIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tkaXJlY3Rpb24gLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1c6XG5cdFx0XHRpZiggKCB0aGF0Lk9mZnNldCAmICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ01BU0tfWSApICkgIT0gMCApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuT2Zmc2V0LS07XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW2RpcmVjdGlvbiAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgLSAyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRTpcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZICkgKSAhPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZIClcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5PZmZzZXQrKztcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbZGlyZWN0aW9uIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0IC09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLnNlY3Rvci5Wb3hlbFR5cGVNYW5hZ2VyLlZveGVsVGFibGVbdGhhdC5zZWN0b3IuRGF0YS5EYXRhW3RoYXQuT2Zmc2V0XV07XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gdGhhdC5zZWN0b3IuRGF0YS5PdGhlckluZm9zW3RoYXQuT2Zmc2V0XTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IG51bGw7XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBHZXROZWFyTGVmdFZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19YIDw8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSAhPSAwIClcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggLSAyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gc2VsZi5zZWN0b3IuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhclJpZ2h0Vm94ZWxSZWYoIHRoYXQsc2VsZiApXG5cdHtcblx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yO1xuXHRcdHRoYXQuT2Zmc2V0ID0gc2VsZi5PZmZzZXQ7XG5cdFx0XHRpZiggKCB0aGF0Lk9mZnNldCAmICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ01BU0tfWCA8PCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgIT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ01BU0tfWCA8PCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1k7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgLT0gVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLnNlY3Rvci5Wb3hlbFR5cGVNYW5hZ2VyLlZveGVsVGFibGVbdGhhdC5zZWN0b3IuRGF0YS5EYXRhW3RoYXQuT2Zmc2V0XV07XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gdGhhdC5zZWN0b3IuRGF0YS5PdGhlckluZm9zW3RoYXQuT2Zmc2V0XTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IG51bGw7XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBHZXROZWFyQWhlYWRWb3hlbFJlZiggdGhhdCxzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19aIDw8ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1ggKyBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICkgKSAhPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ogPDwgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWCArIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSApXG5cdFx0XHR7XG5cdFx0XHRcdHRoYXQuT2Zmc2V0ICs9IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0IC09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAyICkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLnNlY3Rvci5Wb3hlbFR5cGVNYW5hZ2VyLlZveGVsVGFibGVbdGhhdC5zZWN0b3IuRGF0YS5EYXRhW3RoYXQuT2Zmc2V0XV07XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gdGhhdC5zZWN0b3IuRGF0YS5PdGhlckluZm9zW3RoYXQuT2Zmc2V0XTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IG51bGw7XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBHZXROZWFyQmVoaW5kVm94ZWxSZWYoIHRoYXQsIHNlbGYgKVxuXHR7XG5cdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvcjtcblx0XHR0aGF0Lk9mZnNldCA9IHNlbGYuT2Zmc2V0O1xuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1ogPDwgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWCArIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKSApICE9IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0Lk9mZnNldCAtPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWDtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblx0XHRcdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhhdC5PZmZzZXQgKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0aWYoIHRoYXQuc2VjdG9yICE9IG51bGwgKVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IHNlbGYuc2VjdG9yLlZveGVsVHlwZU1hbmFnZXIuVm94ZWxUYWJsZVt0aGF0LnNlY3Rvci5EYXRhLkRhdGFbdGhhdC5PZmZzZXRdXTtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSB0aGF0LnNlY3Rvci5EYXRhLk90aGVySW5mb3NbdGhhdC5PZmZzZXRdO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gbnVsbDtcblx0XHRcdHRoYXQuVm94ZWxFeHRlbnNpb24gPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIEdldE5lYXJBYm92ZVZveGVsUmVmKCB0aGF0LCBzZWxmIClcblx0e1xuXHRcdHRoYXQuc2VjdG9yID0gc2VsZi5zZWN0b3I7XG5cdFx0dGhhdC5PZmZzZXQgPSBzZWxmLk9mZnNldDtcblx0XHRcdGlmKCAoIHRoYXQuT2Zmc2V0ICYgKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZICkgKSAhPSBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DTUFTS19ZIClcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5PZmZzZXQrKztcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdO1xuXHRcdFx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGF0Lk9mZnNldCAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgLSAyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRpZiggdGhhdC5zZWN0b3IgIT0gbnVsbCApXG5cdFx0e1xuXHRcdFx0dGhhdC5UeXBlID0gc2VsZi5zZWN0b3IuVm94ZWxUeXBlTWFuYWdlci5Wb3hlbFRhYmxlW3RoYXQuc2VjdG9yLkRhdGEuRGF0YVt0aGF0Lk9mZnNldF1dO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IHRoYXQuc2VjdG9yLkRhdGEuT3RoZXJJbmZvc1t0aGF0Lk9mZnNldF07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBudWxsO1xuXHRcdFx0dGhhdC5Wb3hlbEV4dGVuc2lvbiA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gR2V0TmVhckJlbG93Vm94ZWxSZWYoIHRoYXQsIHNlbGYgKVxuXHR7XG5cdFx0dGhhdC5zZWN0b3IgPSBzZWxmLnNlY3Rvcjtcblx0XHR0aGF0Lk9mZnNldCA9IHNlbGYuT2Zmc2V0O1xuXHRcdFx0aWYoICggdGhhdC5PZmZzZXQgJiAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NNQVNLX1kgKSApICE9IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0Lk9mZnNldC0tO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGF0LnNlY3RvciA9IHNlbGYuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cdFx0XHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoYXQuT2Zmc2V0ICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdGlmKCB0aGF0LnNlY3RvciAhPSBudWxsIClcblx0XHR7XG5cdFx0XHR0aGF0LlR5cGUgPSBzZWxmLnNlY3Rvci5Wb3hlbFR5cGVNYW5hZ2VyLlZveGVsVGFibGVbdGhhdC5zZWN0b3IuRGF0YS5EYXRhW3RoYXQuT2Zmc2V0XV07XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gdGhhdC5zZWN0b3IuRGF0YS5PdGhlckluZm9zW3RoYXQuT2Zmc2V0XTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoYXQuVHlwZSA9IG51bGw7XG5cdFx0XHR0aGF0LlZveGVsRXh0ZW5zaW9uID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBHZXRWb3hlbFJlZnMoIG5lYXJPbmx5IClcblx0e1xuXHRcdGlmKCBuZWFyT25seSApXG5cdFx0e1xuXHRcdFx0dmFyIHJlc3VsdCA9IG5ldyBhcnJheSg3KTtcblx0XHRcdC8vcmVzdWx0WzBdID0gdGhpcztcblx0XHRcdEdldE5lYXJWb3hlbFJlZiggIHJlc3VsdFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdICAgLCB0aGlzLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgKTtcblx0XHRcdEdldE5lYXJWb3hlbFJlZiggIHJlc3VsdFtWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSAgLCB0aGlzLCBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUICk7XG5cdFx0XHRHZXROZWFyVm94ZWxSZWYoICByZXN1bHRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gICwgdGhpcywgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCApO1xuXHRcdFx0R2V0TmVhclZveGVsUmVmKCAgcmVzdWx0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSAsIHRoaXMsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EICk7XG5cdFx0XHRHZXROZWFyVm94ZWxSZWYoICByZXN1bHRbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gICwgdGhpcywgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSApO1xuXHRcdFx0R2V0TmVhclZveGVsUmVmKCAgcmVzdWx0W1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddICAsIHRoaXMsIFZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHZhciByZXN1bHQgPSBuZXcgVm94ZWxSZWZbMjddO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBHZXRWb3hlbFJlZnMoIFJlc3VsdFNlY3RvcnMsICBSZXN1bHRPZmZzZXRzLCAgbmVhck9ubHkgKVxuXHR7XG5cdFx0Ly9SZXN1bHRTZWN0b3JzID0gbmV3IFZveGVsU2VjdG9yW25lYXJPbmx5ID8gNyA6IDE5XTtcblx0XHQvL1Jlc3VsdE9mZnNldHMgPSBuZXcgdWludFtuZWFyT25seSA/IDcgOiAxOV07XG5cblx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5DRU5URVJdID0gdGhpcy5zZWN0b3I7XG5cdFx0dmFyIG9yaWdpbiA9IHRoaXMuT2Zmc2V0LmNsb25zZSgpOy8vKCB0aGlzLnggPDxWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICsgdGhpcy55ICsgKCB0aGlzLnogPDwgKFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9YICtWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0hJRlRfWSApICk7XG5cdFx0e1xuXHRcdFx0dmFyIGlucHV0ID0gVm94ZWxTZWN0b3IuUmVsYXRpdmVWb3hlbE9mZnNldHNfVW53cmFwcGVkO1xuXHRcdFx0dmFyIG47XG5cdFx0XHR2YXIgaWR4ID0gMDtcblx0XHRcdFJlc3VsdE9mZnNldHNbaWR4XSA9IG9yaWdpbiArIGlucHV0W2lkeF07IGlkeCsrO1xuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vMVxuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vMlxuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vM1xuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vNFxuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vNVxuXHRcdFx0UmVzdWx0T2Zmc2V0c1tpZHhdID0gb3JpZ2luICsgaW5wdXRbaWR4XTsgaWR4Kys7IC8vNlxuXHRcdFx0aWYoICFuZWFyT25seSApIGZvciggbiA9IDA7IG4gPCAyMDsgbisrICkgeyBSZXN1bHRPZmZzZXRzW2lkeF0gPSBvcmlnaW4gKyBpbnB1dFtpZHhdOyBpZHgrKzsgfVxuXG5cdFx0XHRpZiggdGhpcy54ID09IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF1cblx0XHRcdFx0XHRcdD0gdGhpcy5zZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDEsIDBdXSArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggKSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1k7XG5cdFx0XHRcdGlmKCAhbmVhck9ubHkgKSBmb3IoIG4gPSAxOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMSwgbl1dICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWCApICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoIHRoaXMueCA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggLSAxICkgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IHRoaXMuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxLCAwXV0gLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICkgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0XHRpZiggIW5lYXJPbmx5ICkgZm9yKCBuID0gMTsgbiA8IDk7IG4rKyApIFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxLCBuXV0gLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICkgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0fVxuXHRcdFx0aWYoIHRoaXMueSA9PSAwIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IHRoaXMuc2VjdG9yOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddID0gdGhpcy5zZWN0b3IubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxXTtcblx0XHRcdFx0UmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVyAtIDEsIDBdXSArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKTtcblx0XHRcdFx0aWYoICFuZWFyT25seSApIGZvciggbiA9IDE7IG4gPCA5OyBuKysgKSBSZXN1bHRPZmZzZXRzW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMSwgbl1dICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSApO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiggdGhpcy55ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDEgKSApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUgLSAxLCAwXV0gLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICk7XG5cdFx0XHRcdGlmKCAhbmVhck9ubHkgKSBmb3IoIG4gPSAxOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDEsIG5dXSAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IHRoaXMuc2VjdG9yOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddID0gdGhpcy5zZWN0b3I7XG5cdFx0XHR9XG5cblx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblx0XHRcdFx0UmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxLCAwXV0gKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aICkgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWDtcblx0XHRcdFx0aWYoICFuZWFyT25seSApIGZvciggbiA9IDE7IG4gPCA5OyBuKysgKSBSZXN1bHRPZmZzZXRzW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORCAtIDEsIG5dXSArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogKSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCAtIDFdOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRSZXN1bHRPZmZzZXRzW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMSwgMF1dIC09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiApICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRcdGlmKCAhbmVhck9ubHkgKSBmb3IoIG4gPSAxOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCAtIDEsIG5dXSAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogKSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdID0gdGhpcy5zZWN0b3I7IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdID0gdGhpcy5zZWN0b3I7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHRlc3QgdG8gbWFrZSBzdXJlIHJlc3VsdGluZyBvZmZzZXRzIGFyZSB3aXRoaW4gcmFuZ2UuXG5cdFx0XHQvL2ZvciggbiA9IDA7IG4gPCAyNzsgbisrICkgaWYoIFJlc3VsdE9mZnNldHNbbl0gJiAweEZGRkY4MDAwICkgRGVidWdCcmVhaygpO1xuXHRcdH1cblx0XHRpZiggbmVhck9ubHkgKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0aWYoIHRoaXMueCA9PSAwIClcblx0XHR7XG5cdFx0XHRpZiggdGhpcy55ID09IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKCB0aGlzLnkgPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMSApIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gbGVmdCBib3VuZCwgdG9wIGJvdW5kLCBmcm9udCBub2JvdW5kXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdID0gdGhpcy5zZWN0b3I7XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdHtcblx0XHRcdFx0Ly8gbGVmdCBib3VuZCwgYWJvdmUvYmVsb3cgdW5ib3VuZFxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0aWYoIHRoaXMueiA9PSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSAhPSBudWxsID8gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV0gOiBudWxsO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIGxlZnQgYm91bmQsIHkgdW5ib3VuZCB6IHVuYm91bmRcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmKCB0aGlzLnggPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YIC0gMSApIClcblx0XHR7XG5cdFx0XHRpZiggdGhpcy55ID09IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxXTtcblx0XHRcdFx0aWYoIHRoaXMueiA9PSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EIC0gMV07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVyAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiggdGhpcy55ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDEgKSApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0e1xuXHRcdFx0Ly8gbGVmdC9yaWdodCB1bmJvdW5kLi4uIGxlZnQgYW5kIHJpZ2h0IHNob3VsZCBuZXZlciBiZSB0ZXJtcyBvZiBlcXVhbGl0eVxuXHRcdFx0aWYoIHRoaXMueSA9PSAwIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EIC0gMV07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiggdGhpcy55ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDEgKSApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0aWYoIHRoaXMueiA9PSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCB0aGlzLnogPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMSApIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF07XG5cdFx0XHR9XG5cdFx0XHRlbHNlICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdHtcblx0XHRcdFx0Ly8geCBub3Qgb24gYm91bmQsIHkgbm90IG9uIGJvdW5kLlxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gcmVzdWx0IHNldCBpcyBvbmx5IDkgKDN4MyBmYWNlKVxuXHRmdW5jdGlvbiBHZXRWb3hlbFJlZnMoICBSZXN1bHRTZWN0b3JzLCAgUmVzdWx0T2Zmc2V0cywgZmFjZU9ubHkgKVxuXHR7XG5cdFx0dmFyIHJlc3VsdCA9IHtcblx0XHRcdFJlc3VsdFNlY3RvcnMgOiBuZXcgQXJyYXkoMjcpLFxuXHRcdFx0UmVzdWx0T2Zmc2V0cyA6IG5ldyBBcnJheSgyNylcblx0XHR9XG5cblx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuSU5DRU5URVJdID0gdGhpcy5zZWN0b3I7XG5cdFx0dmFyIG9yaWdpbiA9ICggdGhpcy54IDw8IFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9ZICkgKyB0aGlzLnkgKyAoIHRoaXMueiA8PCAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSElGVF9YICsgVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NISUZUX1kgKSApO1xuXHRcdHtcblx0XHRcdHZhciBpbnB1dCA9IFZveGVsU2VjdG9yLlJlbGF0aXZlVm94ZWxPZmZzZXRzX1Vud3JhcHBlZDtcblx0XHRcdHZhciBuO1xuXHRcdFx0Zm9yKCBuID0gMDsgbiA8IDk7IG4rKyApXG5cdFx0XHRcdFJlc3VsdE9mZnNldHNbbl0gPSAodWludCkob3JpZ2luICsgVm94ZWxTZWN0b3IuUmVsYXRpdmVWb3hlbE9mZnNldHNfVW53cmFwcGVkW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tmYWNlT25seSwgbl1dKTtcblxuXHRcdFx0c3dpdGNoKCBmYWNlT25seSApXG5cdFx0XHR7XG5cdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUOlxuXHRcdFx0XHRcdGlmKCB0aGlzLnggPT0gMCApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Zm9yKCBuID0gMDsgbiA8IDk7IG4rKyApXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbbl0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF0gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0XHRcdFx0UmVzdWx0T2Zmc2V0c1tuXSArPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggKSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1k7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUOlxuXHRcdFx0XHRcdGlmKCB0aGlzLnggPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YIC0gMSApIClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdID0gdGhpcy5zZWN0b3I7IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFx0Zm9yKCBuID0gMDsgbiA8IDk7IG4rKyApIFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxLCBuXV0gLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YICkgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdID0gdGhpcy5zZWN0b3I7IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF0gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRTpcblx0XHRcdFx0XHRpZiggdGhpcy55ID09IDAgKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSA9IHRoaXMuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cdFx0XHRcdFx0XHRSZXN1bHRPZmZzZXRzW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMSwgMF1dICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSApO1xuXHRcdFx0XHRcdFx0Zm9yKCBuID0gMDsgbiA8IDk7IG4rKyApIFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1cgLSAxLCBuXV0gKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdID0gdGhpcy5zZWN0b3I7IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVzpcblx0XHRcdFx0XHRpZiggdGhpcy55ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAtIDEgKSApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IHRoaXMuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV07IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0XHRcdFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUgLSAxLCAwXV0gLT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICk7XG5cdFx0XHRcdFx0XHRmb3IoIG4gPSAwOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDEsIG5dXSAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORDpcblx0XHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0gPSB0aGlzLnNlY3Rvci5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblx0XHRcdFx0XHRcdFJlc3VsdE9mZnNldHNbVm94ZWxTZWN0b3IuVm94ZWxGYWNlR3JvdXBzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EIC0gMSwgMF1dICs9ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiApICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRcdFx0XHRmb3IoIG4gPSAxOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxLCBuXV0gKz0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aICkgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0gPSB0aGlzLnNlY3RvcjsgUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRDpcblx0XHRcdFx0XHRpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSA9IHRoaXMuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMV07IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFx0XHRSZXN1bHRPZmZzZXRzW1ZveGVsU2VjdG9yLlZveGVsRmFjZUdyb3Vwc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEIC0gMSwgMF1dIC09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiApICogVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1g7XG5cdFx0XHRcdFx0XHRmb3IoIG4gPSAxOyBuIDwgOTsgbisrICkgUmVzdWx0T2Zmc2V0c1tWb3hlbFNlY3Rvci5Wb3hlbEZhY2VHcm91cHNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRCAtIDEsIG5dXSAtPSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogKSAqIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1kgKiBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9YO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSA9IHRoaXMuc2VjdG9yOyBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdC8vIHRlc3QgdG8gbWFrZSBzdXJlIHJlc3VsdGluZyBvZmZzZXRzIGFyZSB3aXRoaW4gcmFuZ2UuXG5cdFx0XHQvL2ZvciggbiA9IDA7IG4gPCAyNzsgbisrICkgaWYoIFJlc3VsdE9mZnNldHNbbl0gJiAweEZGRkY4MDAwICkgRGVidWdCcmVhaygpO1xuXHRcdH1cblxuXG5cdFx0aWYoIHRoaXMueCA9PSAwIClcblx0XHR7XG5cdFx0XHRpZiggdGhpcy55ID09IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKCB0aGlzLnkgPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMSApIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRSAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gbGVmdCBib3VuZCwgdG9wIGJvdW5kLCBmcm9udCBub2JvdW5kXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXSA9IHRoaXMuc2VjdG9yO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdID0gdGhpcy5zZWN0b3I7XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdHtcblx0XHRcdFx0Ly8gbGVmdCBib3VuZCwgYWJvdmUvYmVsb3cgdW5ib3VuZFxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdID0gdGhpcy5zZWN0b3I7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0aWYoIHRoaXMueiA9PSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gbGVmdCBib3VuZCwgeSB1bmJvdW5kIHogdW5ib3VuZFxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoIHRoaXMueCA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ggLSAxICkgKVxuXHRcdHtcblx0XHRcdGlmKCB0aGlzLnkgPT0gMCApXG5cdFx0XHR7XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPVyAtIDFdO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiggdGhpcy56ID09ICggVm94ZWxTZWN0b3IuWlZPWEVMQkxPQ1NJWkVfWiAtIDEgKSApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKCB0aGlzLnkgPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMSApIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXSA9IHRoaXMuc2VjdG9yLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFIC0gMV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10gPSB0aGlzLnNlY3Rvcjtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCB0aGlzLnogPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMSApIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkUgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUIC0gMV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0aWYoIHRoaXMueiA9PSAwIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVCAtIDFdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCB0aGlzLnogPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMSApIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblxuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR7XG5cdFx0XHQvLyBsZWZ0L3JpZ2h0IHVuYm91bmQuLi4gbGVmdCBhbmQgcmlnaHQgc2hvdWxkIG5ldmVyIGJlIHRlcm1zIG9mIGVxdWFsaXR5XG5cdFx0XHRpZiggdGhpcy55ID09IDAgKVxuXHRcdFx0e1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdGlmKCB0aGlzLnogPT0gMCApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXS5uZWFyX3NlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkQgLSAxXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCB0aGlzLnogPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9aIC0gMSApIClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV10ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRdO1xuXG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9CRUhJTkRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKCB0aGlzLnkgPT0gKCBWb3hlbFNlY3Rvci5aVk9YRUxCTE9DU0laRV9ZIC0gMSApIClcblx0XHRcdHtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV10gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRpZiggdGhpcy56ID09IDAgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVdLm5lYXJfc2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORCAtIDFdO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XXTtcblxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIHRoaXMueiA9PSAoIFZveGVsU2VjdG9yLlpWT1hFTEJMT0NTSVpFX1ogLSAxICkgKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV0ubmVhcl9zZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQUQgLSAxXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFXTtcblx0XHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV07XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV107XG5cdFx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1ddO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9MRUZUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfUklHSFRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0FIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BQk9WRV9BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVMT1dfQkVISU5EXTtcblx0XHRcdH1cblx0XHRcdGVsc2UgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0e1xuXHRcdFx0XHQvLyB4IG5vdCBvbiBib3VuZCwgeSBub3Qgb24gYm91bmQuXG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0FCT1ZFXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1ddID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuUklHSFRfQUJPVkVdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF07XG5cblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX0xFRlRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEX1JJR0hUXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUhJTkRfTEVGVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF9SSUdIVF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblxuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFTE9XX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5CRUxPV19CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQUJPVkVfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkxFRlRfQkVMT1dfQUhFQURdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkFIRUFEXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0FIRUFEXSA9IFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5BSEVBRF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5SSUdIVF9CRUxPV19BSEVBRF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQUhFQURdO1xuXHRcdFx0XHRSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuTEVGVF9BQk9WRV9CRUhJTkRdID0gUmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLkJFSElORF07XG5cdFx0XHRcdFJlc3VsdFNlY3RvcnNbVm94ZWxhcml1bS5SZWxhdGl2ZVZveGVsT3Jkcy5MRUZUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0FCT1ZFX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdFx0UmVzdWx0U2VjdG9yc1tWb3hlbGFyaXVtLlJlbGF0aXZlVm94ZWxPcmRzLlJJR0hUX0JFTE9XX0JFSElORF0gPSBSZXN1bHRTZWN0b3JzW1ZveGVsYXJpdW0uUmVsYXRpdmVWb3hlbE9yZHMuQkVISU5EXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbiIsIlxyXG5cclxuVm94ZWxhcml1bS5Tb3J0aW5nVHJlZSA9IGZ1bmN0aW9uKENhcGFjaXR5KXtcclxuICAgIHZhciBzb3J0ZXIgPSB7XHJcblx0XHQvLy8gPHN1bW1hcnk+XHJcblx0XHQvLy8gc3RvcmFnZSB0eXBlIGZvciBTb3J0aW5nIFRyZWVcclxuXHRcdC8vLyA8L3N1bW1hcnk+XHJcblxyXG5cdFx0c3RvcmFnZSA6IFtdLFxyXG5cdFx0cm9vdCA6IC0xLFxyXG5cdFx0dXNlZCA6IDAsXHJcbiAgICAgICAgYXV0b0JhbGFuY2UgOiBmYWxzZSxcclxuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCkgeyB0aGlzLnJvb3QgPSAtMTsgdGhpcy51c2VkID0gMDsgfSxcclxuICAgICAgICBhZGQgOiBBZGQsXHJcbiAgICAgICAgYmFsYW5jZSA6IEJhbGFuY2UsXHJcbiAgICAgICAgZm9yRWFjaCA6IGZvcmVhY2hcclxuICAgIH07XHJcblxyXG5cdHN0b3JhZ2UgPSBbXTtcclxuICAgIGZvciggdmFyIG4gPSAwOyBuIDwgQ2FwYWNpdDsgbisrIClcclxuICAgICAgICBzdG9yYWdlLnB1c2goIHsga2V5IDogMCwgdmFsdWUgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgIGxlc3NlciA6IDAsIGdyZWF0ZXIgOiAwLCBwYXJlbnQgOiAwLCBjaGlsZHJlbiA6IDBcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgIHJldHVybiBzb3J0ZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIER1bXBUcmVlKCBjdXJyZW50LCBsZXZlbCApIHtcclxuXHRpZiggY3VycmVudCA9PSAtMSApIHtcclxuXHRcdGlmKCByb290ID09IC0xIClcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0Y29uc29sZS5sb2coIFwiU3RhcnQgVHJlZSBEdW1wXCIgKTtcclxuXHRcdER1bXBUcmVlKCByb290LCBsZXZlbCArIDEgKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aWYoIHRoaXMuc3RvcmFnZVtjdXJyZW50XS5sZXNzZXIgIT0gLTEgKSB7XHJcblx0XHRcdER1bXBUcmVlKCB0aGlzLnN0b3JhZ2VbY3VycmVudF0ubGVzc2VyLCBsZXZlbCArIDEgKTtcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKCBcIkN1cjogXCIgKyBjdXJyZW50ICsgXCIgUGFyOiBcIiArIHRoaXMuc3RvcmFnZVtjdXJyZW50XS5wYXJlbnRcclxuXHRcdFx0KyBcIiBMZXM6IFwiICsgdGhpcy5zdG9yYWdlW2N1cnJlbnRdLmxlc3NlclxyXG5cdFx0XHQrIFwiIEdydDogXCIgKyB0aGlzLnN0b3JhZ2VbY3VycmVudF0uZ3JlYXRlclxyXG5cdFx0XHQrIFwiIExldjogXCIgKyBsZXZlbCArIFwiIGNsZDogXCIgKyB0aGlzLnN0b3JhZ2VbY3VycmVudF0uY2hpbGRyZW4gKyBcIiAgS2V5OiBcIiArIHRoaXMuc3RvcmFnZVtjdXJyZW50XS5rZXkgKyBcIiB2YWw6IFwiICsgdGhpcy5zdG9yYWdlW2N1cnJlbnRdLnZhbHVlICk7XHJcblx0XHRpZiggdGhpcy5zdG9yYWdlW2N1cnJlbnRdLmdyZWF0ZXIgIT0gLTEgKSB7XHJcblx0XHRcdER1bXBUcmVlKCB0aGlzLnN0b3JhZ2VbY3VycmVudF0uZ3JlYXRlciwgbGV2ZWwgKyAxICk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUm90YXRlTGVmdCggbm9kZSwgbm9kZV9pZCApXHJcbntcclxuXHRpZiggbm9kZS5wYXJlbnQgPT0gLTEgKVxyXG5cdHtcclxuXHRcdHJvb3QgPSBub2RlLmdyZWF0ZXI7XHJcblx0XHR0aGlzLnN0b3JhZ2Vbcm9vdF0ucGFyZW50ID0gLTE7XHJcblx0fVxyXG5cdGVsc2VcclxuXHR7XHJcblx0XHRpZiggdGhpcy5zdG9yYWdlW25vZGUucGFyZW50XS5sZXNzZXIgPT0gbm9kZV9pZCApXHJcblx0XHRcdHRoaXMuc3RvcmFnZVtub2RlLnBhcmVudF0ubGVzc2VyID0gbm9kZS5ncmVhdGVyO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnN0b3JhZ2Vbbm9kZS5wYXJlbnRdLmdyZWF0ZXIgPSBub2RlLmdyZWF0ZXI7XHJcblx0XHR0aGlzLnN0b3JhZ2Vbbm9kZS5ncmVhdGVyXS5wYXJlbnQgPSBub2RlLnBhcmVudDtcclxuXHR9XHJcblx0bm9kZS5jaGlsZHJlbiAtPSAoIHRoaXMuc3RvcmFnZVtub2RlLmdyZWF0ZXJdLmNoaWxkcmVuICsgMSApO1xyXG5cdG5vZGUucGFyZW50ID0gbm9kZS5ncmVhdGVyO1xyXG5cdHZhciB0ZW1wID0gdGhpcy5zdG9yYWdlW25vZGUuZ3JlYXRlcl0ubGVzc2VyO1xyXG5cdG5vZGUuZ3JlYXRlciA9IHRlbXA7XHJcblx0dGhpcy5zdG9yYWdlW25vZGUucGFyZW50XS5sZXNzZXIgPSBub2RlX2lkO1xyXG5cdGlmKCB0ZW1wID49IDAgKVxyXG5cdHtcclxuXHRcdHRoaXMuc3RvcmFnZVt0ZW1wXS5wYXJlbnQgPSBub2RlX2lkO1xyXG5cdFx0dGhpcy5zdG9yYWdlW25vZGUucGFyZW50XS5jaGlsZHJlbiAtPSAoIHRoaXMuc3RvcmFnZVt0ZW1wXS5jaGlsZHJlbiArIDEgKTtcclxuXHRcdG5vZGUuY2hpbGRyZW4gKz0gKCB0aGlzLnN0b3JhZ2VbdGVtcF0uY2hpbGRyZW4gKyAxICk7XHJcblx0fVxyXG5cdHRoaXMuc3RvcmFnZVtub2RlLnBhcmVudF0uY2hpbGRyZW4gKz0gKCBub2RlLmNoaWxkcmVuICsgMSApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSb3RhdGVSaWdodCggbm9kZSwgbm9kZV9pZCApXHJcbntcclxuXHRpZiggbm9kZS5wYXJlbnQgPT0gLTEgKVxyXG5cdHtcclxuXHRcdHJvb3QgPSBub2RlLmxlc3NlcjtcclxuXHRcdHRoaXMuc3RvcmFnZVtyb290XS5wYXJlbnQgPSAtMTtcclxuXHR9XHJcblx0ZWxzZVxyXG5cdHtcclxuXHRcdGlmKCB0aGlzLnN0b3JhZ2Vbbm9kZS5wYXJlbnRdLmxlc3NlciA9PSBub2RlX2lkIClcclxuXHRcdFx0dGhpcy5zdG9yYWdlW25vZGUucGFyZW50XS5sZXNzZXIgPSBub2RlLmxlc3NlcjtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGhpcy5zdG9yYWdlW25vZGUucGFyZW50XS5ncmVhdGVyID0gbm9kZS5sZXNzZXI7XHJcblx0XHR0aGlzLnN0b3JhZ2Vbbm9kZS5sZXNzZXJdLnBhcmVudCA9IG5vZGUucGFyZW50O1xyXG5cdH1cclxuXHRub2RlLmNoaWxkcmVuIC09ICggdGhpcy5zdG9yYWdlW25vZGUubGVzc2VyXS5jaGlsZHJlbiArIDEgKTtcclxuXHRub2RlLnBhcmVudCA9IG5vZGUubGVzc2VyO1xyXG5cdHZhciB0ZW1wID0gdGhpcy5zdG9yYWdlW25vZGUubGVzc2VyXS5ncmVhdGVyO1xyXG5cdG5vZGUubGVzc2VyID0gdGVtcDtcclxuXHR0aGlzLnN0b3JhZ2Vbbm9kZS5wYXJlbnRdLmdyZWF0ZXIgPSBub2RlX2lkOyAgLy8gYWN0dWFsbHkgb2xkbm9kZS5sZXNzZXJcclxuXHRpZiggdGVtcCA+PSAwIClcclxuXHR7XHJcblx0XHR0aGlzLnN0b3JhZ2VbdGVtcF0ucGFyZW50ID0gbm9kZV9pZDtcclxuXHRcdHRoaXMuc3RvcmFnZVtub2RlLnBhcmVudF0uY2hpbGRyZW4gLT0gKCB0aGlzLnN0b3JhZ2VbdGVtcF0uY2hpbGRyZW4gKyAxICk7XHJcblx0XHRub2RlLmNoaWxkcmVuICs9ICggdGhpcy5zdG9yYWdlW3RlbXBdLmNoaWxkcmVuICsgMSApO1xyXG5cdH1cclxuXHR0aGlzLnN0b3JhZ2Vbbm9kZS5wYXJlbnRdLmNoaWxkcmVuICs9ICggbm9kZS5jaGlsZHJlbiArIDEgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQmFsYW5jZSggbm9kZSwgbm9kZV9pZCApXHJcbntcclxuXHRpZiggIXRoaXMuQXV0b0JhbGFuY2UgKSByZXR1cm47XHJcbiAgICB2YXIgbGVmdF9jaGlsZHJlbiA9IG5vZGUubGVzc2VyID09IC0xID8gMCA6ICggdGhpcy5zdG9yYWdlW25vZGUubGVzc2VyXS5jaGlsZHJlbiArIDEgKTtcclxuXHR2YXIgcmlnaHRfY2hpbGRyZW4gPSBub2RlLmdyZWF0ZXIgPT0gLTEgPyAwIDogKCB0aGlzLnN0b3JhZ2Vbbm9kZS5ncmVhdGVyXS5jaGlsZHJlbiArIDEgKTtcclxuXHRpZiggbGVmdF9jaGlsZHJlbiA9PSAwIClcclxuXHR7XHJcblx0XHRpZiggcmlnaHRfY2hpbGRyZW4gPiAxIClcclxuICAgICAgICAgICAgUm90YXRlTGVmdCggbm9kZSwgbm9kZV9pZCApO1xyXG5cdH1cclxuXHRlbHNlIGlmKCByaWdodF9jaGlsZHJlbiA9PSAwIClcclxuXHR7XHJcblx0XHRpZiggbGVmdF9jaGlsZHJlbiA+IDEgKVxyXG5cdFx0e1xyXG5cdFx0XHRSb3RhdGVSaWdodCggbm9kZSwgbm9kZV9pZCApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmKCByaWdodF9jaGlsZHJlbiA+ICggbGVmdF9jaGlsZHJlbiAqIDMgKSApXHJcblx0e1xyXG5cdFx0Um90YXRlTGVmdCggbm9kZSwgbm9kZV9pZCApO1xyXG5cdFx0QmFsYW5jZSggc3RvcmFnZVtub2RlLmxlc3Nlcl0sIG5vZGUubGVzc2VyICk7XHJcblx0fVxyXG5cdGVsc2UgaWYoIGxlZnRfY2hpbGRyZW4gPiAoIHJpZ2h0X2NoaWxkcmVuICogMyApIClcclxuXHR7XHJcblx0XHRSb3RhdGVSaWdodCggbm9kZSwgbm9kZV9pZCApO1xyXG5cdFx0QmFsYW5jZSggc3RvcmFnZVtub2RlLmdyZWF0ZXJdLCBub2RlLmdyZWF0ZXIgKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZE5vZGUoIG5vZGUsICBwYXJlbnRfaWQsIEssICBWICkge1xyXG5cdG5vZGUua2V5ID0gSztcclxuXHRub2RlLnZhbHVlID0gVjtcclxuXHRub2RlLmxlc3NlciA9IC0xO1xyXG5cdG5vZGUuZ3JlYXRlciA9IC0xO1xyXG5cdG5vZGUucGFyZW50ID0gcGFyZW50X2lkO1xyXG5cdG5vZGUuY2hpbGRyZW4gPSAwO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gU2NhbkFkZCggbm9kZSwgbm9kZV9pZCwgSywgViApXHJcbntcclxuXHRpZiggSyA8IG5vZGUua2V5IClcclxuXHR7XHJcblx0XHRpZiggbm9kZS5sZXNzZXIgPT0gLTEgKVxyXG5cdFx0e1xyXG5cdFx0XHRub2RlLmNoaWxkcmVuKys7XHJcblx0XHRcdHRoaXMuYWRkTm9kZSggc3RvcmFnZVt1c2VkXSwgbm9kZV9pZCwgSywgViApO1xyXG5cdFx0XHRub2RlLmxlc3NlciA9IHVzZWQ7XHJcblx0XHRcdHVzZWQrKztcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0bm9kZS5jaGlsZHJlbisrO1xyXG5cdFx0XHRTY2FuQWRkKCBzdG9yYWdlW25vZGUubGVzc2VyXSwgbm9kZS5sZXNzZXIsIEssIFYgKTtcclxuXHRcdFx0QmFsYW5jZSggbm9kZSwgbm9kZV9pZCApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmKCBLID49IG5vZGUua2V5IClcclxuXHR7XHJcblx0XHRpZiggbm9kZS5ncmVhdGVyID09IC0xIClcclxuXHRcdHtcclxuXHRcdFx0bm9kZS5jaGlsZHJlbisrO1xyXG5cdFx0XHR0aGlzLmFkZE5vZGUoIHN0b3JhZ2VbdXNlZF0sIG5vZGVfaWQsIEssIFYgKTtcclxuXHRcdFx0bm9kZS5ncmVhdGVyID0gdXNlZDtcclxuXHRcdFx0dXNlZCsrO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHRub2RlLmNoaWxkcmVuKys7XHJcblx0XHRcdFNjYW5BZGQoIHN0b3JhZ2Vbbm9kZS5ncmVhdGVyXSwgbm9kZS5ncmVhdGVyLCBLLCBWICk7XHJcblx0XHRcdEJhbGFuY2UoIG5vZGUsIG5vZGVfaWQgKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFkZCggSywgViApXHJcbntcclxuXHRpZiggcm9vdCA9PSAtMSApXHJcblx0e1xyXG5cdFx0cm9vdCA9IDA7XHJcblx0XHR0aGlzLmFkZE5vZGUoIHRoaXMuc3RvcmFnZVtyb290XSwgLTEsIEssIFYgKTtcclxuXHRcdHVzZWQrKztcclxuXHR9XHJcblx0ZWxzZVxyXG5cdFx0U2NhbkFkZCggdGhpcy5zdG9yYWdlW3Jvb3RdLCByb290LCBLLCBWICk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBmb3JlYWNoKCBjYWxsYmFjayApIHtcclxuICAgIHZhciBjdXJyZW50ID0gLTE7XHJcblxyXG5cdHZhciBuZXh0O1xyXG4gICAgd2hpbGUoIHRydWUgKSB7XHJcblx0XHRpZiggY3VycmVudCA9PSAtMSApXHJcblx0XHR7XHJcblx0XHRcdGN1cnJlbnQgPSBUcmVlLnJvb3Q7XHJcblx0XHRcdGlmKCBjdXJyZW50ID09IC0xIClcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdHdoaWxlKCAoIG5leHQgPSBUcmVlLnN0b3JhZ2VbY3VycmVudF0ubGVzc2VyICkgIT0gLTEgKVxyXG5cdFx0XHRcdGN1cnJlbnQgPSBuZXh0O1xyXG4gICAgICAgICAgICBjYWxsYmFjayggdGhpcy5zdG9yYWdlW2N1cnJlbnRdLnZhbHVlICk7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiggKCBuZXh0ID0gVHJlZS5zdG9yYWdlW2N1cnJlbnRdLmdyZWF0ZXIgKSAhPSAtMSApXHJcblx0XHR7XHJcblx0XHRcdGN1cnJlbnQgPSBuZXh0O1xyXG5cdFx0XHR3aGlsZSggKCBuZXh0ID0gVHJlZS5zdG9yYWdlW2N1cnJlbnRdLmxlc3NlciApICE9IC0xIClcclxuXHRcdFx0XHRjdXJyZW50ID0gbmV4dDtcclxuICAgICAgICAgICAgY2FsbGJhY2soIHRoaXMuc3RvcmFnZVtjdXJyZW50XS52YWx1ZSApO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuXHRcdH1cclxuXHJcblx0XHRlbHNlIHdoaWxlKCAoIG5leHQgPSBUcmVlLnN0b3JhZ2VbY3VycmVudF0ucGFyZW50ICkgIT0gLTEgKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBjYW1lIGZyb20gbGVzc2VyLCBzbyB0aGlzIGlzIG5leHQgbGFyZ2VyLlxyXG5cdFx0XHRpZiggVHJlZS5zdG9yYWdlW25leHRdLmxlc3NlciA9PSBjdXJyZW50IClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGN1cnJlbnQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soIHRoaXMuc3RvcmFnZVtjdXJyZW50XS52YWx1ZSApO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGN1cnJlbnQgPSBuZXh0O1xyXG5cdFx0fVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuVm94ZWxhcml1bS5UZXh0dXJlQXRsYXMgPSB7XHJcbiAgICB0ZXh0dXJlIDogbnVsbCxcclxuICAgIHRleHR1cmVfY291bnQgOiAwLFxyXG4gICAgdGV4dHVyZV9zaXplIDogMCxcclxuICAgIHJlbmRlclRhcmdldCA6IG51bGwsXHJcbiAgICBjYW52YXMgOiBudWxsLFxyXG4gICAgY29udGV4dCA6IG51bGwsXHJcbiAgICB0ZXh0dXJlIDogbnVsbCxcclxuICAgIHhfb2ZzIDogMCxcclxuICAgIHlfb2ZzIDogMCxcclxuICAgIGluaXQgOiBmdW5jdGlvbiggY291bnQsIHNpemUgKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlX2NvdW50ID0gY291bnQ7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlX3NpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSAyMDQ4O1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDIwNDg7XHJcbiAgICBcdHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZT1cImNsZWFyXCI7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsMCwyMDQ4LDIwNDgpO1xyXG4gICAgICAgIC8vdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgyMCwyMCwxMDAsNTApO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKHRoaXMuY2FudmFzKVxyXG4gICAgICAgIHRoaXMudGV4dHVyZS5tYWdGaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyO1xyXG4gICAgXHQvL3RoaXMudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgfSxcclxuICAgIGFkZCA6IGZ1bmN0aW9uKCBpbWFnZSApXHJcbiAgIHtcclxuICAgICAgIHZhciBjb29yZHMgPSB7XHJcbiAgICAgICAgICAgdXZzIDogbmV3IEFycmF5KDgpLFxyXG4gICAgICAgICAgIHV2X2FycmF5IDogbnVsbCxcclxuICAgICAgICAgICBjb29yZCA6IHsgcG9zaXRpb24gOiB7IHggOiAwLCB5IDogMCB9LCBzaXplIDoge3ggOiAwLHk6MCB9IH1cclxuICAgICAgIH1cclxuICAgICAgIGlmKCB0aGlzLnlfb2ZzID49IDMyIClcclxuICAgICAgIHtcclxuICAgICAgICAgICBmb3IoICB2YXIgbiA9IDA7IG4gPCA4OyBuKysgKVxyXG4gICAgICAgICAgICAgICB1dnNbbl0gPSAwO1xyXG4gICAgICAgICAgIGNvb3Jkcy5jb29yZC5wb3NpdGlvbi54ID0gMDtcclxuICAgICAgICAgICBjb29yZHMuY29vcmQucG9zaXRpb24ueSA9IDA7XHJcbiAgICAgICAgICAgY29vcmRzLmNvb3JkLnNpemUueCA9IDA7XHJcbiAgICAgICAgICAgY29vcmRzLmNvb3JkLnNpemUueSA9IDA7XHJcbiAgICAgICAgICAgcmV0dXJuIGNvb3JkcztcclxuICAgICAgIH1cclxuICAgICAgIHZhciBzY2FsYXIgPSAxLjAgLyAoIHRoaXMudGV4dHVyZV9jb3VudCk7XHJcbiAgICAgICAvL0xvZy5sb2coIFwib3V0cHV0IHRleHR1cmUgdG8gYXRsYXMuLi4gezB9IHsxfVwiLCB4X29mcywgeV9vZnMgKTtcclxuICAgICAgIGNvb3Jkcy5jb29yZC5wb3NpdGlvbi54ID0gKCBzY2FsYXIgKSAqIHRoaXMueF9vZnM7XHJcbiAgICAgICBjb29yZHMuY29vcmQucG9zaXRpb24ueSA9ICggc2NhbGFyICkgKiB0aGlzLnlfb2ZzO1xyXG4gICAgICAgY29vcmRzLmNvb3JkLnNpemUueCA9ICggc2NhbGFyICk7XHJcbiAgICAgICBjb29yZHMuY29vcmQuc2l6ZS55ID0gKCBzY2FsYXIgKTtcclxuXHJcbiAgICAgICBjb29yZHMudXZzWzAgKiAyICsgMF0gPSAoIHNjYWxhciApICogdGhpcy54X29mcztcclxuICAgICAgIGNvb3Jkcy51dnNbMCAqIDIgKyAxXSA9IDEtKCggc2NhbGFyICkgKiB0aGlzLnlfb2ZzKTtcclxuICAgICAgIGNvb3Jkcy51dnNbMSAqIDIgKyAwXSA9IGNvb3Jkcy51dnNbMCAqIDIgKyAwXSArICggc2NhbGFyICk7XHJcbiAgICAgICBjb29yZHMudXZzWzEgKiAyICsgMV0gPSBjb29yZHMudXZzWzAgKiAyICsgMV07XHJcbiAgICAgICBjb29yZHMudXZzWzIgKiAyICsgMF0gPSBjb29yZHMudXZzWzAgKiAyICsgMF07XHJcbiAgICAgICBjb29yZHMudXZzWzIgKiAyICsgMV0gPSAoY29vcmRzLnV2c1swICogMiArIDFdIC0gKCBzY2FsYXIgKSk7XHJcbiAgICAgICBjb29yZHMudXZzWzMgKiAyICsgMF0gPSBjb29yZHMudXZzWzEgKiAyICsgMF07XHJcbiAgICAgICBjb29yZHMudXZzWzMgKiAyICsgMV0gPSBjb29yZHMudXZzWzIgKiAyICsgMV07XHJcblxyXG4gICAgICAgdmFyIGluX3V2cyA9IGNvb3Jkcy51dnM7XHJcbiAgICAgICBjb29yZHMudXZfYXJyYXkgPSBbaW5fdXZzWzEqMiswXVxyXG4gICAgICAgICAgICAgICAgICAgLGluX3V2c1sxKjIrMV1cclxuICAgICAgICAgICAgICAgICAgICxpbl91dnNbMCoyKzBdXHJcbiAgICAgICAgICAgICAgICAgICAsaW5fdXZzWzAqMisxXVxyXG4gICAgICAgICAgICAgICAgICAgLGluX3V2c1szKjIrMF1cclxuICAgICAgICAgICAgICAgICAgICxpbl91dnNbMyoyKzFdXHJcbiAgICAgICAgICAgICAgICAgICAsaW5fdXZzWzIqMiswXVxyXG4gICAgICAgICAgICAgICAgICAgLGluX3V2c1syKjIrMV1cclxuICAgICAgICAgICAgICAgXTtcclxuXHJcblxyXG4gICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSggaW1hZ2UsIHRoaXMudGV4dHVyZV9zaXplICogdGhpcy54X29mcywgdGhpcy50ZXh0dXJlX3NpemUgKiB0aGlzLnlfb2ZzLCB0aGlzLnRleHR1cmVfc2l6ZSwgdGhpcy50ZXh0dXJlX3NpemUgKVxyXG5cclxuICAgICAgIHRoaXMudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgdGhpcy54X29mcysrO1xyXG4gICAgICAgaWYoIHRoaXMueF9vZnMgPT0gdGhpcy50ZXh0dXJlX2NvdW50IClcclxuICAgICAgIHtcclxuICAgICAgICAgICB0aGlzLnhfb2ZzID0gMDtcclxuICAgICAgICAgICB0aGlzLnlfb2ZzKys7XHJcbiAgICAgICB9XHJcbiAgICAgICByZXR1cm4gY29vcmRzO1xyXG4gICB9XHJcbn1cclxuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cbiAqIEBhdXRob3IganVsaWFud2EgLyBodHRwczovL2dpdGh1Yi5jb20vanVsaWFud2FcbiAqL1xuXG5USFJFRS5SZW5kZXJhYmxlT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMub2JqZWN0ID0gbnVsbDtcblx0dGhpcy56ID0gMDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVGYWNlID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMudjEgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHR0aGlzLnYyID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcblx0dGhpcy52MyA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XG5cblx0dGhpcy5ub3JtYWxNb2RlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0dGhpcy52ZXJ0ZXhOb3JtYWxzTW9kZWwgPSBbIG5ldyBUSFJFRS5WZWN0b3IzKCksIG5ldyBUSFJFRS5WZWN0b3IzKCksIG5ldyBUSFJFRS5WZWN0b3IzKCkgXTtcblx0dGhpcy52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gMDtcblxuXHR0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuXHR0aGlzLnV2cyA9IFsgbmV3IFRIUkVFLlZlY3RvcjIoKSwgbmV3IFRIUkVFLlZlY3RvcjIoKSwgbmV3IFRIUkVFLlZlY3RvcjIoKSBdO1xuXG5cdHRoaXMueiA9IDA7XG5cdHRoaXMucmVuZGVyT3JkZXIgPSAwO1xuXG59O1xuXG4vL1xuXG5USFJFRS5SZW5kZXJhYmxlVmVydGV4ID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR0aGlzLnBvc2l0aW9uV29ybGQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR0aGlzLnBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcblxuXHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXG59O1xuXG5USFJFRS5SZW5kZXJhYmxlVmVydGV4LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKCB2ZXJ0ZXggKSB7XG5cblx0dGhpcy5wb3NpdGlvbldvcmxkLmNvcHkoIHZlcnRleC5wb3NpdGlvbldvcmxkICk7XG5cdHRoaXMucG9zaXRpb25TY3JlZW4uY29weSggdmVydGV4LnBvc2l0aW9uU2NyZWVuICk7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVMaW5lID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMudjEgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHR0aGlzLnYyID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcblxuXHR0aGlzLnZlcnRleENvbG9ycyA9IFsgbmV3IFRIUkVFLkNvbG9yKCksIG5ldyBUSFJFRS5Db2xvcigpIF07XG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuXG5cdHRoaXMueiA9IDA7XG5cdHRoaXMucmVuZGVyT3JkZXIgPSAwO1xuXG59O1xuXG4vL1xuXG5USFJFRS5SZW5kZXJhYmxlU3ByaXRlID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMub2JqZWN0ID0gbnVsbDtcblxuXHR0aGlzLnggPSAwO1xuXHR0aGlzLnkgPSAwO1xuXHR0aGlzLnogPSAwO1xuXG5cdHRoaXMucm90YXRpb24gPSAwO1xuXHR0aGlzLnNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHR0aGlzLm1hdGVyaWFsID0gbnVsbDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlByb2plY3RvciA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgX29iamVjdCwgX29iamVjdENvdW50LCBfb2JqZWN0UG9vbCA9IFtdLCBfb2JqZWN0UG9vbExlbmd0aCA9IDAsXG5cdF92ZXJ0ZXgsIF92ZXJ0ZXhDb3VudCwgX3ZlcnRleFBvb2wgPSBbXSwgX3ZlcnRleFBvb2xMZW5ndGggPSAwLFxuXHRfZmFjZSwgX2ZhY2VDb3VudCwgX2ZhY2VQb29sID0gW10sIF9mYWNlUG9vbExlbmd0aCA9IDAsXG5cdF9saW5lLCBfbGluZUNvdW50LCBfbGluZVBvb2wgPSBbXSwgX2xpbmVQb29sTGVuZ3RoID0gMCxcblx0X3Nwcml0ZSwgX3Nwcml0ZUNvdW50LCBfc3ByaXRlUG9vbCA9IFtdLCBfc3ByaXRlUG9vbExlbmd0aCA9IDAsXG5cblx0X3JlbmRlckRhdGEgPSB7IG9iamVjdHM6IFtdLCBsaWdodHM6IFtdLCBlbGVtZW50czogW10gfSxcblxuXHRfdmVjdG9yMyA9IG5ldyBUSFJFRS5WZWN0b3IzKCksXG5cdF92ZWN0b3I0ID0gbmV3IFRIUkVFLlZlY3RvcjQoKSxcblxuXHRfY2xpcEJveCA9IG5ldyBUSFJFRS5Cb3gzKCBuZXcgVEhSRUUuVmVjdG9yMyggLSAxLCAtIDEsIC0gMSApLCBuZXcgVEhSRUUuVmVjdG9yMyggMSwgMSwgMSApICksXG5cdF9ib3VuZGluZ0JveCA9IG5ldyBUSFJFRS5Cb3gzKCksXG5cdF9wb2ludHMzID0gbmV3IEFycmF5KCAzICksXG5cdF9wb2ludHM0ID0gbmV3IEFycmF5KCA0ICksXG5cblx0X3ZpZXdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXHRfdmlld1Byb2plY3Rpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXG5cdF9tb2RlbE1hdHJpeCxcblx0X21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXG5cdF9ub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpLFxuXG5cdF9mcnVzdHVtID0gbmV3IFRIUkVFLkZydXN0dW0oKSxcblxuXHRfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbiA9IG5ldyBUSFJFRS5WZWN0b3I0KCksXG5cdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcblxuXHQvL1xuXG5cdHRoaXMucHJvamVjdFZlY3RvciA9IGZ1bmN0aW9uICggdmVjdG9yLCBjYW1lcmEgKSB7XG5cblx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Qcm9qZWN0b3I6IC5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci5wcm9qZWN0KCkuJyApO1xuXHRcdHZlY3Rvci5wcm9qZWN0KCBjYW1lcmEgKTtcblxuXHR9O1xuXG5cdHRoaXMudW5wcm9qZWN0VmVjdG9yID0gZnVuY3Rpb24gKCB2ZWN0b3IsIGNhbWVyYSApIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuJyApO1xuXHRcdHZlY3Rvci51bnByb2plY3QoIGNhbWVyYSApO1xuXG5cdH07XG5cblx0dGhpcy5waWNraW5nUmF5ID0gZnVuY3Rpb24gKCB2ZWN0b3IsIGNhbWVyYSApIHtcblxuXHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5Qcm9qZWN0b3I6IC5waWNraW5nUmF5KCkgaXMgbm93IHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKCkuJyApO1xuXG5cdH07XG5cblx0Ly9cblxuXHR2YXIgUmVuZGVyTGlzdCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBub3JtYWxzID0gW107XG5cdFx0dmFyIHV2cyA9IFtdO1xuXG5cdFx0dmFyIG9iamVjdCA9IG51bGw7XG5cdFx0dmFyIG1hdGVyaWFsID0gbnVsbDtcblxuXHRcdHZhciBub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpO1xuXG5cdFx0ZnVuY3Rpb24gc2V0T2JqZWN0KCB2YWx1ZSApIHtcblxuXHRcdFx0b2JqZWN0ID0gdmFsdWU7XG5cdFx0XHRtYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcblxuXHRcdFx0bm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCggb2JqZWN0Lm1hdHJpeFdvcmxkICk7XG5cblx0XHRcdG5vcm1hbHMubGVuZ3RoID0gMDtcblx0XHRcdHV2cy5sZW5ndGggPSAwO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHJvamVjdFZlcnRleCggdmVydGV4ICkge1xuXG5cdFx0XHR2YXIgcG9zaXRpb24gPSB2ZXJ0ZXgucG9zaXRpb247XG5cdFx0XHR2YXIgcG9zaXRpb25Xb3JsZCA9IHZlcnRleC5wb3NpdGlvbldvcmxkO1xuXHRcdFx0dmFyIHBvc2l0aW9uU2NyZWVuID0gdmVydGV4LnBvc2l0aW9uU2NyZWVuO1xuXG5cdFx0XHRwb3NpdGlvbldvcmxkLmNvcHkoIHBvc2l0aW9uICkuYXBwbHlNYXRyaXg0KCBfbW9kZWxNYXRyaXggKTtcblx0XHRcdHBvc2l0aW9uU2NyZWVuLmNvcHkoIHBvc2l0aW9uV29ybGQgKS5hcHBseU1hdHJpeDQoIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXG5cdFx0XHR2YXIgaW52VyA9IDEgLyBwb3NpdGlvblNjcmVlbi53O1xuXG5cdFx0XHRwb3NpdGlvblNjcmVlbi54ICo9IGludlc7XG5cdFx0XHRwb3NpdGlvblNjcmVlbi55ICo9IGludlc7XG5cdFx0XHRwb3NpdGlvblNjcmVlbi56ICo9IGludlc7XG5cblx0XHRcdHZlcnRleC52aXNpYmxlID0gcG9zaXRpb25TY3JlZW4ueCA+PSAtIDEgJiYgcG9zaXRpb25TY3JlZW4ueCA8PSAxICYmXG5cdFx0XHRcdFx0IHBvc2l0aW9uU2NyZWVuLnkgPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnkgPD0gMSAmJlxuXHRcdFx0XHRcdCBwb3NpdGlvblNjcmVlbi56ID49IC0gMSAmJiBwb3NpdGlvblNjcmVlbi56IDw9IDE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVmVydGV4KCB4LCB5LCB6ICkge1xuXG5cdFx0XHRfdmVydGV4ID0gZ2V0TmV4dFZlcnRleEluUG9vbCgpO1xuXHRcdFx0X3ZlcnRleC5wb3NpdGlvbi5zZXQoIHgsIHksIHogKTtcblxuXHRcdFx0cHJvamVjdFZlcnRleCggX3ZlcnRleCApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHVzaE5vcm1hbCggeCwgeSwgeiApIHtcblxuXHRcdFx0bm9ybWFscy5wdXNoKCB4LCB5LCB6ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVXYoIHgsIHkgKSB7XG5cblx0XHRcdHV2cy5wdXNoKCB4LCB5ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApIHtcblxuXHRcdFx0aWYgKCB2MS52aXNpYmxlID09PSB0cnVlIHx8IHYyLnZpc2libGUgPT09IHRydWUgfHwgdjMudmlzaWJsZSA9PT0gdHJ1ZSApIHJldHVybiB0cnVlO1xuXG5cdFx0XHRfcG9pbnRzM1sgMCBdID0gdjEucG9zaXRpb25TY3JlZW47XG5cdFx0XHRfcG9pbnRzM1sgMSBdID0gdjIucG9zaXRpb25TY3JlZW47XG5cdFx0XHRfcG9pbnRzM1sgMiBdID0gdjMucG9zaXRpb25TY3JlZW47XG5cblx0XHRcdHJldHVybiBfY2xpcEJveC5pbnRlcnNlY3RzQm94KCBfYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyggX3BvaW50czMgKSApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKSB7XG5cblx0XHRcdHJldHVybiAoICggdjMucG9zaXRpb25TY3JlZW4ueCAtIHYxLnBvc2l0aW9uU2NyZWVuLnggKSAqXG5cdFx0XHRcdCAgICAoIHYyLnBvc2l0aW9uU2NyZWVuLnkgLSB2MS5wb3NpdGlvblNjcmVlbi55ICkgLVxuXHRcdFx0XHQgICAgKCB2My5wb3NpdGlvblNjcmVlbi55IC0gdjEucG9zaXRpb25TY3JlZW4ueSApICpcblx0XHRcdFx0ICAgICggdjIucG9zaXRpb25TY3JlZW4ueCAtIHYxLnBvc2l0aW9uU2NyZWVuLnggKSApIDwgMDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1c2hMaW5lKCBhLCBiICkge1xuXG5cdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgYSBdO1xuXHRcdFx0dmFyIHYyID0gX3ZlcnRleFBvb2xbIGIgXTtcblxuXHRcdFx0X2xpbmUgPSBnZXROZXh0TGluZUluUG9vbCgpO1xuXG5cdFx0XHRfbGluZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdF9saW5lLnYxLmNvcHkoIHYxICk7XG5cdFx0XHRfbGluZS52Mi5jb3B5KCB2MiApO1xuXHRcdFx0X2xpbmUueiA9ICggdjEucG9zaXRpb25TY3JlZW4ueiArIHYyLnBvc2l0aW9uU2NyZWVuLnogKSAvIDI7XG5cdFx0XHRfbGluZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblxuXHRcdFx0X2xpbmUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9saW5lICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVHJpYW5nbGUoIGEsIGIsIGMgKSB7XG5cblx0XHRcdHZhciB2MSA9IF92ZXJ0ZXhQb29sWyBhIF07XG5cdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgYiBdO1xuXHRcdFx0dmFyIHYzID0gX3ZlcnRleFBvb2xbIGMgXTtcblxuXHRcdFx0aWYgKCBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbC5zaWRlID09PSBUSFJFRS5Eb3VibGVTaWRlIHx8IGNoZWNrQmFja2ZhY2VDdWxsaW5nKCB2MSwgdjIsIHYzICkgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0X2ZhY2UgPSBnZXROZXh0RmFjZUluUG9vbCgpO1xuXG5cdFx0XHRcdF9mYWNlLmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0XHRfZmFjZS52MS5jb3B5KCB2MSApO1xuXHRcdFx0XHRfZmFjZS52Mi5jb3B5KCB2MiApO1xuXHRcdFx0XHRfZmFjZS52My5jb3B5KCB2MyApO1xuXHRcdFx0XHRfZmFjZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiArIHYzLnBvc2l0aW9uU2NyZWVuLnogKSAvIDM7XG5cdFx0XHRcdF9mYWNlLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRcdC8vIHVzZSBmaXJzdCB2ZXJ0ZXggbm9ybWFsIGFzIGZhY2Ugbm9ybWFsXG5cblx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuZnJvbUFycmF5KCBub3JtYWxzLCBhICogMyApO1xuXHRcdFx0XHRfZmFjZS5ub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIG5vcm1hbE1hdHJpeCApLm5vcm1hbGl6ZSgpO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IDM7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgbm9ybWFsID0gX2ZhY2UudmVydGV4Tm9ybWFsc01vZGVsWyBpIF07XG5cdFx0XHRcdFx0bm9ybWFsLmZyb21BcnJheSggbm9ybWFscywgYXJndW1lbnRzWyBpIF0gKiAzICk7XG5cdFx0XHRcdFx0bm9ybWFsLmFwcGx5TWF0cml4Myggbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0XHR2YXIgdXYgPSBfZmFjZS51dnNbIGkgXTtcblx0XHRcdFx0XHR1di5mcm9tQXJyYXkoIHV2cywgYXJndW1lbnRzWyBpIF0gKiAyICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9mYWNlLnZlcnRleE5vcm1hbHNMZW5ndGggPSAzO1xuXG5cdFx0XHRcdF9mYWNlLm1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9mYWNlICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRzZXRPYmplY3Q6IHNldE9iamVjdCxcblx0XHRcdHByb2plY3RWZXJ0ZXg6IHByb2plY3RWZXJ0ZXgsXG5cdFx0XHRjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eTogY2hlY2tUcmlhbmdsZVZpc2liaWxpdHksXG5cdFx0XHRjaGVja0JhY2tmYWNlQ3VsbGluZzogY2hlY2tCYWNrZmFjZUN1bGxpbmcsXG5cdFx0XHRwdXNoVmVydGV4OiBwdXNoVmVydGV4LFxuXHRcdFx0cHVzaE5vcm1hbDogcHVzaE5vcm1hbCxcblx0XHRcdHB1c2hVdjogcHVzaFV2LFxuXHRcdFx0cHVzaExpbmU6IHB1c2hMaW5lLFxuXHRcdFx0cHVzaFRyaWFuZ2xlOiBwdXNoVHJpYW5nbGVcblx0XHR9XG5cblx0fTtcblxuXHR2YXIgcmVuZGVyTGlzdCA9IG5ldyBSZW5kZXJMaXN0KCk7XG5cblx0dGhpcy5wcm9qZWN0U2NlbmUgPSBmdW5jdGlvbiAoIHNjZW5lLCBjYW1lcmEsIHNvcnRPYmplY3RzLCBzb3J0RWxlbWVudHMgKSB7XG5cblx0XHRfZmFjZUNvdW50ID0gMDtcblx0XHRfbGluZUNvdW50ID0gMDtcblx0XHRfc3ByaXRlQ291bnQgPSAwO1xuXG5cdFx0X3JlbmRlckRhdGEuZWxlbWVudHMubGVuZ3RoID0gMDtcblxuXHRcdGlmICggc2NlbmUuYXV0b1VwZGF0ZSA9PT0gdHJ1ZSApIHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cdFx0aWYgKCBjYW1lcmEucGFyZW50ID09PSBudWxsICkgY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cblx0XHRfdmlld01hdHJpeC5jb3B5KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoIGNhbWVyYS5tYXRyaXhXb3JsZCApICk7XG5cdFx0X3ZpZXdQcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LCBfdmlld01hdHJpeCApO1xuXG5cdFx0X2ZydXN0dW0uc2V0RnJvbU1hdHJpeCggX3ZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XG5cblx0XHQvL1xuXG5cdFx0X29iamVjdENvdW50ID0gMDtcblxuXHRcdF9yZW5kZXJEYXRhLm9iamVjdHMubGVuZ3RoID0gMDtcblx0XHRfcmVuZGVyRGF0YS5saWdodHMubGVuZ3RoID0gMDtcblxuXHRcdGZ1bmN0aW9uIGFkZE9iamVjdCggb2JqZWN0ICkge1xuXG5cdFx0XHRfb2JqZWN0ID0gZ2V0TmV4dE9iamVjdEluUG9vbCgpO1xuXHRcdFx0X29iamVjdC5pZCA9IG9iamVjdC5pZDtcblx0XHRcdF9vYmplY3Qub2JqZWN0ID0gb2JqZWN0O1xuXG5cdFx0XHRfdmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG9iamVjdC5tYXRyaXhXb3JsZCApO1xuXHRcdFx0X3ZlY3RvcjMuYXBwbHlQcm9qZWN0aW9uKCBfdmlld1Byb2plY3Rpb25NYXRyaXggKTtcblx0XHRcdF9vYmplY3QueiA9IF92ZWN0b3IzLno7XG5cdFx0XHRfb2JqZWN0LnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRfcmVuZGVyRGF0YS5vYmplY3RzLnB1c2goIF9vYmplY3QgKTtcblxuXHRcdH1cblxuXHRcdHNjZW5lLnRyYXZlcnNlVmlzaWJsZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XG5cblx0XHRcdGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGlnaHQgKSB7XG5cblx0XHRcdFx0X3JlbmRlckRhdGEubGlnaHRzLnB1c2goIG9iamVjdCApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoIHx8IG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgKSB7XG5cblx0XHRcdFx0aWYgKCBvYmplY3QubWF0ZXJpYWwudmlzaWJsZSA9PT0gZmFsc2UgKSByZXR1cm47XG5cdFx0XHRcdGlmICggb2JqZWN0LmZydXN0dW1DdWxsZWQgPT09IHRydWUgJiYgX2ZydXN0dW0uaW50ZXJzZWN0c09iamVjdCggb2JqZWN0ICkgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRcdGFkZE9iamVjdCggb2JqZWN0ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZSApIHtcblxuXHRcdFx0XHRpZiAoIG9iamVjdC5tYXRlcmlhbC52aXNpYmxlID09PSBmYWxzZSApIHJldHVybjtcblx0XHRcdFx0aWYgKCBvYmplY3QuZnJ1c3R1bUN1bGxlZCA9PT0gdHJ1ZSAmJiBfZnJ1c3R1bS5pbnRlcnNlY3RzU3ByaXRlKCBvYmplY3QgKSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0YWRkT2JqZWN0KCBvYmplY3QgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSApO1xuXG5cdFx0aWYgKCBzb3J0T2JqZWN0cyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0X3JlbmRlckRhdGEub2JqZWN0cy5zb3J0KCBwYWludGVyU29ydCApO1xuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdGZvciAoIHZhciBvID0gMCwgb2wgPSBfcmVuZGVyRGF0YS5vYmplY3RzLmxlbmd0aDsgbyA8IG9sOyBvICsrICkge1xuXG5cdFx0XHR2YXIgb2JqZWN0ID0gX3JlbmRlckRhdGEub2JqZWN0c1sgbyBdLm9iamVjdDtcblx0XHRcdHZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTtcblxuXHRcdFx0cmVuZGVyTGlzdC5zZXRPYmplY3QoIG9iamVjdCApO1xuXG5cdFx0XHRfbW9kZWxNYXRyaXggPSBvYmplY3QubWF0cml4V29ybGQ7XG5cblx0XHRcdF92ZXJ0ZXhDb3VudCA9IDA7XG5cblx0XHRcdGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCApIHtcblxuXHRcdFx0XHRpZiAoIGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHR2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG5cdFx0XHRcdFx0dmFyIGdyb3VwcyA9IGdlb21ldHJ5Lmdyb3VwcztcblxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkICkgY29udGludWU7XG5cblx0XHRcdFx0XHR2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGF0dHJpYnV0ZXMubm9ybWFsICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG5vcm1hbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaE5vcm1hbCggbm9ybWFsc1sgaSBdLCBub3JtYWxzWyBpICsgMSBdLCBub3JtYWxzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy51diAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgdXZzID0gYXR0cmlidXRlcy51di5hcnJheTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gdXZzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMiApIHtcblxuXHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hVdiggdXZzWyBpIF0sIHV2c1sgaSArIDEgXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGdlb21ldHJ5LmluZGV4ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xuXG5cdFx0XHRcdFx0XHRpZiAoIGdyb3Vwcy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBvID0gMDsgbyA8IGdyb3Vwcy5sZW5ndGg7IG8gKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgZ3JvdXAgPSBncm91cHNbIG8gXTtcblxuXHRcdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gZ3JvdXAuc3RhcnQsIGwgPSBncm91cC5zdGFydCArIGdyb3VwLmNvdW50OyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hUcmlhbmdsZSggaW5kaWNlc1sgaSBdLCBpbmRpY2VzWyBpICsgMSBdLCBpbmRpY2VzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVHJpYW5nbGUoIGluZGljZXNbIGkgXSwgaW5kaWNlc1sgaSArIDEgXSwgaW5kaWNlc1sgaSArIDIgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gcG9zaXRpb25zLmxlbmd0aCAvIDM7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVHJpYW5nbGUoIGksIGkgKyAxLCBpICsgMiApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdHZhciB2ZXJ0aWNlcyA9IGdlb21ldHJ5LnZlcnRpY2VzO1xuXHRcdFx0XHRcdHZhciBmYWNlcyA9IGdlb21ldHJ5LmZhY2VzO1xuXHRcdFx0XHRcdHZhciBmYWNlVmVydGV4VXZzID0gZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1sgMCBdO1xuXG5cdFx0XHRcdFx0X25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoIF9tb2RlbE1hdHJpeCApO1xuXG5cdFx0XHRcdFx0dmFyIG1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0dmFyIGlzRmFjZU1hdGVyaWFsID0gbWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NdWx0aU1hdGVyaWFsO1xuXHRcdFx0XHRcdHZhciBvYmplY3RNYXRlcmlhbHMgPSBpc0ZhY2VNYXRlcmlhbCA9PT0gdHJ1ZSA/IG9iamVjdC5tYXRlcmlhbCA6IG51bGw7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgdiA9IDAsIHZsID0gdmVydGljZXMubGVuZ3RoOyB2IDwgdmw7IHYgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciB2ZXJ0ZXggPSB2ZXJ0aWNlc1sgdiBdO1xuXG5cdFx0XHRcdFx0XHRfdmVjdG9yMy5jb3B5KCB2ZXJ0ZXggKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbC5tb3JwaFRhcmdldHMgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoVGFyZ2V0cyA9IGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cztcblx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoSW5mbHVlbmNlcyA9IG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXM7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIHQgPSAwLCB0bCA9IG1vcnBoVGFyZ2V0cy5sZW5ndGg7IHQgPCB0bDsgdCArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBpbmZsdWVuY2UgPSBtb3JwaEluZmx1ZW5jZXNbIHQgXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5mbHVlbmNlID09PSAwICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gbW9ycGhUYXJnZXRzWyB0IF07XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRhcmdldFZlcnRleCA9IHRhcmdldC52ZXJ0aWNlc1sgdiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0X3ZlY3RvcjMueCArPSAoIHRhcmdldFZlcnRleC54IC0gdmVydGV4LnggKSAqIGluZmx1ZW5jZTtcblx0XHRcdFx0XHRcdFx0XHRfdmVjdG9yMy55ICs9ICggdGFyZ2V0VmVydGV4LnkgLSB2ZXJ0ZXgueSApICogaW5mbHVlbmNlO1xuXHRcdFx0XHRcdFx0XHRcdF92ZWN0b3IzLnogKz0gKCB0YXJnZXRWZXJ0ZXgueiAtIHZlcnRleC56ICkgKiBpbmZsdWVuY2U7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggX3ZlY3RvcjMueCwgX3ZlY3RvcjMueSwgX3ZlY3RvcjMueiApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGYgPSAwLCBmbCA9IGZhY2VzLmxlbmd0aDsgZiA8IGZsOyBmICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgZmFjZSA9IGZhY2VzWyBmIF07XG5cblx0XHRcdFx0XHRcdG1hdGVyaWFsID0gaXNGYWNlTWF0ZXJpYWwgPT09IHRydWVcblx0XHRcdFx0XHRcdFx0ID8gb2JqZWN0TWF0ZXJpYWxzLm1hdGVyaWFsc1sgZmFjZS5tYXRlcmlhbEluZGV4IF1cblx0XHRcdFx0XHRcdFx0IDogb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsID09PSB1bmRlZmluZWQgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdFx0dmFyIHNpZGUgPSBtYXRlcmlhbC5zaWRlO1xuXG5cdFx0XHRcdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgZmFjZS5hIF07XG5cdFx0XHRcdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgZmFjZS5iIF07XG5cdFx0XHRcdFx0XHR2YXIgdjMgPSBfdmVydGV4UG9vbFsgZmFjZS5jIF07XG5cblx0XHRcdFx0XHRcdGlmICggcmVuZGVyTGlzdC5jaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApID09PSBmYWxzZSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR2YXIgdmlzaWJsZSA9IHJlbmRlckxpc3QuY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBzaWRlICE9PSBUSFJFRS5Eb3VibGVTaWRlICkge1xuXG5cdFx0XHRcdFx0XHRcdGlmICggc2lkZSA9PT0gVEhSRUUuRnJvbnRTaWRlICYmIHZpc2libGUgPT09IGZhbHNlICkgY29udGludWU7XG5cdFx0XHRcdFx0XHRcdGlmICggc2lkZSA9PT0gVEhSRUUuQmFja1NpZGUgJiYgdmlzaWJsZSA9PT0gdHJ1ZSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdF9mYWNlID0gZ2V0TmV4dEZhY2VJblBvb2woKTtcblxuXHRcdFx0XHRcdFx0X2ZhY2UuaWQgPSBvYmplY3QuaWQ7XG5cdFx0XHRcdFx0XHRfZmFjZS52MS5jb3B5KCB2MSApO1xuXHRcdFx0XHRcdFx0X2ZhY2UudjIuY29weSggdjIgKTtcblx0XHRcdFx0XHRcdF9mYWNlLnYzLmNvcHkoIHYzICk7XG5cblx0XHRcdFx0XHRcdF9mYWNlLm5vcm1hbE1vZGVsLmNvcHkoIGZhY2Uubm9ybWFsICk7XG5cblx0XHRcdFx0XHRcdGlmICggdmlzaWJsZSA9PT0gZmFsc2UgJiYgKCBzaWRlID09PSBUSFJFRS5CYWNrU2lkZSB8fCBzaWRlID09PSBUSFJFRS5Eb3VibGVTaWRlICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwubmVnYXRlKCk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuYXBwbHlNYXRyaXgzKCBfbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0XHRcdHZhciBmYWNlVmVydGV4Tm9ybWFscyA9IGZhY2UudmVydGV4Tm9ybWFscztcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIG4gPSAwLCBubCA9IE1hdGgubWluKCBmYWNlVmVydGV4Tm9ybWFscy5sZW5ndGgsIDMgKTsgbiA8IG5sOyBuICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBub3JtYWxNb2RlbCA9IF9mYWNlLnZlcnRleE5vcm1hbHNNb2RlbFsgbiBdO1xuXHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5jb3B5KCBmYWNlVmVydGV4Tm9ybWFsc1sgbiBdICk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB2aXNpYmxlID09PSBmYWxzZSAmJiAoIHNpZGUgPT09IFRIUkVFLkJhY2tTaWRlIHx8IHNpZGUgPT09IFRIUkVFLkRvdWJsZVNpZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdG5vcm1hbE1vZGVsLm5lZ2F0ZSgpO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIF9ub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfZmFjZS52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gZmFjZVZlcnRleE5vcm1hbHMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0XHR2YXIgdmVydGV4VXZzID0gZmFjZVZlcnRleFV2c1sgZiBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHZlcnRleFV2cyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciB1ID0gMDsgdSA8IDM7IHUgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRfZmFjZS51dnNbIHUgXS5jb3B5KCB2ZXJ0ZXhVdnNbIHUgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfZmFjZS5jb2xvciA9IGZhY2UuY29sb3I7XG5cdFx0XHRcdFx0XHRfZmFjZS5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0XHRfZmFjZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiArIHYzLnBvc2l0aW9uU2NyZWVuLnogKSAvIDM7XG5cdFx0XHRcdFx0XHRfZmFjZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblxuXHRcdFx0XHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2ZhY2UgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgKSB7XG5cblx0XHRcdFx0aWYgKCBnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5ICkge1xuXG5cdFx0XHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnBvc2l0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBwb3NpdGlvbnMgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBwb3NpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5pbmRleCAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoTGluZSggaW5kaWNlc1sgaSBdLCBpbmRpY2VzWyBpICsgMSBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBzdGVwID0gb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzID8gMiA6IDE7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gKCBwb3NpdGlvbnMubGVuZ3RoIC8gMyApIC0gMTsgaSA8IGw7IGkgKz0gc3RlcCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaExpbmUoIGksIGkgKyAxICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdF9tb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoIF92aWV3UHJvamVjdGlvbk1hdHJpeCwgX21vZGVsTWF0cml4ICk7XG5cblx0XHRcdFx0XHR2YXIgdmVydGljZXMgPSBvYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cblx0XHRcdFx0XHRpZiAoIHZlcnRpY2VzLmxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0djEgPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XG5cdFx0XHRcdFx0djEucG9zaXRpb25TY3JlZW4uY29weSggdmVydGljZXNbIDAgXSApLmFwcGx5TWF0cml4NCggX21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHRcdHZhciBzdGVwID0gb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzID8gMiA6IDE7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgdiA9IDEsIHZsID0gdmVydGljZXMubGVuZ3RoOyB2IDwgdmw7IHYgKysgKSB7XG5cblx0XHRcdFx0XHRcdHYxID0gZ2V0TmV4dFZlcnRleEluUG9vbCgpO1xuXHRcdFx0XHRcdFx0djEucG9zaXRpb25TY3JlZW4uY29weSggdmVydGljZXNbIHYgXSApLmFwcGx5TWF0cml4NCggX21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHRcdFx0aWYgKCAoIHYgKyAxICkgJSBzdGVwID4gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR2MiA9IF92ZXJ0ZXhQb29sWyBfdmVydGV4Q291bnQgLSAyIF07XG5cblx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLmNvcHkoIHYxLnBvc2l0aW9uU2NyZWVuICk7XG5cdFx0XHRcdFx0XHRfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbi5jb3B5KCB2Mi5wb3NpdGlvblNjcmVlbiApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNsaXBMaW5lKCBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbiwgX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gKSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQZXJmb3JtIHRoZSBwZXJzcGVjdGl2ZSBkaXZpZGVcblx0XHRcdFx0XHRcdFx0X2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4ubXVsdGlwbHlTY2FsYXIoIDEgLyBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbi53ICk7XG5cdFx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLm11bHRpcGx5U2NhbGFyKCAxIC8gX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4udyApO1xuXG5cdFx0XHRcdFx0XHRcdF9saW5lID0gZ2V0TmV4dExpbmVJblBvb2woKTtcblxuXHRcdFx0XHRcdFx0XHRfbGluZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdFx0XHRcdFx0X2xpbmUudjEucG9zaXRpb25TY3JlZW4uY29weSggX2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4gKTtcblx0XHRcdFx0XHRcdFx0X2xpbmUudjIucG9zaXRpb25TY3JlZW4uY29weSggX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gKTtcblxuXHRcdFx0XHRcdFx0XHRfbGluZS56ID0gTWF0aC5tYXgoIF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLnosIF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLnogKTtcblx0XHRcdFx0XHRcdFx0X2xpbmUucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cblx0XHRcdFx0XHRcdFx0X2xpbmUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBvYmplY3QubWF0ZXJpYWwudmVydGV4Q29sb3JzID09PSBUSFJFRS5WZXJ0ZXhDb2xvcnMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRfbGluZS52ZXJ0ZXhDb2xvcnNbIDAgXS5jb3B5KCBvYmplY3QuZ2VvbWV0cnkuY29sb3JzWyB2IF0gKTtcblx0XHRcdFx0XHRcdFx0XHRfbGluZS52ZXJ0ZXhDb2xvcnNbIDEgXS5jb3B5KCBvYmplY3QuZ2VvbWV0cnkuY29sb3JzWyB2IC0gMSBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9saW5lICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZSApIHtcblxuXHRcdFx0XHRfdmVjdG9yNC5zZXQoIF9tb2RlbE1hdHJpeC5lbGVtZW50c1sgMTIgXSwgX21vZGVsTWF0cml4LmVsZW1lbnRzWyAxMyBdLCBfbW9kZWxNYXRyaXguZWxlbWVudHNbIDE0IF0sIDEgKTtcblx0XHRcdFx0X3ZlY3RvcjQuYXBwbHlNYXRyaXg0KCBfdmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHR2YXIgaW52VyA9IDEgLyBfdmVjdG9yNC53O1xuXG5cdFx0XHRcdF92ZWN0b3I0LnogKj0gaW52VztcblxuXHRcdFx0XHRpZiAoIF92ZWN0b3I0LnogPj0gLSAxICYmIF92ZWN0b3I0LnogPD0gMSApIHtcblxuXHRcdFx0XHRcdF9zcHJpdGUgPSBnZXROZXh0U3ByaXRlSW5Qb29sKCk7XG5cdFx0XHRcdFx0X3Nwcml0ZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdFx0XHRfc3ByaXRlLnggPSBfdmVjdG9yNC54ICogaW52Vztcblx0XHRcdFx0XHRfc3ByaXRlLnkgPSBfdmVjdG9yNC55ICogaW52Vztcblx0XHRcdFx0XHRfc3ByaXRlLnogPSBfdmVjdG9yNC56O1xuXHRcdFx0XHRcdF9zcHJpdGUucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cdFx0XHRcdFx0X3Nwcml0ZS5vYmplY3QgPSBvYmplY3Q7XG5cblx0XHRcdFx0XHRfc3ByaXRlLnJvdGF0aW9uID0gb2JqZWN0LnJvdGF0aW9uO1xuXG5cdFx0XHRcdFx0X3Nwcml0ZS5zY2FsZS54ID0gb2JqZWN0LnNjYWxlLnggKiBNYXRoLmFicyggX3Nwcml0ZS54IC0gKCBfdmVjdG9yNC54ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDAgXSApIC8gKCBfdmVjdG9yNC53ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDEyIF0gKSApO1xuXHRcdFx0XHRcdF9zcHJpdGUuc2NhbGUueSA9IG9iamVjdC5zY2FsZS55ICogTWF0aC5hYnMoIF9zcHJpdGUueSAtICggX3ZlY3RvcjQueSArIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyA1IF0gKSAvICggX3ZlY3RvcjQudyArIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAxMyBdICkgKTtcblxuXHRcdFx0XHRcdF9zcHJpdGUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfc3ByaXRlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIHNvcnRFbGVtZW50cyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMuc29ydCggcGFpbnRlclNvcnQgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfcmVuZGVyRGF0YTtcblxuXHR9O1xuXG5cdC8vIFBvb2xzXG5cblx0ZnVuY3Rpb24gZ2V0TmV4dE9iamVjdEluUG9vbCgpIHtcblxuXHRcdGlmICggX29iamVjdENvdW50ID09PSBfb2JqZWN0UG9vbExlbmd0aCApIHtcblxuXHRcdFx0dmFyIG9iamVjdCA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlT2JqZWN0KCk7XG5cdFx0XHRfb2JqZWN0UG9vbC5wdXNoKCBvYmplY3QgKTtcblx0XHRcdF9vYmplY3RQb29sTGVuZ3RoICsrO1xuXHRcdFx0X29iamVjdENvdW50ICsrO1xuXHRcdFx0cmV0dXJuIG9iamVjdDtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfb2JqZWN0UG9vbFsgX29iamVjdENvdW50ICsrIF07XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5leHRWZXJ0ZXhJblBvb2woKSB7XG5cblx0XHRpZiAoIF92ZXJ0ZXhDb3VudCA9PT0gX3ZlcnRleFBvb2xMZW5ndGggKSB7XG5cblx0XHRcdHZhciB2ZXJ0ZXggPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHRcdFx0X3ZlcnRleFBvb2wucHVzaCggdmVydGV4ICk7XG5cdFx0XHRfdmVydGV4UG9vbExlbmd0aCArKztcblx0XHRcdF92ZXJ0ZXhDb3VudCArKztcblx0XHRcdHJldHVybiB2ZXJ0ZXg7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gX3ZlcnRleFBvb2xbIF92ZXJ0ZXhDb3VudCArKyBdO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXROZXh0RmFjZUluUG9vbCgpIHtcblxuXHRcdGlmICggX2ZhY2VDb3VudCA9PT0gX2ZhY2VQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgZmFjZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlRmFjZSgpO1xuXHRcdFx0X2ZhY2VQb29sLnB1c2goIGZhY2UgKTtcblx0XHRcdF9mYWNlUG9vbExlbmd0aCArKztcblx0XHRcdF9mYWNlQ291bnQgKys7XG5cdFx0XHRyZXR1cm4gZmFjZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfZmFjZVBvb2xbIF9mYWNlQ291bnQgKysgXTtcblxuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXROZXh0TGluZUluUG9vbCgpIHtcblxuXHRcdGlmICggX2xpbmVDb3VudCA9PT0gX2xpbmVQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgbGluZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlTGluZSgpO1xuXHRcdFx0X2xpbmVQb29sLnB1c2goIGxpbmUgKTtcblx0XHRcdF9saW5lUG9vbExlbmd0aCArKztcblx0XHRcdF9saW5lQ291bnQgKys7XG5cdFx0XHRyZXR1cm4gbGluZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfbGluZVBvb2xbIF9saW5lQ291bnQgKysgXTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmV4dFNwcml0ZUluUG9vbCgpIHtcblxuXHRcdGlmICggX3Nwcml0ZUNvdW50ID09PSBfc3ByaXRlUG9vbExlbmd0aCApIHtcblxuXHRcdFx0dmFyIHNwcml0ZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlU3ByaXRlKCk7XG5cdFx0XHRfc3ByaXRlUG9vbC5wdXNoKCBzcHJpdGUgKTtcblx0XHRcdF9zcHJpdGVQb29sTGVuZ3RoICsrO1xuXHRcdFx0X3Nwcml0ZUNvdW50ICsrO1xuXHRcdFx0cmV0dXJuIHNwcml0ZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfc3ByaXRlUG9vbFsgX3Nwcml0ZUNvdW50ICsrIF07XG5cblx0fVxuXG5cdC8vXG5cblx0ZnVuY3Rpb24gcGFpbnRlclNvcnQoIGEsIGIgKSB7XG5cblx0XHRpZiAoIGEucmVuZGVyT3JkZXIgIT09IGIucmVuZGVyT3JkZXIgKSB7XG5cblx0XHRcdHJldHVybiBhLnJlbmRlck9yZGVyIC0gYi5yZW5kZXJPcmRlcjtcblxuXHRcdH0gZWxzZSBpZiAoIGEueiAhPT0gYi56ICkge1xuXG5cdFx0XHRyZXR1cm4gYi56IC0gYS56O1xuXG5cdFx0fSBlbHNlIGlmICggYS5pZCAhPT0gYi5pZCApIHtcblxuXHRcdFx0cmV0dXJuIGEuaWQgLSBiLmlkO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0cmV0dXJuIDA7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsaXBMaW5lKCBzMSwgczIgKSB7XG5cblx0XHR2YXIgYWxwaGExID0gMCwgYWxwaGEyID0gMSxcblxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgYm91bmRhcnkgY29vcmRpbmF0ZSBvZiBlYWNoIHZlcnRleCBmb3IgdGhlIG5lYXIgYW5kIGZhciBjbGlwIHBsYW5lcyxcblx0XHQvLyBaID0gLTEgYW5kIFogPSArMSwgcmVzcGVjdGl2ZWx5LlxuXHRcdGJjMW5lYXIgPSAgczEueiArIHMxLncsXG5cdFx0YmMybmVhciA9ICBzMi56ICsgczIudyxcblx0XHRiYzFmYXIgPSAgLSBzMS56ICsgczEudyxcblx0XHRiYzJmYXIgPSAgLSBzMi56ICsgczIudztcblxuXHRcdGlmICggYmMxbmVhciA+PSAwICYmIGJjMm5lYXIgPj0gMCAmJiBiYzFmYXIgPj0gMCAmJiBiYzJmYXIgPj0gMCApIHtcblxuXHRcdFx0Ly8gQm90aCB2ZXJ0aWNlcyBsaWUgZW50aXJlbHkgd2l0aGluIGFsbCBjbGlwIHBsYW5lcy5cblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0fSBlbHNlIGlmICggKCBiYzFuZWFyIDwgMCAmJiBiYzJuZWFyIDwgMCApIHx8ICggYmMxZmFyIDwgMCAmJiBiYzJmYXIgPCAwICkgKSB7XG5cblx0XHRcdC8vIEJvdGggdmVydGljZXMgbGllIGVudGlyZWx5IG91dHNpZGUgb25lIG9mIHRoZSBjbGlwIHBsYW5lcy5cblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFRoZSBsaW5lIHNlZ21lbnQgc3BhbnMgYXQgbGVhc3Qgb25lIGNsaXAgcGxhbmUuXG5cblx0XHRcdGlmICggYmMxbmVhciA8IDAgKSB7XG5cblx0XHRcdFx0Ly8gdjEgbGllcyBvdXRzaWRlIHRoZSBuZWFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxbmVhciAvICggYmMxbmVhciAtIGJjMm5lYXIgKSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBiYzJuZWFyIDwgMCApIHtcblxuXHRcdFx0XHQvLyB2MiBsaWVzIG91dHNpZGUgdGhlIG5lYXIgcGxhbmUsIHYxIGluc2lkZVxuXHRcdFx0XHRhbHBoYTIgPSBNYXRoLm1pbiggYWxwaGEyLCBiYzFuZWFyIC8gKCBiYzFuZWFyIC0gYmMybmVhciApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBiYzFmYXIgPCAwICkge1xuXG5cdFx0XHRcdC8vIHYxIGxpZXMgb3V0c2lkZSB0aGUgZmFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxZmFyIC8gKCBiYzFmYXIgLSBiYzJmYXIgKSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBiYzJmYXIgPCAwICkge1xuXG5cdFx0XHRcdC8vIHYyIGxpZXMgb3V0c2lkZSB0aGUgZmFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGEyID0gTWF0aC5taW4oIGFscGhhMiwgYmMxZmFyIC8gKCBiYzFmYXIgLSBiYzJmYXIgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggYWxwaGEyIDwgYWxwaGExICkge1xuXG5cdFx0XHRcdC8vIFRoZSBsaW5lIHNlZ21lbnQgc3BhbnMgdHdvIGJvdW5kYXJpZXMsIGJ1dCBpcyBvdXRzaWRlIGJvdGggb2YgdGhlbS5cblx0XHRcdFx0Ly8gKFRoaXMgY2FuJ3QgaGFwcGVuIHdoZW4gd2UncmUgb25seSBjbGlwcGluZyBhZ2FpbnN0IGp1c3QgbmVhci9mYXIgYnV0IGdvb2Rcblx0XHRcdFx0Ly8gIHRvIGxlYXZlIHRoZSBjaGVjayBoZXJlIGZvciBmdXR1cmUgdXNhZ2UgaWYgb3RoZXIgY2xpcCBwbGFuZXMgYXJlIGFkZGVkLilcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgczEgYW5kIHMyIHZlcnRpY2VzIHRvIG1hdGNoIHRoZSBjbGlwcGVkIGxpbmUgc2VnbWVudC5cblx0XHRcdFx0czEubGVycCggczIsIGFscGhhMSApO1xuXHRcdFx0XHRzMi5sZXJwKCBzMSwgMSAtIGFscGhhMiApO1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fVxuXG59O1xuIiwiLyoqXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xuICovXG5cblRIUkVFLkJsb29tUGFzcyA9IGZ1bmN0aW9uICggc3RyZW5ndGgsIGtlcm5lbFNpemUsIHNpZ21hLCByZXNvbHV0aW9uICkge1xuXG5cdFRIUkVFLlBhc3MuY2FsbCggdGhpcyApO1xuXG5cdHN0cmVuZ3RoID0gKCBzdHJlbmd0aCAhPT0gdW5kZWZpbmVkICkgPyBzdHJlbmd0aCA6IDE7XG5cdGtlcm5lbFNpemUgPSAoIGtlcm5lbFNpemUgIT09IHVuZGVmaW5lZCApID8ga2VybmVsU2l6ZSA6IDI1O1xuXHRzaWdtYSA9ICggc2lnbWEgIT09IHVuZGVmaW5lZCApID8gc2lnbWEgOiA0LjA7XG5cdHJlc29sdXRpb24gPSAoIHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCApID8gcmVzb2x1dGlvbiA6IDI1NjtcblxuXHQvLyByZW5kZXIgdGFyZ2V0c1xuXG5cdHZhciBwYXJzID0geyBtaW5GaWx0ZXI6IFRIUkVFLkxpbmVhckZpbHRlciwgbWFnRmlsdGVyOiBUSFJFRS5MaW5lYXJGaWx0ZXIsIGZvcm1hdDogVEhSRUUuUkdCQUZvcm1hdCB9O1xuXG5cdHRoaXMucmVuZGVyVGFyZ2V0WCA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCggcmVzb2x1dGlvbiwgcmVzb2x1dGlvbiwgcGFycyApO1xuXHR0aGlzLnJlbmRlclRhcmdldFkgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoIHJlc29sdXRpb24sIHJlc29sdXRpb24sIHBhcnMgKTtcblxuXHQvLyBjb3B5IG1hdGVyaWFsXG5cblx0aWYgKCBUSFJFRS5Db3B5U2hhZGVyID09PSB1bmRlZmluZWQgKVxuXHRcdGNvbnNvbGUuZXJyb3IoIFwiVEhSRUUuQmxvb21QYXNzIHJlbGllcyBvbiBUSFJFRS5Db3B5U2hhZGVyXCIgKTtcblxuXHR2YXIgY29weVNoYWRlciA9IFRIUkVFLkNvcHlTaGFkZXI7XG5cblx0dGhpcy5jb3B5VW5pZm9ybXMgPSBUSFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKCBjb3B5U2hhZGVyLnVuaWZvcm1zICk7XG5cblx0dGhpcy5jb3B5VW5pZm9ybXNbIFwib3BhY2l0eVwiIF0udmFsdWUgPSBzdHJlbmd0aDtcblxuXHR0aGlzLm1hdGVyaWFsQ29weSA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xuXG5cdFx0dW5pZm9ybXM6IHRoaXMuY29weVVuaWZvcm1zLFxuXHRcdHZlcnRleFNoYWRlcjogY29weVNoYWRlci52ZXJ0ZXhTaGFkZXIsXG5cdFx0ZnJhZ21lbnRTaGFkZXI6IGNvcHlTaGFkZXIuZnJhZ21lbnRTaGFkZXIsXG5cdFx0YmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsXG5cdFx0dHJhbnNwYXJlbnQ6IHRydWVcblxuXHR9ICk7XG5cblx0Ly8gY29udm9sdXRpb24gbWF0ZXJpYWxcblxuXHRpZiAoIFRIUkVFLkNvbnZvbHV0aW9uU2hhZGVyID09PSB1bmRlZmluZWQgKVxuXHRcdGNvbnNvbGUuZXJyb3IoIFwiVEhSRUUuQmxvb21QYXNzIHJlbGllcyBvbiBUSFJFRS5Db252b2x1dGlvblNoYWRlclwiICk7XG5cblx0dmFyIGNvbnZvbHV0aW9uU2hhZGVyID0gVEhSRUUuQ29udm9sdXRpb25TaGFkZXI7XG5cblx0dGhpcy5jb252b2x1dGlvblVuaWZvcm1zID0gVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZSggY29udm9sdXRpb25TaGFkZXIudW5pZm9ybXMgKTtcblxuXHR0aGlzLmNvbnZvbHV0aW9uVW5pZm9ybXNbIFwidUltYWdlSW5jcmVtZW50XCIgXS52YWx1ZSA9IFRIUkVFLkJsb29tUGFzcy5ibHVyWDtcblx0dGhpcy5jb252b2x1dGlvblVuaWZvcm1zWyBcImNLZXJuZWxcIiBdLnZhbHVlID0gVEhSRUUuQ29udm9sdXRpb25TaGFkZXIuYnVpbGRLZXJuZWwoIHNpZ21hICk7XG5cblx0dGhpcy5tYXRlcmlhbENvbnZvbHV0aW9uID0gbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKCB7XG5cblx0XHR1bmlmb3JtczogdGhpcy5jb252b2x1dGlvblVuaWZvcm1zLFxuXHRcdHZlcnRleFNoYWRlcjogIGNvbnZvbHV0aW9uU2hhZGVyLnZlcnRleFNoYWRlcixcblx0XHRmcmFnbWVudFNoYWRlcjogY29udm9sdXRpb25TaGFkZXIuZnJhZ21lbnRTaGFkZXIsXG5cdFx0ZGVmaW5lczoge1xuXHRcdFx0XCJLRVJORUxfU0laRV9GTE9BVFwiOiBrZXJuZWxTaXplLnRvRml4ZWQoIDEgKSxcblx0XHRcdFwiS0VSTkVMX1NJWkVfSU5UXCI6IGtlcm5lbFNpemUudG9GaXhlZCggMCApXG5cdFx0fVxuXG5cdH0gKTtcblxuXHR0aGlzLm5lZWRzU3dhcCA9IGZhbHNlO1xuXG5cdHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSggLSAxLCAxLCAxLCAtIDEsIDAsIDEgKTtcblx0dGhpcy5zY2VuZSAgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuXHR0aGlzLnF1YWQgPSBuZXcgVEhSRUUuTWVzaCggbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoIDIsIDIgKSwgbnVsbCApO1xuXHR0aGlzLnNjZW5lLmFkZCggdGhpcy5xdWFkICk7XG5cbn07XG5cblRIUkVFLkJsb29tUGFzcy5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBUSFJFRS5QYXNzLnByb3RvdHlwZSApLCB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLkJsb29tUGFzcyxcblxuXHRyZW5kZXI6IGZ1bmN0aW9uICggcmVuZGVyZXIsIHdyaXRlQnVmZmVyLCByZWFkQnVmZmVyLCBkZWx0YSwgbWFza0FjdGl2ZSApIHtcblxuXHRcdGlmICggbWFza0FjdGl2ZSApIHJlbmRlcmVyLmNvbnRleHQuZGlzYWJsZSggcmVuZGVyZXIuY29udGV4dC5TVEVOQ0lMX1RFU1QgKTtcblxuXHRcdC8vIFJlbmRlciBxdWFkIHdpdGggYmx1cmVkIHNjZW5lIGludG8gdGV4dHVyZSAoY29udm9sdXRpb24gcGFzcyAxKVxuXG5cdFx0dGhpcy5xdWFkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbENvbnZvbHV0aW9uO1xuXG5cdFx0dGhpcy5jb252b2x1dGlvblVuaWZvcm1zWyBcInREaWZmdXNlXCIgXS52YWx1ZSA9IHJlYWRCdWZmZXIudGV4dHVyZTtcblx0XHR0aGlzLmNvbnZvbHV0aW9uVW5pZm9ybXNbIFwidUltYWdlSW5jcmVtZW50XCIgXS52YWx1ZSA9IFRIUkVFLkJsb29tUGFzcy5ibHVyWDtcblxuXHRcdHJlbmRlcmVyLnJlbmRlciggdGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRoaXMucmVuZGVyVGFyZ2V0WCwgdHJ1ZSApO1xuXG5cblx0XHQvLyBSZW5kZXIgcXVhZCB3aXRoIGJsdXJlZCBzY2VuZSBpbnRvIHRleHR1cmUgKGNvbnZvbHV0aW9uIHBhc3MgMilcblxuXHRcdHRoaXMuY29udm9sdXRpb25Vbmlmb3Jtc1sgXCJ0RGlmZnVzZVwiIF0udmFsdWUgPSB0aGlzLnJlbmRlclRhcmdldFgudGV4dHVyZTtcblx0XHR0aGlzLmNvbnZvbHV0aW9uVW5pZm9ybXNbIFwidUltYWdlSW5jcmVtZW50XCIgXS52YWx1ZSA9IFRIUkVFLkJsb29tUGFzcy5ibHVyWTtcblxuXHRcdHJlbmRlcmVyLnJlbmRlciggdGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRoaXMucmVuZGVyVGFyZ2V0WSwgdHJ1ZSApO1xuXG5cdFx0Ly8gUmVuZGVyIG9yaWdpbmFsIHNjZW5lIHdpdGggc3VwZXJpbXBvc2VkIGJsdXIgdG8gdGV4dHVyZVxuXG5cdFx0dGhpcy5xdWFkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbENvcHk7XG5cblx0XHR0aGlzLmNvcHlVbmlmb3Jtc1sgXCJ0RGlmZnVzZVwiIF0udmFsdWUgPSB0aGlzLnJlbmRlclRhcmdldFkudGV4dHVyZTtcblxuXHRcdGlmICggbWFza0FjdGl2ZSApIHJlbmRlcmVyLmNvbnRleHQuZW5hYmxlKCByZW5kZXJlci5jb250ZXh0LlNURU5DSUxfVEVTVCApO1xuXG5cdFx0cmVuZGVyZXIucmVuZGVyKCB0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSwgcmVhZEJ1ZmZlciwgdGhpcy5jbGVhciApO1xuXG5cdH1cblxufSApO1xuXG5USFJFRS5CbG9vbVBhc3MuYmx1clggPSBuZXcgVEhSRUUuVmVjdG9yMiggMC4wMDE5NTMxMjUsIDAuMCApO1xuVEhSRUUuQmxvb21QYXNzLmJsdXJZID0gbmV3IFRIUkVFLlZlY3RvcjIoIDAuMCwgMC4wMDE5NTMxMjUgKTtcbiIsIi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqL1xuXG5USFJFRS5DbGVhclBhc3MgPSBmdW5jdGlvbiAoIGNsZWFyQ29sb3IsIGNsZWFyQWxwaGEgKSB7XG5cblx0VEhSRUUuUGFzcy5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5uZWVkc1N3YXAgPSBmYWxzZTtcblxuXHR0aGlzLmNsZWFyQ29sb3IgPSAoIGNsZWFyQ29sb3IgIT09IHVuZGVmaW5lZCApID8gY2xlYXJDb2xvciA6IDB4MDAwMDAwO1xuXHR0aGlzLmNsZWFyQWxwaGEgPSAoIGNsZWFyQWxwaGEgIT09IHVuZGVmaW5lZCApID8gY2xlYXJBbHBoYSA6IDA7XG5cbn07XG5cblRIUkVFLkNsZWFyUGFzcy5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBUSFJFRS5QYXNzLnByb3RvdHlwZSApLCB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLkNsZWFyUGFzcyxcblxuXHRyZW5kZXI6IGZ1bmN0aW9uICggcmVuZGVyZXIsIHdyaXRlQnVmZmVyLCByZWFkQnVmZmVyLCBkZWx0YSwgbWFza0FjdGl2ZSApIHtcblxuXHRcdHZhciBvbGRDbGVhckNvbG9yLCBvbGRDbGVhckFscGhhO1xuXG5cdFx0aWYgKCB0aGlzLmNsZWFyQ29sb3IgKSB7XG5cblx0XHRcdG9sZENsZWFyQ29sb3IgPSByZW5kZXJlci5nZXRDbGVhckNvbG9yKCkuZ2V0SGV4KCk7XG5cdFx0XHRvbGRDbGVhckFscGhhID0gcmVuZGVyZXIuZ2V0Q2xlYXJBbHBoYSgpO1xuXG5cdFx0XHRyZW5kZXJlci5zZXRDbGVhckNvbG9yKCB0aGlzLmNsZWFyQ29sb3IsIHRoaXMuY2xlYXJBbHBoYSApO1xuXG5cdFx0fVxuXG5cdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCB0aGlzLnJlbmRlclRvU2NyZWVuID8gbnVsbCA6IHJlYWRCdWZmZXIgKTtcblx0XHRyZW5kZXJlci5jbGVhcigpO1xuXG5cdFx0aWYgKCB0aGlzLmNsZWFyQ29sb3IgKSB7XG5cblx0XHRcdHJlbmRlcmVyLnNldENsZWFyQ29sb3IoIG9sZENsZWFyQ29sb3IsIG9sZENsZWFyQWxwaGEgKTtcblxuXHRcdH1cblxuXHR9XG5cbn0gKTtcbiIsIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqL1xuXG5USFJFRS5FZmZlY3RDb21wb3NlciA9IGZ1bmN0aW9uICggcmVuZGVyZXIsIHJlbmRlclRhcmdldCApIHtcblxuXHR0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cblx0aWYgKCByZW5kZXJUYXJnZXQgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdHZhciBwYXJhbWV0ZXJzID0ge1xuXHRcdFx0bWluRmlsdGVyOiBUSFJFRS5MaW5lYXJGaWx0ZXIsXG5cdFx0XHRtYWdGaWx0ZXI6IFRIUkVFLkxpbmVhckZpbHRlcixcblx0XHRcdGZvcm1hdDogVEhSRUUuUkdCQUZvcm1hdCxcblx0XHRcdHN0ZW5jaWxCdWZmZXI6IGZhbHNlXG5cdFx0fTtcblx0XHR2YXIgc2l6ZSA9IHJlbmRlcmVyLmdldFNpemUoKTtcblx0XHRyZW5kZXJUYXJnZXQgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQoIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0LCBwYXJhbWV0ZXJzICk7XG5cblx0fVxuXG5cdHRoaXMucmVuZGVyVGFyZ2V0MSA9IHJlbmRlclRhcmdldDtcblx0dGhpcy5yZW5kZXJUYXJnZXQyID0gcmVuZGVyVGFyZ2V0LmNsb25lKCk7XG5cblx0dGhpcy53cml0ZUJ1ZmZlciA9IHRoaXMucmVuZGVyVGFyZ2V0MTtcblx0dGhpcy5yZWFkQnVmZmVyID0gdGhpcy5yZW5kZXJUYXJnZXQyO1xuXG5cdHRoaXMucGFzc2VzID0gW107XG5cblx0aWYgKCBUSFJFRS5Db3B5U2hhZGVyID09PSB1bmRlZmluZWQgKVxuXHRcdGNvbnNvbGUuZXJyb3IoIFwiVEhSRUUuRWZmZWN0Q29tcG9zZXIgcmVsaWVzIG9uIFRIUkVFLkNvcHlTaGFkZXJcIiApO1xuXG5cdHRoaXMuY29weVBhc3MgPSBuZXcgVEhSRUUuU2hhZGVyUGFzcyggVEhSRUUuQ29weVNoYWRlciApO1xuXG59O1xuXG5PYmplY3QuYXNzaWduKCBUSFJFRS5FZmZlY3RDb21wb3Nlci5wcm90b3R5cGUsIHtcblxuXHRzd2FwQnVmZmVyczogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgdG1wID0gdGhpcy5yZWFkQnVmZmVyO1xuXHRcdHRoaXMucmVhZEJ1ZmZlciA9IHRoaXMud3JpdGVCdWZmZXI7XG5cdFx0dGhpcy53cml0ZUJ1ZmZlciA9IHRtcDtcblxuXHR9LFxuXG5cdGFkZFBhc3M6IGZ1bmN0aW9uICggcGFzcyApIHtcblxuXHRcdHRoaXMucGFzc2VzLnB1c2goIHBhc3MgKTtcblxuXHRcdHZhciBzaXplID0gdGhpcy5yZW5kZXJlci5nZXRTaXplKCk7XG5cdFx0cGFzcy5zZXRTaXplKCBzaXplLndpZHRoLCBzaXplLmhlaWdodCApO1xuXG5cdH0sXG5cblx0aW5zZXJ0UGFzczogZnVuY3Rpb24gKCBwYXNzLCBpbmRleCApIHtcblxuXHRcdHRoaXMucGFzc2VzLnNwbGljZSggaW5kZXgsIDAsIHBhc3MgKTtcblxuXHR9LFxuXG5cdHJlbmRlcjogZnVuY3Rpb24gKCBkZWx0YSApIHtcblxuXHRcdHZhciBtYXNrQWN0aXZlID0gZmFsc2U7XG5cblx0XHR2YXIgcGFzcywgaSwgaWwgPSB0aGlzLnBhc3Nlcy5sZW5ndGg7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRwYXNzID0gdGhpcy5wYXNzZXNbIGkgXTtcblxuXHRcdFx0aWYgKCBwYXNzLmVuYWJsZWQgPT09IGZhbHNlICkgY29udGludWU7XG5cblx0XHRcdHBhc3MucmVuZGVyKCB0aGlzLnJlbmRlcmVyLCB0aGlzLndyaXRlQnVmZmVyLCB0aGlzLnJlYWRCdWZmZXIsIGRlbHRhLCBtYXNrQWN0aXZlICk7XG5cblx0XHRcdGlmICggcGFzcy5uZWVkc1N3YXAgKSB7XG5cblx0XHRcdFx0aWYgKCBtYXNrQWN0aXZlICkge1xuXG5cdFx0XHRcdFx0dmFyIGNvbnRleHQgPSB0aGlzLnJlbmRlcmVyLmNvbnRleHQ7XG5cblx0XHRcdFx0XHRjb250ZXh0LnN0ZW5jaWxGdW5jKCBjb250ZXh0Lk5PVEVRVUFMLCAxLCAweGZmZmZmZmZmICk7XG5cblx0XHRcdFx0XHR0aGlzLmNvcHlQYXNzLnJlbmRlciggdGhpcy5yZW5kZXJlciwgdGhpcy53cml0ZUJ1ZmZlciwgdGhpcy5yZWFkQnVmZmVyLCBkZWx0YSApO1xuXG5cdFx0XHRcdFx0Y29udGV4dC5zdGVuY2lsRnVuYyggY29udGV4dC5FUVVBTCwgMSwgMHhmZmZmZmZmZiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLnN3YXBCdWZmZXJzKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBUSFJFRS5NYXNrUGFzcyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggcGFzcyBpbnN0YW5jZW9mIFRIUkVFLk1hc2tQYXNzICkge1xuXG5cdFx0XHRcdFx0bWFza0FjdGl2ZSA9IHRydWU7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggcGFzcyBpbnN0YW5jZW9mIFRIUkVFLkNsZWFyTWFza1Bhc3MgKSB7XG5cblx0XHRcdFx0XHRtYXNrQWN0aXZlID0gZmFsc2U7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fSxcblxuXHRyZXNldDogZnVuY3Rpb24gKCByZW5kZXJUYXJnZXQgKSB7XG5cblx0XHRpZiAoIHJlbmRlclRhcmdldCA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR2YXIgc2l6ZSA9IHRoaXMucmVuZGVyZXIuZ2V0U2l6ZSgpO1xuXG5cdFx0XHRyZW5kZXJUYXJnZXQgPSB0aGlzLnJlbmRlclRhcmdldDEuY2xvbmUoKTtcblx0XHRcdHJlbmRlclRhcmdldC5zZXRTaXplKCBzaXplLndpZHRoLCBzaXplLmhlaWdodCApO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5yZW5kZXJUYXJnZXQxLmRpc3Bvc2UoKTtcblx0XHR0aGlzLnJlbmRlclRhcmdldDIuZGlzcG9zZSgpO1xuXHRcdHRoaXMucmVuZGVyVGFyZ2V0MSA9IHJlbmRlclRhcmdldDtcblx0XHR0aGlzLnJlbmRlclRhcmdldDIgPSByZW5kZXJUYXJnZXQuY2xvbmUoKTtcblxuXHRcdHRoaXMud3JpdGVCdWZmZXIgPSB0aGlzLnJlbmRlclRhcmdldDE7XG5cdFx0dGhpcy5yZWFkQnVmZmVyID0gdGhpcy5yZW5kZXJUYXJnZXQyO1xuXG5cdH0sXG5cblx0c2V0U2l6ZTogZnVuY3Rpb24gKCB3aWR0aCwgaGVpZ2h0ICkge1xuXG5cdFx0dGhpcy5yZW5kZXJUYXJnZXQxLnNldFNpemUoIHdpZHRoLCBoZWlnaHQgKTtcblx0XHR0aGlzLnJlbmRlclRhcmdldDIuc2V0U2l6ZSggd2lkdGgsIGhlaWdodCApO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy5wYXNzZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHR0aGlzLnBhc3Nlc1tpXS5zZXRTaXplKCB3aWR0aCwgaGVpZ2h0ICk7XG5cblx0XHR9XG5cblx0fVxuXG59ICk7XG5cblxuVEhSRUUuUGFzcyA9IGZ1bmN0aW9uICgpIHtcblxuXHQvLyBpZiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3MgaXMgcHJvY2Vzc2VkIGJ5IHRoZSBjb21wb3NlclxuXHR0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG5cdC8vIGlmIHNldCB0byB0cnVlLCB0aGUgcGFzcyBpbmRpY2F0ZXMgdG8gc3dhcCByZWFkIGFuZCB3cml0ZSBidWZmZXIgYWZ0ZXIgcmVuZGVyaW5nXG5cdHRoaXMubmVlZHNTd2FwID0gdHJ1ZTtcblxuXHQvLyBpZiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3MgY2xlYXJzIGl0cyBidWZmZXIgYmVmb3JlIHJlbmRlcmluZ1xuXHR0aGlzLmNsZWFyID0gZmFsc2U7XG5cblx0Ly8gaWYgc2V0IHRvIHRydWUsIHRoZSByZXN1bHQgb2YgdGhlIHBhc3MgaXMgcmVuZGVyZWQgdG8gc2NyZWVuXG5cdHRoaXMucmVuZGVyVG9TY3JlZW4gPSBmYWxzZTtcblxufTtcblxuT2JqZWN0LmFzc2lnbiggVEhSRUUuUGFzcy5wcm90b3R5cGUsIHtcblxuXHRzZXRTaXplOiBmdW5jdGlvbiggd2lkdGgsIGhlaWdodCApIHt9LFxuXG5cdHJlbmRlcjogZnVuY3Rpb24gKCByZW5kZXJlciwgd3JpdGVCdWZmZXIsIHJlYWRCdWZmZXIsIGRlbHRhLCBtYXNrQWN0aXZlICkge1xuXG5cdFx0Y29uc29sZS5lcnJvciggXCJUSFJFRS5QYXNzOiAucmVuZGVyKCkgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBkZXJpdmVkIHBhc3MuXCIgKTtcblxuXHR9XG5cbn0gKTtcbiIsIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqL1xuXG5USFJFRS5NYXNrUGFzcyA9IGZ1bmN0aW9uICggc2NlbmUsIGNhbWVyYSApIHtcblxuXHRUSFJFRS5QYXNzLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnNjZW5lID0gc2NlbmU7XG5cdHRoaXMuY2FtZXJhID0gY2FtZXJhO1xuXG5cdHRoaXMuY2xlYXIgPSB0cnVlO1xuXHR0aGlzLm5lZWRzU3dhcCA9IGZhbHNlO1xuXG5cdHRoaXMuaW52ZXJzZSA9IGZhbHNlO1xuXG59O1xuXG5USFJFRS5NYXNrUGFzcy5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKCBPYmplY3QuY3JlYXRlKCBUSFJFRS5QYXNzLnByb3RvdHlwZSApLCB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLk1hc2tQYXNzLFxuXG5cdHJlbmRlcjogZnVuY3Rpb24gKCByZW5kZXJlciwgd3JpdGVCdWZmZXIsIHJlYWRCdWZmZXIsIGRlbHRhLCBtYXNrQWN0aXZlICkge1xuXG5cdFx0dmFyIGNvbnRleHQgPSByZW5kZXJlci5jb250ZXh0O1xuXHRcdHZhciBzdGF0ZSA9IHJlbmRlcmVyLnN0YXRlO1xuXG5cdFx0Ly8gZG9uJ3QgdXBkYXRlIGNvbG9yIG9yIGRlcHRoXG5cblx0XHRzdGF0ZS5idWZmZXJzLmNvbG9yLnNldE1hc2soIGZhbHNlICk7XG5cdFx0c3RhdGUuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCBmYWxzZSApO1xuXG5cdFx0Ly8gbG9jayBidWZmZXJzXG5cblx0XHRzdGF0ZS5idWZmZXJzLmNvbG9yLnNldExvY2tlZCggdHJ1ZSApO1xuXHRcdHN0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TG9ja2VkKCB0cnVlICk7XG5cblx0XHQvLyBzZXQgdXAgc3RlbmNpbFxuXG5cdFx0dmFyIHdyaXRlVmFsdWUsIGNsZWFyVmFsdWU7XG5cblx0XHRpZiAoIHRoaXMuaW52ZXJzZSApIHtcblxuXHRcdFx0d3JpdGVWYWx1ZSA9IDA7XG5cdFx0XHRjbGVhclZhbHVlID0gMTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHdyaXRlVmFsdWUgPSAxO1xuXHRcdFx0Y2xlYXJWYWx1ZSA9IDA7XG5cblx0XHR9XG5cblx0XHRzdGF0ZS5idWZmZXJzLnN0ZW5jaWwuc2V0VGVzdCggdHJ1ZSApO1xuXHRcdHN0YXRlLmJ1ZmZlcnMuc3RlbmNpbC5zZXRPcCggY29udGV4dC5SRVBMQUNFLCBjb250ZXh0LlJFUExBQ0UsIGNvbnRleHQuUkVQTEFDRSApO1xuXHRcdHN0YXRlLmJ1ZmZlcnMuc3RlbmNpbC5zZXRGdW5jKCBjb250ZXh0LkFMV0FZUywgd3JpdGVWYWx1ZSwgMHhmZmZmZmZmZiApO1xuXHRcdHN0YXRlLmJ1ZmZlcnMuc3RlbmNpbC5zZXRDbGVhciggY2xlYXJWYWx1ZSApO1xuXG5cdFx0Ly8gZHJhdyBpbnRvIHRoZSBzdGVuY2lsIGJ1ZmZlclxuXG5cdFx0cmVuZGVyZXIucmVuZGVyKCB0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSwgcmVhZEJ1ZmZlciwgdGhpcy5jbGVhciApO1xuXHRcdHJlbmRlcmVyLnJlbmRlciggdGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHdyaXRlQnVmZmVyLCB0aGlzLmNsZWFyICk7XG5cblx0XHQvLyB1bmxvY2sgY29sb3IgYW5kIGRlcHRoIGJ1ZmZlciBmb3Igc3Vic2VxdWVudCByZW5kZXJpbmdcblxuXHRcdHN0YXRlLmJ1ZmZlcnMuY29sb3Iuc2V0TG9ja2VkKCBmYWxzZSApO1xuXHRcdHN0YXRlLmJ1ZmZlcnMuZGVwdGguc2V0TG9ja2VkKCBmYWxzZSApO1xuXG5cdFx0Ly8gb25seSByZW5kZXIgd2hlcmUgc3RlbmNpbCBpcyBzZXQgdG8gMVxuXG5cdFx0c3RhdGUuYnVmZmVycy5zdGVuY2lsLnNldEZ1bmMoIGNvbnRleHQuRVFVQUwsIDEsIDB4ZmZmZmZmZmYgKTsgIC8vIGRyYXcgaWYgPT0gMVxuXHRcdHN0YXRlLmJ1ZmZlcnMuc3RlbmNpbC5zZXRPcCggY29udGV4dC5LRUVQLCBjb250ZXh0LktFRVAsIGNvbnRleHQuS0VFUCApO1xuXG5cdH1cblxufSApO1xuXG5cblRIUkVFLkNsZWFyTWFza1Bhc3MgPSBmdW5jdGlvbiAoKSB7XG5cblx0VEhSRUUuUGFzcy5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5uZWVkc1N3YXAgPSBmYWxzZTtcblxufTtcblxuVEhSRUUuQ2xlYXJNYXNrUGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5QYXNzLnByb3RvdHlwZSApO1xuXG5PYmplY3QuYXNzaWduKCBUSFJFRS5DbGVhck1hc2tQYXNzLnByb3RvdHlwZSwge1xuXG5cdHJlbmRlcjogZnVuY3Rpb24gKCByZW5kZXJlciwgd3JpdGVCdWZmZXIsIHJlYWRCdWZmZXIsIGRlbHRhLCBtYXNrQWN0aXZlICkge1xuXG5cdFx0cmVuZGVyZXIuc3RhdGUuYnVmZmVycy5zdGVuY2lsLnNldFRlc3QoIGZhbHNlICk7XG5cblx0fVxuXG59ICk7XG4iLCIvKipcbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXG4gKi9cblxuVEhSRUUuUmVuZGVyUGFzcyA9IGZ1bmN0aW9uICggc2NlbmUsIGNhbWVyYSwgb3ZlcnJpZGVNYXRlcmlhbCwgY2xlYXJDb2xvciwgY2xlYXJBbHBoYSApIHtcblxuXHRUSFJFRS5QYXNzLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnNjZW5lID0gc2NlbmU7XG5cdHRoaXMuY2FtZXJhID0gY2FtZXJhO1xuXG5cdHRoaXMub3ZlcnJpZGVNYXRlcmlhbCA9IG92ZXJyaWRlTWF0ZXJpYWw7XG5cblx0dGhpcy5jbGVhckNvbG9yID0gY2xlYXJDb2xvcjtcblx0dGhpcy5jbGVhckFscGhhID0gKCBjbGVhckFscGhhICE9PSB1bmRlZmluZWQgKSA/IGNsZWFyQWxwaGEgOiAwO1xuXG5cdHRoaXMuY2xlYXIgPSB0cnVlO1xuXHR0aGlzLm5lZWRzU3dhcCA9IGZhbHNlO1xuXG59O1xuXG5USFJFRS5SZW5kZXJQYXNzLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24oIE9iamVjdC5jcmVhdGUoIFRIUkVFLlBhc3MucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogVEhSRUUuUmVuZGVyUGFzcyxcblxuXHRyZW5kZXI6IGZ1bmN0aW9uICggcmVuZGVyZXIsIHdyaXRlQnVmZmVyLCByZWFkQnVmZmVyLCBkZWx0YSwgbWFza0FjdGl2ZSApIHtcblxuXHRcdHZhciBvbGRBdXRvQ2xlYXIgPSByZW5kZXJlci5hdXRvQ2xlYXI7XG5cdFx0cmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XG5cblx0XHR0aGlzLnNjZW5lLm92ZXJyaWRlTWF0ZXJpYWwgPSB0aGlzLm92ZXJyaWRlTWF0ZXJpYWw7XG5cblx0XHR2YXIgb2xkQ2xlYXJDb2xvciwgb2xkQ2xlYXJBbHBoYTtcblxuXHRcdGlmICggdGhpcy5jbGVhckNvbG9yICkge1xuXG5cdFx0XHRvbGRDbGVhckNvbG9yID0gcmVuZGVyZXIuZ2V0Q2xlYXJDb2xvcigpLmdldEhleCgpO1xuXHRcdFx0b2xkQ2xlYXJBbHBoYSA9IHJlbmRlcmVyLmdldENsZWFyQWxwaGEoKTtcblxuXHRcdFx0cmVuZGVyZXIuc2V0Q2xlYXJDb2xvciggdGhpcy5jbGVhckNvbG9yLCB0aGlzLmNsZWFyQWxwaGEgKTtcblxuXHRcdH1cblxuXHRcdHJlbmRlcmVyLnJlbmRlciggdGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRoaXMucmVuZGVyVG9TY3JlZW4gPyBudWxsIDogcmVhZEJ1ZmZlciwgdGhpcy5jbGVhciApO1xuXG5cdFx0aWYgKCB0aGlzLmNsZWFyQ29sb3IgKSB7XG5cblx0XHRcdHJlbmRlcmVyLnNldENsZWFyQ29sb3IoIG9sZENsZWFyQ29sb3IsIG9sZENsZWFyQWxwaGEgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMuc2NlbmUub3ZlcnJpZGVNYXRlcmlhbCA9IG51bGw7XG5cdFx0cmVuZGVyZXIuYXV0b0NsZWFyID0gb2xkQXV0b0NsZWFyO1xuXHR9XG5cbn0gKTtcbiIsIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqL1xuXG5USFJFRS5TaGFkZXJQYXNzID0gZnVuY3Rpb24gKCBzaGFkZXIsIHRleHR1cmVJRCApIHtcblxuXHRUSFJFRS5QYXNzLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnRleHR1cmVJRCA9ICggdGV4dHVyZUlEICE9PSB1bmRlZmluZWQgKSA/IHRleHR1cmVJRCA6IFwidERpZmZ1c2VcIjtcblxuXHRpZiAoIHNoYWRlciBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsICkge1xuXG5cdFx0dGhpcy51bmlmb3JtcyA9IHNoYWRlci51bmlmb3JtcztcblxuXHRcdHRoaXMubWF0ZXJpYWwgPSBzaGFkZXI7XG5cblx0fSBlbHNlIGlmICggc2hhZGVyICkge1xuXG5cdFx0dGhpcy51bmlmb3JtcyA9IFRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoIHNoYWRlci51bmlmb3JtcyApO1xuXG5cdFx0dGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xuXG5cdFx0XHRkZWZpbmVzOiBzaGFkZXIuZGVmaW5lcyB8fCB7fSxcblx0XHRcdHVuaWZvcm1zOiB0aGlzLnVuaWZvcm1zLFxuXHRcdFx0dmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyLFxuXHRcdFx0ZnJhZ21lbnRTaGFkZXI6IHNoYWRlci5mcmFnbWVudFNoYWRlclxuXG5cdFx0fSApO1xuXG5cdH1cblxuXHR0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoIC0gMSwgMSwgMSwgLSAxLCAwLCAxICk7XG5cdHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuXHR0aGlzLnF1YWQgPSBuZXcgVEhSRUUuTWVzaCggbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoIDIsIDIgKSwgbnVsbCApO1xuXHR0aGlzLnNjZW5lLmFkZCggdGhpcy5xdWFkICk7XG5cbn07XG5cblRIUkVFLlNoYWRlclBhc3MucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbiggT2JqZWN0LmNyZWF0ZSggVEhSRUUuUGFzcy5wcm90b3R5cGUgKSwge1xuXG5cdGNvbnN0cnVjdG9yOiBUSFJFRS5TaGFkZXJQYXNzLFxuXG5cdHJlbmRlcjogZnVuY3Rpb24oIHJlbmRlcmVyLCB3cml0ZUJ1ZmZlciwgcmVhZEJ1ZmZlciwgZGVsdGEsIG1hc2tBY3RpdmUgKSB7XG5cblx0XHRpZiAoIHRoaXMudW5pZm9ybXNbIHRoaXMudGV4dHVyZUlEIF0gKSB7XG5cblx0XHRcdHRoaXMudW5pZm9ybXNbIHRoaXMudGV4dHVyZUlEIF0udmFsdWUgPSByZWFkQnVmZmVyLnRleHR1cmU7XG5cblx0XHR9XG5cblx0XHR0aGlzLnF1YWQubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsO1xuXG5cdFx0aWYgKCB0aGlzLnJlbmRlclRvU2NyZWVuICkge1xuXG5cdFx0XHRyZW5kZXJlci5yZW5kZXIoIHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZW5kZXJlci5yZW5kZXIoIHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhLCB3cml0ZUJ1ZmZlciwgdGhpcy5jbGVhciApO1xuXG5cdFx0fVxuXG5cdH1cblxufSApO1xuIiwiLyoqXG4gKiBAYXV0aG9yIGFsdGVyZWRxIC8gaHR0cDovL2FsdGVyZWRxdWFsaWEuY29tL1xuICovXG5cblRIUkVFLlRleHR1cmVQYXNzID0gZnVuY3Rpb24gKCBtYXAsIG9wYWNpdHkgKSB7XG5cblx0VEhSRUUuUGFzcy5jYWxsKCB0aGlzICk7XG5cblx0aWYgKCBUSFJFRS5Db3B5U2hhZGVyID09PSB1bmRlZmluZWQgKVxuXHRcdGNvbnNvbGUuZXJyb3IoIFwiVEhSRUUuVGV4dHVyZVBhc3MgcmVsaWVzIG9uIFRIUkVFLkNvcHlTaGFkZXJcIiApO1xuXG5cdHZhciBzaGFkZXIgPSBUSFJFRS5Db3B5U2hhZGVyO1xuXG5cdHRoaXMubWFwID0gbWFwO1xuXHR0aGlzLm9wYWNpdHkgPSAoIG9wYWNpdHkgIT09IHVuZGVmaW5lZCApID8gb3BhY2l0eSA6IDEuMDtcblxuXHR0aGlzLnVuaWZvcm1zID0gVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZSggc2hhZGVyLnVuaWZvcm1zICk7XG5cblx0dGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCgge1xuXG5cdFx0dW5pZm9ybXM6IHRoaXMudW5pZm9ybXMsXG5cdFx0dmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyLFxuXHRcdGZyYWdtZW50U2hhZGVyOiBzaGFkZXIuZnJhZ21lbnRTaGFkZXIsXG5cdFx0ZGVwdGhUZXN0OiBmYWxzZSxcblx0XHRkZXB0aFdyaXRlOiBmYWxzZVxuXG5cdH0gKTtcblxuXHR0aGlzLm5lZWRzU3dhcCA9IGZhbHNlO1xuXG5cdHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSggLSAxLCAxLCAxLCAtIDEsIDAsIDEgKTtcblx0dGhpcy5zY2VuZSAgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuXHR0aGlzLnF1YWQgPSBuZXcgVEhSRUUuTWVzaCggbmV3IFRIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkoIDIsIDIgKSwgbnVsbCApO1xuXHR0aGlzLnNjZW5lLmFkZCggdGhpcy5xdWFkICk7XG5cbn07XG5cblRIUkVFLlRleHR1cmVQYXNzLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24oIE9iamVjdC5jcmVhdGUoIFRIUkVFLlBhc3MucHJvdG90eXBlICksIHtcblxuXHRjb25zdHJ1Y3RvcjogVEhSRUUuVGV4dHVyZVBhc3MsXG5cblx0cmVuZGVyOiBmdW5jdGlvbiAoIHJlbmRlcmVyLCB3cml0ZUJ1ZmZlciwgcmVhZEJ1ZmZlciwgZGVsdGEsIG1hc2tBY3RpdmUgKSB7XG5cblx0XHR2YXIgb2xkQXV0b0NsZWFyID0gcmVuZGVyZXIuYXV0b0NsZWFyO1xuXHRcdHJlbmRlcmVyLmF1dG9DbGVhciA9IGZhbHNlO1xuXG5cdFx0dGhpcy5xdWFkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcblxuXHRcdHRoaXMudW5pZm9ybXNbIFwib3BhY2l0eVwiIF0udmFsdWUgPSB0aGlzLm9wYWNpdHk7XG5cdFx0dGhpcy51bmlmb3Jtc1sgXCJ0RGlmZnVzZVwiIF0udmFsdWUgPSB0aGlzLm1hcDtcblx0XHR0aGlzLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gKCB0aGlzLm9wYWNpdHkgPCAxLjAgKTtcblxuXHRcdHJlbmRlcmVyLnJlbmRlciggdGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsIHRoaXMucmVuZGVyVG9TY3JlZW4gPyBudWxsIDogcmVhZEJ1ZmZlciwgdGhpcy5jbGVhciApO1xuXG5cdFx0cmVuZGVyZXIuYXV0b0NsZWFyID0gb2xkQXV0b0NsZWFyO1xuXHR9XG5cbn0gKTtcbiIsIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqXG4gKiBGdWxsLXNjcmVlbiB0ZXh0dXJlZCBxdWFkIHNoYWRlclxuICovXG5cblRIUkVFLkNvcHlTaGFkZXIgPSB7XG5cblx0dW5pZm9ybXM6IHtcblxuXHRcdFwidERpZmZ1c2VcIjogeyB2YWx1ZTogbnVsbCB9LFxuXHRcdFwib3BhY2l0eVwiOiAgeyB2YWx1ZTogMS4wIH1cblxuXHR9LFxuXG5cdHZlcnRleFNoYWRlcjogW1xuXG5cdFx0XCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFxuXG5cdFx0XCJ2b2lkIG1haW4oKSB7XCIsXG5cblx0XHRcdFwidlV2ID0gdXY7XCIsXG5cdFx0XHRcImdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcIixcblxuXHRcdFwifVwiXG5cblx0XS5qb2luKCBcIlxcblwiICksXG5cblx0ZnJhZ21lbnRTaGFkZXI6IFtcblxuXHRcdFwidW5pZm9ybSBmbG9hdCBvcGFjaXR5O1wiLFxuXG5cdFx0XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RGlmZnVzZTtcIixcblxuXHRcdFwidmFyeWluZyB2ZWMyIHZVdjtcIixcblxuXHRcdFwidm9pZCBtYWluKCkge1wiLFxuXG5cdFx0XHRcInZlYzQgdGV4ZWwgPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2VXYgKTtcIixcblx0XHRcdFwiZ2xfRnJhZ0NvbG9yID0gb3BhY2l0eSAqIHRleGVsO1wiLFxuXG5cdFx0XCJ9XCJcblxuXHRdLmpvaW4oIFwiXFxuXCIgKVxuXG59O1xuIiwiLyoqXG4gKiBAYXV0aG9yIHp6ODUgLyBodHRwOi8vd3d3LmxhYjRnYW1lcy5uZXQveno4NS9ibG9nXG4gKlxuICogVHdvIHBhc3MgR2F1c3NpYW4gYmx1ciBmaWx0ZXIgKGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGJsdXIgc2hhZGVycylcbiAqIC0gZGVzY3JpYmVkIGluIGh0dHA6Ly93d3cuZ2FtZXJlbmRlcmluZy5jb20vMjAwOC8xMC8xMS9nYXVzc2lhbi1ibHVyLWZpbHRlci1zaGFkZXIvXG4gKiAgIGFuZCB1c2VkIGluIGh0dHA6Ly93d3cuY2FrZTIzLmRlL3RyYXZlbGluZy13YXZlZnJvbnRzLWxpdC11cC5odG1sXG4gKlxuICogLSA5IHNhbXBsZXMgcGVyIHBhc3NcbiAqIC0gc3RhbmRhcmQgZGV2aWF0aW9uIDIuN1xuICogLSBcImhcIiBhbmQgXCJ2XCIgcGFyYW1ldGVycyBzaG91bGQgYmUgc2V0IHRvIFwiMSAvIHdpZHRoXCIgYW5kIFwiMSAvIGhlaWdodFwiXG4gKi9cblxuVEhSRUUuSG9yaXpvbnRhbEJsdXJTaGFkZXIgPSB7XG5cblx0dW5pZm9ybXM6IHtcblxuXHRcdFwidERpZmZ1c2VcIjogeyB2YWx1ZTogbnVsbCB9LFxuXHRcdFwiaFwiOiAgICAgICAgeyB2YWx1ZTogMS4wIC8gNTEyLjAgfVxuXG5cdH0sXG5cblx0dmVydGV4U2hhZGVyOiBbXG5cblx0XHRcInZhcnlpbmcgdmVjMiB2VXY7XCIsXG5cblx0XHRcInZvaWQgbWFpbigpIHtcIixcblxuXHRcdFx0XCJ2VXYgPSB1djtcIixcblx0XHRcdFwiZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFxuXG5cdFx0XCJ9XCJcblxuXHRdLmpvaW4oIFwiXFxuXCIgKSxcblxuXHRmcmFnbWVudFNoYWRlcjogW1xuXG5cdFx0XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RGlmZnVzZTtcIixcblx0XHRcInVuaWZvcm0gZmxvYXQgaDtcIixcblxuXHRcdFwidmFyeWluZyB2ZWMyIHZVdjtcIixcblxuXHRcdFwidm9pZCBtYWluKCkge1wiLFxuXG5cdFx0XHRcInZlYzQgc3VtID0gdmVjNCggMC4wICk7XCIsXG5cblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54IC0gNC4wICogaCwgdlV2LnkgKSApICogMC4wNTE7XCIsXG5cdFx0XHRcInN1bSArPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2ZWMyKCB2VXYueCAtIDMuMCAqIGgsIHZVdi55ICkgKSAqIDAuMDkxODtcIixcblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54IC0gMi4wICogaCwgdlV2LnkgKSApICogMC4xMjI0NTtcIixcblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54IC0gMS4wICogaCwgdlV2LnkgKSApICogMC4xNTMxO1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LngsIHZVdi55ICkgKSAqIDAuMTYzMztcIixcblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54ICsgMS4wICogaCwgdlV2LnkgKSApICogMC4xNTMxO1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LnggKyAyLjAgKiBoLCB2VXYueSApICkgKiAwLjEyMjQ1O1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LnggKyAzLjAgKiBoLCB2VXYueSApICkgKiAwLjA5MTg7XCIsXG5cdFx0XHRcInN1bSArPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2ZWMyKCB2VXYueCArIDQuMCAqIGgsIHZVdi55ICkgKSAqIDAuMDUxO1wiLFxuXG5cdFx0XHRcImdsX0ZyYWdDb2xvciA9IHN1bTtcIixcblxuXHRcdFwifVwiXG5cblx0XS5qb2luKCBcIlxcblwiIClcblxufTtcbiIsIi8qKlxuICogQGF1dGhvciB6ejg1IC8gaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZ1xuICpcbiAqIFR3byBwYXNzIEdhdXNzaWFuIGJsdXIgZmlsdGVyIChob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBibHVyIHNoYWRlcnMpXG4gKiAtIGRlc2NyaWJlZCBpbiBodHRwOi8vd3d3LmdhbWVyZW5kZXJpbmcuY29tLzIwMDgvMTAvMTEvZ2F1c3NpYW4tYmx1ci1maWx0ZXItc2hhZGVyL1xuICogICBhbmQgdXNlZCBpbiBodHRwOi8vd3d3LmNha2UyMy5kZS90cmF2ZWxpbmctd2F2ZWZyb250cy1saXQtdXAuaHRtbFxuICpcbiAqIC0gOSBzYW1wbGVzIHBlciBwYXNzXG4gKiAtIHN0YW5kYXJkIGRldmlhdGlvbiAyLjdcbiAqIC0gXCJoXCIgYW5kIFwidlwiIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNldCB0byBcIjEgLyB3aWR0aFwiIGFuZCBcIjEgLyBoZWlnaHRcIlxuICovXG5cblRIUkVFLlZlcnRpY2FsQmx1clNoYWRlciA9IHtcblxuXHR1bmlmb3Jtczoge1xuXG5cdFx0XCJ0RGlmZnVzZVwiOiB7IHZhbHVlOiBudWxsIH0sXG5cdFx0XCJ2XCI6ICAgICAgICB7IHZhbHVlOiAxLjAgLyA1MTIuMCB9XG5cblx0fSxcblxuXHR2ZXJ0ZXhTaGFkZXI6IFtcblxuXHRcdFwidmFyeWluZyB2ZWMyIHZVdjtcIixcblxuXHRcdFwidm9pZCBtYWluKCkge1wiLFxuXG5cdFx0XHRcInZVdiA9IHV2O1wiLFxuXHRcdFx0XCJnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XCIsXG5cblx0XHRcIn1cIlxuXG5cdF0uam9pbiggXCJcXG5cIiApLFxuXG5cdGZyYWdtZW50U2hhZGVyOiBbXG5cblx0XHRcInVuaWZvcm0gc2FtcGxlcjJEIHREaWZmdXNlO1wiLFxuXHRcdFwidW5pZm9ybSBmbG9hdCB2O1wiLFxuXG5cdFx0XCJ2YXJ5aW5nIHZlYzIgdlV2O1wiLFxuXG5cdFx0XCJ2b2lkIG1haW4oKSB7XCIsXG5cblx0XHRcdFwidmVjNCBzdW0gPSB2ZWM0KCAwLjAgKTtcIixcblxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LngsIHZVdi55IC0gNC4wICogdiApICkgKiAwLjA1MTtcIixcblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54LCB2VXYueSAtIDMuMCAqIHYgKSApICogMC4wOTE4O1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LngsIHZVdi55IC0gMi4wICogdiApICkgKiAwLjEyMjQ1O1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LngsIHZVdi55IC0gMS4wICogdiApICkgKiAwLjE1MzE7XCIsXG5cdFx0XHRcInN1bSArPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2ZWMyKCB2VXYueCwgdlV2LnkgKSApICogMC4xNjMzO1wiLFxuXHRcdFx0XCJzdW0gKz0gdGV4dHVyZTJEKCB0RGlmZnVzZSwgdmVjMiggdlV2LngsIHZVdi55ICsgMS4wICogdiApICkgKiAwLjE1MzE7XCIsXG5cdFx0XHRcInN1bSArPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2ZWMyKCB2VXYueCwgdlV2LnkgKyAyLjAgKiB2ICkgKSAqIDAuMTIyNDU7XCIsXG5cdFx0XHRcInN1bSArPSB0ZXh0dXJlMkQoIHREaWZmdXNlLCB2ZWMyKCB2VXYueCwgdlV2LnkgKyAzLjAgKiB2ICkgKSAqIDAuMDkxODtcIixcblx0XHRcdFwic3VtICs9IHRleHR1cmUyRCggdERpZmZ1c2UsIHZlYzIoIHZVdi54LCB2VXYueSArIDQuMCAqIHYgKSApICogMC4wNTE7XCIsXG5cblx0XHRcdFwiZ2xfRnJhZ0NvbG9yID0gc3VtO1wiLFxuXG5cdFx0XCJ9XCJcblxuXHRdLmpvaW4oIFwiXFxuXCIgKVxuXG59O1xuIiwiXHJcblxyXG5leHBvcnRzLmRyYXdDaGFyYWN0ZXIgPSBmdW5jdGlvbiBkcmF3Q2hhcmFjdGVyKCBjbHVzdGVyLCBwb3MsIHYsIGMsIGZvbnQgKSB7XHJcbiAgICB2YXIgcGNoYXI7XHJcbiAgICBpZiggcGNoYXIgPSBmb250LmNoYXJhY3RlcnNbY10gKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgID0gcGNoYXIuZGF0YTtcclxuXHRcdC8vIGJhY2tncm91bmQgbWF5IGhhdmUgYW4gYWxwaGEgdmFsdWUgLVxyXG5cdFx0Ly8gYnV0IHdlIHNob3VsZCBzdGlsbCBhc3N1bWUgdGhhdCBibGFjayBpcyB0cmFuc3BhcmVudC4uLlxyXG5cdFx0dmFyIHNpemUgPSBwY2hhci5zejtcclxuXHRcdHZhciB3aWR0aCA9IHBjaGFyLnc7XHJcblx0XHRpZiggKCBmb250LmZsYWdzICYgMyApID09IDAvKkZPTlRfRkxBR19NT05PKi8gKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgQ2hhckRhdGF4ID0gQ2hhckRhdGExO1xyXG5cdFx0XHR2YXIgaW5jID0gTWF0aC5mbG9vciggKHBjaGFyLnN6KzcpLzggKTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoICggZm9udC5mbGFncyAmIDMgKSA9PSAxLypGT05UX0ZMQUdfMkJJVCovIClcclxuXHRcdHtcclxuXHRcdFx0dmFyIENoYXJEYXRheCA9IENoYXJEYXRhMjtcclxuXHRcdFx0dmFyIGluYyA9IE1hdGguZmxvb3IoKHBjaGFyLnN6KzMpLzQpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiggKCBmb250LmZsYWdzICYgMyApID09IDMgfHwgKCBmb250LmZsYWdzICYgMyApICA9PSAyIClcclxuXHRcdHtcclxuXHRcdFx0dmFyIENoYXJEYXRheCA9IENoYXJEYXRhODtcclxuXHRcdFx0dmFyIGluYyA9IChjaGFyLnN6KTtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgaWYoICggZm9udC5mbGFncyAmIDMgKSA9PSAwICkge1xyXG4gICAgICAgICAgICByZXR1cm4gZHJhd01vbm9DaGFyKCBjbHVzdGVyLCBwb3MsIHYsIHBjaGFyLCBmb250LCBDaGFyRGF0YXgsIGluYyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZnVuY3Rpb24gQ2hhckRhdGE4KCBiaXRzLCBvZnMsIGJpdCApIHsgcmV0dXJuIGJpdHNbb2ZzK2JpdF07IH1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZnVuY3Rpb24gQ2hhckRhdGEyKCBiaXRzLCBvZnMsIGJpdCApIHsgcmV0dXJuIChiaXRzW29mcytiaXQ+PjJdID4+ICgyKihiaXQmMykpKSYzOyB9XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIENoYXJEYXRhMSggYml0cywgb2ZzLCBiaXQgKSB7IHJldHVybiAoYml0c1tvZnMrKGJpdD4+MyldID4+IChiaXQmNykpJjE7IH1cclxuXHJcblxyXG5mdW5jdGlvbiBkcmF3TW9ub0NoYXIoIGNsdXN0ZXIsIHBvcywgdiwgcGNoYXIsIGZvbnQsIENoYXJEYXRheCwgaW5jICkge1xyXG4gICAgdmFyIGxpbmVfdGFyZ2V0O1xyXG4gICAgdmFyIHkgPSBwb3MueSArICggZm9udC5iYXNlbGluZSArIHBjaGFyLmFzYyApO1xyXG4gICAgdmFyIHggPSBwb3MueCArICggcGNoYXIub2ZzICk7XHJcbiAgICB2YXIgbGluZSA9IDA7Ly9Vc2VGb250LmJhc2VsaW5lIC0gcGNoYXIuYXNjZW50O1xyXG4gICAgdmFyIGRPZnMgPSAwO1xyXG4gICAgdmFyIGxpbmVfdGFyZ2V0ID0gIHBjaGFyLmFzYyAtIHBjaGFyLmRzYzsvLyhVc2VGb250LmJhc2VsaW5lIC0gcGNoYXIuYXNjKSArICggVXNlRm9udC5iYXNlbGluZSAtIHBjaGFyLmRlc2NlbnQgKTtcclxuICAgIHZhciBkYXRhICA9IHBjaGFyLmRhdGE7XHJcbiAgICB2YXIgc2l6ZSA9IHBjaGFyLnN6O1xyXG4gICAgZm9yKDtcclxuICAgICAgICAgbGluZSA8PSBsaW5lX3RhcmdldDtcclxuICAgICAgICAgbGluZSsrIClcclxuICAgIHtcclxuICAgICAgICBmb3IoIHZhciBiaXQgPSAwOyBiaXQgPCBzaXplOyBiaXQrKyApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hhcmRhdGEgPSBDaGFyRGF0YXgoIGRhdGEsIGRPZnMsIGJpdCApO1xyXG4gICAgICAgICAgICBpZiggY2hhcmRhdGEgKVxyXG4gICAgICAgICAgICAgICAgY2x1c3Rlci5zZXRDdWJlKCB4ICsgYml0LCB5IC0gbGluZSwgMCwgdiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkT2ZzICs9IGluYztcclxuICAgIH1cclxuICAgIHJldHVybiBwY2hhci53O1xyXG59XHJcbiIsIlxyXG5cclxudmFyIGN1cnJlbnRSZWY7XHJcbnZhciBjdXJyZW50QWRkUmVmO1xyXG5cclxudmFyIHNlbGVjdG9yID0gVm94ZWxhcml1bS5zZWxlY3RvciA9IHtcclxuXHJcbiAgICBnZXQgY3VycmVudFZveGVsICgpIHtcclxuICAgICAgICByZXR1cm4gY3VycmVudFJlZjtcclxuICAgIH0sXHJcbiAgICBzZXQgY3VycmVudFZveGVsIChyZWYpIHtcclxuICAgICAgICBjdXJyZW50UmVmID0gcmVmO1xyXG4gICAgfSxcclxuICAgIGdldCBjdXJyZW50QWRkVm94ZWwgKCkge1xyXG4gICAgICAgIHJldHVybiBjdXJyZW50QWRkUmVmO1xyXG4gICAgfSxcclxuICAgIHNldCBjdXJyZW50QWRkVm94ZWwgKHJlZikge1xyXG4gICAgICAgIGN1cnJlbnRBZGRSZWYgPSByZWY7XHJcbiAgICB9LFxyXG4gICAgbWF0ZXJpYWwgOiBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoeyBjb2xvcjond2hpdGUnXHJcbiAgICAgICAgLHZlcnRleENvbG9yczogVEhSRUUuVmVydGV4Q29sb3JzXHJcbiAgICAgICAgLGxpbmV3aWR0aDoxIC8qIHdpbmRvd3MgPT0gMSBhbHdheXMgKi9cclxuICAgICAgICB9KSxcclxuICAgIGdlb21ldHJ5IDogbmV3IFRIUkVFLkdlb21ldHJ5KCksXHJcbiAgICBtZXNoIDogbnVsbCxcclxuICAgIG1lc2hHbG93IDogbnVsbCxcclxufTtcclxuc2VsZWN0b3IubWF0ZXJpYWwuZGVwdGhXcml0ZSA9IGZhbHNlO1xyXG5zZWxlY3Rvci5tYXRlcmlhbC5kZXB0aFRlc3QgPSBmYWxzZTtcclxuXHJcbnNlbGVjdG9yLm1lc2ggPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBzZWxlY3Rvci5nZW9tZXRyeSwgc2VsZWN0b3IubWF0ZXJpYWwgKTtcclxuc2VsZWN0b3IubWVzaEdsb3cgPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBzZWxlY3Rvci5nZW9tZXRyeSwgc2VsZWN0b3IubWF0ZXJpYWwgKTtcclxuXHJcblxyXG5Wb3hlbGFyaXVtLnNlbGVjdG9yLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCAwLjgsIDAsIDAgKTtcclxuICAgIHZhciB1bml0ID0gY3VycmVudFJlZj9jdXJyZW50UmVmLmNsdXN0ZXIudm94ZWxVbml0U2l6ZToxMDtcclxuICAgIHZhciB4ID0gMFxyXG4gICAgdmFyIHkgPSAwXHJcbiAgICB2YXIgeiA9IDBcclxuICAgIHZhciBnZW9tZXRyeSA9IHNlbGVjdG9yLmdlb21ldHJ5O1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoID0gMDtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5sZW5ndGggPSAwO1xyXG4gICAgZm9yKCB2YXIgbiA9IDA7IG4gPCAyOyBuKysgKSB7XHJcbiAgICAgICAgaWYoIG4gPT0gMCApIHtcclxuICAgICAgICAgICAgaWYoICFjdXJyZW50UmVmIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdW5pdCA9IGN1cnJlbnRSZWYuY2x1c3Rlci52b3hlbFVuaXRTaXplO1xyXG4gICAgICAgICAgICAgICAgeCA9IGN1cnJlbnRSZWYud3ggKiB1bml0XHJcbiAgICAgICAgICAgICAgICB5ID0gY3VycmVudFJlZi53eSAqIHVuaXRcclxuICAgICAgICAgICAgICAgIHogPSBjdXJyZW50UmVmLnd6ICogdW5pdFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIC8vY29sb3IuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoIDAsIDAuOCwgMCApO1xyXG4gICAgICAgICAgICAgIGlmKCAhY3VycmVudEFkZFJlZiApXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAvL3JldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB4ID0gY3VycmVudEFkZFJlZi53eCAqIHVuaXRcclxuICAgICAgICAgICAgICAgICAgeSA9IGN1cnJlbnRBZGRSZWYud3kgKiB1bml0XHJcbiAgICAgICAgICAgICAgICAgIHogPSBjdXJyZW50QWRkUmVmLnd6ICogdW5pdFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH1cclxuICAgIHZhciBQID0gW25ldyBUSFJFRS5WZWN0b3IzKCB4LCB5LCB6IClcclxuICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3IzKCB4ICsgdW5pdCwgeSwgeiApXHJcbiAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSArIHVuaXQsIHogKVxyXG4gICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5ICsgdW5pdCwgeiApXHJcbiAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSwgeiArIHVuaXQgKVxyXG4gICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5LCB6ICsgdW5pdCApXHJcbiAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSArIHVuaXQsIHogKyB1bml0IClcclxuICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3IzKCB4ICsgdW5pdCwgeSArIHVuaXQsIHogKyB1bml0IClcclxuICAgICAgICBdXHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMF0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFsxXSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzFdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbM10gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFszXSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzJdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMl0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFswXSApO1xyXG5cclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs0XSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzVdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNV0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs3XSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzddICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNl0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs2XSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzRdICk7XHJcblxyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzBdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNF0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFsxXSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzVdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMl0gKTtcclxuICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs2XSApO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzNdICk7XHJcbiAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbN10gKTtcclxuXHJcbiAgICB9XHJcbiAgICAvL2NvbG9yLmRlbGV0ZSgpO1xyXG4gICAgZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICBnZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgZ2VvbWV0cnkuY29sb3JzTmVlZFVwZGF0ZSA9IHRydWU7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgdHlwZXMgPSBWb3hlbGFyaXVtLlZveGVscztcclxuXHJcbnZhciBrZXlzID0geyBMRUZUOiAzNywgVVA6IDM4LCBSSUdIVDogMzksIEJPVFRPTTogNDBcclxuXHQsIEE6NjUsIFM6ODMsIEQ6NjgsIFc6ODcsIFNQQUNFOjMyLCBDOjY3XHJcbiAgICAsIEkgOiA3MywgRVNDQVBFIDogMjcgfTtcclxuXHJcblxyXG5mdW5jdGlvbiBJbnZlbnRvcnlJdGVtICggdm94ZWxUeXBlICkge1xyXG4gICAgdmFyIGl0ZW0gPSB7XHJcbiAgICAgICAgdm94ZWxUeXBlIDogdm94ZWxUeXBlLCAgLy8gdm94ZWwgdHlwZVxyXG4gICAgICAgIFRIUkVFX3NvbGlkIDogbnVsbCxcclxuICAgICAgICBnZW9tZXRyeSA6IFZveGVsYXJpdW0uU2V0dGluZ3MudXNlX2Jhc2ljX21hdGVyaWFsXHJcblx0XHRcdFx0XHQ/IFZveGVsYXJpdW0uR2VvbWV0cnlCYXNpY0J1ZmZlcigpXHJcblx0XHRcdFx0XHQ6IFZveGVsYXJpdW0uR2VvbWV0cnlCdWZmZXIoKSAsXHJcblxyXG4gICAgfVxyXG4gICAgaXRlbS5nZW9tZXRyeS5tYWtlVm94Q3ViZSggMC4yNSwgdm94ZWxUeXBlICk7XHJcblxyXG4gICAgcmV0dXJuIGl0ZW07XHJcbn1cclxuXHJcblZveGVsYXJpdW0uSW52ZW50b3J5ID0gZnVuY3Rpb24oIGdlb21ldHJ5U2hhZGVyLGRvbUVsZW1lbnQgKSB7XHJcbiAgICB2YXIgZG9tRWxlbWVudCA9ICggZG9tRWxlbWVudCAhPT0gdW5kZWZpbmVkICkgPyBkb21FbGVtZW50IDogZG9jdW1lbnQ7XHJcbiAgICB2YXIgaW52ZW50b3J5ID0ge1xyXG4gICAgICAgICByYXljYXN0ZXIgOiBuZXcgVEhSRUUuUmF5Y2FzdGVyKCksXHJcbiAgICAgICAgaXRlbXMgOiBbXSxcclxuICAgICAgICBlbmFibGVkIDogZmFsc2UsXHJcbiAgICAgICAgYnVpbGRfdmVydGljYWwgOiB0cnVlLFxyXG4gICAgICAgIFRIUkVFX3NvbGlkIDogbmV3IFRIUkVFLk9iamVjdDNEKCksXHJcbiAgICAgICAgIHhfbWF4IDogMTUsIHlfbWF4IDogMTIsXHJcbiAgICAgICAgIHhfaW5jIDogMC43NSwgeV9pbmMgOiAwLjc1LFxyXG4gICAgICAgICBtb3VzZVJheSA6IHsgbiA6IFRIUkVFLlZlY3RvcjNaZXJvLmNsb25lKCksIG86IG5ldyBUSFJFRS5WZWN0b3IzKCkuZGVsZXRlKCkgfSxcclxuICAgICAgICAgbGFzdF9pbnRlcnNlY3RzIDogbnVsbCxcclxuICAgICAgICAgZGVhY3RpdmF0ZXMgOiBbXSxcclxuICAgICAgICAgLy9tb3VzZUNsb2NrIDogbmV3IFRIUkVFLkNsb2NrKCk7XHJcblxyXG4gICAgICAgIHVwZGF0ZVBvc2l0aW9ucyA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IDAsIHkgPSAwO1xyXG4gICAgICAgICAgICBpbnZlbnRvcnkuaXRlbXMuZm9yRWFjaCggKGl0ZW0pPT57XHJcbiAgICAgICAgICAgICAgICBpZiggeSA+PSB0aGlzLnlfbWF4IHx8IHggPj0gdGhpcy54X21heCApIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLlRIUkVFX3NvbGlkLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaXRlbS5USFJFRV9zb2xpZC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uVEhSRUVfc29saWQubWF0cml4Lm9yaWdpbi5zZXQoIHgsIHksIDAgKTtcclxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLmJ1aWxkX3ZlcnRpY2FsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy55X2luYztcclxuICAgICAgICAgICAgICAgICAgICBpZiggeSA+PSB0aGlzLnlfbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgeSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICB4ICs9IHRoaXMueF9pbmM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHggKz0gdGhpcy54X2luYztcclxuICAgICAgICAgICAgICAgICAgICBpZiggeCA+PSB0aGlzLnhfbWF4ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICB5ICs9IHRoaXMueV9pbmM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWN0aXZhdGUgOiBmdW5jdGlvbiggIGluYWN0aXZlQ2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NvbnRleHRtZW51JywgaWdub3JlLCBmYWxzZSApO1xyXG4gICAgICAgIFx0ZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlICk7XHJcbiAgICAgICAgXHRkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZXdoZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xyXG4gICAgICAgICAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UgKTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgb25LZXlVcCwgZmFsc2UgKTtcclxuICAgICAgICAgICAgaW52ZW50b3J5LlRIUkVFX3NvbGlkLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnZlbnRvcnkuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKCBpbmFjdGl2ZUNhbGxiYWNrIClcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS5kZWFjdGl2YXRlcy5wdXNoKCBpbmFjdGl2ZUNhbGxiYWNrIClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlYWN0aXZhdGUgOiBmdW5jdGlvbiggKSB7XHJcbiAgICAgICAgICAgIGRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2NvbnRleHRtZW51JywgaWdub3JlLCBmYWxzZSApO1xyXG4gICAgICAgICAgICBkb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UgKTtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2V3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UgKTtcclxuICAgICAgICAgICAgLy9kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdET01Nb3VzZVNjcm9sbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UgKTsgLy8gZmlyZWZveFxyXG4gICAgICAgICAgICBkb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcclxuICAgICAgICAgICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UgKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSApO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgb25LZXlVcCwgZmFsc2UgKTtcclxuXHJcbiAgICAgICAgICAgIGludmVudG9yeS5USFJFRV9zb2xpZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGludmVudG9yeS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmKCBpbnZlbnRvcnkuZGVhY3RpdmF0ZXMubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5LmRlYWN0aXZhdGVzLmZvckVhY2goIChjYik9PmNiKCkgKTtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS5kZWFjdGl2YXRlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZSA6IGZ1bmN0aW9uKCBjYW1lcmEsIHRpY2sgKSB7XHJcbiAgICAgICAgICAgIGlmKCAhY2FtZXJhIClyZXR1cm47XHJcbiAgICAgICAgICAgIGlmKCAhaW52ZW50b3J5LmVuYWJsZWQpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIG87XHJcblx0XHRcdHZhciBpbnZlbnRvcnlPO1xyXG4gICAgICAgICAgICB2YXIgZjtcclxuXHJcbiAgICAgICAgICAgICggaW52ZW50b3J5TyA9IHRoaXMuVEhSRUVfc29saWQubWF0cml4Lm9yaWdpbi8qcG9zaXRpb24qLyAgKS5jb3B5KCBjYW1lcmEubWF0cml4Lm9yaWdpbiApO1xyXG4gICAgICAgICAgICAvL2YgPSBjYW1lcmEubWF0cml4LmZvcndhcmRcclxuXHJcblx0XHRcdG8gPSBpbnZlbnRvcnkucmF5Y2FzdGVyLnJheS5vcmlnaW4uY2xvbmUoKTtcclxuXHRcdFx0ZiA9IGludmVudG9yeS5yYXljYXN0ZXIucmF5LmRpcmVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgIG8uYWRkU2NhbGVkVmVjdG9yKCBmLCAxMSApO1xyXG5cclxuXHRcdFx0dmFyIHRtcGRlbCA9IGYuZG90KCBjYW1lcmEubWF0cml4LmZvcndhcmQuZGVsZXRlKCkgKTtcclxuXHRcdFx0aW52ZW50b3J5Ty5hZGRTY2FsZWRWZWN0b3IoIGNhbWVyYS5tYXRyaXguZm9yd2FyZC5kZWxldGUoKSwgIDExIC8gdG1wZGVsICk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbSA9IHRoaXMuVEhSRUVfc29saWQubWF0cml4O1xyXG4gICAgICAgICAgICB2YXIgYXdheSA9IGNhbWVyYS5tYXRyaXgub3JpZ2luLmNsb25lKCkuYWRkU2NhbGVkVmVjdG9yKCBvLCAyIClcclxuICAgICAgICAgICAgbS5sb29rQXQoIG8sIGNhbWVyYS5tYXRyaXgub3JpZ2luLCBjYW1lcmEubWF0cml4LnVwIClcclxuICAgICAgICAgICAgbS5yb3RhdGVPcnRobyggTWF0aC5QSSwgMCwgMiApO1xyXG4gICAgICAgICAgICAvL3ZhciBkID0gY2FtZXJhLm1hdHJpeC5kb3duO1xyXG4gICAgICAgICAgICBpbnZlbnRvcnlPLmFkZFNjYWxlZFZlY3RvciggbS5kb3duLmRlbGV0ZSgpLCAodGhpcy55X21heC10aGlzLnlfaW5jKS8yICk7XHJcbiAgICAgICAgICAgIGludmVudG9yeU8uYWRkU2NhbGVkVmVjdG9yKCBtLnJpZ2h0LmRlbGV0ZSgpLCAodGhpcy54X21heC10aGlzLnhfaW5jKS8yICk7XHJcblxyXG5cclxuXHRcdFx0Ly9pbnZlbnRvcnlPLmNvcHkoIG8gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuVEhSRUVfc29saWQubWF0cml4V29ybGROZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpbnZlbnRvcnkubGFzdF9pbnRlcnNlY3RzID0gaW52ZW50b3J5LnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKCBpbnZlbnRvcnkuVEhSRUVfc29saWQuY2hpbGRyZW4gKTtcclxuICAgICAgICAgICAgaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGludmVudG9yeS5sYXN0X2ludGVyc2VjdHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiggaW52ZW50b3J5Lmxhc3RfaW50ZXJzZWN0c1tpXS5vYmplY3QgIT09IGludmVudG9yeS5zZWxlY3Rvci5USFJFRV9zb2xpZCApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnkuc2VsZWN0b3IuY3VycmVudFZveGVsID0gaW52ZW50b3J5Lmxhc3RfaW50ZXJzZWN0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbCA9IGludGVyc2VjdHNbaV07XHJcbiAgICAgICAgICAgICAgICAvL2ludmVudG9yeS5zZWxlY3Rvci5jdXJyZW50Vm94ZWwgPSBpbnRlcnNlY3RzW2ldLm9iamVjdC5pdGVtXHJcbiAgICAgICAgICAgICAgICAvL2ludGVyc2VjdHNbIGkgXS5vYmplY3QubWF0ZXJpYWwuY29sb3Iuc2V0KCAweGZmMDAwMCApO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb2JqO1xyXG4gICAgICAgICAgICBpZiggaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbCApIHtcclxuICAgICAgICAgICAgICAgIG9iaiA9IGludmVudG9yeS5zZWxlY3Rvci5jdXJyZW50Vm94ZWwub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgb2JqLm1hdHJpeC5tb3Rpb24ucm90YXRpb24ueCA9IDAuNTA7XHJcbiAgICAgICAgICAgICAgICBvYmoubWF0cml4Lm1vdGlvbi5yb3RhdGlvbi55ID0gMS41MDtcclxuICAgICAgICAgICAgICAgIG9iai5tYXRyaXgubW90aW9uLnJvdGF0aW9uLnogPSAyLjMwO1xyXG4gICAgICAgICAgICAgICAgLy9vYmoubWF0cml4Lm1vdGlvbi50b3JxdWUueCA9IDAuMjU7XHJcbiAgICAgICAgICAgICAgICBvYmoubWF0cml4Lm1vdmUodGljayk7XHJcbiAgICAgICAgICAgICAgICBvYmoubWF0cml4V29ybGROZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgIC8vaWYoIGludmVudG9yeS5zZWxlY3Rvci5jdXJyZW50Vm94ZWwgKVxyXG4gICAgICAgICAgICAvLyAgICBpbnZlbnRvcnkuc2VsZWN0b3IuY3VycmVudFZveGVsLm9iamVjdC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vZm9yICggdmFyIGkgPSAwOyBpIDwgaW52ZW50b3J5Lmxhc3RfaW50ZXJzZWN0cy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIGludmVudG9yeS5sYXN0X2ludGVyc2VjdHNbaV0pXHJcbiAgICAgICAgXHRcdC8vaW50ZXJzZWN0c1sgaSBdLm9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXQoIDB4ZmYwMDAwICk7XHJcblxyXG4gICAgICAgIFx0Ly99XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdHlwZXMudHlwZXMuZm9yRWFjaCggKHZveGVsKT0+e1xyXG4gICAgICAgIHZhciBpdGVtO1xyXG4gICAgICAgIGludmVudG9yeS5pdGVtcy5wdXNoKCBpdGVtID0gSW52ZW50b3J5SXRlbSggdm94ZWwgKSApO1xyXG4gICAgICAgIGludmVudG9yeS5USFJFRV9zb2xpZC5hZGQoIGl0ZW0uVEhSRUVfc29saWQgPSBuZXcgVEhSRUUuTWVzaCggaXRlbS5nZW9tZXRyeS5nZW9tZXRyeSwgZ2VvbWV0cnlTaGFkZXIgKSApO1xyXG4gICAgICAgIGl0ZW0uVEhSRUVfc29saWQuZnJ1c3R1bUN1bGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGl0ZW0uVEhSRUVfc29saWQuaXRlbSA9IGl0ZW07XHJcbiAgICAgICAgaXRlbS5USFJFRV9zb2xpZC5tYXRyaXhBdXRvVXBkYXRlID0gZmFsc2U7XHJcbiAgICB9KVxyXG4gICAgaW52ZW50b3J5LnVwZGF0ZVBvc2l0aW9ucygpO1xyXG4gICAgaW52ZW50b3J5LlRIUkVFX3NvbGlkLm1hdHJpeEF1dG9VcGRhdGUgPSBmYWxzZTtcclxuICAgIGludmVudG9yeS5USFJFRV9zb2xpZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB2YXIgY3VycmVudFJlZjtcclxuICAgIHZhciBjdXJyZW50QWRkUmVmO1xyXG5cclxuICAgIGludmVudG9yeS5zZWxlY3RvciA9IHtcclxuXHJcbiAgICAgICAgZ2V0IGN1cnJlbnRWb3hlbCAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50UmVmO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IGN1cnJlbnRWb3hlbCAocmVmKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRSZWYgPSByZWY7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgY3VycmVudEFkZFZveGVsICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRBZGRSZWY7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgY3VycmVudEFkZFZveGVsIChyZWYpIHtcclxuICAgICAgICAgICAgY3VycmVudEFkZFJlZiA9IHJlZjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1hdGVyaWFsIDogbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHsgY29sb3I6J3doaXRlJ1xyXG4gICAgICAgICAgICAvLyx2ZXJ0ZXhDb2xvcnM6IFRIUkVFLlZlcnRleENvbG9yc1xyXG4gICAgICAgICAgICAsbGluZXdpZHRoOjEgLyogd2luZG93cyA9PSAxIGFsd2F5cyAqL1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICBnZW9tZXRyeSA6IG5ldyBUSFJFRS5HZW9tZXRyeSgpLFxyXG4gICAgICAgIFRIUkVFX3NvbGlkIDogbnVsbCxcclxuICAgICAgICBtZXNoR2xvdyA6IG51bGwsXHJcbiAgICB9O1xyXG4gICAgaW52ZW50b3J5LnNlbGVjdG9yLm1hdGVyaWFsLmRlcHRoV3JpdGUgPSBmYWxzZTtcclxuICAgIGludmVudG9yeS5zZWxlY3Rvci5tYXRlcmlhbC5kZXB0aFRlc3QgPSBmYWxzZTtcclxuXHJcbiAgICBpbnZlbnRvcnkuc2VsZWN0b3IuVEhSRUVfc29saWQgPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBpbnZlbnRvcnkuc2VsZWN0b3IuZ2VvbWV0cnksIGludmVudG9yeS5zZWxlY3Rvci5tYXRlcmlhbCApO1xyXG4gICAgaW52ZW50b3J5LnNlbGVjdG9yLm1lc2hHbG93ID0gbmV3IFRIUkVFLkxpbmVTZWdtZW50cyggaW52ZW50b3J5LnNlbGVjdG9yLmdlb21ldHJ5LCBpbnZlbnRvcnkuc2VsZWN0b3IubWF0ZXJpYWwgKTtcclxuICAgIGludmVudG9yeS5zZWxlY3Rvci5USFJFRV9zb2xpZC5mcnVzdHVtQ3VsbGVkID0gZmFsc2U7XHJcblxyXG4gICAgaW52ZW50b3J5LlRIUkVFX3NvbGlkLmFkZCggaW52ZW50b3J5LnNlbGVjdG9yLlRIUkVFX3NvbGlkICk7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdG9yKCkge1xyXG4gICAgICAgIHZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMC44LCAwLCAwICk7XHJcbiAgICAgICAgdmFyIHVuaXQgPSAwLjg7XHJcbiAgICAgICAgdmFyIHggPSAwXHJcbiAgICAgICAgdmFyIHkgPSAwXHJcbiAgICAgICAgdmFyIHogPSAwXHJcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gaW52ZW50b3J5LnNlbGVjdG9yLmdlb21ldHJ5O1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgaWYoICFjdXJyZW50UmVmICl7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xyXG4gICAgICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBnZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9yaWdpbiA9IGN1cnJlbnRSZWYub2JqZWN0Lm1hdHJpeC5vcmlnaW47XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyggYGludmVudG9yeSBhdCAke29yaWdpbi54fSAke29yaWdpbi55fSAke29yaWdpbi56fWApXHJcbiAgICAgICAgZm9yKCB2YXIgbiA9IDA7IG4gPCAxOyBuKysgKSB7XHJcbiAgICAgICAgICAgIHggPSBvcmlnaW4ueCAgLSB1bml0LzIgLSAwLjFcclxuICAgICAgICAgICAgeSA9IG9yaWdpbi55ICAtIHVuaXQvMiAtIDAuMVxyXG4gICAgICAgICAgICB6ID0gb3JpZ2luLnogIC0gdW5pdC8yIC0gMC4xXHJcbiAgICAgICAgICB1bml0ICs9IDAuMjtcclxuICAgICAgICB2YXIgUCA9IFtuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSwgeiApXHJcbiAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5LCB6IClcclxuICAgICAgICAgICAgLCBuZXcgVEhSRUUuVmVjdG9yMyggeCwgeSArIHVuaXQsIHogKVxyXG4gICAgICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3IzKCB4ICsgdW5pdCwgeSArIHVuaXQsIHogKVxyXG4gICAgICAgICAgICAsIG5ldyBUSFJFRS5WZWN0b3IzKCB4LCB5LCB6ICsgdW5pdCApXHJcbiAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5LCB6ICsgdW5pdCApXHJcbiAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHgsIHkgKyB1bml0LCB6ICsgdW5pdCApXHJcbiAgICAgICAgICAgICwgbmV3IFRIUkVFLlZlY3RvcjMoIHggKyB1bml0LCB5ICsgdW5pdCwgeiArIHVuaXQgKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFswXSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMV0gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzFdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFszXSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbM10gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzJdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFsyXSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMF0gKTtcclxuXHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs0XSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNV0gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzVdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs3XSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbN10gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzZdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs2XSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNF0gKTtcclxuXHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFswXSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbNF0gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzFdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFs1XSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbMl0gKTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnMucHVzaCggY29sb3IgKTtcclxuICAgICAgICBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKCBQWzZdICk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29sb3JzLnB1c2goIGNvbG9yICk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaCggUFszXSApO1xyXG4gICAgICAgIGdlb21ldHJ5LmNvbG9ycy5wdXNoKCBjb2xvciApO1xyXG4gICAgICAgIGdlb21ldHJ5LnZlcnRpY2VzLnB1c2goIFBbN10gKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29sb3IuZGVsZXRlKCk7XHJcbiAgICAgICAgZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICBnZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIGludmVudG9yeTtcclxuXHJcblxyXG4gICAgIGZ1bmN0aW9uIHNldE1vdXNlUmF5KCBjYW1lcmEsIGUgKSB7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBkb21FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHcgPSByZWN0LnJpZ2h0LXJlY3QubGVmdDsvL3dpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNvbnN0IGggPSByZWN0LmJvdHRvbS1yZWN0LnRvcDsvL3dpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICB2YXIgeCA9ICgoKGUuY2xpZW50WC1yZWN0LmxlZnQpLSh3LzIuMCkpL3cpICogMjtcclxuICAgICAgICB2YXIgeSA9ICgoKGUuY2xpZW50WS1yZWN0LnRvcCktKGgvMi4wKSkvaCkgKiAyO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coIGBtb3VzZSBhdCAke3h9LCAke3l9YCApXHJcblxyXG4gICAgICAgIGludmVudG9yeS5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSgge3g6eCx5Oi15fSwgY2FtZXJhICk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIG9uTW91c2VEb3duKGV2ZW50KSB7XHJcbiAgICAgICAgICBpZiAoIGludmVudG9yeS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBpZiggaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbCApIHtcclxuICAgICAgICAgICAgICBjb250cm9sR2FtZS5zZXRDdXJyZW50VHlwZSggaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbC5vYmplY3QuaXRlbS52b3hlbFR5cGUgKTtcclxuXHJcbiAgICAgICAgICAgICAgaW52ZW50b3J5LmRlYWN0aXZhdGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vaW52ZW50b3J5Lmxhc3RfaW50ZXJzZWN0cyA9IGludmVudG9yeS5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyggaW52ZW50b3J5LlRIUkVFX3NvbGlkLmNoaWxkcmVuICk7XHJcbiAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBpbnZlbnRvcnkubGFzdF9pbnRlcnNlY3RzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgIGlmKCBpbnZlbnRvcnkubGFzdF9pbnRlcnNlY3RzW2ldLm9iamVjdCAhPT0gaW52ZW50b3J5LnNlbGVjdG9yLlRIUkVFX3NvbGlkICkge1xyXG4gICAgICAgICAgICAgICAgICBpbnZlbnRvcnkuc2VsZWN0b3IuY3VycmVudFZveGVsID0gaW52ZW50b3J5Lmxhc3RfaW50ZXJzZWN0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vaW52ZW50b3J5LnNlbGVjdG9yLmN1cnJlbnRWb3hlbCA9IGludGVyc2VjdHNbaV07XHJcbiAgICAgICAgICAgICAgLy9pbnZlbnRvcnkuc2VsZWN0b3IuY3VycmVudFZveGVsID0gaW50ZXJzZWN0c1tpXS5vYmplY3QuaXRlbVxyXG4gICAgICAgICAgICAgIC8vaW50ZXJzZWN0c1sgaSBdLm9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXQoIDB4ZmYwMDAwICk7XHJcblxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gb25Nb3VzZVVwKGV2ZW50KSB7XHJcbiAgICAgICAgICBpZiAoIGludmVudG9yeS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoIGV2ZW50ICkge1xyXG4gICAgICAgIFx0aWYgKCBpbnZlbnRvcnkuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XHJcbiAgICAgICAgXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZXRNb3VzZVJheSggY2FtZXJhLCBldmVudCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Nb3VzZVdoZWVsKCBldmVudCApIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgbW91c2VTY3JvbGxYICs9IGV2ZW50LndoZWVsRGVsdGFYO1xyXG4gICAgICAgICAgICBtb3VzZVNjcm9sbFkgKz0gZXZlbnQud2hlZWxEZWx0YVk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gaWdub3JlKGV2ZW50KSB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBvbktleURvd24oIGV2ZW50ICkge1xyXG5cclxuXHJcbiAgICAgIFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuICAgICAgICAgICAgY2FzZSBrZXlzLkVTQ0FQRTpcclxuICAgICAgXHRcdGNhc2Uga2V5cy5JOlxyXG4gICAgICBcdFx0XHRpbnZlbnRvcnkuZGVhY3RpdmF0ZSgpO1xyXG4gICAgICBcdFx0XHRicmVhaztcclxuICAgICAgXHR9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBvbktleVVwKCBldmVudCApIHtcclxuXHJcbiAgICAgIFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuICAgICAgXHR9XHJcbiAgICAgIH1cclxuXHJcblxyXG59XHJcbiIsIlxuLy92YXIgR3VuID0gcmVxdWlyZSggXCJndW5cIiApO1xudmFyIEd1biA9IHJlcXVpcmUoIFwiLi4vbm9kZV9tb2R1bGVzL2d1bi9ndW4uanNcIiApO1xuXG52YXIgZGIgPSB7fTtcblZveGVsYXJpdW0uZGIgPSBkYjtcblxuLy9Wb3hlbGFyaXVtLmRiID0gZGI7XG5cbi8vZ2xvYmFsID0gR3VuKHtwcmVmaXg6ICdnbG9iYWwvJywgcGVlcnM6IFsnaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9ndW4nXX0pXG4vL2xvY2FsID0gR3VuKHtwcmVmaXg6ICdsb2NhbC8nfSkuXG5cblxuZGIuZ2xvYmFsRGIgPSBHdW4oIHtwcmVmaXg6ICdnbG9iYWwvJywgcGVlcnM6IFtgd3M6Ly8ke2xvY2F0aW9uLmhvc3R9L2d1bmBdfSApLmdldCggXCJWb3hlbGFyaXVtXCIgKTtcbi8vZGIuZ2xvYmFsRGIgPSBHdW4oIGxvY2F0aW9uLm9yaWdpbiArICcvZ3VuJyApLmdldCggXCJWb3hlbGFyaXVtXCIgKTtcbi8vZGIuZ2xvYmFsRGIgPSBHdW4oIHtwcmVmaXg6ICdnbG9iYWwvJywgcGVlcnM6IFtgaHR0cHM6Ly8ke2xvY2F0aW9uLm9yaWdpbn0vZ3VuYF19ICkuZ2V0KCBcIlZveGVsYXJpdW1cIiApO1xuZGIubG9jYWxEYiA9IEd1bigge3ByZWZpeDogJ2xvY2FsLyd9KS5nZXQoIFwib3JnLmQzeDByLnZveGVsYXJpdW0ubG9jYWxcIiApO1xuLy9kYi5sb2NhbERiID0gZGIuZ2xvYmFsRGIucGF0aCggXCJsb2NhbFwiICk7XG5cbmRiLndvcmxkID0ge1xuICAgIGRiIDogbnVsbCwgLy9kYi5nbG9iYWxEYlxuICAgIGNsdXN0ZXIgOiBudWxsLFxuICAgIGxvYWRTZWN0b3IgOiBsb2FkU2VjdG9yLFxuICAgIHN0b3JlU2VjdG9yIDogc3RvcmVTZWN0b3IsXG4gICAgZ2V0UGF0aCA6IGdldFBhdGgsXG4gICAgbGlzdGVuZXJzIDogW10sXG59XG5cbmRiLnBsYXllciA9IHsgbG9jYWw6IGRiLmxvY2FsRGIucGF0aCggXCJwbGF5ZXJcIiApXG4gICAgICAgICwgZ2xvYmFsIDogbnVsbCAvLyBoYXZlIHRvIHdhaXQgZm9yIHBsYXllciBJRCBiZWZvcmVcbiAgICAgICAgLCBfcXVhdDogbmV3IFRIUkVFLlF1YXRlcm5pb24oKVxuICAgICAgICAsIF9vcmlnaW4gOiBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgICAgICwgcXVhdDogbmV3IFRIUkVFLlF1YXRlcm5pb24oKVxuICAgICAgICAsIG9yaWdpbiA6IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICAgICAgLCBwb3NpdGlvblVwZGF0ZSA6IGZhbHNlXG4gICAgICAgICwgaW52ZW50b3J5IDogW11cbiAgICAgICAgLCBpZCA6IG51bGxcbiAgICAgICAgLCB3b3JsZF9pZCA6IG51bGxcbiAgICB9XG5cbmZ1bmN0aW9uIHNlY3RvclVwZGF0ZWQoIHNlY3Rvciwgc3R1ZmYgKSB7XG4gIHZhciB4LCB5LCB6O1xuICB2YXIgYmFzZV94ID0gKCBzZWN0b3IucG9zLnggPj4gMiApICogNDtcbiAgdmFyIGJhc2VfeSA9ICggc2VjdG9yLnBvcy55ID4+IDIgKSAqIDQ7XG4gIHZhciBiYXNlX3ogPSAoIHNlY3Rvci5wb3MueiA+PiAyICkgKiA0O1xuICBjb25zb2xlLmxvZyggXCJHb3Qgc2VjdG9yIHVwZGF0ZSBldmVudFwiLCBzdHVmZilcbiAgZm9yKCB4ID0gMDsgeCA8PSAzOyB4KysgKVxuICAgIGZvciggeSA9IDA7IHkgPD0gMzsgeSsrIClcbiAgICAgIGZvciggeiA9IDA7IHogPD0gMzsgeisrICkge1xuICAgICAgICB2YXIga2V5ID0gYCR7eH0ke3l9JHt6fWBcbiAgICAgICAgdmFyIHZhbDtcbiAgICAgICAgaWYoIHZhbCA9IHN0dWZmW2tleV0gKSB7XG4gICAgICAgICAgdmFyIHNlY3RvciA9IGRiLndvcmxkLmNsdXN0ZXIuZ2V0U2VjdG9yKCBiYXNlX3ggKyB4LCBiYXNlX3kgKyB5LCBiYXNlX3ogKyB6LCB0cnVlIClcbiAgICAgICAgICBpZiggc2VjdG9yIClcbiAgICAgICAgICAgIGlmKCBzZWN0b3IuY2FjaGVkU3RyaW5nICE9PSB2YWwgKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIm5ldyBzZWN0b3Igc3RyaW5nIC0gbmVlZCBkZWNvZGUuXCIpXG4gICAgICAgICAgICAgIHNlY3Rvci5kZWNvZGUoIHZhbCApXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lciggc2VjdG9yICkge1xuICB2YXIgd2hlcmUgPSBnZXRab25lUGF0aChzZWN0b3IpO1xuICBpZiggZGIud29ybGQubGlzdGVuZXJzLmZpbmRJbmRleCggKHZhbCk9PndoZXJlPT09dmFsICkgPCAwICkge1xuICAgIGRiLndvcmxkLmxpc3RlbmVycy5wdXNoKCB3aGVyZSApO1xuICAgIGRiLndvcmxkLmRiLnBhdGgoIHdoZXJlICkub24oIChkYXRhKT0+eyBzZWN0b3JVcGRhdGVkKHNlY3RvcixkYXRhKSB9LCB7IGRlbHRhOiB0cnVlIH0gKVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Wm9uZVBhdGgoIHNlY3RvciApIHtcbiAgcmV0dXJuIGBzZWN0b3IuJHtzZWN0b3IucG9zLng+PjJ9LiR7c2VjdG9yLnBvcy55Pj4yfS4ke3NlY3Rvci5wb3Muej4+Mn1gXG59XG5mdW5jdGlvbiBnZXRQYXRoKCBzZWN0b3IgKSB7XG4gIHJldHVybiBgJHtnZXRab25lUGF0aChzZWN0b3IpfS4ke3NlY3Rvci5wb3MueCYzfSR7c2VjdG9yLnBvcy55JjN9JHtzZWN0b3IucG9zLnomM31gXG59XG4vL2RiLnBsYXllciA9IGRiLmdsb2JhbERiLmdldCggXCJwbGF5ZXJcIiApO1xuXG5mdW5jdGlvbiBwbGF5ZXJQb3NpdGlvbkNoYW5nZSggZGF0YSApIHtcbiAgICB2YXIgbGFzdHEgPSBkYi5wbGF5ZXIucXVhdFxuICAgIHZhciBxID0gZGIucGxheWVyLl9xdWF0LnNldCggZGF0YS5xeCxkYXRhLnF5LGRhdGEucXosZGF0YS5xdylcbiAgICB2YXIgbGFzdG8gPSBkYi5wbGF5ZXIub3JpZ2luXG4gICAgdmFyIG8gPSBkYi5wbGF5ZXIuX29yaWdpbi5zZXQoIGRhdGEub3gsIGRhdGEub3ksIGRhdGEub3ogKTtcbiAgICBpZiggcS54ICE9IGxhc3RxLnggfHxcbiAgICAgICAgcS55ICE9IGxhc3RxLnkgfHxcbiAgICAgICAgcS56ICE9IGxhc3RxLnogfHxcbiAgICAgICAgcS53ICE9IGxhc3RxLndcbiAgICApIHtcbiAgICAgICAgdmFyIGEgPSAoIHEueCAtIGxhc3RxLnggKTtcbiAgICAgICAgdmFyIGIgPSAoIHEueSAtIGxhc3RxLnkgKTtcbiAgICAgICAgdmFyIGMgPSAoIHEueiAtIGxhc3RxLnogKTtcblxuICAgICAgICBpZiggYSphK2IqYitjKmMgPiAwLjAwMSApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRiLnBsYXllci5wb3NpdGlvblVwZGF0ZSA9IHRydWU7IC8vIHNraXAgbmV4dCBhbmltYXRlIHVwZGF0ZVxuICAgICAgICAgICAgVm94ZWxhcml1bS5jYW1lcmEubWF0cml4Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCBkYi5wbGF5ZXIuX3F1YXQgKTtcbiAgICAgICAgICAgIFZveGVsYXJpdW0uY2FtZXJhLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmKCBvLnggIT0gbGFzdG8ueCB8fFxuICAgICAgICBvLnkgIT0gbGFzdG8ueSB8fFxuICAgICAgICBvLnogIT0gbGFzdG8uelxuICAgICAgICAgICAgKSB7XG4gICAgICAgIHZhciBhID0gKCBvLnggLSBsYXN0by54ICk7XG4gICAgICAgIHZhciBiID0gKCBvLnkgLSBsYXN0by55ICk7XG4gICAgICAgIHZhciBjID0gKCBvLnogLSBsYXN0by56ICk7XG5cbiAgICAgICAgaWYoIGEqYStiKmIrYypjID4gMC4wMDEgKVxuICAgICAgICB7XG4gICAgICAgICAgICBkYi5wbGF5ZXIucG9zaXRpb25VcGRhdGUgPSB0cnVlOyAvLyBza2lwIG5leHQgYW5pbWF0ZSB1cGRhdGVcbiAgICAgICAgICAgIFZveGVsYXJpdW0uY2FtZXJhLnBvc2l0aW9uLmNvcHkoIG8gKTtcbiAgICAgICAgICAgIFZveGVsYXJpdW0uY2FtZXJhLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vY29uc29sZS5sb2coIFwiZGF0YSA6IFwiLCBkYXRhKTtcbn1cblxuXG5mdW5jdGlvbiBzZXR1cEV2ZW50cyggY2IgKSB7XG4gICAgLy9kYi5wbGF5ZXIubG9jYWwucGF0aChcInBvc2l0aW9uXCIpLm9uKCBwbGF5ZXJQb3NpdGlvbkNoYW5nZSApO1xuICAgIGRiLnBsYXllci5nbG9iYWwucGF0aChcInBvc2l0aW9uXCIpLm9uKCBwbGF5ZXJQb3NpdGlvbkNoYW5nZSApO1xuICAgIGxvYWRXb3JsZCggY2IgKTtcbn1cblxuZnVuY3Rpb24gbG9hZFZveGVscyhjYiwgdmFsKXtcbiAgdmFyIGNvdW50ID0gdmFsLnZveGVsVHlwZUNvdW50O1xuICAvL2NvbnNvbGUubG9nKCBcImhhdmUgXCIgLCBjb3VudCApXG4gIGRiLndvcmxkLnZveGVsSW5mby5wYXRoKCBcInZveGVsVHlwZXNcIiApLm1hcCggKGRhdGEsZmllbGQpPT57XG4gICAgICB2YXIgdCA9IFZveGVsYXJpdW0uVm94ZWxzLnR5cGVzW051bWJlcihmaWVsZCldO1xuICAgICAgaWYoIHQgKSByZXR1cm47XG4gICAgICAvL2NvbnNvbGUubG9nKCBcInJlbG9hZGluZyBcIiwgZmllbGQsIGRhdGEuSUQpXG4gICAgICB0ID0gVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbZGF0YS5JRF0gPSBldmFsKCBkYXRhLmNvZGUgKTtcblxuICAgICAgaWYoIGRhdGEudGV4dHVyZSApIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgKCB0LmltYWdlID0gbmV3IEltYWdlKCkgKS5zcmMgPSB0LnRleHR1cmVEYXRhID0gZGF0YS50ZXh0dXJlO1xuXG4gICAgICAgICAgdC5pbWFnZS5vbmxvYWQgPSAoKT0+IHtcbiAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCBcIldhaXQgdW50aWwgbG9hZCB0byBzZXR1cCBjb29yZHNcIilcbiAgICAgICAgICAgICB0LnRleHR1cmVDb29yZHMgPSBWb3hlbGFyaXVtLlRleHR1cmVBdGxhcy5hZGQoIHQuaW1hZ2UgKVxuICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIFwicGVuZGluZyBcIiwgY291bnQgKTtcbiAgICAgICAgICAgICBpZiggIS0tY291bnQgKSB7IGNvbnNvbGUubG9nKCBcIlpFUk8hXCIgKTsgY2IoKTsgfVxuICAgICAgICAgIH1cblxuICAgICAgfVxuICAgICAgaWYoICEtLWNvdW50ICkgY2IoKTtcbiAgfSk7XG59XG5cblxuZnVuY3Rpb24gaW5pdGlhbFZveGVsVHlwZUxvYWQoYnJhbmNoLGNiKSB7XG4gICAgY29uc29sZS5sb2coIFwiTG9hZGluZyBpbml0aWFsIHZveGVscy4uLlwiKVxuICAgIFZveGVsYXJpdW0uVm94ZWxzLmxvYWQoICgpPT57XG4gICAgICAgIHZhciB2b3hlbFR5cGVzID0ge307XG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgVm94ZWxhcml1bS5Wb3hlbHMudHlwZXMuZm9yRWFjaCggKHR5cGUpPT57XG4gICAgICAgICAgICBpZiggIXR5cGUuSUQgKSByZXR1cm47XG4gICAgICAgICAgICBuKys7XG4gICAgICAgICAgICB2b3hlbFR5cGVzWyB0eXBlLklEIF0gPSB7IElEOnR5cGUuSUQsIGNvZGU6IHR5cGUuY29kZURhdGEsIHRleHR1cmUgOiB0eXBlLnRleHR1cmVEYXRhfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyYW5jaC5wdXQoIHsgdm94ZWxUeXBlcyA6IHZveGVsVHlwZXMsIHZveGVsVHlwZUNvdW50IDogbiB9ICk7XG4gICAgICAgIGNiKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRXb3JsZCggY2IgKSB7XG4gICAgKCBkYi53b3JsZC52b3hlbEluZm8gPSBkYi53b3JsZC5kYi5wYXRoKCBcInZveGVsSW5mb1wiICkgKVxuICAgICAgICAubm90KCBmdW5jdGlvbigpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKCBcIk5vIFZveGVsSW5mbzsgbG9hZCBkZWZhdWx0XCIpO1xuICAgICAgICAgICAgaW5pdGlhbFZveGVsVHlwZUxvYWQoZGIud29ybGQudm94ZWxJbmZvLGNiKVxuICAgICAgICAgfSkudmFsKCAodmFsKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coIFwic2tpcCBhIGJlYXQgYW5kIGxvYWQgdGhlIHZveGVscy4uLi5cIilcbiAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICgpPT57IGxvYWRWb3hlbHMoY2IsdmFsKSB9XG4gICAgICAgICAgICAgKVxuICAgICAgICB9ICk7XG59XG5cbmZ1bmN0aW9uIGRvRGVmYXVsdEluaXQoIGRhdGEgKSB7XG4gICAgaWYoICFkYi5wbGF5ZXIuaWQgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCBcImRvIGRlZmF1bHQgaW5pdC4uLiBwaWNrIGEgcGxheWVyIElEIGFuZCBnaXZlIGhpbSBhbiBpbml0aWFsIHdvcmxkX2lkXCIpXG4gICAgICAgIGRiLnBsYXllci5pZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBkYi5wbGF5ZXIud29ybGRfaWQgPSAwO1xuICAgICAgICBjb25zb2xlLmxvZyggXCJwdXQgbG9jYWwuaWQ9cGxheWVyLmlkXCIpXG4gICAgICAgIGRiLnBsYXllci5sb2NhbC5wYXRoKFwiaWRcIikucHV0KCBkYi5wbGF5ZXIuaWQgKVxuICAgICAgICBjb25zb2xlLmxvZyggXCJwdXQgbG9jYWwud29ybGRfaWQ9cGxheWVyLndvcmxkX2lkXCIpXG4gICAgICAgIGRiLnBsYXllci5sb2NhbC5wYXRoKFwid29ybGRfaWRcIikucHV0KCBkYi5wbGF5ZXIud29ybGRfaWQgKVxuICAgICAgICBjb25zb2xlLmxvZyggXCJkb25lIHB1dHRpbmcgd29ybGRfaWRcIilcbiAgICB9ZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCBcInNraXBwZWQgcmVkdW5kYW50IGluaXRcIilcbiAgICB9XG4gICAgLy8gdGhlIHZhbCgpIGluIGluaXQgd2lsbCBmaXJlIGhlcmU7IHNvIGdsb2JhbCBnZXRzIGluaXRpYWxpemVkIGluIG5vcm1hbCBwYXRoLi4uXG59XG5cbmZ1bmN0aW9uIGRvRGVmYXVsdEluaXRUcmlnZ2VyKCkge1xuICAgIGNvbnNvbGUubG9nKCBcInB1dCBpbml0PXRydWVcIilcblx0ICBkYi5wbGF5ZXIubG9jYWwucGF0aCggXCJpbml0XCIgKS5wdXQoIHRydWUgKTtcbiAgICBjb25zb2xlLmxvZyggXCJsb2NhbCBwdXQgaW5pdCBoYXMgZmluaXNoZWQgZm9yIGluaXRhbCBEYiBLaWNrO1wiICk7XG59XG5cbmZ1bmN0aW9uIGRvRGVmYXVsdEdsb2JhbEluaXRUcmlnZ2VyKCkge1xuICAgIGNvbnNvbGUubG9nKCBcIiBraWNrIGdsb2JhbD9cIilcbiAgICBkYi5wbGF5ZXIuZ2xvYmFsLnBhdGgoIFwiaW5pdFwiICkucHV0KCB0cnVlICk7XG4gICAgY29uc29sZS5sb2coIFwiZ2xvYmFsIHB1dCBpbml0IGhhcyBmaW5pc2hlZCBmb3IgaW5pdGFsIERiIEtpY2tcIilcblxufVxuXG5mdW5jdGlvbiBwbGF5ZXJDb25uZWN0KCB2YWwsIGZpZWxkICkge1xuICBjb25zb2xlLmxvZyggXCJwbGF5ZXIgaGFzIGNvbm5lY3RlZFwiLCB2YWwsIGZpZWxkICk7XG59XG5cbnZhciBkZWZhdWx0VGltZW91dDtcbnZhciBkZWZhdWx0R2xvYmFsVGltZW91dDtcbmRiLmluaXQgPSBmdW5jdGlvbiggY2IgKSB7XG4gICAgLy8gZGVmYXVsdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCBkb0RlZmF1bHRJbml0VHJpZ2dlciwgMjUwICk7XG4gICAgZGIucGxheWVyLmxvY2FsLnBhdGgoXCJpZFwiKS5ub3QoIGRvRGVmYXVsdEluaXQgKS52YWwoIChkYXRhKT0+e1xuICAgICAgICBjb25zb2xlLmxvZyggXCJ2YWx1ZSBpcyBcIiwgZGF0YSlcbiAgICAgICAgLy9jbGVhclRpbWVvdXQoIGRlZmF1bHRUaW1lb3V0ICk7XG4gICAgICAgIGRiLnBsYXllci5pZCA9IGRhdGE7XG4gICAgICAgIGRiLmdsb2JhbERiLnBhdGgoIFwicGxheWVyXCIgKS5tYXAoIHBsYXllckNvbm5lY3QgKTtcbiAgICAgICAgZGIucGxheWVyLmdsb2JhbCA9IGRiLmdsb2JhbERiLnBhdGgoIFwicGxheWVyXCIgKS5wYXRoKCBkYXRhICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCBcImdvaW5nIHRvIHJlcXVlc3Qgd29ybGRfaWQuLi5cIilcbiAgICAgICAgZGIucGxheWVyLmxvY2FsLnBhdGgoXCJ3b3JsZF9pZFwiKS52YWwoIChkYXRhKT0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcInJlY2VpdmVkIHdvcmxkX2lkXCIpXG4gICAgICAgICAgZGIucGxheWVyLndvcmxkX2lkID0gZGF0YTtcbiAgICAgICAgICBkYi53b3JsZC5kYiA9IGRiLmdsb2JhbERiLnBhdGgoIFwid29ybGRcIiApLnBhdGgoIGRiLnBsYXllci53b3JsZF9pZCApO1xuICAgICAgICAgIGRiLnBsYXllci5nbG9iYWwubWFwKCkudmFsKCBwbGF5ZXJDb25uZWN0ICk7XG4gICAgICAgICAgZGIucGxheWVyLmdsb2JhbC5wYXRoKFwicG9zaXRpb25cIikub24oIHBsYXllclBvc2l0aW9uQ2hhbmdlICk7XG4gICAgICAgICAgbG9hZFdvcmxkKCBjYiApO1xuICAgICAgICB9ICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCBcInJlcXVlc3RlZCB3b3JsZCBpZCAtIGRvbmUgd2l0aCB2YWwgY2FsbGJhY2tcIilcbiAgICB9KVxuICAgIC8vZGIucGxheWVyLmxvY2FsLnBhdGgoXCJpZFwiKS5wdXQoIG5ldyBEYXRlKCkuZ2V0VGltZSgpIClcbn1cblxuZGIuYW5pbWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vZGIucGxheWVyLnB1dCgge3Bvc2l0aW9uOlZveGVsYXJpdW0uY2FtZXJhLnBvc2l0aW9ufSApXG4gICAgaWYoICFkYi5wbGF5ZXIuZ2xvYmFsIClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBtID0gVm94ZWxhcml1bS5jYW1lcmEubWF0cml4O1xuICAgIHZhciBvbGRxID0gZGIucGxheWVyLl9xdWF0XG4gICAgdmFyIG5ld3EgPSBkYi5wbGF5ZXIucXVhdC5zZXRGcm9tUm90YXRpb25NYXRyaXgoIG0gKTtcbiAgICB2YXIgb2xkbyA9IGRiLnBsYXllci5fb3JpZ2luXG4gICAgdmFyIG5ld28gPSBkYi5wbGF5ZXIub3JpZ2luLmNvcHkoIG0ub3JpZ2luICk7XG5cblxuICAgIGlmKCBvbGRxLnggIT09IG5ld3EueCB8fFxuICAgICAgICBvbGRxLnkgIT09IG5ld3EueSB8fFxuICAgICAgICBvbGRxLnogIT09IG5ld3EueiB8fFxuICAgICAgICBvbGRxLncgIT09IG5ld3EudyB8fFxuICAgICAgICBvbGRvLnggIT09IG5ld28ueCB8fFxuICAgICAgICBvbGRvLnkgIT09IG5ld28ueSB8fFxuICAgICAgICBvbGRvLnogIT09IG5ld28ueiApXG4gICAge1xuICAgICAgICB2YXIgYSA9ICggb2xkby54IC0gbmV3by54ICk7XG4gICAgICAgIHZhciBiID0gKCBvbGRvLnkgLSBuZXdvLnkgKTtcbiAgICAgICAgdmFyIGMgPSAoIG9sZG8ueiAtIG5ld28ueiApO1xuXG4gICAgICAgIHZhciBkID0gKCBvbGRxLnggLSBuZXdxLnggKTtcbiAgICAgICAgdmFyIGUgPSAoIG9sZHEueSAtIG5ld3EueSApO1xuICAgICAgICB2YXIgZiA9ICggb2xkcS56IC0gbmV3cS56ICk7XG4gICAgICAgIHZhciBnID0gKCBvbGRxLncgLSBuZXdxLncgKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyggYGEgaXMgJHthKmErYipiK2MqY30gIGIgaXMgJHtkKmQrZSplK2YqZitnKmd9YClcbiAgICAgICAgaWYoICggYSphK2IqYitjKmMgPiAwLjAwMSApXG4gICAgICAgICAgICB8fCggZCpkK2UqZStmKmYrZypnID4gMC4wMDEgKSApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3NfbXNnID0ge3F4Om5ld3EueCxxeTpuZXdxLnkscXo6bmV3cS56LHF3Om5ld3Eud1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICxveDptLm9yaWdpbi54LG95Om0ub3JpZ2luLnksb3o6bS5vcmlnaW4uen1cbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIFwicHV0XCIsIHBvc19tc2cgKVxuICAgICAgICAgICAgLy9kYi5wbGF5ZXIubG9jYWwucGF0aCggXCJwb3NpdGlvblwiKS5wdXQoIHBvc19tc2cgKVxuICAgICAgICAgICAgZGIucGxheWVyLmdsb2JhbC5wYXRoKCBcInBvc2l0aW9uXCIpLnB1dCggcG9zX21zZyApXG4gICAgICAgICAgICBvbGRxLmNvcHkoIG5ld3EgKTtcbiAgICAgICAgICAgIG9sZG8uY29weSggbmV3byApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0b3JlU2VjdG9yKCBzZWN0b3IgKSB7XG4gICAgaWYoICFkYi53b3JsZC5jbHVzdGVyIClcbiAgICAgIGRiLndvcmxkLmNsdXN0ZXIgPSBzZWN0b3IuY2x1c3RlcjtcbiAgICBhZGRMaXN0ZW5lciggc2VjdG9yICk7XG4gICAgLy9jb25zb2xlLmxvZyggXCJwdXQgc2VjdG9yIHVwZGF0ZSBcIiApXG4gICAgdmFyIHN0cmluZztcbiAgICAgIHRoaXMuZGIucGF0aChnZXRQYXRoKHNlY3RvcikpLnB1dCggc3RyaW5nID0gc2VjdG9yLnN0cmluZ2lmeSgpICk7XG4gICAgICBjb25zb2xlLmxvZyggXCJwdXQtZWQgc2VjdG9yIHVwZGF0ZSBcIiwgc3RyaW5nIClcbn1cblxuZnVuY3Rpb24gbG9hZFNlY3Rvciggc2VjdG9yICkge1xuICAgICAgYWRkTGlzdGVuZXIoIHNlY3RvciApO1xuICAgICAgLy90aGlzLmRiLnBhdGgoZ2V0UGF0aChzZWN0b3IpKS5vbiggY2IgKTtcbn1cblxuLy9ndW4uZ2V0KCBgb3JnLmQzeDByLnZveGVsYXJpdW0udW5pdmVyc2UuJHt1bml2ZXJzZX0ucGxheWVyLiR7c2VsZn1gKVxuIiwiXG5Wb3hlbGFyaXVtLlZveGVscyA9IHtcblx0dHlwZXMgOiBbXSxcblx0YWRkIDogZnVuY3Rpb24oIHR5cGUsIHByb3BlcnRpZXMscmVhY3Rpb24gKSB7XG4gICAgICAgIFx0Ly90aGlzLnR5cGVzLnB1c2goXG5cdFx0XHRcdFx0XHR0aGlzW3R5cGVdID0ge1xuXHRcdFx0XHRcdFx0IElEIDogdGhpcy50eXBlcy5sZW5ndGhcbiAgICAgICAgICAgICAgICBcdFx0LCBuYW1lIDogdHlwZVxuICAgICAgICAgICAgICAgIFx0XHQsIHByb3BlcnRpZXMgOiBwcm9wZXJ0aWVzXG5cdFx0XHRcdCwgcmVhY3Rpb24gOiByZWFjdGlvblxuXHRcdFx0IFx0LCBjcmVhdGVWb3hlbEV4dGVuc2lvbiA6IG51bGxcblx0XHRcdFx0LCBkZWxldGVWb3hlbEV4dGVuc2lvbiA6IG51bGxcblx0XHRcdFx0LCB0ZXh0dXJlQ29vcmRzIDoge31cblx0XHRcdFx0LCBpbWFnZSA6IG51bGxcblx0XHRcdFx0LCB0ZXh0dXJlIDogbnVsbFxuXHRcdFx0XHQsIGNvZGVEYXRhIDogbnVsbFxuXHRcdFx0XHQsIHRleHR1cmVEYXRhIDogbnVsbFxuXHRcdFx0fVxuXHRcdCAgLy8pO1xuXHRcdFx0aWYoIHR5cGVvZiBwcm9wZXJ0aWVzLkRyYXdJbmZvID09PSBcInVuZGVmaW5lZFwiIClcblx0XHRcdFx0cHJvcGVydGllcy5EcmF3SW5mbyA9IFZveGVsYXJpdW0uWlZPWEVMX0RSQVdJTkZPX0RSQVdGVUxMVk9YRUxPUEFDSVRZO1xuXHRcdFx0cmV0dXJuIHRoaXNbdHlwZV07XG5cdFx0fVxuLypcbklzX1BsYXllckNhblBhc3NUaHJvdWdoID0gZmFsc2U7XG5EcmF3X1RyYW5zcGFyZW50UmVuZGVyaW5nID0gZmFsc2U7XG5EcmF3X0Z1bGxWb3hlbE9wYWNpdHkgPSB0cnVlO1xuRHJhd0luZm8gPSBWb3hlbEdsb2JhbFNldHRpbmdzLlpWT1hFTF9EUkFXSU5GT19EUkFXRlVMTFZPWEVMT1BBQ0lUWTtcbkV4dGVuc2lvblR5cGUgPSAwO1xuSXNfVm94ZWxFeHRlbnNpb24gPSBmYWxzZTtcbklzX0hhc0FsbG9jYXRlZE1lbW9yeUV4dGVuc2lvbiA9IGZhbHNlO1xuTWluaW5nSGFyZG5lc3MgPSAxMDAwLjBmO1xuTWluaW5nVHlwZSA9IDI7XG5Jc19Ob1R5cGUgPSBmYWxzZTtcbklzX1VzZXJUeXBlVHJhbnNmb3JtYWJsZSA9IHRydWU7XG5Jc19IYXJtaW5nID0gZmFsc2U7XG5GcmljdGlvbkNvZWYgPSAwLjAwMTtcbkdyaXBfSG9yaXpvbnRhbCA9IDAuOTtcbkdyaXBfVmVydGljYWwgPSAwLjA7XG5Jc19TcGFjZUdyaXBUeXBlID0gZmFsc2U7XG5Jc19LZWVwQ29udHJvbE9uSnVtcGluZyA9IHRydWU7XG5IYXJtaW5nTGlmZVBvaW50c1BlclNlY29uZCA9IDAuMDtcbklzX0FjdGl2ZSA9IGZhbHNlO1xuSXNfQ2FuQmVSZXBsYWNlZEJ5X1dhdGVyID0gZmFsc2U7XG5Jc19DYW5CZVJlcGxhY2VkQnlfR3JlZW5BY2lkID0gZmFsc2U7XG5Jc19DYW5CZVJlcGxhY2VkQnlfTXVzdGFyZEdheiA9IGZhbHNlO1xuSXNfQ29tYmluYWJsZVdpdGhfR3JlZW5BY2lkID0gdHJ1ZTtcbklzX0NhblRyaWdnZXJCb21iID0gZmFsc2U7XG5Jc19MaXF1aWQgPSBmYWxzZTtcbklzX0dheiA9IGZhbHNlO1xuSXNfSW50ZXJmYWNlX1N0b3JlQmxvY2sgPSBmYWxzZTtcbklzX0ludGVyZmFjZV9QdXNoQmxvY2sgPSBmYWxzZTtcbklzX0ludGVyZmFjZV9QdWxsQmxvY2sgPSBmYWxzZTtcbklzX0ludGVyZmFjZV9HZXRJbmZvID0gZmFsc2U7XG5Jc19JbnRlcmZhY2VfU2V0SW5mbyA9IGZhbHNlO1xuSXNfUHVtcGFibGVfQnlQdW1wX1QxID0gZmFsc2U7XG5Jc19QdW1wYWJsZV9CeVB1bXBfVDIgPSBmYWxzZTtcbklzX0xvYWRhYmxlX0J5TG9hZGVyX0wxID0gdHJ1ZTtcbkJ2UHJvcF9Nb3ZlYWJsZUJ5VHJlYWRtaWxsID0gdHJ1ZTtcbkJ2UHJvcF9GYXN0TW92aW5nID0gZmFsc2U7XG5Jc19SaWRlYWJsZSA9IGZhbHNlO1xuSXNfSGFzSGVscGluZ01lc3NhZ2UgPSBmYWxzZTtcbkJ2UHJvcF9DYW5CZVBpY2tlZFVwQnlSb2JvdCA9IHRydWU7XG5CdlByb3BfWHJSb2JvdFBpY2tNaW5MZXZlbCA9IDE7XG5CdlByb3BfUHJSb2JvdFJlcGxhY2VNaW5MZXZlbCA9IDA7XG5CdlByb3BfUHJSb2JvdFBpY2tNaW5MZXZlbCA9IDA7XG5CdlByb3BfUHJSb2JvdE1vdmVNaW5MZXZlbCA9IDA7XG5CdlByb3BfQXRvbWljRmlyZVJlc2lzdGFudCA9IGZhbHNlO1xuQnZQcm9wX0VnbXlUMVJlc2lzdGFudCA9IGZhbHNlO1xuTGlxdWlkRGVuc2l0eSA9IDAuMDtcbkJsYXN0UmVzaXN0YW5jZSA9IDE7XG5GYWJJbmZvID0gbnVsbDtcbkRvY3VtZW50YXRpb25fUGFnZU51bSA9IDA7XG4qL1xuXG59XG5cblZveGVsYXJpdW0uVm94ZWxzLnR5cGVzLnB1c2goXG5Wb3hlbGFyaXVtLlZveGVscy5hZGQoIFwiVm9pZFwiLCB7XG4gICAgICBJc19QbGF5ZXJDYW5QYXNzVGhyb3VnaCA6IHRydWUsXG4gICAgICBEcmF3X1RyYW5zcGFyZW50UmVuZGVyaW5nIDogZmFsc2UsXG4gICAgICBEcmF3X0Z1bGxWb3hlbE9wYWNpdHkgOiBmYWxzZSxcbiAgICAgIERyYXdJbmZvIDogVm94ZWxhcml1bS5aVk9YRUxfRFJBV0lORk9fVk9JRCxcbiAgICAgIElzX0hhcm1pbmcgOiBmYWxzZSxcbiAgICAgIEZyaWN0aW9uQ29lZiA6IDAuMDAwMSxcbiAgICAgIEdyaXBfVmVydGljYWwgOiAwLjAsXG4gICAgICBHcmlwX0hvcml6b250YWwgOiAwLjgsXG4gICAgICBJc19TcGFjZUdyaXBUeXBlIDogZmFsc2UsXG4gICAgICBJc19LZWVwQ29udHJvbE9uSnVtcGluZyA6IHRydWUsXG4gICAgICBJc19BY3RpdmUgOiBmYWxzZSxcbiAgICAgIElzX0NhbkJlUmVwbGFjZWRCeV9XYXRlciA6IHRydWUsXG4gICAgICBJc19Db21iaW5hYmxlV2l0aF9HcmVlbkFjaWQgOiBmYWxzZSxcbiAgICAgIElzX0NhbkJlUmVwbGFjZWRCeV9HcmVlbkFjaWQgOiB0cnVlLFxuICAgICAgSXNfQ2FuQmVSZXBsYWNlZEJ5X011c3RhcmRHYXogOiB0cnVlLFxuICAgICAgQnZQcm9wX0NhbkJlUGlja2VkVXBCeVJvYm90IDogZmFsc2UsXG4gICAgICBCdlByb3BfWHJSb2JvdFBpY2tNaW5MZXZlbCA6IDI1NSxcbiAgICAgIEJ2UHJvcF9QclJvYm90UmVwbGFjZU1pbkxldmVsIDogMCxcbiAgICAgIEJ2UHJvcF9QclJvYm90UGlja01pbkxldmVsIDogMjU1LFxuICAgICAgQnZQcm9wX1ByUm9ib3RNb3ZlTWluTGV2ZWwgOiAwLFxuICAgICAgQnZQcm9wX0F0b21pY0ZpcmVSZXNpc3RhbnQgOiB0cnVlLFxuICAgICAgSXNfTGlxdWlkIDogZmFsc2UsXG4gICAgICBJc19HYXogOiB0cnVlLFxuICAgICAgSXNfTG9hZGFibGVfQnlMb2FkZXJfTDEgOiBmYWxzZSxcbiAgICAgIEJ2UHJvcF9Nb3ZlYWJsZUJ5VHJlYWRtaWxsIDogZmFsc2UsXG4gICAgICBCdlByb3BfRWdteVQxUmVzaXN0YW50IDogZmFsc2UsXG4gICAgICBMaXF1aWREZW5zaXR5IDogMC4wLFxufSApICk7XG5cblZveGVsYXJpdW0uVm94ZWxzLmdldEluZGV4ID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdHZhciB0eXBlcyA9IFZveGVsYXJpdW0uVm94ZWxzLnR5cGVzO1xuXHRyZXR1cm4gdHlwZXMuZmluZEluZGV4KCAodik9PnYgPT09IHR5cGUgKTtcbn1cblxudmFyIHhock9iajtcblZveGVsYXJpdW0uVm94ZWxzLmxvYWQgPSBmdW5jdGlvbiggY2IgKSB7XG5cdHZhciBuID0gMVxuXHR4aHJPYmogPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0Ly92YXIgeGhyT2JqMiA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRsb2FkQVZveGVsKCBuLCBjYiApO1xufVxuXG5mdW5jdGlvbiBsb2FkQVZveGVsKCBuLCBjYiApIHtcblx0e1xuXHRcdHRyeSB7XG5cdFx0XHR4aHJPYmoub3BlbignR0VUJywgYC4vc3JjL3ZveGVscy92b3hlbF8ke259LmpzYCk7XG5cdFx0XHQvL3hock9iai5yZXNwb25zZVR5cGUgPSBcInRleHRcIjtcblx0XHRcdC8veGhyT2JqLnJlc3BvbnNlID0gXCJcIjtcblx0XHRcdHhock9iai5zZW5kKG51bGwpO1xuXHRcdFx0eGhyT2JqLm9uZXJyb3IgPSAoZXJyKT0+e1xuXHRcdFx0XHQgIC8vY29uc29sZS5sb2coIFwicmVxdWlyZSBcIiwgbiApO1xuXHRcdCAgICAgIC8vY29uc29sZS5sb2coIGVyciApO1xuXHRcdFx0XHRcdGNiKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fTtcblx0XHRcdHhock9iai5vbmxvYWQgPSAoKT0+e1xuXHRcdFx0XHRpZiggIXhock9iai5zdGF0dXMgfHwgeGhyT2JqLnN0YXR1cyA9PT0gMjAwICkge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coIFwibG9hZCBcIiwgbilcblx0XHRcdFx0XHRWb3hlbGFyaXVtLlZveGVscy50eXBlcy5wdXNoKCBldmFsKHhock9iai5yZXNwb25zZVRleHQpICk7XG5cdFx0XHRcdFx0dmFyIHQgPSBWb3hlbGFyaXVtLlZveGVscy50eXBlc1tuXTtcblxuXHRcdFx0XHRcdHQuY29kZURhdGEgPSB4aHJPYmoucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHRcdHhock9iai5vcGVuKCdHRVQnLCBgLi9zcmMvdm94ZWxzL2ltYWdlcy92b3hlbF8ke259LnBuZ2ApO1xuXHRcdFx0XHRcdHhock9iai5vbmVycm9yID0gKGVycik9Pntcblx0XHRcdFx0XHRcdCBjb25zb2xlLmxvZyggXCJlcnJvcjpcIiwgZXJyKTtcblx0XHRcdFx0ICAgICBsb2FkQVZveGVsKCBuKzEsIGNiICk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0XHRcdHhock9iai5zZW5kKG51bGwpO1xuXHRcdFx0XHRcdHhock9iai5vbmxvYWQgPSAoKT0+e1xuXHRcdFx0XHRcdFx0aWYoIHhock9iai5yZXNwb25zZVRleHQubGVuZ3RoID4gMCApIHtcblx0XHRcdFx0XHRcdFx0KCB0LmltYWdlID0gbmV3IEltYWdlKCkgKS5zcmMgPSB4aHJPYmoucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHRcdFx0XHR0LnRleHR1cmVEYXRhID0geGhyT2JqLnJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0XHR0LmltYWdlLm9uZXJyb3IgPSAoZXJyKT0+eyBjb25zb2xlLmxvZyggXCJpbWFnZSBsb2FkIGVycm9yP1wiLCBlcnIpfVxuXHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCB0ICk7XG5cdFx0XHRcdFx0XHRcdGlmKCB0cnVlIHx8ICF0LmltYWdlLndpZHRoIClcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHQuaW1hZ2Uub25sb2FkID0gKCk9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHQgLy9jb25zb2xlLmxvZyggXCJXYWl0ZWQgdW50aWwgbG9hZCB0byBzZXR1cCBjb29yZHNcIiwgdClcblx0XHRcdFx0XHRcdFx0XHQgICB0LnRleHR1cmVDb29yZHMgPSBWb3hlbGFyaXVtLlRleHR1cmVBdGxhcy5hZGQoIHQuaW1hZ2UgKVxuXHRcdFx0XHRcdFx0XHQgIH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCBcImRvbid0IGhhdmUgdG8gZGVsYXkgbG9hZD9cIilcblx0XHRcdFx0XHRcdFx0ICAvL3QudGV4dHVyZUNvb3JkcyA9IFZveGVsYXJpdW0uVGV4dHVyZUF0bGFzLmFkZCggdC5pbWFnZSApXG5cdFx0XHRcdFx0XHQgIH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGxvYWRBVm94ZWwoIG4rMSwgY2IgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coIFwiQWxsIGNvbXBsZXRlZC4uLiBvdXQgb2YgbG9hZGFibGVzLi4uXCIpXG5cdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly9yZXF1aXJlKCBgLi92b3hlbHMvdm94ZWxfJHtufS5qc2AgKVxuXHRcdH1cblx0XHRjYXRjaCggZXJyICkge1xuXHRcdFx0Y29uc29sZS5sb2coIFwicmVxdWlyZSBcIiwgbiApO1xuXHQgICAgICAgIFx0Y29uc29sZS5sb2coIGVyciApO1xuXHRcdFx0XHRjYigpO1xuXHRcdH1cblx0fVxuXG59XG5cbi8vVm94ZWxhcml1bS5Wb3hlbHMudHlwZXNbMF0gPSBWb3hlbGFyaXVtLlZveGVscy50eXBlcy5Wb2lkO1xuLy9Wb3hlbGFyaXVtLlZveGVscy50eXBlc1sxXSA9IFZveGVsYXJpdW0uVm94ZWxzLnR5cGVzW1wiQmxhY2tSb2NrIEJsdWVcIl07XG4iLCJcclxucmVxdWlyZSggXCIuL2NsdXN0ZXIuanNcIilcclxudmFyIGZvbnRzID0gcmVxdWlyZSggXCIuL3ZveGVsLmZvbnRzLmpzXCIgKTtcclxuXHJcblZveGVsYXJpdW0uV29ybGQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2x1c3RlcnMgOiBbXSxcclxuXHJcbiAgICAgICAgY3JlYXRlQ2x1c3RlciA6IGZ1bmN0aW9uKCBtZXNoZXIsIHZveGVsVW5pdFNpemUgKSB7XHJcbiAgICAgICAgICAgIHZhciBjbHVzdGVyID0gVm94ZWxhcml1bS5DbHVzdGVyKDMyLDMyLDMyKTtcclxuICAgICAgICAgICAgY2x1c3Rlci5tZXNoZXIgPSBtZXNoZXI7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIudm94ZWxVbml0U2l6ZSA9IHZveGVsVW5pdFNpemUgfHwgMjA7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIuZ2V0R2VvbWV0cnlCdWZmZXIgPSBWb3hlbGFyaXVtLlNldHRpbmdzLnVzZV9iYXNpY19tYXRlcmlhbFxyXG4gICAgICAgICAgICAgICAgPyBWb3hlbGFyaXVtLkdlb21ldHJ5QmFzaWNCdWZmZXJcclxuICAgICAgICAgICAgICAgIDogVm94ZWxhcml1bS5HZW9tZXRyeUJ1ZmZlcjtcclxuICAgICAgICAgICAgdGhpcy5jbHVzdGVycy5wdXNoKCBjbHVzdGVyICk7XHJcbiAgICAgICAgICAgIHJldHVybiBjbHVzdGVyO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNyZWF0ZVRleHRDbHVzdGVyIDogZnVuY3Rpb24oIHRleHQsIHYsIG1lc2hlciwgZm9udCwgdm94ZWxVbml0U2l6ZSApIHtcclxuICAgICAgICAgICAgdmFyIGNsdXN0ZXIgPSBWb3hlbGFyaXVtLkNsdXN0ZXIoMjU2KjgsOCwxKTtcclxuICAgICAgICAgICAgY2x1c3Rlci5tZXNoZXIgPSBtZXNoZXI7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIudm94ZWxVbml0U2l6ZSA9IHZveGVsVW5pdFNpemUgfHwgMjA7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIuZ2V0R2VvbWV0cnlCdWZmZXIgPSBWb3hlbGFyaXVtLkdlb21ldHJ5QnVmZmVyTW9ubztcclxuICAgICAgICAgICAgdGhpcy5jbHVzdGVycy5wdXNoKCBjbHVzdGVyICk7XHJcbiAgICAgICAgICAgIC8vdmFyIHNlY3RvciA9IGNsdXN0ZXIuY3JlYXRlU2VjdG9yKCAwLCAwLCAwICk7XHJcbiAgICAgICAgICAgIHZhciBwb3MgPSB7IHg6MCwgeTowfTtcclxuXHJcbiAgICAgICAgICAgIGZvciggdmFyIG4gPSAwOyBuIDwgdGV4dC5sZW5ndGg7IG4rKyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaCA9IHRleHQuY29kZVBvaW50QXQobik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHcgPSBmb250cy5kcmF3Q2hhcmFjdGVyKCBjbHVzdGVyLCBwb3MsIHYsIGNoLCBmb250IClcclxuICAgICAgICAgICAgICAgIHBvcy54ICs9IHc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2x1c3RlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXG4gKiBAYXV0aG9yIGRtYXJjb3MgLyBodHRwczovL2dpdGh1Yi5jb20vZG1hcmNvc1xuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbVxuICovXG5cblRIUkVFLlZSQ29udHJvbHMgPSBmdW5jdGlvbiAoIG9iamVjdCwgb25FcnJvciApIHtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdHZhciB2ckRpc3BsYXksIHZyRGlzcGxheXM7XG5cblx0dmFyIHN0YW5kaW5nTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcblxuXHR2YXIgZnJhbWVEYXRhID0gbnVsbDtcblxuXHRpZiAoICdWUkZyYW1lRGF0YScgaW4gd2luZG93ICkge1xuXG5cdFx0ZnJhbWVEYXRhID0gbmV3IFZSRnJhbWVEYXRhKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdvdFZSRGlzcGxheXMoIGRpc3BsYXlzICkge1xuXG5cdFx0dnJEaXNwbGF5cyA9IGRpc3BsYXlzO1xuXG5cdFx0aWYgKCBkaXNwbGF5cy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHR2ckRpc3BsYXkgPSBkaXNwbGF5c1sgMCBdO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0aWYgKCBvbkVycm9yICkgb25FcnJvciggJ1ZSIGlucHV0IG5vdCBhdmFpbGFibGUuJyApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRpZiAoIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzICkge1xuXG5cdFx0bmF2aWdhdG9yLmdldFZSRGlzcGxheXMoKS50aGVuKCBnb3RWUkRpc3BsYXlzICk7XG5cblx0fVxuXG4gIHRoaXMucm9vbU9yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0Ly8gdGhlIFJpZnQgU0RLIHJldHVybnMgdGhlIHBvc2l0aW9uIGluIG1ldGVyc1xuXHQvLyB0aGlzIHNjYWxlIGZhY3RvciBhbGxvd3MgdGhlIHVzZXIgdG8gZGVmaW5lIGhvdyBtZXRlcnNcblx0Ly8gYXJlIGNvbnZlcnRlZCB0byBzY2VuZSB1bml0cy5cblxuXHR0aGlzLnNjYWxlID0gMTtcblxuXHQvLyBJZiB0cnVlIHdpbGwgdXNlIFwic3RhbmRpbmcgc3BhY2VcIiBjb29yZGluYXRlIHN5c3RlbSB3aGVyZSB5PTAgaXMgdGhlXG5cdC8vIGZsb29yIGFuZCB4PTAsIHo9MCBpcyB0aGUgY2VudGVyIG9mIHRoZSByb29tLlxuXHR0aGlzLnN0YW5kaW5nID0gZmFsc2U7XG5cblx0Ly8gRGlzdGFuY2UgZnJvbSB0aGUgdXNlcnMgZXllcyB0byB0aGUgZmxvb3IgaW4gbWV0ZXJzLiBVc2VkIHdoZW5cblx0Ly8gc3RhbmRpbmc9dHJ1ZSBidXQgdGhlIFZSRGlzcGxheSBkb2Vzbid0IHByb3ZpZGUgc3RhZ2VQYXJhbWV0ZXJzLlxuXHR0aGlzLnVzZXJIZWlnaHQgPSAxLjY7XG5cblx0dGhpcy5nZXRWUkRpc3BsYXkgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRyZXR1cm4gdnJEaXNwbGF5O1xuXG5cdH07XG5cblx0dGhpcy5zZXRWUkRpc3BsYXkgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dnJEaXNwbGF5ID0gdmFsdWU7XG5cblx0fTtcblxuXHR0aGlzLmdldFZSRGlzcGxheXMgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUkNvbnRyb2xzOiBnZXRWUkRpc3BsYXlzKCkgaXMgYmVpbmcgZGVwcmVjYXRlZC4nICk7XG5cdFx0cmV0dXJuIHZyRGlzcGxheXM7XG5cblx0fTtcblxuXHR0aGlzLmdldFN0YW5kaW5nTWF0cml4ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIHN0YW5kaW5nTWF0cml4O1xuXG5cdH07XG5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRpZiAoIHZyRGlzcGxheSApIHtcblxuXHRcdFx0dmFyIHBvc2U7XG5cblx0XHRcdGlmICggdnJEaXNwbGF5LmdldEZyYW1lRGF0YSApIHtcblxuXHRcdFx0XHR2ckRpc3BsYXkuZ2V0RnJhbWVEYXRhKCBmcmFtZURhdGEgKTtcblx0XHRcdFx0cG9zZSA9IGZyYW1lRGF0YS5wb3NlO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB2ckRpc3BsYXkuZ2V0UG9zZSApIHtcblxuXHRcdFx0XHRwb3NlID0gdnJEaXNwbGF5LmdldFBvc2UoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHBvc2Uub3JpZW50YXRpb24gIT09IG51bGwgKSB7XG5cblx0XHRcdFx0b2JqZWN0LnF1YXRlcm5pb24uZnJvbUFycmF5KCBwb3NlLm9yaWVudGF0aW9uICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwb3NlLnBvc2l0aW9uICE9PSBudWxsICkge1xuXG5cdFx0XHRcdG9iamVjdC5wb3NpdGlvbi5mcm9tQXJyYXkoIHBvc2UucG9zaXRpb24gKTtcblx0XHRcdFx0b2JqZWN0LnBvc2l0aW9uLmFkZCggdGhpcy5yb29tT3JpZ2luICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0b2JqZWN0LnBvc2l0aW9uLnNldCggMCwgMCwgMCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGhpcy5zdGFuZGluZyApIHtcblxuXHRcdFx0XHRpZiAoIHZyRGlzcGxheS5zdGFnZVBhcmFtZXRlcnMgKSB7XG5cblx0XHRcdFx0XHRvYmplY3QudXBkYXRlTWF0cml4KCk7XG5cblx0XHRcdFx0XHRzdGFuZGluZ01hdHJpeC5mcm9tQXJyYXkoIHZyRGlzcGxheS5zdGFnZVBhcmFtZXRlcnMuc2l0dGluZ1RvU3RhbmRpbmdUcmFuc2Zvcm0gKTtcblx0XHRcdFx0XHRvYmplY3QuYXBwbHlNYXRyaXgoIHN0YW5kaW5nTWF0cml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdG9iamVjdC5wb3NpdGlvbi5zZXRZKCBvYmplY3QucG9zaXRpb24ueSArIHRoaXMudXNlckhlaWdodCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRvYmplY3QucG9zaXRpb24ubXVsdGlwbHlTY2FsYXIoIHNjb3BlLnNjYWxlICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlc2V0UG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICkge1xuXG5cdFx0XHR2ckRpc3BsYXkucmVzZXRQb3NlKCk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlc2V0U2Vuc29yID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuVlJDb250cm9sczogLnJlc2V0U2Vuc29yKCkgaXMgbm93IC5yZXNldFBvc2UoKS4nICk7XG5cdFx0dGhpcy5yZXNldFBvc2UoKTtcblxuXHR9O1xuXG5cdHRoaXMuemVyb1NlbnNvciA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSQ29udHJvbHM6IC56ZXJvU2Vuc29yKCkgaXMgbm93IC5yZXNldFBvc2UoKS4nICk7XG5cdFx0dGhpcy5yZXNldFBvc2UoKTtcblxuXHR9O1xuXG5cdHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZyRGlzcGxheSA9IG51bGw7XG5cblx0fTtcblxufTtcbiIsIi8qKlxuICogQGF1dGhvciBkbWFyY29zIC8gaHR0cHM6Ly9naXRodWIuY29tL2RtYXJjb3NcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cbiAqXG4gKiBXZWJWUiBTcGVjOiBodHRwOi8vbW96dnIuZ2l0aHViLmlvL3dlYnZyLXNwZWMvd2VidnIuaHRtbFxuICpcbiAqIEZpcmVmb3g6IGh0dHA6Ly9tb3p2ci5jb20vZG93bmxvYWRzL1xuICogQ2hyb21pdW06IGh0dHBzOi8vd2VidnIuaW5mby9nZXQtY2hyb21lXG4gKlxuICovXG5cblRIUkVFLlZSRWZmZWN0ID0gZnVuY3Rpb24gKCByZW5kZXJlciwgb25FcnJvciApIHtcblxuXHR2YXIgdnJEaXNwbGF5LCB2ckRpc3BsYXlzO1xuXHR2YXIgZXllVHJhbnNsYXRpb25MID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0dmFyIGV5ZVRyYW5zbGF0aW9uUiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdHZhciByZW5kZXJSZWN0TCwgcmVuZGVyUmVjdFI7XG5cblx0dmFyIGZyYW1lRGF0YSA9IG51bGw7XG5cblx0aWYgKCAnVlJGcmFtZURhdGEnIGluIHdpbmRvdyApIHtcblxuXHRcdGZyYW1lRGF0YSA9IG5ldyBWUkZyYW1lRGF0YSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnb3RWUkRpc3BsYXlzKCBkaXNwbGF5cyApIHtcblxuXHRcdHZyRGlzcGxheXMgPSBkaXNwbGF5cztcblxuXHRcdGlmICggZGlzcGxheXMubGVuZ3RoID4gMCApIHtcblxuXHRcdFx0dnJEaXNwbGF5ID0gZGlzcGxheXNbIDAgXTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGlmICggb25FcnJvciApIG9uRXJyb3IoICdITUQgbm90IGF2YWlsYWJsZScgKTtcblxuXHRcdH1cblxuXHR9XG5cblx0aWYgKCBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cyApIHtcblxuXHRcdG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCkudGhlbiggZ290VlJEaXNwbGF5cyApO1xuXG5cdH1cblxuXHQvL1xuXG5cdHRoaXMuaXNQcmVzZW50aW5nID0gZmFsc2U7XG5cdHRoaXMuc2NhbGUgPSAxO1xuXG5cdHZhciBzY29wZSA9IHRoaXM7XG5cblx0dmFyIHJlbmRlcmVyU2l6ZSA9IHJlbmRlcmVyLmdldFNpemUoKTtcblx0dmFyIHJlbmRlcmVyVXBkYXRlU3R5bGUgPSBmYWxzZTtcblx0dmFyIHJlbmRlcmVyUGl4ZWxSYXRpbyA9IHJlbmRlcmVyLmdldFBpeGVsUmF0aW8oKTtcblxuXHR0aGlzLmdldFZSRGlzcGxheSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiB2ckRpc3BsYXk7XG5cblx0fTtcblxuXHR0aGlzLnNldFZSRGlzcGxheSA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHR2ckRpc3BsYXkgPSB2YWx1ZTtcblxuXHR9O1xuXG5cdHRoaXMuZ2V0VlJEaXNwbGF5cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlZSRWZmZWN0OiBnZXRWUkRpc3BsYXlzKCkgaXMgYmVpbmcgZGVwcmVjYXRlZC4nICk7XG5cdFx0cmV0dXJuIHZyRGlzcGxheXM7XG5cblx0fTtcblxuICB0aGlzLmdldFNpemUgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gcmVuZGVyZXIuZ2V0U2l6ZSgpO1xuXHR9XG5cdHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uICggd2lkdGgsIGhlaWdodCwgdXBkYXRlU3R5bGUgKSB7XG5cblx0XHRyZW5kZXJlclNpemUgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcblx0XHRyZW5kZXJlclVwZGF0ZVN0eWxlID0gdXBkYXRlU3R5bGU7XG5cblx0XHRpZiAoIHNjb3BlLmlzUHJlc2VudGluZyApIHtcblxuXHRcdFx0dmFyIGV5ZVBhcmFtc0wgPSB2ckRpc3BsYXkuZ2V0RXllUGFyYW1ldGVycyggJ2xlZnQnICk7XG5cdFx0XHRyZW5kZXJlci5zZXRQaXhlbFJhdGlvKCAxICk7XG5cdFx0XHRyZW5kZXJlci5zZXRTaXplKCBleWVQYXJhbXNMLnJlbmRlcldpZHRoICogMiwgZXllUGFyYW1zTC5yZW5kZXJIZWlnaHQsIGZhbHNlICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZW5kZXJlci5zZXRQaXhlbFJhdGlvKCByZW5kZXJlclBpeGVsUmF0aW8gKTtcblx0XHRcdHJlbmRlcmVyLnNldFNpemUoIHdpZHRoLCBoZWlnaHQsIHVwZGF0ZVN0eWxlICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHQvLyBmdWxsc2NyZWVuXG5cblx0dmFyIGNhbnZhcyA9IHJlbmRlcmVyLmRvbUVsZW1lbnQ7XG5cdHZhciByZXF1ZXN0RnVsbHNjcmVlbjtcblx0dmFyIGV4aXRGdWxsc2NyZWVuO1xuXHR2YXIgZnVsbHNjcmVlbkVsZW1lbnQ7XG5cdHZhciBkZWZhdWx0TGVmdEJvdW5kcyA9IFsgMC4wLCAwLjAsIDAuNSwgMS4wIF07XG5cdHZhciBkZWZhdWx0UmlnaHRCb3VuZHMgPSBbIDAuNSwgMC4wLCAwLjUsIDEuMCBdO1xuXG5cdGZ1bmN0aW9uIG9uVlJEaXNwbGF5UHJlc2VudENoYW5nZSgpIHtcblxuXHRcdHZhciB3YXNQcmVzZW50aW5nID0gc2NvcGUuaXNQcmVzZW50aW5nO1xuXHRcdHNjb3BlLmlzUHJlc2VudGluZyA9IHZyRGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIHZyRGlzcGxheS5pc1ByZXNlbnRpbmc7XG5cblx0XHRpZiAoIHNjb3BlLmlzUHJlc2VudGluZyApIHtcblxuXHRcdFx0dmFyIGV5ZVBhcmFtc0wgPSB2ckRpc3BsYXkuZ2V0RXllUGFyYW1ldGVycyggJ2xlZnQnICk7XG5cdFx0XHR2YXIgZXllV2lkdGggPSBleWVQYXJhbXNMLnJlbmRlcldpZHRoO1xuXHRcdFx0dmFyIGV5ZUhlaWdodCA9IGV5ZVBhcmFtc0wucmVuZGVySGVpZ2h0O1xuXG5cdFx0XHRpZiAoICF3YXNQcmVzZW50aW5nICkge1xuXG5cdFx0XHRcdHJlbmRlcmVyUGl4ZWxSYXRpbyA9IHJlbmRlcmVyLmdldFBpeGVsUmF0aW8oKTtcblx0XHRcdFx0cmVuZGVyZXJTaXplID0gcmVuZGVyZXIuZ2V0U2l6ZSgpO1xuXG5cdFx0XHRcdHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oIDEgKTtcblx0XHRcdFx0cmVuZGVyZXIuc2V0U2l6ZSggZXllV2lkdGggKiAyLCBleWVIZWlnaHQsIGZhbHNlICk7XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIHdhc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oIHJlbmRlcmVyUGl4ZWxSYXRpbyApO1xuXHRcdFx0cmVuZGVyZXIuc2V0U2l6ZSggcmVuZGVyZXJTaXplLndpZHRoLCByZW5kZXJlclNpemUuaGVpZ2h0LCByZW5kZXJlclVwZGF0ZVN0eWxlICk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAndnJkaXNwbGF5cHJlc2VudGNoYW5nZScsIG9uVlJEaXNwbGF5UHJlc2VudENoYW5nZSwgZmFsc2UgKTtcblxuXHR0aGlzLnNldEZ1bGxTY3JlZW4gPSBmdW5jdGlvbiAoIGJvb2xlYW4gKSB7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRpZiAoIHZyRGlzcGxheSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHJlamVjdCggbmV3IEVycm9yKCAnTm8gVlIgaGFyZHdhcmUgZm91bmQuJyApICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNjb3BlLmlzUHJlc2VudGluZyA9PT0gYm9vbGVhbiApIHtcblxuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJvb2xlYW4gKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSggdnJEaXNwbGF5LnJlcXVlc3RQcmVzZW50KCBbIHsgc291cmNlOiBjYW52YXMgfSBdICkgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZXNvbHZlKCB2ckRpc3BsYXkuZXhpdFByZXNlbnQoKSApO1xuXG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0fTtcblxuXHR0aGlzLnJlcXVlc3RQcmVzZW50ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIHRoaXMuc2V0RnVsbFNjcmVlbiggdHJ1ZSApO1xuXG5cdH07XG5cblx0dGhpcy5leGl0UHJlc2VudCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiB0aGlzLnNldEZ1bGxTY3JlZW4oIGZhbHNlICk7XG5cblx0fTtcblxuXHR0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uICggZiApIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHJldHVybiB2ckRpc3BsYXkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBmICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggZiApO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uICggaCApIHtcblxuXHRcdGlmICggdnJEaXNwbGF5ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHZyRGlzcGxheS5jYW5jZWxBbmltYXRpb25GcmFtZSggaCApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKCBoICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnN1Ym1pdEZyYW1lID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0aWYgKCB2ckRpc3BsYXkgIT09IHVuZGVmaW5lZCAmJiBzY29wZS5pc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdHZyRGlzcGxheS5zdWJtaXRGcmFtZSgpO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0dGhpcy5hdXRvU3VibWl0RnJhbWUgPSB0cnVlO1xuXG5cdC8vIHJlbmRlclxuXG5cdHZhciBjYW1lcmFMID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCk7XG5cdGNhbWVyYUwubGF5ZXJzLmVuYWJsZSggMSApO1xuXG5cdHZhciBjYW1lcmFSID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCk7XG5cdGNhbWVyYVIubGF5ZXJzLmVuYWJsZSggMiApO1xuXG5cdHRoaXMucmVuZGVyID0gZnVuY3Rpb24gKCBzY2VuZSwgY2FtZXJhLCByZW5kZXJUYXJnZXQsIGZvcmNlQ2xlYXIgKSB7XG5cblx0XHRpZiAoIHZyRGlzcGxheSAmJiBzY29wZS5pc1ByZXNlbnRpbmcgKSB7XG5cblx0XHRcdHZhciBhdXRvVXBkYXRlID0gc2NlbmUuYXV0b1VwZGF0ZTtcblxuXHRcdFx0aWYgKCBhdXRvVXBkYXRlICkge1xuXG5cdFx0XHRcdHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cdFx0XHRcdHNjZW5lLmF1dG9VcGRhdGUgPSBmYWxzZTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZXllUGFyYW1zTCA9IHZyRGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKCAnbGVmdCcgKTtcblx0XHRcdHZhciBleWVQYXJhbXNSID0gdnJEaXNwbGF5LmdldEV5ZVBhcmFtZXRlcnMoICdyaWdodCcgKTtcblxuXHRcdFx0ZXllVHJhbnNsYXRpb25MLmZyb21BcnJheSggZXllUGFyYW1zTC5vZmZzZXQgKTtcblx0XHRcdGV5ZVRyYW5zbGF0aW9uUi5mcm9tQXJyYXkoIGV5ZVBhcmFtc1Iub2Zmc2V0ICk7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggc2NlbmUgKSApIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5WUkVmZmVjdC5yZW5kZXIoKSBubyBsb25nZXIgc3VwcG9ydHMgYXJyYXlzLiBVc2Ugb2JqZWN0LmxheWVycyBpbnN0ZWFkLicgKTtcblx0XHRcdFx0c2NlbmUgPSBzY2VuZVsgMCBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIFdoZW4gcmVuZGVyaW5nIHdlIGRvbid0IGNhcmUgd2hhdCB0aGUgcmVjb21tZW5kZWQgc2l6ZSBpcywgb25seSB3aGF0IHRoZSBhY3R1YWwgc2l6ZVxuXHRcdFx0Ly8gb2YgdGhlIGJhY2tidWZmZXIgaXMuXG5cdFx0XHR2YXIgc2l6ZSA9IHJlbmRlcmVyLmdldFNpemUoKTtcblx0XHRcdHZhciBsYXllcnMgPSB2ckRpc3BsYXkuZ2V0TGF5ZXJzKCk7XG5cdFx0XHR2YXIgbGVmdEJvdW5kcztcblx0XHRcdHZhciByaWdodEJvdW5kcztcblxuXHRcdFx0aWYgKCBsYXllcnMubGVuZ3RoICkge1xuXG5cdFx0XHRcdHZhciBsYXllciA9IGxheWVyc1sgMCBdO1xuXG5cdFx0XHRcdGxlZnRCb3VuZHMgPSBsYXllci5sZWZ0Qm91bmRzICE9PSBudWxsICYmIGxheWVyLmxlZnRCb3VuZHMubGVuZ3RoID09PSA0ID8gbGF5ZXIubGVmdEJvdW5kcyA6IGRlZmF1bHRMZWZ0Qm91bmRzO1xuXHRcdFx0XHRyaWdodEJvdW5kcyA9IGxheWVyLnJpZ2h0Qm91bmRzICE9PSBudWxsICYmIGxheWVyLnJpZ2h0Qm91bmRzLmxlbmd0aCA9PT0gNCA/IGxheWVyLnJpZ2h0Qm91bmRzIDogZGVmYXVsdFJpZ2h0Qm91bmRzO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGxlZnRCb3VuZHMgPSBkZWZhdWx0TGVmdEJvdW5kcztcblx0XHRcdFx0cmlnaHRCb3VuZHMgPSBkZWZhdWx0UmlnaHRCb3VuZHM7XG5cblx0XHRcdH1cblxuXHRcdFx0cmVuZGVyUmVjdEwgPSB7XG5cdFx0XHRcdHg6IE1hdGgucm91bmQoIHNpemUud2lkdGggKiBsZWZ0Qm91bmRzWyAwIF0gKSxcblx0XHRcdFx0eTogTWF0aC5yb3VuZCggc2l6ZS5oZWlnaHQgKiBsZWZ0Qm91bmRzWyAxIF0gKSxcblx0XHRcdFx0d2lkdGg6IE1hdGgucm91bmQoIHNpemUud2lkdGggKiBsZWZ0Qm91bmRzWyAyIF0gKSxcblx0XHRcdFx0aGVpZ2h0OiBNYXRoLnJvdW5kKHNpemUuaGVpZ2h0ICogbGVmdEJvdW5kc1sgMyBdIClcblx0XHRcdH07XG5cdFx0XHRyZW5kZXJSZWN0UiA9IHtcblx0XHRcdFx0eDogTWF0aC5yb3VuZCggc2l6ZS53aWR0aCAqIHJpZ2h0Qm91bmRzWyAwIF0gKSxcblx0XHRcdFx0eTogTWF0aC5yb3VuZCggc2l6ZS5oZWlnaHQgKiByaWdodEJvdW5kc1sgMSBdICksXG5cdFx0XHRcdHdpZHRoOiBNYXRoLnJvdW5kKCBzaXplLndpZHRoICogcmlnaHRCb3VuZHNbIDIgXSApLFxuXHRcdFx0XHRoZWlnaHQ6IE1hdGgucm91bmQoc2l6ZS5oZWlnaHQgKiByaWdodEJvdW5kc1sgMyBdIClcblx0XHRcdH07XG5cblx0XHRcdGlmICggcmVuZGVyVGFyZ2V0ICkge1xuXG5cdFx0XHRcdHJlbmRlcmVyLnNldFJlbmRlclRhcmdldCggcmVuZGVyVGFyZ2V0ICk7XG5cdFx0XHRcdHJlbmRlclRhcmdldC5zY2lzc29yVGVzdCA9IHRydWU7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0cmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KCBudWxsICk7XG5cdFx0XHRcdHJlbmRlcmVyLnNldFNjaXNzb3JUZXN0KCB0cnVlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCByZW5kZXJlci5hdXRvQ2xlYXIgfHwgZm9yY2VDbGVhciApIHJlbmRlcmVyLmNsZWFyKCk7XG5cblx0XHRcdGlmICggY2FtZXJhLnBhcmVudCA9PT0gbnVsbCApIGNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuXG5cdFx0XHRjYW1lcmEubWF0cml4V29ybGQuZGVjb21wb3NlKCBjYW1lcmFMLnBvc2l0aW9uLCBjYW1lcmFMLnF1YXRlcm5pb24sIGNhbWVyYUwuc2NhbGUgKTtcblx0XHRcdGNhbWVyYS5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoIGNhbWVyYVIucG9zaXRpb24sIGNhbWVyYVIucXVhdGVybmlvbiwgY2FtZXJhUi5zY2FsZSApO1xuXG5cdFx0XHR2YXIgc2NhbGUgPSB0aGlzLnNjYWxlO1xuXHRcdFx0Y2FtZXJhTC50cmFuc2xhdGVPbkF4aXMoIGV5ZVRyYW5zbGF0aW9uTCwgc2NhbGUgKTtcblx0XHRcdGNhbWVyYVIudHJhbnNsYXRlT25BeGlzKCBleWVUcmFuc2xhdGlvblIsIHNjYWxlICk7XG5cblx0XHRcdGlmICggdnJEaXNwbGF5LmdldEZyYW1lRGF0YSApIHtcblxuXHRcdFx0XHR2ckRpc3BsYXkuZGVwdGhOZWFyID0gY2FtZXJhLm5lYXI7XG5cdFx0XHRcdHZyRGlzcGxheS5kZXB0aEZhciA9IGNhbWVyYS5mYXI7XG5cblx0XHRcdFx0dnJEaXNwbGF5LmdldEZyYW1lRGF0YSggZnJhbWVEYXRhICk7XG5cblx0XHRcdFx0Y2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzID0gZnJhbWVEYXRhLmxlZnRQcm9qZWN0aW9uTWF0cml4O1xuXHRcdFx0XHRjYW1lcmFSLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMgPSBmcmFtZURhdGEucmlnaHRQcm9qZWN0aW9uTWF0cml4O1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGNhbWVyYUwucHJvamVjdGlvbk1hdHJpeCA9IGZvdlRvUHJvamVjdGlvbiggZXllUGFyYW1zTC5maWVsZE9mVmlldywgdHJ1ZSwgY2FtZXJhLm5lYXIsIGNhbWVyYS5mYXIgKTtcblx0XHRcdFx0Y2FtZXJhUi5wcm9qZWN0aW9uTWF0cml4ID0gZm92VG9Qcm9qZWN0aW9uKCBleWVQYXJhbXNSLmZpZWxkT2ZWaWV3LCB0cnVlLCBjYW1lcmEubmVhciwgY2FtZXJhLmZhciApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlbmRlciBsZWZ0IGV5ZVxuXHRcdFx0aWYgKCByZW5kZXJUYXJnZXQgKSB7XG5cblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnZpZXdwb3J0LnNldCggcmVuZGVyUmVjdEwueCwgcmVuZGVyUmVjdEwueSwgcmVuZGVyUmVjdEwud2lkdGgsIHJlbmRlclJlY3RMLmhlaWdodCApO1xuXHRcdFx0XHRyZW5kZXJUYXJnZXQuc2Npc3Nvci5zZXQoIHJlbmRlclJlY3RMLngsIHJlbmRlclJlY3RMLnksIHJlbmRlclJlY3RMLndpZHRoLCByZW5kZXJSZWN0TC5oZWlnaHQgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZW5kZXJlci5zZXRWaWV3cG9ydCggcmVuZGVyUmVjdEwueCwgcmVuZGVyUmVjdEwueSwgcmVuZGVyUmVjdEwud2lkdGgsIHJlbmRlclJlY3RMLmhlaWdodCApO1xuXHRcdFx0XHRyZW5kZXJlci5zZXRTY2lzc29yKCByZW5kZXJSZWN0TC54LCByZW5kZXJSZWN0TC55LCByZW5kZXJSZWN0TC53aWR0aCwgcmVuZGVyUmVjdEwuaGVpZ2h0ICk7XG5cblx0XHRcdH1cblx0XHRcdHJlbmRlcmVyLnJlbmRlciggc2NlbmUsIGNhbWVyYUwsIHJlbmRlclRhcmdldCwgZm9yY2VDbGVhciApO1xuXG5cdFx0XHQvLyByZW5kZXIgcmlnaHQgZXllXG5cdFx0XHRpZiAoIHJlbmRlclRhcmdldCApIHtcblxuXHRcdFx0XHRyZW5kZXJUYXJnZXQudmlld3BvcnQuc2V0KCByZW5kZXJSZWN0Ui54LCByZW5kZXJSZWN0Ui55LCByZW5kZXJSZWN0Ui53aWR0aCwgcmVuZGVyUmVjdFIuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlclRhcmdldC5zY2lzc29yLnNldCggcmVuZGVyUmVjdFIueCwgcmVuZGVyUmVjdFIueSwgcmVuZGVyUmVjdFIud2lkdGgsIHJlbmRlclJlY3RSLmhlaWdodCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJlbmRlcmVyLnNldFZpZXdwb3J0KCByZW5kZXJSZWN0Ui54LCByZW5kZXJSZWN0Ui55LCByZW5kZXJSZWN0Ui53aWR0aCwgcmVuZGVyUmVjdFIuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlcmVyLnNldFNjaXNzb3IoIHJlbmRlclJlY3RSLngsIHJlbmRlclJlY3RSLnksIHJlbmRlclJlY3RSLndpZHRoLCByZW5kZXJSZWN0Ui5oZWlnaHQgKTtcblxuXHRcdFx0fVxuXHRcdFx0cmVuZGVyZXIucmVuZGVyKCBzY2VuZSwgY2FtZXJhUiwgcmVuZGVyVGFyZ2V0LCBmb3JjZUNsZWFyICk7XG5cblx0XHRcdGlmICggcmVuZGVyVGFyZ2V0ICkge1xuXG5cdFx0XHRcdHJlbmRlclRhcmdldC52aWV3cG9ydC5zZXQoIDAsIDAsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0ICk7XG5cdFx0XHRcdHJlbmRlclRhcmdldC5zY2lzc29yLnNldCggMCwgMCwgc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQgKTtcblx0XHRcdFx0cmVuZGVyVGFyZ2V0LnNjaXNzb3JUZXN0ID0gZmFsc2U7XG5cdFx0XHRcdHJlbmRlcmVyLnNldFJlbmRlclRhcmdldCggbnVsbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHJlbmRlcmVyLnNldFZpZXdwb3J0KCAwLCAwLCBzaXplLndpZHRoLCBzaXplLmhlaWdodCApO1xuXHRcdFx0XHRyZW5kZXJlci5zZXRTY2lzc29yVGVzdCggZmFsc2UgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGF1dG9VcGRhdGUgKSB7XG5cblx0XHRcdFx0c2NlbmUuYXV0b1VwZGF0ZSA9IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBzY29wZS5hdXRvU3VibWl0RnJhbWUgKSB7XG5cblx0XHRcdFx0c2NvcGUuc3VibWl0RnJhbWUoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHQvLyBSZWd1bGFyIHJlbmRlciBtb2RlIGlmIG5vdCBITURcblxuXHRcdHJlbmRlcmVyLnJlbmRlciggc2NlbmUsIGNhbWVyYSwgcmVuZGVyVGFyZ2V0LCBmb3JjZUNsZWFyICk7XG5cblx0fTtcblxuXHR0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnLCBvblZSRGlzcGxheVByZXNlbnRDaGFuZ2UsIGZhbHNlICk7XG5cblx0fTtcblxuXHQvL1xuXG5cdGZ1bmN0aW9uIGZvdlRvTkRDU2NhbGVPZmZzZXQoIGZvdiApIHtcblxuXHRcdHZhciBweHNjYWxlID0gMi4wIC8gKCBmb3YubGVmdFRhbiArIGZvdi5yaWdodFRhbiApO1xuXHRcdHZhciBweG9mZnNldCA9ICggZm92LmxlZnRUYW4gLSBmb3YucmlnaHRUYW4gKSAqIHB4c2NhbGUgKiAwLjU7XG5cdFx0dmFyIHB5c2NhbGUgPSAyLjAgLyAoIGZvdi51cFRhbiArIGZvdi5kb3duVGFuICk7XG5cdFx0dmFyIHB5b2Zmc2V0ID0gKCBmb3YudXBUYW4gLSBmb3YuZG93blRhbiApICogcHlzY2FsZSAqIDAuNTtcblx0XHRyZXR1cm4geyBzY2FsZTogWyBweHNjYWxlLCBweXNjYWxlIF0sIG9mZnNldDogWyBweG9mZnNldCwgcHlvZmZzZXQgXSB9O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBmb3ZQb3J0VG9Qcm9qZWN0aW9uKCBmb3YsIHJpZ2h0SGFuZGVkLCB6TmVhciwgekZhciApIHtcblxuXHRcdHJpZ2h0SGFuZGVkID0gcmlnaHRIYW5kZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiByaWdodEhhbmRlZDtcblx0XHR6TmVhciA9IHpOZWFyID09PSB1bmRlZmluZWQgPyAwLjAxIDogek5lYXI7XG5cdFx0ekZhciA9IHpGYXIgPT09IHVuZGVmaW5lZCA/IDEwMDAwLjAgOiB6RmFyO1xuXG5cdFx0dmFyIGhhbmRlZG5lc3NTY2FsZSA9IHJpZ2h0SGFuZGVkID8gLSAxLjAgOiAxLjA7XG5cblx0XHQvLyBzdGFydCB3aXRoIGFuIGlkZW50aXR5IG1hdHJpeFxuXHRcdHZhciBtb2JqID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcblx0XHR2YXIgbSA9IG1vYmouZWxlbWVudHM7XG5cblx0XHQvLyBhbmQgd2l0aCBzY2FsZS9vZmZzZXQgaW5mbyBmb3Igbm9ybWFsaXplZCBkZXZpY2UgY29vcmRzXG5cdFx0dmFyIHNjYWxlQW5kT2Zmc2V0ID0gZm92VG9ORENTY2FsZU9mZnNldCggZm92ICk7XG5cblx0XHQvLyBYIHJlc3VsdCwgbWFwIGNsaXAgZWRnZXMgdG8gWy13LCt3XVxuXHRcdG1bIDAgKiA0ICsgMCBdID0gc2NhbGVBbmRPZmZzZXQuc2NhbGVbIDAgXTtcblx0XHRtWyAwICogNCArIDEgXSA9IDAuMDtcblx0XHRtWyAwICogNCArIDIgXSA9IHNjYWxlQW5kT2Zmc2V0Lm9mZnNldFsgMCBdICogaGFuZGVkbmVzc1NjYWxlO1xuXHRcdG1bIDAgKiA0ICsgMyBdID0gMC4wO1xuXG5cdFx0Ly8gWSByZXN1bHQsIG1hcCBjbGlwIGVkZ2VzIHRvIFstdywrd11cblx0XHQvLyBZIG9mZnNldCBpcyBuZWdhdGVkIGJlY2F1c2UgdGhpcyBwcm9qIG1hdHJpeCB0cmFuc2Zvcm1zIGZyb20gd29ybGQgY29vcmRzIHdpdGggWT11cCxcblx0XHQvLyBidXQgdGhlIE5EQyBzY2FsaW5nIGhhcyBZPWRvd24gKHRoYW5rcyBEM0Q/KVxuXHRcdG1bIDEgKiA0ICsgMCBdID0gMC4wO1xuXHRcdG1bIDEgKiA0ICsgMSBdID0gc2NhbGVBbmRPZmZzZXQuc2NhbGVbIDEgXTtcblx0XHRtWyAxICogNCArIDIgXSA9IC0gc2NhbGVBbmRPZmZzZXQub2Zmc2V0WyAxIF0gKiBoYW5kZWRuZXNzU2NhbGU7XG5cdFx0bVsgMSAqIDQgKyAzIF0gPSAwLjA7XG5cblx0XHQvLyBaIHJlc3VsdCAodXAgdG8gdGhlIGFwcClcblx0XHRtWyAyICogNCArIDAgXSA9IDAuMDtcblx0XHRtWyAyICogNCArIDEgXSA9IDAuMDtcblx0XHRtWyAyICogNCArIDIgXSA9IHpGYXIgLyAoIHpOZWFyIC0gekZhciApICogLSBoYW5kZWRuZXNzU2NhbGU7XG5cdFx0bVsgMiAqIDQgKyAzIF0gPSAoIHpGYXIgKiB6TmVhciApIC8gKCB6TmVhciAtIHpGYXIgKTtcblxuXHRcdC8vIFcgcmVzdWx0ICg9IFogaW4pXG5cdFx0bVsgMyAqIDQgKyAwIF0gPSAwLjA7XG5cdFx0bVsgMyAqIDQgKyAxIF0gPSAwLjA7XG5cdFx0bVsgMyAqIDQgKyAyIF0gPSBoYW5kZWRuZXNzU2NhbGU7XG5cdFx0bVsgMyAqIDQgKyAzIF0gPSAwLjA7XG5cblx0XHRtb2JqLnRyYW5zcG9zZSgpO1xuXG5cdFx0cmV0dXJuIG1vYmo7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGZvdlRvUHJvamVjdGlvbiggZm92LCByaWdodEhhbmRlZCwgek5lYXIsIHpGYXIgKSB7XG5cblx0XHR2YXIgREVHMlJBRCA9IE1hdGguUEkgLyAxODAuMDtcblxuXHRcdHZhciBmb3ZQb3J0ID0ge1xuXHRcdFx0dXBUYW46IE1hdGgudGFuKCBmb3YudXBEZWdyZWVzICogREVHMlJBRCApLFxuXHRcdFx0ZG93blRhbjogTWF0aC50YW4oIGZvdi5kb3duRGVncmVlcyAqIERFRzJSQUQgKSxcblx0XHRcdGxlZnRUYW46IE1hdGgudGFuKCBmb3YubGVmdERlZ3JlZXMgKiBERUcyUkFEICksXG5cdFx0XHRyaWdodFRhbjogTWF0aC50YW4oIGZvdi5yaWdodERlZ3JlZXMgKiBERUcyUkFEIClcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGZvdlBvcnRUb1Byb2plY3Rpb24oIGZvdlBvcnQsIHJpZ2h0SGFuZGVkLCB6TmVhciwgekZhciApO1xuXG5cdH1cblxufTtcbiIsIi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqL1xuXG5USFJFRS5PQkpMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG5cblx0dGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG5cblx0dGhpcy5tYXRlcmlhbHMgPSBudWxsO1xuXG5cdHRoaXMucmVnZXhwID0ge1xuXHRcdC8vIHYgZmxvYXQgZmxvYXQgZmxvYXRcblx0XHR2ZXJ0ZXhfcGF0dGVybiAgICAgICAgICAgOiAvXnZcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKykvLFxuXHRcdC8vIHZuIGZsb2F0IGZsb2F0IGZsb2F0XG5cdFx0bm9ybWFsX3BhdHRlcm4gICAgICAgICAgIDogL152blxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG5cdFx0Ly8gdnQgZmxvYXQgZmxvYXRcblx0XHR1dl9wYXR0ZXJuICAgICAgICAgICAgICAgOiAvXnZ0XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKykvLFxuXHRcdC8vIGYgdmVydGV4IHZlcnRleCB2ZXJ0ZXhcblx0XHRmYWNlX3ZlcnRleCAgICAgICAgICAgICAgOiAvXmZcXHMrKC0/XFxkKylcXHMrKC0/XFxkKylcXHMrKC0/XFxkKykoPzpcXHMrKC0/XFxkKykpPy8sXG5cdFx0Ly8gZiB2ZXJ0ZXgvdXYgdmVydGV4L3V2IHZlcnRleC91dlxuXHRcdGZhY2VfdmVydGV4X3V2ICAgICAgICAgICA6IC9eZlxccysoLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuXHRcdC8vIGYgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWxcblx0XHRmYWNlX3ZlcnRleF91dl9ub3JtYWwgICAgOiAvXmZcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuXHRcdC8vIGYgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWxcblx0XHRmYWNlX3ZlcnRleF9ub3JtYWwgICAgICAgOiAvXmZcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKSk/Lyxcblx0XHQvLyBvIG9iamVjdF9uYW1lIHwgZyBncm91cF9uYW1lXG5cdFx0b2JqZWN0X3BhdHRlcm4gICAgICAgICAgIDogL15bb2ddXFxzKiguKyk/Lyxcblx0XHQvLyBzIGJvb2xlYW5cblx0XHRzbW9vdGhpbmdfcGF0dGVybiAgICAgICAgOiAvXnNcXHMrKFxcZCt8b258b2ZmKS8sXG5cdFx0Ly8gbXRsbGliIGZpbGVfcmVmZXJlbmNlXG5cdFx0bWF0ZXJpYWxfbGlicmFyeV9wYXR0ZXJuIDogL15tdGxsaWIgLyxcblx0XHQvLyB1c2VtdGwgbWF0ZXJpYWxfbmFtZVxuXHRcdG1hdGVyaWFsX3VzZV9wYXR0ZXJuICAgICA6IC9edXNlbXRsIC9cblx0fTtcblxufTtcblxuVEhSRUUuT0JKTG9hZGVyLnByb3RvdHlwZSA9IHtcblxuXHRjb25zdHJ1Y3RvcjogVEhSRUUuT0JKTG9hZGVyLFxuXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBUSFJFRS5YSFJMb2FkZXIoIHNjb3BlLm1hbmFnZXIgKTtcblx0XHRsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG5cdFx0bG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG5cdFx0XHRvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0ICkgKTtcblxuXHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHR9LFxuXG5cdHNldFBhdGg6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHR0aGlzLnBhdGggPSB2YWx1ZTtcblxuXHR9LFxuXG5cdHNldE1hdGVyaWFsczogZnVuY3Rpb24gKCBtYXRlcmlhbHMgKSB7XG5cblx0XHR0aGlzLm1hdGVyaWFscyA9IG1hdGVyaWFscztcblxuXHR9LFxuXG5cdF9jcmVhdGVQYXJzZXJTdGF0ZSA6IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBzdGF0ZSA9IHtcblx0XHRcdG9iamVjdHMgIDogW10sXG5cdFx0XHRvYmplY3QgICA6IHt9LFxuXG5cdFx0XHR2ZXJ0aWNlcyA6IFtdLFxuXHRcdFx0bm9ybWFscyAgOiBbXSxcblx0XHRcdHV2cyAgICAgIDogW10sXG5cblx0XHRcdG1hdGVyaWFsTGlicmFyaWVzIDogW10sXG5cblx0XHRcdHN0YXJ0T2JqZWN0OiBmdW5jdGlvbiAoIG5hbWUsIGZyb21EZWNsYXJhdGlvbiApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGUgY3VycmVudCBvYmplY3QgKGluaXRpYWwgZnJvbSByZXNldCkgaXMgbm90IGZyb20gYSBnL28gZGVjbGFyYXRpb24gaW4gdGhlIHBhcnNlZFxuXHRcdFx0XHQvLyBmaWxlLiBXZSBuZWVkIHRvIHVzZSBpdCBmb3IgdGhlIGZpcnN0IHBhcnNlZCBnL28gdG8ga2VlcCB0aGluZ3MgaW4gc3luYy5cblx0XHRcdFx0aWYgKCB0aGlzLm9iamVjdCAmJiB0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0dGhpcy5vYmplY3QubmFtZSA9IG5hbWU7XG5cdFx0XHRcdFx0dGhpcy5vYmplY3QuZnJvbURlY2xhcmF0aW9uID0gKCBmcm9tRGVjbGFyYXRpb24gIT09IGZhbHNlICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgcHJldmlvdXNNYXRlcmlhbCA9ICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0LmN1cnJlbnRNYXRlcmlhbCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMub2JqZWN0LmN1cnJlbnRNYXRlcmlhbCgpIDogdW5kZWZpbmVkICk7XG5cblx0XHRcdFx0aWYgKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nICkge1xuXG5cdFx0XHRcdFx0dGhpcy5vYmplY3QuX2ZpbmFsaXplKCB0cnVlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub2JqZWN0ID0ge1xuXHRcdFx0XHRcdG5hbWUgOiBuYW1lIHx8ICcnLFxuXHRcdFx0XHRcdGZyb21EZWNsYXJhdGlvbiA6ICggZnJvbURlY2xhcmF0aW9uICE9PSBmYWxzZSApLFxuXG5cdFx0XHRcdFx0Z2VvbWV0cnkgOiB7XG5cdFx0XHRcdFx0XHR2ZXJ0aWNlcyA6IFtdLFxuXHRcdFx0XHRcdFx0bm9ybWFscyAgOiBbXSxcblx0XHRcdFx0XHRcdHV2cyAgICAgIDogW11cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1hdGVyaWFscyA6IFtdLFxuXHRcdFx0XHRcdHNtb290aCA6IHRydWUsXG5cblx0XHRcdFx0XHRzdGFydE1hdGVyaWFsIDogZnVuY3Rpb24oIG5hbWUsIGxpYnJhcmllcyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHByZXZpb3VzID0gdGhpcy5fZmluYWxpemUoIGZhbHNlICk7XG5cblx0XHRcdFx0XHRcdC8vIE5ldyB1c2VtdGwgZGVjbGFyYXRpb24gb3ZlcndyaXRlcyBhbiBpbmhlcml0ZWQgbWF0ZXJpYWwsIGV4Y2VwdCBpZiBmYWNlcyB3ZXJlIGRlY2xhcmVkXG5cdFx0XHRcdFx0XHQvLyBhZnRlciB0aGUgbWF0ZXJpYWwsIHRoZW4gaXQgbXVzdCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cblx0XHRcdFx0XHRcdGlmICggcHJldmlvdXMgJiYgKCBwcmV2aW91cy5pbmhlcml0ZWQgfHwgcHJldmlvdXMuZ3JvdXBDb3VudCA8PSAwICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5tYXRlcmlhbHMuc3BsaWNlKCBwcmV2aW91cy5pbmRleCwgMSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBtYXRlcmlhbCA9IHtcblx0XHRcdFx0XHRcdFx0aW5kZXggICAgICA6IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0bmFtZSAgICAgICA6IG5hbWUgfHwgJycsXG5cdFx0XHRcdFx0XHRcdG10bGxpYiAgICAgOiAoIEFycmF5LmlzQXJyYXkoIGxpYnJhcmllcyApICYmIGxpYnJhcmllcy5sZW5ndGggPiAwID8gbGlicmFyaWVzWyBsaWJyYXJpZXMubGVuZ3RoIC0gMSBdIDogJycgKSxcblx0XHRcdFx0XHRcdFx0c21vb3RoICAgICA6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLnNtb290aCA6IHRoaXMuc21vb3RoICksXG5cdFx0XHRcdFx0XHRcdGdyb3VwU3RhcnQgOiAoIHByZXZpb3VzICE9PSB1bmRlZmluZWQgPyBwcmV2aW91cy5ncm91cEVuZCA6IDAgKSxcblx0XHRcdFx0XHRcdFx0Z3JvdXBFbmQgICA6IC0xLFxuXHRcdFx0XHRcdFx0XHRncm91cENvdW50IDogLTEsXG5cdFx0XHRcdFx0XHRcdGluaGVyaXRlZCAgOiBmYWxzZSxcblxuXHRcdFx0XHRcdFx0XHRjbG9uZSA6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgY2xvbmVkID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW5kZXggICAgICA6ICggdHlwZW9mIGluZGV4ID09PSAnbnVtYmVyJyA/IGluZGV4IDogdGhpcy5pbmRleCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZSAgICAgICA6IHRoaXMubmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdG10bGxpYiAgICAgOiB0aGlzLm10bGxpYixcblx0XHRcdFx0XHRcdFx0XHRcdHNtb290aCAgICAgOiB0aGlzLnNtb290aCxcblx0XHRcdFx0XHRcdFx0XHRcdGdyb3VwU3RhcnQgOiAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXBFbmQgICA6IC0xLFxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXBDb3VudCA6IC0xLFxuXHRcdFx0XHRcdFx0XHRcdFx0aW5oZXJpdGVkICA6IGZhbHNlXG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZWQuY2xvbmUgPSB0aGlzLmNsb25lLmJpbmQoY2xvbmVkKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gY2xvbmVkO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5wdXNoKCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gbWF0ZXJpYWw7XG5cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Y3VycmVudE1hdGVyaWFsIDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdGlmICggdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMubWF0ZXJpYWxzWyB0aGlzLm1hdGVyaWFscy5sZW5ndGggLSAxIF07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0X2ZpbmFsaXplIDogZnVuY3Rpb24oIGVuZCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIGxhc3RNdWx0aU1hdGVyaWFsID0gdGhpcy5jdXJyZW50TWF0ZXJpYWwoKTtcblx0XHRcdFx0XHRcdGlmICggbGFzdE11bHRpTWF0ZXJpYWwgJiYgbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgPT09IC0xICkge1xuXG5cdFx0XHRcdFx0XHRcdGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kID0gdGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggLyAzO1xuXHRcdFx0XHRcdFx0XHRsYXN0TXVsdGlNYXRlcmlhbC5ncm91cENvdW50ID0gbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgLSBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cFN0YXJ0O1xuXHRcdFx0XHRcdFx0XHRsYXN0TXVsdGlNYXRlcmlhbC5pbmhlcml0ZWQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJZ25vcmUgb2JqZWN0cyB0YWlsIG1hdGVyaWFscyBpZiBubyBmYWNlIGRlY2xhcmF0aW9ucyBmb2xsb3dlZCB0aGVtIGJlZm9yZSBhIG5ldyBvL2cgc3RhcnRlZC5cblx0XHRcdFx0XHRcdGlmICggZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIG1pID0gdGhpcy5tYXRlcmlhbHMubGVuZ3RoIC0gMTsgbWkgPj0gMDsgbWktLSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHRoaXMubWF0ZXJpYWxzW21pXS5ncm91cENvdW50IDw9IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLm1hdGVyaWFscy5zcGxpY2UoIG1pLCAxICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gR3VhcmFudGVlIGF0IGxlYXN0IG9uZSBlbXB0eSBtYXRlcmlhbCwgdGhpcyBtYWtlcyB0aGUgY3JlYXRpb24gbGF0ZXIgbW9yZSBzdHJhaWdodCBmb3J3YXJkLlxuXHRcdFx0XHRcdFx0aWYgKCBlbmQgJiYgdGhpcy5tYXRlcmlhbHMubGVuZ3RoID09PSAwICkge1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMubWF0ZXJpYWxzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgICA6ICcnLFxuXHRcdFx0XHRcdFx0XHRcdHNtb290aCA6IHRoaXMuc21vb3RoXG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBsYXN0TXVsdGlNYXRlcmlhbDtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBJbmhlcml0IHByZXZpb3VzIG9iamVjdHMgbWF0ZXJpYWwuXG5cdFx0XHRcdC8vIFNwZWMgdGVsbHMgdXMgdGhhdCBhIGRlY2xhcmVkIG1hdGVyaWFsIG11c3QgYmUgc2V0IHRvIGFsbCBvYmplY3RzIHVudGlsIGEgbmV3IG1hdGVyaWFsIGlzIGRlY2xhcmVkLlxuXHRcdFx0XHQvLyBJZiBhIHVzZW10bCBkZWNsYXJhdGlvbiBpcyBlbmNvdW50ZXJlZCB3aGlsZSB0aGlzIG5ldyBvYmplY3QgaXMgYmVpbmcgcGFyc2VkLCBpdCB3aWxsXG5cdFx0XHRcdC8vIG92ZXJ3cml0ZSB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLiBFeGNlcHRpb24gYmVpbmcgdGhhdCB0aGVyZSB3YXMgYWxyZWFkeSBmYWNlIGRlY2xhcmF0aW9uc1xuXHRcdFx0XHQvLyB0byB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLCB0aGVuIGl0IHdpbGwgYmUgcHJlc2VydmVkIGZvciBwcm9wZXIgTXVsdGlNYXRlcmlhbCBjb250aW51YXRpb24uXG5cblx0XHRcdFx0aWYgKCBwcmV2aW91c01hdGVyaWFsICYmIHByZXZpb3VzTWF0ZXJpYWwubmFtZSAmJiB0eXBlb2YgcHJldmlvdXNNYXRlcmlhbC5jbG9uZSA9PT0gXCJmdW5jdGlvblwiICkge1xuXG5cdFx0XHRcdFx0dmFyIGRlY2xhcmVkID0gcHJldmlvdXNNYXRlcmlhbC5jbG9uZSggMCApO1xuXHRcdFx0XHRcdGRlY2xhcmVkLmluaGVyaXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5vYmplY3QubWF0ZXJpYWxzLnB1c2goIGRlY2xhcmVkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub2JqZWN0cy5wdXNoKCB0aGlzLm9iamVjdCApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRmaW5hbGl6ZSA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGlmICggdGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJyApIHtcblxuXHRcdFx0XHRcdHRoaXMub2JqZWN0Ll9maW5hbGl6ZSggdHJ1ZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VWZXJ0ZXhJbmRleDogZnVuY3Rpb24gKCB2YWx1ZSwgbGVuICkge1xuXG5cdFx0XHRcdHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcblx0XHRcdFx0cmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMyApICogMztcblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VOb3JtYWxJbmRleDogZnVuY3Rpb24gKCB2YWx1ZSwgbGVuICkge1xuXG5cdFx0XHRcdHZhciBpbmRleCA9IHBhcnNlSW50KCB2YWx1ZSwgMTAgKTtcblx0XHRcdFx0cmV0dXJuICggaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMyApICogMztcblxuXHRcdFx0fSxcblxuXHRcdFx0cGFyc2VVVkluZGV4OiBmdW5jdGlvbiAoIHZhbHVlLCBsZW4gKSB7XG5cblx0XHRcdFx0dmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuXHRcdFx0XHRyZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAyICkgKiAyO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRWZXJ0ZXg6IGZ1bmN0aW9uICggYSwgYiwgYyApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMiBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMiBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZFZlcnRleExpbmU6IGZ1bmN0aW9uICggYSApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuXG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMiBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZE5vcm1hbCA6IGZ1bmN0aW9uICggYSwgYiwgYyApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy5ub3JtYWxzO1xuXHRcdFx0XHR2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkubm9ybWFscztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDIgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGIgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDIgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBjICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDIgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRVVjogZnVuY3Rpb24gKCBhLCBiLCBjICkge1xuXG5cdFx0XHRcdHZhciBzcmMgPSB0aGlzLnV2cztcblx0XHRcdFx0dmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcblxuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYiArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBiICsgMSBdICk7XG5cdFx0XHRcdGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0gKTtcblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYyArIDEgXSApO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRVVkxpbmU6IGZ1bmN0aW9uICggYSApIHtcblxuXHRcdFx0XHR2YXIgc3JjID0gdGhpcy51dnM7XG5cdFx0XHRcdHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS51dnM7XG5cblx0XHRcdFx0ZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuXHRcdFx0XHRkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG5cblx0XHRcdH0sXG5cblx0XHRcdGFkZEZhY2U6IGZ1bmN0aW9uICggYSwgYiwgYywgZCwgdWEsIHViLCB1YywgdWQsIG5hLCBuYiwgbmMsIG5kICkge1xuXG5cdFx0XHRcdHZhciB2TGVuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG5cblx0XHRcdFx0dmFyIGlhID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCBhLCB2TGVuICk7XG5cdFx0XHRcdHZhciBpYiA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggYiwgdkxlbiApO1xuXHRcdFx0XHR2YXIgaWMgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGMsIHZMZW4gKTtcblx0XHRcdFx0dmFyIGlkO1xuXG5cdFx0XHRcdGlmICggZCA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0dGhpcy5hZGRWZXJ0ZXgoIGlhLCBpYiwgaWMgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0aWQgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGQsIHZMZW4gKTtcblxuXHRcdFx0XHRcdHRoaXMuYWRkVmVydGV4KCBpYSwgaWIsIGlkICk7XG5cdFx0XHRcdFx0dGhpcy5hZGRWZXJ0ZXgoIGliLCBpYywgaWQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCB1YSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0dmFyIHV2TGVuID0gdGhpcy51dnMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0aWEgPSB0aGlzLnBhcnNlVVZJbmRleCggdWEsIHV2TGVuICk7XG5cdFx0XHRcdFx0aWIgPSB0aGlzLnBhcnNlVVZJbmRleCggdWIsIHV2TGVuICk7XG5cdFx0XHRcdFx0aWMgPSB0aGlzLnBhcnNlVVZJbmRleCggdWMsIHV2TGVuICk7XG5cblx0XHRcdFx0XHRpZiAoIGQgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0dGhpcy5hZGRVViggaWEsIGliLCBpYyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0aWQgPSB0aGlzLnBhcnNlVVZJbmRleCggdWQsIHV2TGVuICk7XG5cblx0XHRcdFx0XHRcdHRoaXMuYWRkVVYoIGlhLCBpYiwgaWQgKTtcblx0XHRcdFx0XHRcdHRoaXMuYWRkVVYoIGliLCBpYywgaWQgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBuYSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0Ly8gTm9ybWFscyBhcmUgbWFueSB0aW1lcyB0aGUgc2FtZS4gSWYgc28sIHNraXAgZnVuY3Rpb24gY2FsbCBhbmQgcGFyc2VJbnQuXG5cdFx0XHRcdFx0dmFyIG5MZW4gPSB0aGlzLm5vcm1hbHMubGVuZ3RoO1xuXHRcdFx0XHRcdGlhID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuYSwgbkxlbiApO1xuXG5cdFx0XHRcdFx0aWIgPSBuYSA9PT0gbmIgPyBpYSA6IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmIsIG5MZW4gKTtcblx0XHRcdFx0XHRpYyA9IG5hID09PSBuYyA/IGlhIDogdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuYywgbkxlbiApO1xuXG5cdFx0XHRcdFx0aWYgKCBkID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHRoaXMuYWRkTm9ybWFsKCBpYSwgaWIsIGljICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRpZCA9IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmQsIG5MZW4gKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5hZGROb3JtYWwoIGlhLCBpYiwgaWQgKTtcblx0XHRcdFx0XHRcdHRoaXMuYWRkTm9ybWFsKCBpYiwgaWMsIGlkICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LFxuXG5cdFx0XHRhZGRMaW5lR2VvbWV0cnk6IGZ1bmN0aW9uICggdmVydGljZXMsIHV2cyApIHtcblxuXHRcdFx0XHR0aGlzLm9iamVjdC5nZW9tZXRyeS50eXBlID0gJ0xpbmUnO1xuXG5cdFx0XHRcdHZhciB2TGVuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG5cdFx0XHRcdHZhciB1dkxlbiA9IHRoaXMudXZzLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCB2YXIgdmkgPSAwLCBsID0gdmVydGljZXMubGVuZ3RoOyB2aSA8IGw7IHZpICsrICkge1xuXG5cdFx0XHRcdFx0dGhpcy5hZGRWZXJ0ZXhMaW5lKCB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIHZlcnRpY2VzWyB2aSBdLCB2TGVuICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICggdmFyIHV2aSA9IDAsIGwgPSB1dnMubGVuZ3RoOyB1dmkgPCBsOyB1dmkgKysgKSB7XG5cblx0XHRcdFx0XHR0aGlzLmFkZFVWTGluZSggdGhpcy5wYXJzZVVWSW5kZXgoIHV2c1sgdXZpIF0sIHV2TGVuICkgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHRzdGF0ZS5zdGFydE9iamVjdCggJycsIGZhbHNlICk7XG5cblx0XHRyZXR1cm4gc3RhdGU7XG5cblx0fSxcblxuXHRwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG5cdFx0Y29uc29sZS50aW1lKCAnT0JKTG9hZGVyJyApO1xuXG5cdFx0dmFyIHN0YXRlID0gdGhpcy5fY3JlYXRlUGFyc2VyU3RhdGUoKTtcblxuXHRcdGlmICggdGV4dC5pbmRleE9mKCAnXFxyXFxuJyApICE9PSAtIDEgKSB7XG5cblx0XHRcdC8vIFRoaXMgaXMgZmFzdGVyIHRoYW4gU3RyaW5nLnNwbGl0IHdpdGggcmVnZXggdGhhdCBzcGxpdHMgb24gYm90aFxuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggL1xcclxcbi9nLCAnXFxuJyApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0ZXh0LmluZGV4T2YoICdcXFxcXFxuJyApICE9PSAtIDEpIHtcblxuXHRcdFx0Ly8gam9pbiBsaW5lcyBzZXBhcmF0ZWQgYnkgYSBsaW5lIGNvbnRpbnVhdGlvbiBjaGFyYWN0ZXIgKFxcKVxuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggL1xcXFxcXG4vZywgJycgKTtcblxuXHRcdH1cblxuXHRcdHZhciBsaW5lcyA9IHRleHQuc3BsaXQoICdcXG4nICk7XG5cdFx0dmFyIGxpbmUgPSAnJywgbGluZUZpcnN0Q2hhciA9ICcnLCBsaW5lU2Vjb25kQ2hhciA9ICcnO1xuXHRcdHZhciBsaW5lTGVuZ3RoID0gMDtcblx0XHR2YXIgcmVzdWx0ID0gW107XG5cblx0XHQvLyBGYXN0ZXIgdG8ganVzdCB0cmltIGxlZnQgc2lkZSBvZiB0aGUgbGluZS4gVXNlIGlmIGF2YWlsYWJsZS5cblx0XHR2YXIgdHJpbUxlZnQgPSAoIHR5cGVvZiAnJy50cmltTGVmdCA9PT0gJ2Z1bmN0aW9uJyApO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuXHRcdFx0bGluZSA9IGxpbmVzWyBpIF07XG5cblx0XHRcdGxpbmUgPSB0cmltTGVmdCA/IGxpbmUudHJpbUxlZnQoKSA6IGxpbmUudHJpbSgpO1xuXG5cdFx0XHRsaW5lTGVuZ3RoID0gbGluZS5sZW5ndGg7XG5cblx0XHRcdGlmICggbGluZUxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHRsaW5lRmlyc3RDaGFyID0gbGluZS5jaGFyQXQoIDAgKTtcblxuXHRcdFx0Ly8gQHRvZG8gaW52b2tlIHBhc3NlZCBpbiBoYW5kbGVyIGlmIGFueVxuXHRcdFx0aWYgKCBsaW5lRmlyc3RDaGFyID09PSAnIycgKSBjb250aW51ZTtcblxuXHRcdFx0aWYgKCBsaW5lRmlyc3RDaGFyID09PSAndicgKSB7XG5cblx0XHRcdFx0bGluZVNlY29uZENoYXIgPSBsaW5lLmNoYXJBdCggMSApO1xuXG5cdFx0XHRcdGlmICggbGluZVNlY29uZENoYXIgPT09ICcgJyAmJiAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLnZlcnRleF9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gMCAgICAgICAgICAgICAgICAgIDEgICAgICAyICAgICAgM1xuXHRcdFx0XHRcdC8vIFtcInYgMS4wIDIuMCAzLjBcIiwgXCIxLjBcIiwgXCIyLjBcIiwgXCIzLjBcIl1cblxuXHRcdFx0XHRcdHN0YXRlLnZlcnRpY2VzLnB1c2goXG5cdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCByZXN1bHRbIDEgXSApLFxuXHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggcmVzdWx0WyAyIF0gKSxcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMyBdIClcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGxpbmVTZWNvbmRDaGFyID09PSAnbicgJiYgKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5ub3JtYWxfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIDAgICAgICAgICAgICAgICAgICAgMSAgICAgIDIgICAgICAzXG5cdFx0XHRcdFx0Ly8gW1widm4gMS4wIDIuMCAzLjBcIiwgXCIxLjBcIiwgXCIyLjBcIiwgXCIzLjBcIl1cblxuXHRcdFx0XHRcdHN0YXRlLm5vcm1hbHMucHVzaChcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMSBdICksXG5cdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApLFxuXHRcdFx0XHRcdFx0cGFyc2VGbG9hdCggcmVzdWx0WyAzIF0gKVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggbGluZVNlY29uZENoYXIgPT09ICd0JyAmJiAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLnV2X3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyAwICAgICAgICAgICAgICAgMSAgICAgIDJcblx0XHRcdFx0XHQvLyBbXCJ2dCAwLjEgMC4yXCIsIFwiMC4xXCIsIFwiMC4yXCJdXG5cblx0XHRcdFx0XHRzdGF0ZS51dnMucHVzaChcblx0XHRcdFx0XHRcdHBhcnNlRmxvYXQoIHJlc3VsdFsgMSBdICksXG5cdFx0XHRcdFx0XHRwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcIlVuZXhwZWN0ZWQgdmVydGV4L25vcm1hbC91diBsaW5lOiAnXCIgKyBsaW5lICArIFwiJ1wiICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSBcImZcIiApIHtcblxuXHRcdFx0XHRpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gZiB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbFxuXHRcdFx0XHRcdC8vIDAgICAgICAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgICA3ICAgIDggICAgOSAgIDEwICAgICAgICAgMTEgICAgICAgICAxMlxuXHRcdFx0XHRcdC8vIFtcImYgMS8xLzEgMi8yLzIgMy8zLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cblxuXHRcdFx0XHRcdHN0YXRlLmFkZEZhY2UoXG5cdFx0XHRcdFx0XHRyZXN1bHRbIDEgXSwgcmVzdWx0WyA0IF0sIHJlc3VsdFsgNyBdLCByZXN1bHRbIDEwIF0sXG5cdFx0XHRcdFx0XHRyZXN1bHRbIDIgXSwgcmVzdWx0WyA1IF0sIHJlc3VsdFsgOCBdLCByZXN1bHRbIDExIF0sXG5cdFx0XHRcdFx0XHRyZXN1bHRbIDMgXSwgcmVzdWx0WyA2IF0sIHJlc3VsdFsgOSBdLCByZXN1bHRbIDEyIF1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfdXYuZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyBmIHZlcnRleC91diB2ZXJ0ZXgvdXYgdmVydGV4L3V2XG5cdFx0XHRcdFx0Ly8gMCAgICAgICAgICAgICAgICAgIDEgICAgMiAgICAzICAgIDQgICAgNSAgICA2ICAgNyAgICAgICAgICA4XG5cdFx0XHRcdFx0Ly8gW1wiZiAxLzEgMi8yIDMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cblxuXHRcdFx0XHRcdHN0YXRlLmFkZEZhY2UoXG5cdFx0XHRcdFx0XHRyZXN1bHRbIDEgXSwgcmVzdWx0WyAzIF0sIHJlc3VsdFsgNSBdLCByZXN1bHRbIDcgXSxcblx0XHRcdFx0XHRcdHJlc3VsdFsgMiBdLCByZXN1bHRbIDQgXSwgcmVzdWx0WyA2IF0sIHJlc3VsdFsgOCBdXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X25vcm1hbC5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdC8vIGYgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWxcblx0XHRcdFx0XHQvLyAwICAgICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICA3ICAgICAgICAgIDhcblx0XHRcdFx0XHQvLyBbXCJmIDEvLzEgMi8vMiAzLy8zXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuXG5cdFx0XHRcdFx0c3RhdGUuYWRkRmFjZShcblx0XHRcdFx0XHRcdHJlc3VsdFsgMSBdLCByZXN1bHRbIDMgXSwgcmVzdWx0WyA1IF0sIHJlc3VsdFsgNyBdLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0cmVzdWx0WyAyIF0sIHJlc3VsdFsgNCBdLCByZXN1bHRbIDYgXSwgcmVzdWx0WyA4IF1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXguZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyBmIHZlcnRleCB2ZXJ0ZXggdmVydGV4XG5cdFx0XHRcdFx0Ly8gMCAgICAgICAgICAgIDEgICAgMiAgICAzICAgNFxuXHRcdFx0XHRcdC8vIFtcImYgMSAyIDNcIiwgXCIxXCIsIFwiMlwiLCBcIjNcIiwgdW5kZWZpbmVkXVxuXG5cdFx0XHRcdFx0c3RhdGUuYWRkRmFjZShcblx0XHRcdFx0XHRcdHJlc3VsdFsgMSBdLCByZXN1bHRbIDIgXSwgcmVzdWx0WyAzIF0sIHJlc3VsdFsgNCBdXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcIlVuZXhwZWN0ZWQgZmFjZSBsaW5lOiAnXCIgKyBsaW5lICArIFwiJ1wiICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKCBsaW5lRmlyc3RDaGFyID09PSBcImxcIiApIHtcblxuXHRcdFx0XHR2YXIgbGluZVBhcnRzID0gbGluZS5zdWJzdHJpbmcoIDEgKS50cmltKCkuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdHZhciBsaW5lVmVydGljZXMgPSBbXSwgbGluZVVWcyA9IFtdO1xuXG5cdFx0XHRcdGlmICggbGluZS5pbmRleE9mKCBcIi9cIiApID09PSAtIDEgKSB7XG5cblx0XHRcdFx0XHRsaW5lVmVydGljZXMgPSBsaW5lUGFydHM7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBsaSA9IDAsIGxsZW4gPSBsaW5lUGFydHMubGVuZ3RoOyBsaSA8IGxsZW47IGxpICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcGFydHMgPSBsaW5lUGFydHNbIGxpIF0uc3BsaXQoIFwiL1wiICk7XG5cblx0XHRcdFx0XHRcdGlmICggcGFydHNbIDAgXSAhPT0gXCJcIiApIGxpbmVWZXJ0aWNlcy5wdXNoKCBwYXJ0c1sgMCBdICk7XG5cdFx0XHRcdFx0XHRpZiAoIHBhcnRzWyAxIF0gIT09IFwiXCIgKSBsaW5lVVZzLnB1c2goIHBhcnRzWyAxIF0gKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHRcdHN0YXRlLmFkZExpbmVHZW9tZXRyeSggbGluZVZlcnRpY2VzLCBsaW5lVVZzICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAub2JqZWN0X3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0Ly8gbyBvYmplY3RfbmFtZVxuXHRcdFx0XHQvLyBvclxuXHRcdFx0XHQvLyBnIGdyb3VwX25hbWVcblxuXHRcdFx0XHQvLyBXT1JLQVJPVU5EOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yODY5XG5cdFx0XHRcdC8vIHZhciBuYW1lID0gcmVzdWx0WyAwIF0uc3Vic3RyKCAxICkudHJpbSgpO1xuXHRcdFx0XHR2YXIgbmFtZSA9ICggXCIgXCIgKyByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCkgKS5zdWJzdHIoIDEgKTtcblxuXHRcdFx0XHRzdGF0ZS5zdGFydE9iamVjdCggbmFtZSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0aGlzLnJlZ2V4cC5tYXRlcmlhbF91c2VfcGF0dGVybi50ZXN0KCBsaW5lICkgKSB7XG5cblx0XHRcdFx0Ly8gbWF0ZXJpYWxcblxuXHRcdFx0XHRzdGF0ZS5vYmplY3Quc3RhcnRNYXRlcmlhbCggbGluZS5zdWJzdHJpbmcoIDcgKS50cmltKCksIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHRoaXMucmVnZXhwLm1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybi50ZXN0KCBsaW5lICkgKSB7XG5cblx0XHRcdFx0Ly8gbXRsIGZpbGVcblxuXHRcdFx0XHRzdGF0ZS5tYXRlcmlhbExpYnJhcmllcy5wdXNoKCBsaW5lLnN1YnN0cmluZyggNyApLnRyaW0oKSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLnNtb290aGluZ19wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuXG5cdFx0XHRcdC8vIHNtb290aCBzaGFkaW5nXG5cblx0XHRcdFx0Ly8gQHRvZG8gSGFuZGxlIGZpbGVzIHRoYXQgaGF2ZSB2YXJ5aW5nIHNtb290aCB2YWx1ZXMgZm9yIGEgc2V0IG9mIGZhY2VzIGluc2lkZSBvbmUgZ2VvbWV0cnksXG5cdFx0XHRcdC8vIGJ1dCBkb2VzIG5vdCBkZWZpbmUgYSB1c2VtdGwgZm9yIGVhY2ggZmFjZSBzZXQuXG5cdFx0XHRcdC8vIFRoaXMgc2hvdWxkIGJlIGRldGVjdGVkIGFuZCBhIGR1bW15IG1hdGVyaWFsIGNyZWF0ZWQgKGxhdGVyIE11bHRpTWF0ZXJpYWwgYW5kIGdlb21ldHJ5IGdyb3VwcykuXG5cdFx0XHRcdC8vIFRoaXMgcmVxdWlyZXMgc29tZSBjYXJlIHRvIG5vdCBjcmVhdGUgZXh0cmEgbWF0ZXJpYWwgb24gZWFjaCBzbW9vdGggdmFsdWUgZm9yIFwibm9ybWFsXCIgb2JqIGZpbGVzLlxuXHRcdFx0XHQvLyB3aGVyZSBleHBsaWNpdCB1c2VtdGwgZGVmaW5lcyBnZW9tZXRyeSBncm91cHMuXG5cdFx0XHRcdC8vIEV4YW1wbGUgYXNzZXQ6IGV4YW1wbGVzL21vZGVscy9vYmovY2VyYmVydXMvQ2VyYmVydXMub2JqXG5cblx0XHRcdFx0dmFyIHZhbHVlID0gcmVzdWx0WyAxIF0udHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHN0YXRlLm9iamVjdC5zbW9vdGggPSAoIHZhbHVlID09PSAnMScgfHwgdmFsdWUgPT09ICdvbicgKTtcblxuXHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBzdGF0ZS5vYmplY3QuY3VycmVudE1hdGVyaWFsKCk7XG5cdFx0XHRcdGlmICggbWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0XHRtYXRlcmlhbC5zbW9vdGggPSBzdGF0ZS5vYmplY3Quc21vb3RoO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBIYW5kbGUgbnVsbCB0ZXJtaW5hdGVkIGZpbGVzIHdpdGhvdXQgZXhjZXB0aW9uXG5cdFx0XHRcdGlmICggbGluZSA9PT0gJ1xcMCcgKSBjb250aW51ZTtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiVW5leHBlY3RlZCBsaW5lOiAnXCIgKyBsaW5lICArIFwiJ1wiICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHN0YXRlLmZpbmFsaXplKCk7XG5cblx0XHR2YXIgY29udGFpbmVyID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cdFx0Y29udGFpbmVyLm1hdGVyaWFsTGlicmFyaWVzID0gW10uY29uY2F0KCBzdGF0ZS5tYXRlcmlhbExpYnJhcmllcyApO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gc3RhdGUub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG5cdFx0XHR2YXIgb2JqZWN0ID0gc3RhdGUub2JqZWN0c1sgaSBdO1xuXHRcdFx0dmFyIGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xuXHRcdFx0dmFyIG1hdGVyaWFscyA9IG9iamVjdC5tYXRlcmlhbHM7XG5cdFx0XHR2YXIgaXNMaW5lID0gKCBnZW9tZXRyeS50eXBlID09PSAnTGluZScgKTtcblxuXHRcdFx0Ly8gU2tpcCBvL2cgbGluZSBkZWNsYXJhdGlvbnMgdGhhdCBkaWQgbm90IGZvbGxvdyB3aXRoIGFueSBmYWNlc1xuXHRcdFx0aWYgKCBnZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggPT09IDAgKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGJ1ZmZlcmdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG5cblx0XHRcdGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggZ2VvbWV0cnkudmVydGljZXMgKSwgMyApICk7XG5cblx0XHRcdGlmICggZ2VvbWV0cnkubm9ybWFscy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGdlb21ldHJ5Lm5vcm1hbHMgKSwgMyApICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0YnVmZmVyZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGdlb21ldHJ5LnV2cy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2JywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggZ2VvbWV0cnkudXZzICksIDIgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIENyZWF0ZSBtYXRlcmlhbHNcblxuXHRcdFx0dmFyIGNyZWF0ZWRNYXRlcmlhbHMgPSBbXTtcblxuXHRcdFx0Zm9yICggdmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuIDsgbWkrKyApIHtcblxuXHRcdFx0XHR2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWldO1xuXHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSB1bmRlZmluZWQ7XG5cblx0XHRcdFx0aWYgKCB0aGlzLm1hdGVyaWFscyAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHMuY3JlYXRlKCBzb3VyY2VNYXRlcmlhbC5uYW1lICk7XG5cblx0XHRcdFx0XHQvLyBtdGwgZXRjLiBsb2FkZXJzIHByb2JhYmx5IGNhbid0IGNyZWF0ZSBsaW5lIG1hdGVyaWFscyBjb3JyZWN0bHksIGNvcHkgcHJvcGVydGllcyB0byBhIGxpbmUgbWF0ZXJpYWwuXG5cdFx0XHRcdFx0aWYgKCBpc0xpbmUgJiYgbWF0ZXJpYWwgJiYgISAoIG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwgKSApIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1hdGVyaWFsTGluZSA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpO1xuXHRcdFx0XHRcdFx0bWF0ZXJpYWxMaW5lLmNvcHkoIG1hdGVyaWFsICk7XG5cdFx0XHRcdFx0XHRtYXRlcmlhbCA9IG1hdGVyaWFsTGluZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhIG1hdGVyaWFsICkge1xuXG5cdFx0XHRcdFx0bWF0ZXJpYWwgPSAoICEgaXNMaW5lID8gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCkgOiBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoKSApO1xuXHRcdFx0XHRcdG1hdGVyaWFsLm5hbWUgPSBzb3VyY2VNYXRlcmlhbC5uYW1lO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtYXRlcmlhbC5zaGFkaW5nID0gc291cmNlTWF0ZXJpYWwuc21vb3RoID8gVEhSRUUuU21vb3RoU2hhZGluZyA6IFRIUkVFLkZsYXRTaGFkaW5nO1xuXG5cdFx0XHRcdGNyZWF0ZWRNYXRlcmlhbHMucHVzaChtYXRlcmlhbCk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ3JlYXRlIG1lc2hcblxuXHRcdFx0dmFyIG1lc2g7XG5cblx0XHRcdGlmICggY3JlYXRlZE1hdGVyaWFscy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHRcdGZvciAoIHZhciBtaSA9IDAsIG1pTGVuID0gbWF0ZXJpYWxzLmxlbmd0aDsgbWkgPCBtaUxlbiA7IG1pKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWldO1xuXHRcdFx0XHRcdGJ1ZmZlcmdlb21ldHJ5LmFkZEdyb3VwKCBzb3VyY2VNYXRlcmlhbC5ncm91cFN0YXJ0LCBzb3VyY2VNYXRlcmlhbC5ncm91cENvdW50LCBtaSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgbXVsdGlNYXRlcmlhbCA9IG5ldyBUSFJFRS5NdWx0aU1hdGVyaWFsKCBjcmVhdGVkTWF0ZXJpYWxzICk7XG5cdFx0XHRcdG1lc2ggPSAoICEgaXNMaW5lID8gbmV3IFRIUkVFLk1lc2goIGJ1ZmZlcmdlb21ldHJ5LCBtdWx0aU1hdGVyaWFsICkgOiBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgbXVsdGlNYXRlcmlhbCApICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bWVzaCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaCggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbIDAgXSApIDogbmV3IFRIUkVFLkxpbmVTZWdtZW50cyggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbIDAgXSApICk7XG5cdFx0XHR9XG5cblx0XHRcdG1lc2gubmFtZSA9IG9iamVjdC5uYW1lO1xuXG5cdFx0XHRjb250YWluZXIuYWRkKCBtZXNoICk7XG5cblx0XHR9XG5cblx0XHRjb25zb2xlLnRpbWVFbmQoICdPQkpMb2FkZXInICk7XG5cblx0XHRyZXR1cm4gY29udGFpbmVyO1xuXG5cdH1cblxufTtcbiIsIi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXG52YXIgU3RhdHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBoKGEpe2MuYXBwZW5kQ2hpbGQoYS5kb20pO3JldHVybiBhfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBkPTA7ZDxjLmNoaWxkcmVuLmxlbmd0aDtkKyspYy5jaGlsZHJlbltkXS5zdHlsZS5kaXNwbGF5PWQ9PT1hP1wiYmxvY2tcIjpcIm5vbmVcIjtsPWF9dmFyIGw9MCxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6MC45O3otaW5kZXg6MTAwMDBcIjtjLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtrKCsrbCVjLmNoaWxkcmVuLmxlbmd0aCl9LCExKTt2YXIgZz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGU9ZyxhPTAscj1oKG5ldyBTdGF0cy5QYW5lbChcIkZQU1wiLFwiIzBmZlwiLFwiIzAwMlwiKSksZj1oKG5ldyBTdGF0cy5QYW5lbChcIk1TXCIsXCIjMGYwXCIsXCIjMDIwXCIpKTtcbmlmKHNlbGYucGVyZm9ybWFuY2UmJnNlbGYucGVyZm9ybWFuY2UubWVtb3J5KXZhciB0PWgobmV3IFN0YXRzLlBhbmVsKFwiTUJcIixcIiNmMDhcIixcIiMyMDFcIikpO2soMCk7cmV0dXJue1JFVklTSU9OOjE2LGRvbTpjLGFkZFBhbmVsOmgsc2hvd1BhbmVsOmssYmVnaW46ZnVuY3Rpb24oKXtnPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCl9LGVuZDpmdW5jdGlvbigpe2ErKzt2YXIgYz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpO2YudXBkYXRlKGMtZywyMDApO2lmKGM+ZSsxRTMmJihyLnVwZGF0ZSgxRTMqYS8oYy1lKSwxMDApLGU9YyxhPTAsdCkpe3ZhciBkPXBlcmZvcm1hbmNlLm1lbW9yeTt0LnVwZGF0ZShkLnVzZWRKU0hlYXBTaXplLzEwNDg1NzYsZC5qc0hlYXBTaXplTGltaXQvMTA0ODU3Nil9cmV0dXJuIGN9LHVwZGF0ZTpmdW5jdGlvbigpe2c9dGhpcy5lbmQoKX0sZG9tRWxlbWVudDpjLHNldE1vZGU6a319O1xuU3RhdHMuUGFuZWw9ZnVuY3Rpb24oaCxrLGwpe3ZhciBjPUluZmluaXR5LGc9MCxlPU1hdGgucm91bmQsYT1lKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxyPTgwKmEsZj00OCphLHQ9MyphLHU9MiphLGQ9MyphLG09MTUqYSxuPTc0KmEscD0zMCphLHE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtxLndpZHRoPXI7cS5oZWlnaHQ9ZjtxLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDo4MHB4O2hlaWdodDo0OHB4XCI7dmFyIGI9cS5nZXRDb250ZXh0KFwiMmRcIik7Yi5mb250PVwiYm9sZCBcIis5KmErXCJweCBIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZlwiO2IudGV4dEJhc2VsaW5lPVwidG9wXCI7Yi5maWxsU3R5bGU9bDtiLmZpbGxSZWN0KDAsMCxyLGYpO2IuZmlsbFN0eWxlPWs7Yi5maWxsVGV4dChoLHQsdSk7Yi5maWxsUmVjdChkLG0sbixwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkLG0sbixwKTtyZXR1cm57ZG9tOnEsdXBkYXRlOmZ1bmN0aW9uKGYsXG52KXtjPU1hdGgubWluKGMsZik7Zz1NYXRoLm1heChnLGYpO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0xO2IuZmlsbFJlY3QoMCwwLHIsbSk7Yi5maWxsU3R5bGU9aztiLmZpbGxUZXh0KGUoZikrXCIgXCIraCtcIiAoXCIrZShjKStcIi1cIitlKGcpK1wiKVwiLHQsdSk7Yi5kcmF3SW1hZ2UocSxkK2EsbSxuLWEscCxkLG0sbi1hLHApO2IuZmlsbFJlY3QoZCtuLWEsbSxhLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxlKCgxLWYvdikqcCkpfX19O1wib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9U3RhdHMpO1xuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tXG4gKi9cblxuVEhSRUUuUGFpbnRWaXZlQ29udHJvbGxlciA9IGZ1bmN0aW9uICggaWQgKSB7XG5cblx0VEhSRUUuVml2ZUNvbnRyb2xsZXIuY2FsbCggdGhpcywgaWQgKTtcblxuXHR2YXIgUEkyID0gTWF0aC5QSSAqIDI7XG5cblx0dmFyIE1PREVTID0geyBDT0xPUjogMCwgU0laRTogMSB9O1xuXHR2YXIgbW9kZSA9IE1PREVTLkNPTE9SO1xuXG5cdHZhciBjb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMSwgMSwgMSApO1xuXHR2YXIgc2l6ZSA9IDEuMDtcblxuXHQvL1xuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlSHVlVGV4dHVyZSgpIHtcblxuXHRcdHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApO1xuXHRcdGNhbnZhcy53aWR0aCA9IDI1Njtcblx0XHRjYW52YXMuaGVpZ2h0ID0gMjU2O1xuXG5cdFx0dmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCggJzJkJyApO1xuXHRcdHZhciBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSggMCwgMCwgMjU2LCAyNTYgKTtcblx0XHR2YXIgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBqID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDQsIGogKysgKSB7XG5cblx0XHRcdHZhciB4ID0gKCAoIGogJSAyNTYgKSAvIDI1NiApIC0gMC41O1xuXHRcdFx0dmFyIHkgPSAoIE1hdGguZmxvb3IoIGogLyAyNTYgKSAvIDI1NiApIC0gMC41O1xuXG5cdFx0XHRjb2xvci5zZXRIU0woIE1hdGguYXRhbjIoIHksIHggKSAvIFBJMiwgMSwoIDAuNSAtIE1hdGguc3FydCggeCAqIHggKyB5ICogeSApICkgKiAyLjAgKTtcblxuXHRcdFx0ZGF0YVsgaSArIDAgXSA9IGNvbG9yLnIgKiAyNTY7XG5cdFx0XHRkYXRhWyBpICsgMSBdID0gY29sb3IuZyAqIDI1Njtcblx0XHRcdGRhdGFbIGkgKyAyIF0gPSBjb2xvci5iICogMjU2O1xuXHRcdFx0ZGF0YVsgaSArIDMgXSA9IDI1NjtcblxuXHRcdH1cblxuXHRcdGNvbnRleHQucHV0SW1hZ2VEYXRhKCBpbWFnZURhdGEsIDAsIDAgKTtcblxuXHRcdHJldHVybiBuZXcgVEhSRUUuQ2FudmFzVGV4dHVyZSggY2FudmFzICk7XG5cblx0fVxuXG5cdHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5DaXJjbGVHZW9tZXRyeSggMSwgMzIgKTtcblx0dmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IG1hcDogZ2VuZXJhdGVIdWVUZXh0dXJlKCkgfSApO1xuXHR2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblx0bWVzaC5wb3NpdGlvbi5zZXQoIDAsIDAuMDA1LCAwLjA0OTUgKTtcblx0bWVzaC5yb3RhdGlvbi54ID0gLSAxLjQ1O1xuXHRtZXNoLnNjYWxlLnNldFNjYWxhciggMC4wMiApO1xuXHR0aGlzLmFkZCggbWVzaCApXG5cblx0dmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkoIDAuMSwgMiApO1xuXHR2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoKTtcblx0bWF0ZXJpYWwuY29sb3IgPSBjb2xvcjtcblx0dmFyIGJhbGwgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cdG1lc2guYWRkKCBiYWxsICk7XG5cblx0ZnVuY3Rpb24gb25BeGlzQ2hhbmdlZCggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHRoaXMuZ2V0QnV0dG9uU3RhdGUoICd0aHVtYnBhZCcgKSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHR2YXIgeCA9IGV2ZW50LmF4ZXNbIDAgXSAvIDIuMDtcblx0XHR2YXIgeSA9IC0gZXZlbnQuYXhlc1sgMSBdIC8gMi4wO1xuXG5cdFx0aWYgKCBtb2RlID09PSBNT0RFUy5DT0xPUiApIHtcblx0XHRcdGNvbG9yLnNldEhTTCggTWF0aC5hdGFuMiggeSwgeCApIC8gUEkyLCAxLCAoIDAuNSAtIE1hdGguc3FydCggeCAqIHggKyB5ICogeSApICkgKiAyLjAgKTtcblx0XHRcdGJhbGwucG9zaXRpb24ueCA9IGV2ZW50LmF4ZXNbIDAgXTtcblx0XHRcdGJhbGwucG9zaXRpb24ueSA9IGV2ZW50LmF4ZXNbIDEgXTtcblx0XHR9XG5cblx0XHRpZiAoIG1vZGUgPT09IE1PREVTLlNJWkUgKSB7XG5cdFx0XHRzaXplID0geSArIDE7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBvbkdyaXBzRG93biggZXZlbnQgKSB7XG5cblx0XHRpZiAoIG1vZGUgPT09IE1PREVTLkNPTE9SICkge1xuXHRcdFx0bW9kZSA9IE1PREVTLlNJWkU7XG5cdFx0XHRtZXNoLnZpc2libGUgPSBmYWxzZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG1vZGUgPT09IE1PREVTLlNJWkUgKSB7XG5cdFx0XHRtb2RlID0gTU9ERVMuQ09MT1I7XG5cdFx0XHRtZXNoLnZpc2libGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHR9XG5cblx0dGhpcy5nZXRDb2xvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbG9yOyB9O1xuXHR0aGlzLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzaXplOyB9O1xuXG5cdHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggJ2F4aXNjaGFuZ2VkJywgb25BeGlzQ2hhbmdlZCApO1xuXHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoICdncmlwc2Rvd24nLCBvbkdyaXBzRG93biApO1xuXG59O1xuXG5USFJFRS5QYWludFZpdmVDb250cm9sbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLlZpdmVDb250cm9sbGVyLnByb3RvdHlwZSApO1xuVEhSRUUuUGFpbnRWaXZlQ29udHJvbGxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5QYWludFZpdmVDb250cm9sbGVyO1xuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tXG4gKiBAYXV0aG9yIHN0ZXdkaW8gLyBodHRwOi8vc3Rld2QuaW9cbiAqL1xuXG5USFJFRS5WaXZlQ29udHJvbGxlciA9IGZ1bmN0aW9uICggaWQgKSB7XG5cblx0VEhSRUUuT2JqZWN0M0QuY2FsbCggdGhpcyApO1xuXG5cdHZhciBzY29wZSA9IHRoaXM7XG5cdHZhciBnYW1lcGFkO1xuXG5cdHZhciBheGVzID0gWyAwLCAwIF07XG5cdHZhciB0aHVtYnBhZElzUHJlc3NlZCA9IGZhbHNlO1xuXHR2YXIgdHJpZ2dlcklzUHJlc3NlZCA9IGZhbHNlO1xuXHR2YXIgZ3JpcHNBcmVQcmVzc2VkID0gZmFsc2U7XG5cdHZhciBtZW51SXNQcmVzc2VkID0gZmFsc2U7XG5cblx0ZnVuY3Rpb24gZmluZEdhbWVwYWQoIGlkICkge1xuXG5cdFx0Ly8gSXRlcmF0ZSBhY3Jvc3MgZ2FtZXBhZHMgYXMgVml2ZSBDb250cm9sbGVycyBtYXkgbm90IGJlXG5cdFx0Ly8gaW4gcG9zaXRpb24gMCBhbmQgMS5cblxuXHRcdHZhciBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBqID0gMDsgaSA8IDQ7IGkgKysgKSB7XG5cblx0XHRcdHZhciBnYW1lcGFkID0gZ2FtZXBhZHNbIGkgXTtcblxuXHRcdFx0aWYgKCBnYW1lcGFkICYmIGdhbWVwYWQuaWQgPT09ICdPcGVuVlIgR2FtZXBhZCcgKSB7XG5cblx0XHRcdFx0aWYgKCBqID09PSBpZCApIHJldHVybiBnYW1lcGFkO1xuXG5cdFx0XHRcdGogKys7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0dGhpcy5tYXRyaXhBdXRvVXBkYXRlID0gZmFsc2U7XG5cdHRoaXMuc3RhbmRpbmdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG5cdHRoaXMuZ2V0R2FtZXBhZCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBnYW1lcGFkO1xuXG5cdH07XG5cblx0dGhpcy5nZXRCdXR0b25TdGF0ZSA9IGZ1bmN0aW9uICggYnV0dG9uICkge1xuXG5cdFx0aWYgKCBidXR0b24gPT09ICd0aHVtYnBhZCcgKSByZXR1cm4gdGh1bWJwYWRJc1ByZXNzZWQ7XG5cdFx0aWYgKCBidXR0b24gPT09ICd0cmlnZ2VyJyApIHJldHVybiB0cmlnZ2VySXNQcmVzc2VkO1xuXHRcdGlmICggYnV0dG9uID09PSAnZ3JpcHMnICkgcmV0dXJuIGdyaXBzQXJlUHJlc3NlZDtcblx0XHRpZiAoIGJ1dHRvbiA9PT0gJ21lbnUnICkgcmV0dXJuIG1lbnVJc1ByZXNzZWQ7XG5cblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdGdhbWVwYWQgPSBmaW5kR2FtZXBhZCggaWQgKTtcblxuXHRcdGlmICggZ2FtZXBhZCAhPT0gdW5kZWZpbmVkICYmIGdhbWVwYWQucG9zZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRpZiAoIGdhbWVwYWQucG9zZSA9PT0gbnVsbCApIHJldHVybjsgLy8gTm8gdXNlciBhY3Rpb24geWV0XG5cblx0XHRcdC8vICBQb3NpdGlvbiBhbmQgb3JpZW50YXRpb24uXG5cblx0XHRcdHZhciBwb3NlID0gZ2FtZXBhZC5wb3NlO1xuXG5cdFx0XHRpZiAoIHBvc2UucG9zaXRpb24gIT09IG51bGwgKSBzY29wZS5wb3NpdGlvbi5mcm9tQXJyYXkoIHBvc2UucG9zaXRpb24gKTtcblx0XHRcdGlmICggcG9zZS5vcmllbnRhdGlvbiAhPT0gbnVsbCApIHNjb3BlLnF1YXRlcm5pb24uZnJvbUFycmF5KCBwb3NlLm9yaWVudGF0aW9uICk7XG5cdFx0XHRzY29wZS5tYXRyaXguY29tcG9zZSggc2NvcGUucG9zaXRpb24sIHNjb3BlLnF1YXRlcm5pb24sIHNjb3BlLnNjYWxlICk7XG5cdFx0XHRzY29wZS5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyggc2NvcGUuc3RhbmRpbmdNYXRyaXgsIHNjb3BlLm1hdHJpeCApO1xuXHRcdFx0c2NvcGUubWF0cml4V29ybGROZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRzY29wZS52aXNpYmxlID0gdHJ1ZTtcblxuXHRcdFx0Ly8gIFRodW1icGFkIGFuZCBCdXR0b25zLlxuXG5cdFx0XHRpZiAoIGF4ZXNbIDAgXSAhPT0gZ2FtZXBhZC5heGVzWyAwIF0gfHwgYXhlc1sgMSBdICE9PSBnYW1lcGFkLmF4ZXNbIDEgXSApIHtcblxuXHRcdFx0XHRheGVzWyAwIF0gPSBnYW1lcGFkLmF4ZXNbIDAgXTsgLy8gIFggYXhpczogLTEgPSBMZWZ0LCArMSA9IFJpZ2h0LlxuXHRcdFx0XHRheGVzWyAxIF0gPSBnYW1lcGFkLmF4ZXNbIDEgXTsgLy8gIFkgYXhpczogLTEgPSBCb3R0b20sICsxID0gVG9wLlxuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdheGlzY2hhbmdlZCcsIGF4ZXM6IGF4ZXMgfSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGh1bWJwYWRJc1ByZXNzZWQgIT09IGdhbWVwYWQuYnV0dG9uc1sgMCBdLnByZXNzZWQgKSB7XG5cblx0XHRcdFx0dGh1bWJwYWRJc1ByZXNzZWQgPSBnYW1lcGFkLmJ1dHRvbnNbIDAgXS5wcmVzc2VkO1xuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6IHRodW1icGFkSXNQcmVzc2VkID8gJ3RodW1icGFkZG93bicgOiAndGh1bWJwYWR1cCcgfSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggdHJpZ2dlcklzUHJlc3NlZCAhPT0gZ2FtZXBhZC5idXR0b25zWyAxIF0ucHJlc3NlZCApIHtcblxuXHRcdFx0XHR0cmlnZ2VySXNQcmVzc2VkID0gZ2FtZXBhZC5idXR0b25zWyAxIF0ucHJlc3NlZDtcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiB0cmlnZ2VySXNQcmVzc2VkID8gJ3RyaWdnZXJkb3duJyA6ICd0cmlnZ2VydXAnIH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGdyaXBzQXJlUHJlc3NlZCAhPT0gZ2FtZXBhZC5idXR0b25zWyAyIF0ucHJlc3NlZCApIHtcblxuXHRcdFx0XHRncmlwc0FyZVByZXNzZWQgPSBnYW1lcGFkLmJ1dHRvbnNbIDIgXS5wcmVzc2VkO1xuXHRcdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6IGdyaXBzQXJlUHJlc3NlZCA/ICdncmlwc2Rvd24nIDogJ2dyaXBzdXAnIH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1lbnVJc1ByZXNzZWQgIT09IGdhbWVwYWQuYnV0dG9uc1sgMyBdLnByZXNzZWQgKSB7XG5cblx0XHRcdFx0bWVudUlzUHJlc3NlZCA9IGdhbWVwYWQuYnV0dG9uc1sgMyBdLnByZXNzZWQ7XG5cdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogbWVudUlzUHJlc3NlZCA/ICdtZW51ZG93bicgOiAnbWVudXVwJyB9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHNjb3BlLnZpc2libGUgPSBmYWxzZTtcblxuXHRcdH1cblxuXHR9O1xuXG59O1xuXG5USFJFRS5WaXZlQ29udHJvbGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUgKTtcblRIUkVFLlZpdmVDb250cm9sbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLlZpdmVDb250cm9sbGVyO1xuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tXG4gKiBCYXNlZCBvbiBAdG9qaXJvJ3MgdnItc2FtcGxlcy11dGlscy5qc1xuICovXG5cbnRoaXMuV0VCVlIgPSB7XG5cblx0aXNMYXRlc3RBdmFpbGFibGU6IGZ1bmN0aW9uICgpIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1dFQlZSOiBpc0xhdGVzdEF2YWlsYWJsZSgpIGlzIGJlaW5nIGRlcHJlY2F0ZWQuIFVzZSAuaXNBdmFpbGFibGUoKSBpbnN0ZWFkLicgKTtcblx0XHRyZXR1cm4gdGhpcy5pc0F2YWlsYWJsZSgpO1xuXG5cdH0sXG5cblx0aXNBdmFpbGFibGU6IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cyAhPT0gdW5kZWZpbmVkO1xuXG5cdH0sXG5cblx0Z2V0TWVzc2FnZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIG1lc3NhZ2U7XG5cblx0XHRpZiAoIG5hdmlnYXRvci5nZXRWUkRpc3BsYXlzICkge1xuXG5cdFx0XHRuYXZpZ2F0b3IuZ2V0VlJEaXNwbGF5cygpLnRoZW4oIGZ1bmN0aW9uICggZGlzcGxheXMgKSB7XG5cblx0XHRcdFx0aWYgKCBkaXNwbGF5cy5sZW5ndGggPT09IDAgKSBtZXNzYWdlID0gJ1dlYlZSIHN1cHBvcnRlZCwgYnV0IG5vIFZSRGlzcGxheXMgZm91bmQuJztcblxuXHRcdFx0fSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0bWVzc2FnZSA9ICdZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJWUi4gU2VlIDxhIGhyZWY9XCJodHRwOi8vd2VidnIuaW5mb1wiPndlYnZyLmluZm88L2E+IGZvciBhc3Npc3RhbmNlLic7XG5cblx0XHR9XG5cblx0XHRpZiAoIG1lc3NhZ2UgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cdFx0XHRjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHRcdFx0Y29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG5cdFx0XHRjb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuXHRcdFx0Y29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzAnO1xuXHRcdFx0Y29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICc5OTknO1xuXHRcdFx0Y29udGFpbmVyLmFsaWduID0gJ2NlbnRlcic7XG5cblx0XHRcdHZhciBlcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cdFx0XHRlcnJvci5zdHlsZS5mb250RmFtaWx5ID0gJ3NhbnMtc2VyaWYnO1xuXHRcdFx0ZXJyb3Iuc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XG5cdFx0XHRlcnJvci5zdHlsZS5mb250U3R5bGUgPSAnbm9ybWFsJztcblx0XHRcdGVycm9yLnN0eWxlLmxpbmVIZWlnaHQgPSAnMjZweCc7XG5cdFx0XHRlcnJvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZic7XG5cdFx0XHRlcnJvci5zdHlsZS5jb2xvciA9ICcjMDAwJztcblx0XHRcdGVycm9yLnN0eWxlLnBhZGRpbmcgPSAnMTBweCAyMHB4Jztcblx0XHRcdGVycm9yLnN0eWxlLm1hcmdpbiA9ICc1MHB4Jztcblx0XHRcdGVycm9yLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblx0XHRcdGVycm9yLmlubmVySFRNTCA9IG1lc3NhZ2U7XG5cdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoIGVycm9yICk7XG5cblx0XHRcdHJldHVybiBjb250YWluZXI7XG5cblx0XHR9XG5cblx0fSxcblxuXHRnZXRCdXR0b246IGZ1bmN0aW9uICggZWZmZWN0ICkge1xuXG5cdFx0dmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdidXR0b24nICk7XG5cdFx0YnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRidXR0b24uc3R5bGUubGVmdCA9ICdjYWxjKDUwJSAtIDUwcHgpJztcblx0XHRidXR0b24uc3R5bGUuYm90dG9tID0gJzIwcHgnO1xuXHRcdGJ1dHRvbi5zdHlsZS53aWR0aCA9ICcxMDBweCc7XG5cdFx0YnV0dG9uLnN0eWxlLmJvcmRlciA9ICcwJztcblx0XHRidXR0b24uc3R5bGUucGFkZGluZyA9ICc4cHgnO1xuXHRcdGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cdFx0YnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMDAwJztcblx0XHRidXR0b24uc3R5bGUuY29sb3IgPSAnI2ZmZic7XG5cdFx0YnV0dG9uLnN0eWxlLmZvbnRGYW1pbHkgPSAnc2Fucy1zZXJpZic7XG5cdFx0YnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdGJ1dHRvbi5zdHlsZS5mb250U3R5bGUgPSAnbm9ybWFsJztcblx0XHRidXR0b24uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cdFx0YnV0dG9uLnN0eWxlLnpJbmRleCA9ICc5OTknO1xuXHRcdGJ1dHRvbi50ZXh0Q29udGVudCA9ICdFTlRFUiBWUic7XG5cdFx0YnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0ZWZmZWN0LmlzUHJlc2VudGluZyA/IGVmZmVjdC5leGl0UHJlc2VudCgpIDogZWZmZWN0LnJlcXVlc3RQcmVzZW50KCk7XG5cblx0XHR9O1xuXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgZnVuY3Rpb24gKCBldmVudCApIHtcblxuXHRcdFx0YnV0dG9uLnRleHRDb250ZW50ID0gZWZmZWN0LmlzUHJlc2VudGluZyA/ICdFWElUIFZSJyA6ICdFTlRFUiBWUic7XG5cblx0XHR9LCBmYWxzZSApO1xuXG5cdFx0cmV0dXJuIGJ1dHRvbjtcblxuXHR9XG5cbn07XG4iLCJcclxuaWYoICFUSFJFRS5SRVZJU0lPTi5pbmNsdWRlcyggXCJkM3gwclwiICkgKSB7XG5cbmlmKCBOdW1iZXIoVEhSRUUuUkVWSVNJT04pID09PSA3NCApIHtcclxufVxyXG5cclxudmFyIHZlY3RvcjNQb29sID0gW107XHJcblRIUkVFLlZlY3RvcjNQb29sID0ge1xyXG5cdG5ldyA6IGZ1bmN0aW9uKHgseSx6KSB7XHJcblx0XHR2YXIgciA9IHZlY3RvcjNQb29sLnBvcCgpO1xyXG5cdFx0aWYoIHIgKSB7XHJcblx0XHRcdHIueCA9IHg7XHJcblx0XHRcdHIueSA9IHk7XHJcblx0XHRcdHIueiA9IHo7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHRyID0gbmV3IFRIUkVFLlZlY3RvcjMoeCx5LHopO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHI7XHJcblx0fVxyXG59XHJcblxyXG5USFJFRS5WZWN0b3IzLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZlY3RvcjNQb29sLnB1c2goIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG52YXIgdmVjdG9yNFBvb2wgPSBbXTtcclxuVEhSRUUuVmVjdG9yNFBvb2wgPSB7XHJcblx0bmV3IDogZnVuY3Rpb24oeCx5LHosdykge1xyXG5cdFx0dmFyIHIgPSB2ZWN0b3I0UG9vbC5wb3AoKTtcclxuXHRcdGlmKCByICkge1xyXG5cdFx0XHRyLnggPSB4O1xyXG5cdFx0XHRyLnkgPSB5O1xyXG5cdFx0XHRyLnogPSB6O1xyXG5cdFx0XHRyLncgPSB3O1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0ciA9IG5ldyBUSFJFRS5WZWN0b3I0KHgseSx6LHcpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHI7XHJcblx0fVxyXG59XHJcblxyXG5USFJFRS5WZWN0b3I0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZlY3RvcjRQb29sLnB1c2goIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59XHJcblxyXG5cclxuLypcclxuXHRJTkxJTkVGVU5DKCB2b2lkLCBSb3RhdGUsICggUkNPT1JEIGRBbmdsZSwgUF9QT0lOVCB2YXhpczEsIFBfUE9JTlQgdmF4aXMyICkgKVxyXG5cdHtcclxuXHQgICBfUE9JTlQgdjEsIHYyO1xyXG5cdCAgIF9QT0lOVCB2c2F2ZTtcclxuXHQgICBSQ09PUkQgZHNpbiA9IChSQ09PUkQpU0lOKCBkQW5nbGUgKVxyXG5cdCAgIFx0ICAsIGRjb3MgPSAoUkNPT1JEKUNPUyggZEFuZ2xlICk7XHJcblx0ICAgTWVtQ3B5KCB2c2F2ZSwgdmF4aXMxLCBzaXplb2YoIF9QT0lOVCApICk7XHJcblx0ICAgRE9GVU5DKHNjYWxlKSggdjEsIHZheGlzMSwgZGNvcyApO1xyXG5cdCAgIERPRlVOQyhzY2FsZSkoIHYyLCB2YXhpczIsIGRzaW4gKTtcclxuXHQgICBET0ZVTkMoc3ViKSggdmF4aXMxLCB2MSwgdjIgKTtcclxuXHQgICBET0ZVTkMoc2NhbGUpKCB2MiwgdnNhdmUsIGRzaW4gKTtcclxuXHQgICBET0ZVTkMoc2NhbGUpKCB2MSwgdmF4aXMyLCBkY29zICk7XHJcblx0ICAgRE9GVU5DKGFkZCkoIHZheGlzMiwgdjIsIHYxICk7XHJcblx0fVxyXG4qL1xyXG5cclxuVEhSRUUuVmVjdG9yM1VuaXQgPSBuZXcgICAgICBUSFJFRS5WZWN0b3IzKCAgMSwgIDEsICAxICk7XHJcblRIUkVFLlZlY3RvcjNaZXJvID0gbmV3ICAgICAgVEhSRUUuVmVjdG9yMyggIDAsICAwLCAgMCApO1xyXG5USFJFRS5WZWN0b3IzUmlnaHQgPSBuZXcgICAgIFRIUkVFLlZlY3RvcjMoIC0xLCAgMCwgIDAgKTtcclxuVEhSRUUuVmVjdG9yM0JhY2t3YXJkID0gbmV3ICBUSFJFRS5WZWN0b3IzKCAgMCwgIDAsICAxICk7XHJcblRIUkVFLlZlY3RvcjNVcCA9IG5ldyAgICAgICAgVEhSRUUuVmVjdG9yMyggIDAsICAxLCAgMCApO1xyXG5USFJFRS5WZWN0b3IzTGVmdCA9IG5ldyAgICAgIFRIUkVFLlZlY3RvcjMoICAxLCAgMCwgIDAgKTtcclxuVEhSRUUuVmVjdG9yM0ZvcndhcmQgPSBuZXcgICBUSFJFRS5WZWN0b3IzKCAgMCwgIDAsIC0xICk7XHJcblRIUkVFLlZlY3RvcjNEb3duID0gbmV3ICAgICAgVEhSRUUuVmVjdG9yMyggIDAsIC0xLCAgMCApO1xyXG5cclxuXHJcbltcIlZlY3RvcjNVbml0XCJcclxuLFwiVmVjdG9yM1plcm9cIlxyXG4sXCJWZWN0b3IzUmlnaHRcIlxyXG4sXCJWZWN0b3IzQmFja3dhcmRcIlxyXG4sXCJWZWN0b3IzVXBcIlxyXG4sXCJWZWN0b3IzTGVmdFwiXHJcbixcIlZlY3RvcjNGb3J3YXJkXCJcclxuLFwiVmVjdG9yM0Rvd25cIl0uZm9yRWFjaCggZnVuY3Rpb24oa2V5KXtcclxuXHRPYmplY3QuZnJlZXplKFRIUkVFW2tleV0pXHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFRIUkVFW2tleV0sIFwieFwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KVxyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUSFJFRVtrZXldLCBcInlcIiwgeyB3cml0YWJsZTogZmFsc2UgfSlcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoVEhSRUVba2V5XSwgXCJ6XCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pXHJcbn0pXHJcblxyXG52YXIgb2xkUHJvdG8gPSBUSFJFRS5NYXRyaXg0LnByb3RvdHlwZTtcclxudmFyIG9sZE1hdHJpeENvbnRydWN0b3IgPSBUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcclxuVEhSRUUuTWF0cml4NHggPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLmVsZW1lbnRzID0gbmV3IEZsb2F0MzJBcnJheSggW1xyXG5cclxuXHRcdDEsIDAsIDAsIDAsXHJcblx0XHQwLCAxLCAwLCAwLFxyXG5cdFx0MCwgMCwgMSwgMCxcclxuXHRcdDAsIDAsIDAsIDFcclxuXHJcblx0XSApO1xyXG5cclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbGVtZW50c1wiLCB7IHdyaXRhYmxlOmZhbHNlIH0gKTtcclxuXHJcblxyXG59XHJcblxyXG5USFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcIm1vdGlvblwiLCBmdW5jdGlvbigpe1xyXG5cdGlmKCAhdGhpcy5fbW90aW9uICl7XHJcbiAgICAgICAgdGhpcy5fbW90aW9uID0ge1xyXG4gICAgICAgIFx0dGljayA6IDAsXHJcbiAgICAgICAgXHRzcGVlZCA6IG5ldyBUSFJFRS5WZWN0b3IzKCksXHJcbiAgICAgICAgICAgICAgICBhY2NlbGVyYXRpb24gOiBuZXcgVEhSRUUuVmVjdG9yMygpLFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb24gOiBuZXcgVEhSRUUuVmVjdG9yMygpLFxyXG4gICAgICAgICAgICAgICAgdG9ycXVlIDogbmV3IFRIUkVFLlZlY3RvcjMoKSxcclxuICAgICAgICAgICAgICAgIG1hc3MgOiAxLjAsXHJcbiAgICAgICAgICAgICAgICBtb3ZlIDogZnVuY3Rpb24oIG0sIGRlbHRhICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zcGVlZC5hZGRTY2FsZWRWZWN0b3IoIHRoaXMuYWNjZWxlcmF0aW9uLCBkZWx0YSApO1xyXG5cdFx0XHRcdFx0dmFyIGRlbCA9IHRoaXMuc3BlZWQuY2xvbmUoKS5tdWx0aXBseVNjYWxhciggZGVsdGEgKTtcclxuXHJcblx0XHRcdFx0XHRtLm9yaWdpbi5hZGRTY2FsZWRWZWN0b3IoIG0uZm9yd2FyZCwgZGVsLnogKTtcclxuXHRcdFx0XHRcdG0ub3JpZ2luLmFkZFNjYWxlZFZlY3RvciggbS51cCwgZGVsLnkgKTtcclxuXHRcdFx0XHRcdG0ub3JpZ2luLmFkZFNjYWxlZFZlY3RvciggbS5sZWZ0LCBkZWwueCApO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMucm90YXRpb24uYWRkU2NhbGVkVmVjdG9yKCB0aGlzLnRvcnF1ZSwgZGVsdGEgKTtcclxuXHRcdFx0XHRcdHZhciB0aGlzX21vdmUgPSB0aGlzLnJvdGF0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoIGRlbHRhIClcclxuXHRcdFx0XHRcdG0ucm90YXRlUmVsYXRpdmUoIHRoaXNfbW92ZS54LCB0aGlzX21vdmUueSwgdGhpc19tb3ZlLnogKTtcclxuXHRcdFx0XHRcdHRoaXNfbW92ZS5kZWxldGUoKTtcclxuXHRcdFx0XHRcdGRlbC5kZWxldGUoKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHJvdGF0ZSA6IGZ1bmN0aW9uKCBtLCBkZWx0YSApIHtcclxuXHRcdFx0XHRcdHZhciBpdGVyYXRpb25zID0gMTtcclxuXHJcblx0XHRcdFx0XHR2YXIgbWF4ID0gTWF0aC5hYnMoIHRoaXMucm90YXRpb24ueCApO1xyXG5cdFx0XHRcdFx0dmFyIHRtcCA9IE1hdGguYWJzKCB0aGlzLnJvdGF0aW9uLnkgKTtcclxuXHRcdFx0XHRcdGlmKCB0bXAgPiBtYXggKSB7XHJcblx0XHRcdFx0XHRcdG1heCA9IHRtcDtcclxuXHRcdFx0XHRcdFx0dG1wID0gTWF0aC5hYnMoIHRoaXMucm90YXRpb24ueiApO1xyXG5cdFx0XHRcdFx0XHRpZiggdG1wID4gbWF4ICkge1xyXG5cdFx0XHRcdFx0XHRcdG1heCA9IHRtcDtcclxuXHRcdFx0XHRcdFx0XHR3aGlsZSggKCAoIG1heCAqIGRlbHRhICkgLyBpdGVyYXRpb25zICkgPiAwLjEgKVxyXG5cdFx0XHRcdFx0XHRcdFx0aXRlcmF0aW9ucysrO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHdoaWxlKCAoICggbWF4ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnMgKSA+IDAuMSApXHJcblx0XHRcdFx0XHRcdFx0XHRpdGVyYXRpb25zKys7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRtcCA9IE1hdGguYWJzKCB0aGlzLnJvdGF0aW9uLnogKTtcclxuXHRcdFx0XHRcdFx0aWYoIHRtcCA+IG1heCApIHtcclxuXHRcdFx0XHRcdFx0XHRtYXggPSB0bXA7XHJcblx0XHRcdFx0XHRcdFx0d2hpbGUoICggKCBtYXggKiBkZWx0YSApIC8gaXRlcmF0aW9ucyApID4gMC4xIClcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZXJhdGlvbnMrKztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHR3aGlsZSggKCAoIG1heCAqIGRlbHRhICkgLyBpdGVyYXRpb25zICkgPiAwLjEgKVxyXG5cdFx0XHRcdFx0XHRcdFx0aXRlcmF0aW9ucysrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgZGVseCA9ICggdGhpcy5yb3RhdGlvbi54ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnM7XHJcblx0XHRcdFx0XHR2YXIgZGVseSA9ICggdGhpcy5yb3RhdGlvbi55ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnM7XHJcblx0XHRcdFx0XHR2YXIgZGVseiA9ICggdGhpcy5yb3RhdGlvbi56ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnM7XHJcblx0XHRcdFx0XHRmb3IoIHZhciBuID0gMDsgbiA8IGl0ZXJhdGlvbnM7IG4rKyApIHtcclxuXHRcdFx0XHRcdFx0bS5yb3RhdGVSZWxhdGl2ZSggZGVseCwgZGVseSwgZGVseiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gZGVsdGEgPSBkZWx0YSAvIDEwMDA7XHJcblx0XHRcdFx0XHQvKlxyXG5cdFx0XHRcdFx0ICAgKiogdGhpcyBpcyBiZWNvbWluZyBhIHBoeXNpY3MgZW5naW5lIGZyYW1lLi4uXHJcblx0XHRcdFx0XHQgICAqKiBtaWdodCBhcyB3ZWxsIGp1c3QgYWRkIHRoYXQuXHJcbiAgICAgICAgICAgICAgICBcdHZhciBkZWx0YV9hY2NlbCA9IHRoaXMuYWNjZWxlcmF0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoZGVsdGEpO1xyXG5cdFx0XHRcdFx0aWYoICggdGhpcy5yb3RhdGlvbi54ID4gKCBNYXRoLlBJIC8gNCApIClcclxuXHRcdFx0XHRcdCAgIHx8KCB0aGlzLnJvdGF0aW9uLnggPCAtKCBNYXRoLlBJIC8gNCApIClcclxuXHRcdFx0XHRcdCAgIHx8KCB0aGlzLnJvdGF0aW9uLnkgPiAoIE1hdGguUEkgLyA0ICkgKVxyXG5cdFx0XHRcdFx0ICAgfHwoIHRoaXMucm90YXRpb24ueSA8IC0oIE1hdGguUEkgLyA0ICkgKVxyXG5cdFx0XHRcdFx0ICAgfHwoIHRoaXMucm90YXRpb24ueiA+ICggTWF0aC5QSSAvIDQgKSApXHJcblx0XHRcdFx0XHQgICB8fCggdGhpcy5yb3RhdGlvbi56IDwgLSggTWF0aC5QSSAvIDQgKSApXHJcblx0XHRcdFx0XHQgICApe1xyXG5cdFx0XHRcdFx0XHQgICB2YXIgbWF4ID0gdGhpcy5yb3RhdGlvbi54O1xyXG5cdFx0XHRcdFx0XHQgICBpZiggbWF4IDwgdGhpcy5yb3RhdGlvbi55IClcclxuXHRcdFx0XHRcdFx0ICAgXHQgbWF4ID0gdGhpcy5yb3RhdGlvbi55O1xyXG5cdFx0XHRcdFx0XHQgICBpZiggbWF4IDwgdGhpcy5yb3RhdGlvbi56IClcclxuXHRcdFx0XHRcdFx0ICAgICBtYXggPSB0aGlzLnJvdGF0aW9uLno7XHJcblx0XHRcdFx0XHRcdCB2YXIgbWluID0gdGhpcy5yb3RhdGlvbi54O1xyXG4gIFx0XHRcdFx0XHRcdCAgIGlmKCBtaW4gPiB0aGlzLnJvdGF0aW9uLnkgKVxyXG4gIFx0XHRcdFx0XHRcdCAgIFx0IG1heCA9IHRoaXMucm90YXRpb24ueTtcclxuICBcdFx0XHRcdFx0XHQgICBpZiggbWluID4gdGhpcy5yb3RhdGlvbi56IClcclxuICBcdFx0XHRcdFx0XHQgICAgIG1heCA9IHRoaXMucm90YXRpb24uejtcclxuXHRcdFx0XHRcdFx0XHRpZiggbWluIDwgMCApXHJcblx0XHRcdFx0XHRcdFx0XHRpZiggbWF4IDwgLW1pbiApXHJcblx0XHRcdFx0XHRcdFx0XHRcdG1heCA9IC1taW47XHJcblx0XHRcdFx0XHRcdFx0dmFyIHQ7XHJcblx0XHRcdFx0XHRcdFx0Zm9yKCB0ID0gMTsgdCA8IDEwMDsgdCsrIClcclxuXHRcdFx0XHRcdFx0XHRcdGlmKCAoIG1heCAvIHQgKSA8ICggTWF0aC5QSSAvIDQgKSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGRlbHRhX2FjY2VsLnNjYWxlKCAxIC8gdCApO1xyXG5cdFx0XHRcdFx0ICAgfVxyXG5cdFx0XHRcdFx0ICAqL1xyXG5cdFx0XHRcdCAgfSxcclxuXHJcblxyXG5cdFx0XHRyb3RhdGUgOiBmdW5jdGlvbiggbSwgZGVsdGEgKSB7XHJcblx0XHRcdFx0dmFyIGl0ZXJhdGlvbnMgPSAxO1xyXG5cclxuXHRcdFx0XHR2YXIgbWF4ID0gTWF0aC5hYnMoIHRoaXMucm90YXRpb24ueCApO1xyXG5cdFx0XHRcdHZhciB0bXAgPSBNYXRoLmFicyggdGhpcy5yb3RhdGlvbi55ICk7XHJcblx0XHRcdFx0aWYoIHRtcCA+IG1heCApIHtcclxuXHRcdFx0XHRcdG1heCA9IHRtcDtcclxuXHRcdFx0XHRcdHRtcCA9IE1hdGguYWJzKCB0aGlzLnJvdGF0aW9uLnogKTtcclxuXHRcdFx0XHRcdGlmKCB0bXAgPiBtYXggKSB7XHJcblx0XHRcdFx0XHRcdG1heCA9IHRtcDtcclxuXHRcdFx0XHRcdFx0d2hpbGUoICggKCBtYXggKiBkZWx0YSApIC8gaXRlcmF0aW9ucyApID4gMC4xIClcclxuXHRcdFx0XHRcdFx0XHRpdGVyYXRpb25zKys7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR3aGlsZSggKCAoIG1heCAqIGRlbHRhICkgLyBpdGVyYXRpb25zICkgPiAwLjEgKVxyXG5cdFx0XHRcdFx0XHRcdGl0ZXJhdGlvbnMrKztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dG1wID0gTWF0aC5hYnMoIHRoaXMucm90YXRpb24ueiApO1xyXG5cdFx0XHRcdFx0aWYoIHRtcCA+IG1heCApIHtcclxuXHRcdFx0XHRcdFx0bWF4ID0gdG1wO1xyXG5cdFx0XHRcdFx0XHR3aGlsZSggKCAoIG1heCAqIGRlbHRhICkgLyBpdGVyYXRpb25zICkgPiAwLjEgKVxyXG5cdFx0XHRcdFx0XHRcdGl0ZXJhdGlvbnMrKztcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHdoaWxlKCAoICggbWF4ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnMgKSA+IDAuMSApXHJcblx0XHRcdFx0XHRcdFx0aXRlcmF0aW9ucysrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgZGVseCA9ICggdGhpcy5yb3RhdGlvbi54ICogZGVsdGEgKSAvIGl0ZXJhdGlvbnM7XHJcblx0XHRcdFx0dmFyIGRlbHkgPSAoIHRoaXMucm90YXRpb24ueSAqIGRlbHRhICkgLyBpdGVyYXRpb25zO1xyXG5cdFx0XHRcdHZhciBkZWx6ID0gKCB0aGlzLnJvdGF0aW9uLnogKiBkZWx0YSApIC8gaXRlcmF0aW9ucztcclxuXHRcdFx0XHRmb3IoIHZhciBuID0gMDsgbiA8IGl0ZXJhdGlvbnM7IG4rKyApIHtcclxuXHRcdFx0XHRcdG0ucm90YXRlUmVsYXRpdmUoIGRlbHgsIGRlbHksIGRlbHogKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gZGVsdGEgPSBkZWx0YSAvIDEwMDA7XHJcblx0XHRcdFx0LypcclxuXHRcdFx0XHRcdCAqKiB0aGlzIGlzIGJlY29taW5nIGEgcGh5c2ljcyBlbmdpbmUgZnJhbWUuLi5cclxuXHRcdFx0XHRcdCAqKiBtaWdodCBhcyB3ZWxsIGp1c3QgYWRkIHRoYXQuXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgZGVsdGFfYWNjZWwgPSB0aGlzLmFjY2VsZXJhdGlvbi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGRlbHRhKTtcclxuXHRcdFx0XHRpZiggKCB0aGlzLnJvdGF0aW9uLnggPiAoIE1hdGguUEkgLyA0ICkgKVxyXG5cdFx0XHRcdFx0IHx8KCB0aGlzLnJvdGF0aW9uLnggPCAtKCBNYXRoLlBJIC8gNCApIClcclxuXHRcdFx0XHRcdCB8fCggdGhpcy5yb3RhdGlvbi55ID4gKCBNYXRoLlBJIC8gNCApIClcclxuXHRcdFx0XHRcdCB8fCggdGhpcy5yb3RhdGlvbi55IDwgLSggTWF0aC5QSSAvIDQgKSApXHJcblx0XHRcdFx0XHQgfHwoIHRoaXMucm90YXRpb24ueiA+ICggTWF0aC5QSSAvIDQgKSApXHJcblx0XHRcdFx0XHQgfHwoIHRoaXMucm90YXRpb24ueiA8IC0oIE1hdGguUEkgLyA0ICkgKVxyXG5cdFx0XHRcdFx0ICl7XHJcblx0XHRcdFx0XHRcdCB2YXIgbWF4ID0gdGhpcy5yb3RhdGlvbi54O1xyXG5cdFx0XHRcdFx0XHQgaWYoIG1heCA8IHRoaXMucm90YXRpb24ueSApXHJcblx0XHRcdFx0XHRcdFx0IG1heCA9IHRoaXMucm90YXRpb24ueTtcclxuXHRcdFx0XHRcdFx0IGlmKCBtYXggPCB0aGlzLnJvdGF0aW9uLnogKVxyXG5cdFx0XHRcdFx0XHRcdCBtYXggPSB0aGlzLnJvdGF0aW9uLno7XHJcblx0XHRcdFx0XHQgdmFyIG1pbiA9IHRoaXMucm90YXRpb24ueDtcclxuXHRcdFx0XHRcdFx0XHQgaWYoIG1pbiA+IHRoaXMucm90YXRpb24ueSApXHJcblx0XHRcdFx0XHRcdFx0XHQgbWF4ID0gdGhpcy5yb3RhdGlvbi55O1xyXG5cdFx0XHRcdFx0XHRcdCBpZiggbWluID4gdGhpcy5yb3RhdGlvbi56IClcclxuXHRcdFx0XHRcdFx0XHRcdCBtYXggPSB0aGlzLnJvdGF0aW9uLno7XHJcblx0XHRcdFx0XHRcdGlmKCBtaW4gPCAwIClcclxuXHRcdFx0XHRcdFx0XHRpZiggbWF4IDwgLW1pbiApXHJcblx0XHRcdFx0XHRcdFx0XHRtYXggPSAtbWluO1xyXG5cdFx0XHRcdFx0XHR2YXIgdDtcclxuXHRcdFx0XHRcdFx0Zm9yKCB0ID0gMTsgdCA8IDEwMDsgdCsrIClcclxuXHRcdFx0XHRcdFx0XHRpZiggKCBtYXggLyB0ICkgPCAoIE1hdGguUEkgLyA0ICkpXHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0XHRcdGRlbHRhX2FjY2VsLnNjYWxlKCAxIC8gdCApO1xyXG5cdFx0XHRcdFx0IH1cclxuXHRcdFx0XHRcdCovXHJcblx0XHRcdFx0fVxyXG5cclxuXHQgICAgICAgIH07XHJcblx0fVxyXG5cdHJldHVybiB0aGlzLl9tb3Rpb247XHJcbn0gKTtcclxuXHJcblRIUkVFLk1hdHJpeDQucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oIFwib3JpZ2luXCIsIGZ1bmN0aW9uKCl7XHJcblx0aWYoICF0aGlzLl9vcmlnaW4gKXtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHRoaXMuX29yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfb3JpZ2luXCIsIHsgd3JpdGFibGU6ZmFsc2UgfSApO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCB0aGlzLl9vcmlnaW4sIFwieFwiLCB7XHJcblx0XHRcdGdldCA6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0cmV0dXJuIHNlbGYuZWxlbWVudHNbMTJdO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRzZXQgOiBmdW5jdGlvbih2KXtcclxuXHRcdFx0XHRzZWxmLmVsZW1lbnRzWzEyXSA9IHY7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIHRoaXMuX29yaWdpbiwgXCJ5XCIsIHtcclxuXHRcdFx0Z2V0IDogKCk9PntcclxuXHRcdFx0XHRyZXR1cm4gc2VsZi5lbGVtZW50c1sxM107XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldCA6ICh2KT0+e1xyXG5cdFx0XHRcdHNlbGYuZWxlbWVudHNbMTNdID0gdjtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5fb3JpZ2luLCBcInpcIiwge1xyXG5cdFx0XHRnZXQgOiAoKT0+e1xyXG5cdFx0XHRcdHJldHVybiBzZWxmLmVsZW1lbnRzWzE0XTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0IDogKHYpPT57XHJcblx0XHRcdFx0c2VsZi5lbGVtZW50c1sxNF0gPSB2O1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH1cclxuXHRyZXR1cm4gdGhpcy5fb3JpZ2luO1xyXG59ICk7XHJcblxyXG5cclxuXHJcblxyXG5USFJFRS5NYXRyaXg0LnByb3RvdHlwZS5yb3RhdGVPcnRobyA9IGZ1bmN0aW9uKCBhbmdsZSwgYXhpczEsIGF4aXMyICkge1xyXG5cdFx0aWYoICFhbmdsZSApIHJldHVybjtcclxuXHRcdC8vIDAgPSB4OyAgMFxyXG5cdFx0Ly8gMSA9IHk7ICA0XHJcblx0XHQvLyAyID0gejsgIDhcclxuXHRcdHZhciB0ZSA9IHRoaXMuZWxlbWVudHM7XHJcblx0XHR2YXIgc2EgPSBNYXRoLnNpbiggYW5nbGUgKTtcclxuXHRcdHZhciBjYSA9IE1hdGguY29zKCBhbmdsZSApO1xyXG4gICAgICAgIHN3aXRjaCggYXhpczEgKVx0e1xyXG5cdFx0XHRjYXNlIDA6IHN3aXRjaCggYXhpczIgKXtcclxuXHRcdFx0XHRjYXNlIDA6XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBheGlzIGNvbWJpbmF0aW9uLCBjYW5ub3Qgcm90YXRlIGF4aXMgdG93YXJkIGl0c2VsZlwiKVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgMTpcclxuXHRcdFx0XHRcdHZhciBzYXZlMXggPSB0ZVswXSwgc2F2ZTF5ID0gdGVbMV0sIHNhdmUxeiA9IHRlWzJdO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDF4ID0gdGVbMF0gKiBjYSwgdG1wMXkgPSB0ZVsxXSAqIGNhLCB0bXAxeiA9IHRlWzJdICogY2E7XHJcblx0XHRcdFx0XHR2YXIgdG1wMnggPSB0ZVs0XSAqIHNhLCB0bXAyeSA9IHRlWzVdICogc2EsIHRtcDJ6ID0gdGVbNl0gKiBzYTtcclxuXHRcdFx0XHRcdHRlWzBdID0gdG1wMXggLSB0bXAyeDsgdGVbMV0gPSB0bXAxeSAtIHRtcDJ5OyB0ZVsyXSA9IHRtcDF6IC0gdG1wMno7XHJcblx0XHRcdFx0XHR0bXAyeCA9IHNhdmUxeCAqIHNhOyB0bXAyeSA9IHNhdmUxeSAqIHNhOyB0bXAyeiA9IHNhdmUxeiAqIHNhO1xyXG5cdFx0XHRcdFx0dG1wMXggPSB0ZVs0XSAqIGNhOyB0bXAxeSA9IHRlWzVdICogY2E7IHRtcDF6ID0gdGVbNl0gKiBjYTtcclxuXHRcdFx0XHRcdHRlWzRdID0gdG1wMXggKyB0bXAyeDsgdGVbNV0gPSB0bXAxeSArIHRtcDJ5OyB0ZVs2XSA9IHRtcDF6ICsgdG1wMno7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0XHR2YXIgc2F2ZTF4ID0gdGVbMF0sIHNhdmUxeSA9IHRlWzFdLCBzYXZlMXogPSB0ZVsyXTtcclxuXHRcdFx0XHRcdHZhciB0bXAxeCA9IHRlWzBdICogY2EsIHRtcDF5ID0gdGVbMV0gKiBjYSwgdG1wMXogPSB0ZVsyXSAqIGNhO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDJ4ID0gdGVbOF0gKiBzYSwgdG1wMnkgPSB0ZVs5XSAqIHNhLCB0bXAyeiA9IHRlWzEwXSAqIHNhO1xyXG5cdFx0XHRcdFx0dGVbMF0gPSB0bXAxeCAtIHRtcDJ4OyB0ZVsxXSA9IHRtcDF5IC0gdG1wMnk7IHRlWzJdID0gdG1wMXogLSB0bXAyejtcclxuXHRcdFx0XHRcdHRtcDJ4ID0gc2F2ZTF4ICogc2E7IHRtcDJ5ID0gc2F2ZTF5ICogc2E7IHRtcDJ6ID0gc2F2ZTF6ICogc2E7XHJcblx0XHRcdFx0XHR0bXAxeCA9IHRlWzhdICogY2E7IHRtcDF5ID0gdGVbOV0gKiBjYTsgdG1wMXogPSB0ZVsxMF0gKiBjYTtcclxuXHRcdFx0XHRcdHRlWzhdID0gdG1wMXggKyB0bXAyeDsgdGVbOV0gPSB0bXAxeSArIHRtcDJ5OyB0ZVsxMF0gPSB0bXAxeiArIHRtcDJ6O1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgMTogc3dpdGNoKCBheGlzMiApe1xyXG5cdFx0XHRcdGNhc2UgMDpcclxuXHRcdFx0XHRcdHZhciBzYXZlMXggPSB0ZVs0XSwgc2F2ZTF5ID0gdGVbNV0sIHNhdmUxeiA9IHRlWzZdO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDF4ID0gdGVbNF0gKiBjYSwgdG1wMXkgPSB0ZVs1XSAqIGNhLCB0bXAxeiA9IHRlWzZdICogY2E7XHJcblx0XHRcdFx0XHR2YXIgdG1wMnggPSB0ZVswXSAqIHNhLCB0bXAyeSA9IHRlWzFdICogc2EsIHRtcDJ6ID0gdGVbMl0gKiBzYTtcclxuXHRcdFx0XHRcdHRlWzRdID0gdG1wMXggLSB0bXAyeDsgdGVbNV0gPSB0bXAxeSAtIHRtcDJ5OyB0ZVs2XSA9IHRtcDF6IC0gdG1wMno7XHJcblx0XHRcdFx0XHR0bXAyeCA9IHNhdmUxeCAqIHNhOyB0bXAyeSA9IHNhdmUxeSAqIHNhOyB0bXAyeiA9IHNhdmUxeiAqIHNhO1xyXG5cdFx0XHRcdFx0dG1wMXggPSB0ZVswXSAqIGNhOyB0bXAxeSA9IHRlWzFdICogY2E7IHRtcDF6ID0gdGVbMl0gKiBjYTtcclxuXHRcdFx0XHRcdHRlWzBdID0gdG1wMXggKyB0bXAyeDsgdGVbMV0gPSB0bXAxeSArIHRtcDJ5OyB0ZVsyXSA9IHRtcDF6ICsgdG1wMno7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBheGlzIGNvbWJpbmF0aW9uLCBjYW5ub3Qgcm90YXRlIGF4aXMgdG93YXJkIGl0c2VsZlwiKVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgMjpcclxuXHRcdFx0XHRcdHZhciBzYXZlMXggPSB0ZVs0XSwgc2F2ZTF5ID0gdGVbNV0sIHNhdmUxeiA9IHRlWzZdO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDF4ID0gdGVbNF0gKiBjYSwgdG1wMXkgPSB0ZVs1XSAqIGNhLCB0bXAxeiA9IHRlWzZdICogY2E7XHJcblx0XHRcdFx0XHR2YXIgdG1wMnggPSB0ZVs4XSAqIHNhLCB0bXAyeSA9IHRlWzldICogc2EsIHRtcDJ6ID0gdGVbMTBdICogc2E7XHJcblx0XHRcdFx0XHR0ZVs0XSA9IHRtcDF4IC0gdG1wMng7IHRlWzVdID0gdG1wMXkgLSB0bXAyeTsgdGVbNl0gPSB0bXAxeiAtIHRtcDJ6O1xyXG5cdFx0XHRcdFx0dG1wMnggPSBzYXZlMXggKiBzYTsgdG1wMnkgPSBzYXZlMXkgKiBzYTsgdG1wMnogPSBzYXZlMXogKiBzYTtcclxuXHRcdFx0XHRcdHRtcDF4ID0gdGVbOF0gKiBjYTsgdG1wMXkgPSB0ZVs5XSAqIGNhOyB0bXAxeiA9IHRlWzEwXSAqIGNhO1xyXG5cdFx0XHRcdFx0dGVbOF0gPSB0bXAxeCArIHRtcDJ4OyB0ZVs5XSA9IHRtcDF5ICsgdG1wMnk7IHRlWzEwXSA9IHRtcDF6ICsgdG1wMno7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgMjogc3dpdGNoKCBheGlzMiApe1xyXG5cdFx0XHRcdGNhc2UgMDpcclxuXHRcdFx0XHRcdHZhciBzYXZlMXggPSB0ZVs4XSwgc2F2ZTF5ID0gdGVbOV0sIHNhdmUxeiA9IHRlWzEwXTtcclxuXHRcdFx0XHRcdHZhciB0bXAxeCA9IHRlWzhdICogY2EsIHRtcDF5ID0gdGVbOV0gKiBjYSwgdG1wMXogPSB0ZVsxMF0gKiBjYTtcclxuXHRcdFx0XHRcdHZhciB0bXAyeCA9IHRlWzBdICogc2EsIHRtcDJ5ID0gdGVbMV0gKiBzYSwgdG1wMnogPSB0ZVsyXSAqIHNhO1xyXG5cdFx0XHRcdFx0dGVbOF0gPSB0bXAxeCAtIHRtcDJ4OyB0ZVs5XSA9IHRtcDF5IC0gdG1wMnk7IHRlWzEwXSA9IHRtcDF6IC0gdG1wMno7XHJcblx0XHRcdFx0XHR0bXAyeCA9IHNhdmUxeCAqIHNhOyB0bXAyeSA9IHNhdmUxeSAqIHNhOyB0bXAyeiA9IHNhdmUxeiAqIHNhO1xyXG5cdFx0XHRcdFx0dG1wMXggPSB0ZVswXSAqIGNhOyB0bXAxeSA9IHRlWzFdICogY2E7IHRtcDF6ID0gdGVbMl0gKiBjYTtcclxuXHRcdFx0XHRcdHRlWzBdID0gdG1wMXggKyB0bXAyeDsgdGVbMV0gPSB0bXAxeSArIHRtcDJ5OyB0ZVsyXSA9IHRtcDF6ICsgdG1wMno7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdFx0dmFyIHNhdmUxeCA9IHRlWzhdLCBzYXZlMXkgPSB0ZVs5XSwgc2F2ZTF6ID0gdGVbMTBdO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDF4ID0gdGVbOF0gKiBjYSwgdG1wMXkgPSB0ZVs5XSAqIGNhLCB0bXAxeiA9IHRlWzEwXSAqIGNhO1xyXG5cdFx0XHRcdFx0dmFyIHRtcDJ4ID0gdGVbNF0gKiBzYSwgdG1wMnkgPSB0ZVs1XSAqIHNhLCB0bXAyeiA9IHRlWzZdICogc2E7XHJcblx0XHRcdFx0XHR0ZVs4XSA9IHRtcDF4IC0gdG1wMng7IHRlWzldID0gdG1wMXkgLSB0bXAyeTsgdGVbMTBdID0gdG1wMXogLSB0bXAyejtcclxuXHRcdFx0XHRcdHRtcDJ4ID0gc2F2ZTF4ICogc2E7IHRtcDJ5ID0gc2F2ZTF5ICogc2E7IHRtcDJ6ID0gc2F2ZTF6ICogc2E7XHJcblx0XHRcdFx0XHR0bXAxeCA9IHRlWzRdICogY2E7IHRtcDF5ID0gdGVbNV0gKiBjYTsgdG1wMXogPSB0ZVs2XSAqIGNhO1xyXG5cdFx0XHRcdFx0dGVbNF0gPSB0bXAxeCArIHRtcDJ4OyB0ZVs1XSA9IHRtcDF5ICsgdG1wMnk7IHRlWzZdID0gdG1wMXogKyB0bXAyejtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBheGlzIGNvbWJpbmF0aW9uLCBjYW5ub3Qgcm90YXRlIGF4aXMgdG93YXJkIGl0c2VsZlwiKVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG4gICAgfTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5UcmFuc2xhdGUgPSBmdW5jdGlvbih4LHkseikge1xyXG5cdFx0XHR0aGlzLm9yaWdpbi54ID0geDtcclxuXHRcdFx0dGhpcy5vcmlnaW4ueSA9IHk7XHJcblx0XHRcdHRoaXMub3JpZ2luLnogPSB6O1xyXG5cdH07XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUucm90YXRlUmVsYXRpdmUgPSBmdW5jdGlvbiggeCwgeSwgeiApe1xyXG5cdFx0Ly9jb25zb2xlLnRyYWNlKCBcInJvdGF0ZSBzdGFydHMgYXMgXCIsIHRoaXMgKVxyXG5cdFx0aWYoIHR5cGVvZiB0aGlzLnRpY2sgPT09IFwidW5kZWZpbmVkXCIgKSB0aGlzLnRpY2sgPSAwO1xyXG5cdFx0c3dpdGNoKCB0aGlzLnRpY2srKyApIHtcclxuXHRcdFx0Y2FzZSAwOlxyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHgsIDEsIDIgKTtcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB5LCAwLCAyICk7XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeiwgMCwgMSApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeSwgMCwgMiApO1xyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHgsIDEsIDIgKTtcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB6LCAwLCAxICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgMjpcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB6LCAwLCAxICk7XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeCwgMSwgMiApO1xyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHksIDAsIDIgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAzOlxyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHgsIDEsIDIgKTtcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB6LCAwLCAxICk7XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeSwgMCwgMiApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDQ6XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeSwgMCwgMiApO1xyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHosIDAsIDEgKTtcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB4LCAxLCAyICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgNTpcclxuXHRcdFx0XHR0aGlzLnJvdGF0ZU9ydGhvKCB6LCAwLCAxICk7XHJcblx0XHRcdFx0dGhpcy5yb3RhdGVPcnRobyggeSwgMCwgMiApO1xyXG5cdFx0XHRcdHRoaXMucm90YXRlT3J0aG8oIHgsIDEsIDIgKTtcclxuXHRcdFx0XHR0aGlzLnRpY2sgPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXyggXCJsZWZ0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gVEhSRUUuVmVjdG9yM1Bvb2wubmV3KCB0aGlzLmVsZW1lbnRzWzBdLCB0aGlzLmVsZW1lbnRzWzFdLCB0aGlzLmVsZW1lbnRzWzJdICk7XHJcbiAgICAgICAgfSApO1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oIFwicmlnaHRcIiwgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiBUSFJFRS5WZWN0b3IzUG9vbC5uZXcoIC10aGlzLmVsZW1lbnRzWzBdLCAtdGhpcy5lbGVtZW50c1sxXSwgLXRoaXMuZWxlbWVudHNbMl0gKTtcclxuXHR9ICk7XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXyggXCJ1cFwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIFx0cmV0dXJuIFRIUkVFLlZlY3RvcjNQb29sLm5ldyggdGhpcy5lbGVtZW50c1s0XSwgdGhpcy5lbGVtZW50c1s1XSwgdGhpcy5lbGVtZW50c1s2XSApO1xyXG4gICAgICAgIH0gKTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcImRvd25cIiwgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiBUSFJFRS5WZWN0b3IzUG9vbC5uZXcoIC10aGlzLmVsZW1lbnRzWzRdLCAtdGhpcy5lbGVtZW50c1s1XSwgLXRoaXMuZWxlbWVudHNbNl0gKTtcclxuICAgICAgICB9ICk7XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXyggXCJmb3J3YXJkXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gVEhSRUUuVmVjdG9yM1Bvb2wubmV3KCAtdGhpcy5lbGVtZW50c1s4XSwgLXRoaXMuZWxlbWVudHNbOV0sIC10aGlzLmVsZW1lbnRzWzEwXSApO1xyXG4gICAgICAgIH0gKTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcImJhY2t3YXJkXCIsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4gVEhSRUUuVmVjdG9yM1Bvb2wubmV3KCB0aGlzLmVsZW1lbnRzWzhdLCB0aGlzLmVsZW1lbnRzWzldLCB0aGlzLmVsZW1lbnRzWzEwXSApO1xyXG4gICAgICAgIH0gKTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKHRpY2spIHtcclxuICAgICAgICBcdGlmKCB0aGlzLm1vdGlvbiApXHJcblx0XHRcdFx0dGhpcy5tb3Rpb24ubW92ZSggdGhpcywgdGljayApO1xyXG4gICAgICAgIFx0Ly90aGlzLm9yaWdpbi5hZGRTY2FsZWRWZWN0b3IoIHRoaXMuZm9yd2FyZCwgeiApLmFkZFNjYWxlZFZlY3RvciggdGhpcy51cCwgeSApLmFkZFNjYWxlZFZlY3RvciggdGhpcy5sZWZ0LCB4IClcclxuXHRcdH07XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUubW92ZU5vdyA9IGZ1bmN0aW9uICggeCx5LHogKSB7IHRoaXMub3JpZ2luLmFkZFNjYWxlZFZlY3RvciggdGhpcy5mb3J3YXJkLCB6ICkuYWRkU2NhbGVkVmVjdG9yKCB0aGlzLnVwLCB5ICkuYWRkU2NhbGVkVmVjdG9yKCB0aGlzLmxlZnQsIHggKSB9O1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLm1vdmVGb3J3YXJkID0gZnVuY3Rpb24gKCBuICkgeyB0aGlzLm9yaWdpbi5hZGRTY2FsZWRWZWN0b3IoIHRoaXMuZm9yd2FyZCwgbiApOyB9O1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLm1vdmVVcCA9IGZ1bmN0aW9uICggbiApIHsgdGhpcy5vcmlnaW4uYWRkU2NhbGVkVmVjdG9yKCB0aGlzLnVwLCBuICk7IH07XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUubW92ZUxlZnQgPSBmdW5jdGlvbiAoIG4gKSB7IHRoaXMub3JpZ2luLmFkZFNjYWxlZFZlY3RvciggdGhpcy5sZWZ0LCBuICk7IH07XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUubW92ZUJhY2t3YXJkID0gZnVuY3Rpb24gKCBuICkgeyB0aGlzLm9yaWdpbi5hZGRTY2FsZWRWZWN0b3IoIHRoaXMuYmFja3dhcmQsIG4gKTsgfTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5tb3ZlRG93biA9IGZ1bmN0aW9uICggbiApIHsgdGhpcy5vcmlnaW4uYWRkU2NhbGVkVmVjdG9yKCB0aGlzLmRvd24sIG4gKTsgfTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5tb3ZlUmlnaHQgPSBmdW5jdGlvbiAoIG4gKSB7IHRoaXMub3JpZ2luLmFkZFNjYWxlZFZlY3RvciggdGhpcy5yaWdodCwgbiApOyB9O1xyXG5cclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcImludl9sZWZ0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gVmVjdG9yM1Bvb2wubmV3KCB0aGlzLmVsZW1lbnRzWzBdLCB0aGlzLmVsZW1lbnRzWzRdLCB0aGlzLmVsZW1lbnRzWzhdICk7XHJcbiAgICAgICAgfSApO1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oIFwiaW52X3VwXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHRyZXR1cm4gVmVjdG9yM1Bvb2wubmV3KCB0aGlzLmVsZW1lbnRzWzFdLCB0aGlzLmVsZW1lbnRzWzVdLCB0aGlzLmVsZW1lbnRzWzldICk7XHJcbiAgICAgICAgfSApO1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oIFwiaW52X2ZvcndhcmRcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICBcdHJldHVybiBWZWN0b3IzUG9vbC5uZXcoIHRoaXMuZWxlbWVudHNbMl0sIHRoaXMuZWxlbWVudHNbNl0sIHRoaXMuZWxlbWVudHNbMTBdICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5nZXRSb2xsID0gZnVuY3Rpb24oIHJlbGF0aXZlVXAgKSB7XHJcblx0XHQvL2lmKCAhcmVsYXRpdmVVcCApIHJlbGF0aXZlVXAgPSBUSFJFRS5WZWN0b3IzVXA7XHJcblx0XHRyZXR1cm4gTWF0aC5hc2luKCB0aGlzLnJpZ2h0LmRvdCggcmVsYXRpdmVVcCApICk7XHJcblx0fTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5nZXRQaXRjaCA9IGZ1bmN0aW9uKCByZWxhdGl2ZUZvcndhcmQgKSB7XHJcblx0XHQvL2lmKCAhcmVsYXRpdmVGb3J3YXJkICkgcmVsYXRpdmVGb3J3YXJkID0gVEhSRUUuVmVjdG9yM0ZvcndhcmQ7XHJcblx0XHRyZXR1cm4gTWF0aC5hc2luKCB0aGlzLnVwLmRvdCggcmVsYXRpdmVGb3J3YXJkICkgKTtcclxuXHR9O1xyXG5cdFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLmdldFlhdyA9IGZ1bmN0aW9uKCByZWxhdGl2ZVJpZ2h0ICkge1xyXG5cdFx0Ly9pZiggIXJlbGF0aXZlUmlnaHQgKSByZWxhdGl2ZVJpZ2h0ID0gVEhSRUUuVmVjdG9yM1JpZ2h0O1xyXG5cdFx0cmV0dXJuIE1hdGguYXNpbiggdGhpcy5mb3J3YXJkLmRvdCggcmVsYXRpdmVSaWdodCApICk7XHJcblx0fTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcInJvbGxcIiwgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB0aGlzLmdldFJvbGwoIFRIUkVFLlZlY3RvcjNVcCApO1xyXG5cdH0gKTtcclxuXHRUSFJFRS5NYXRyaXg0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKCBcInBpdGNoXCIsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRQaXRjaCggVEhSRUUuVmVjdG9yM0ZvcndhcmQgKTtcclxuXHR9ICk7XHJcblx0VEhSRUUuTWF0cml4NC5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXyggXCJ5YXdcIiwgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB0aGlzLmdldFlhdyggVEhSRUUuVmVjdG9yM1JpZ2h0ICk7XHJcblx0fSApO1xyXG59XG4iLCJcclxuaWYoIHR5cGVvZiBWb3hlbGFyaXVtID09PSBcInVuZGVmaW5lZFwiICl7XHJcbiAgICB0aGlzLlZveGVsYXJpdW0gPSB7fTtcclxuLy9cdHZhciBWb3hlbGFyaXVtO1xyXG59XHJcblxyXG5Wb3hlbGFyaXVtID0geyBWRVJTSU9OIDogXCIwLjAuMVwiLFxyXG4gIFNldHRpbmdzIDoge1xyXG4gICAgIFZSIDogdHJ1ZSxcclxuICAgICBBbHRTcGFjZSA6IHRydWUsXHJcbiAgICAgIHVzZV9iYXNpY19tYXRlcmlhbCA6IHRydWUsXHJcbiAgICAgIHVzZV92aXZlIDogdHJ1ZSxcclxuICB9XHJcbn07XHJcblxyXG5pZiggdHlwZW9mIHVwZGF0ZVZveGVsYXJpdW1TZXR0aW5ncyA9PT0gJ2Z1bmN0aW9uJyApe1xyXG4gIHVwZGF0ZVZveGVsYXJpdW1TZXR0aW5ncygpO1xyXG59XHJcblxyXG5PYmplY3QuZnJlZXplKCBWb3hlbGFyaXVtLlNldHRpbmdzICk7XHJcblxyXG5pZiggIFRIUkVFID09PSBudWxsICkge1xyXG4vL1x0VEhSRUUgPSByZXF1aXJlKCBcIi4vdGhyZWUuanMuNzQvYnVpbGQvdGhyZWUuanNcIilcclxufVxyXG5cdHJlcXVpcmUoIFwiLi90aHJlZS5qcy9wZXJzb25hbEZpbGwuanNcIilcclxuXHJcbi8vaWYoIFZveGVsYXJpdW0uU2V0dGluZ3MuQWx0U3BhY2UgKVxyXG4vLyAgIHZhciBhbHRzcGFjZSA9IHJlcXVpcmUoIFwiLi9BbHRTcGFjZVZSL2Rpc3QvYWx0c3BhY2UuanNcIiApO1xyXG5cclxuVm94ZWxhcml1bS5TdGF0cyA9ICghVm94ZWxhcml1bS5TZXR0aW5ncy5WUik/cmVxdWlyZSggJy4vdGhyZWUuanMvanMvc3RhdHMubWluLmpzJyApOmZ1bmN0aW9uKCl7fTtcclxuaWYoICFWb3hlbGFyaXVtLlNldHRpbmdzLkFsdFNwYWNlICYmIFZveGVsYXJpdW0uU2V0dGluZ3MuVlIgKSB7XHJcbiAgcmVxdWlyZSggJy4vdGhyZWUuanMvanMvY29udHJvbHMvVlJDb250cm9scy5qcycgKTtcclxuICByZXF1aXJlKCAnLi90aHJlZS5qcy9qcy9lZmZlY3RzL1ZSRWZmZWN0LmpzJyApO1xyXG5cclxuICByZXF1aXJlKCAnLi90aHJlZS5qcy9qcy92ci9WaXZlQ29udHJvbGxlci5qcycgKTtcclxuICByZXF1aXJlKCAnLi90aHJlZS5qcy9qcy92ci9QYWludFZpdmVDb250cm9sbGVyLmpzJyApO1xyXG4gIHJlcXVpcmUoICcuL3RocmVlLmpzL2pzL3ZyL1dlYlZSLmpzJyApO1xyXG4gIHJlcXVpcmUoICcuL3RocmVlLmpzL2pzL2xvYWRlcnMvT0JKTG9hZGVyLmpzJyApO1xyXG59XHJcblxyXG5Wb3hlbGFyaXVtLmNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKClcclxuXHJcblxyXG5pZiggIVZveGVsYXJpdW0uU2V0dGluZ3MuVlIgKSB7XG4gIHJlcXVpcmUoIFwiLi9vcmJpdF9jb250cm9scy5qc1wiIClcclxuICByZXF1aXJlKCBcIi4vTmF0dXJhbENhbWVyYS5qc1wiIClcclxuICByZXF1aXJlKCBcIi4vZ2FtZU1vdXNlLmpzXCIgKVxyXG59XG5cbmlmKCAhVm94ZWxhcml1bS5TZXR0aW5ncy51c2VfYmFzaWNfbWF0ZXJpYWwgKVxuXHRyZXF1aXJlKCBcIi4vZ2xvdy5yZW5kZXJlci5qc1wiICk7XG5cclxucmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5leGFtcGxlL1Byb2plY3Rvci5qc1wiIClcbnJlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9zaGFkZXJzL0NvcHlTaGFkZXIuanNcIilcbnJlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9zaGFkZXJzL0hvcml6b250YWxCbHVyU2hhZGVyLmpzXCIpXG5yZXF1aXJlKCBcIi4vc3JjL3RocmVlLmpzLnBvc3Qvc2hhZGVycy9WZXJ0aWNhbEJsdXJTaGFkZXIuanNcIilcbi8vcmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L3NoYWRlcnMvQ29udm9sdXRpb25TaGFkZXIuanNcIilcbi8vcmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L3NoYWRlcnMvRG90U2NyZWVuU2hhZGVyLmpzXCIpXG4vL3JlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9zaGFkZXJzL0ZpbG1TaGFkZXIuanNcIilcbnJlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9FZmZlY3RDb21wb3Nlci5qc1wiKVxucmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L0Jsb29tUGFzcy5qc1wiKVxuXG5cbi8vcmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L0FkYXB0aXZlVG9uZU1hcHBpbmdQYXNzLmpzXCIpXG4vL3JlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9Cb2tlaFBhc3MuanNcIilcbnJlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9DbGVhclBhc3MuanNcIilcbi8vcmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L0RvdFNjcmVlblBhc3MuanNcIilcbi8vcmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L0ZpbG1QYXNzLmpzXCIpXG4vL3JlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9HbGl0Y2hQYXNzLmpzXCIpXG4vL3JlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9NYW51YWxNU0FBUmVuZGVyUGFzcy5qc1wiKVxucmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L01hc2tQYXNzLmpzXCIpXG5yZXF1aXJlKCBcIi4vc3JjL3RocmVlLmpzLnBvc3QvUmVuZGVyUGFzcy5qc1wiKVxuLy9yZXF1aXJlKCBcIi4vc3JjL3RocmVlLmpzLnBvc3QvU2F2ZVBhc3MuanNcIilcbnJlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9TaGFkZXJQYXNzLmpzXCIpXG4vL3JlcXVpcmUoIFwiLi9zcmMvdGhyZWUuanMucG9zdC9TTUFBUGFzcy5qc1wiKVxuLy9yZXF1aXJlKCBcIi4vc3JjL3RocmVlLmpzLnBvc3QvVEFBUmVuZGVyUGFzcy5qc1wiKVxucmVxdWlyZSggXCIuL3NyYy90aHJlZS5qcy5wb3N0L1RleHR1cmVQYXNzLmpzXCIpXG5cclxuVm94ZWxhcml1bS5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDkwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4wMDEsIDEwMDAwICk7XHJcbi8vY29uc29sZS5sb2coIFZveGVsYXJpdW0uY2FtZXJhLnByb2plY3Rpb25NYXRyaXgudG9BcnJheSgpIClcclxucmVxdWlyZSggXCIuL3NyYy92b3hlbGFyaXVtLmd1bi5kYi5qc1wiIClcblxuLy8tLS0gZm9udHMgLS0tXHJcblZveGVsYXJpdW0uRm9udHMgPSB7fTtcclxucmVxdWlyZSggXCIuL3NyYy9mb250cy9USTk5LmpzXCIpXHJcbi8vcmVxdWlyZSggXCIuL3NyYy9mb250cy9tc3loMS5qc1wiKVxyXG5cclxucmVxdWlyZSggXCIuL3NyYy9jb25zdGFudHMuanNcIilcclxucmVxdWlyZSggXCIuL3NyYy9iaXRzdHJlYW0uanNcIikgIC8vIHJlYWQgYW5kIHdyaXRlIGJpdHNcclxuXHJcbnJlcXVpcmUoIFwiLi9zcmMvc2VjdG9yLmpzXCIpXHJcbnJlcXVpcmUoIFwiLi9zcmMvY2x1c3Rlci5qc1wiKVxyXG5yZXF1aXJlKCBcIi4vc3JjL3dvcmxkLmpzXCIpXHJcblxyXG5yZXF1aXJlKCBcIi4vc3JjL2dlb21ldHJ5YmFzaWNidWZmZXIuanNcIilcclxucmVxdWlyZSggXCIuL3NyYy9nZW9tZXRyeWJ1ZmZlci5qc1wiKVxyXG5yZXF1aXJlKCBcIi4vc3JjL2dlb21ldHJ5bWF0ZXJpYWwuanNcIilcclxucmVxdWlyZSggXCIuL3NyYy9nZW9tZXRyeWJ1ZmZlci5tb25vLmpzXCIpXHJcbnJlcXVpcmUoIFwiLi9zcmMvZ2VvbWV0cnltYXRlcmlhbC5tb25vLmpzXCIpXHJcbnJlcXVpcmUoIFwiLi9zcmMvdGV4dHVyZUF0bGFzLmNhbnZhcy5qc1wiKVxyXG5cclxucmVxdWlyZSggXCIuL3NyYy92b3hlbFNlbGVjdG9yLmpzXCIpXHJcblxyXG5yZXF1aXJlKCBcIi4vc3JjL3NvcnRpbmcudHJlZS5qc1wiKVxyXG5yZXF1aXJlKCBcIi4vc3JjL21lc2hlci5iYXNpYy5qc1wiKVxyXG5cclxucmVxdWlyZSggXCIuL3NyYy92b3hlbHMuanNcIiApICAvLyBtdXN0IGJlIGFmdGVyIGF0bGFzXHJcblxyXG5cclxucmVxdWlyZSggXCIuL3NyYy92b3hlbF9pbnZlbnRvcnkuanNcIikgIC8vIG11c3QgYmUgYWZ0ZXIgdm94ZWxzXHJcbi8vT2JqZWN0LmZyZWV6ZSggVm94ZWxhcml1bSApO1xyXG4vL1ZveGVsYXJpdW0uZnJlZXplKCk7XHJcbiJdfQ==
